# nginx stream config for end-to-end HTTP/3 (Hypercorn terminates QUIC).
# Apply when EDGE_MODE=h3-pass-through.

stream {
    upstream hypercorn_h3 {
        server 127.0.0.1:8443;
    }

    server {
        listen 443;
        proxy_pass hypercorn_h3;
        proxy_protocol off;
    }

    server {
        listen 443 udp reuseport;
        proxy_pass hypercorn_h3;
    }
}

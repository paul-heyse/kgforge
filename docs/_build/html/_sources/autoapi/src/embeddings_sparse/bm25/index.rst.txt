src.embeddings_sparse.bm25
==========================

.. py:module:: src.embeddings_sparse.bm25

.. autoapi-nested-parse::

   Bm25 utilities.

   ..
       !! processed by numpydoc !!






Module Contents
---------------

.. py:class:: BM25Doc

   
   Describe BM25Doc.
















   ..
       !! processed by numpydoc !!

   .. py:attribute:: doc_id
      :type:  str


   .. py:attribute:: length
      :type:  int


   .. py:attribute:: fields
      :type:  dict[str, str]


.. py:class:: PurePythonBM25(index_dir, k1 = 0.9, b = 0.4, field_boosts = None)

   
   Describe PurePythonBM25.
















   ..
       !! processed by numpydoc !!

   .. py:attribute:: index_dir


   .. py:attribute:: k1
      :value: 0.9



   .. py:attribute:: b
      :value: 0.4



   .. py:attribute:: field_boosts


   .. py:attribute:: df
      :type:  dict[str, int]


   .. py:attribute:: postings
      :type:  dict[str, dict[str, int]]


   .. py:attribute:: docs
      :type:  dict[str, BM25Doc]


   .. py:attribute:: N
      :value: 0



   .. py:attribute:: avgdl
      :value: 0.0



   .. py:method:: _tokenize(text)
      :staticmethod:


      
      Return tokenize.

      :param text: Description for ``text``.
      :type text: str

      :returns: *List[str]* -- Description of return value.















      ..
          !! processed by numpydoc !!


   .. py:method:: build(docs_iterable)

      
      Return build.

      :param docs_iterable: Description for ``docs_iterable``.
      :type docs_iterable: Iterable[Tuple[str, dict[str, str]]]















      ..
          !! processed by numpydoc !!


   .. py:method:: load()

      
      Return load.
















      ..
          !! processed by numpydoc !!


   .. py:method:: _idf(term)

      
      Return idf.

      :param term: Description for ``term``.
      :type term: str

      :returns: *float* -- Description of return value.















      ..
          !! processed by numpydoc !!


   .. py:method:: search(query, k, fields = None)

      
      Return search.

      :param query: Description for ``query``.
      :type query: str
      :param k: Description for ``k``.
      :type k: int
      :param fields: Description for ``fields``.
      :type fields: Mapping[str, str] | None

      :returns: *List[Tuple[str, float]]* -- Description of return value.















      ..
          !! processed by numpydoc !!


.. py:class:: LuceneBM25(index_dir, k1 = 0.9, b = 0.4, field_boosts = None)

   
   Describe LuceneBM25.
















   ..
       !! processed by numpydoc !!

   .. py:attribute:: index_dir


   .. py:attribute:: k1
      :value: 0.9



   .. py:attribute:: b
      :value: 0.4



   .. py:attribute:: field_boosts


   .. py:attribute:: _searcher
      :type:  Any | None
      :value: None



   .. py:method:: build(docs_iterable)

      
      Return build.

      :param docs_iterable: Description for ``docs_iterable``.
      :type docs_iterable: Iterable[Tuple[str, dict[str, str]]]

      :raises RuntimeError: Raised when validation fails.















      ..
          !! processed by numpydoc !!


   .. py:method:: _ensure_searcher()

      
      Return ensure searcher.
















      ..
          !! processed by numpydoc !!


   .. py:method:: search(query, k, fields = None)

      
      Return search.

      :param query: Description for ``query``.
      :type query: str
      :param k: Description for ``k``.
      :type k: int
      :param fields: Description for ``fields``.
      :type fields: Mapping[str, str] | None

      :returns: *List[Tuple[str, float]]* -- Description of return value.

      :raises RuntimeError: Raised when validation fails.















      ..
          !! processed by numpydoc !!


.. py:function:: get_bm25(backend, index_dir, *, k1 = 0.9, b = 0.4, field_boosts = None)

   
   Return get bm25.

   :param backend: Description for ``backend``.
   :type backend: str
   :param index_dir: Description for ``index_dir``.
   :type index_dir: str
   :param k1: Description for ``k1``.
   :type k1: float | None
   :param b: Description for ``b``.
   :type b: float | None
   :param field_boosts: Description for ``field_boosts``.
   :type field_boosts: Mapping[str, float] | None

   :returns: *PurePythonBM25 | LuceneBM25* -- Description of return value.















   ..
       !! processed by numpydoc !!


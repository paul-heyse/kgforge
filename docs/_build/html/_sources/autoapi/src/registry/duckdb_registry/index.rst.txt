src.registry.duckdb_registry
============================

.. py:module:: src.registry.duckdb_registry

.. autoapi-nested-parse::

   Module for registry.duckdb_registry.

   NavMap:
   - NavMap: Structure describing a module navmap.
   - DuckDBRegistry: Persist pipeline artefacts and events inside a DuckDBâ€¦.





Module Contents
---------------

.. py:class:: DuckDBRegistry(db_path)

   Persist pipeline artefacts and events inside a DuckDB catalog.


   .. py:attribute:: db_path


   .. py:attribute:: con


   .. py:method:: begin_dataset(kind, run_id)

      Create a dataset placeholder linked to an in-flight run.



   .. py:method:: commit_dataset(dataset_id, parquet_root, rows)

      Finalize the dataset by recording its parquet root.



   .. py:method:: rollback_dataset(dataset_id)

      Discard a dataset that failed to materialise.



   .. py:method:: insert_run(purpose, model_id, revision, config)

      Record a new pipeline run and return its identifier.



   .. py:method:: close_run(run_id, success, notes = None)

      Mark a run as finished, optionally storing completion notes.



   .. py:method:: register_documents(docs)

      Insert or update document metadata rows.



   .. py:method:: register_doctags(assets)

      Persist doctag asset metadata for downstream retrieval.



   .. py:method:: emit_event(event_name, subject_id, payload)

      Append a pipeline event row for observability.



   .. py:method:: incident(event, subject_id, error_class, message)

      Record an incident with lightweight context for debugging.




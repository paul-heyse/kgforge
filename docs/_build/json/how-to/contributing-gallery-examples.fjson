{"parents": [{"link": "../", "title": "How-to Guides"}], "prev": {"link": "../contributing/", "title": "Contributing Docstrings and Documentation"}, "next": {"link": "../../explanations/", "title": "Explanations"}, "title": "Contributing Sphinx-Gallery Examples", "meta": {"myst_slugs": {"contributing-sphinx-gallery-examples": [1, "contributing-sphinx-gallery-examples", "Contributing Sphinx-Gallery Examples"], "quick-start-checklist": [9, "quick-start-checklist", "Quick start checklist"], "docstring-template-docstring-template": [19, "docstring-template-docstring-template", "Docstring template {#docstring-template}"], "title-and-underline": [47, "title-and-underline", "Title and underline"], "tags-directive": [54, "tags-directive", "Tags directive"], "constraints-section": [60, "constraints-section", "Constraints section"], "doctests": [66, "doctests", "Doctests"], "validation-tooling": [72, "validation-tooling", "Validation tooling"], "cli-options": [82, "cli-options", "CLI options"], "common-validation-errors": [93, "common-validation-errors", "Common validation errors"], "local-testing-workflow": [104, "local-testing-workflow", "Local testing workflow"], "debugging-sphinx-gallery-issues": [113, "debugging-sphinx-gallery-issues", "Debugging Sphinx-Gallery issues"]}, "wordcount": {"words": 441, "minutes": 2}}, "body": "<section id=\"contributing-sphinx-gallery-examples\">\n<h1>Contributing Sphinx-Gallery Examples<a class=\"headerlink\" href=\"#contributing-sphinx-gallery-examples\" title=\"Link to this heading\">#</a></h1>\n<p>Sphinx-Gallery builds our example gallery directly from the Python modules in\n<code class=\"docutils literal notranslate\"><span class=\"pre\">examples/</span></code>. Every file must follow a predictable docstring structure so the\ngenerated pages have stable titles and cross-reference anchors. This guide walks\nthrough the required format, explains the validation tooling, and provides\ntroubleshooting tips for common issues.</p>\n<section id=\"quick-start-checklist\">\n<h2>Quick start checklist<a class=\"headerlink\" href=\"#quick-start-checklist\" title=\"Link to this heading\">#</a></h2>\n<ol class=\"arabic simple\">\n<li><p>Copy the docstring template below.</p></li>\n<li><p>Update the title and description to match your example.</p></li>\n<li><p>Tag the example with relevant keywords using the <code class=\"docutils literal notranslate\"><span class=\"pre\">..</span> <span class=\"pre\">tags::</span></code> directive.</p></li>\n<li><p>Describe resource expectations inside the <code class=\"docutils literal notranslate\"><span class=\"pre\">Constraints</span></code> section.</p></li>\n<li><p>Run <code class=\"docutils literal notranslate\"><span class=\"pre\">python</span> <span class=\"pre\">tools/validate_gallery.py</span> <span class=\"pre\">--verbose</span></code> before committing.</p></li>\n<li><p>Execute <code class=\"docutils literal notranslate\"><span class=\"pre\">pytest</span> <span class=\"pre\">--doctest-modules</span> <span class=\"pre\">examples/&lt;your-file&gt;.py</span></code> to confirm code\nsnippets still run.</p></li>\n</ol>\n</section>\n<section id=\"docstring-template-docstring-template\">\n<h2>Docstring template {#docstring-template}<a class=\"headerlink\" href=\"#docstring-template-docstring-template\" title=\"Link to this heading\">#</a></h2>\n<p>Each example begins with a module-level docstring that Sphinx-Gallery parses to\ncreate the page heading. The first non-empty line becomes the HTML title and is\nalso used to derive the <code class=\"docutils literal notranslate\"><span class=\"pre\">sphx_glr_</span></code> reference label.</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"sd\">&quot;&quot;&quot;My concise title (\u226479 characters)</span>\n<span class=\"sd\">====================================</span>\n\n<span class=\"sd\">One or two sentences describing what the example demonstrates.</span>\n\n<span class=\"sd\">.. tags:: topic-one, topic-two</span>\n\n<span class=\"sd\">Constraints</span>\n<span class=\"sd\">-----------</span>\n\n<span class=\"sd\">- Time: &lt;2s</span>\n<span class=\"sd\">- GPU: no</span>\n<span class=\"sd\">- Network: no</span>\n\n<span class=\"sd\">&gt;&gt;&gt; # Optional doctest snippets</span>\n<span class=\"sd\">&gt;&gt;&gt; answer = 40 + 2</span>\n<span class=\"sd\">&gt;&gt;&gt; answer</span>\n<span class=\"sd\">42</span>\n<span class=\"sd\">&quot;&quot;&quot;</span>\n</pre></div>\n</div>\n<section id=\"title-and-underline\">\n<h3>Title and underline<a class=\"headerlink\" href=\"#title-and-underline\" title=\"Link to this heading\">#</a></h3>\n<ul class=\"simple\">\n<li><p>The first line must be plain text with no trailing period.</p></li>\n<li><p>The underline must consist only of <code class=\"docutils literal notranslate\"><span class=\"pre\">=</span></code> characters and match the title length\nwithin \u00b11 character.</p></li>\n<li><p>Add a blank line between the underline and the body text.</p></li>\n</ul>\n</section>\n<section id=\"tags-directive\">\n<h3>Tags directive<a class=\"headerlink\" href=\"#tags-directive\" title=\"Link to this heading\">#</a></h3>\n<p>Use <code class=\"docutils literal notranslate\"><span class=\"pre\">..</span> <span class=\"pre\">tags::</span></code> to help readers (and search) understand the categories an\nexample belongs to. Separate multiple tags with commas. The validator treats the\ndirective as mandatory.</p>\n</section>\n<section id=\"constraints-section\">\n<h3>Constraints section<a class=\"headerlink\" href=\"#constraints-section\" title=\"Link to this heading\">#</a></h3>\n<p>Summarise runtime expectations in a dedicated <code class=\"docutils literal notranslate\"><span class=\"pre\">Constraints</span></code> section using a\ndashed underline. List each constraint as a bullet item such as execution time,\nGPU usage, or network access.</p>\n</section>\n<section id=\"doctests\">\n<h3>Doctests<a class=\"headerlink\" href=\"#doctests\" title=\"Link to this heading\">#</a></h3>\n<p>Include <code class=\"docutils literal notranslate\"><span class=\"pre\">&gt;&gt;&gt;</span></code> prompts when demonstrating Python usage. All examples are\ndoctested via <code class=\"docutils literal notranslate\"><span class=\"pre\">pytest</span> <span class=\"pre\">--doctest-modules</span> <span class=\"pre\">examples/</span></code>, so keep snippets small and\ndeterministic.</p>\n</section>\n</section>\n<section id=\"validation-tooling\">\n<h2>Validation tooling<a class=\"headerlink\" href=\"#validation-tooling\" title=\"Link to this heading\">#</a></h2>\n<p>The <code class=\"docutils literal notranslate\"><span class=\"pre\">tools/validate_gallery.py</span></code> script enforces the required structure. It is\ninstalled as a pre-commit hook and runs automatically whenever gallery files are\nstaged, but you can also invoke it manually:</p>\n<div class=\"highlight-bash notranslate\"><div class=\"highlight\"><pre><span></span>python<span class=\"w\"> </span>tools/validate_gallery.py<span class=\"w\"> </span>--verbose\n</pre></div>\n</div>\n<section id=\"cli-options\">\n<h3>CLI options<a class=\"headerlink\" href=\"#cli-options\" title=\"Link to this heading\">#</a></h3>\n<ul class=\"simple\">\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">--examples-dir</span> <span class=\"pre\">PATH</span></code> \u2013 Validate a different directory (default: <code class=\"docutils literal notranslate\"><span class=\"pre\">examples/</span></code>).</p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">--strict</span></code> \u2013 Enable additional checks, such as rejecting titles that end with\na period.</p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">--verbose</span></code> \u2013 Print confirmation for passing files.</p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">--fix</span></code> \u2013 Reserved for future automatic formatting helpers.</p></li>\n</ul>\n<p>The script exits with code <code class=\"docutils literal notranslate\"><span class=\"pre\">0</span></code> when all examples pass or <code class=\"docutils literal notranslate\"><span class=\"pre\">1</span></code> when it reports any\nviolations. Missing directories or unsupported flags cause exit code <code class=\"docutils literal notranslate\"><span class=\"pre\">2</span></code>.</p>\n</section>\n<section id=\"common-validation-errors\">\n<h3>Common validation errors<a class=\"headerlink\" href=\"#common-validation-errors\" title=\"Link to this heading\">#</a></h3>\n<div class=\"pst-scrollable-table-container\"><table class=\"table\">\n<thead>\n<tr class=\"row-odd\"><th class=\"head\"><p>Error message</p></th>\n<th class=\"head\"><p>How to fix</p></th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"row-even\"><td><p><code class=\"docutils literal notranslate\"><span class=\"pre\">docstring</span> <span class=\"pre\">is</span> <span class=\"pre\">empty</span></code></p></td>\n<td><p>Ensure the file starts with a module docstring.</p></td>\n</tr>\n<tr class=\"row-odd\"><td><p><code class=\"docutils literal notranslate\"><span class=\"pre\">title</span> <span class=\"pre\">exceeds</span> <span class=\"pre\">79</span> <span class=\"pre\">characters</span></code></p></td>\n<td><p>Shorten the first line of the docstring.</p></td>\n</tr>\n<tr class=\"row-even\"><td><p><code class=\"docutils literal notranslate\"><span class=\"pre\">title</span> <span class=\"pre\">underline</span> <span class=\"pre\">must</span> <span class=\"pre\">be</span> <span class=\"pre\">composed</span> <span class=\"pre\">of</span> <span class=\"pre\">'='</span> <span class=\"pre\">characters</span></code></p></td>\n<td><p>Replace decorative underlines with <code class=\"docutils literal notranslate\"><span class=\"pre\">=</span></code> characters.</p></td>\n</tr>\n<tr class=\"row-odd\"><td><p><code class=\"docutils literal notranslate\"><span class=\"pre\">remove</span> <span class=\"pre\">':orphan:'</span> <span class=\"pre\">directive</span></code></p></td>\n<td><p>Delete legacy <code class=\"docutils literal notranslate\"><span class=\"pre\">:orphan:</span></code> directives\u2014Sphinx-Gallery adds anchors automatically.</p></td>\n</tr>\n<tr class=\"row-even\"><td><p><code class=\"docutils literal notranslate\"><span class=\"pre\">add</span> <span class=\"pre\">a</span> <span class=\"pre\">'..</span> <span class=\"pre\">tags::'</span> <span class=\"pre\">directive</span></code></p></td>\n<td><p>Insert a tags directive underneath the description.</p></td>\n</tr>\n<tr class=\"row-odd\"><td><p><code class=\"docutils literal notranslate\"><span class=\"pre\">add</span> <span class=\"pre\">a</span> <span class=\"pre\">'Constraints'</span> <span class=\"pre\">section</span> <span class=\"pre\">with</span> <span class=\"pre\">a</span> <span class=\"pre\">dashed</span> <span class=\"pre\">underline</span></code></p></td>\n<td><p>Document runtime requirements under a <code class=\"docutils literal notranslate\"><span class=\"pre\">Constraints</span></code> heading.</p></td>\n</tr>\n</tbody>\n</table>\n</div>\n</section>\n</section>\n<section id=\"local-testing-workflow\">\n<h2>Local testing workflow<a class=\"headerlink\" href=\"#local-testing-workflow\" title=\"Link to this heading\">#</a></h2>\n<ol class=\"arabic simple\">\n<li><p>Run <code class=\"docutils literal notranslate\"><span class=\"pre\">python</span> <span class=\"pre\">tools/validate_gallery.py</span> <span class=\"pre\">--verbose</span></code> after editing examples.</p></li>\n<li><p>Execute <code class=\"docutils literal notranslate\"><span class=\"pre\">pytest</span> <span class=\"pre\">--doctest-modules</span> <span class=\"pre\">examples/&lt;file&gt;.py</span></code> to run doctests for a\nsingle example.</p></li>\n<li><p>Execute <code class=\"docutils literal notranslate\"><span class=\"pre\">pytest</span> <span class=\"pre\">--doctest-modules</span> <span class=\"pre\">examples/</span></code> to run the entire suite.</p></li>\n<li><p>Build the docs with <code class=\"docutils literal notranslate\"><span class=\"pre\">tools/update_docs.sh</span></code> to confirm Sphinx renders pages\nwithout warnings.</p></li>\n</ol>\n</section>\n<section id=\"debugging-sphinx-gallery-issues\">\n<h2>Debugging Sphinx-Gallery issues<a class=\"headerlink\" href=\"#debugging-sphinx-gallery-issues\" title=\"Link to this heading\">#</a></h2>\n<ul class=\"simple\">\n<li><p>Use <code class=\"docutils literal notranslate\"><span class=\"pre\">sphinx-build</span> <span class=\"pre\">-b</span> <span class=\"pre\">html</span> <span class=\"pre\">docs</span> <span class=\"pre\">docs/_build/html</span> <span class=\"pre\">-n</span></code> to surface unresolved\nreferences.</p></li>\n<li><p>Inspect the generated reStructuredText in <code class=\"docutils literal notranslate\"><span class=\"pre\">docs/gallery/</span></code> when titles or\nanchors look incorrect.</p></li>\n<li><p>Ensure every gallery file imports quickly and avoids heavyweight dependencies.</p></li>\n<li><p>Keep example output deterministic so doctest snapshots remain stable.</p></li>\n</ul>\n<p>For a full overview of the automated documentation pipeline, see the\nrepository\u2019s <code class=\"docutils literal notranslate\"><span class=\"pre\">README-AUTOMATED-DOCUMENTATION.md</span></code>.</p>\n</section>\n</section>\n", "metatags": "<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["explanations/index", "Explanations", "N", "next"], ["how-to/contributing", "Contributing Docstrings and Documentation", "P", "previous"]], "sourcename": "how-to/contributing-gallery-examples.md.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Contributing Sphinx-Gallery Examples</a><ul>\n<li><a class=\"reference internal\" href=\"#quick-start-checklist\">Quick start checklist</a></li>\n<li><a class=\"reference internal\" href=\"#docstring-template-docstring-template\">Docstring template {#docstring-template}</a><ul>\n<li><a class=\"reference internal\" href=\"#title-and-underline\">Title and underline</a></li>\n<li><a class=\"reference internal\" href=\"#tags-directive\">Tags directive</a></li>\n<li><a class=\"reference internal\" href=\"#constraints-section\">Constraints section</a></li>\n<li><a class=\"reference internal\" href=\"#doctests\">Doctests</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#validation-tooling\">Validation tooling</a><ul>\n<li><a class=\"reference internal\" href=\"#cli-options\">CLI options</a></li>\n<li><a class=\"reference internal\" href=\"#common-validation-errors\">Common validation errors</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#local-testing-workflow\">Local testing workflow</a></li>\n<li><a class=\"reference internal\" href=\"#debugging-sphinx-gallery-issues\">Debugging Sphinx-Gallery issues</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".md", "has_maths_elements": false, "current_page_name": "how-to/contributing-gallery-examples", "sidebars": ["sidebar-nav-bs.html"], "alabaster_version": "1.0.0", "alabaster_version_info": [1, 0, 0], "theme_show_toc_level": 1, "generate_toctree_html": "<functools._lru_cache_wrapper object at 0x7628d6104720>", "generate_toc_html": "<functools._lru_cache_wrapper object at 0x7628d6106a30>", "theme_version": "0.16.1", "theme_logo": {"image_relative": {}}}
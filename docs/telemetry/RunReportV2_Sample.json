{
  "trace_id": "a1b2c3d4e5f6789012345678901234ab",
  "session_id": "session-abc123",
  "run_id": "run-xyz789",
  "tool": "semantic_search",
  "stages": [
    {
      "name": "retrieval.gather_channels",
      "status": "ok",
      "detail": "Gathered hits from FAISS, BM25, SPLADE",
      "ts": "2025-01-15T10:30:00.123Z",
      "duration_ms": 45.2,
      "payload": {
        "channels": ["faiss", "bm25", "splade"],
        "hits_per_channel": {
          "faiss": 100,
          "bm25": 150,
          "splade": 120
        }
      },
      "trace_id": "a1b2c3d4e5f6789012345678901234ab",
      "span_id": "0000000000000001"
    },
    {
      "name": "retrieval.fuse",
      "status": "ok",
      "detail": "RRF fusion with k=60",
      "ts": "2025-01-15T10:30:00.168Z",
      "duration_ms": 12.5,
      "payload": {
        "rrf_k": 60,
        "fused_count": 200
      },
      "trace_id": "a1b2c3d4e5f6789012345678901234ab",
      "span_id": "0000000000000002"
    },
    {
      "name": "duckdb.query",
      "status": "ok",
      "detail": "Hydrated 200 documents",
      "ts": "2025-01-15T10:30:00.181Z",
      "duration_ms": 89.3,
      "payload": {
        "rows": 200,
        "sql_bytes": 1024
      },
      "trace_id": "a1b2c3d4e5f6789012345678901234ab",
      "span_id": "0000000000000003"
    },
    {
      "name": "retrieval.recency_boost",
      "status": "ok",
      "detail": "Applied recency boost to 50 documents",
      "ts": "2025-01-15T10:30:00.270Z",
      "duration_ms": 5.1,
      "payload": {
        "boosted_count": 50
      },
      "trace_id": "a1b2c3d4e5f6789012345678901234ab",
      "span_id": "0000000000000004"
    }
  ],
  "timeline": [
    {
      "ts": "2025-01-15T10:30:00.000Z",
      "type": "request",
      "name": "semantic_search",
      "status": "ok",
      "message": "Request accepted",
      "attrs": {
        "query": "vector store implementation",
        "top_k": 50
      }
    },
    {
      "ts": "2025-01-15T10:30:00.050Z",
      "type": "embed",
      "name": "vllm.embed",
      "status": "ok",
      "message": "Embedded query",
      "attrs": {
        "batch_size": 1,
        "model": "nomic-ai/nomic-embed-code"
      }
    },
    {
      "ts": "2025-01-15T10:30:00.123Z",
      "type": "search",
      "name": "faiss.search",
      "status": "ok",
      "message": "FAISS search completed",
      "attrs": {
        "k": 100,
        "nprobe": 32
      }
    }
  ],
  "events": [
    {
      "ts": "2025-01-15T10:30:00.000Z",
      "kind": "request.accepted",
      "status": "ok",
      "detail": "Query normalized and validated",
      "payload": {
        "query_text": "vector store implementation",
        "query_len": 28
      },
      "trace_id": "a1b2c3d4e5f6789012345678901234ab",
      "span_id": "0000000000000000"
    },
    {
      "ts": "2025-01-15T10:30:00.050Z",
      "kind": "embed.done",
      "status": "ok",
      "detail": "Embedding batch completed",
      "payload": {
        "batch_size": 1,
        "latency_ms": 50.0
      },
      "trace_id": "a1b2c3d4e5f6789012345678901234ab",
      "span_id": "0000000000000001"
    },
    {
      "ts": "2025-01-15T10:30:00.123Z",
      "kind": "bm25.hitset",
      "status": "ok",
      "detail": "BM25 search completed",
      "payload": {
        "hits": 150,
        "top_k": 150
      },
      "trace_id": "a1b2c3d4e5f6789012345678901234ab",
      "span_id": "0000000000000002"
    }
  ],
  "warnings": [],
  "budgets": {
    "rrf_k": 60,
    "per_channel_depths": {
      "faiss": 100,
      "bm25": 150,
      "splade": 120
    },
    "rm3_enabled": true
  },
  "stopped_after_stage": "retrieval.recency_boost",
  "stopped_because": null,
  "span_attributes": {
    "mcp.session_id": "session-abc123",
    "mcp.run_id": "run-xyz789",
    "mcp.tool": "semantic_search"
  }
}

{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "KgFoundry Navigation Sidecar",
  "description": "Schema describing `_nav.json` sidecars, including interface metadata used by the documentation pipeline.",
  "type": "object",
  "properties": {
    "title": {"type": "string"},
    "synopsis": {"type": "string"},
    "module_meta": {"type": "object"},
    "sections": {"type": "array"},
    "symbols": {"type": "object"},
    "interfaces": {
      "type": "array",
      "description": "Public interfaces exposed by this module (CLI, HTTP, schema, etc.).",
      "items": {
        "type": "object",
        "required": ["id", "type", "owner", "stability"],
        "properties": {
          "id": {"type": "string"},
          "type": {
            "type": "string",
            "description": "Human-friendly interface classification.",
            "enum": ["cli", "http", "schema", "rpc", "python", "stream", "tool"]
          },
          "owner": {"type": "string"},
          "stability": {"type": "string"},
          "entrypoint": {
            "type": "string",
            "description": "Python import path to the interface entrypoint (e.g. module:function)."
          },
          "binary": {
            "type": "string",
            "description": "CLI binary name used in examples."
          },
          "protocol": {
            "type": "string",
            "description": "Primary protocol or specification format (e.g. openapi, openapi-cli)."
          },
          "spec": {
            "type": "string",
            "description": "Path (relative to repo root) of the generated specification artifact."
          },
          "augment": {
            "type": "string",
            "description": "Path to optional metadata augmentation file merged into the spec."
          },
          "tags": {
            "type": "array",
            "items": {"type": "string"}
          },
          "description": {"type": "string"},
          "problem_details": {
            "description": "Associated RFC 9457 Problem Details examples or schema paths.",
            "oneOf": [
              {"type": "string"},
              {
                "type": "array",
                "items": {"type": "string"},
                "minItems": 1
              }
            ]
          },
          "schema": {
            "type": "string",
            "description": "Path to canonical schema backing this interface (if any)."
          }
        },
        "additionalProperties": true
      }
    }
  },
  "additionalProperties": true
}


{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://kgfoundry.dev/schemas/common/problem_details.json",
  "title": "RFC 9457 Problem Details",
  "description": "Schema for RFC 9457 Problem Details payloads used across kgfoundry error responses. All fields except extensions are required per RFC 9457 section 3.1.",
  "type": "object",
  "properties": {
    "type": {
      "type": "string",
      "format": "uri",
      "description": "Type URI identifying the problem type (e.g., 'https://kgfoundry.dev/problems/download-failed')",
      "examples": ["https://kgfoundry.dev/problems/download-failed", "https://kgfoundry.dev/problems/runtime-error"]
    },
    "title": {
      "type": "string",
      "description": "Short, human-readable summary of the problem type",
      "examples": ["Download Failed", "Runtime Error"]
    },
    "status": {
      "type": "integer",
      "description": "HTTP status code applicable to this problem type",
      "minimum": 100,
      "maximum": 599,
      "examples": [400, 404, 500, 503]
    },
    "detail": {
      "type": "string",
      "description": "Human-readable explanation specific to this occurrence of the problem",
      "examples": ["Failed to download resource from https://example.com/file.pdf", "Operation timed out after 30 seconds"]
    },
    "instance": {
      "type": "string",
      "format": "uri-reference",
      "description": "URI reference identifying the specific occurrence of the problem",
      "examples": ["/api/v1/search", "urn:kgfoundry:settings:load"]
    },
    "code": {
      "type": "string",
      "description": "Machine-readable error code (kgfoundry extension)",
      "examples": ["download-failed", "runtime-error", "configuration-error"]
    },
    "errors": {
      "type": "object",
      "description": "Additional problem-specific fields (kgfoundry extension)",
      "additionalProperties": true
    }
  },
  "required": ["type", "title", "status", "detail", "instance"],
  "additionalProperties": true,
  "examples": [
    {
      "type": "https://kgfoundry.dev/problems/download-failed",
      "title": "Download Failed",
      "status": 503,
      "detail": "Failed to download resource from https://example.com/file.pdf",
      "instance": "/api/v1/download",
      "code": "download-failed",
      "errors": {
        "url": "https://example.com/file.pdf",
        "retry_after_seconds": 60
      }
    },
    {
      "type": "https://kgfoundry.dev/problems/runtime-error",
      "title": "Runtime Error",
      "status": 500,
      "detail": "Operation failed unexpectedly",
      "instance": "/api/v1/operation",
      "code": "runtime-error"
    }
  ]
}


tags:
  - name: orchestration
    x-displayName: Orchestration
    description: Commands that orchestrate indexing, ingestion, and flow execution.
  - name: docstrings
    x-displayName: Docstring Builder
    description: Commands that generate, validate, and maintain managed docstrings.
  - name: docstrings-update
    x-displayName: Update
    description: Synchronize docstrings and DocFacts artifacts with source code.
  - name: docstrings-validate
    x-displayName: Validate
    description: Inspect docstrings for drift or policy violations without writing changes.
  - name: docstrings-observability
    x-displayName: Observability
    description: Emit metrics, listings, and auxiliary reports for docstring maintenance.
  - name: docstrings-diagnostics
    x-displayName: Diagnostics
    description: Diagnose configuration, environment, and stub health for the docstring builder.
  - name: docstrings-utilities
    x-displayName: Utilities
    description: Auxiliary helpers including schema export, cache management, and metadata harvesting.
  - name: docs
    x-displayName: Documentation Tooling
    description: Commands that operate on generated documentation artifacts and schemas.
  - name: docs-validation
    x-displayName: Artifact Validation
    description: Validate documentation outputs against their canonical schemas before publishing.
  - name: docs-symbol-index
    x-displayName: Symbol Index
    description: Build documentation symbol index artifacts and reverse lookup tables.
  - name: download
    x-displayName: Download
    description: Commands that harvest external corpora for downstream processing.
  - name: codeintel
    x-displayName: Code Intelligence
    description: Commands that surface Tree-sitter-based code intelligence capabilities.
  - name: navmap
    x-displayName: Navmap Builder
    description: Commands that generate and maintain navigation metadata for documentation tooling.

x-tagGroups:
  - name: CLI Suites
    tags: [orchestration]
  - name: Docstring Builder
    tags: [docstrings]
  - name: Docstring Focus Areas
    tags:
      - docstrings-update
      - docstrings-validate
      - docstrings-observability
      - docstrings-diagnostics
      - docstrings-utilities
  - name: Data Acquisition
    tags: [download]
  - name: Developer Tooling
    tags:
      - codeintel
      - navmap
  - name: Documentation Tooling
    tags:
      - docs
      - docs-validation
      - docs-symbol-index

operations:
  cli.index_bm25:
    tags: [orchestration, index_bm25]
    x-handler: "orchestration.cli:index_bm25"
    x-codeSamples:
      - lang: bash
        source: "kgf index-bm25 data/chunks.parquet --backend lucene --index-dir ./_indices/bm25"
  cli.index_faiss:
    tags: [orchestration, index_faiss]
    x-handler: "orchestration.cli:index_faiss"
    x-env:
      - KGF_FAISS_RESOURCES
    x-codeSamples:
      - lang: bash
        source: "kgf index-faiss vectors.json --factory 'OPQ64,IVF8192,PQ64' --metric ip"
  cli.api:
    tags: [orchestration, api]
    x-handler: "orchestration.cli:api"
    x-env:
      - KGF_SEARCH_CONFIG
    x-codeSamples:
      - lang: bash
        source: "kgf api --port 8080"
  cli.e2e:
    tags: [orchestration, e2e]
    x-handler: "orchestration.cli:e2e"
    x-env:
      - KGF_PROFILE
    x-codeSamples:
      - lang: bash
        source: "kgf e2e"
  docstrings.generate:
    tags: [docstrings, docstrings-update]
    x-handler: "tools.docstring_builder.cli:_command_generate"
    x-codeSamples:
      - lang: bash
        source: "uv run python -m tools.docstring_builder.cli generate"
  docstrings.fix:
    tags: [docstrings, docstrings-update]
    x-handler: "tools.docstring_builder.cli:_command_fix"
    x-codeSamples:
      - lang: bash
        source: "uv run python -m tools.docstring_builder.cli fix"
  docstrings.fmt:
    tags: [docstrings, docstrings-update]
    x-handler: "tools.docstring_builder.cli:_command_fmt"
    x-codeSamples:
      - lang: bash
        source: "uv run python -m tools.docstring_builder.cli fmt"
  docstrings.update:
    tags: [docstrings, docstrings-update]
    x-handler: "tools.docstring_builder.cli:_command_update"
    x-codeSamples:
      - lang: bash
        source: "uv run python -m tools.docstring_builder.cli update"
  docstrings.check:
    tags: [docstrings, docstrings-validate]
    x-handler: "tools.docstring_builder.cli:_command_check"
    x-codeSamples:
      - lang: bash
        source: "uv run python -m tools.docstring_builder.cli check"
  docstrings.diff:
    tags: [docstrings, docstrings-validate]
    x-handler: "tools.docstring_builder.cli:_command_diff"
    x-codeSamples:
      - lang: bash
        source: "uv run python -m tools.docstring_builder.cli diff"
  docstrings.lint:
    tags: [docstrings, docstrings-validate]
    x-handler: "tools.docstring_builder.cli:_command_lint"
    x-codeSamples:
      - lang: bash
        source: "uv run python -m tools.docstring_builder.cli lint --no-docfacts"
  docstrings.measure:
    tags: [docstrings, docstrings-observability]
    x-handler: "tools.docstring_builder.cli:_command_measure"
    x-codeSamples:
      - lang: bash
        source: "uv run python -m tools.docstring_builder.cli measure"
  docstrings.list:
    tags: [docstrings, docstrings-observability]
    x-handler: "tools.docstring_builder.cli:_command_list"
    x-codeSamples:
      - lang: bash
        source: "uv run python -m tools.docstring_builder.cli list"
  docstrings.harvest:
    tags: [docstrings, docstrings-utilities]
    x-handler: "tools.docstring_builder.cli:_command_harvest"
    x-codeSamples:
      - lang: bash
        source: "uv run python -m tools.docstring_builder.cli harvest"
  docstrings.schema:
    tags: [docstrings, docstrings-utilities]
    x-handler: "tools.docstring_builder.cli:_command_schema"
    x-codeSamples:
      - lang: bash
        source: "uv run python -m tools.docstring_builder.cli schema --output docs/_build/docstring-schema.json"
  docstrings.clear_cache:
    tags: [docstrings, docstrings-utilities]
    x-handler: "tools.docstring_builder.cli:_command_clear_cache"
    x-codeSamples:
      - lang: bash
        source: "uv run python -m tools.docstring_builder.cli clear-cache"
  docstrings.doctor:
    tags: [docstrings, docstrings-diagnostics]
    x-handler: "tools.docstring_builder.cli:_command_doctor"
    x-codeSamples:
      - lang: bash
        source: "uv run python -m tools.docstring_builder.cli doctor --stubs"
  docs.validate_artifacts:
    tags: [docs, docs-validation]
    x-handler: "docs.toolchain.validate_artifacts:validate_artifacts"
    x-codeSamples:
      - lang: bash
        source: "uv run python -m docs._scripts.validate_artifacts --docs-build-dir docs/_build"
  docs.build_graphs:
    summary: Build dependency graphs for documentation and subsystem analysis.
    description: |
      Generate per-package and subsystem-wide dependency graphs using pydeps and pyreverse. The
      command manages caching, parallel execution, and policy enforcement so documentation tooling
      stays aligned with architectural guidelines.
    tags: [docs]
    x-handler: "tools.docs.build_graphs:main"
    x-codeSamples:
      - lang: bash
        source: "uv run python -m tools.docs.build_graphs --format svg"
    x-problemDetails:
      - schema/examples/problem_details/tool-execution-error.json
  codeintel.indexer.query:
    summary: Execute a Tree-sitter query against a source file.
    description: |
      Run a Tree-sitter S-expression query against a single source file and emit capture metadata
      as structured JSON. The command integrates with the shared CLI tooling facade so downstream
      documentation, diagrams, and observability pipelines consume consistent envelopes.
    tags: [codeintel]
    x-handler: "codeintel.cli:query"
    x-codeSamples:
      - lang: bash
        source: "uv run python -m codeintel.cli query src/example.py --language python --query queries/highlights.scm"
    x-problemDetails:
      - schema/examples/problem_details/tool-execution-error.json
  codeintel.indexer.symbols:
    summary: List Python symbols detected across a directory tree.
    description: |
      Traverse a directory tree using the MCP-backed code-intel symbol extractor and emit the
      discovered symbol metadata. Designed for developer tooling and documentation pipelines that
      rely on the shared CLI envelope contracts.
    tags: [codeintel]
    x-handler: "codeintel.cli:symbols"
    x-codeSamples:
      - lang: bash
        source: "uv run python -m codeintel.cli symbols src/"
    x-problemDetails:
      - schema/examples/problem_details/tool-execution-error.json
  navmap.build:
    summary: Build the navigation metadata index for documentation tooling.
    description: |
      Scan the repository for Python modules, resolve ``__navmap__`` declarations, and emit the
      navmap JSON artefact consumed by documentation and automation pipelines. Emits structured CLI
      envelopes so downstream tooling can track drift and failures consistently.
    tags: [navmap]
    x-handler: "tools.navmap.build_navmap:main"
    x-codeSamples:
      - lang: bash
        source: "uv run python -m tools.navmap.build_navmap --write site/_build/navmap/navmap.json"
    x-problemDetails:
      - schema/examples/problem_details/tool-execution-error.json
  navmap.check:
    summary: Validate navmap declarations and ensure documentation metadata is consistent.
    description: |
      Run the navmap validation suite against the source tree, verifying inline markers, export
      metadata, and drift between ``__navmap__`` declarations and generated artefacts. Emits
      structured CLI envelopes and Problem Details to surface validation results.
    tags: [navmap]
    x-handler: "tools.navmap.check_navmap:main"
    x-codeSamples:
      - lang: bash
        source: "uv run python -m tools.navmap.check_navmap"
    x-problemDetails:
      - schema/examples/problem_details/tool-execution-error.json
  cli.download.harvest:
    summary: Harvest OpenAlex works for downstream ingestion.
    description: |
      Collect OpenAlex publications matching a topic query and year filter. The command produces
      structured CLI envelopes and metadata that downstream tooling can consume without bespoke glue.
    tags: [download]
    x-handler: "download.cli:harvest"
    x-codeSamples:
      - lang: bash
        source: "kgf download harvest 'foundation models' --years '>=2020' --max-works 5000"
    x-problemDetails:
      - schema/examples/problem_details/tool-execution-error.json
  docs.symbol_index.build:
    tags: [docs, docs-symbol-index]
    x-handler: "docs.toolchain.build_symbol_index:build_symbol_index"
    x-codeSamples:
      - lang: bash
        source: "uv run python -m docs.toolchain.build_symbol_index"


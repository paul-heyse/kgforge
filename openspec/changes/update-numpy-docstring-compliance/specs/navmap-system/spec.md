## MODIFIED Requirements

### Requirement: Navigation Map Metadata Structure
Module-level navigation metadata SHALL be stored exclusively in the `__navmap__` dictionary and not injected into module docstrings.

#### Scenario: NavMap dictionary populated
- **WHEN** a module contains exported symbols
- **THEN** the module has a `__navmap__` dictionary with keys: `exports`, `synopsis`, `sections`, `symbols`, `tags`, `see_also`, `deps`

#### Scenario: NavMap sections defined
- **WHEN** a module defines `__navmap__["sections"]`
- **THEN** each section has `id` (kebab-case) and `symbols` list, with first section always having id `"public-api"`

#### Scenario: NavMap symbol metadata
- **WHEN** a module defines `__navmap__["symbols"][name]`
- **THEN** metadata can include `category`, `stability`, custom fields for operational data (e.g., `side_effects`, `perf_class`)

## REMOVED Requirements

### Requirement: NavMap Injection into Module Docstrings
Module docstrings SHALL NOT contain injected `NavMap:` sections generated by `tools/update_navmaps.py`.

**Reason**: The `NavMap:` section is not a standard NumPy docstring section and breaks strict NumPy validation. Navigation metadata belongs in machine-readable `__navmap__` dictionaries, not in human docstrings.

**Migration**: Remove all `NavMap:` sections from module docstrings via automated tool run. Navigation information is available via `site/_build/navmap/navmap.json` and module `__navmap__` attributes.

## ADDED Requirements

### Requirement: Module Docstring Standards
Module docstrings SHALL contain only standard NumPy sections and descriptive prose.

#### Scenario: Module docstring format
- **WHEN** a module is parsed
- **THEN** its docstring contains only: Summary line, extended description, and optional standard NumPy sections (Notes, See Also, References)

#### Scenario: No non-standard sections
- **WHEN** docstring validation runs
- **THEN** it rejects modules with non-standard sections like `NavMap:`, `Todos:`, `Private:`, etc.

#### Scenario: Navigation via __navmap__
- **WHEN** agents or tools need navigation information
- **THEN** they read `__navmap__` from the module or lookup in `site/_build/navmap/navmap.json`

### Requirement: Anchor and Section Comments Retained
Module-level anchor (`# [nav:anchor SymbolName]`) and section (`# [nav:section section-id]`) comments SHALL remain in code.

#### Scenario: Anchors enable navigation
- **WHEN** build_navmap.py scans a module
- **THEN** it extracts line numbers for each `# [nav:anchor Name]` comment

#### Scenario: Sections organize module
- **WHEN** check_navmap.py validates a module
- **THEN** it verifies all symbols in sections have corresponding anchor comments

<!DOCTYPE html><html class="no-js" lang="en"><head>
<meta charset="utf-8">
<meta content="width=device-width,initial-scale=1" name="viewport">
<link href="https://docs.kgfoundry.dev/modules/kgfoundry_common/logging/" rel="canonical">
<link href="../../../assets/images/favicon.png" rel="icon">
<meta content="mkdocs-1.6.1, mkdocs-material-9.6.23" name="generator">
<title>kgfoundry_common.logging - KgFoundry MkDocs Suite</title>
<link href="../../../assets/stylesheets/main.84d31ad4.min.css" rel="stylesheet">
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect">
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet">
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../../assets/_mkdocstrings.css" rel="stylesheet">
<link href="../../../assets/stylesheets/mkdocs_d2_plugin.css" rel="stylesheet">
<link href="../../../assets/mkdocs_puml/puml.css" rel="stylesheet">
<link href="../../../assets/mkdocs_puml/interaction.css" rel="stylesheet">
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
<body dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox">
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox">
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#kgfoundry_commonlogging">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="KgFoundry MkDocs Suite" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="KgFoundry MkDocs Suite">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            KgFoundry MkDocs Suite
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              kgfoundry_common.logging
            
          </span>
</div>
</div>
</div>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text">
<label class="md-search__icon md-icon" for="__search">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/kgfoundry/kgfoundry" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="KgFoundry MkDocs Suite" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="KgFoundry MkDocs Suite">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
    KgFoundry MkDocs Suite
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/kgfoundry/kgfoundry" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../..">
<span class="md-ellipsis">
    Overview
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../architecture/">
<span class="md-ellipsis">
    Architecture
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../api/">
<span class="md-ellipsis">
    API
    
  </span>
</a>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            API
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api/openapi-cli/">
<span class="md-ellipsis">
    CLI Spec
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api/interfaces/">
<span class="md-ellipsis">
    Interface Catalog
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../">
<span class="md-ellipsis">
    Modules
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../diagrams/">
<span class="md-ellipsis">
    Diagrams
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../cli/">
<span class="md-ellipsis">
    CLI
    
  </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#sections">
<span class="md-ellipsis">
      Sections
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#contents">
<span class="md-ellipsis">
      Contents
    </span>
</a>
<nav aria-label="Contents" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_commonloggingcorrelationcontext">
<span class="md-ellipsis">
      kgfoundry_common.logging.CorrelationContext
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.CorrelationContext">
<span class="md-ellipsis">
      CorrelationContext
    </span>
</a>
<nav aria-label="CorrelationContext" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.CorrelationContext.__enter__">
<span class="md-ellipsis">
      __enter__
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.CorrelationContext.__exit__">
<span class="md-ellipsis">
      __exit__
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_commonloggingjsonformatter">
<span class="md-ellipsis">
      kgfoundry_common.logging.JsonFormatter
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.JsonFormatter">
<span class="md-ellipsis">
      JsonFormatter
    </span>
</a>
<nav aria-label="JsonFormatter" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.JsonFormatter.format">
<span class="md-ellipsis">
      format
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_commonlogginglogcontextextra">
<span class="md-ellipsis">
      kgfoundry_common.logging.LogContextExtra
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.LogContextExtra">
<span class="md-ellipsis">
      LogContextExtra
    </span>
</a>
<nav aria-label="LogContextExtra" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.LogContextExtra.to_dict">
<span class="md-ellipsis">
      to_dict
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.LogContextExtra.with_correlation_id">
<span class="md-ellipsis">
      with_correlation_id
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.LogContextExtra.with_duration_ms">
<span class="md-ellipsis">
      with_duration_ms
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.LogContextExtra.with_operation">
<span class="md-ellipsis">
      with_operation
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.LogContextExtra.with_status">
<span class="md-ellipsis">
      with_status
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_commonloggingloggeradapter">
<span class="md-ellipsis">
      kgfoundry_common.logging.LoggerAdapter
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.LoggerAdapter">
<span class="md-ellipsis">
      LoggerAdapter
    </span>
</a>
<nav aria-label="LoggerAdapter" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.LoggerAdapter.critical">
<span class="md-ellipsis">
      critical
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.LoggerAdapter.debug">
<span class="md-ellipsis">
      debug
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.LoggerAdapter.error">
<span class="md-ellipsis">
      error
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.LoggerAdapter.exception">
<span class="md-ellipsis">
      exception
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.LoggerAdapter.info">
<span class="md-ellipsis">
      info
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.LoggerAdapter.log">
<span class="md-ellipsis">
      log
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.LoggerAdapter.log_failure">
<span class="md-ellipsis">
      log_failure
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.LoggerAdapter.log_io">
<span class="md-ellipsis">
      log_io
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.LoggerAdapter.log_success">
<span class="md-ellipsis">
      log_success
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.LoggerAdapter.process">
<span class="md-ellipsis">
      process
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.LoggerAdapter.warning">
<span class="md-ellipsis">
      warning
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_commonloggingloggingcache">
<span class="md-ellipsis">
      kgfoundry_common.logging.LoggingCache
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.LoggingCache">
<span class="md-ellipsis">
      LoggingCache
    </span>
</a>
<nav aria-label="LoggingCache" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.LoggingCache.clear">
<span class="md-ellipsis">
      clear
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.LoggingCache.get_formatter">
<span class="md-ellipsis">
      get_formatter
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_commonlogging_defaultloggingcache">
<span class="md-ellipsis">
      kgfoundry_common.logging._DefaultLoggingCache
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging._DefaultLoggingCache">
<span class="md-ellipsis">
      _DefaultLoggingCache
    </span>
</a>
<nav aria-label="_DefaultLoggingCache" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging._DefaultLoggingCache.clear">
<span class="md-ellipsis">
      clear
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging._DefaultLoggingCache.get_formatter">
<span class="md-ellipsis">
      get_formatter
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_commonlogging_loggeradapterbase">
<span class="md-ellipsis">
      kgfoundry_common.logging._LoggerAdapterBase
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging._LoggerAdapterBase">
<span class="md-ellipsis">
      _LoggerAdapterBase
    </span>
</a>
<nav aria-label="_LoggerAdapterBase" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_commonlogging_withfieldscontext">
<span class="md-ellipsis">
      kgfoundry_common.logging._WithFieldsContext
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging._WithFieldsContext">
<span class="md-ellipsis">
      _WithFieldsContext
    </span>
</a>
<nav aria-label="_WithFieldsContext" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging._WithFieldsContext.__enter__">
<span class="md-ellipsis">
      __enter__
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging._WithFieldsContext.__exit__">
<span class="md-ellipsis">
      __exit__
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_commonloggingget_correlation_id">
<span class="md-ellipsis">
      kgfoundry_common.logging.get_correlation_id
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.get_correlation_id">
<span class="md-ellipsis">
      get_correlation_id
    </span>
</a>
<nav aria-label="get_correlation_id" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_commonloggingget_logger">
<span class="md-ellipsis">
      kgfoundry_common.logging.get_logger
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.get_logger">
<span class="md-ellipsis">
      get_logger
    </span>
</a>
<nav aria-label="get_logger" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_commonloggingget_logging_cache">
<span class="md-ellipsis">
      kgfoundry_common.logging.get_logging_cache
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.get_logging_cache">
<span class="md-ellipsis">
      get_logging_cache
    </span>
</a>
<nav aria-label="get_logging_cache" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_commonloggingmeasure_duration">
<span class="md-ellipsis">
      kgfoundry_common.logging.measure_duration
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.measure_duration">
<span class="md-ellipsis">
      measure_duration
    </span>
</a>
<nav aria-label="measure_duration" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_commonloggingset_correlation_id">
<span class="md-ellipsis">
      kgfoundry_common.logging.set_correlation_id
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.set_correlation_id">
<span class="md-ellipsis">
      set_correlation_id
    </span>
</a>
<nav aria-label="set_correlation_id" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_commonloggingsetup_logging">
<span class="md-ellipsis">
      kgfoundry_common.logging.setup_logging
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.setup_logging">
<span class="md-ellipsis">
      setup_logging
    </span>
</a>
<nav aria-label="setup_logging" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_commonloggingwith_fields">
<span class="md-ellipsis">
      kgfoundry_common.logging.with_fields
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.logging.with_fields">
<span class="md-ellipsis">
      with_fields
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#relationships">
<span class="md-ellipsis">
      Relationships
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#autorefs-examples">
<span class="md-ellipsis">
      Autorefs Examples
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#inheritance">
<span class="md-ellipsis">
      Inheritance
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#neighborhood">
<span class="md-ellipsis">
      Neighborhood
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="kgfoundry_commonlogging">kgfoundry_common.logging<a class="headerlink" href="#kgfoundry_commonlogging" title="Permanent link">¶</a></h1>
<p>Structured logging helpers with correlation IDs and observability</p>
<p><a href="https://github.com/kgfoundry/kgfoundry/blob/main/src/kgfoundry_common/logging.py">View source on GitHub</a></p>
<h2 id="sections">Sections<a class="headerlink" href="#sections" title="Permanent link">¶</a></h2>
<ul>
<li><strong>Public API</strong></li>
</ul>
<h2 id="contents">Contents<a class="headerlink" href="#contents" title="Permanent link">¶</a></h2>
<h3 id="kgfoundry_commonloggingcorrelationcontext">kgfoundry_common.logging.CorrelationContext<a class="headerlink" href="#kgfoundry_commonloggingcorrelationcontext" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="kgfoundry_common.logging.CorrelationContext">
<code>kgfoundry_common.logging.CorrelationContext</code>
<a class="headerlink" href="#kgfoundry_common.logging.CorrelationContext" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p>Context manager for correlation ID propagation using contextvars.</p>
<p>Manages correlation ID context using <code>contextvars.ContextVar</code>, ensuring
IDs propagate correctly through async tasks and thread pools without
cross-contamination between concurrent requests. Automatically restores
the previous correlation ID when the context exits.</p>
<p>Initializes correlation context with correlation ID.</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>correlation_id</code>
</td>
<td>
<code><span title="str">str</span> | None</code>
</td>
<td>
<div class="doc-md-description">
<p>Correlation ID to set in context. This ID will be automatically
injected into all log entries within the context. Set to None to
clear the correlation ID.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Examples:</span></p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">kgfoundry_common.logging</span><span class="w"> </span><span class="kn">import</span> <span class="n">CorrelationContext</span><span class="p">,</span> <span class="n">get_logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span> <span class="o">=</span> <span class="n">get_logger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">CorrelationContext</span><span class="p">(</span><span class="n">correlation_id</span><span class="o">=</span><span class="s2">"req-123"</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">"Request started"</span><span class="p">)</span>  <span class="c1"># correlation_id="req-123" auto-injected</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Correlation ID is automatically cleared when context exits</span>
</code></pre></div>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CorrelationContext</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Context manager for correlation ID propagation using contextvars.</span>

<span class="sd">    Manages correlation ID context using `contextvars.ContextVar`, ensuring</span>
<span class="sd">    IDs propagate correctly through async tasks and thread pools without</span>
<span class="sd">    cross-contamination between concurrent requests. Automatically restores</span>
<span class="sd">    the previous correlation ID when the context exits.</span>

<span class="sd">    Initializes correlation context with correlation ID.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    correlation_id : str | None</span>
<span class="sd">        Correlation ID to set in context. This ID will be automatically</span>
<span class="sd">        injected into all log entries within the context. Set to None to</span>
<span class="sd">        clear the correlation ID.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from kgfoundry_common.logging import CorrelationContext, get_logger</span>
<span class="sd">    &gt;&gt;&gt; logger = get_logger(__name__)</span>
<span class="sd">    &gt;&gt;&gt; with CorrelationContext(correlation_id="req-123"):</span>
<span class="sd">    ...     logger.info("Request started")  # correlation_id="req-123" auto-injected</span>
<span class="sd">    &gt;&gt;&gt; # Correlation ID is automatically cleared when context exits</span>
<span class="sd">    """</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">correlation_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">correlation_id</span> <span class="o">=</span> <span class="n">correlation_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">:</span> <span class="n">contextvars</span><span class="o">.</span><span class="n">Token</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Enter correlation context and set correlation ID.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Self</span>
<span class="sd">            Self for use as context manager.</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="o">=</span> <span class="n">_correlation_id</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">correlation_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__exit__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">exc_type</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">exc_val</span><span class="p">:</span> <span class="ne">BaseException</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">exc_tb</span><span class="p">:</span> <span class="n">TracebackType</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Exit correlation context and restore previous correlation ID.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        exc_type : type[BaseException] | None</span>
<span class="sd">            Exception type (if any).</span>
<span class="sd">        exc_val : BaseException | None</span>
<span class="sd">            Exception value (if any).</span>
<span class="sd">        exc_tb : TracebackType | None</span>
<span class="sd">            Exception traceback (if any).</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">_correlation_id</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">)</span>
        <span class="k">del</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_val</span><span class="p">,</span> <span class="n">exc_tb</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="kgfoundry_common.logging.CorrelationContext.__enter__">
<code class="highlight language-python"><span class="fm">__enter__</span><span class="p">()</span></code>
<a class="headerlink" href="#kgfoundry_common.logging.CorrelationContext.__enter__" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Enter correlation context and set correlation ID.</p>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="typing.Self">Self</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Self for use as context manager.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Enter correlation context and set correlation ID.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Self</span>
<span class="sd">        Self for use as context manager.</span>
<span class="sd">    """</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="o">=</span> <span class="n">_correlation_id</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">correlation_id</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="kgfoundry_common.logging.CorrelationContext.__exit__">
<code class="highlight language-python"><span class="fm">__exit__</span><span class="p">(</span><span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_val</span><span class="p">,</span> <span class="n">exc_tb</span><span class="p">)</span></code>
<a class="headerlink" href="#kgfoundry_common.logging.CorrelationContext.__exit__" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Exit correlation context and restore previous correlation ID.</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>exc_type</code>
</td>
<td>
<code><span title="type">type</span>[<span title="BaseException">BaseException</span>] | None</code>
</td>
<td>
<div class="doc-md-description">
<p>Exception type (if any).</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>exc_val</code>
</td>
<td>
<code><span title="BaseException">BaseException</span> | None</code>
</td>
<td>
<div class="doc-md-description">
<p>Exception value (if any).</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>exc_tb</code>
</td>
<td>
<code><span title="types.TracebackType">TracebackType</span> | None</code>
</td>
<td>
<div class="doc-md-description">
<p>Exception traceback (if any).</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__exit__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">exc_type</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">exc_val</span><span class="p">:</span> <span class="ne">BaseException</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">exc_tb</span><span class="p">:</span> <span class="n">TracebackType</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Exit correlation context and restore previous correlation ID.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    exc_type : type[BaseException] | None</span>
<span class="sd">        Exception type (if any).</span>
<span class="sd">    exc_val : BaseException | None</span>
<span class="sd">        Exception value (if any).</span>
<span class="sd">    exc_tb : TracebackType | None</span>
<span class="sd">        Exception traceback (if any).</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">_correlation_id</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">)</span>
    <span class="k">del</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_val</span><span class="p">,</span> <span class="n">exc_tb</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
</div>
</div>
</div><h3 id="kgfoundry_commonloggingjsonformatter">kgfoundry_common.logging.JsonFormatter<a class="headerlink" href="#kgfoundry_commonloggingjsonformatter" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="kgfoundry_common.logging.JsonFormatter">
<code>kgfoundry_common.logging.JsonFormatter</code>
<a class="headerlink" href="#kgfoundry_common.logging.JsonFormatter" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p class="doc doc-class-bases">
              Bases: <code><span title="logging.Formatter">Formatter</span></code></p>
<p>JSON formatter for structured logging.</p>
<p>Formats log records as JSON with timestamp, level, name, message,
and structured fields (correlation_id, operation, status, duration_ms).
Automatically extracts correlation_id from contextvars if not present
in the log record. Standard <code>logging.Formatter</code> constructor arguments such
as <code>fmt</code>, <code>datefmt</code>, <code>style</code>, <code>validate</code>, and <code>defaults</code> are
supported via inheritance; no additional aliases are introduced by this
subclass.</p>
<p><span class="doc-section-title">Examples:</span></p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">handler</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">handler</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">JsonFormatter</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">"test"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">"Test message"</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="p">{</span><span class="s2">"operation"</span><span class="p">:</span> <span class="s2">"test"</span><span class="p">,</span> <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"success"</span><span class="p">})</span>
</code></pre></div>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">JsonFormatter</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">Formatter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""JSON formatter for structured logging.</span>

<span class="sd">    Formats log records as JSON with timestamp, level, name, message,</span>
<span class="sd">    and structured fields (correlation_id, operation, status, duration_ms).</span>
<span class="sd">    Automatically extracts correlation_id from contextvars if not present</span>
<span class="sd">    in the log record. Standard ``logging.Formatter`` constructor arguments such</span>
<span class="sd">    as ``fmt``, ``datefmt``, ``style``, ``validate``, and ``defaults`` are</span>
<span class="sd">    supported via inheritance; no additional aliases are introduced by this</span>
<span class="sd">    subclass.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; import logging</span>
<span class="sd">    &gt;&gt;&gt; handler = logging.StreamHandler()</span>
<span class="sd">    &gt;&gt;&gt; handler.setFormatter(JsonFormatter())</span>
<span class="sd">    &gt;&gt;&gt; logger = logging.getLogger("test")</span>
<span class="sd">    &gt;&gt;&gt; logger.addHandler(handler)</span>
<span class="sd">    &gt;&gt;&gt; logger.info("Test message", extra={"operation": "test", "status": "success"})</span>
<span class="sd">    """</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">LogRecord</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Format log record as JSON.</span>

<span class="sd">        Converts a logging.LogRecord to a JSON string with structured fields.</span>
<span class="sd">        Extracts correlation_id from contextvars if not present in the record.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        record : logging.LogRecord</span>
<span class="sd">            Log record to format. May include extra fields in record.__dict__.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            JSON-encoded log entry with timestamp, level, message, and structured</span>
<span class="sd">            fields. All extra fields from the record are included if they are</span>
<span class="sd">            JSON-serializable.</span>
<span class="sd">        """</span>
        <span class="c1"># Log data is JSON-serializable - use JsonValue instead of Any</span>
        <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">JsonValue</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">"ts"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">formatTime</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="s2">"%Y-%m-</span><span class="si">%d</span><span class="s2">T%H:%M:%S.</span><span class="si">%f</span><span class="s2">"</span><span class="p">)[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="s2">"Z"</span><span class="p">,</span>
            <span class="s2">"level"</span><span class="p">:</span> <span class="n">record</span><span class="o">.</span><span class="n">levelname</span><span class="p">,</span>
            <span class="s2">"name"</span><span class="p">:</span> <span class="n">record</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s2">"message"</span><span class="p">:</span> <span class="n">record</span><span class="o">.</span><span class="n">getMessage</span><span class="p">(),</span>
        <span class="p">}</span>

        <span class="c1"># Extract structured fields from extra (fields set via LoggerAdapter or extra dict)</span>
        <span class="n">structured_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"correlation_id"</span><span class="p">,</span> <span class="s2">"operation"</span><span class="p">,</span> <span class="s2">"status"</span><span class="p">,</span> <span class="s2">"duration_ms"</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">structured_fields</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">data</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

        <span class="c1"># Add correlation_id from context if not in extra</span>
        <span class="k">if</span> <span class="s2">"correlation_id"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="n">ctx_correlation_id</span> <span class="o">=</span> <span class="n">_correlation_id</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">ctx_correlation_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">data</span><span class="p">[</span><span class="s2">"correlation_id"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ctx_correlation_id</span>

        <span class="c1"># Add any additional extra fields (from extra dict passed to log calls)</span>
        <span class="c1"># Standard logging attributes to exclude</span>
        <span class="n">excluded</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">"name"</span><span class="p">,</span>
            <span class="s2">"msg"</span><span class="p">,</span>
            <span class="s2">"args"</span><span class="p">,</span>
            <span class="s2">"created"</span><span class="p">,</span>
            <span class="s2">"filename"</span><span class="p">,</span>
            <span class="s2">"funcName"</span><span class="p">,</span>
            <span class="s2">"levelname"</span><span class="p">,</span>
            <span class="s2">"levelno"</span><span class="p">,</span>
            <span class="s2">"lineno"</span><span class="p">,</span>
            <span class="s2">"module"</span><span class="p">,</span>
            <span class="s2">"msecs"</span><span class="p">,</span>
            <span class="s2">"message"</span><span class="p">,</span>
            <span class="s2">"pathname"</span><span class="p">,</span>
            <span class="s2">"process"</span><span class="p">,</span>
            <span class="s2">"processName"</span><span class="p">,</span>
            <span class="s2">"relativeCreated"</span><span class="p">,</span>
            <span class="s2">"thread"</span><span class="p">,</span>
            <span class="s2">"threadName"</span><span class="p">,</span>
            <span class="s2">"exc_info"</span><span class="p">,</span>
            <span class="s2">"exc_text"</span><span class="p">,</span>
            <span class="s2">"stack_info"</span><span class="p">,</span>
            <span class="s2">"getMessage"</span><span class="p">,</span>
            <span class="s2">"ts"</span><span class="p">,</span>  <span class="c1"># Not a standard attribute</span>
        <span class="p">}</span>
        <span class="c1"># Include all extra fields from record attributes (excluding standard logging attributes)</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">excluded</span>
                <span class="ow">and</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span>
                <span class="ow">and</span> <span class="ow">not</span> <span class="n">key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">"_"</span><span class="p">)</span>
                <span class="ow">and</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">dict</span><span class="p">))</span>
            <span class="p">):</span>
                <span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="kgfoundry_common.logging.JsonFormatter.format">
<code class="highlight language-python"><span class="nb">format</span><span class="p">(</span><span class="n">record</span><span class="p">)</span></code>
<a class="headerlink" href="#kgfoundry_common.logging.JsonFormatter.format" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Format log record as JSON.</p>
<p>Converts a logging.LogRecord to a JSON string with structured fields.
Extracts correlation_id from contextvars if not present in the record.</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>record</code>
</td>
<td>
<code><span title="logging.LogRecord">LogRecord</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Log record to format. May include extra fields in record.<strong>dict</strong>.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>JSON-encoded log entry with timestamp, level, message, and structured
fields. All extra fields from the record are included if they are
JSON-serializable.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">LogRecord</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Format log record as JSON.</span>

<span class="sd">    Converts a logging.LogRecord to a JSON string with structured fields.</span>
<span class="sd">    Extracts correlation_id from contextvars if not present in the record.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    record : logging.LogRecord</span>
<span class="sd">        Log record to format. May include extra fields in record.__dict__.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        JSON-encoded log entry with timestamp, level, message, and structured</span>
<span class="sd">        fields. All extra fields from the record are included if they are</span>
<span class="sd">        JSON-serializable.</span>
<span class="sd">    """</span>
    <span class="c1"># Log data is JSON-serializable - use JsonValue instead of Any</span>
    <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">JsonValue</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">"ts"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">formatTime</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="s2">"%Y-%m-</span><span class="si">%d</span><span class="s2">T%H:%M:%S.</span><span class="si">%f</span><span class="s2">"</span><span class="p">)[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="s2">"Z"</span><span class="p">,</span>
        <span class="s2">"level"</span><span class="p">:</span> <span class="n">record</span><span class="o">.</span><span class="n">levelname</span><span class="p">,</span>
        <span class="s2">"name"</span><span class="p">:</span> <span class="n">record</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
        <span class="s2">"message"</span><span class="p">:</span> <span class="n">record</span><span class="o">.</span><span class="n">getMessage</span><span class="p">(),</span>
    <span class="p">}</span>

    <span class="c1"># Extract structured fields from extra (fields set via LoggerAdapter or extra dict)</span>
    <span class="n">structured_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"correlation_id"</span><span class="p">,</span> <span class="s2">"operation"</span><span class="p">,</span> <span class="s2">"status"</span><span class="p">,</span> <span class="s2">"duration_ms"</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">structured_fields</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="c1"># Add correlation_id from context if not in extra</span>
    <span class="k">if</span> <span class="s2">"correlation_id"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
        <span class="n">ctx_correlation_id</span> <span class="o">=</span> <span class="n">_correlation_id</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ctx_correlation_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s2">"correlation_id"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ctx_correlation_id</span>

    <span class="c1"># Add any additional extra fields (from extra dict passed to log calls)</span>
    <span class="c1"># Standard logging attributes to exclude</span>
    <span class="n">excluded</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">"name"</span><span class="p">,</span>
        <span class="s2">"msg"</span><span class="p">,</span>
        <span class="s2">"args"</span><span class="p">,</span>
        <span class="s2">"created"</span><span class="p">,</span>
        <span class="s2">"filename"</span><span class="p">,</span>
        <span class="s2">"funcName"</span><span class="p">,</span>
        <span class="s2">"levelname"</span><span class="p">,</span>
        <span class="s2">"levelno"</span><span class="p">,</span>
        <span class="s2">"lineno"</span><span class="p">,</span>
        <span class="s2">"module"</span><span class="p">,</span>
        <span class="s2">"msecs"</span><span class="p">,</span>
        <span class="s2">"message"</span><span class="p">,</span>
        <span class="s2">"pathname"</span><span class="p">,</span>
        <span class="s2">"process"</span><span class="p">,</span>
        <span class="s2">"processName"</span><span class="p">,</span>
        <span class="s2">"relativeCreated"</span><span class="p">,</span>
        <span class="s2">"thread"</span><span class="p">,</span>
        <span class="s2">"threadName"</span><span class="p">,</span>
        <span class="s2">"exc_info"</span><span class="p">,</span>
        <span class="s2">"exc_text"</span><span class="p">,</span>
        <span class="s2">"stack_info"</span><span class="p">,</span>
        <span class="s2">"getMessage"</span><span class="p">,</span>
        <span class="s2">"ts"</span><span class="p">,</span>  <span class="c1"># Not a standard attribute</span>
    <span class="p">}</span>
    <span class="c1"># Include all extra fields from record attributes (excluding standard logging attributes)</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">excluded</span>
            <span class="ow">and</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span>
            <span class="ow">and</span> <span class="ow">not</span> <span class="n">key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">"_"</span><span class="p">)</span>
            <span class="ow">and</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">dict</span><span class="p">))</span>
        <span class="p">):</span>
            <span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
</div>
</div>
</div><p><em>Bases:</em> logging.Formatter</p>
<h3 id="kgfoundry_commonlogginglogcontextextra">kgfoundry_common.logging.LogContextExtra<a class="headerlink" href="#kgfoundry_commonlogginglogcontextextra" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="kgfoundry_common.logging.LogContextExtra">
<code>kgfoundry_common.logging.LogContextExtra</code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
</span>
<a class="headerlink" href="#kgfoundry_common.logging.LogContextExtra" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p>Immutable logging context with required and optional structured fields.</p>
<p>This frozen dataclass ensures thread-safe, immutable logging contexts that
can be safely shared across async tasks. Use the <code>with_*</code> methods to create
updated copies preserving immutability guarantees.</p>
<p><span class="doc-section-title">Attributes:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code><span title="kgfoundry_common.logging.LogContextExtra.correlation_id">correlation_id</span></code></td>
<td>
<code><span title="str">str</span> | None</code>
</td>
<td>
<div class="doc-md-description">
<p>Request or correlation ID for tracing across services.</p>
</div>
</td>
</tr>
<tr class="doc-section-item">
<td><code><span title="kgfoundry_common.logging.LogContextExtra.operation">operation</span></code></td>
<td>
<code><span title="str">str</span> | None</code>
</td>
<td>
<div class="doc-md-description">
<p>Name of the operation being logged (e.g., "search", "index_build").</p>
</div>
</td>
</tr>
<tr class="doc-section-item">
<td><code><span title="kgfoundry_common.logging.LogContextExtra.status">status</span></code></td>
<td>
<code><span title="str">str</span> | None</code>
</td>
<td>
<div class="doc-md-description">
<p>Operation status ("success", "error", "started", "in_progress").</p>
</div>
</td>
</tr>
<tr class="doc-section-item">
<td><code><span title="kgfoundry_common.logging.LogContextExtra.duration_ms">duration_ms</span></code></td>
<td>
<code><span title="float">float</span> | None</code>
</td>
<td>
<div class="doc-md-description">
<p>Operation duration in milliseconds.</p>
</div>
</td>
</tr>
<tr class="doc-section-item">
<td><code><span title="kgfoundry_common.logging.LogContextExtra.service">service</span></code></td>
<td>
<code><span title="str">str</span> | None</code>
</td>
<td>
<div class="doc-md-description">
<p>Name of the service producing the log.</p>
</div>
</td>
</tr>
<tr class="doc-section-item">
<td><code><span title="kgfoundry_common.logging.LogContextExtra.endpoint">endpoint</span></code></td>
<td>
<code><span title="str">str</span> | None</code>
</td>
<td>
<div class="doc-md-description">
<p>HTTP endpoint or internal method being executed.</p>
</div>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Examples:</span></p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">ctx</span> <span class="o">=</span> <span class="n">LogContextExtra</span><span class="p">(</span><span class="n">correlation_id</span><span class="o">=</span><span class="s2">"req-123"</span><span class="p">,</span> <span class="n">operation</span><span class="o">=</span><span class="s2">"search"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ctx_with_status</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">with_status</span><span class="p">(</span><span class="s2">"success"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ctx_with_status</span><span class="o">.</span><span class="n">status</span>
<span class="go">'success'</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Immutable: original is unchanged</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ctx</span><span class="o">.</span><span class="n">status</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="go">True</span>
</code></pre></div>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">slots</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># [nav:anchor LogContextExtra]</span>
<span class="k">class</span><span class="w"> </span><span class="nc">LogContextExtra</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Immutable logging context with required and optional structured fields.</span>

<span class="sd">    This frozen dataclass ensures thread-safe, immutable logging contexts that</span>
<span class="sd">    can be safely shared across async tasks. Use the `with_*` methods to create</span>
<span class="sd">    updated copies preserving immutability guarantees.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    correlation_id : str | None</span>
<span class="sd">        Request or correlation ID for tracing across services.</span>
<span class="sd">    operation : str | None</span>
<span class="sd">        Name of the operation being logged (e.g., "search", "index_build").</span>
<span class="sd">    status : str | None</span>
<span class="sd">        Operation status ("success", "error", "started", "in_progress").</span>
<span class="sd">    duration_ms : float | None</span>
<span class="sd">        Operation duration in milliseconds.</span>
<span class="sd">    service : str | None</span>
<span class="sd">        Name of the service producing the log.</span>
<span class="sd">    endpoint : str | None</span>
<span class="sd">        HTTP endpoint or internal method being executed.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; ctx = LogContextExtra(correlation_id="req-123", operation="search")</span>
<span class="sd">    &gt;&gt;&gt; ctx_with_status = ctx.with_status("success")</span>
<span class="sd">    &gt;&gt;&gt; ctx_with_status.status</span>
<span class="sd">    'success'</span>
<span class="sd">    &gt;&gt;&gt; # Immutable: original is unchanged</span>
<span class="sd">    &gt;&gt;&gt; ctx.status is None</span>
<span class="sd">    True</span>
<span class="sd">    """</span>

    <span class="n">correlation_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">operation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">status</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">duration_ms</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">service</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">with_correlation_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">correlation_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Return copy with updated correlation_id.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        correlation_id : str</span>
<span class="sd">            Correlation ID to set.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Self</span>
<span class="sd">            New instance with updated correlation_id.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="n">replace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">correlation_id</span><span class="o">=</span><span class="n">correlation_id</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">with_operation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operation</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Return copy with updated operation.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        operation : str</span>
<span class="sd">            Operation name to set.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Self</span>
<span class="sd">            New instance with updated operation.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="n">replace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operation</span><span class="o">=</span><span class="n">operation</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">with_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Return copy with updated status.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        status : str</span>
<span class="sd">            Status value to set.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Self</span>
<span class="sd">            New instance with updated status.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="n">replace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">with_duration_ms</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">duration_ms</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Return copy with updated duration_ms.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        duration_ms : float</span>
<span class="sd">            Duration in milliseconds to set.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Self</span>
<span class="sd">            New instance with updated duration_ms.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="n">replace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">duration_ms</span><span class="o">=</span><span class="n">duration_ms</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">"""Convert to dict, excluding None values for logging.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        dict[str, Any]</span>
<span class="sd">            Dictionary with non-None fields only.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="n">k</span><span class="p">:</span> <span class="n">v</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="p">{</span>
                <span class="s2">"correlation_id"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">correlation_id</span><span class="p">,</span>
                <span class="s2">"operation"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">operation</span><span class="p">,</span>
                <span class="s2">"status"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="p">,</span>
                <span class="s2">"duration_ms"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">duration_ms</span><span class="p">,</span>
                <span class="s2">"service"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">service</span><span class="p">,</span>
                <span class="s2">"endpoint"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="p">,</span>
            <span class="p">}</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">}</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="kgfoundry_common.logging.LogContextExtra.to_dict">
<code class="highlight language-python"><span class="n">to_dict</span><span class="p">()</span></code>
<a class="headerlink" href="#kgfoundry_common.logging.LogContextExtra.to_dict" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Convert to dict, excluding None values for logging.</p>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
</td>
<td>
<div class="doc-md-description">
<p>Dictionary with non-None fields only.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">"""Convert to dict, excluding None values for logging.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    dict[str, Any]</span>
<span class="sd">        Dictionary with non-None fields only.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="n">k</span><span class="p">:</span> <span class="n">v</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="p">{</span>
            <span class="s2">"correlation_id"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">correlation_id</span><span class="p">,</span>
            <span class="s2">"operation"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">operation</span><span class="p">,</span>
            <span class="s2">"status"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="p">,</span>
            <span class="s2">"duration_ms"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">duration_ms</span><span class="p">,</span>
            <span class="s2">"service"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">service</span><span class="p">,</span>
            <span class="s2">"endpoint"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="p">,</span>
        <span class="p">}</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="p">}</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="kgfoundry_common.logging.LogContextExtra.with_correlation_id">
<code class="highlight language-python"><span class="n">with_correlation_id</span><span class="p">(</span><span class="n">correlation_id</span><span class="p">)</span></code>
<a class="headerlink" href="#kgfoundry_common.logging.LogContextExtra.with_correlation_id" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Return copy with updated correlation_id.</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>correlation_id</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Correlation ID to set.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="typing.Self">Self</span></code>
</td>
<td>
<div class="doc-md-description">
<p>New instance with updated correlation_id.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">with_correlation_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">correlation_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Return copy with updated correlation_id.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    correlation_id : str</span>
<span class="sd">        Correlation ID to set.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Self</span>
<span class="sd">        New instance with updated correlation_id.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="n">replace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">correlation_id</span><span class="o">=</span><span class="n">correlation_id</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="kgfoundry_common.logging.LogContextExtra.with_duration_ms">
<code class="highlight language-python"><span class="n">with_duration_ms</span><span class="p">(</span><span class="n">duration_ms</span><span class="p">)</span></code>
<a class="headerlink" href="#kgfoundry_common.logging.LogContextExtra.with_duration_ms" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Return copy with updated duration_ms.</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>duration_ms</code>
</td>
<td>
<code><span title="float">float</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Duration in milliseconds to set.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="typing.Self">Self</span></code>
</td>
<td>
<div class="doc-md-description">
<p>New instance with updated duration_ms.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">with_duration_ms</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">duration_ms</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Return copy with updated duration_ms.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    duration_ms : float</span>
<span class="sd">        Duration in milliseconds to set.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Self</span>
<span class="sd">        New instance with updated duration_ms.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="n">replace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">duration_ms</span><span class="o">=</span><span class="n">duration_ms</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="kgfoundry_common.logging.LogContextExtra.with_operation">
<code class="highlight language-python"><span class="n">with_operation</span><span class="p">(</span><span class="n">operation</span><span class="p">)</span></code>
<a class="headerlink" href="#kgfoundry_common.logging.LogContextExtra.with_operation" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Return copy with updated operation.</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>operation</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Operation name to set.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="typing.Self">Self</span></code>
</td>
<td>
<div class="doc-md-description">
<p>New instance with updated operation.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">with_operation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operation</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Return copy with updated operation.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    operation : str</span>
<span class="sd">        Operation name to set.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Self</span>
<span class="sd">        New instance with updated operation.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="n">replace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operation</span><span class="o">=</span><span class="n">operation</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="kgfoundry_common.logging.LogContextExtra.with_status">
<code class="highlight language-python"><span class="n">with_status</span><span class="p">(</span><span class="n">status</span><span class="p">)</span></code>
<a class="headerlink" href="#kgfoundry_common.logging.LogContextExtra.with_status" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Return copy with updated status.</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>status</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Status value to set.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="typing.Self">Self</span></code>
</td>
<td>
<div class="doc-md-description">
<p>New instance with updated status.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">with_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Return copy with updated status.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    status : str</span>
<span class="sd">        Status value to set.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Self</span>
<span class="sd">        New instance with updated status.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="n">replace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
</div>
</div>
</div><h3 id="kgfoundry_commonloggingloggeradapter">kgfoundry_common.logging.LoggerAdapter<a class="headerlink" href="#kgfoundry_commonloggingloggeradapter" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="kgfoundry_common.logging.LoggerAdapter">
<code>kgfoundry_common.logging.LoggerAdapter</code>
<a class="headerlink" href="#kgfoundry_common.logging.LoggerAdapter" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" href="#kgfoundry_common.logging._LoggerAdapterBase" title="kgfoundry_common.logging._LoggerAdapterBase">_LoggerAdapterBase</a></code></p>
<p>Logger adapter that injects structured context fields.</p>
<p>This adapter ensures that all log entries include correlation_id,
operation, status, and duration_ms fields. It propagates correlation
IDs from context variables for async-safe operation.</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>logger</code>
</td>
<td>
<code><span title="logging.Logger">Logger</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Base logger instance to wrap.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>extra</code>
</td>
<td>
<code><a class="autorefs autorefs-internal" href="#kgfoundry_common.logging.LogContextExtra" title="kgfoundry_common.logging.LogContextExtra


  
      dataclass
  ">LogContextExtra</a> | <span title="collections.abc.Mapping">Mapping</span>[<span title="str">str</span>, <span title="object">object</span>] | None</code>
</td>
<td>
<div class="doc-md-description">
<p>Structured fields to inject into log entries. Can be a LogContextExtra
frozen dataclass or dict of fields. Defaults to None.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Attributes:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code><span title="kgfoundry_common.logging.LoggerAdapter.logger">logger</span></code></td>
<td>
<code><span title="logging.Logger">Logger</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Base logger instance to wrap.</p>
</div>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Examples:</span></p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">kgfoundry_common.logging</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span> <span class="o">=</span> <span class="n">get_logger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">"Search started"</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="p">{</span><span class="s2">"operation"</span><span class="p">:</span> <span class="s2">"search"</span><span class="p">,</span> <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"started"</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Correlation ID is automatically injected from context</span>
</code></pre></div>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">LoggerAdapter</span><span class="p">(</span><span class="n">_LoggerAdapterBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Logger adapter that injects structured context fields.</span>

<span class="sd">    This adapter ensures that all log entries include correlation_id,</span>
<span class="sd">    operation, status, and duration_ms fields. It propagates correlation</span>
<span class="sd">    IDs from context variables for async-safe operation.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    logger : logging.Logger</span>
<span class="sd">        Base logger instance to wrap.</span>
<span class="sd">    extra : LogContextExtra | Mapping[str, object] | None, optional</span>
<span class="sd">        Structured fields to inject into log entries. Can be a LogContextExtra</span>
<span class="sd">        frozen dataclass or dict of fields. Defaults to None.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    logger : logging.Logger</span>
<span class="sd">        Base logger instance to wrap.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from kgfoundry_common.logging import get_logger</span>
<span class="sd">    &gt;&gt;&gt; logger = get_logger(__name__)</span>
<span class="sd">    &gt;&gt;&gt; logger.info("Search started", extra={"operation": "search", "status": "started"})</span>
<span class="sd">    &gt;&gt;&gt; # Correlation ID is automatically injected from context</span>
<span class="sd">    """</span>

    <span class="n">logger</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">"""Process log message and inject structured fields.</span>

<span class="sd">        Merges structured fields from the adapter's extra dict and contextvars</span>
<span class="sd">        into the log record's extra dict. Ensures operation and status fields</span>
<span class="sd">        are always present.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        msg : str</span>
<span class="sd">            Log message string.</span>
<span class="sd">        kwargs : Mapping[str, Any]</span>
<span class="sd">            Keyword arguments from logging call, including 'extra' dict.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        tuple[str, Any]</span>
<span class="sd">            Processed message and kwargs with injected fields. The kwargs dict</span>
<span class="sd">            is modified in-place to include correlation_id, operation, and status.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">msg</span><span class="p">,</span> <span class="n">kwargs</span>

        <span class="n">extra</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">"extra"</span><span class="p">,</span> <span class="p">{})</span>

        <span class="c1"># Handle LogContextExtra dataclass: convert to dict if needed</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="n">LogContextExtra</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
                    <span class="n">extra</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="c1"># Merge self.extra (fields from LoggerAdapter constructor) into extra</span>
        <span class="c1"># This allows with_fields to inject fields that persist across log calls</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
                    <span class="n">extra</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

        <span class="c1"># Inject correlation_id from context if not provided</span>
        <span class="k">if</span> <span class="s2">"correlation_id"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
            <span class="n">ctx_correlation_id</span> <span class="o">=</span> <span class="n">_correlation_id</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">ctx_correlation_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">extra</span><span class="p">[</span><span class="s2">"correlation_id"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ctx_correlation_id</span>

        <span class="c1"># Ensure operation and status are present (defaults if missing)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_operation_and_status</span><span class="p">(</span><span class="n">extra</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"level"</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">msg</span><span class="p">,</span> <span class="n">kwargs</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_ensure_operation_and_status</span><span class="p">(</span><span class="n">extra</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">level</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Ensure operation and status fields are present in extra dict.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        extra : dict[str, Any]</span>
<span class="sd">            Extra dict to populate.</span>
<span class="sd">        level : int</span>
<span class="sd">            Log level to determine status.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="s2">"operation"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
            <span class="n">extra</span><span class="p">[</span><span class="s2">"operation"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"unknown"</span>
        <span class="k">if</span> <span class="s2">"status"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
            <span class="c1"># Infer status from log level</span>
            <span class="k">if</span> <span class="n">level</span> <span class="o">&gt;=</span> <span class="n">logging</span><span class="o">.</span><span class="n">ERROR</span><span class="p">:</span>
                <span class="n">extra</span><span class="p">[</span><span class="s2">"status"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"error"</span>
            <span class="k">elif</span> <span class="n">level</span> <span class="o">&gt;=</span> <span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">:</span>
                <span class="n">extra</span><span class="p">[</span><span class="s2">"status"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"warning"</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">extra</span><span class="p">[</span><span class="s2">"status"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"success"</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">debug</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Log a debug message with structured fields."""</span>
        <span class="n">kwargs_dict</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"dict[str, Any]"</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">kwargs_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"extra"</span><span class="p">,</span> <span class="p">{})</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">extra</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">extra</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"dict[str, Any]"</span><span class="p">,</span> <span class="n">extra</span><span class="p">)</span>
        <span class="c1"># Handle LogContextExtra dataclass: convert to dict if needed</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="n">LogContextExtra</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
                    <span class="n">extra</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="c1"># Merge self.extra (fields from LoggerAdapter constructor) into extra</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
                    <span class="n">extra</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="c1"># Inject correlation_id from context if not provided</span>
        <span class="k">if</span> <span class="s2">"correlation_id"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
            <span class="n">ctx_correlation_id</span> <span class="o">=</span> <span class="n">_correlation_id</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">ctx_correlation_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">extra</span><span class="p">[</span><span class="s2">"correlation_id"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ctx_correlation_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_operation_and_status</span><span class="p">(</span><span class="n">extra</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
        <span class="n">kwargs_dict</span><span class="p">[</span><span class="s2">"extra"</span><span class="p">]</span> <span class="o">=</span> <span class="n">extra</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs_dict</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Log an info message with structured fields."""</span>
        <span class="n">kwargs_dict</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"dict[str, Any]"</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">kwargs_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"extra"</span><span class="p">,</span> <span class="p">{})</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">extra</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">extra</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"dict[str, Any]"</span><span class="p">,</span> <span class="n">extra</span><span class="p">)</span>
        <span class="c1"># Handle LogContextExtra dataclass: convert to dict if needed</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="n">LogContextExtra</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
                    <span class="n">extra</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="c1"># Merge self.extra (fields from LoggerAdapter constructor) into extra</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
                    <span class="n">extra</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="c1"># Inject correlation_id from context if not provided</span>
        <span class="k">if</span> <span class="s2">"correlation_id"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
            <span class="n">ctx_correlation_id</span> <span class="o">=</span> <span class="n">_correlation_id</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">ctx_correlation_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">extra</span><span class="p">[</span><span class="s2">"correlation_id"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ctx_correlation_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_operation_and_status</span><span class="p">(</span><span class="n">extra</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
        <span class="n">kwargs_dict</span><span class="p">[</span><span class="s2">"extra"</span><span class="p">]</span> <span class="o">=</span> <span class="n">extra</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs_dict</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Log a warning message with structured fields."""</span>
        <span class="n">kwargs_dict</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"dict[str, Any]"</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">kwargs_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"extra"</span><span class="p">,</span> <span class="p">{})</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">extra</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">extra</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"dict[str, Any]"</span><span class="p">,</span> <span class="n">extra</span><span class="p">)</span>
        <span class="c1"># Handle LogContextExtra dataclass: convert to dict if needed</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="n">LogContextExtra</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
                    <span class="n">extra</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="c1"># Merge self.extra (fields from LoggerAdapter constructor) into extra</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
                    <span class="n">extra</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="c1"># Inject correlation_id from context if not provided</span>
        <span class="k">if</span> <span class="s2">"correlation_id"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
            <span class="n">ctx_correlation_id</span> <span class="o">=</span> <span class="n">_correlation_id</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">ctx_correlation_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">extra</span><span class="p">[</span><span class="s2">"correlation_id"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ctx_correlation_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_operation_and_status</span><span class="p">(</span><span class="n">extra</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">)</span>
        <span class="n">kwargs_dict</span><span class="p">[</span><span class="s2">"extra"</span><span class="p">]</span> <span class="o">=</span> <span class="n">extra</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs_dict</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Log an error message with structured fields."""</span>
        <span class="n">kwargs_dict</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"dict[str, Any]"</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">kwargs_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"extra"</span><span class="p">,</span> <span class="p">{})</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">extra</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">extra</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"dict[str, Any]"</span><span class="p">,</span> <span class="n">extra</span><span class="p">)</span>
        <span class="c1"># Handle LogContextExtra dataclass: convert to dict if needed</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="n">LogContextExtra</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
                    <span class="n">extra</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="c1"># Merge self.extra (fields from LoggerAdapter constructor) into extra</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
                    <span class="n">extra</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="c1"># Inject correlation_id from context if not provided</span>
        <span class="k">if</span> <span class="s2">"correlation_id"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
            <span class="n">ctx_correlation_id</span> <span class="o">=</span> <span class="n">_correlation_id</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">ctx_correlation_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">extra</span><span class="p">[</span><span class="s2">"correlation_id"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ctx_correlation_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_operation_and_status</span><span class="p">(</span><span class="n">extra</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">ERROR</span><span class="p">)</span>
        <span class="n">kwargs_dict</span><span class="p">[</span><span class="s2">"extra"</span><span class="p">]</span> <span class="o">=</span> <span class="n">extra</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs_dict</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">exception</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">msg</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span>
        <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span>
        <span class="n">exc_info</span><span class="p">:</span> <span class="nb">object</span> <span class="o">|</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Log an error with traceback using structured fields."""</span>
        <span class="n">kwargs_dict</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"dict[str, Any]"</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">"exc_info"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs_dict</span> <span class="ow">or</span> <span class="n">kwargs_dict</span><span class="p">[</span><span class="s2">"exc_info"</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">kwargs_dict</span><span class="p">[</span><span class="s2">"exc_info"</span><span class="p">]</span> <span class="o">=</span> <span class="n">exc_info</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs_dict</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">critical</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Log a critical message with structured fields."""</span>
        <span class="n">kwargs_dict</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"dict[str, Any]"</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">kwargs_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"extra"</span><span class="p">,</span> <span class="p">{})</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">extra</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">extra</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"dict[str, Any]"</span><span class="p">,</span> <span class="n">extra</span><span class="p">)</span>
        <span class="c1"># Handle LogContextExtra dataclass: convert to dict if needed</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="n">LogContextExtra</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
                    <span class="n">extra</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="c1"># Merge self.extra (fields from LoggerAdapter constructor) into extra</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
                    <span class="n">extra</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="c1"># Inject correlation_id from context if not provided</span>
        <span class="k">if</span> <span class="s2">"correlation_id"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
            <span class="n">ctx_correlation_id</span> <span class="o">=</span> <span class="n">_correlation_id</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">ctx_correlation_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">extra</span><span class="p">[</span><span class="s2">"correlation_id"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ctx_correlation_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_operation_and_status</span><span class="p">(</span><span class="n">extra</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">CRITICAL</span><span class="p">)</span>
        <span class="n">kwargs_dict</span><span class="p">[</span><span class="s2">"extra"</span><span class="p">]</span> <span class="o">=</span> <span class="n">extra</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs_dict</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">log</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Log a message at the given level with structured fields."""</span>
        <span class="n">kwargs_dict</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"dict[str, Any]"</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">kwargs_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"extra"</span><span class="p">,</span> <span class="p">{})</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">extra</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">extra</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"dict[str, Any]"</span><span class="p">,</span> <span class="n">extra</span><span class="p">)</span>
        <span class="c1"># Handle LogContextExtra dataclass: convert to dict if needed</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="n">LogContextExtra</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
                    <span class="n">extra</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="c1"># Merge self.extra (fields from LoggerAdapter constructor) into extra</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
                    <span class="n">extra</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="c1"># Inject correlation_id from context if not provided</span>
        <span class="k">if</span> <span class="s2">"correlation_id"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
            <span class="n">ctx_correlation_id</span> <span class="o">=</span> <span class="n">_correlation_id</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">ctx_correlation_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">extra</span><span class="p">[</span><span class="s2">"correlation_id"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ctx_correlation_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_operation_and_status</span><span class="p">(</span><span class="n">extra</span><span class="p">,</span> <span class="n">level</span><span class="p">)</span>
        <span class="n">kwargs_dict</span><span class="p">[</span><span class="s2">"extra"</span><span class="p">]</span> <span class="o">=</span> <span class="n">extra</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs_dict</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">log_success</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">operation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">duration_ms</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">fields</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Log a successful operation with structured fields.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        message : str</span>
<span class="sd">            Success message.</span>
<span class="sd">        operation : str | None, optional</span>
<span class="sd">            Operation name. If not provided, uses current context value or "unknown".</span>
<span class="sd">            Defaults to ``None``.</span>
<span class="sd">        duration_ms : float | None, optional</span>
<span class="sd">            Operation duration in milliseconds. Defaults to ``None``.</span>
<span class="sd">        **fields : object</span>
<span class="sd">            Additional structured fields to include in log record.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; from kgfoundry_common.logging import get_logger</span>
<span class="sd">        &gt;&gt;&gt; logger = get_logger(__name__)</span>
<span class="sd">        &gt;&gt;&gt; logger.log_success("Index built", operation="build_index", duration_ms=1234.5)</span>
<span class="sd">        """</span>
        <span class="n">extra</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">object</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"status"</span><span class="p">:</span> <span class="s2">"success"</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">operation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">extra</span><span class="p">[</span><span class="s2">"operation"</span><span class="p">]</span> <span class="o">=</span> <span class="n">operation</span>
        <span class="k">if</span> <span class="n">duration_ms</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">extra</span><span class="p">[</span><span class="s2">"duration_ms"</span><span class="p">]</span> <span class="o">=</span> <span class="n">duration_ms</span>
        <span class="n">extra</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="n">extra</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">log_failure</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">exception</span><span class="p">:</span> <span class="ne">Exception</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">operation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">duration_ms</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">fields</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Log a failure with structured fields and optional exception chaining.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        message : str</span>
<span class="sd">            Failure message.</span>
<span class="sd">        exception : Exception | None, optional</span>
<span class="sd">            Exception that caused the failure (preserved in extras). Defaults to ``None``.</span>
<span class="sd">        operation : str | None, optional</span>
<span class="sd">            Operation name. Defaults to ``None``.</span>
<span class="sd">        duration_ms : float | None, optional</span>
<span class="sd">            Operation duration in milliseconds. Defaults to ``None``.</span>
<span class="sd">        **fields : object</span>
<span class="sd">            Additional structured fields.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; from kgfoundry_common.logging import get_logger</span>
<span class="sd">        &gt;&gt;&gt; logger = get_logger(__name__)</span>
<span class="sd">        &gt;&gt;&gt; try:</span>
<span class="sd">        ...     raise ValueError("Invalid data")</span>
<span class="sd">        ... except ValueError as e:</span>
<span class="sd">        ...     logger.log_failure("Failed to process", exception=e, operation="process_data")</span>
<span class="sd">        """</span>
        <span class="n">extra</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">object</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"status"</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">operation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">extra</span><span class="p">[</span><span class="s2">"operation"</span><span class="p">]</span> <span class="o">=</span> <span class="n">operation</span>
        <span class="k">if</span> <span class="n">duration_ms</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">extra</span><span class="p">[</span><span class="s2">"duration_ms"</span><span class="p">]</span> <span class="o">=</span> <span class="n">duration_ms</span>
        <span class="k">if</span> <span class="n">exception</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">extra</span><span class="p">[</span><span class="s2">"error_type"</span><span class="p">]</span> <span class="o">=</span> <span class="n">exception</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
            <span class="n">extra</span><span class="p">[</span><span class="s2">"error_detail"</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">exception</span><span class="p">)</span>
        <span class="n">extra</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="n">extra</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">log_io</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">operation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">io_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">"unknown"</span><span class="p">,</span>
        <span class="n">size_bytes</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">duration_ms</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">fields</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Log I/O operation with structured fields.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        message : str</span>
<span class="sd">            I/O operation message.</span>
<span class="sd">        operation : str | None, optional</span>
<span class="sd">            Operation name. Defaults to ``None``.</span>
<span class="sd">        io_type : str, optional</span>
<span class="sd">            I/O type ("read", "write", "delete", "unknown"). Defaults to ``"unknown"``.</span>
<span class="sd">        size_bytes : int | None, optional</span>
<span class="sd">            Bytes transferred/processed. Defaults to ``None``.</span>
<span class="sd">        duration_ms : float | None, optional</span>
<span class="sd">            I/O duration in milliseconds. Defaults to ``None``.</span>
<span class="sd">        **fields : object</span>
<span class="sd">            Additional structured fields.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; from kgfoundry_common.logging import get_logger</span>
<span class="sd">        &gt;&gt;&gt; logger = get_logger(__name__)</span>
<span class="sd">        &gt;&gt;&gt; logger.log_io(</span>
<span class="sd">        ...     "Downloaded file",</span>
<span class="sd">        ...     operation="download",</span>
<span class="sd">        ...     io_type="read",</span>
<span class="sd">        ...     size_bytes=1024,</span>
<span class="sd">        ...     duration_ms=500.0,</span>
<span class="sd">        ... )</span>
<span class="sd">        """</span>
        <span class="n">extra</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">object</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"status"</span><span class="p">:</span> <span class="s2">"success"</span><span class="p">,</span> <span class="s2">"io_type"</span><span class="p">:</span> <span class="n">io_type</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">operation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">extra</span><span class="p">[</span><span class="s2">"operation"</span><span class="p">]</span> <span class="o">=</span> <span class="n">operation</span>
        <span class="k">if</span> <span class="n">size_bytes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">extra</span><span class="p">[</span><span class="s2">"size_bytes"</span><span class="p">]</span> <span class="o">=</span> <span class="n">size_bytes</span>
        <span class="k">if</span> <span class="n">duration_ms</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">extra</span><span class="p">[</span><span class="s2">"duration_ms"</span><span class="p">]</span> <span class="o">=</span> <span class="n">duration_ms</span>
        <span class="n">extra</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="n">extra</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="kgfoundry_common.logging.LoggerAdapter.critical">
<code class="highlight language-python"><span class="n">critical</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
<a class="headerlink" href="#kgfoundry_common.logging.LoggerAdapter.critical" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Log a critical message with structured fields.</p>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">critical</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Log a critical message with structured fields."""</span>
    <span class="n">kwargs_dict</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"dict[str, Any]"</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
    <span class="n">extra</span> <span class="o">=</span> <span class="n">kwargs_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"extra"</span><span class="p">,</span> <span class="p">{})</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">extra</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">extra</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"dict[str, Any]"</span><span class="p">,</span> <span class="n">extra</span><span class="p">)</span>
    <span class="c1"># Handle LogContextExtra dataclass: convert to dict if needed</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="n">LogContextExtra</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
                <span class="n">extra</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="c1"># Merge self.extra (fields from LoggerAdapter constructor) into extra</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
                <span class="n">extra</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="c1"># Inject correlation_id from context if not provided</span>
    <span class="k">if</span> <span class="s2">"correlation_id"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
        <span class="n">ctx_correlation_id</span> <span class="o">=</span> <span class="n">_correlation_id</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ctx_correlation_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">extra</span><span class="p">[</span><span class="s2">"correlation_id"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ctx_correlation_id</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_operation_and_status</span><span class="p">(</span><span class="n">extra</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">CRITICAL</span><span class="p">)</span>
    <span class="n">kwargs_dict</span><span class="p">[</span><span class="s2">"extra"</span><span class="p">]</span> <span class="o">=</span> <span class="n">extra</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs_dict</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="kgfoundry_common.logging.LoggerAdapter.debug">
<code class="highlight language-python"><span class="n">debug</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
<a class="headerlink" href="#kgfoundry_common.logging.LoggerAdapter.debug" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Log a debug message with structured fields.</p>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">debug</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Log a debug message with structured fields."""</span>
    <span class="n">kwargs_dict</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"dict[str, Any]"</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
    <span class="n">extra</span> <span class="o">=</span> <span class="n">kwargs_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"extra"</span><span class="p">,</span> <span class="p">{})</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">extra</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">extra</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"dict[str, Any]"</span><span class="p">,</span> <span class="n">extra</span><span class="p">)</span>
    <span class="c1"># Handle LogContextExtra dataclass: convert to dict if needed</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="n">LogContextExtra</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
                <span class="n">extra</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="c1"># Merge self.extra (fields from LoggerAdapter constructor) into extra</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
                <span class="n">extra</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="c1"># Inject correlation_id from context if not provided</span>
    <span class="k">if</span> <span class="s2">"correlation_id"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
        <span class="n">ctx_correlation_id</span> <span class="o">=</span> <span class="n">_correlation_id</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ctx_correlation_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">extra</span><span class="p">[</span><span class="s2">"correlation_id"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ctx_correlation_id</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_operation_and_status</span><span class="p">(</span><span class="n">extra</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
    <span class="n">kwargs_dict</span><span class="p">[</span><span class="s2">"extra"</span><span class="p">]</span> <span class="o">=</span> <span class="n">extra</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs_dict</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="kgfoundry_common.logging.LoggerAdapter.error">
<code class="highlight language-python"><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
<a class="headerlink" href="#kgfoundry_common.logging.LoggerAdapter.error" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Log an error message with structured fields.</p>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Log an error message with structured fields."""</span>
    <span class="n">kwargs_dict</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"dict[str, Any]"</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
    <span class="n">extra</span> <span class="o">=</span> <span class="n">kwargs_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"extra"</span><span class="p">,</span> <span class="p">{})</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">extra</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">extra</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"dict[str, Any]"</span><span class="p">,</span> <span class="n">extra</span><span class="p">)</span>
    <span class="c1"># Handle LogContextExtra dataclass: convert to dict if needed</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="n">LogContextExtra</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
                <span class="n">extra</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="c1"># Merge self.extra (fields from LoggerAdapter constructor) into extra</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
                <span class="n">extra</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="c1"># Inject correlation_id from context if not provided</span>
    <span class="k">if</span> <span class="s2">"correlation_id"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
        <span class="n">ctx_correlation_id</span> <span class="o">=</span> <span class="n">_correlation_id</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ctx_correlation_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">extra</span><span class="p">[</span><span class="s2">"correlation_id"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ctx_correlation_id</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_operation_and_status</span><span class="p">(</span><span class="n">extra</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">ERROR</span><span class="p">)</span>
    <span class="n">kwargs_dict</span><span class="p">[</span><span class="s2">"extra"</span><span class="p">]</span> <span class="o">=</span> <span class="n">extra</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs_dict</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="kgfoundry_common.logging.LoggerAdapter.exception">
<code class="highlight language-python"><span class="n">exception</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
<a class="headerlink" href="#kgfoundry_common.logging.LoggerAdapter.exception" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Log an error with traceback using structured fields.</p>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">exception</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">msg</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span>
    <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span>
    <span class="n">exc_info</span><span class="p">:</span> <span class="nb">object</span> <span class="o">|</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Log an error with traceback using structured fields."""</span>
    <span class="n">kwargs_dict</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"dict[str, Any]"</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="s2">"exc_info"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs_dict</span> <span class="ow">or</span> <span class="n">kwargs_dict</span><span class="p">[</span><span class="s2">"exc_info"</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
        <span class="n">kwargs_dict</span><span class="p">[</span><span class="s2">"exc_info"</span><span class="p">]</span> <span class="o">=</span> <span class="n">exc_info</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs_dict</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="kgfoundry_common.logging.LoggerAdapter.info">
<code class="highlight language-python"><span class="n">info</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
<a class="headerlink" href="#kgfoundry_common.logging.LoggerAdapter.info" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Log an info message with structured fields.</p>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Log an info message with structured fields."""</span>
    <span class="n">kwargs_dict</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"dict[str, Any]"</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
    <span class="n">extra</span> <span class="o">=</span> <span class="n">kwargs_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"extra"</span><span class="p">,</span> <span class="p">{})</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">extra</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">extra</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"dict[str, Any]"</span><span class="p">,</span> <span class="n">extra</span><span class="p">)</span>
    <span class="c1"># Handle LogContextExtra dataclass: convert to dict if needed</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="n">LogContextExtra</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
                <span class="n">extra</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="c1"># Merge self.extra (fields from LoggerAdapter constructor) into extra</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
                <span class="n">extra</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="c1"># Inject correlation_id from context if not provided</span>
    <span class="k">if</span> <span class="s2">"correlation_id"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
        <span class="n">ctx_correlation_id</span> <span class="o">=</span> <span class="n">_correlation_id</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ctx_correlation_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">extra</span><span class="p">[</span><span class="s2">"correlation_id"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ctx_correlation_id</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_operation_and_status</span><span class="p">(</span><span class="n">extra</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
    <span class="n">kwargs_dict</span><span class="p">[</span><span class="s2">"extra"</span><span class="p">]</span> <span class="o">=</span> <span class="n">extra</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs_dict</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="kgfoundry_common.logging.LoggerAdapter.log">
<code class="highlight language-python"><span class="n">log</span><span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
<a class="headerlink" href="#kgfoundry_common.logging.LoggerAdapter.log" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Log a message at the given level with structured fields.</p>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">log</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Log a message at the given level with structured fields."""</span>
    <span class="n">kwargs_dict</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"dict[str, Any]"</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
    <span class="n">extra</span> <span class="o">=</span> <span class="n">kwargs_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"extra"</span><span class="p">,</span> <span class="p">{})</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">extra</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">extra</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"dict[str, Any]"</span><span class="p">,</span> <span class="n">extra</span><span class="p">)</span>
    <span class="c1"># Handle LogContextExtra dataclass: convert to dict if needed</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="n">LogContextExtra</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
                <span class="n">extra</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="c1"># Merge self.extra (fields from LoggerAdapter constructor) into extra</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
                <span class="n">extra</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="c1"># Inject correlation_id from context if not provided</span>
    <span class="k">if</span> <span class="s2">"correlation_id"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
        <span class="n">ctx_correlation_id</span> <span class="o">=</span> <span class="n">_correlation_id</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ctx_correlation_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">extra</span><span class="p">[</span><span class="s2">"correlation_id"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ctx_correlation_id</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_operation_and_status</span><span class="p">(</span><span class="n">extra</span><span class="p">,</span> <span class="n">level</span><span class="p">)</span>
    <span class="n">kwargs_dict</span><span class="p">[</span><span class="s2">"extra"</span><span class="p">]</span> <span class="o">=</span> <span class="n">extra</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs_dict</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="kgfoundry_common.logging.LoggerAdapter.log_failure">
<code class="highlight language-python"><span class="n">log_failure</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">exception</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">operation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">duration_ms</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">fields</span><span class="p">)</span></code>
<a class="headerlink" href="#kgfoundry_common.logging.LoggerAdapter.log_failure" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Log a failure with structured fields and optional exception chaining.</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>message</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Failure message.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>exception</code>
</td>
<td>
<code><span title="Exception">Exception</span> | None</code>
</td>
<td>
<div class="doc-md-description">
<p>Exception that caused the failure (preserved in extras). Defaults to <code>None</code>.</p>
</div>
</td>
<td>
<code>None</code>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>operation</code>
</td>
<td>
<code><span title="str">str</span> | None</code>
</td>
<td>
<div class="doc-md-description">
<p>Operation name. Defaults to <code>None</code>.</p>
</div>
</td>
<td>
<code>None</code>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>duration_ms</code>
</td>
<td>
<code><span title="float">float</span> | None</code>
</td>
<td>
<div class="doc-md-description">
<p>Operation duration in milliseconds. Defaults to <code>None</code>.</p>
</div>
</td>
<td>
<code>None</code>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>**fields</code>
</td>
<td>
<code><span title="object">object</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Additional structured fields.</p>
</div>
</td>
<td>
<code>{}</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Examples:</span></p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">kgfoundry_common.logging</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span> <span class="o">=</span> <span class="n">get_logger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Invalid data"</span><span class="p">)</span>
<span class="gp">... </span><span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">logger</span><span class="o">.</span><span class="n">log_failure</span><span class="p">(</span><span class="s2">"Failed to process"</span><span class="p">,</span> <span class="n">exception</span><span class="o">=</span><span class="n">e</span><span class="p">,</span> <span class="n">operation</span><span class="o">=</span><span class="s2">"process_data"</span><span class="p">)</span>
</code></pre></div>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">log_failure</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">exception</span><span class="p">:</span> <span class="ne">Exception</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">operation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">duration_ms</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">fields</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Log a failure with structured fields and optional exception chaining.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    message : str</span>
<span class="sd">        Failure message.</span>
<span class="sd">    exception : Exception | None, optional</span>
<span class="sd">        Exception that caused the failure (preserved in extras). Defaults to ``None``.</span>
<span class="sd">    operation : str | None, optional</span>
<span class="sd">        Operation name. Defaults to ``None``.</span>
<span class="sd">    duration_ms : float | None, optional</span>
<span class="sd">        Operation duration in milliseconds. Defaults to ``None``.</span>
<span class="sd">    **fields : object</span>
<span class="sd">        Additional structured fields.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from kgfoundry_common.logging import get_logger</span>
<span class="sd">    &gt;&gt;&gt; logger = get_logger(__name__)</span>
<span class="sd">    &gt;&gt;&gt; try:</span>
<span class="sd">    ...     raise ValueError("Invalid data")</span>
<span class="sd">    ... except ValueError as e:</span>
<span class="sd">    ...     logger.log_failure("Failed to process", exception=e, operation="process_data")</span>
<span class="sd">    """</span>
    <span class="n">extra</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">object</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"status"</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">operation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">extra</span><span class="p">[</span><span class="s2">"operation"</span><span class="p">]</span> <span class="o">=</span> <span class="n">operation</span>
    <span class="k">if</span> <span class="n">duration_ms</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">extra</span><span class="p">[</span><span class="s2">"duration_ms"</span><span class="p">]</span> <span class="o">=</span> <span class="n">duration_ms</span>
    <span class="k">if</span> <span class="n">exception</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">extra</span><span class="p">[</span><span class="s2">"error_type"</span><span class="p">]</span> <span class="o">=</span> <span class="n">exception</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="n">extra</span><span class="p">[</span><span class="s2">"error_detail"</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">exception</span><span class="p">)</span>
    <span class="n">extra</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="n">extra</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="kgfoundry_common.logging.LoggerAdapter.log_io">
<code class="highlight language-python"><span class="n">log_io</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">operation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">io_type</span><span class="o">=</span><span class="s1">'unknown'</span><span class="p">,</span> <span class="n">size_bytes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">duration_ms</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">fields</span><span class="p">)</span></code>
<a class="headerlink" href="#kgfoundry_common.logging.LoggerAdapter.log_io" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Log I/O operation with structured fields.</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>message</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>I/O operation message.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>operation</code>
</td>
<td>
<code><span title="str">str</span> | None</code>
</td>
<td>
<div class="doc-md-description">
<p>Operation name. Defaults to <code>None</code>.</p>
</div>
</td>
<td>
<code>None</code>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>io_type</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>I/O type ("read", "write", "delete", "unknown"). Defaults to <code>"unknown"</code>.</p>
</div>
</td>
<td>
<code>'unknown'</code>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>size_bytes</code>
</td>
<td>
<code><span title="int">int</span> | None</code>
</td>
<td>
<div class="doc-md-description">
<p>Bytes transferred/processed. Defaults to <code>None</code>.</p>
</div>
</td>
<td>
<code>None</code>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>duration_ms</code>
</td>
<td>
<code><span title="float">float</span> | None</code>
</td>
<td>
<div class="doc-md-description">
<p>I/O duration in milliseconds. Defaults to <code>None</code>.</p>
</div>
</td>
<td>
<code>None</code>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>**fields</code>
</td>
<td>
<code><span title="object">object</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Additional structured fields.</p>
</div>
</td>
<td>
<code>{}</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Examples:</span></p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">kgfoundry_common.logging</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span> <span class="o">=</span> <span class="n">get_logger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span><span class="o">.</span><span class="n">log_io</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">"Downloaded file"</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">operation</span><span class="o">=</span><span class="s2">"download"</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">io_type</span><span class="o">=</span><span class="s2">"read"</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">size_bytes</span><span class="o">=</span><span class="mi">1024</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">duration_ms</span><span class="o">=</span><span class="mf">500.0</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
</code></pre></div>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">log_io</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">operation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">io_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">"unknown"</span><span class="p">,</span>
    <span class="n">size_bytes</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">duration_ms</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">fields</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Log I/O operation with structured fields.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    message : str</span>
<span class="sd">        I/O operation message.</span>
<span class="sd">    operation : str | None, optional</span>
<span class="sd">        Operation name. Defaults to ``None``.</span>
<span class="sd">    io_type : str, optional</span>
<span class="sd">        I/O type ("read", "write", "delete", "unknown"). Defaults to ``"unknown"``.</span>
<span class="sd">    size_bytes : int | None, optional</span>
<span class="sd">        Bytes transferred/processed. Defaults to ``None``.</span>
<span class="sd">    duration_ms : float | None, optional</span>
<span class="sd">        I/O duration in milliseconds. Defaults to ``None``.</span>
<span class="sd">    **fields : object</span>
<span class="sd">        Additional structured fields.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from kgfoundry_common.logging import get_logger</span>
<span class="sd">    &gt;&gt;&gt; logger = get_logger(__name__)</span>
<span class="sd">    &gt;&gt;&gt; logger.log_io(</span>
<span class="sd">    ...     "Downloaded file",</span>
<span class="sd">    ...     operation="download",</span>
<span class="sd">    ...     io_type="read",</span>
<span class="sd">    ...     size_bytes=1024,</span>
<span class="sd">    ...     duration_ms=500.0,</span>
<span class="sd">    ... )</span>
<span class="sd">    """</span>
    <span class="n">extra</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">object</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"status"</span><span class="p">:</span> <span class="s2">"success"</span><span class="p">,</span> <span class="s2">"io_type"</span><span class="p">:</span> <span class="n">io_type</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">operation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">extra</span><span class="p">[</span><span class="s2">"operation"</span><span class="p">]</span> <span class="o">=</span> <span class="n">operation</span>
    <span class="k">if</span> <span class="n">size_bytes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">extra</span><span class="p">[</span><span class="s2">"size_bytes"</span><span class="p">]</span> <span class="o">=</span> <span class="n">size_bytes</span>
    <span class="k">if</span> <span class="n">duration_ms</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">extra</span><span class="p">[</span><span class="s2">"duration_ms"</span><span class="p">]</span> <span class="o">=</span> <span class="n">duration_ms</span>
    <span class="n">extra</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="n">extra</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="kgfoundry_common.logging.LoggerAdapter.log_success">
<code class="highlight language-python"><span class="n">log_success</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">operation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">duration_ms</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">fields</span><span class="p">)</span></code>
<a class="headerlink" href="#kgfoundry_common.logging.LoggerAdapter.log_success" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Log a successful operation with structured fields.</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>message</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Success message.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>operation</code>
</td>
<td>
<code><span title="str">str</span> | None</code>
</td>
<td>
<div class="doc-md-description">
<p>Operation name. If not provided, uses current context value or "unknown".
Defaults to <code>None</code>.</p>
</div>
</td>
<td>
<code>None</code>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>duration_ms</code>
</td>
<td>
<code><span title="float">float</span> | None</code>
</td>
<td>
<div class="doc-md-description">
<p>Operation duration in milliseconds. Defaults to <code>None</code>.</p>
</div>
</td>
<td>
<code>None</code>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>**fields</code>
</td>
<td>
<code><span title="object">object</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Additional structured fields to include in log record.</p>
</div>
</td>
<td>
<code>{}</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Examples:</span></p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">kgfoundry_common.logging</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span> <span class="o">=</span> <span class="n">get_logger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span><span class="o">.</span><span class="n">log_success</span><span class="p">(</span><span class="s2">"Index built"</span><span class="p">,</span> <span class="n">operation</span><span class="o">=</span><span class="s2">"build_index"</span><span class="p">,</span> <span class="n">duration_ms</span><span class="o">=</span><span class="mf">1234.5</span><span class="p">)</span>
</code></pre></div>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">log_success</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">operation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">duration_ms</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">fields</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Log a successful operation with structured fields.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    message : str</span>
<span class="sd">        Success message.</span>
<span class="sd">    operation : str | None, optional</span>
<span class="sd">        Operation name. If not provided, uses current context value or "unknown".</span>
<span class="sd">        Defaults to ``None``.</span>
<span class="sd">    duration_ms : float | None, optional</span>
<span class="sd">        Operation duration in milliseconds. Defaults to ``None``.</span>
<span class="sd">    **fields : object</span>
<span class="sd">        Additional structured fields to include in log record.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from kgfoundry_common.logging import get_logger</span>
<span class="sd">    &gt;&gt;&gt; logger = get_logger(__name__)</span>
<span class="sd">    &gt;&gt;&gt; logger.log_success("Index built", operation="build_index", duration_ms=1234.5)</span>
<span class="sd">    """</span>
    <span class="n">extra</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">object</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"status"</span><span class="p">:</span> <span class="s2">"success"</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">operation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">extra</span><span class="p">[</span><span class="s2">"operation"</span><span class="p">]</span> <span class="o">=</span> <span class="n">operation</span>
    <span class="k">if</span> <span class="n">duration_ms</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">extra</span><span class="p">[</span><span class="s2">"duration_ms"</span><span class="p">]</span> <span class="o">=</span> <span class="n">duration_ms</span>
    <span class="n">extra</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="n">extra</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="kgfoundry_common.logging.LoggerAdapter.process">
<code class="highlight language-python"><span class="n">process</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span></code>
<a class="headerlink" href="#kgfoundry_common.logging.LoggerAdapter.process" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Process log message and inject structured fields.</p>
<p>Merges structured fields from the adapter's extra dict and contextvars
into the log record's extra dict. Ensures operation and status fields
are always present.</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>msg</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Log message string.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>kwargs</code>
</td>
<td>
<code><span title="collections.abc.Mapping">Mapping</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
</td>
<td>
<div class="doc-md-description">
<p>Keyword arguments from logging call, including 'extra' dict.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="tuple">tuple</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
</td>
<td>
<div class="doc-md-description">
<p>Processed message and kwargs with injected fields. The kwargs dict
is modified in-place to include correlation_id, operation, and status.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">"""Process log message and inject structured fields.</span>

<span class="sd">    Merges structured fields from the adapter's extra dict and contextvars</span>
<span class="sd">    into the log record's extra dict. Ensures operation and status fields</span>
<span class="sd">    are always present.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    msg : str</span>
<span class="sd">        Log message string.</span>
<span class="sd">    kwargs : Mapping[str, Any]</span>
<span class="sd">        Keyword arguments from logging call, including 'extra' dict.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    tuple[str, Any]</span>
<span class="sd">        Processed message and kwargs with injected fields. The kwargs dict</span>
<span class="sd">        is modified in-place to include correlation_id, operation, and status.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">msg</span><span class="p">,</span> <span class="n">kwargs</span>

    <span class="n">extra</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">"extra"</span><span class="p">,</span> <span class="p">{})</span>

    <span class="c1"># Handle LogContextExtra dataclass: convert to dict if needed</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="n">LogContextExtra</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
                <span class="n">extra</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="c1"># Merge self.extra (fields from LoggerAdapter constructor) into extra</span>
    <span class="c1"># This allows with_fields to inject fields that persist across log calls</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
                <span class="n">extra</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="c1"># Inject correlation_id from context if not provided</span>
    <span class="k">if</span> <span class="s2">"correlation_id"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
        <span class="n">ctx_correlation_id</span> <span class="o">=</span> <span class="n">_correlation_id</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ctx_correlation_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">extra</span><span class="p">[</span><span class="s2">"correlation_id"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ctx_correlation_id</span>

    <span class="c1"># Ensure operation and status are present (defaults if missing)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_operation_and_status</span><span class="p">(</span><span class="n">extra</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"level"</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">msg</span><span class="p">,</span> <span class="n">kwargs</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="kgfoundry_common.logging.LoggerAdapter.warning">
<code class="highlight language-python"><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>
<a class="headerlink" href="#kgfoundry_common.logging.LoggerAdapter.warning" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Log a warning message with structured fields.</p>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Log a warning message with structured fields."""</span>
    <span class="n">kwargs_dict</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"dict[str, Any]"</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
    <span class="n">extra</span> <span class="o">=</span> <span class="n">kwargs_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"extra"</span><span class="p">,</span> <span class="p">{})</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">extra</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">extra</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"dict[str, Any]"</span><span class="p">,</span> <span class="n">extra</span><span class="p">)</span>
    <span class="c1"># Handle LogContextExtra dataclass: convert to dict if needed</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="n">LogContextExtra</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
                <span class="n">extra</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="c1"># Merge self.extra (fields from LoggerAdapter constructor) into extra</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
                <span class="n">extra</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="c1"># Inject correlation_id from context if not provided</span>
    <span class="k">if</span> <span class="s2">"correlation_id"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extra</span><span class="p">:</span>
        <span class="n">ctx_correlation_id</span> <span class="o">=</span> <span class="n">_correlation_id</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ctx_correlation_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">extra</span><span class="p">[</span><span class="s2">"correlation_id"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ctx_correlation_id</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_operation_and_status</span><span class="p">(</span><span class="n">extra</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">)</span>
    <span class="n">kwargs_dict</span><span class="p">[</span><span class="s2">"extra"</span><span class="p">]</span> <span class="o">=</span> <span class="n">extra</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs_dict</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
</div>
</div>
</div><p><em>Bases:</em> _LoggerAdapterBase</p>
<h3 id="kgfoundry_commonloggingloggingcache">kgfoundry_common.logging.LoggingCache<a class="headerlink" href="#kgfoundry_commonloggingloggingcache" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="kgfoundry_common.logging.LoggingCache">
<code>kgfoundry_common.logging.LoggingCache</code>
<a class="headerlink" href="#kgfoundry_common.logging.LoggingCache" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p class="doc doc-class-bases">
              Bases: <code><span title="typing.Protocol">Protocol</span></code></p>
<p>Protocol for logging cache implementations.</p>
<p>This protocol defines a contract for caching logging configurations,
formatters, or other logging-related state without exposing internal
implementation details. Implementations provide a public interface
for retrieving cached logging resources.</p>
<p><span class="doc-section-title">Methods:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code><a class="autorefs autorefs-internal" href="#kgfoundry_common.logging.LoggingCache.get_formatter" title="get_formatter() (kgfoundry_common.logging.LoggingCache.get_formatter)">get_formatter</a></code></td>
<td>
<div class="doc-md-description">
<p>Get or create a cached JSON formatter instance.</p>
</div>
</td>
</tr>
<tr class="doc-section-item">
<td><code><a class="autorefs autorefs-internal" href="#kgfoundry_common.logging.LoggingCache.clear" title="clear() (kgfoundry_common.logging.LoggingCache.clear)">clear</a></code></td>
<td>
<div class="doc-md-description">
<p>Clear all cached entries and reset state.</p>
</div>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Examples:</span></p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">kgfoundry_common.logging</span><span class="w"> </span><span class="kn">import</span> <span class="n">LoggingCache</span><span class="p">,</span> <span class="n">get_logging_cache</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache</span> <span class="o">=</span> <span class="n">get_logging_cache</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># cache implements LoggingCache protocol</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cache</span><span class="p">,</span> <span class="n">LoggingCache</span><span class="p">)</span>
</code></pre></div>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@runtime_checkable</span>
<span class="c1"># [nav:anchor LoggingCache]</span>
<span class="k">class</span><span class="w"> </span><span class="nc">LoggingCache</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Protocol for logging cache implementations.</span>

<span class="sd">    This protocol defines a contract for caching logging configurations,</span>
<span class="sd">    formatters, or other logging-related state without exposing internal</span>
<span class="sd">    implementation details. Implementations provide a public interface</span>
<span class="sd">    for retrieving cached logging resources.</span>

<span class="sd">    Methods</span>
<span class="sd">    -------</span>
<span class="sd">    get_formatter() -&gt; JsonFormatter</span>
<span class="sd">        Get or create a cached JSON formatter instance.</span>
<span class="sd">    clear() -&gt; None</span>
<span class="sd">        Clear all cached entries and reset state.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from kgfoundry_common.logging import LoggingCache, get_logging_cache</span>
<span class="sd">    &gt;&gt;&gt; cache = get_logging_cache()</span>
<span class="sd">    &gt;&gt;&gt; # cache implements LoggingCache protocol</span>
<span class="sd">    &gt;&gt;&gt; assert isinstance(cache, LoggingCache)</span>
<span class="sd">    """</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_formatter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">JsonFormatter</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Get or create a cached JSON formatter instance.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        JsonFormatter</span>
<span class="sd">            A JsonFormatter instance from cache or newly created.</span>
<span class="sd">        """</span>
        <span class="o">...</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Clear all cached entries and reset state.</span>

<span class="sd">        This method clears formatter caches and any other logging-related cached state.</span>
<span class="sd">        """</span>
        <span class="o">...</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="kgfoundry_common.logging.LoggingCache.clear">
<code class="highlight language-python"><span class="n">clear</span><span class="p">()</span></code>
<a class="headerlink" href="#kgfoundry_common.logging.LoggingCache.clear" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Clear all cached entries and reset state.</p>
<p>This method clears formatter caches and any other logging-related cached state.</p>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Clear all cached entries and reset state.</span>

<span class="sd">    This method clears formatter caches and any other logging-related cached state.</span>
<span class="sd">    """</span>
    <span class="o">...</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="kgfoundry_common.logging.LoggingCache.get_formatter">
<code class="highlight language-python"><span class="n">get_formatter</span><span class="p">()</span></code>
<a class="headerlink" href="#kgfoundry_common.logging.LoggingCache.get_formatter" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Get or create a cached JSON formatter instance.</p>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><a class="autorefs autorefs-internal" href="#kgfoundry_common.logging.JsonFormatter" title="kgfoundry_common.logging.JsonFormatter">JsonFormatter</a></code>
</td>
<td>
<div class="doc-md-description">
<p>A JsonFormatter instance from cache or newly created.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_formatter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">JsonFormatter</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Get or create a cached JSON formatter instance.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    JsonFormatter</span>
<span class="sd">        A JsonFormatter instance from cache or newly created.</span>
<span class="sd">    """</span>
    <span class="o">...</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
</div>
</div>
</div><p><em>Bases:</em> Protocol</p>
<h3 id="kgfoundry_commonlogging_defaultloggingcache">kgfoundry_common.logging._DefaultLoggingCache<a class="headerlink" href="#kgfoundry_commonlogging_defaultloggingcache" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="kgfoundry_common.logging._DefaultLoggingCache">
<code>kgfoundry_common.logging._DefaultLoggingCache</code>
<a class="headerlink" href="#kgfoundry_common.logging._DefaultLoggingCache" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p>Default implementation of LoggingCache protocol.</p>
<p>This class provides a simple cache for logging formatters and configuration. It implements the
LoggingCache protocol and can be retrieved via get_logging_cache().</p>
<p>Initializes the logging cache with empty formatter cache.</p>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">_DefaultLoggingCache</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Default implementation of LoggingCache protocol.</span>

<span class="sd">    This class provides a simple cache for logging formatters and configuration. It implements the</span>
<span class="sd">    LoggingCache protocol and can be retrieved via get_logging_cache().</span>

<span class="sd">    Initializes the logging cache with empty formatter cache.</span>
<span class="sd">    """</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_formatter_cache</span><span class="p">:</span> <span class="n">JsonFormatter</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_formatter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">JsonFormatter</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Get or create a cached JSON formatter instance.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        JsonFormatter</span>
<span class="sd">            A JsonFormatter instance from cache or newly created.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_formatter_cache</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_formatter_cache</span> <span class="o">=</span> <span class="n">JsonFormatter</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_formatter_cache</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Clear all cached entries and reset state.</span>

<span class="sd">        This method clears the formatter cache and resets internal state.</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_formatter_cache</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="kgfoundry_common.logging._DefaultLoggingCache.clear">
<code class="highlight language-python"><span class="n">clear</span><span class="p">()</span></code>
<a class="headerlink" href="#kgfoundry_common.logging._DefaultLoggingCache.clear" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Clear all cached entries and reset state.</p>
<p>This method clears the formatter cache and resets internal state.</p>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Clear all cached entries and reset state.</span>

<span class="sd">    This method clears the formatter cache and resets internal state.</span>
<span class="sd">    """</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_formatter_cache</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="kgfoundry_common.logging._DefaultLoggingCache.get_formatter">
<code class="highlight language-python"><span class="n">get_formatter</span><span class="p">()</span></code>
<a class="headerlink" href="#kgfoundry_common.logging._DefaultLoggingCache.get_formatter" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Get or create a cached JSON formatter instance.</p>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><a class="autorefs autorefs-internal" href="#kgfoundry_common.logging.JsonFormatter" title="kgfoundry_common.logging.JsonFormatter">JsonFormatter</a></code>
</td>
<td>
<div class="doc-md-description">
<p>A JsonFormatter instance from cache or newly created.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_formatter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">JsonFormatter</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Get or create a cached JSON formatter instance.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    JsonFormatter</span>
<span class="sd">        A JsonFormatter instance from cache or newly created.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_formatter_cache</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_formatter_cache</span> <span class="o">=</span> <span class="n">JsonFormatter</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_formatter_cache</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
</div>
</div>
</div><h3 id="kgfoundry_commonlogging_loggeradapterbase">kgfoundry_common.logging._LoggerAdapterBase<a class="headerlink" href="#kgfoundry_commonlogging_loggeradapterbase" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="kgfoundry_common.logging._LoggerAdapterBase">
<code>kgfoundry_common.logging._LoggerAdapterBase</code>
<a class="headerlink" href="#kgfoundry_common.logging._LoggerAdapterBase" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p>Typing helper matching logging.LoggerAdapter interface.</p>
<p>Initializes logger adapter with base logger and structured fields.</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>logger</code>
</td>
<td>
<code><span title="logging.Logger">Logger</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Base logger instance.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>extra</code>
</td>
<td>
<code><a class="autorefs autorefs-internal" href="#kgfoundry_common.logging.LogContextExtra" title="kgfoundry_common.logging.LogContextExtra


  
      dataclass
  ">LogContextExtra</a> | <span title="collections.abc.Mapping">Mapping</span>[<span title="str">str</span>, <span title="object">object</span>] | None</code>
</td>
<td>
<div class="doc-md-description">
<p>Structured fields to inject into log entries.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Attributes:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code><span title="kgfoundry_common.logging._LoggerAdapterBase.logger">logger</span></code></td>
<td>
<code><span title="logging.Logger">Logger</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Base logger instance.</p>
</div>
</td>
</tr>
<tr class="doc-section-item">
<td><code><span title="kgfoundry_common.logging._LoggerAdapterBase.extra">extra</span></code></td>
<td>
<code><a class="autorefs autorefs-internal" href="#kgfoundry_common.logging.LogContextExtra" title="kgfoundry_common.logging.LogContextExtra


  
      dataclass
  ">LogContextExtra</a> | <span title="collections.abc.Mapping">Mapping</span>[<span title="str">str</span>, <span title="object">object</span>] | None</code>
</td>
<td>
<div class="doc-md-description">
<p>Structured fields to inject into log entries.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">_LoggerAdapterBase</span><span class="p">:</span>  <span class="c1"># pragma: no cover - typing helper</span>
<span class="w">    </span><span class="sd">"""Typing helper matching logging.LoggerAdapter interface.</span>

<span class="sd">    Initializes logger adapter with base logger and structured fields.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    logger : logging.Logger</span>
<span class="sd">        Base logger instance.</span>
<span class="sd">    extra : LogContextExtra | Mapping[str, object] | None, optional</span>
<span class="sd">        Structured fields to inject into log entries.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    logger : logging.Logger</span>
<span class="sd">        Base logger instance.</span>
<span class="sd">    extra : LogContextExtra | Mapping[str, object] | None</span>
<span class="sd">        Structured fields to inject into log entries.</span>
<span class="sd">    """</span>

    <span class="n">logger</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span>
    <span class="n">extra</span><span class="p">:</span> <span class="n">LogContextExtra</span> <span class="o">|</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">object</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">logger</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span><span class="p">,</span>
        <span class="n">extra</span><span class="p">:</span> <span class="n">LogContextExtra</span> <span class="o">|</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">object</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span> <span class="o">...</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div><h3 id="kgfoundry_commonlogging_withfieldscontext">kgfoundry_common.logging._WithFieldsContext<a class="headerlink" href="#kgfoundry_commonlogging_withfieldscontext" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="kgfoundry_common.logging._WithFieldsContext">
<code>kgfoundry_common.logging._WithFieldsContext</code>
<a class="headerlink" href="#kgfoundry_common.logging._WithFieldsContext" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p class="doc doc-class-bases">
              Bases: <code><span title="contextlib.AbstractContextManager">AbstractContextManager</span>[<a class="autorefs autorefs-internal" href="#kgfoundry_common.logging.LoggerAdapter" title="kgfoundry_common.logging.LoggerAdapter">LoggerAdapter</a>]</code></p>
<p>Context manager implementation for <code>with_fields</code>.</p>
<p>Initializes context manager with logger and fields.</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>logger</code>
</td>
<td>
<code><span title="logging.Logger">Logger</span> | <a class="autorefs autorefs-internal" href="#kgfoundry_common.logging.LoggerAdapter" title="kgfoundry_common.logging.LoggerAdapter">LoggerAdapter</a></code>
</td>
<td>
<div class="doc-md-description">
<p>Base logger to wrap (may already be an adapter).</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>fields</code>
</td>
<td>
<code><span title="collections.abc.Mapping">Mapping</span>[<span title="str">str</span>, <span title="object">object</span>]</code>
</td>
<td>
<div class="doc-md-description">
<p>Structured fields to inject into log entries.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">_WithFieldsContext</span><span class="p">(</span><span class="n">AbstractContextManager</span><span class="p">[</span><span class="n">LoggerAdapter</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">"""Context manager implementation for `with_fields`.</span>

<span class="sd">    Initializes context manager with logger and fields.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    logger : logging.Logger | LoggerAdapter</span>
<span class="sd">        Base logger to wrap (may already be an adapter).</span>
<span class="sd">    fields : Mapping[str, object]</span>
<span class="sd">        Structured fields to inject into log entries.</span>
<span class="sd">    """</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">logger</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span> <span class="o">|</span> <span class="n">LoggerAdapter</span><span class="p">,</span> <span class="n">fields</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">object</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span> <span class="o">=</span> <span class="n">logger</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fields</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">:</span> <span class="n">contextvars</span><span class="o">.</span><span class="n">Token</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_adapter</span><span class="p">:</span> <span class="n">LoggerAdapter</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LoggerAdapter</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Enter context and return logger adapter with fields.</span>

<span class="sd">        Sets correlation_id in contextvars if provided in fields.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        LoggerAdapter</span>
<span class="sd">            Logger adapter with structured fields injected.</span>
<span class="sd">        """</span>
        <span class="n">base_logger</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">logger</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="p">,</span> <span class="n">LoggerAdapter</span><span class="p">)</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span>
        <span class="p">)</span>
        <span class="n">correlation_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"correlation_id"</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">correlation_id</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="o">=</span> <span class="n">_correlation_id</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">correlation_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_adapter</span> <span class="o">=</span> <span class="n">LoggerAdapter</span><span class="p">(</span><span class="n">base_logger</span><span class="p">,</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_fields</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_adapter</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__exit__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">exc_type</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">exc_value</span><span class="p">:</span> <span class="ne">BaseException</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">exc_tb</span><span class="p">:</span> <span class="n">TracebackType</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Exit context and restore correlation_id state.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        exc_type : type[BaseException] | None</span>
<span class="sd">            Exception type if raised, None otherwise.</span>
<span class="sd">        exc_value : BaseException | None</span>
<span class="sd">            Exception value if raised, None otherwise.</span>
<span class="sd">        exc_tb : TracebackType | None</span>
<span class="sd">            Exception traceback if raised, None otherwise.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bool | None</span>
<span class="sd">            None (does not suppress exceptions).</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">_correlation_id</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">)</span>
        <span class="k">del</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_value</span><span class="p">,</span> <span class="n">exc_tb</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="kgfoundry_common.logging._WithFieldsContext.__enter__">
<code class="highlight language-python"><span class="fm">__enter__</span><span class="p">()</span></code>
<a class="headerlink" href="#kgfoundry_common.logging._WithFieldsContext.__enter__" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Enter context and return logger adapter with fields.</p>
<p>Sets correlation_id in contextvars if provided in fields.</p>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><a class="autorefs autorefs-internal" href="#kgfoundry_common.logging.LoggerAdapter" title="kgfoundry_common.logging.LoggerAdapter">LoggerAdapter</a></code>
</td>
<td>
<div class="doc-md-description">
<p>Logger adapter with structured fields injected.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">966</span>
<span class="normal">967</span>
<span class="normal">968</span>
<span class="normal">969</span>
<span class="normal">970</span>
<span class="normal">971</span>
<span class="normal">972</span>
<span class="normal">973</span>
<span class="normal">974</span>
<span class="normal">975</span>
<span class="normal">976</span>
<span class="normal">977</span>
<span class="normal">978</span>
<span class="normal">979</span>
<span class="normal">980</span>
<span class="normal">981</span>
<span class="normal">982</span>
<span class="normal">983</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LoggerAdapter</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Enter context and return logger adapter with fields.</span>

<span class="sd">    Sets correlation_id in contextvars if provided in fields.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    LoggerAdapter</span>
<span class="sd">        Logger adapter with structured fields injected.</span>
<span class="sd">    """</span>
    <span class="n">base_logger</span> <span class="o">=</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">logger</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="p">,</span> <span class="n">LoggerAdapter</span><span class="p">)</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span>
    <span class="p">)</span>
    <span class="n">correlation_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"correlation_id"</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">correlation_id</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="o">=</span> <span class="n">_correlation_id</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">correlation_id</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_adapter</span> <span class="o">=</span> <span class="n">LoggerAdapter</span><span class="p">(</span><span class="n">base_logger</span><span class="p">,</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_fields</span><span class="p">))</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_adapter</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="kgfoundry_common.logging._WithFieldsContext.__exit__">
<code class="highlight language-python"><span class="fm">__exit__</span><span class="p">(</span><span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_value</span><span class="p">,</span> <span class="n">exc_tb</span><span class="p">)</span></code>
<a class="headerlink" href="#kgfoundry_common.logging._WithFieldsContext.__exit__" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Exit context and restore correlation_id state.</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>exc_type</code>
</td>
<td>
<code><span title="type">type</span>[<span title="BaseException">BaseException</span>] | None</code>
</td>
<td>
<div class="doc-md-description">
<p>Exception type if raised, None otherwise.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>exc_value</code>
</td>
<td>
<code><span title="BaseException">BaseException</span> | None</code>
</td>
<td>
<div class="doc-md-description">
<p>Exception value if raised, None otherwise.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>exc_tb</code>
</td>
<td>
<code><span title="types.TracebackType">TracebackType</span> | None</code>
</td>
<td>
<div class="doc-md-description">
<p>Exception traceback if raised, None otherwise.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="bool">bool</span> | None</code>
</td>
<td>
<div class="doc-md-description">
<p>None (does not suppress exceptions).</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__exit__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">exc_type</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">exc_value</span><span class="p">:</span> <span class="ne">BaseException</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">exc_tb</span><span class="p">:</span> <span class="n">TracebackType</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Exit context and restore correlation_id state.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    exc_type : type[BaseException] | None</span>
<span class="sd">        Exception type if raised, None otherwise.</span>
<span class="sd">    exc_value : BaseException | None</span>
<span class="sd">        Exception value if raised, None otherwise.</span>
<span class="sd">    exc_tb : TracebackType | None</span>
<span class="sd">        Exception traceback if raised, None otherwise.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    bool | None</span>
<span class="sd">        None (does not suppress exceptions).</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">_correlation_id</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">)</span>
    <span class="k">del</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_value</span><span class="p">,</span> <span class="n">exc_tb</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
</div>
</div>
</div><p><em>Bases:</em> AbstractContextManager</p>
<h3 id="kgfoundry_commonloggingget_correlation_id">kgfoundry_common.logging.get_correlation_id<a class="headerlink" href="#kgfoundry_commonloggingget_correlation_id" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="kgfoundry_common.logging.get_correlation_id">
<code class="highlight language-python"><span class="n">kgfoundry_common</span><span class="o">.</span><span class="n">logging</span><span class="o">.</span><span class="n">get_correlation_id</span><span class="p">()</span></code>
<a class="headerlink" href="#kgfoundry_common.logging.get_correlation_id" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p>Get current correlation ID from context.</p>
<p>Retrieves the correlation ID that was set via set_correlation_id() or
CorrelationContext. Returns None if no correlation ID is currently set.</p>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="str">str</span> | None</code>
</td>
<td>
<div class="doc-md-description">
<p>Current correlation ID from contextvars, or None if not set.</p>
</div>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Examples:</span></p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">kgfoundry_common.logging</span><span class="w"> </span><span class="kn">import</span> <span class="n">set_correlation_id</span><span class="p">,</span> <span class="n">get_correlation_id</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">set_correlation_id</span><span class="p">(</span><span class="s2">"req-123"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">get_correlation_id</span><span class="p">()</span> <span class="o">==</span> <span class="s2">"req-123"</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">set_correlation_id</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">get_correlation_id</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span>
</code></pre></div>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_correlation_id</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Get current correlation ID from context.</span>

<span class="sd">    Retrieves the correlation ID that was set via set_correlation_id() or</span>
<span class="sd">    CorrelationContext. Returns None if no correlation ID is currently set.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str | None</span>
<span class="sd">        Current correlation ID from contextvars, or None if not set.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from kgfoundry_common.logging import set_correlation_id, get_correlation_id</span>
<span class="sd">    &gt;&gt;&gt; set_correlation_id("req-123")</span>
<span class="sd">    &gt;&gt;&gt; assert get_correlation_id() == "req-123"</span>
<span class="sd">    &gt;&gt;&gt; set_correlation_id(None)</span>
<span class="sd">    &gt;&gt;&gt; assert get_correlation_id() is None</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="n">_correlation_id</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="kgfoundry_commonloggingget_logger">kgfoundry_common.logging.get_logger<a class="headerlink" href="#kgfoundry_commonloggingget_logger" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="kgfoundry_common.logging.get_logger">
<code class="highlight language-python"><span class="n">kgfoundry_common</span><span class="o">.</span><span class="n">logging</span><span class="o">.</span><span class="n">get_logger</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></code>
<a class="headerlink" href="#kgfoundry_common.logging.get_logger" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p>Get a logger adapter with structured logging support.</p>
<p>Creates a logger adapter that automatically injects structured fields
(correlation_id, operation, status, duration_ms) into all log entries.
Module-level loggers use NullHandler to prevent duplicate handlers
in libraries. Applications should configure handlers via setup_logging().</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>name</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Logger name (typically <strong>name</strong> from the calling module).</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><a class="autorefs autorefs-internal" href="#kgfoundry_common.logging.LoggerAdapter" title="kgfoundry_common.logging.LoggerAdapter">LoggerAdapter</a></code>
</td>
<td>
<div class="doc-md-description">
<p>Logger adapter with structured context injection. Correlation IDs
are automatically extracted from contextvars if set.</p>
</div>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Examples:</span></p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">kgfoundry_common.logging</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span> <span class="o">=</span> <span class="n">get_logger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">"Operation complete"</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="p">{</span><span class="s2">"operation"</span><span class="p">:</span> <span class="s2">"index_build"</span><span class="p">,</span> <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"success"</span><span class="p">})</span>
</code></pre></div>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_logger</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LoggerAdapter</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Get a logger adapter with structured logging support.</span>

<span class="sd">    Creates a logger adapter that automatically injects structured fields</span>
<span class="sd">    (correlation_id, operation, status, duration_ms) into all log entries.</span>
<span class="sd">    Module-level loggers use NullHandler to prevent duplicate handlers</span>
<span class="sd">    in libraries. Applications should configure handlers via setup_logging().</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    name : str</span>
<span class="sd">        Logger name (typically __name__ from the calling module).</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    LoggerAdapter</span>
<span class="sd">        Logger adapter with structured context injection. Correlation IDs</span>
<span class="sd">        are automatically extracted from contextvars if set.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from kgfoundry_common.logging import get_logger</span>
<span class="sd">    &gt;&gt;&gt; logger = get_logger(__name__)</span>
<span class="sd">    &gt;&gt;&gt; logger.info("Operation complete", extra={"operation": "index_build", "status": "success"})</span>
<span class="sd">    """</span>
    <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="c1"># Add NullHandler if no handlers exist (prevents duplicate handlers in libraries)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">logger</span><span class="o">.</span><span class="n">handlers</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">NullHandler</span><span class="p">())</span>

    <span class="k">return</span> <span class="n">LoggerAdapter</span><span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="p">{})</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="kgfoundry_commonloggingget_logging_cache">kgfoundry_common.logging.get_logging_cache<a class="headerlink" href="#kgfoundry_commonloggingget_logging_cache" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="kgfoundry_common.logging.get_logging_cache">
<code class="highlight language-python"><span class="n">kgfoundry_common</span><span class="o">.</span><span class="n">logging</span><span class="o">.</span><span class="n">get_logging_cache</span><span class="p">()</span></code>
<a class="headerlink" href="#kgfoundry_common.logging.get_logging_cache" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p>Get the global logging cache instance.</p>
<p>Returns a LoggingCache implementation that can be used to retrieve
cached logging formatters and configurations. The returned object
implements the LoggingCache protocol and provides a stable interface
for accessing logging infrastructure without exposing internal details.</p>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><a class="autorefs autorefs-internal" href="#kgfoundry_common.logging.LoggingCache" title="kgfoundry_common.logging.LoggingCache">LoggingCache</a></code>
</td>
<td>
<div class="doc-md-description">
<p>Global logging cache instance implementing the LoggingCache protocol.</p>
</div>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Examples:</span></p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">kgfoundry_common.logging</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_logging_cache</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache</span> <span class="o">=</span> <span class="n">get_logging_cache</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">formatter</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">get_formatter</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Use formatter for logging...</span>
</code></pre></div>
<details class="note" open="">
<summary>Notes</summary>
<p>The returned cache is a singleton instance shared across the entire
application. Call cache.clear() to reset cached state if needed.</p>
</details>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_logging_cache</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">LoggingCache</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Get the global logging cache instance.</span>

<span class="sd">    Returns a LoggingCache implementation that can be used to retrieve</span>
<span class="sd">    cached logging formatters and configurations. The returned object</span>
<span class="sd">    implements the LoggingCache protocol and provides a stable interface</span>
<span class="sd">    for accessing logging infrastructure without exposing internal details.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    LoggingCache</span>
<span class="sd">        Global logging cache instance implementing the LoggingCache protocol.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from kgfoundry_common.logging import get_logging_cache</span>
<span class="sd">    &gt;&gt;&gt; cache = get_logging_cache()</span>
<span class="sd">    &gt;&gt;&gt; formatter = cache.get_formatter()</span>
<span class="sd">    &gt;&gt;&gt; # Use formatter for logging...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The returned cache is a singleton instance shared across the entire</span>
<span class="sd">    application. Call cache.clear() to reset cached state if needed.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="n">_logging_cache</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="kgfoundry_commonloggingmeasure_duration">kgfoundry_common.logging.measure_duration<a class="headerlink" href="#kgfoundry_commonloggingmeasure_duration" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="kgfoundry_common.logging.measure_duration">
<code class="highlight language-python"><span class="n">kgfoundry_common</span><span class="o">.</span><span class="n">logging</span><span class="o">.</span><span class="n">measure_duration</span><span class="p">()</span></code>
<a class="headerlink" href="#kgfoundry_common.logging.measure_duration" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p>Get current monotonic time for measuring operation duration.</p>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="tuple">tuple</span>[<span title="float">float</span>, <span title="float">float</span>]</code>
</td>
<td>
<div class="doc-md-description">
<p>Tuple of (start_time, current_time) both from monotonic clock.</p>
</div>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Examples:</span></p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">start_time</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">measure_duration</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># do work...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span><span class="p">,</span> <span class="n">end_time</span> <span class="o">=</span> <span class="n">measure_duration</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">duration_ms</span> <span class="o">=</span> <span class="p">(</span><span class="n">end_time</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span>
</code></pre></div>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">measure_duration</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">"""Get current monotonic time for measuring operation duration.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    tuple[float, float]</span>
<span class="sd">        Tuple of (start_time, current_time) both from monotonic clock.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; start_time, _ = measure_duration()</span>
<span class="sd">    &gt;&gt;&gt; # do work...</span>
<span class="sd">    &gt;&gt;&gt; _, end_time = measure_duration()</span>
<span class="sd">    &gt;&gt;&gt; duration_ms = (end_time - start_time) * 1000</span>
<span class="sd">    """</span>
    <span class="n">current</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">monotonic</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">current</span><span class="p">,</span> <span class="n">current</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="kgfoundry_commonloggingset_correlation_id">kgfoundry_common.logging.set_correlation_id<a class="headerlink" href="#kgfoundry_commonloggingset_correlation_id" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="kgfoundry_common.logging.set_correlation_id">
<code class="highlight language-python"><span class="n">kgfoundry_common</span><span class="o">.</span><span class="n">logging</span><span class="o">.</span><span class="n">set_correlation_id</span><span class="p">(</span><span class="n">correlation_id</span><span class="p">)</span></code>
<a class="headerlink" href="#kgfoundry_common.logging.set_correlation_id" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p>Set correlation ID in context for async propagation.</p>
<p>Uses <code>contextvars.ContextVar</code> to ensure correlation IDs propagate correctly
through async tasks and thread pools without cross-contamination between
concurrent requests.</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>correlation_id</code>
</td>
<td>
<code><span title="str">str</span> | None</code>
</td>
<td>
<div class="doc-md-description">
<p>Correlation ID to set (or None to clear). This ID will be automatically
injected into all log entries via LoggerAdapter.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Examples:</span></p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">kgfoundry_common.logging</span><span class="w"> </span><span class="kn">import</span> <span class="n">set_correlation_id</span><span class="p">,</span> <span class="n">get_logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">set_correlation_id</span><span class="p">(</span><span class="s2">"req-123"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span> <span class="o">=</span> <span class="n">get_logger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">"Request started"</span><span class="p">)</span>  <span class="c1"># correlation_id="req-123" auto-injected</span>
</code></pre></div>
<details class="note" open="">
<summary>Notes</summary>
<ul>
<li><strong>Async propagation</strong>: Correlation IDs automatically propagate through
  async tasks via <code>contextvars.ContextVar</code>, ensuring each concurrent
  request maintains its own correlation ID.</li>
<li><strong>Thread safety</strong>: ContextVar is thread-safe and isolates correlation
  IDs between different threads/async tasks.</li>
<li><strong>Cancellation</strong>: If an async task is cancelled, the correlation ID
  context is automatically cleaned up.</li>
</ul>
</details>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_correlation_id</span><span class="p">(</span><span class="n">correlation_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Set correlation ID in context for async propagation.</span>

<span class="sd">    Uses `contextvars.ContextVar` to ensure correlation IDs propagate correctly</span>
<span class="sd">    through async tasks and thread pools without cross-contamination between</span>
<span class="sd">    concurrent requests.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    correlation_id : str | None</span>
<span class="sd">        Correlation ID to set (or None to clear). This ID will be automatically</span>
<span class="sd">        injected into all log entries via LoggerAdapter.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from kgfoundry_common.logging import set_correlation_id, get_logger</span>
<span class="sd">    &gt;&gt;&gt; set_correlation_id("req-123")</span>
<span class="sd">    &gt;&gt;&gt; logger = get_logger(__name__)</span>
<span class="sd">    &gt;&gt;&gt; logger.info("Request started")  # correlation_id="req-123" auto-injected</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    - **Async propagation**: Correlation IDs automatically propagate through</span>
<span class="sd">      async tasks via `contextvars.ContextVar`, ensuring each concurrent</span>
<span class="sd">      request maintains its own correlation ID.</span>
<span class="sd">    - **Thread safety**: ContextVar is thread-safe and isolates correlation</span>
<span class="sd">      IDs between different threads/async tasks.</span>
<span class="sd">    - **Cancellation**: If an async task is cancelled, the correlation ID</span>
<span class="sd">      context is automatically cleaned up.</span>
<span class="sd">    """</span>
    <span class="n">_correlation_id</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">correlation_id</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="kgfoundry_commonloggingsetup_logging">kgfoundry_common.logging.setup_logging<a class="headerlink" href="#kgfoundry_commonloggingsetup_logging" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="kgfoundry_common.logging.setup_logging">
<code class="highlight language-python"><span class="n">kgfoundry_common</span><span class="o">.</span><span class="n">logging</span><span class="o">.</span><span class="n">setup_logging</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span></code>
<a class="headerlink" href="#kgfoundry_common.logging.setup_logging" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p>Configure root logger with JSON formatter.</p>
<p>Sets up structured JSON logging to stdout. Configures the root logger
with a StreamHandler that uses JsonFormatter. Should be called once
at application startup.</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>level</code>
</td>
<td>
<code><span title="int">int</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Logging level threshold. Use logging.DEBUG, logging.INFO, etc.
Defaults to logging.INFO (20).</p>
</div>
</td>
<td>
<code><span title="logging.INFO">INFO</span></code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Examples:</span></p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">kgfoundry_common.logging</span><span class="w"> </span><span class="kn">import</span> <span class="n">setup_logging</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">setup_logging</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
</code></pre></div>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">setup_logging</span><span class="p">(</span><span class="n">level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Configure root logger with JSON formatter.</span>

<span class="sd">    Sets up structured JSON logging to stdout. Configures the root logger</span>
<span class="sd">    with a StreamHandler that uses JsonFormatter. Should be called once</span>
<span class="sd">    at application startup.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    level : int, optional</span>
<span class="sd">        Logging level threshold. Use logging.DEBUG, logging.INFO, etc.</span>
<span class="sd">        Defaults to logging.INFO (20).</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from kgfoundry_common.logging import setup_logging</span>
<span class="sd">    &gt;&gt;&gt; import logging</span>
<span class="sd">    &gt;&gt;&gt; setup_logging(level=logging.DEBUG)</span>
<span class="sd">    """</span>
    <span class="n">handler</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
    <span class="n">handler</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">JsonFormatter</span><span class="p">())</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">level</span><span class="p">,</span> <span class="n">handlers</span><span class="o">=</span><span class="p">[</span><span class="n">handler</span><span class="p">],</span> <span class="n">force</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="kgfoundry_commonloggingwith_fields">kgfoundry_common.logging.with_fields<a class="headerlink" href="#kgfoundry_commonloggingwith_fields" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="kgfoundry_common.logging.with_fields">
<code class="highlight language-python"><span class="n">kgfoundry_common</span><span class="o">.</span><span class="n">logging</span><span class="o">.</span><span class="n">with_fields</span><span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="o">**</span><span class="n">fields</span><span class="p">)</span></code>
<a class="headerlink" href="#kgfoundry_common.logging.with_fields" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p>Context manager for attaching structured fields to log entries.</p>
<p>Provides a context manager that:
1. Sets correlation_id in contextvars if provided in fields
2. Returns a LoggerAdapter with bound fields
3. Automatically restores correlation_id when context exits</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>logger</code>
</td>
<td>
<code><span title="logging.Logger">Logger</span> | <a class="autorefs autorefs-internal" href="#kgfoundry_common.logging.LoggerAdapter" title="kgfoundry_common.logging.LoggerAdapter">LoggerAdapter</a></code>
</td>
<td>
<div class="doc-md-description">
<p>Base logger to wrap (may already be an adapter).</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>**fields</code>
</td>
<td>
<code><span title="object">object</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Structured fields to inject into all log entries (e.g., correlation_id,
operation, status). These fields persist for all log calls within the
context.</p>
</div>
</td>
<td>
<code>{}</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="contextlib.AbstractContextManager">AbstractContextManager</span>[<a class="autorefs autorefs-internal" href="#kgfoundry_common.logging.LoggerAdapter" title="kgfoundry_common.logging.LoggerAdapter">LoggerAdapter</a>]</code>
</td>
<td>
<div class="doc-md-description">
<p>Context manager that yields a LoggerAdapter with bound fields and
correlation_id in context. The correlation_id is automatically restored
when the context exits.</p>
</div>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Examples:</span></p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">kgfoundry_common.logging</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_logger</span><span class="p">,</span> <span class="n">with_fields</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span> <span class="o">=</span> <span class="n">get_logger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">with_fields</span><span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="n">correlation_id</span><span class="o">=</span><span class="s2">"req-123"</span><span class="p">,</span> <span class="n">operation</span><span class="o">=</span><span class="s2">"search"</span><span class="p">)</span> <span class="k">as</span> <span class="n">ctx_logger</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">ctx_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">"Starting search"</span><span class="p">)</span>  <span class="c1"># Both fields auto-injected</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Fields are cleared when context exits</span>
</code></pre></div>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/logging.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">with_fields</span><span class="p">(</span>
    <span class="n">logger</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span> <span class="o">|</span> <span class="n">LoggerAdapter</span><span class="p">,</span>
    <span class="o">**</span><span class="n">fields</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AbstractContextManager</span><span class="p">[</span><span class="n">LoggerAdapter</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">"""Context manager for attaching structured fields to log entries.</span>

<span class="sd">    Provides a context manager that:</span>
<span class="sd">    1. Sets correlation_id in contextvars if provided in fields</span>
<span class="sd">    2. Returns a LoggerAdapter with bound fields</span>
<span class="sd">    3. Automatically restores correlation_id when context exits</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    logger : logging.Logger | LoggerAdapter</span>
<span class="sd">        Base logger to wrap (may already be an adapter).</span>
<span class="sd">    **fields : object</span>
<span class="sd">        Structured fields to inject into all log entries (e.g., correlation_id,</span>
<span class="sd">        operation, status). These fields persist for all log calls within the</span>
<span class="sd">        context.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    AbstractContextManager[LoggerAdapter]</span>
<span class="sd">        Context manager that yields a LoggerAdapter with bound fields and</span>
<span class="sd">        correlation_id in context. The correlation_id is automatically restored</span>
<span class="sd">        when the context exits.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from kgfoundry_common.logging import get_logger, with_fields</span>
<span class="sd">    &gt;&gt;&gt; logger = get_logger(__name__)</span>
<span class="sd">    &gt;&gt;&gt; with with_fields(logger, correlation_id="req-123", operation="search") as ctx_logger:</span>
<span class="sd">    ...     ctx_logger.info("Starting search")  # Both fields auto-injected</span>
<span class="sd">    &gt;&gt;&gt; # Fields are cleared when context exits</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="n">_WithFieldsContext</span><span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="n">fields</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h2 id="relationships">Relationships<a class="headerlink" href="#relationships" title="Permanent link">¶</a></h2>
<p><strong>Imports:</strong> <code>__future__.annotations</code>, <code>collections.abc.Mapping</code>, <code>contextlib.AbstractContextManager</code>, <code>contextvars</code>, <code>dataclasses.dataclass</code>, <code>dataclasses.replace</code>, <code>json</code>, <code>kgfoundry_common.navmap_loader.load_nav_metadata</code>, <code>kgfoundry_common.types.JsonValue</code>, <code>logging</code>, <code>sys</code>, <code>time</code>, <code>types.TracebackType</code>, <code>typing.Any</code>, <code>typing.Protocol</code>, <code>typing.Self</code>, <code>typing.TYPE_CHECKING</code>, <code>typing.cast</code>, <code>typing.runtime_checkable</code></p>
<h2 id="autorefs-examples">Autorefs Examples<a class="headerlink" href="#autorefs-examples" title="Permanent link">¶</a></h2>
<ul>
<li><a class="autorefs autorefs-internal" href="#kgfoundry_common.logging.CorrelationContext">kgfoundry_common.logging.CorrelationContext</a></li>
<li><a class="autorefs autorefs-internal" href="#kgfoundry_common.logging.JsonFormatter">kgfoundry_common.logging.JsonFormatter</a></li>
<li><a class="autorefs autorefs-internal" href="#kgfoundry_common.logging.LogContextExtra" title="kgfoundry_common.logging.LogContextExtra


  
      dataclass
  ">kgfoundry_common.logging.LogContextExtra</a></li>
<li><a class="autorefs autorefs-internal" href="#kgfoundry_common.logging.get_correlation_id" title="kgfoundry_common.logging.get_correlation_id()">kgfoundry_common.logging.get_correlation_id</a></li>
<li><a class="autorefs autorefs-internal" href="#kgfoundry_common.logging.get_logger" title="kgfoundry_common.logging.get_logger(name)">kgfoundry_common.logging.get_logger</a></li>
<li><a class="autorefs autorefs-internal" href="#kgfoundry_common.logging.get_logging_cache" title="kgfoundry_common.logging.get_logging_cache()">kgfoundry_common.logging.get_logging_cache</a></li>
</ul>
<h2 id="inheritance">Inheritance<a class="headerlink" href="#inheritance" title="Permanent link">¶</a></h2>
<pre class="mermaid"><code>classDiagram
    class CorrelationContext
    class JsonFormatter
    class Formatter
    Formatter &lt;|-- JsonFormatter
    class LogContextExtra
    class LoggerAdapter
    class _LoggerAdapterBase
    _LoggerAdapterBase &lt;|-- LoggerAdapter
    class LoggingCache
    class Protocol
    Protocol &lt;|-- LoggingCache
    class _DefaultLoggingCache
    class _LoggerAdapterBase_1
    class _WithFieldsContext
    class AbstractContextManager
    AbstractContextManager &lt;|-- _WithFieldsContext
</code></pre>
<h2 id="neighborhood">Neighborhood<a class="headerlink" href="#neighborhood" title="Permanent link">¶</a></h2>
<div class="d2"><svg aria-label="Diagram" data-d2-version="v0.7.1" preserveAspectRatio="xMinYMin meet" role="img" viewBox="0 0 998 2662" xmlns:ns0="http://www.w3.org/1999/xlink"><svg class="d2-5b03bcf2eea94620b4c826a8d76b439a d2-svg" height="2662" viewBox="-101 -101 998 2662" width="998"><rect class="fill-N7" fill="#FFFFFF" height="2662.000000" rx="0.000000" stroke-width="0" width="998.000000" x="-101.000000" y="-101.000000"></rect><style type="text/css">
.appendix-icon {
	filter: drop-shadow(0px 0px 32px rgba(31, 36, 58, 0.1));
}
.d2-5b03bcf2eea94620b4c826a8d76b439a .text-bold {
	font-family: "d2-5b03bcf2eea94620b4c826a8d76b439a-font-bold";
}
@font-face {
	font-family: d2-5b03bcf2eea94620b4c826a8d76b439a-font-bold;
	src: url("data:application/font-woff;base64,d09GRgABAAAAABDUAAoAAAAAGVAAAguFAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAAA9AAAAGAAAABgXxHXrmNtYXAAAAFUAAAAwwAAARAF6AZxZ2x5ZgAAAhgAAAnZAAANRD45nzpoZWFkAAAL9AAAADYAAAA2G38e1GhoZWEAAAwsAAAAJAAAACQKfwXwaG10eAAADFAAAAC2AAAAxF2/Bztsb2NhAAANCAAAAGQAAABkVBBXQm1heHAAAA1sAAAAIAAAACAASQD3bmFtZQAADYwAAAMoAAAIKgjwVkFwb3N0AAAQtAAAAB0AAAAg/9EAMgADAioCvAAFAAACigJYAAAASwKKAlgAAAFeADIBKQAAAgsHAwMEAwICBGAAAvcAAAADAAAAAAAAAABBREJPACAAIP//Au7/BgAAA9gBESAAAZ8AAAAAAfAClAAAACAAA3icjM45LoRxHIDh5zN/Yxv7vn+2sRNKnYgohExCJCpxA1EIl0InxHoAh3AElUb8JDJRz1s/xYtMQYaSlCWU5ZKi3IpV6zZs2rJt176KQ0eOnThz4SqCqlv7dzv2VBxU3alzlxHxEd/xE1/xGW/xGi/xHE/xGA9xH3fxHrdxE9d/F7WUWbBszrxFdQqSekUNGjVp1qKkVZt2HZZ06tKtR68+/QYMGjJsxKgx43ITJk2ZNqNsll8AAAD//wEAAP//gPkzPAB4nGxWe2zb1vU+94oWY5l+UBRFSdabFinJtvygKNmWbNmx/IgjxY/ETtL4kQb5pckvju02zuy2LlqgXYe1ytpCWeY2XfpAh25Du6EIBmzd3GFFsy5oBgxIuwJDn1vRdf2jcQtv6MMmB1Ky81j/sCkQl+d89zvfd86BEhgCwIfwGTBAKVSCGVgAifbRAUkUeTIuxeM8Z4iLiCaHsFn5yXNiiAiFiLB32XPX1BTKTuIzG9MHsocO/WcqkVDO/+Zl5TQ6+TIAVr8GwN04B6VAAzCkJAqCyBuNBkZieJEnP656uLK8upyg7F9ffunyk8HXg2ggmWyakaInlO/i3Mb8uXMAAAgi6hpuxMtQDVDiFwQ5GotJzVaOFATebzSyFqvUHItzRjQx8tDu0dMjqcO+XfY4X7ejdqw/mLLtGqEyPzwx/fiw5J/kXM2T2w/P1djHDwKCLAC6inNQpt+X9bESy7M+NouWlW/eew9V4tzS/XefXdrCkMbL4Pk2DEUIMi9LtNGITux/bHTvo3v7jniz9pZw5uD4AYtATX/mv70IJOqbtLrnDh2eM5nmFpU3fZECFjy6iUViJVmieZqns/kPz5z5EOe++WZjHlUpqzqWLAB8gHNg0M/S2bxGFiCoUtfQBZyDKgDOL4hxq4ZKpiXaYjT+feCI/7C50R4M5esmqERiwOdt6kLPK9nU0Y5iTDyNc0AVYkqMZGB4A8lm88Srz1781zNPZXBO+TcqU9aVRcQc/uXmNy/inMaJ9oXVykmxWJyRaF6jJ86TJC+KvBuzbPaZYyaziTDRptuefpAsNRDyxPBElCC2kTinvOfscLs7nMi/MX/VOzjkOffVV+c8Q4Peq5s5MjgHTCEHJwmCrHFjEHmrlWWzP/p5J0FU5LRHSTnOKb97NHpf28cb86jnB7Gltn8CANZjNOp3s+hRmq1W1mI08jxLS81yVOD57Af9p3p753uG+xc7k2mcE8cHM4ca3kUjR6VwQYO8uoZNeBnCev03uY0KohjB/yMGjitkQJbOe5v38GPBSL1UO+pLColj6Za58E5vpyjUt4b3JHrbZqjGyP+5Bb/L4zLXVDT0NsT2RevCE/Zqj9Ptpv22PT2x8RZAYAfADM4Bqd2Al30sT1++gL6+gKuWljZWdYzqVwBYwjkoB5AM19XD8MrFJ3dVcpVEha0ie/Y1nFP+Ih+JxY7IqFHTjfolAGZxDioBJNkgccUP45KBXbl4vq3CUU5UOMsTT1z8BD13NtAjCD2Bs8r4Jzq3YXUNvYnWwQ68rjo5GovrNJCiTgpL85rn45o9dK++kh56II/5kKezRm443jZ1ZNFEePq22QPMrqSH2pvata/SJ9rYW101M3coH0lO/g6O2Wuqddk4PV+XuoateAUsRSeKPMnTEkvqyXTSRa0uvJ9krVbU4+t2EdTJPOFK+5P7GpJT+4TYWF3IEqR8XhmvvJBxuDpuz4zemVrszTxY/4a5Qq91jbqGVtA6OG72+jWrc0YjsvfMdvV/Jx3pc/bwXjmVarRFmLbAGNV+amT3fLubm3JlujqzbOVBbzXo2EV1Da3jFWDAu8mVHljUBL3F0qaIvhifTUxFQy12Y37RRDh6sU00M7UWPtZAPXzn8KkOpy3zs43uJge/aLG/Ya7o7tvRA1jH/iFaB9tNnUqjhvRpqtWwG6SolgV5+u7Y3j2d6JtoILDytqm3SY41CZNPXBDr/DGqY35keD6VOp5mAqUxybff4UZtIbmh4AcbAJrHl7Snpsf4TR7QWil9y/btNUPdnmhVdbmDqnbv34/uOVFSLY9FKeN0SYlPcJ9U7gcwgF+txyRahwZIwIDOjCBHNSI0McmbV+Akli8a1y/qddDkZTEaDboRC6Qxhd+8X9CPfNE22dLHVHttjlDbpFzn+9UgWRrdF3d5zP7Q0Pit6aUBlyi6XKIYau4UA5LdR1W3X3G01CWDRHnQU91cRZjTtcnBIHW8zG9pHagxVVoZc6JbGo6gS+GQGAoGQ2ElX2PnqgwGm93pKnDTpRVb16jey8lNI9A6SpLuypPOnc3DO/IurzNowysv7LfXHp9QLiNfLGjnlJdAVSEOAO/iK1iACACQ0AAPAaiq+mc1Ce/r7xuL73NbOd14Zat/xyWS4UWS7XqE+PHTv/jtU3MpvKLMXLysvPOHvru08+oaMuMVzfOaErUhsSnsP2USebq0hDSaqQB1YCfmN97mzAidKCELeQwutA4+PY/WJ7Sq33BDcuvZpXm7t0nuYnwDTUM78y5voFH714BWOz31tUF/0+a1G5WXio9N/tB6kb9ijuv5WzQR3uwWgWg15a6/gb+CD3RNVd60NVxrEUXFIGtqNp2eTaVm0umZVH0kUh+pry96uH1+98ip9oVsZ1dGs3Kh//RjK1oHBtwA3DV0uiwFkWOZa+1Hw+naId5yNDkV8yYdJYNCbKw2bAn+Gv+0ycF//+ToYqraPvgYqtlqPvrd0SNoHcw38FtwVeHm1RmBdZps5fYqZ7sFre5tbiopuZcgQs3KB4CAVdfQU2gdxBt2gKggFObUVjBtSrkxazFeabpN2O5PeXxuV8ThTgSPjbbu9Wx3RB2trYK3PXSUEjzj9mqOoa2MiappDfWMibZ9Fqtos1eU8a2R7omC5ml1Dc3geeB0tmWZl+NxSV+orjVMGB9MZ+i7FhZ4F2U3cUyc+v+xSyeMDzxw8vVwwEgcN1KFWEl1DX2JVrX636BNutgm/zq8I+/2OgVrfrHM4Bmgjk+gqPK+HHK4UL9S1ROoA6T5AKlotTgLrxtpF54/02liTEQpY+o6/Sxa/TSQFcVs4FOlSs+tFWENrWrzVmLE6z4kOb64v5JkxfIj5+tMVhOxzbzNv/zo4+cbKY4iSi2lIsKfDbG1LFvLDqmfj7B1LFtrHdHiUmoH2kCrmhqv1SUevwFaBV60+iodpHlbIGgif3+mr8xsIrbRpcnTL3Atg68aiTlUUuNyoH+85e8N8H38W0pZx2hxP+kFQH/Dd+v+18aJHIvFtebT+9BCtN8/vbCAZg+YnJaN9YXCeTcA+gh/D5za+Q5csENxZutq1rqWxAaG7+ltCvnjtqGGQ+nUpJwYj9qS1vv2ZO85Vt/QJDoGm6XmA+3y7GzMULKkxW1X1+AqvKjtsYUJVzDHWUGSBEGSKFkMynJQlLUep59Fn2NR26pQGozaU+dqHn2ivq7tt5zsYyn0Tm73bkBQrh5EMfxH/T0jGcovHbz0tOHI+hNF38CbaHVzJ+7Ko1WlCpD6Im6F3fiKhoe+Dk8gEgkEIhHcGub5sPanyUXrrW+h1W/dn2s8oUqHiTG5uLw3+9o247SBEEPoc4WJ3RKH/wIAAP//AQAA///xyNZFAAAAAAEAAAACC4WdgWZjXw889QABA+gAAAAA2F2ghAAAAADdZi82/jf+xAhtA/EAAQADAAIAAAAAAAAAAQAAA9j+7wAACJj+N/43CG0AAQAAAAAAAAAAAAAAAAAAADF4nBzMMUrFQBRG4XN/QRATjRCDNil0QNAxrYKZ4jbpBgS1cAMuQ3dgb2tvY+sGbKzcioUGZB4vxekOn9655hOUyqyJQYGsRwa9ku2cbP80eiBrJuuFrFuyIseKHCqWP9XlV7ucKuH2TVDiRJsEu+NAHUe6wq3lwrrypYBbj2/c4xpxnS2/2zNuH+zbE3u6ZNQ2lcSOtqjUMKmht0ha+qGyG2prcShva3cFAAD//wEAAP//R5AiPgAAAAAALAAsAFAAfACSAMIA2ADkAQIBHAFOAXABkgHSAeQCAAIeAlYCiAK0AuYDGgNAA6gDygPWA+ID+gQWBEgEagSWBMYE5gUiBUgFagWGBbIF4gX6BiYGPAZIBlQGYgZuBoQGogABAAAAMQCQAAwAYwAHAAEAAAAAAAAAAAAAAAAABAADeJyclM9uG1UUxn9ObNMKwQJFVbqJ7oJFkejYVEnVNiuH1IpFFAePC0JCSBPP+I8ynhl5Jg7hCVjzFrxFVzwEz4FYo/l87NgF0SaKknx37vnznXO+c4Ed/mabSvUh8Ec9MVxhr35ueIsH9RPD27TrW4arPKn9abhGWJsbrvN5rWf4I95WfzP8gP3qT4YfslttG/6YZ9Udw59sO/4y/Cn7vF3gCrzgV8MVdskMb7HDj4a3eYTFrFR5RNNwjc/YM1xnD+gzoSBmQsIIx5AJI66YEZHjEzFjwpCIEEeHFjGFviYEQo7Rf34N8CmYESjimAJHjE9MQM7YIv4ir5RzZRzqNLO7FgVjAi7kcUlAgiNlREpCxKXiFBRkvKJBg5yB+GYU5HjkTIjxSJkxokGXNqf0GTMhx9FWpJKZT8qQgmsC5XdmUXZmQERCbqyuSAjF04lfJO8Opzi6ZLJdj3y6EeFLHN/Ju+SWyvYrPP26NWabeZdsAubqZ6yuxLq51gTHui3ztvhWuOAV7l792WTy/h6F+l8o8gVXmn+oSSVikuDcLi18Kch3j3Ec6dzBV0e+p0OfE7q8oa9zix49WpzRp8Nr+Xbp4fiaLmccy6MjvLhrSzFn/IDjGzqyKWNH1p/FxCJ+JjN15+I4Ux1TMvW8ZO6p1kgV3n3C5Q6lG+rI5TPQHpWWTvNLtGcBI1NFJoZT9XKpjdz6F5oipqqlnO3tfbkNc9u95RbfkGqHS7UuOJWTWzB631S9dzRzrR+PgJCUC1kMSJnSoOBGvM8JuCLGcazunWhLClornzLPjVQSMRWDDonizMj0NzDd+MZ9sKF7Z29JKP+S6eWqqvtkcerV7YzeqHvLO9+6HK1NoGFTTdfUNBDXxLQfaafW+fvyzfW6pTzliJSY8F8vwDM8muxzwCFjZRjoZm6vQ1MvRJOXHKr6SyJZDaXnyCIc4PGcAw54yfN3+rhk4oyLW3FZz93imCO6HH5QFQv7Lke8Xn37/6y/i2lTtTierk4v7j3FJ3dQ6xfas9v3sqeJlZOYW7TbrTgjYFpycbvrNbnHeP8AAAD//wEAAP//9LdPUXicYmBmAIP/5xiMGLAAAAAAAP//AQAA//8vAQIDAAAA");
}</style><style type="text/css">.shape {
  shape-rendering: geometricPrecision;
  stroke-linejoin: round;
}
.connection {
  stroke-linecap: round;
  stroke-linejoin: round;
}
.blend {
  mix-blend-mode: multiply;
  opacity: 0.5;
}

		.d2-5b03bcf2eea94620b4c826a8d76b439a .fill-N1{fill:#0A0F25;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .fill-N2{fill:#676C7E;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .fill-N3{fill:#9499AB;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .fill-N4{fill:#CFD2DD;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .fill-N5{fill:#DEE1EB;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .fill-N6{fill:#EEF1F8;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .fill-N7{fill:#FFFFFF;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .fill-B1{fill:#0D32B2;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .fill-B2{fill:#0D32B2;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .fill-B3{fill:#E3E9FD;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .fill-B4{fill:#E3E9FD;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .fill-B5{fill:#EDF0FD;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .fill-B6{fill:#F7F8FE;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .fill-AA2{fill:#4A6FF3;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .fill-AA4{fill:#EDF0FD;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .fill-AA5{fill:#F7F8FE;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .fill-AB4{fill:#EDF0FD;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .fill-AB5{fill:#F7F8FE;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .stroke-N1{stroke:#0A0F25;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .stroke-N2{stroke:#676C7E;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .stroke-N3{stroke:#9499AB;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .stroke-N4{stroke:#CFD2DD;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .stroke-N5{stroke:#DEE1EB;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .stroke-N6{stroke:#EEF1F8;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .stroke-N7{stroke:#FFFFFF;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .stroke-B1{stroke:#0D32B2;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .stroke-B2{stroke:#0D32B2;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .stroke-B3{stroke:#E3E9FD;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .stroke-B4{stroke:#E3E9FD;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .stroke-B5{stroke:#EDF0FD;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .stroke-B6{stroke:#F7F8FE;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .stroke-AA2{stroke:#4A6FF3;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .stroke-AA4{stroke:#EDF0FD;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .stroke-AA5{stroke:#F7F8FE;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .stroke-AB4{stroke:#EDF0FD;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .stroke-AB5{stroke:#F7F8FE;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .background-color-N1{background-color:#0A0F25;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .background-color-N2{background-color:#676C7E;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .background-color-N3{background-color:#9499AB;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .background-color-N4{background-color:#CFD2DD;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .background-color-N5{background-color:#DEE1EB;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .background-color-N6{background-color:#EEF1F8;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .background-color-N7{background-color:#FFFFFF;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .background-color-B1{background-color:#0D32B2;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .background-color-B2{background-color:#0D32B2;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .background-color-B3{background-color:#E3E9FD;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .background-color-B4{background-color:#E3E9FD;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .background-color-B5{background-color:#EDF0FD;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .background-color-B6{background-color:#F7F8FE;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .background-color-AA2{background-color:#4A6FF3;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .background-color-AA4{background-color:#EDF0FD;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .background-color-AA5{background-color:#F7F8FE;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .background-color-AB4{background-color:#EDF0FD;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .background-color-AB5{background-color:#F7F8FE;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .color-N1{color:#0A0F25;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .color-N2{color:#676C7E;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .color-N3{color:#9499AB;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .color-N4{color:#CFD2DD;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .color-N5{color:#DEE1EB;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .color-N6{color:#EEF1F8;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .color-N7{color:#FFFFFF;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .color-B1{color:#0D32B2;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .color-B2{color:#0D32B2;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .color-B3{color:#E3E9FD;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .color-B4{color:#E3E9FD;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .color-B5{color:#EDF0FD;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .color-B6{color:#F7F8FE;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .color-AA2{color:#4A6FF3;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .color-AA4{color:#EDF0FD;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .color-AA5{color:#F7F8FE;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .color-AB4{color:#EDF0FD;}
		.d2-5b03bcf2eea94620b4c826a8d76b439a .color-AB5{color:#F7F8FE;}.appendix text.text{fill:#0A0F25}.md{--color-fg-default:#0A0F25;--color-fg-muted:#676C7E;--color-fg-subtle:#9499AB;--color-canvas-default:#FFFFFF;--color-canvas-subtle:#EEF1F8;--color-border-default:#0D32B2;--color-border-muted:#0D32B2;--color-neutral-muted:#EEF1F8;--color-accent-fg:#0D32B2;--color-accent-emphasis:#0D32B2;--color-attention-subtle:#676C7E;--color-danger-fg:red;}.sketch-overlay-B1{fill:url(#streaks-darker-d2-5b03bcf2eea94620b4c826a8d76b439a);mix-blend-mode:lighten}.sketch-overlay-B2{fill:url(#streaks-darker-d2-5b03bcf2eea94620b4c826a8d76b439a);mix-blend-mode:lighten}.sketch-overlay-B3{fill:url(#streaks-bright-d2-5b03bcf2eea94620b4c826a8d76b439a);mix-blend-mode:darken}.sketch-overlay-B4{fill:url(#streaks-bright-d2-5b03bcf2eea94620b4c826a8d76b439a);mix-blend-mode:darken}.sketch-overlay-B5{fill:url(#streaks-bright-d2-5b03bcf2eea94620b4c826a8d76b439a);mix-blend-mode:darken}.sketch-overlay-B6{fill:url(#streaks-bright-d2-5b03bcf2eea94620b4c826a8d76b439a);mix-blend-mode:darken}.sketch-overlay-AA2{fill:url(#streaks-dark-d2-5b03bcf2eea94620b4c826a8d76b439a);mix-blend-mode:overlay}.sketch-overlay-AA4{fill:url(#streaks-bright-d2-5b03bcf2eea94620b4c826a8d76b439a);mix-blend-mode:darken}.sketch-overlay-AA5{fill:url(#streaks-bright-d2-5b03bcf2eea94620b4c826a8d76b439a);mix-blend-mode:darken}.sketch-overlay-AB4{fill:url(#streaks-bright-d2-5b03bcf2eea94620b4c826a8d76b439a);mix-blend-mode:darken}.sketch-overlay-AB5{fill:url(#streaks-bright-d2-5b03bcf2eea94620b4c826a8d76b439a);mix-blend-mode:darken}.sketch-overlay-N1{fill:url(#streaks-darker-d2-5b03bcf2eea94620b4c826a8d76b439a);mix-blend-mode:lighten}.sketch-overlay-N2{fill:url(#streaks-dark-d2-5b03bcf2eea94620b4c826a8d76b439a);mix-blend-mode:overlay}.sketch-overlay-N3{fill:url(#streaks-normal-d2-5b03bcf2eea94620b4c826a8d76b439a);mix-blend-mode:color-burn}.sketch-overlay-N4{fill:url(#streaks-normal-d2-5b03bcf2eea94620b4c826a8d76b439a);mix-blend-mode:color-burn}.sketch-overlay-N5{fill:url(#streaks-bright-d2-5b03bcf2eea94620b4c826a8d76b439a);mix-blend-mode:darken}.sketch-overlay-N6{fill:url(#streaks-bright-d2-5b03bcf2eea94620b4c826a8d76b439a);mix-blend-mode:darken}.sketch-overlay-N7{fill:url(#streaks-bright-d2-5b03bcf2eea94620b4c826a8d76b439a);mix-blend-mode:darken}.light-code{display: block}.dark-code{display: none}</style><a href="./kgfoundry_common/logging.md" ns0:href="./kgfoundry_common/logging.md"><g class="JiMzNDtrZ2ZvdW5kcnlfY29tbW9uLmxvZ2dpbmcmIzM0Ow=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="246.000000" x="0.000000" y="1197.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="123.000000" y="1235.500000">kgfoundry_common.logging</text></g></a><g class="JiMzNDtfX2Z1dHVyZV9fLmFubm90YXRpb25zJiMzNDs="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="212.000000" x="465.000000" y="0.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="571.000000" y="38.500000">__future__.annotations</text></g><g class="JiMzNDtjb2xsZWN0aW9ucy5hYmMuTWFwcGluZyYjMzQ7"><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="219.000000" x="462.000000" y="126.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="571.500000" y="164.500000">collections.abc.Mapping</text></g><g class="JiMzNDtjb250ZXh0bGliLkFic3RyYWN0Q29udGV4dE1hbmFnZXImIzM0Ow=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="301.000000" x="421.000000" y="252.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="571.500000" y="290.500000">contextlib.AbstractContextManager</text></g><g class="Y29udGV4dHZhcnM="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="130.000000" x="506.000000" y="378.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="571.000000" y="416.500000">contextvars</text></g><g class="JiMzNDtkYXRhY2xhc3Nlcy5kYXRhY2xhc3MmIzM0Ow=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="199.000000" x="472.000000" y="504.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="571.500000" y="542.500000">dataclasses.dataclass</text></g><g class="JiMzNDtkYXRhY2xhc3Nlcy5yZXBsYWNlJiMzNDs="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="185.000000" x="479.000000" y="630.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="571.500000" y="668.500000">dataclasses.replace</text></g><g class="anNvbg=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="76.000000" x="533.000000" y="756.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="571.000000" y="794.500000">json</text></g><g class="JiMzNDtrZ2ZvdW5kcnlfY29tbW9uLm5hdm1hcF9sb2FkZXIubG9hZF9uYXZfbWV0YWRhdGEmIzM0Ow=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="450.000000" x="346.000000" y="882.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="571.000000" y="920.500000">kgfoundry_common.navmap_loader.load_nav_metadata</text></g><g class="JiMzNDtrZ2ZvdW5kcnlfY29tbW9uLnR5cGVzLkpzb25WYWx1ZSYjMzQ7"><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="309.000000" x="417.000000" y="1008.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="571.500000" y="1046.500000">kgfoundry_common.types.JsonValue</text></g><g class="bG9nZ2luZw=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="98.000000" x="522.000000" y="1134.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="571.000000" y="1172.500000">logging</text></g><g class="c3lz"><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="68.000000" x="537.000000" y="1260.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="571.000000" y="1298.500000">sys</text></g><g class="dGltZQ=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="78.000000" x="532.000000" y="1386.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="571.000000" y="1424.500000">time</text></g><g class="JiMzNDt0eXBlcy5UcmFjZWJhY2tUeXBlJiMzNDs="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="197.000000" x="473.000000" y="1512.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="571.500000" y="1550.500000">types.TracebackType</text></g><g class="JiMzNDt0eXBpbmcuQW55JiMzNDs="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="123.000000" x="510.000000" y="1638.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="571.500000" y="1676.500000">typing.Any</text></g><g class="JiMzNDt0eXBpbmcuUHJvdG9jb2wmIzM0Ow=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="157.000000" x="493.000000" y="1764.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="571.500000" y="1802.500000">typing.Protocol</text></g><g class="JiMzNDt0eXBpbmcuU2VsZiYjMzQ7"><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="124.000000" x="509.000000" y="1890.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="571.000000" y="1928.500000">typing.Self</text></g><g class="JiMzNDt0eXBpbmcuVFlQRV9DSEVDS0lORyYjMzQ7"><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="213.000000" x="465.000000" y="2016.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="571.500000" y="2054.500000">typing.TYPE_CHECKING</text></g><g class="JiMzNDt0eXBpbmcuY2FzdCYjMzQ7"><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="125.000000" x="509.000000" y="2142.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="571.500000" y="2180.500000">typing.cast</text></g><g class="JiMzNDt0eXBpbmcucnVudGltZV9jaGVja2FibGUmIzM0Ow=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="233.000000" x="455.000000" y="2268.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="571.500000" y="2306.500000">typing.runtime_checkable</text></g><a href="https://github.com/kgfoundry/kgfoundry/blob/main/src/kgfoundry_common/logging.py" ns0:href="https://github.com/kgfoundry/kgfoundry/blob/main/src/kgfoundry_common/logging.py"><g class="JiMzNDtrZ2ZvdW5kcnlfY29tbW9uLmxvZ2dpbmdfY29kZSYjMzQ7"><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="282.000000" x="430.000000" y="2394.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="571.000000" y="2432.500000">kgfoundry_common.logging code</text></g></a><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5sb2dnaW5nJiMzNDsgLSZndDsgJiMzNDtfX2Z1dHVyZV9fLmFubm90YXRpb25zJiMzNDspWzBd"><marker id="mk-d2-5b03bcf2eea94620b4c826a8d76b439a-3488378134" markerHeight="12.000000" markerUnits="userSpaceOnUse" markerWidth="10.000000" orient="auto" refX="7.000000" refY="6.000000" viewBox="0.000000 0.000000 10.000000 12.000000"> <polygon class="connection fill-B1" fill="#0D32B2" points="0.000000,0.000000 10.000000,6.000000 0.000000,12.000000" stroke-width="2"></polygon> </marker><path class="connection stroke-B1" d="M 128.285699 1195.020511 C 262.399994 265.799011 329.799988 33.000000 461.000000 33.000000" fill="none" marker-end="url(#mk-d2-5b03bcf2eea94620b4c826a8d76b439a-3488378134)" mask="url(#d2-5b03bcf2eea94620b4c826a8d76b439a)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5sb2dnaW5nJiMzNDsgLSZndDsgJiMzNDtjb2xsZWN0aW9ucy5hYmMuTWFwcGluZyYjMzQ7KVswXQ=="><path class="connection stroke-B1" d="M 128.319541 1195.025692 C 262.399994 366.598999 329.100006 159.000000 457.500000 159.000000" fill="none" marker-end="url(#mk-d2-5b03bcf2eea94620b4c826a8d76b439a-3488378134)" mask="url(#d2-5b03bcf2eea94620b4c826a8d76b439a)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5sb2dnaW5nJiMzNDsgLSZndDsgJiMzNDtjb250ZXh0bGliLkFic3RyYWN0Q29udGV4dE1hbmFnZXImIzM0OylbMF0="><path class="connection stroke-B1" d="M 129.360238 1195.032710 C 262.600006 467.399994 320.899994 285.000000 416.500000 285.000000" fill="none" marker-end="url(#mk-d2-5b03bcf2eea94620b4c826a8d76b439a-3488378134)" mask="url(#d2-5b03bcf2eea94620b4c826a8d76b439a)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5sb2dnaW5nJiMzNDsgLSZndDsgY29udGV4dHZhcnMpWzBd"><path class="connection stroke-B1" d="M 130.413275 1195.043165 C 262.799988 568.198975 338.000000 411.000000 502.000000 411.000000" fill="none" marker-end="url(#mk-d2-5b03bcf2eea94620b4c826a8d76b439a-3488378134)" mask="url(#d2-5b03bcf2eea94620b4c826a8d76b439a)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5sb2dnaW5nJiMzNDsgLSZndDsgJiMzNDtkYXRhY2xhc3Nlcy5kYXRhY2xhc3MmIzM0OylbMF0="><path class="connection stroke-B1" d="M 131.485071 1195.059715 C 263.000000 669.000000 331.100006 537.000000 467.500000 537.000000" fill="none" marker-end="url(#mk-d2-5b03bcf2eea94620b4c826a8d76b439a-3488378134)" mask="url(#d2-5b03bcf2eea94620b4c826a8d76b439a)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5sb2dnaW5nJiMzNDsgLSZndDsgJiMzNDtkYXRhY2xhc3Nlcy5yZXBsYWNlJiMzNDspWzBd"><path class="connection stroke-B1" d="M 133.583891 1195.087130 C 263.399994 769.799988 332.500000 663.000000 474.500000 663.000000" fill="none" marker-end="url(#mk-d2-5b03bcf2eea94620b4c826a8d76b439a-3488378134)" mask="url(#d2-5b03bcf2eea94620b4c826a8d76b439a)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5sb2dnaW5nJiMzNDsgLSZndDsganNvbilbMF0="><path class="connection stroke-B1" d="M 136.730173 1195.138053 C 264.000000 870.598999 343.399994 789.000000 529.000000 789.000000" fill="none" marker-end="url(#mk-d2-5b03bcf2eea94620b4c826a8d76b439a-3488378134)" mask="url(#d2-5b03bcf2eea94620b4c826a8d76b439a)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5sb2dnaW5nJiMzNDsgLSZndDsgJiMzNDtrZ2ZvdW5kcnlfY29tbW9uLm5hdm1hcF9sb2FkZXIubG9hZF9uYXZfbWV0YWRhdGEmIzM0OylbMF0="><path class="connection stroke-B1" d="M 141.963360 1195.247306 C 265.000000 971.400024 306.000000 915.000000 342.000000 915.000000" fill="none" marker-end="url(#mk-d2-5b03bcf2eea94620b4c826a8d76b439a-3488378134)" mask="url(#d2-5b03bcf2eea94620b4c826a8d76b439a)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5sb2dnaW5nJiMzNDsgLSZndDsgJiMzNDtrZ2ZvdW5kcnlfY29tbW9uLnR5cGVzLkpzb25WYWx1ZSYjMzQ7KVswXQ=="><path class="connection stroke-B1" d="M 154.351449 1195.525691 C 267.399994 1072.199951 320.100006 1041.000000 412.500000 1041.000000" fill="none" marker-end="url(#mk-d2-5b03bcf2eea94620b4c826a8d76b439a-3488378134)" mask="url(#d2-5b03bcf2eea94620b4c826a8d76b439a)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5sb2dnaW5nJiMzNDsgLSZndDsgbG9nZ2luZylbMF0="><path class="connection stroke-B1" d="M 215.878246 1196.312837 C 279.600006 1173.000000 341.200012 1167.000000 518.000000 1167.000000" fill="none" marker-end="url(#mk-d2-5b03bcf2eea94620b4c826a8d76b439a-3488378134)" mask="url(#d2-5b03bcf2eea94620b4c826a8d76b439a)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5sb2dnaW5nJiMzNDsgLSZndDsgc3lzKVswXQ=="><path class="connection stroke-B1" d="M 215.878246 1263.687163 C 279.600006 1287.000000 344.200012 1293.000000 533.000000 1293.000000" fill="none" marker-end="url(#mk-d2-5b03bcf2eea94620b4c826a8d76b439a-3488378134)" mask="url(#d2-5b03bcf2eea94620b4c826a8d76b439a)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5sb2dnaW5nJiMzNDsgLSZndDsgdGltZSlbMF0="><path class="connection stroke-B1" d="M 154.351449 1264.474309 C 267.399994 1387.800049 343.200012 1419.000000 528.000000 1419.000000" fill="none" marker-end="url(#mk-d2-5b03bcf2eea94620b4c826a8d76b439a-3488378134)" mask="url(#d2-5b03bcf2eea94620b4c826a8d76b439a)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5sb2dnaW5nJiMzNDsgLSZndDsgJiMzNDt0eXBlcy5UcmFjZWJhY2tUeXBlJiMzNDspWzBd"><path class="connection stroke-B1" d="M 141.963360 1264.752694 C 265.000000 1488.599976 331.299988 1545.000000 468.500000 1545.000000" fill="none" marker-end="url(#mk-d2-5b03bcf2eea94620b4c826a8d76b439a-3488378134)" mask="url(#d2-5b03bcf2eea94620b4c826a8d76b439a)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5sb2dnaW5nJiMzNDsgLSZndDsgJiMzNDt0eXBpbmcuQW55JiMzNDspWzBd"><path class="connection stroke-B1" d="M 136.730175 1264.861946 C 264.000000 1589.400024 338.700012 1671.000000 505.500000 1671.000000" fill="none" marker-end="url(#mk-d2-5b03bcf2eea94620b4c826a8d76b439a-3488378134)" mask="url(#d2-5b03bcf2eea94620b4c826a8d76b439a)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5sb2dnaW5nJiMzNDsgLSZndDsgJiMzNDt0eXBpbmcuUHJvdG9jb2wmIzM0OylbMF0="><path class="connection stroke-B1" d="M 133.583891 1264.912870 C 263.399994 1690.199951 335.299988 1797.000000 488.500000 1797.000000" fill="none" marker-end="url(#mk-d2-5b03bcf2eea94620b4c826a8d76b439a-3488378134)" mask="url(#d2-5b03bcf2eea94620b4c826a8d76b439a)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5sb2dnaW5nJiMzNDsgLSZndDsgJiMzNDt0eXBpbmcuU2VsZiYjMzQ7KVswXQ=="><path class="connection stroke-B1" d="M 131.485071 1264.940285 C 263.000000 1791.000000 338.600006 1923.000000 505.000000 1923.000000" fill="none" marker-end="url(#mk-d2-5b03bcf2eea94620b4c826a8d76b439a-3488378134)" mask="url(#d2-5b03bcf2eea94620b4c826a8d76b439a)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5sb2dnaW5nJiMzNDsgLSZndDsgJiMzNDt0eXBpbmcuVFlQRV9DSEVDS0lORyYjMzQ7KVswXQ=="><path class="connection stroke-B1" d="M 130.413276 1264.956835 C 262.799988 1891.800049 329.700012 2049.000000 460.500000 2049.000000" fill="none" marker-end="url(#mk-d2-5b03bcf2eea94620b4c826a8d76b439a-3488378134)" mask="url(#d2-5b03bcf2eea94620b4c826a8d76b439a)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5sb2dnaW5nJiMzNDsgLSZndDsgJiMzNDt0eXBpbmcuY2FzdCYjMzQ7KVswXQ=="><path class="connection stroke-B1" d="M 129.360238 1264.967290 C 262.600006 1992.599976 338.500000 2175.000000 504.500000 2175.000000" fill="none" marker-end="url(#mk-d2-5b03bcf2eea94620b4c826a8d76b439a-3488378134)" mask="url(#d2-5b03bcf2eea94620b4c826a8d76b439a)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5sb2dnaW5nJiMzNDsgLSZndDsgJiMzNDt0eXBpbmcucnVudGltZV9jaGVja2FibGUmIzM0OylbMF0="><path class="connection stroke-B1" d="M 128.319541 1264.974308 C 262.399994 2093.399902 327.700012 2301.000000 450.500000 2301.000000" fill="none" marker-end="url(#mk-d2-5b03bcf2eea94620b4c826a8d76b439a-3488378134)" mask="url(#d2-5b03bcf2eea94620b4c826a8d76b439a)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5sb2dnaW5nJiMzNDsgLSZndDsgJiMzNDtrZ2ZvdW5kcnlfY29tbW9uLmxvZ2dpbmdfY29kZSYjMzQ7KVswXQ=="><path class="connection stroke-B1" d="M 128.285699 1264.979489 C 262.399994 2194.199951 322.799988 2427.000000 426.000000 2427.000000" fill="none" marker-end="url(#mk-d2-5b03bcf2eea94620b4c826a8d76b439a-3488378134)" mask="url(#d2-5b03bcf2eea94620b4c826a8d76b439a)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="appendix-icon" transform="translate(230 1181)"><svg fill="none" height="32" viewBox="0 0 32 32" width="32">
<g clip-path="url(#clip0_3440_35088111-d2-5b03bcf2eea94620b4c826a8d76b439a-EJVWOZTPOVXGI4TZL5RW63LNN5XC43DPM5TWS3THEI)">
<path d="M16 31.1109C24.3456 31.1109 31.1111 24.3454 31.1111 15.9998C31.1111 7.65415 24.3456 0.888672 16 0.888672C7.65436 0.888672 0.888885 7.65415 0.888885 15.9998C0.888885 24.3454 7.65436 31.1109 16 31.1109Z" fill="white" stroke="#DEE1EB"></path>
<path d="M14.3909 16.7965C14.7364 17.2584 15.1772 17.6406 15.6834 17.9171C16.1896 18.1938 16.7494 18.3582 17.3248 18.3993C17.9001 18.4405 18.4777 18.3575 19.0181 18.1559C19.5586 17.9543 20.0492 17.6389 20.4571 17.2309L22.8708 14.8173C23.6036 14.0586 24.0089 13.0425 23.9998 11.9877C23.9906 10.933 23.5676 9.92404 22.8217 9.17821C22.0759 8.43237 21.067 8.00931 20.0123 8.00015C18.9575 7.99098 17.9413 8.39644 17.1827 9.1292L15.7988 10.505" stroke="#2E3346" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
<path d="M17.609 15.1874C17.2635 14.7255 16.8227 14.3433 16.3165 14.0667C15.8103 13.7902 15.2505 13.6257 14.6752 13.5845C14.0998 13.5433 13.5223 13.6263 12.9819 13.8279C12.4414 14.0295 11.9506 14.345 11.5428 14.753L9.1292 17.1666C8.39644 17.9252 7.99098 18.9414 8.00015 19.9962C8.00931 21.0509 8.43237 22.0598 9.17821 22.8056C9.92405 23.5515 10.933 23.9745 11.9877 23.9837C13.0425 23.9928 14.0586 23.5875 14.8173 22.8547L16.193 21.4788" stroke="#2E3346" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</g>
<defs>
<clipPath id="clip0_3440_35088111-d2-5b03bcf2eea94620b4c826a8d76b439a-EJVWOZTPOVXGI4TZL5RW63LNN5XC43DPM5TWS3THEI">
<rect fill="white" height="32" width="32"></rect>
</clipPath>
</defs>
</svg>
</g><g class="appendix-icon" transform="translate(696 2378)"><svg fill="none" height="32" viewBox="0 0 32 32" width="32">
<g clip-path="url(#clip0_3440_35088111-d2-5b03bcf2eea94620b4c826a8d76b439a-EJVWOZTPOVXGI4TZL5RW63LNN5XC43DPM5TWS3THL5RW6ZDFEI)">
<path d="M16 31.1109C24.3456 31.1109 31.1111 24.3454 31.1111 15.9998C31.1111 7.65415 24.3456 0.888672 16 0.888672C7.65436 0.888672 0.888885 7.65415 0.888885 15.9998C0.888885 24.3454 7.65436 31.1109 16 31.1109Z" fill="white" stroke="#DEE1EB"></path>
<path d="M14.3909 16.7965C14.7364 17.2584 15.1772 17.6406 15.6834 17.9171C16.1896 18.1938 16.7494 18.3582 17.3248 18.3993C17.9001 18.4405 18.4777 18.3575 19.0181 18.1559C19.5586 17.9543 20.0492 17.6389 20.4571 17.2309L22.8708 14.8173C23.6036 14.0586 24.0089 13.0425 23.9998 11.9877C23.9906 10.933 23.5676 9.92404 22.8217 9.17821C22.0759 8.43237 21.067 8.00931 20.0123 8.00015C18.9575 7.99098 17.9413 8.39644 17.1827 9.1292L15.7988 10.505" stroke="#2E3346" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
<path d="M17.609 15.1874C17.2635 14.7255 16.8227 14.3433 16.3165 14.0667C15.8103 13.7902 15.2505 13.6257 14.6752 13.5845C14.0998 13.5433 13.5223 13.6263 12.9819 13.8279C12.4414 14.0295 11.9506 14.345 11.5428 14.753L9.1292 17.1666C8.39644 17.9252 7.99098 18.9414 8.00015 19.9962C8.00931 21.0509 8.43237 22.0598 9.17821 22.8056C9.92405 23.5515 10.933 23.9745 11.9877 23.9837C13.0425 23.9928 14.0586 23.5875 14.8173 22.8547L16.193 21.4788" stroke="#2E3346" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</g>
<defs>
<clipPath id="clip0_3440_35088111-d2-5b03bcf2eea94620b4c826a8d76b439a-EJVWOZTPOVXGI4TZL5RW63LNN5XC43DPM5TWS3THL5RW6ZDFEI">
<rect fill="white" height="32" width="32"></rect>
</clipPath>
</defs>
</svg>
</g><mask height="2662" id="d2-5b03bcf2eea94620b4c826a8d76b439a" maskUnits="userSpaceOnUse" width="998" x="-101" y="-101">
<rect fill="white" height="2662" width="998" x="-101" y="-101"></rect>
</mask></svg></svg></div>
<aside class="md-source-file">
<span class="md-source-file__fact">
<span class="md-icon" title="Last update">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg>
</span>
<span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="November 6, 2025 12:29:00 UTC">November 6, 2025</span>
</span>
</aside>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.sections", "navigation.top", "navigation.tracking", "navigation.footer", "content.action.edit", "content.action.view"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
<script src="../../../assets/mkdocs_puml/puml.js"></script>
<script src="https://unpkg.com/@panzoom/panzoom@4.5.1/dist/panzoom.min.js"></script>
<script src="../../../assets/mkdocs_puml/interaction.js"></script>
<script type="module">import mermaid from "https://unpkg.com/mermaid@10.4.0/dist/mermaid.esm.min.mjs";
window.mermaidConfig = {default: {
    startOnLoad: false
}};</script><script>document$.subscribe(() => {
            const dark_scheme_name = "slate"
            
            window.scheme = document.body.getAttribute("data-md-color-scheme")
            const options = {
                attributeFilter: ['data-md-color-scheme'],
            };
            function color_scheme_callback(mutations) {
                for (let mutation of mutations) {
                    if (mutation.attributeName === "data-md-color-scheme") {
                        scheme = document.body.getAttribute("data-md-color-scheme")
                        var iframe_list = document.getElementsByClassName("redoc-iframe")
                        for(var i = 0; i < iframe_list.length; i++) {
                            var ele = iframe_list.item(i);
                            if (ele) {
                                if (scheme === dark_scheme_name) {
                                    ele.contentWindow.enable_dark_mode();
                                } else {
                                    ele.contentWindow.disable_dark_mode();
                                }
                            }
                        }
                    }
                }
            }
            observer = new MutationObserver(color_scheme_callback);
            observer.observe(document.body, options);
            })</script>
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>
<!DOCTYPE html><html class="no-js" lang="en"><head>
<meta charset="utf-8">
<meta content="width=device-width,initial-scale=1" name="viewport">
<link href="https://docs.kgfoundry.dev/modules/kgfoundry_common/parquet_io/" rel="canonical">
<link href="../optional_deps/" rel="prev">
<link href="../problem_details/" rel="next">
<link href="../../../assets/images/favicon.png" rel="icon">
<meta content="mkdocs-1.6.1, mkdocs-material-9.6.23" name="generator">
<title>parquet_io - KgFoundry MkDocs Suite</title>
<link href="../../../assets/stylesheets/main.84d31ad4.min.css" rel="stylesheet">
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect">
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet">
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../../assets/_mkdocstrings.css" rel="stylesheet">
<link href="../../../assets/stylesheets/mkdocs_d2_plugin.css" rel="stylesheet">
<link href="../../../assets/mkdocs_puml/puml.css" rel="stylesheet">
<link href="../../../assets/mkdocs_puml/interaction.css" rel="stylesheet">
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
<body dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox">
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox">
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#kgfoundry_commonparquet_io">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="KgFoundry MkDocs Suite" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="KgFoundry MkDocs Suite">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            KgFoundry MkDocs Suite
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              parquet_io
            
          </span>
</div>
</div>
</div>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text">
<label class="md-search__icon md-icon" for="__search">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/paul-heyse/kgfoundry" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="KgFoundry MkDocs Suite" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="KgFoundry MkDocs Suite">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
    KgFoundry MkDocs Suite
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/paul-heyse/kgfoundry" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../..">
<span class="md-ellipsis">
    Overview
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../architecture/">
<span class="md-ellipsis">
    Architecture
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../api/">
<span class="md-ellipsis">
    API
    
  </span>
</a>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            API
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api/openapi-cli/">
<span class="md-ellipsis">
    CLI Spec
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api/interfaces/">
<span class="md-ellipsis">
    Interface Catalog
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox">
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
<span class="md-ellipsis">
    Modules
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            Modules
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../">
<span class="md-ellipsis">
    Overview
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_2" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../docling_kg/">
<span class="md-ellipsis">
    docling_kg
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_2">
<span class="md-nav__icon md-icon"></span>
            docling_kg
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../docling_kg/canonicalizer/">
<span class="md-ellipsis">
    canonicalizer
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../docling_kg/hybrid/">
<span class="md-ellipsis">
    hybrid
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../docling_kg/vlm/">
<span class="md-ellipsis">
    vlm
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_3" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../download/">
<span class="md-ellipsis">
    download
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_3">
<span class="md-nav__icon md-icon"></span>
            download
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../download/cli/">
<span class="md-ellipsis">
    cli
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../download/cli_context/">
<span class="md-ellipsis">
    cli_context
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../download/harvester/">
<span class="md-ellipsis">
    harvester
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_4" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../embeddings_dense/">
<span class="md-ellipsis">
    embeddings_dense
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_4">
<span class="md-nav__icon md-icon"></span>
            embeddings_dense
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../embeddings_dense/base/">
<span class="md-ellipsis">
    base
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../embeddings_dense/qwen3/">
<span class="md-ellipsis">
    qwen3
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_5" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../embeddings_sparse/">
<span class="md-ellipsis">
    embeddings_sparse
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_5">
<span class="md-nav__icon md-icon"></span>
            embeddings_sparse
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../embeddings_sparse/base/">
<span class="md-ellipsis">
    base
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../embeddings_sparse/bm25/">
<span class="md-ellipsis">
    bm25
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../embeddings_sparse/splade/">
<span class="md-ellipsis">
    splade
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_6" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../kg_builder/">
<span class="md-ellipsis">
    kg_builder
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_6_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_6">
<span class="md-nav__icon md-icon"></span>
            kg_builder
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../kg_builder/mock_kg/">
<span class="md-ellipsis">
    mock_kg
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kg_builder/neo4j_store/">
<span class="md-ellipsis">
    neo4j_store
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_4_7" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../">
<span class="md-ellipsis">
    kgfoundry_common
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_7" id="__nav_4_7_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_4_7_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_7">
<span class="md-nav__icon md-icon"></span>
            kgfoundry_common
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../config/">
<span class="md-ellipsis">
    config
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_7_2" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../errors/">
<span class="md-ellipsis">
    errors
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_7_2" id="__nav_4_7_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_7_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_7_2">
<span class="md-nav__icon md-icon"></span>
            errors
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../errors/codes/">
<span class="md-ellipsis">
    codes
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../errors/exceptions/">
<span class="md-ellipsis">
    exceptions
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../errors/http/">
<span class="md-ellipsis">
    http
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../exceptions/">
<span class="md-ellipsis">
    exceptions
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../fastapi_helpers/">
<span class="md-ellipsis">
    fastapi_helpers
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../fs/">
<span class="md-ellipsis">
    fs
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../gpu/">
<span class="md-ellipsis">
    gpu
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ids/">
<span class="md-ellipsis">
    ids
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../jsonschema_utils/">
<span class="md-ellipsis">
    jsonschema_utils
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../logging/">
<span class="md-ellipsis">
    logging
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../models/">
<span class="md-ellipsis">
    models
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../navmap_loader/">
<span class="md-ellipsis">
    navmap_loader
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../navmap_types/">
<span class="md-ellipsis">
    navmap_types
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../numpy_typing/">
<span class="md-ellipsis">
    numpy_typing
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../observability/">
<span class="md-ellipsis">
    observability
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../opentelemetry_types/">
<span class="md-ellipsis">
    opentelemetry_types
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../optional_deps/">
<span class="md-ellipsis">
    optional_deps
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox">
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    parquet_io
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    parquet_io
    
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#hierarchy">
<span class="md-ellipsis">
      Hierarchy
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sections">
<span class="md-ellipsis">
      Sections
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#contents">
<span class="md-ellipsis">
      Contents
    </span>
</a>
<nav aria-label="Contents" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_commonparquet_iochunkdoctags">
<span class="md-ellipsis">
      kgfoundry_common.parquet_io.ChunkDocTags
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.parquet_io.ChunkDocTags">
<span class="md-ellipsis">
      ChunkDocTags
    </span>
</a>
<nav aria-label="ChunkDocTags" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_commonparquet_iochunkrow">
<span class="md-ellipsis">
      kgfoundry_common.parquet_io.ChunkRow
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.parquet_io.ChunkRow">
<span class="md-ellipsis">
      ChunkRow
    </span>
</a>
<nav aria-label="ChunkRow" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_commonparquet_ioparquetchunkwriter">
<span class="md-ellipsis">
      kgfoundry_common.parquet_io.ParquetChunkWriter
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.parquet_io.ParquetChunkWriter">
<span class="md-ellipsis">
      ParquetChunkWriter
    </span>
</a>
<nav aria-label="ParquetChunkWriter" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.parquet_io.ParquetChunkWriter.chunk_schema">
<span class="md-ellipsis">
      chunk_schema
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.parquet_io.ParquetChunkWriter.write">
<span class="md-ellipsis">
      write
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_commonparquet_ioparquetvectorwriter">
<span class="md-ellipsis">
      kgfoundry_common.parquet_io.ParquetVectorWriter
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.parquet_io.ParquetVectorWriter">
<span class="md-ellipsis">
      ParquetVectorWriter
    </span>
</a>
<nav aria-label="ParquetVectorWriter" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.parquet_io.ParquetVectorWriter.dense_schema">
<span class="md-ellipsis">
      dense_schema
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.parquet_io.ParquetVectorWriter.splade_schema">
<span class="md-ellipsis">
      splade_schema
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.parquet_io.ParquetVectorWriter.write_dense">
<span class="md-ellipsis">
      write_dense
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.parquet_io.ParquetVectorWriter.write_splade">
<span class="md-ellipsis">
      write_splade
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_commonparquet_ioread_table">
<span class="md-ellipsis">
      kgfoundry_common.parquet_io.read_table
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.parquet_io.read_table">
<span class="md-ellipsis">
      read_table
    </span>
</a>
<nav aria-label="read_table" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_commonparquet_ioread_table_to_dataframe">
<span class="md-ellipsis">
      kgfoundry_common.parquet_io.read_table_to_dataframe
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.parquet_io.read_table_to_dataframe">
<span class="md-ellipsis">
      read_table_to_dataframe
    </span>
</a>
<nav aria-label="read_table_to_dataframe" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_commonparquet_iovalidate_table_schema">
<span class="md-ellipsis">
      kgfoundry_common.parquet_io.validate_table_schema
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.parquet_io.validate_table_schema">
<span class="md-ellipsis">
      validate_table_schema
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#relationships">
<span class="md-ellipsis">
      Relationships
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#autorefs-examples">
<span class="md-ellipsis">
      Autorefs Examples
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#inheritance">
<span class="md-ellipsis">
      Inheritance
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#neighborhood">
<span class="md-ellipsis">
      Neighborhood
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../problem_details/">
<span class="md-ellipsis">
    problem_details
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../prometheus/">
<span class="md-ellipsis">
    prometheus
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../pydantic/">
<span class="md-ellipsis">
    pydantic
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../safe_pickle_v2/">
<span class="md-ellipsis">
    safe_pickle_v2
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../schema_helpers/">
<span class="md-ellipsis">
    schema_helpers
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sequence_guards/">
<span class="md-ellipsis">
    sequence_guards
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../serialization/">
<span class="md-ellipsis">
    serialization
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../settings/">
<span class="md-ellipsis">
    settings
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../subprocess_utils/">
<span class="md-ellipsis">
    subprocess_utils
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../types/">
<span class="md-ellipsis">
    types
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../typing/">
<span class="md-ellipsis">
    typing
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../vector_types/">
<span class="md-ellipsis">
    vector_types
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_8" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../linking/">
<span class="md-ellipsis">
    linking
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_8" id="__nav_4_8_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_8_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_8">
<span class="md-nav__icon md-icon"></span>
            linking
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../linking/calibration/">
<span class="md-ellipsis">
    calibration
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../linking/linker/">
<span class="md-ellipsis">
    linker
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_9" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../observability/">
<span class="md-ellipsis">
    observability
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_9" id="__nav_4_9_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_9_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_9">
<span class="md-nav__icon md-icon"></span>
            observability
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../observability/metrics/">
<span class="md-ellipsis">
    metrics
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_10" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../ontology/">
<span class="md-ellipsis">
    ontology
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_10" id="__nav_4_10_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_10_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_10">
<span class="md-nav__icon md-icon"></span>
            ontology
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../ontology/catalog/">
<span class="md-ellipsis">
    catalog
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ontology/loader/">
<span class="md-ellipsis">
    loader
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_11" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../orchestration/">
<span class="md-ellipsis">
    orchestration
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_11" id="__nav_4_11_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_11_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_11">
<span class="md-nav__icon md-icon"></span>
            orchestration
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../orchestration/cli/">
<span class="md-ellipsis">
    cli
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../orchestration/cli_context/">
<span class="md-ellipsis">
    cli_context
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../orchestration/config/">
<span class="md-ellipsis">
    config
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../orchestration/fixture_flow/">
<span class="md-ellipsis">
    fixture_flow
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../orchestration/flows/">
<span class="md-ellipsis">
    flows
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../orchestration/safe_pickle/">
<span class="md-ellipsis">
    safe_pickle
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_12" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../registry/">
<span class="md-ellipsis">
    registry
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_12" id="__nav_4_12_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_12_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_12">
<span class="md-nav__icon md-icon"></span>
            registry
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../registry/api/">
<span class="md-ellipsis">
    api
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../registry/duckdb_helpers/">
<span class="md-ellipsis">
    duckdb_helpers
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../registry/duckdb_registry/">
<span class="md-ellipsis">
    duckdb_registry
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../registry/helper/">
<span class="md-ellipsis">
    helper
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../registry/migrate/">
<span class="md-ellipsis">
    migrate
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_13" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../search_api/">
<span class="md-ellipsis">
    search_api
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_13" id="__nav_4_13_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_13_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_13">
<span class="md-nav__icon md-icon"></span>
            search_api
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../search_api/app/">
<span class="md-ellipsis">
    app
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../search_api/bm25_index/">
<span class="md-ellipsis">
    bm25_index
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../search_api/faiss_adapter/">
<span class="md-ellipsis">
    faiss_adapter
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../search_api/faiss_gpu/">
<span class="md-ellipsis">
    faiss_gpu
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../search_api/fastapi_helpers/">
<span class="md-ellipsis">
    fastapi_helpers
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../search_api/fixture_index/">
<span class="md-ellipsis">
    fixture_index
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../search_api/fusion/">
<span class="md-ellipsis">
    fusion
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../search_api/kg_mock/">
<span class="md-ellipsis">
    kg_mock
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../search_api/schemas/">
<span class="md-ellipsis">
    schemas
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../search_api/service/">
<span class="md-ellipsis">
    service
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../search_api/splade_index/">
<span class="md-ellipsis">
    splade_index
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../search_api/types/">
<span class="md-ellipsis">
    types
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../search_api/vectorstore_factory/">
<span class="md-ellipsis">
    vectorstore_factory
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_14" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../search_client/">
<span class="md-ellipsis">
    search_client
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_14" id="__nav_4_14_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_14_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_14">
<span class="md-nav__icon md-icon"></span>
            search_client
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../search_client/client/">
<span class="md-ellipsis">
    client
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_15" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../vectorstore_faiss/">
<span class="md-ellipsis">
    vectorstore_faiss
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_15" id="__nav_4_15_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_15_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_15">
<span class="md-nav__icon md-icon"></span>
            vectorstore_faiss
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../vectorstore_faiss/gpu/">
<span class="md-ellipsis">
    gpu
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../diagrams/">
<span class="md-ellipsis">
    Diagrams
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../cli/">
<span class="md-ellipsis">
    CLI
    
  </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#hierarchy">
<span class="md-ellipsis">
      Hierarchy
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sections">
<span class="md-ellipsis">
      Sections
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#contents">
<span class="md-ellipsis">
      Contents
    </span>
</a>
<nav aria-label="Contents" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_commonparquet_iochunkdoctags">
<span class="md-ellipsis">
      kgfoundry_common.parquet_io.ChunkDocTags
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.parquet_io.ChunkDocTags">
<span class="md-ellipsis">
      ChunkDocTags
    </span>
</a>
<nav aria-label="ChunkDocTags" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_commonparquet_iochunkrow">
<span class="md-ellipsis">
      kgfoundry_common.parquet_io.ChunkRow
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.parquet_io.ChunkRow">
<span class="md-ellipsis">
      ChunkRow
    </span>
</a>
<nav aria-label="ChunkRow" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_commonparquet_ioparquetchunkwriter">
<span class="md-ellipsis">
      kgfoundry_common.parquet_io.ParquetChunkWriter
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.parquet_io.ParquetChunkWriter">
<span class="md-ellipsis">
      ParquetChunkWriter
    </span>
</a>
<nav aria-label="ParquetChunkWriter" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.parquet_io.ParquetChunkWriter.chunk_schema">
<span class="md-ellipsis">
      chunk_schema
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.parquet_io.ParquetChunkWriter.write">
<span class="md-ellipsis">
      write
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_commonparquet_ioparquetvectorwriter">
<span class="md-ellipsis">
      kgfoundry_common.parquet_io.ParquetVectorWriter
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.parquet_io.ParquetVectorWriter">
<span class="md-ellipsis">
      ParquetVectorWriter
    </span>
</a>
<nav aria-label="ParquetVectorWriter" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.parquet_io.ParquetVectorWriter.dense_schema">
<span class="md-ellipsis">
      dense_schema
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.parquet_io.ParquetVectorWriter.splade_schema">
<span class="md-ellipsis">
      splade_schema
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.parquet_io.ParquetVectorWriter.write_dense">
<span class="md-ellipsis">
      write_dense
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.parquet_io.ParquetVectorWriter.write_splade">
<span class="md-ellipsis">
      write_splade
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_commonparquet_ioread_table">
<span class="md-ellipsis">
      kgfoundry_common.parquet_io.read_table
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.parquet_io.read_table">
<span class="md-ellipsis">
      read_table
    </span>
</a>
<nav aria-label="read_table" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_commonparquet_ioread_table_to_dataframe">
<span class="md-ellipsis">
      kgfoundry_common.parquet_io.read_table_to_dataframe
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.parquet_io.read_table_to_dataframe">
<span class="md-ellipsis">
      read_table_to_dataframe
    </span>
</a>
<nav aria-label="read_table_to_dataframe" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_commonparquet_iovalidate_table_schema">
<span class="md-ellipsis">
      kgfoundry_common.parquet_io.validate_table_schema
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kgfoundry_common.parquet_io.validate_table_schema">
<span class="md-ellipsis">
      validate_table_schema
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#relationships">
<span class="md-ellipsis">
      Relationships
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#autorefs-examples">
<span class="md-ellipsis">
      Autorefs Examples
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#inheritance">
<span class="md-ellipsis">
      Inheritance
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#neighborhood">
<span class="md-ellipsis">
      Neighborhood
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="kgfoundry_commonparquet_io">kgfoundry_common.parquet_io<a class="headerlink" href="#kgfoundry_commonparquet_io" title="Permanent link">¶</a></h1>
<p>Utilities for writing embedding vectors and chunks to Parquet</p>
<p><a href="https://github.com/paul-heyse/kgfoundry/blob/main/src/kgfoundry_common/parquet_io.py">View source on GitHub</a></p>
<h2 id="hierarchy">Hierarchy<a class="headerlink" href="#hierarchy" title="Permanent link">¶</a></h2>
<ul>
<li><strong>Parent:</strong> <a href="../">kgfoundry_common</a></li>
</ul>
<h2 id="sections">Sections<a class="headerlink" href="#sections" title="Permanent link">¶</a></h2>
<ul>
<li><strong>Public API</strong></li>
</ul>
<h2 id="contents">Contents<a class="headerlink" href="#contents" title="Permanent link">¶</a></h2>
<h3 id="kgfoundry_commonparquet_iochunkdoctags">kgfoundry_common.parquet_io.ChunkDocTags<a class="headerlink" href="#kgfoundry_commonparquet_iochunkdoctags" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="kgfoundry_common.parquet_io.ChunkDocTags">
<code>kgfoundry_common.parquet_io.ChunkDocTags</code>
<a class="headerlink" href="#kgfoundry_common.parquet_io.ChunkDocTags" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p class="doc doc-class-bases">
              Bases: <code><span title="typing.TypedDict">TypedDict</span></code></p>
<p>Structured metadata describing a chunk's doctags span.</p>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/parquet_io.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ChunkDocTags</span><span class="p">(</span><span class="n">TypedDict</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Structured metadata describing a chunk's doctags span."""</span>

    <span class="n">node_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">start</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">end</span><span class="p">:</span> <span class="nb">int</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div><p><em>Bases:</em> TypedDict</p>
<h3 id="kgfoundry_commonparquet_iochunkrow">kgfoundry_common.parquet_io.ChunkRow<a class="headerlink" href="#kgfoundry_commonparquet_iochunkrow" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="kgfoundry_common.parquet_io.ChunkRow">
<code>kgfoundry_common.parquet_io.ChunkRow</code>
<a class="headerlink" href="#kgfoundry_common.parquet_io.ChunkRow" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p class="doc doc-class-bases">
              Bases: <code><span title="typing.TypedDict">TypedDict</span></code></p>
<p>Row expected by :class:<code>ParquetChunkWriter</code>.</p>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/parquet_io.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ChunkRow</span><span class="p">(</span><span class="n">TypedDict</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Row expected by :class:`ParquetChunkWriter`."""</span>

    <span class="n">chunk_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">doc_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">section</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">start_char</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">end_char</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">doctags_span</span><span class="p">:</span> <span class="n">NotRequired</span><span class="p">[</span><span class="n">ChunkDocTags</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span>
    <span class="n">text</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">tokens</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">created_at</span><span class="p">:</span> <span class="n">NotRequired</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div><p><em>Bases:</em> TypedDict</p>
<h3 id="kgfoundry_commonparquet_ioparquetchunkwriter">kgfoundry_common.parquet_io.ParquetChunkWriter<a class="headerlink" href="#kgfoundry_commonparquet_ioparquetchunkwriter" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="kgfoundry_common.parquet_io.ParquetChunkWriter">
<code>kgfoundry_common.parquet_io.ParquetChunkWriter</code>
<a class="headerlink" href="#kgfoundry_common.parquet_io.ParquetChunkWriter" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p>Writer for document chunks in Parquet format.</p>
<p>Provides utilities for writing document chunks (text segments with metadata)
to Parquet files with Hive-style partitioning. Supports chunk text, character
offsets, section information, and optional doctags spans.</p>
<p>Initializes the Parquet chunk writer with root directory and partitioning parameters.</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>root</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Root directory path for Parquet output. Converted to Path object
and combined with model and run_id partitioning. Chunks will be written to
subdirectories partitioned by model and run_id.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>model</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Model identifier used for partitioning. Defaults to "docling_hybrid".</p>
</div>
</td>
<td>
<code>'docling_hybrid'</code>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>run_id</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Run identifier used for partitioning. Defaults to "dev".</p>
</div>
</td>
<td>
<code>'dev'</code>
</td>
</tr>
</tbody>
</table>
<details class="note" open="">
<summary>Notes</summary>
<p>The writer creates Hive-style partitioned directories:
<code>root/model={model}/run_id={run_id}/shard=00000/part-00000.parquet</code></p>
<p>Files are compressed with ZSTD compression (level 6) and use a row group
size of 4096 bytes for optimal read performance.</p>
</details>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/parquet_io.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ParquetChunkWriter</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Writer for document chunks in Parquet format.</span>

<span class="sd">    Provides utilities for writing document chunks (text segments with metadata)</span>
<span class="sd">    to Parquet files with Hive-style partitioning. Supports chunk text, character</span>
<span class="sd">    offsets, section information, and optional doctags spans.</span>

<span class="sd">    Initializes the Parquet chunk writer with root directory and partitioning parameters.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    root : str</span>
<span class="sd">        Root directory path for Parquet output. Converted to Path object</span>
<span class="sd">        and combined with model and run_id partitioning. Chunks will be written to</span>
<span class="sd">        subdirectories partitioned by model and run_id.</span>
<span class="sd">    model : str, optional</span>
<span class="sd">        Model identifier used for partitioning. Defaults to "docling_hybrid".</span>
<span class="sd">    run_id : str, optional</span>
<span class="sd">        Run identifier used for partitioning. Defaults to "dev".</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The writer creates Hive-style partitioned directories:</span>
<span class="sd">    ``root/model={model}/run_id={run_id}/shard=00000/part-00000.parquet``</span>

<span class="sd">    Files are compressed with ZSTD compression (level 6) and use a row group</span>
<span class="sd">    size of 4096 bytes for optimal read performance.</span>
<span class="sd">    """</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">chunk_schema</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">pa</span><span class="o">.</span><span class="n">Schema</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Create PyArrow schema for document chunks.</span>

<span class="sd">        Defines the schema for document chunks with text, metadata, and optional</span>
<span class="sd">        doctags spans. Includes chunk_id, doc_id, section, character offsets,</span>
<span class="sd">        text content, token count, and timestamp.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pa.Schema</span>
<span class="sd">            PyArrow schema with fields: chunk_id (string), doc_id (string),</span>
<span class="sd">            section (string), start_char (int32), end_char (int32), doctags_span</span>
<span class="sd">            (struct, nullable), text (string), tokens (int32), created_at</span>
<span class="sd">            (timestamp).</span>
<span class="sd">        """</span>
        <span class="n">doctags_fields</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"node_id"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">string</span><span class="p">()),</span>
            <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"start"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">int32</span><span class="p">()),</span>
            <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"end"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">int32</span><span class="p">()),</span>
        <span class="p">)</span>
        <span class="n">chunk_fields</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"chunk_id"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">string</span><span class="p">()),</span>
            <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"doc_id"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">string</span><span class="p">()),</span>
            <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"section"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">string</span><span class="p">()),</span>
            <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"start_char"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">int32</span><span class="p">()),</span>
            <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"end_char"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">int32</span><span class="p">()),</span>
            <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"doctags_span"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">struct</span><span class="p">(</span><span class="n">doctags_fields</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
            <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">string</span><span class="p">()),</span>
            <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"tokens"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">int32</span><span class="p">()),</span>
            <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"created_at"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">timestamp</span><span class="p">(</span><span class="s2">"ms"</span><span class="p">)),</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">pa</span><span class="o">.</span><span class="n">schema</span><span class="p">(</span><span class="n">chunk_fields</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">"docling_hybrid"</span><span class="p">,</span> <span class="n">run_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">"dev"</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">root</span><span class="p">)</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">"model=</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s2">"</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">"run_id=</span><span class="si">{</span><span class="n">run_id</span><span class="si">}</span><span class="s2">"</span> <span class="o">/</span> <span class="s2">"shard=00000"</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rows</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">ChunkRow</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Write document chunks to Parquet file.</span>

<span class="sd">        Writes an iterable of chunk rows to a Parquet file. Automatically adds</span>
<span class="sd">        created_at timestamp if not present in rows. Validates rows against the</span>
<span class="sd">        chunk schema before writing.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        rows : Iterable[ChunkRow]</span>
<span class="sd">            Iterable of chunk row dictionaries. Each row must conform to</span>
<span class="sd">            :class:`ChunkRow` TypedDict structure. Missing created_at fields</span>
<span class="sd">            are automatically populated with current timestamp.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            Root directory path (two levels up from the actual file location)</span>
<span class="sd">            where the Parquet file was written.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        The created_at timestamp is set to the current UTC time in milliseconds</span>
<span class="sd">        if not provided in the row. All rows are validated against the chunk</span>
<span class="sd">        schema before writing.</span>
<span class="sd">        """</span>
        <span class="n">timestamp_ms</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">UTC</span><span class="p">)</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>
        <span class="n">prepared</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ChunkRow</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
            <span class="n">materialized</span><span class="p">:</span> <span class="n">ChunkRow</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">row</span><span class="p">}</span>
            <span class="n">materialized</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">"created_at"</span><span class="p">,</span> <span class="n">timestamp_ms</span><span class="p">)</span>
            <span class="n">prepared</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">materialized</span><span class="p">)</span>
        <span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Table</span><span class="o">.</span><span class="n">from_pylist</span><span class="p">(</span><span class="n">prepared</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chunk_schema</span><span class="p">())</span>
        <span class="n">pq</span><span class="o">.</span><span class="n">write_table</span><span class="p">(</span>
            <span class="n">table</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">/</span> <span class="s2">"part-00000.parquet"</span><span class="p">,</span>
            <span class="n">compression</span><span class="o">=</span><span class="s2">"zstd"</span><span class="p">,</span>
            <span class="n">compression_level</span><span class="o">=</span><span class="n">ZSTD_LEVEL</span><span class="p">,</span>
            <span class="n">data_page_size</span><span class="o">=</span><span class="n">ROW_GROUP_SIZE</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="kgfoundry_common.parquet_io.ParquetChunkWriter.chunk_schema">
<code class="highlight language-python"><span class="n">chunk_schema</span><span class="p">()</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
</span>
<a class="headerlink" href="#kgfoundry_common.parquet_io.ParquetChunkWriter.chunk_schema" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Create PyArrow schema for document chunks.</p>
<p>Defines the schema for document chunks with text, metadata, and optional
doctags spans. Includes chunk_id, doc_id, section, character offsets,
text content, token count, and timestamp.</p>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="pyarrow.Schema">Schema</span></code>
</td>
<td>
<div class="doc-md-description">
<p>PyArrow schema with fields: chunk_id (string), doc_id (string),
section (string), start_char (int32), end_char (int32), doctags_span
(struct, nullable), text (string), tokens (int32), created_at
(timestamp).</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/parquet_io.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">chunk_schema</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">pa</span><span class="o">.</span><span class="n">Schema</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Create PyArrow schema for document chunks.</span>

<span class="sd">    Defines the schema for document chunks with text, metadata, and optional</span>
<span class="sd">    doctags spans. Includes chunk_id, doc_id, section, character offsets,</span>
<span class="sd">    text content, token count, and timestamp.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pa.Schema</span>
<span class="sd">        PyArrow schema with fields: chunk_id (string), doc_id (string),</span>
<span class="sd">        section (string), start_char (int32), end_char (int32), doctags_span</span>
<span class="sd">        (struct, nullable), text (string), tokens (int32), created_at</span>
<span class="sd">        (timestamp).</span>
<span class="sd">    """</span>
    <span class="n">doctags_fields</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"node_id"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">string</span><span class="p">()),</span>
        <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"start"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">int32</span><span class="p">()),</span>
        <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"end"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">int32</span><span class="p">()),</span>
    <span class="p">)</span>
    <span class="n">chunk_fields</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"chunk_id"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">string</span><span class="p">()),</span>
        <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"doc_id"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">string</span><span class="p">()),</span>
        <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"section"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">string</span><span class="p">()),</span>
        <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"start_char"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">int32</span><span class="p">()),</span>
        <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"end_char"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">int32</span><span class="p">()),</span>
        <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"doctags_span"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">struct</span><span class="p">(</span><span class="n">doctags_fields</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
        <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">string</span><span class="p">()),</span>
        <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"tokens"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">int32</span><span class="p">()),</span>
        <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"created_at"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">timestamp</span><span class="p">(</span><span class="s2">"ms"</span><span class="p">)),</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">pa</span><span class="o">.</span><span class="n">schema</span><span class="p">(</span><span class="n">chunk_fields</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="kgfoundry_common.parquet_io.ParquetChunkWriter.write">
<code class="highlight language-python"><span class="n">write</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span></code>
<a class="headerlink" href="#kgfoundry_common.parquet_io.ParquetChunkWriter.write" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Write document chunks to Parquet file.</p>
<p>Writes an iterable of chunk rows to a Parquet file. Automatically adds
created_at timestamp if not present in rows. Validates rows against the
chunk schema before writing.</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>rows</code>
</td>
<td>
<code><span title="collections.abc.Iterable">Iterable</span>[<a class="autorefs autorefs-internal" href="#kgfoundry_common.parquet_io.ChunkRow" title="kgfoundry_common.parquet_io.ChunkRow">ChunkRow</a>]</code>
</td>
<td>
<div class="doc-md-description">
<p>Iterable of chunk row dictionaries. Each row must conform to
:class:<code>ChunkRow</code> TypedDict structure. Missing created_at fields
are automatically populated with current timestamp.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Root directory path (two levels up from the actual file location)
where the Parquet file was written.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="note" open="">
<summary>Notes</summary>
<p>The created_at timestamp is set to the current UTC time in milliseconds
if not provided in the row. All rows are validated against the chunk
schema before writing.</p>
</details>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/parquet_io.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rows</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">ChunkRow</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Write document chunks to Parquet file.</span>

<span class="sd">    Writes an iterable of chunk rows to a Parquet file. Automatically adds</span>
<span class="sd">    created_at timestamp if not present in rows. Validates rows against the</span>
<span class="sd">    chunk schema before writing.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    rows : Iterable[ChunkRow]</span>
<span class="sd">        Iterable of chunk row dictionaries. Each row must conform to</span>
<span class="sd">        :class:`ChunkRow` TypedDict structure. Missing created_at fields</span>
<span class="sd">        are automatically populated with current timestamp.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Root directory path (two levels up from the actual file location)</span>
<span class="sd">        where the Parquet file was written.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The created_at timestamp is set to the current UTC time in milliseconds</span>
<span class="sd">    if not provided in the row. All rows are validated against the chunk</span>
<span class="sd">    schema before writing.</span>
<span class="sd">    """</span>
    <span class="n">timestamp_ms</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">UTC</span><span class="p">)</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>
    <span class="n">prepared</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ChunkRow</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
        <span class="n">materialized</span><span class="p">:</span> <span class="n">ChunkRow</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">row</span><span class="p">}</span>
        <span class="n">materialized</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">"created_at"</span><span class="p">,</span> <span class="n">timestamp_ms</span><span class="p">)</span>
        <span class="n">prepared</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">materialized</span><span class="p">)</span>
    <span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Table</span><span class="o">.</span><span class="n">from_pylist</span><span class="p">(</span><span class="n">prepared</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chunk_schema</span><span class="p">())</span>
    <span class="n">pq</span><span class="o">.</span><span class="n">write_table</span><span class="p">(</span>
        <span class="n">table</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">/</span> <span class="s2">"part-00000.parquet"</span><span class="p">,</span>
        <span class="n">compression</span><span class="o">=</span><span class="s2">"zstd"</span><span class="p">,</span>
        <span class="n">compression_level</span><span class="o">=</span><span class="n">ZSTD_LEVEL</span><span class="p">,</span>
        <span class="n">data_page_size</span><span class="o">=</span><span class="n">ROW_GROUP_SIZE</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
</div>
</div>
</div><h3 id="kgfoundry_commonparquet_ioparquetvectorwriter">kgfoundry_common.parquet_io.ParquetVectorWriter<a class="headerlink" href="#kgfoundry_commonparquet_ioparquetvectorwriter" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="kgfoundry_common.parquet_io.ParquetVectorWriter">
<code>kgfoundry_common.parquet_io.ParquetVectorWriter</code>
<a class="headerlink" href="#kgfoundry_common.parquet_io.ParquetVectorWriter" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p>Writer for embedding vectors in Parquet format.</p>
<p>Provides utilities for writing dense and sparse (SPLADE) embedding vectors
to Parquet files with Hive-style partitioning. Supports partitioning by
model, run_id, and shard for efficient querying.</p>
<p>Initializes the Parquet vector writer with root directory.</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>root</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Root directory path for Parquet output. Converted to Path object
and stored for use by write methods. Vectors will be written to
subdirectories partitioned by model, run_id, and shard.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<details class="note" open="">
<summary>Notes</summary>
<p>The writer creates Hive-style partitioned directories:
<code>root/model={model}/run_id={run_id}/shard={shard:05d}/part-00000.parquet</code></p>
<p>Files are compressed with ZSTD compression (level 6) and use a row group
size of 4096 bytes for optimal read performance.</p>
</details>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/parquet_io.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ParquetVectorWriter</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Writer for embedding vectors in Parquet format.</span>

<span class="sd">    Provides utilities for writing dense and sparse (SPLADE) embedding vectors</span>
<span class="sd">    to Parquet files with Hive-style partitioning. Supports partitioning by</span>
<span class="sd">    model, run_id, and shard for efficient querying.</span>

<span class="sd">    Initializes the Parquet vector writer with root directory.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    root : str</span>
<span class="sd">        Root directory path for Parquet output. Converted to Path object</span>
<span class="sd">        and stored for use by write methods. Vectors will be written to</span>
<span class="sd">        subdirectories partitioned by model, run_id, and shard.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The writer creates Hive-style partitioned directories:</span>
<span class="sd">    ``root/model={model}/run_id={run_id}/shard={shard:05d}/part-00000.parquet``</span>

<span class="sd">    Files are compressed with ZSTD compression (level 6) and use a row group</span>
<span class="sd">    size of 4096 bytes for optimal read performance.</span>
<span class="sd">    """</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">dense_schema</span><span class="p">(</span><span class="n">dim</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pa</span><span class="o">.</span><span class="n">Schema</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Create PyArrow schema for dense vector embeddings.</span>

<span class="sd">        Defines the schema for dense embedding vectors with fixed dimension.</span>
<span class="sd">        Includes chunk_id, model, run_id, vector array, L2 norm, and timestamp.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dim : int</span>
<span class="sd">            Vector dimension (must match the length of vector arrays).</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pa.Schema</span>
<span class="sd">            PyArrow schema with fields: chunk_id (string), model (dictionary),</span>
<span class="sd">            run_id (dictionary), dim (int16), vector (list&lt;float32&gt;), l2_norm</span>
<span class="sd">            (float32), created_at (timestamp).</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="n">pa</span><span class="o">.</span><span class="n">schema</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"chunk_id"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">string</span><span class="p">()),</span>
                <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"model"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">dictionary</span><span class="p">(</span><span class="n">pa</span><span class="o">.</span><span class="n">int32</span><span class="p">(),</span> <span class="n">pa</span><span class="o">.</span><span class="n">string</span><span class="p">())),</span>
                <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"run_id"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">dictionary</span><span class="p">(</span><span class="n">pa</span><span class="o">.</span><span class="n">int32</span><span class="p">(),</span> <span class="n">pa</span><span class="o">.</span><span class="n">string</span><span class="p">())),</span>
                <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"dim"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">int16</span><span class="p">()),</span>
                <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"vector"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">list_</span><span class="p">(</span><span class="n">pa</span><span class="o">.</span><span class="n">float32</span><span class="p">(),</span> <span class="n">list_size</span><span class="o">=</span><span class="n">dim</span><span class="p">)),</span>
                <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"l2_norm"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">float32</span><span class="p">()),</span>
                <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"created_at"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">timestamp</span><span class="p">(</span><span class="s2">"ms"</span><span class="p">)),</span>
            <span class="p">]</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">write_dense</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">model</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">run_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">dim</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">records</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="nb">float</span><span class="p">]],</span>
        <span class="n">shard</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Write dense embedding vectors to Parquet file.</span>

<span class="sd">        Writes dense embedding vectors (fixed-dimension float arrays) to a</span>
<span class="sd">        Parquet file with Hive-style partitioning. Each record consists of</span>
<span class="sd">        chunk_id, vector array, and L2 norm.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : str</span>
<span class="sd">            Model identifier used for partitioning (e.g., "qwen3", "sentence-transformers").</span>
<span class="sd">        run_id : str</span>
<span class="sd">            Run identifier used for partitioning (e.g., "dev", "prod-v1").</span>
<span class="sd">        dim : int</span>
<span class="sd">            Vector dimension. Must match the length of all vector arrays in records.</span>
<span class="sd">        records : Iterable[tuple[str, list[float], float]]</span>
<span class="sd">            Iterable of (chunk_id, vector, l2_norm) tuples. Each vector must</span>
<span class="sd">            be a list of floats with length equal to dim.</span>
<span class="sd">        shard : int, optional</span>
<span class="sd">            Shard number for partitioning. Used to distribute data across</span>
<span class="sd">            multiple files. Defaults to 0.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            Root directory path where the Parquet file was written.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Creates a timestamp (milliseconds since epoch) for all records in this</span>
<span class="sd">        batch. The output file is written to:</span>
<span class="sd">        ``root/model={model}/run_id={run_id}/shard={shard:05d}/part-00000.parquet``</span>
<span class="sd">        """</span>
        <span class="n">part_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">"model=</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s2">"</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">"run_id=</span><span class="si">{</span><span class="n">run_id</span><span class="si">}</span><span class="s2">"</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">"shard=</span><span class="si">{</span><span class="n">shard</span><span class="si">:</span><span class="s2">05d</span><span class="si">}</span><span class="s2">"</span>
        <span class="n">part_dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">now</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">UTC</span><span class="p">)</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">"chunk_id"</span><span class="p">:</span> <span class="n">cid</span><span class="p">,</span>
                <span class="s2">"model"</span><span class="p">:</span> <span class="n">model</span><span class="p">,</span>
                <span class="s2">"run_id"</span><span class="p">:</span> <span class="n">run_id</span><span class="p">,</span>
                <span class="s2">"dim"</span><span class="p">:</span> <span class="n">dim</span><span class="p">,</span>
                <span class="s2">"vector"</span><span class="p">:</span> <span class="n">vec</span><span class="p">,</span>
                <span class="s2">"l2_norm"</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">l2</span><span class="p">),</span>
                <span class="s2">"created_at"</span><span class="p">:</span> <span class="n">now</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="n">cid</span><span class="p">,</span> <span class="n">vec</span><span class="p">,</span> <span class="n">l2</span> <span class="ow">in</span> <span class="n">records</span>
        <span class="p">]</span>
        <span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Table</span><span class="o">.</span><span class="n">from_pylist</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dense_schema</span><span class="p">(</span><span class="n">dim</span><span class="p">))</span>
        <span class="n">pq</span><span class="o">.</span><span class="n">write_table</span><span class="p">(</span>
            <span class="n">table</span><span class="p">,</span>
            <span class="n">part_dir</span> <span class="o">/</span> <span class="s2">"part-00000.parquet"</span><span class="p">,</span>
            <span class="n">compression</span><span class="o">=</span><span class="s2">"zstd"</span><span class="p">,</span>
            <span class="n">compression_level</span><span class="o">=</span><span class="n">ZSTD_LEVEL</span><span class="p">,</span>
            <span class="n">data_page_size</span><span class="o">=</span><span class="n">ROW_GROUP_SIZE</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">splade_schema</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">pa</span><span class="o">.</span><span class="n">Schema</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Create PyArrow schema for SPLADE sparse vectors.</span>

<span class="sd">        Defines the schema for SPLADE (Sparse Lexical and Expansion) sparse</span>
<span class="sd">        embedding vectors. Includes vocab_ids, weights, and non-zero count.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pa.Schema</span>
<span class="sd">            PyArrow schema with fields: chunk_id (string), model (dictionary),</span>
<span class="sd">            run_id (dictionary), vocab_ids (list&lt;int32&gt;), weights</span>
<span class="sd">            (list&lt;float32&gt;), nnz (int16), created_at (timestamp).</span>
<span class="sd">        """</span>
        <span class="n">splade_fields</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"chunk_id"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">string</span><span class="p">()),</span>
            <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"model"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">dictionary</span><span class="p">(</span><span class="n">pa</span><span class="o">.</span><span class="n">int32</span><span class="p">(),</span> <span class="n">pa</span><span class="o">.</span><span class="n">string</span><span class="p">())),</span>
            <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"run_id"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">dictionary</span><span class="p">(</span><span class="n">pa</span><span class="o">.</span><span class="n">int32</span><span class="p">(),</span> <span class="n">pa</span><span class="o">.</span><span class="n">string</span><span class="p">())),</span>
            <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"vocab_ids"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">list_</span><span class="p">(</span><span class="n">pa</span><span class="o">.</span><span class="n">int32</span><span class="p">())),</span>
            <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"weights"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">list_</span><span class="p">(</span><span class="n">pa</span><span class="o">.</span><span class="n">float32</span><span class="p">())),</span>
            <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"nnz"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">int16</span><span class="p">()),</span>
            <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"created_at"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">timestamp</span><span class="p">(</span><span class="s2">"ms"</span><span class="p">)),</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">pa</span><span class="o">.</span><span class="n">schema</span><span class="p">(</span><span class="n">splade_fields</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">write_splade</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">model</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">run_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">records</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">]]],</span>
        <span class="n">shard</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Write SPLADE sparse vectors to Parquet file.</span>

<span class="sd">        Writes SPLADE (Sparse Lexical and Expansion) sparse embedding vectors</span>
<span class="sd">        to a Parquet file with Hive-style partitioning. Each record consists of</span>
<span class="sd">        chunk_id, vocabulary IDs, and corresponding weights.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : str</span>
<span class="sd">            Model identifier used for partitioning (e.g., "splade-v2").</span>
<span class="sd">        run_id : str</span>
<span class="sd">            Run identifier used for partitioning (e.g., "dev", "prod-v1").</span>
<span class="sd">        records : Iterable[tuple[str, list[int], list[float]]]</span>
<span class="sd">            Iterable of (chunk_id, vocab_ids, weights) tuples. vocab_ids and</span>
<span class="sd">            weights must have the same length (non-zero elements).</span>
<span class="sd">        shard : int, optional</span>
<span class="sd">            Shard number for partitioning. Used to distribute data across</span>
<span class="sd">            multiple files. Defaults to 0.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            Root directory path where the Parquet file was written.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        The nnz (number of non-zeros) field is automatically computed from the</span>
<span class="sd">        length of vocab_ids. Creates a timestamp (milliseconds since epoch) for</span>
<span class="sd">        all records in this batch.</span>
<span class="sd">        """</span>
        <span class="n">part_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">"model=</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s2">"</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">"run_id=</span><span class="si">{</span><span class="n">run_id</span><span class="si">}</span><span class="s2">"</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">"shard=</span><span class="si">{</span><span class="n">shard</span><span class="si">:</span><span class="s2">05d</span><span class="si">}</span><span class="s2">"</span>
        <span class="n">part_dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">now</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">UTC</span><span class="p">)</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">"chunk_id"</span><span class="p">:</span> <span class="n">cid</span><span class="p">,</span>
                <span class="s2">"model"</span><span class="p">:</span> <span class="n">model</span><span class="p">,</span>
                <span class="s2">"run_id"</span><span class="p">:</span> <span class="n">run_id</span><span class="p">,</span>
                <span class="s2">"vocab_ids"</span><span class="p">:</span> <span class="n">ids</span><span class="p">,</span>
                <span class="s2">"weights"</span><span class="p">:</span> <span class="n">wts</span><span class="p">,</span>
                <span class="s2">"nnz"</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">ids</span><span class="p">),</span>
                <span class="s2">"created_at"</span><span class="p">:</span> <span class="n">now</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="n">cid</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="n">wts</span> <span class="ow">in</span> <span class="n">records</span>
        <span class="p">]</span>
        <span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Table</span><span class="o">.</span><span class="n">from_pylist</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">splade_schema</span><span class="p">())</span>
        <span class="n">pq</span><span class="o">.</span><span class="n">write_table</span><span class="p">(</span>
            <span class="n">table</span><span class="p">,</span>
            <span class="n">part_dir</span> <span class="o">/</span> <span class="s2">"part-00000.parquet"</span><span class="p">,</span>
            <span class="n">compression</span><span class="o">=</span><span class="s2">"zstd"</span><span class="p">,</span>
            <span class="n">compression_level</span><span class="o">=</span><span class="n">ZSTD_LEVEL</span><span class="p">,</span>
            <span class="n">data_page_size</span><span class="o">=</span><span class="n">ROW_GROUP_SIZE</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="kgfoundry_common.parquet_io.ParquetVectorWriter.dense_schema">
<code class="highlight language-python"><span class="n">dense_schema</span><span class="p">(</span><span class="n">dim</span><span class="p">)</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
</span>
<a class="headerlink" href="#kgfoundry_common.parquet_io.ParquetVectorWriter.dense_schema" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Create PyArrow schema for dense vector embeddings.</p>
<p>Defines the schema for dense embedding vectors with fixed dimension.
Includes chunk_id, model, run_id, vector array, L2 norm, and timestamp.</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>dim</code>
</td>
<td>
<code><span title="int">int</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Vector dimension (must match the length of vector arrays).</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="pyarrow.Schema">Schema</span></code>
</td>
<td>
<div class="doc-md-description">
<p>PyArrow schema with fields: chunk_id (string), model (dictionary),
run_id (dictionary), dim (int16), vector (list<float32>), l2_norm
(float32), created_at (timestamp).</float32></p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/parquet_io.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">dense_schema</span><span class="p">(</span><span class="n">dim</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pa</span><span class="o">.</span><span class="n">Schema</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Create PyArrow schema for dense vector embeddings.</span>

<span class="sd">    Defines the schema for dense embedding vectors with fixed dimension.</span>
<span class="sd">    Includes chunk_id, model, run_id, vector array, L2 norm, and timestamp.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dim : int</span>
<span class="sd">        Vector dimension (must match the length of vector arrays).</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pa.Schema</span>
<span class="sd">        PyArrow schema with fields: chunk_id (string), model (dictionary),</span>
<span class="sd">        run_id (dictionary), dim (int16), vector (list&lt;float32&gt;), l2_norm</span>
<span class="sd">        (float32), created_at (timestamp).</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="n">pa</span><span class="o">.</span><span class="n">schema</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"chunk_id"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">string</span><span class="p">()),</span>
            <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"model"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">dictionary</span><span class="p">(</span><span class="n">pa</span><span class="o">.</span><span class="n">int32</span><span class="p">(),</span> <span class="n">pa</span><span class="o">.</span><span class="n">string</span><span class="p">())),</span>
            <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"run_id"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">dictionary</span><span class="p">(</span><span class="n">pa</span><span class="o">.</span><span class="n">int32</span><span class="p">(),</span> <span class="n">pa</span><span class="o">.</span><span class="n">string</span><span class="p">())),</span>
            <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"dim"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">int16</span><span class="p">()),</span>
            <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"vector"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">list_</span><span class="p">(</span><span class="n">pa</span><span class="o">.</span><span class="n">float32</span><span class="p">(),</span> <span class="n">list_size</span><span class="o">=</span><span class="n">dim</span><span class="p">)),</span>
            <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"l2_norm"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">float32</span><span class="p">()),</span>
            <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"created_at"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">timestamp</span><span class="p">(</span><span class="s2">"ms"</span><span class="p">)),</span>
        <span class="p">]</span>
    <span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="kgfoundry_common.parquet_io.ParquetVectorWriter.splade_schema">
<code class="highlight language-python"><span class="n">splade_schema</span><span class="p">()</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
</span>
<a class="headerlink" href="#kgfoundry_common.parquet_io.ParquetVectorWriter.splade_schema" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Create PyArrow schema for SPLADE sparse vectors.</p>
<p>Defines the schema for SPLADE (Sparse Lexical and Expansion) sparse
embedding vectors. Includes vocab_ids, weights, and non-zero count.</p>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="pyarrow.Schema">Schema</span></code>
</td>
<td>
<div class="doc-md-description">
<p>PyArrow schema with fields: chunk_id (string), model (dictionary),
run_id (dictionary), vocab_ids (list<int32>), weights
(list<float32>), nnz (int16), created_at (timestamp).</float32></int32></p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/parquet_io.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">splade_schema</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">pa</span><span class="o">.</span><span class="n">Schema</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Create PyArrow schema for SPLADE sparse vectors.</span>

<span class="sd">    Defines the schema for SPLADE (Sparse Lexical and Expansion) sparse</span>
<span class="sd">    embedding vectors. Includes vocab_ids, weights, and non-zero count.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pa.Schema</span>
<span class="sd">        PyArrow schema with fields: chunk_id (string), model (dictionary),</span>
<span class="sd">        run_id (dictionary), vocab_ids (list&lt;int32&gt;), weights</span>
<span class="sd">        (list&lt;float32&gt;), nnz (int16), created_at (timestamp).</span>
<span class="sd">    """</span>
    <span class="n">splade_fields</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"chunk_id"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">string</span><span class="p">()),</span>
        <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"model"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">dictionary</span><span class="p">(</span><span class="n">pa</span><span class="o">.</span><span class="n">int32</span><span class="p">(),</span> <span class="n">pa</span><span class="o">.</span><span class="n">string</span><span class="p">())),</span>
        <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"run_id"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">dictionary</span><span class="p">(</span><span class="n">pa</span><span class="o">.</span><span class="n">int32</span><span class="p">(),</span> <span class="n">pa</span><span class="o">.</span><span class="n">string</span><span class="p">())),</span>
        <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"vocab_ids"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">list_</span><span class="p">(</span><span class="n">pa</span><span class="o">.</span><span class="n">int32</span><span class="p">())),</span>
        <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"weights"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">list_</span><span class="p">(</span><span class="n">pa</span><span class="o">.</span><span class="n">float32</span><span class="p">())),</span>
        <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"nnz"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">int16</span><span class="p">()),</span>
        <span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"created_at"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">timestamp</span><span class="p">(</span><span class="s2">"ms"</span><span class="p">)),</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">pa</span><span class="o">.</span><span class="n">schema</span><span class="p">(</span><span class="n">splade_fields</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="kgfoundry_common.parquet_io.ParquetVectorWriter.write_dense">
<code class="highlight language-python"><span class="n">write_dense</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">run_id</span><span class="p">,</span> <span class="n">dim</span><span class="p">,</span> <span class="n">records</span><span class="p">,</span> <span class="n">shard</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>
<a class="headerlink" href="#kgfoundry_common.parquet_io.ParquetVectorWriter.write_dense" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Write dense embedding vectors to Parquet file.</p>
<p>Writes dense embedding vectors (fixed-dimension float arrays) to a
Parquet file with Hive-style partitioning. Each record consists of
chunk_id, vector array, and L2 norm.</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>model</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Model identifier used for partitioning (e.g., "qwen3", "sentence-transformers").</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>run_id</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Run identifier used for partitioning (e.g., "dev", "prod-v1").</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>dim</code>
</td>
<td>
<code><span title="int">int</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Vector dimension. Must match the length of all vector arrays in records.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>records</code>
</td>
<td>
<code><span title="collections.abc.Iterable">Iterable</span>[<span title="tuple">tuple</span>[<span title="str">str</span>, <span title="list">list</span>[<span title="float">float</span>], <span title="float">float</span>]]</code>
</td>
<td>
<div class="doc-md-description">
<p>Iterable of (chunk_id, vector, l2_norm) tuples. Each vector must
be a list of floats with length equal to dim.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>shard</code>
</td>
<td>
<code><span title="int">int</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Shard number for partitioning. Used to distribute data across
multiple files. Defaults to 0.</p>
</div>
</td>
<td>
<code>0</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Root directory path where the Parquet file was written.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="note" open="">
<summary>Notes</summary>
<p>Creates a timestamp (milliseconds since epoch) for all records in this
batch. The output file is written to:
<code>root/model={model}/run_id={run_id}/shard={shard:05d}/part-00000.parquet</code></p>
</details>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/parquet_io.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">write_dense</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">model</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">run_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">dim</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">records</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="nb">float</span><span class="p">]],</span>
    <span class="n">shard</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Write dense embedding vectors to Parquet file.</span>

<span class="sd">    Writes dense embedding vectors (fixed-dimension float arrays) to a</span>
<span class="sd">    Parquet file with Hive-style partitioning. Each record consists of</span>
<span class="sd">    chunk_id, vector array, and L2 norm.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    model : str</span>
<span class="sd">        Model identifier used for partitioning (e.g., "qwen3", "sentence-transformers").</span>
<span class="sd">    run_id : str</span>
<span class="sd">        Run identifier used for partitioning (e.g., "dev", "prod-v1").</span>
<span class="sd">    dim : int</span>
<span class="sd">        Vector dimension. Must match the length of all vector arrays in records.</span>
<span class="sd">    records : Iterable[tuple[str, list[float], float]]</span>
<span class="sd">        Iterable of (chunk_id, vector, l2_norm) tuples. Each vector must</span>
<span class="sd">        be a list of floats with length equal to dim.</span>
<span class="sd">    shard : int, optional</span>
<span class="sd">        Shard number for partitioning. Used to distribute data across</span>
<span class="sd">        multiple files. Defaults to 0.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Root directory path where the Parquet file was written.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Creates a timestamp (milliseconds since epoch) for all records in this</span>
<span class="sd">    batch. The output file is written to:</span>
<span class="sd">    ``root/model={model}/run_id={run_id}/shard={shard:05d}/part-00000.parquet``</span>
<span class="sd">    """</span>
    <span class="n">part_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">"model=</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s2">"</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">"run_id=</span><span class="si">{</span><span class="n">run_id</span><span class="si">}</span><span class="s2">"</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">"shard=</span><span class="si">{</span><span class="n">shard</span><span class="si">:</span><span class="s2">05d</span><span class="si">}</span><span class="s2">"</span>
    <span class="n">part_dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">now</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">UTC</span><span class="p">)</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>
    <span class="n">rows</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">"chunk_id"</span><span class="p">:</span> <span class="n">cid</span><span class="p">,</span>
            <span class="s2">"model"</span><span class="p">:</span> <span class="n">model</span><span class="p">,</span>
            <span class="s2">"run_id"</span><span class="p">:</span> <span class="n">run_id</span><span class="p">,</span>
            <span class="s2">"dim"</span><span class="p">:</span> <span class="n">dim</span><span class="p">,</span>
            <span class="s2">"vector"</span><span class="p">:</span> <span class="n">vec</span><span class="p">,</span>
            <span class="s2">"l2_norm"</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">l2</span><span class="p">),</span>
            <span class="s2">"created_at"</span><span class="p">:</span> <span class="n">now</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="n">cid</span><span class="p">,</span> <span class="n">vec</span><span class="p">,</span> <span class="n">l2</span> <span class="ow">in</span> <span class="n">records</span>
    <span class="p">]</span>
    <span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Table</span><span class="o">.</span><span class="n">from_pylist</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dense_schema</span><span class="p">(</span><span class="n">dim</span><span class="p">))</span>
    <span class="n">pq</span><span class="o">.</span><span class="n">write_table</span><span class="p">(</span>
        <span class="n">table</span><span class="p">,</span>
        <span class="n">part_dir</span> <span class="o">/</span> <span class="s2">"part-00000.parquet"</span><span class="p">,</span>
        <span class="n">compression</span><span class="o">=</span><span class="s2">"zstd"</span><span class="p">,</span>
        <span class="n">compression_level</span><span class="o">=</span><span class="n">ZSTD_LEVEL</span><span class="p">,</span>
        <span class="n">data_page_size</span><span class="o">=</span><span class="n">ROW_GROUP_SIZE</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="kgfoundry_common.parquet_io.ParquetVectorWriter.write_splade">
<code class="highlight language-python"><span class="n">write_splade</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">run_id</span><span class="p">,</span> <span class="n">records</span><span class="p">,</span> <span class="n">shard</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>
<a class="headerlink" href="#kgfoundry_common.parquet_io.ParquetVectorWriter.write_splade" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Write SPLADE sparse vectors to Parquet file.</p>
<p>Writes SPLADE (Sparse Lexical and Expansion) sparse embedding vectors
to a Parquet file with Hive-style partitioning. Each record consists of
chunk_id, vocabulary IDs, and corresponding weights.</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>model</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Model identifier used for partitioning (e.g., "splade-v2").</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>run_id</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Run identifier used for partitioning (e.g., "dev", "prod-v1").</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>records</code>
</td>
<td>
<code><span title="collections.abc.Iterable">Iterable</span>[<span title="tuple">tuple</span>[<span title="str">str</span>, <span title="list">list</span>[<span title="int">int</span>], <span title="list">list</span>[<span title="float">float</span>]]]</code>
</td>
<td>
<div class="doc-md-description">
<p>Iterable of (chunk_id, vocab_ids, weights) tuples. vocab_ids and
weights must have the same length (non-zero elements).</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>shard</code>
</td>
<td>
<code><span title="int">int</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Shard number for partitioning. Used to distribute data across
multiple files. Defaults to 0.</p>
</div>
</td>
<td>
<code>0</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Root directory path where the Parquet file was written.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="note" open="">
<summary>Notes</summary>
<p>The nnz (number of non-zeros) field is automatically computed from the
length of vocab_ids. Creates a timestamp (milliseconds since epoch) for
all records in this batch.</p>
</details>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/parquet_io.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">write_splade</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">model</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">run_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">records</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">]]],</span>
    <span class="n">shard</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Write SPLADE sparse vectors to Parquet file.</span>

<span class="sd">    Writes SPLADE (Sparse Lexical and Expansion) sparse embedding vectors</span>
<span class="sd">    to a Parquet file with Hive-style partitioning. Each record consists of</span>
<span class="sd">    chunk_id, vocabulary IDs, and corresponding weights.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    model : str</span>
<span class="sd">        Model identifier used for partitioning (e.g., "splade-v2").</span>
<span class="sd">    run_id : str</span>
<span class="sd">        Run identifier used for partitioning (e.g., "dev", "prod-v1").</span>
<span class="sd">    records : Iterable[tuple[str, list[int], list[float]]]</span>
<span class="sd">        Iterable of (chunk_id, vocab_ids, weights) tuples. vocab_ids and</span>
<span class="sd">        weights must have the same length (non-zero elements).</span>
<span class="sd">    shard : int, optional</span>
<span class="sd">        Shard number for partitioning. Used to distribute data across</span>
<span class="sd">        multiple files. Defaults to 0.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Root directory path where the Parquet file was written.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The nnz (number of non-zeros) field is automatically computed from the</span>
<span class="sd">    length of vocab_ids. Creates a timestamp (milliseconds since epoch) for</span>
<span class="sd">    all records in this batch.</span>
<span class="sd">    """</span>
    <span class="n">part_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">"model=</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s2">"</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">"run_id=</span><span class="si">{</span><span class="n">run_id</span><span class="si">}</span><span class="s2">"</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">"shard=</span><span class="si">{</span><span class="n">shard</span><span class="si">:</span><span class="s2">05d</span><span class="si">}</span><span class="s2">"</span>
    <span class="n">part_dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">now</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">UTC</span><span class="p">)</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>
    <span class="n">rows</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">"chunk_id"</span><span class="p">:</span> <span class="n">cid</span><span class="p">,</span>
            <span class="s2">"model"</span><span class="p">:</span> <span class="n">model</span><span class="p">,</span>
            <span class="s2">"run_id"</span><span class="p">:</span> <span class="n">run_id</span><span class="p">,</span>
            <span class="s2">"vocab_ids"</span><span class="p">:</span> <span class="n">ids</span><span class="p">,</span>
            <span class="s2">"weights"</span><span class="p">:</span> <span class="n">wts</span><span class="p">,</span>
            <span class="s2">"nnz"</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">ids</span><span class="p">),</span>
            <span class="s2">"created_at"</span><span class="p">:</span> <span class="n">now</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="n">cid</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="n">wts</span> <span class="ow">in</span> <span class="n">records</span>
    <span class="p">]</span>
    <span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Table</span><span class="o">.</span><span class="n">from_pylist</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">splade_schema</span><span class="p">())</span>
    <span class="n">pq</span><span class="o">.</span><span class="n">write_table</span><span class="p">(</span>
        <span class="n">table</span><span class="p">,</span>
        <span class="n">part_dir</span> <span class="o">/</span> <span class="s2">"part-00000.parquet"</span><span class="p">,</span>
        <span class="n">compression</span><span class="o">=</span><span class="s2">"zstd"</span><span class="p">,</span>
        <span class="n">compression_level</span><span class="o">=</span><span class="n">ZSTD_LEVEL</span><span class="p">,</span>
        <span class="n">data_page_size</span><span class="o">=</span><span class="n">ROW_GROUP_SIZE</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
</div>
</div>
</div><h3 id="kgfoundry_commonparquet_ioread_table">kgfoundry_common.parquet_io.read_table<a class="headerlink" href="#kgfoundry_commonparquet_ioread_table" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="kgfoundry_common.parquet_io.read_table">
<code class="highlight language-python"><span class="n">kgfoundry_common</span><span class="o">.</span><span class="n">parquet_io</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">validate_schema</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>
<a class="headerlink" href="#kgfoundry_common.parquet_io.read_table" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p>Read a Parquet file and return a typed Table.</p>
<p>Loads a Parquet file or directory and returns a PyArrow Table. Optionally
validates the table schema against an expected schema.</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>path</code>
</td>
<td>
<code><span title="str">str</span> | <span title="pathlib.Path">Path</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Path to Parquet file or directory containing Parquet files.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>schema</code>
</td>
<td>
<code><span title="pyarrow.Schema">Schema</span> | None</code>
</td>
<td>
<div class="doc-md-description">
<p>Expected schema for validation. If provided and validate_schema=True,
raises DeserializationError if the table schema does not match.
Defaults to None.</p>
</div>
</td>
<td>
<code>None</code>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>validate_schema</code>
</td>
<td>
<code><span title="bool">bool</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Whether to validate against the provided schema. Only used if schema
is not None. Defaults to True.</p>
</div>
</td>
<td>
<code>True</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="pyarrow.Table">Table</span></code>
</td>
<td>
<div class="doc-md-description">
<p>PyArrow Table with concrete schema. Contains all rows from the Parquet
file(s).</p>
</div>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Raises:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="FileNotFoundError">FileNotFoundError</span></code>
</td>
<td>
<div class="doc-md-description">
<p>If the Parquet file or directory does not exist.</p>
</div>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code><a class="autorefs autorefs-internal" href="../errors/exceptions/#kgfoundry_common.errors.exceptions.DeserializationError" title="kgfoundry_common.errors.exceptions.DeserializationError (kgfoundry_common.errors.DeserializationError)">DeserializationError</a></code>
</td>
<td>
<div class="doc-md-description">
<p>If schema validation fails (when schema is provided and validation
enabled) or if the file is corrupted or invalid.</p>
</div>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Examples:</span></p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">kgfoundry_common.parquet_io</span><span class="w"> </span><span class="kn">import</span> <span class="n">read_table</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Note: requires existing Parquet file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># table = read_table("data.parquet")</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># assert table.num_rows &gt; 0</span>
</code></pre></div>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/parquet_io.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">read_table</span><span class="p">(</span>
    <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">schema</span><span class="p">:</span> <span class="n">pa</span><span class="o">.</span><span class="n">Schema</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">validate_schema</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pa</span><span class="o">.</span><span class="n">Table</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Read a Parquet file and return a typed Table.</span>

<span class="sd">    Loads a Parquet file or directory and returns a PyArrow Table. Optionally</span>
<span class="sd">    validates the table schema against an expected schema.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    path : str | Path</span>
<span class="sd">        Path to Parquet file or directory containing Parquet files.</span>
<span class="sd">    schema : pa.Schema | None, optional</span>
<span class="sd">        Expected schema for validation. If provided and validate_schema=True,</span>
<span class="sd">        raises DeserializationError if the table schema does not match.</span>
<span class="sd">        Defaults to None.</span>
<span class="sd">    validate_schema : bool, optional</span>
<span class="sd">        Whether to validate against the provided schema. Only used if schema</span>
<span class="sd">        is not None. Defaults to True.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pa.Table</span>
<span class="sd">        PyArrow Table with concrete schema. Contains all rows from the Parquet</span>
<span class="sd">        file(s).</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    FileNotFoundError</span>
<span class="sd">        If the Parquet file or directory does not exist.</span>
<span class="sd">    DeserializationError</span>
<span class="sd">        If schema validation fails (when schema is provided and validation</span>
<span class="sd">        enabled) or if the file is corrupted or invalid.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from pathlib import Path</span>
<span class="sd">    &gt;&gt;&gt; from kgfoundry_common.parquet_io import read_table</span>
<span class="sd">    &gt;&gt;&gt; # Note: requires existing Parquet file</span>
<span class="sd">    &gt;&gt;&gt; # table = read_table("data.parquet")</span>
<span class="sd">    &gt;&gt;&gt; # assert table.num_rows &gt; 0</span>
<span class="sd">    """</span>
    <span class="n">path_obj</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">path_obj</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"Parquet file not found: </span><span class="si">{</span><span class="n">path_obj</span><span class="si">}</span><span class="s2">"</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">table</span> <span class="o">=</span> <span class="n">pq</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="n">path_obj</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"Failed to read Parquet file </span><span class="si">{</span><span class="n">path_obj</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">exc</span><span class="si">}</span><span class="s2">"</span>
        <span class="k">raise</span> <span class="n">DeserializationError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exc</span>

    <span class="k">if</span> <span class="n">schema</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">validate_schema</span><span class="p">:</span>
        <span class="n">validate_table_schema</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">table</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="kgfoundry_commonparquet_ioread_table_to_dataframe">kgfoundry_common.parquet_io.read_table_to_dataframe<a class="headerlink" href="#kgfoundry_commonparquet_ioread_table_to_dataframe" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="kgfoundry_common.parquet_io.read_table_to_dataframe">
<code class="highlight language-python"><span class="n">kgfoundry_common</span><span class="o">.</span><span class="n">parquet_io</span><span class="o">.</span><span class="n">read_table_to_dataframe</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">validate_schema</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>
<a class="headerlink" href="#kgfoundry_common.parquet_io.read_table_to_dataframe" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p>Read a Parquet file and return a typed DataFrame.</p>
<p>Loads a Parquet file or directory and converts it to a pandas DataFrame.
Optionally validates the table schema before conversion. Requires pandas
to be installed.</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>path</code>
</td>
<td>
<code><span title="str">str</span> | <span title="pathlib.Path">Path</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Path to Parquet file or directory containing Parquet files.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>schema</code>
</td>
<td>
<code><span title="pyarrow.Schema">Schema</span> | None</code>
</td>
<td>
<div class="doc-md-description">
<p>Expected schema for validation. If provided and validate_schema=True,
raises DeserializationError if the table schema does not match.
Defaults to None.</p>
</div>
</td>
<td>
<code>None</code>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>validate_schema</code>
</td>
<td>
<code><span title="bool">bool</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Whether to validate against the provided schema. Only used if schema
is not None. Defaults to True.</p>
</div>
</td>
<td>
<code>True</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="pandas.DataFrame">DataFrame</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Pandas DataFrame with schema metadata preserved. Contains all rows
from the Parquet file(s).</p>
</div>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Raises:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="ImportError">ImportError</span></code>
</td>
<td>
<div class="doc-md-description">
<p>If pandas is not installed.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="note" open="">
<summary>Notes</summary>
<p>This function wraps :func:<code>read_table</code> and converts the result to a pandas
DataFrame. Schema validation or file-related errors raised by
:func:<code>read_table</code> propagate unchanged.</p>
</details>
<p><span class="doc-section-title">Examples:</span></p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">kgfoundry_common.parquet_io</span><span class="w"> </span><span class="kn">import</span> <span class="n">read_table_to_dataframe</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Note: requires existing Parquet file and pandas</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># df = read_table_to_dataframe("data.parquet")</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># assert len(df) &gt; 0</span>
</code></pre></div>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/parquet_io.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">read_table_to_dataframe</span><span class="p">(</span>
    <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">schema</span><span class="p">:</span> <span class="n">pa</span><span class="o">.</span><span class="n">Schema</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">validate_schema</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Read a Parquet file and return a typed DataFrame.</span>

<span class="sd">    Loads a Parquet file or directory and converts it to a pandas DataFrame.</span>
<span class="sd">    Optionally validates the table schema before conversion. Requires pandas</span>
<span class="sd">    to be installed.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    path : str | Path</span>
<span class="sd">        Path to Parquet file or directory containing Parquet files.</span>
<span class="sd">    schema : pa.Schema | None, optional</span>
<span class="sd">        Expected schema for validation. If provided and validate_schema=True,</span>
<span class="sd">        raises DeserializationError if the table schema does not match.</span>
<span class="sd">        Defaults to None.</span>
<span class="sd">    validate_schema : bool, optional</span>
<span class="sd">        Whether to validate against the provided schema. Only used if schema</span>
<span class="sd">        is not None. Defaults to True.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    DataFrame</span>
<span class="sd">        Pandas DataFrame with schema metadata preserved. Contains all rows</span>
<span class="sd">        from the Parquet file(s).</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ImportError</span>
<span class="sd">        If pandas is not installed.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This function wraps :func:`read_table` and converts the result to a pandas</span>
<span class="sd">    DataFrame. Schema validation or file-related errors raised by</span>
<span class="sd">    :func:`read_table` propagate unchanged.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from pathlib import Path</span>
<span class="sd">    &gt;&gt;&gt; from kgfoundry_common.parquet_io import read_table_to_dataframe</span>
<span class="sd">    &gt;&gt;&gt; # Note: requires existing Parquet file and pandas</span>
<span class="sd">    &gt;&gt;&gt; # df = read_table_to_dataframe("data.parquet")</span>
<span class="sd">    &gt;&gt;&gt; # assert len(df) &gt; 0</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">pd</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">"pandas is required for DataFrame conversion"</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="n">table</span> <span class="o">=</span> <span class="n">read_table</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="n">schema</span><span class="p">,</span> <span class="n">validate_schema</span><span class="o">=</span><span class="n">validate_schema</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">table</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="kgfoundry_commonparquet_iovalidate_table_schema">kgfoundry_common.parquet_io.validate_table_schema<a class="headerlink" href="#kgfoundry_commonparquet_iovalidate_table_schema" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="kgfoundry_common.parquet_io.validate_table_schema">
<code class="highlight language-python"><span class="n">kgfoundry_common</span><span class="o">.</span><span class="n">parquet_io</span><span class="o">.</span><span class="n">validate_table_schema</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">expected_schema</span><span class="p">)</span></code>
<a class="headerlink" href="#kgfoundry_common.parquet_io.validate_table_schema" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p>Validate that a table matches an expected schema.</p>
<p>Compares the schema of a PyArrow Table against an expected schema and
raises an exception if they do not match exactly.</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>table</code>
</td>
<td>
<code><span title="pyarrow.Table">Table</span></code>
</td>
<td>
<div class="doc-md-description">
<p>PyArrow Table to validate.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>expected_schema</code>
</td>
<td>
<code><span title="pyarrow.Schema">Schema</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Expected schema that the table should match.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Raises:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><a class="autorefs autorefs-internal" href="../errors/exceptions/#kgfoundry_common.errors.exceptions.DeserializationError" title="kgfoundry_common.errors.exceptions.DeserializationError (kgfoundry_common.errors.DeserializationError)">DeserializationError</a></code>
</td>
<td>
<div class="doc-md-description">
<p>If the table schema does not match the expected schema. The error
message includes both schemas for debugging.</p>
</div>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Examples:</span></p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">kgfoundry_common.parquet_io</span><span class="w"> </span><span class="kn">import</span> <span class="n">validate_table_schema</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">schema</span><span class="p">([</span><span class="n">pa</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"id"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">string</span><span class="p">())])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Table</span><span class="o">.</span><span class="n">from_pylist</span><span class="p">([{</span><span class="s2">"id"</span><span class="p">:</span> <span class="s2">"test"</span><span class="p">}],</span> <span class="n">schema</span><span class="o">=</span><span class="n">schema</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">validate_table_schema</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>  <span class="c1"># No error</span>
</code></pre></div>
<details class="quote">
<summary>Source code in <code>src/kgfoundry_common/parquet_io.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">validate_table_schema</span><span class="p">(</span><span class="n">table</span><span class="p">:</span> <span class="n">pa</span><span class="o">.</span><span class="n">Table</span><span class="p">,</span> <span class="n">expected_schema</span><span class="p">:</span> <span class="n">pa</span><span class="o">.</span><span class="n">Schema</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Validate that a table matches an expected schema.</span>

<span class="sd">    Compares the schema of a PyArrow Table against an expected schema and</span>
<span class="sd">    raises an exception if they do not match exactly.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    table : pa.Table</span>
<span class="sd">        PyArrow Table to validate.</span>
<span class="sd">    expected_schema : pa.Schema</span>
<span class="sd">        Expected schema that the table should match.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    DeserializationError</span>
<span class="sd">        If the table schema does not match the expected schema. The error</span>
<span class="sd">        message includes both schemas for debugging.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; import pyarrow as pa</span>
<span class="sd">    &gt;&gt;&gt; from kgfoundry_common.parquet_io import validate_table_schema</span>
<span class="sd">    &gt;&gt;&gt; schema = pa.schema([pa.field("id", pa.string())])</span>
<span class="sd">    &gt;&gt;&gt; table = pa.Table.from_pylist([{"id": "test"}], schema=schema)</span>
<span class="sd">    &gt;&gt;&gt; validate_table_schema(table, schema)  # No error</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">table</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="n">expected_schema</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"Schema mismatch: expected </span><span class="si">{</span><span class="n">expected_schema</span><span class="si">}</span><span class="s2">, got </span><span class="si">{</span><span class="n">table</span><span class="o">.</span><span class="n">schema</span><span class="si">}</span><span class="s2">"</span>
        <span class="k">raise</span> <span class="n">DeserializationError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h2 id="relationships">Relationships<a class="headerlink" href="#relationships" title="Permanent link">¶</a></h2>
<p><strong>Imports:</strong> <code>__future__.annotations</code>, <code>collections.abc.Iterable</code>, <code>datetime</code>, <code>kgfoundry_common.errors.DeserializationError</code>, <code>kgfoundry_common.navmap_loader.load_nav_metadata</code>, <code>pandas</code>, <code>pandas.DataFrame</code>, <code>pathlib.Path</code>, <code>pyarrow</code>, <code>pyarrow.parquet</code>, <code>types.ModuleType</code>, <code>typing.Any</code>, <code>typing.NotRequired</code>, <code>typing.TYPE_CHECKING</code>, <code>typing.TypedDict</code></p>
<h2 id="autorefs-examples">Autorefs Examples<a class="headerlink" href="#autorefs-examples" title="Permanent link">¶</a></h2>
<ul>
<li><a class="autorefs autorefs-internal" href="#kgfoundry_common.parquet_io.ChunkDocTags">kgfoundry_common.parquet_io.ChunkDocTags</a></li>
<li><a class="autorefs autorefs-internal" href="#kgfoundry_common.parquet_io.ChunkRow">kgfoundry_common.parquet_io.ChunkRow</a></li>
<li><a class="autorefs autorefs-internal" href="#kgfoundry_common.parquet_io.ParquetChunkWriter">kgfoundry_common.parquet_io.ParquetChunkWriter</a></li>
<li><a class="autorefs autorefs-internal" href="#kgfoundry_common.parquet_io.read_table" title="kgfoundry_common.parquet_io.read_table(path, *, schema=None, validate_schema=True)">kgfoundry_common.parquet_io.read_table</a></li>
<li><a class="autorefs autorefs-internal" href="#kgfoundry_common.parquet_io.read_table_to_dataframe" title="kgfoundry_common.parquet_io.read_table_to_dataframe(path, *, schema=None, validate_schema=True)">kgfoundry_common.parquet_io.read_table_to_dataframe</a></li>
<li><a class="autorefs autorefs-internal" href="#kgfoundry_common.parquet_io.validate_table_schema" title="kgfoundry_common.parquet_io.validate_table_schema(table, expected_schema)">kgfoundry_common.parquet_io.validate_table_schema</a></li>
</ul>
<h2 id="inheritance">Inheritance<a class="headerlink" href="#inheritance" title="Permanent link">¶</a></h2>
<div class="highlight"><pre><span></span><code>classDiagram
    class ChunkDocTags
    class TypedDict
    TypedDict &lt;|-- ChunkDocTags
    class ChunkRow
    TypedDict &lt;|-- ChunkRow
    class ParquetChunkWriter
    class ParquetVectorWriter
</code></pre></div>
<h2 id="neighborhood">Neighborhood<a class="headerlink" href="#neighborhood" title="Permanent link">¶</a></h2>
<div class="d2"><svg aria-label="Diagram" data-d2-version="v0.7.1" preserveAspectRatio="xMinYMin meet" role="img" viewBox="0 0 1311 2032" xmlns:ns0="http://www.w3.org/1999/xlink"><svg class="d2-a698737a988d4f61bf6e563d87f0f5c0 d2-svg" height="2032" viewBox="-101 -101 1311 2032" width="1311"><rect class="fill-N7" fill="#FFFFFF" height="2032.000000" rx="0.000000" stroke-width="0" width="1311.000000" x="-101.000000" y="-101.000000"></rect><style type="text/css">
.appendix-icon {
	filter: drop-shadow(0px 0px 32px rgba(31, 36, 58, 0.1));
}
.d2-a698737a988d4f61bf6e563d87f0f5c0 .text-bold {
	font-family: "d2-a698737a988d4f61bf6e563d87f0f5c0-font-bold";
}
@font-face {
	font-family: d2-a698737a988d4f61bf6e563d87f0f5c0-font-bold;
	src: url("data:application/font-woff;base64,d09GRgABAAAAABDIAAoAAAAAGYAAAguFAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAAA9AAAAGAAAABgXxHXrmNtYXAAAAFUAAAAuwAAAQoFgwbdZ2x5ZgAAAhAAAAnYAAANeBhh/lFoZWFkAAAL6AAAADYAAAA2G38e1GhoZWEAAAwgAAAAJAAAACQKfwXwaG10eAAADEQAAAC2AAAAxGG6CN5sb2NhAAAM/AAAAGQAAABkVwxahm1heHAAAA1gAAAAIAAAACAASQD3bmFtZQAADYAAAAMoAAAIKgjwVkFwb3N0AAAQqAAAAB0AAAAg/9EAMgADAioCvAAFAAACigJYAAAASwKKAlgAAAFeADIBKQAAAgsHAwMEAwICBGAAAvcAAAADAAAAAAAAAABBREJPACAAIP//Au7/BgAAA9gBESAAAZ8AAAAAAfAClAAAACAAA3ichM25LkRxHEDh75q/fez7Phi7GaHUiUpuiIhGJUrxAMI7oVPYn8C7qDTiJ24Uujn1lxxkSjKUJd+oqkiSmroNW7bt2JM7cOjIsROnzl26juBPbRZqV27/nzpz4Sp++4qIz/iIt3iNl3iOp3iMh7iP97iL27gp/o1bt6pu2Yo1mSYlSbMWrdq069CprEu3HjW9+vQbMGjIsBGjxoybMGnKtBkVs+bMq1qwaIkfAAAA//8BAAD//9yNMkUAeJxsVntsW9UZ/87xtW/jOI/r6+tX/L7xvXbSOLGvr523k8Z5tNh5NOuL5lGqCtr1Fdp0CZAKJBjbwF0BZ6WjGy+B9lDZhLpJwJZNQyoson8wFYY0AQOGug6k1UMZAupcT+faeVX7IznS1fH3+H2/3+98oIVhALwfz4MGyqAKjMABSIyX8UuiyNNxKR7nLZq4iBh6GBuVF18Qg1QwSNV5zrvvnZxE6Qk8v3xkb3r//i8n29qUp199TTmDTr4GgAvfAOAenIEyYABYWhIFQeR1Og0rsbzI09eqH62qqKmgDLZvrrx85SeBNwNoW3t7+JgUPap8F2eWpy9cAABAECos4SZ8HmoAtD5BkKOxmBQxW2hB4H06HWcyS5FY3KJD49sfGd1xZnvigHfQFuc3b63fORBIWAe3G1I/OnrkxyOSb8LijExsOTBVaxvbBxjSADiFM6AvdixFzGbOpNPxohSJxeSoIPB8+pUDT4wMn93X4GgeDYVGmx04kzw7NfVE/0xgbHBwj1+tLw2AbuAMlKu4cV5O4njOy6XReeXmhx+iKpyZe/C+c3Ord6+rmKy7m0YXlK8++QRn5p6cW17rOYnPg/v/9VxqWeZlidHp0NE9j+/Y9diu/js9aVtzXWrf2F6TYDjyb9/dpcaj3gmza2r/gSm9fmpWeccbKtaBd6zULHGSLDE8wzPp7Mfz8x/jzM2by9OoWsmt1Awf4Qxo1LtMOkuGU4pxBGfAUPwusZKG5TU0l85Srz9/+V/PPZPCGeW/qFzJK7OIPfDrUiz8Es6QvsgvzGaLFIvFWYnhSYtxnqZ5UeRdmOPSzx3SG/WUntHf9ezDdJmGksdHxqMUtYnGGeVDR6fL1elAvuXpG56hYfeFr7++4B4e8txYyUHmyhZzWCRBkEl/GpE3mzku/eQvuyiqMkMObQXOKL9/LPpA67XladT7w9hc6z8BStxoUnszbeAGzzFSRI4Sanw0cKqvb7p3ZGC2qz2JM+LYUGp/4wdo+0GpDlZjjOIMVIJlXQyakJ9EiRXDfN57IpmQ5188PZJq7ehoTeGMf/fgwLhFufn552hfuKlJID3ZADCLM0CTSLzs5XjmyiX0zSVcPTe3nFM5U/gKAHM4A1UAkqyRLCVw45KGW7j8dGulvYKqdFS0PXX5OnrhnL9XEHr955Sx62qtdYUl9A7Kgw14AIuPEC6uco0WVeZxDE+0Gye0UzX3h+TwQ1nMB91dtXLj4dbJO2f1lLt/k83PDra7DbsSg7urvKKVu8NZe+yE8qnk4E9Y2F36eqfVoubrLixhM14AU4nhIk/zjMTRajIVapEAxPtozmxGvd4eJ2U4maWcSV/77sb2yd1CbOfmoClg8HpkvHAxZXd23p3acU9iti/1cMNbxkqVt7WFJbSA8mC/VUNrErLodMjWe7x74DvJUL+jl/fIiUSTNcS2+ncaOk5tH53ucFkmnanurjRXtc9TU5yrWFhCebwALHhWsFIDi4RkqyitKPWLseNtk9Fgs02XndVT9j5sFY1svYmPNRoevWfkVKfDmvrFck/Yzs+abG8ZK3v6t/YCVmv/GOXBeosDqAzyms1ShNSukaIkC3L3n9jSc6Stf7yRwsp7+r6wHAsLE09dEjf7YobO6e0j04nE4STrL4tJ3j12F2oNyo1Fn7ECoGm8SE7Cq/gtRkPsibl9y5ba4R53tLqmwm6oce3Zg04f1dbIO6MG3RGt1iu4TioPAmjAV2jANMpDI7TBNhUZQY4SIAiZ5JUWLBLHl8TkE9U5EHqZdDpNUREqaGxJHT5BvfJF60RzP1vjsdqDrRPyZu9vh+iy6O640230BYfH7kjObXOKotMpisFIl+iXbF5DTcdVe/Pm9gBVEXDXRKopY7K+fShgOFzuM7Vsq9VXmVljW480EkKLdUExGAgE65Rsrc1SrdFYbQ5nEZtuMmyVo6pH0itCYNQqaaY7Sztui4xszTo9joAVL1zcY6s/PK5cQd5YwGZRXoZCAeIA8AG+igUggNPQBI+sxnbhhVXvjEvEF2iu+yz102d/9btnphJ4QTl2+Yry/p/67yX3C0vIiBeItgnjGIlZJfCfU21ZpkxL64wGv2HvbZhffs9iROioli7m0ThRHrxqHuIHZLobOqFXz26i4b6w3M16t4WHb8s6Pf4m8q8R5brcDfUBX3ilvSbl5dKxghPKl3Aq5ViP06ye8qRXgUK5hKthA05FvqvcqbrllV+zghIzkDlxPJk8nkgcSyaPJRpCoYZQQ0NJqx3To9tPdcyku7pTRLJFnxnAZpQHFlwAlrXqVPoJooVj12yG1OncKt5+sH0y5mm3a4eE2M76OlPgFfzzsJ3/wckds4ka29DjqHbVZIgXDKC8Gt8DoJXjatgVEUlxidGs9wJ0SGfb4isaQidxtE9XzeCVJ1NWt2oITk94eTeqXXODEl/QWZQH44Y5FlVaRLgmJXAOvbXCVu3oMKHcrkhYq72fooIR5SNAwBWW0DMoD6LKHzFOHETdccQQlqNrwTiT2eLCnEl3NXyXsMWXcHtdzpDd1RY4tKNll3uLPWpvaRE8HcGDBsE9ZquxsIyZ1RtqW4K9O0XrbpNZtNoqy/mWUM94UUNMYQkdw9PkBdT6BFnm5XhcUpeeNQOGsaFkirl3ZoZ3Gmx6Cxs3fHvn4lHdQw+dfLPOr6MO6wzFWO2FJfQVyhGebdAAU7Ldv45szbo8DsGcnS3XuLcZDo+jqPJ3OWh3ogGlute/GRDRGyqgHFQASBueyEs/m+/Ss3qqjNV3n3ke5T7zp0Ux7f9MqV7xSZxDOVVH63+3LgJf2m9pen7uiSadXkfRFWXx+5vLqmiKLqMbvz9zsYGuoCm6nN6Mctf8A4Kwjb+mngP+a0r1G3xfINDHv6HmMxQ60TLKETWszSse31ByJZ41e6vstHGTP6Cn/zjfX27UU5uYsvYzFy3NQ6/rqCmkrXXa0T/e9fX5+X7+XaW8c0ddEUuyVPwG5dQ9VGbJQqGROOHtV9HU2+8NodDJQeUvJ8m9PgD0N3yf6lPkeZNjsTgxw75HZqIDviMzM+j4Xr3DtJyfKcZ1AaBP8ffAQe534qJsSzuEqjriohLnHzndFw764tbhxv3JxITcNha1tpsf+Fb69KGGxrBoH4pIkb0d8vHjMY12jsTtKCzBDXiJ7KvFF7co4nOCJAmCJBlkMSDLAVEmnqveRf/BItQBoCToyAkI6mEReVGY7LFxWeLqv1w8eLCI9TS6XniTfLfIXs6A3s+MjgKCisI+FMNvqN9ZSVOxuG/xWc2d+adKeoR3UG5lJ+7OopxSDajwEm6BUXyV1Mmsq9MfCvn9oRBuqeP5OvIH/wMAAP//AQAA//9c3uS2AAEAAAACC4XcDJwVXw889QABA+gAAAAA2F2ghAAAAADdZi82/jf+xAhtA/EAAQADAAIAAAAAAAAAAQAAA9j+7wAACJj+N/43CG0AAQAAAAAAAAAAAAAAAAAAADF4nBzKMS4FURTH4d/5v0SI++JJHhnNFHJDYsa0JOYWp5nKSSQoLIBNSNiBXqvXaG1BZysKmWbEFF/36YMrlWnUQKdHQplQIvREpzfCTgk9EBoJvRK6IXRPqOVAy+lXO5yo4PZNVuFYG2S7pdI+h7rAbc2ZMm41vrjD1eNq5uv/315w+2TPntnVOb22SYtNKm2R7IsjrRi0oraWMruksR+SXbO0NQ7T+x8AAAD//wEAAP//uOEd5gAAAAAALABQAHwAoAC2AMoA+gEQARwBNgFoAYoBrAHSAeQCAgI6AmwCmALKAv4DJAOMA64DugPSA+4EIARCBG4EngTSBPIFLgVUBXYFkgXKBfoGDgYmBlIGaAZ0BoAGjAaaBqYGvAABAAAAMQCQAAwAYwAHAAEAAAAAAAAAAAAAAAAABAADeJyclM9uG1UUxn9ObNMKwQJFVbqJ7oJFkejYVEnVNiuH1IpFFAePC0JCSBPP+I8ynhl5Jg7hCVjzFrxFVzwEz4FYo/l87NgF0SaKknx37vnznXO+c4Ed/mabSvUh8Ec9MVxhr35ueIsH9RPD27TrW4arPKn9abhGWJsbrvN5rWf4I95WfzP8gP3qT4YfslttG/6YZ9Udw59sO/4y/Cn7vF3gCrzgV8MVdskMb7HDj4a3eYTFrFR5RNNwjc/YM1xnD+gzoSBmQsIIx5AJI66YEZHjEzFjwpCIEEeHFjGFviYEQo7Rf34N8CmYESjimAJHjE9MQM7YIv4ir5RzZRzqNLO7FgVjAi7kcUlAgiNlREpCxKXiFBRkvKJBg5yB+GYU5HjkTIjxSJkxokGXNqf0GTMhx9FWpJKZT8qQgmsC5XdmUXZmQERCbqyuSAjF04lfJO8Opzi6ZLJdj3y6EeFLHN/Ju+SWyvYrPP26NWabeZdsAubqZ6yuxLq51gTHui3ztvhWuOAV7l792WTy/h6F+l8o8gVXmn+oSSVikuDcLi18Kch3j3Ec6dzBV0e+p0OfE7q8oa9zix49WpzRp8Nr+Xbp4fiaLmccy6MjvLhrSzFn/IDjGzqyKWNH1p/FxCJ+JjN15+I4Ux1TMvW8ZO6p1kgV3n3C5Q6lG+rI5TPQHpWWTvNLtGcBI1NFJoZT9XKpjdz6F5oipqqlnO3tfbkNc9u95RbfkGqHS7UuOJWTWzB631S9dzRzrR+PgJCUC1kMSJnSoOBGvM8JuCLGcazunWhLClornzLPjVQSMRWDDonizMj0NzDd+MZ9sKF7Z29JKP+S6eWqqvtkcerV7YzeqHvLO9+6HK1NoGFTTdfUNBDXxLQfaafW+fvyzfW6pTzliJSY8F8vwDM8muxzwCFjZRjoZm6vQ1MvRJOXHKr6SyJZDaXnyCIc4PGcAw54yfN3+rhk4oyLW3FZz93imCO6HH5QFQv7Lke8Xn37/6y/i2lTtTierk4v7j3FJ3dQ6xfas9v3sqeJlZOYW7TbrTgjYFpycbvrNbnHeP8AAAD//wEAAP//9LdPUXicYmBmAIP/5xiMGLAAAAAAAP//AQAA//8vAQIDAAAA");
}</style><style type="text/css">.shape {
  shape-rendering: geometricPrecision;
  stroke-linejoin: round;
}
.connection {
  stroke-linecap: round;
  stroke-linejoin: round;
}
.blend {
  mix-blend-mode: multiply;
  opacity: 0.5;
}

		.d2-a698737a988d4f61bf6e563d87f0f5c0 .fill-N1{fill:#0A0F25;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .fill-N2{fill:#676C7E;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .fill-N3{fill:#9499AB;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .fill-N4{fill:#CFD2DD;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .fill-N5{fill:#DEE1EB;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .fill-N6{fill:#EEF1F8;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .fill-N7{fill:#FFFFFF;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .fill-B1{fill:#0D32B2;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .fill-B2{fill:#0D32B2;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .fill-B3{fill:#E3E9FD;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .fill-B4{fill:#E3E9FD;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .fill-B5{fill:#EDF0FD;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .fill-B6{fill:#F7F8FE;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .fill-AA2{fill:#4A6FF3;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .fill-AA4{fill:#EDF0FD;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .fill-AA5{fill:#F7F8FE;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .fill-AB4{fill:#EDF0FD;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .fill-AB5{fill:#F7F8FE;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .stroke-N1{stroke:#0A0F25;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .stroke-N2{stroke:#676C7E;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .stroke-N3{stroke:#9499AB;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .stroke-N4{stroke:#CFD2DD;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .stroke-N5{stroke:#DEE1EB;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .stroke-N6{stroke:#EEF1F8;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .stroke-N7{stroke:#FFFFFF;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .stroke-B1{stroke:#0D32B2;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .stroke-B2{stroke:#0D32B2;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .stroke-B3{stroke:#E3E9FD;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .stroke-B4{stroke:#E3E9FD;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .stroke-B5{stroke:#EDF0FD;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .stroke-B6{stroke:#F7F8FE;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .stroke-AA2{stroke:#4A6FF3;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .stroke-AA4{stroke:#EDF0FD;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .stroke-AA5{stroke:#F7F8FE;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .stroke-AB4{stroke:#EDF0FD;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .stroke-AB5{stroke:#F7F8FE;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .background-color-N1{background-color:#0A0F25;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .background-color-N2{background-color:#676C7E;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .background-color-N3{background-color:#9499AB;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .background-color-N4{background-color:#CFD2DD;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .background-color-N5{background-color:#DEE1EB;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .background-color-N6{background-color:#EEF1F8;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .background-color-N7{background-color:#FFFFFF;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .background-color-B1{background-color:#0D32B2;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .background-color-B2{background-color:#0D32B2;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .background-color-B3{background-color:#E3E9FD;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .background-color-B4{background-color:#E3E9FD;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .background-color-B5{background-color:#EDF0FD;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .background-color-B6{background-color:#F7F8FE;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .background-color-AA2{background-color:#4A6FF3;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .background-color-AA4{background-color:#EDF0FD;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .background-color-AA5{background-color:#F7F8FE;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .background-color-AB4{background-color:#EDF0FD;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .background-color-AB5{background-color:#F7F8FE;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .color-N1{color:#0A0F25;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .color-N2{color:#676C7E;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .color-N3{color:#9499AB;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .color-N4{color:#CFD2DD;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .color-N5{color:#DEE1EB;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .color-N6{color:#EEF1F8;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .color-N7{color:#FFFFFF;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .color-B1{color:#0D32B2;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .color-B2{color:#0D32B2;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .color-B3{color:#E3E9FD;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .color-B4{color:#E3E9FD;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .color-B5{color:#EDF0FD;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .color-B6{color:#F7F8FE;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .color-AA2{color:#4A6FF3;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .color-AA4{color:#EDF0FD;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .color-AA5{color:#F7F8FE;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .color-AB4{color:#EDF0FD;}
		.d2-a698737a988d4f61bf6e563d87f0f5c0 .color-AB5{color:#F7F8FE;}.appendix text.text{fill:#0A0F25}.md{--color-fg-default:#0A0F25;--color-fg-muted:#676C7E;--color-fg-subtle:#9499AB;--color-canvas-default:#FFFFFF;--color-canvas-subtle:#EEF1F8;--color-border-default:#0D32B2;--color-border-muted:#0D32B2;--color-neutral-muted:#EEF1F8;--color-accent-fg:#0D32B2;--color-accent-emphasis:#0D32B2;--color-attention-subtle:#676C7E;--color-danger-fg:red;}.sketch-overlay-B1{fill:url(#streaks-darker-d2-a698737a988d4f61bf6e563d87f0f5c0);mix-blend-mode:lighten}.sketch-overlay-B2{fill:url(#streaks-darker-d2-a698737a988d4f61bf6e563d87f0f5c0);mix-blend-mode:lighten}.sketch-overlay-B3{fill:url(#streaks-bright-d2-a698737a988d4f61bf6e563d87f0f5c0);mix-blend-mode:darken}.sketch-overlay-B4{fill:url(#streaks-bright-d2-a698737a988d4f61bf6e563d87f0f5c0);mix-blend-mode:darken}.sketch-overlay-B5{fill:url(#streaks-bright-d2-a698737a988d4f61bf6e563d87f0f5c0);mix-blend-mode:darken}.sketch-overlay-B6{fill:url(#streaks-bright-d2-a698737a988d4f61bf6e563d87f0f5c0);mix-blend-mode:darken}.sketch-overlay-AA2{fill:url(#streaks-dark-d2-a698737a988d4f61bf6e563d87f0f5c0);mix-blend-mode:overlay}.sketch-overlay-AA4{fill:url(#streaks-bright-d2-a698737a988d4f61bf6e563d87f0f5c0);mix-blend-mode:darken}.sketch-overlay-AA5{fill:url(#streaks-bright-d2-a698737a988d4f61bf6e563d87f0f5c0);mix-blend-mode:darken}.sketch-overlay-AB4{fill:url(#streaks-bright-d2-a698737a988d4f61bf6e563d87f0f5c0);mix-blend-mode:darken}.sketch-overlay-AB5{fill:url(#streaks-bright-d2-a698737a988d4f61bf6e563d87f0f5c0);mix-blend-mode:darken}.sketch-overlay-N1{fill:url(#streaks-darker-d2-a698737a988d4f61bf6e563d87f0f5c0);mix-blend-mode:lighten}.sketch-overlay-N2{fill:url(#streaks-dark-d2-a698737a988d4f61bf6e563d87f0f5c0);mix-blend-mode:overlay}.sketch-overlay-N3{fill:url(#streaks-normal-d2-a698737a988d4f61bf6e563d87f0f5c0);mix-blend-mode:color-burn}.sketch-overlay-N4{fill:url(#streaks-normal-d2-a698737a988d4f61bf6e563d87f0f5c0);mix-blend-mode:color-burn}.sketch-overlay-N5{fill:url(#streaks-bright-d2-a698737a988d4f61bf6e563d87f0f5c0);mix-blend-mode:darken}.sketch-overlay-N6{fill:url(#streaks-bright-d2-a698737a988d4f61bf6e563d87f0f5c0);mix-blend-mode:darken}.sketch-overlay-N7{fill:url(#streaks-bright-d2-a698737a988d4f61bf6e563d87f0f5c0);mix-blend-mode:darken}.light-code{display: block}.dark-code{display: none}</style><a href="https://github.com/paul-heyse/kgfoundry/blob/main/src/kgfoundry_common/parquet_io.py" ns0:href="https://github.com/paul-heyse/kgfoundry/blob/main/src/kgfoundry_common/parquet_io.py"><g class="JiMzNDtrZ2ZvdW5kcnlfY29tbW9uLnBhcnF1ZXRfaW8mIzM0Ow=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="271.000000" x="288.000000" y="882.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="423.500000" y="920.500000">kgfoundry_common.parquet_io</text></g></a><g class="JiMzNDtfX2Z1dHVyZV9fLmFubm90YXRpb25zJiMzNDs="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="212.000000" x="778.000000" y="0.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="884.000000" y="38.500000">__future__.annotations</text></g><g class="JiMzNDtjb2xsZWN0aW9ucy5hYmMuSXRlcmFibGUmIzM0Ow=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="213.000000" x="778.000000" y="126.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="884.500000" y="164.500000">collections.abc.Iterable</text></g><g class="ZGF0ZXRpbWU="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="110.000000" x="829.000000" y="252.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="884.000000" y="290.500000">datetime</text></g><g class="JiMzNDtrZ2ZvdW5kcnlfY29tbW9uLmVycm9ycy5EZXNlcmlhbGl6YXRpb25FcnJvciYjMzQ7"><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="385.000000" x="692.000000" y="378.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="884.500000" y="416.500000">kgfoundry_common.errors.DeserializationError</text></g><g class="JiMzNDtrZ2ZvdW5kcnlfY29tbW9uLm5hdm1hcF9sb2FkZXIubG9hZF9uYXZfbWV0YWRhdGEmIzM0Ow=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="450.000000" x="659.000000" y="504.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="884.000000" y="542.500000">kgfoundry_common.navmap_loader.load_nav_metadata</text></g><g class="cGFuZGFz"><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="96.000000" x="836.000000" y="630.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="884.000000" y="668.500000">pandas</text></g><g class="JiMzNDtwYW5kYXMuRGF0YUZyYW1lJiMzNDs="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="179.000000" x="795.000000" y="756.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="884.500000" y="794.500000">pandas.DataFrame</text></g><g class="JiMzNDtwYXRobGliLlBhdGgmIzM0Ow=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="133.000000" x="818.000000" y="882.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="884.500000" y="920.500000">pathlib.Path</text></g><g class="cHlhcnJvdw=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="105.000000" x="832.000000" y="1008.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="884.500000" y="1046.500000">pyarrow</text></g><g class="JiMzNDtweWFycm93LnBhcnF1ZXQmIzM0Ow=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="166.000000" x="801.000000" y="1134.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="884.000000" y="1172.500000">pyarrow.parquet</text></g><g class="JiMzNDt0eXBlcy5Nb2R1bGVUeXBlJiMzNDs="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="176.000000" x="796.000000" y="1260.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="884.000000" y="1298.500000">types.ModuleType</text></g><g class="JiMzNDt0eXBpbmcuQW55JiMzNDs="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="123.000000" x="823.000000" y="1386.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="884.500000" y="1424.500000">typing.Any</text></g><g class="JiMzNDt0eXBpbmcuTm90UmVxdWlyZWQmIzM0Ow=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="186.000000" x="791.000000" y="1512.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="884.000000" y="1550.500000">typing.NotRequired</text></g><g class="JiMzNDt0eXBpbmcuVFlQRV9DSEVDS0lORyYjMzQ7"><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="213.000000" x="778.000000" y="1638.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="884.500000" y="1676.500000">typing.TYPE_CHECKING</text></g><g class="JiMzNDt0eXBpbmcuVHlwZWREaWN0JiMzNDs="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="168.000000" x="800.000000" y="1764.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="884.000000" y="1802.500000">typing.TypedDict</text></g><a href="https://github.com/paul-heyse/kgfoundry/blob/main/src/kgfoundry_common/__init__.py" ns0:href="https://github.com/paul-heyse/kgfoundry/blob/main/src/kgfoundry_common/__init__.py"><g class="a2dmb3VuZHJ5X2NvbW1vbg=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="188.000000" x="0.000000" y="882.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="94.000000" y="920.500000">kgfoundry_common</text></g></a><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5wYXJxdWV0X2lvJiMzNDsgLSZndDsgJiMzNDtfX2Z1dHVyZV9fLmFubm90YXRpb25zJiMzNDspWzBd"><marker id="mk-d2-a698737a988d4f61bf6e563d87f0f5c0-3488378134" markerHeight="12.000000" markerUnits="userSpaceOnUse" markerWidth="10.000000" orient="auto" refX="7.000000" refY="6.000000" viewBox="0.000000 0.000000 10.000000 12.000000"> <polygon class="connection fill-B1" fill="#0D32B2" points="0.000000,0.000000 10.000000,6.000000 0.000000,12.000000" stroke-width="2"></polygon> </marker><path class="connection stroke-B1" d="M 430.412601 880.043023 C 573.200012 202.798996 642.799988 33.000000 774.000000 33.000000" fill="none" marker-end="url(#mk-d2-a698737a988d4f61bf6e563d87f0f5c0-3488378134)" mask="url(#d2-a698737a988d4f61bf6e563d87f0f5c0)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5wYXJxdWV0X2lvJiMzNDsgLSZndDsgJiMzNDtjb2xsZWN0aW9ucy5hYmMuSXRlcmFibGUmIzM0OylbMF0="><path class="connection stroke-B1" d="M 432.475582 880.057367 C 573.599976 303.600006 642.700012 159.000000 773.500000 159.000000" fill="none" marker-end="url(#mk-d2-a698737a988d4f61bf6e563d87f0f5c0-3488378134)" mask="url(#d2-a698737a988d4f61bf6e563d87f0f5c0)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5wYXJxdWV0X2lvJiMzNDsgLSZndDsgZGF0ZXRpbWUpWzBd"><path class="connection stroke-B1" d="M 433.565550 880.081628 C 573.799988 404.399994 653.000000 285.000000 825.000000 285.000000" fill="none" marker-end="url(#mk-d2-a698737a988d4f61bf6e563d87f0f5c0-3488378134)" mask="url(#d2-a698737a988d4f61bf6e563d87f0f5c0)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5wYXJxdWV0X2lvJiMzNDsgLSZndDsgJiMzNDtrZ2ZvdW5kcnlfY29tbW9uLmVycm9ycy5EZXNlcmlhbGl6YXRpb25FcnJvciYjMzQ7KVswXQ=="><path class="connection stroke-B1" d="M 436.689563 880.122634 C 574.400024 505.200012 625.500000 411.000000 687.500000 411.000000" fill="none" marker-end="url(#mk-d2-a698737a988d4f61bf6e563d87f0f5c0-3488378134)" mask="url(#d2-a698737a988d4f61bf6e563d87f0f5c0)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5wYXJxdWV0X2lvJiMzNDsgLSZndDsgJiMzNDtrZ2ZvdW5kcnlfY29tbW9uLm5hdm1hcF9sb2FkZXIubG9hZF9uYXZfbWV0YWRhdGEmIzM0OylbMF0="><path class="connection stroke-B1" d="M 440.879821 880.203917 C 575.200012 606.000000 619.000000 537.000000 655.000000 537.000000" fill="none" marker-end="url(#mk-d2-a698737a988d4f61bf6e563d87f0f5c0-3488378134)" mask="url(#d2-a698737a988d4f61bf6e563d87f0f5c0)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5wYXJxdWV0X2lvJiMzNDsgLSZndDsgcGFuZGFzKVswXQ=="><path class="connection stroke-B1" d="M 449.184640 880.388595 C 576.799988 706.799988 654.400024 663.000000 832.000000 663.000000" fill="none" marker-end="url(#mk-d2-a698737a988d4f61bf6e563d87f0f5c0-3488378134)" mask="url(#d2-a698737a988d4f61bf6e563d87f0f5c0)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5wYXJxdWV0X2lvJiMzNDsgLSZndDsgJiMzNDtwYW5kYXMuRGF0YUZyYW1lJiMzNDspWzBd"><path class="connection stroke-B1" d="M 473.654751 880.876701 C 581.599976 807.599976 646.099976 789.000000 790.500000 789.000000" fill="none" marker-end="url(#mk-d2-a698737a988d4f61bf6e563d87f0f5c0-3488378134)" mask="url(#d2-a698737a988d4f61bf6e563d87f0f5c0)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5wYXJxdWV0X2lvJiMzNDsgLSZndDsgJiMzNDtwYXRobGliLlBhdGgmIzM0OylbMF0="><path class="connection stroke-B1" d="M 561.000000 915.000000 C 599.000000 915.000000 650.700012 915.000000 813.500000 915.000000" fill="none" marker-end="url(#mk-d2-a698737a988d4f61bf6e563d87f0f5c0-3488378134)" mask="url(#d2-a698737a988d4f61bf6e563d87f0f5c0)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5wYXJxdWV0X2lvJiMzNDsgLSZndDsgcHlhcnJvdylbMF0="><path class="connection stroke-B1" d="M 473.654751 949.123299 C 581.599976 1022.400024 653.500000 1041.000000 827.500000 1041.000000" fill="none" marker-end="url(#mk-d2-a698737a988d4f61bf6e563d87f0f5c0-3488378134)" mask="url(#d2-a698737a988d4f61bf6e563d87f0f5c0)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5wYXJxdWV0X2lvJiMzNDsgLSZndDsgJiMzNDtweWFycm93LnBhcnF1ZXQmIzM0OylbMF0="><path class="connection stroke-B1" d="M 449.184641 949.611405 C 576.799988 1123.199951 647.400024 1167.000000 797.000000 1167.000000" fill="none" marker-end="url(#mk-d2-a698737a988d4f61bf6e563d87f0f5c0-3488378134)" mask="url(#d2-a698737a988d4f61bf6e563d87f0f5c0)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5wYXJxdWV0X2lvJiMzNDsgLSZndDsgJiMzNDt0eXBlcy5Nb2R1bGVUeXBlJiMzNDspWzBd"><path class="connection stroke-B1" d="M 440.879821 949.796083 C 575.200012 1224.000000 646.400024 1293.000000 792.000000 1293.000000" fill="none" marker-end="url(#mk-d2-a698737a988d4f61bf6e563d87f0f5c0-3488378134)" mask="url(#d2-a698737a988d4f61bf6e563d87f0f5c0)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5wYXJxdWV0X2lvJiMzNDsgLSZndDsgJiMzNDt0eXBpbmcuQW55JiMzNDspWzBd"><path class="connection stroke-B1" d="M 436.689563 949.877366 C 574.400024 1324.800049 651.700012 1419.000000 818.500000 1419.000000" fill="none" marker-end="url(#mk-d2-a698737a988d4f61bf6e563d87f0f5c0-3488378134)" mask="url(#d2-a698737a988d4f61bf6e563d87f0f5c0)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5wYXJxdWV0X2lvJiMzNDsgLSZndDsgJiMzNDt0eXBpbmcuTm90UmVxdWlyZWQmIzM0OylbMF0="><path class="connection stroke-B1" d="M 433.565550 949.918372 C 573.799988 1425.599976 645.400024 1545.000000 787.000000 1545.000000" fill="none" marker-end="url(#mk-d2-a698737a988d4f61bf6e563d87f0f5c0-3488378134)" mask="url(#d2-a698737a988d4f61bf6e563d87f0f5c0)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5wYXJxdWV0X2lvJiMzNDsgLSZndDsgJiMzNDt0eXBpbmcuVFlQRV9DSEVDS0lORyYjMzQ7KVswXQ=="><path class="connection stroke-B1" d="M 432.475582 949.942633 C 573.599976 1526.400024 642.700012 1671.000000 773.500000 1671.000000" fill="none" marker-end="url(#mk-d2-a698737a988d4f61bf6e563d87f0f5c0-3488378134)" mask="url(#d2-a698737a988d4f61bf6e563d87f0f5c0)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7a2dmb3VuZHJ5X2NvbW1vbi5wYXJxdWV0X2lvJiMzNDsgLSZndDsgJiMzNDt0eXBpbmcuVHlwZWREaWN0JiMzNDspWzBd"><path class="connection stroke-B1" d="M 430.412602 949.956977 C 573.200012 1627.199951 647.200012 1797.000000 796.000000 1797.000000" fill="none" marker-end="url(#mk-d2-a698737a988d4f61bf6e563d87f0f5c0-3488378134)" mask="url(#d2-a698737a988d4f61bf6e563d87f0f5c0)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KGtnZm91bmRyeV9jb21tb24gLSZndDsgJiMzNDtrZ2ZvdW5kcnlfY29tbW9uLnBhcnF1ZXRfaW8mIzM0OylbMF0="><path class="connection stroke-B1" d="M 190.000000 915.000000 C 228.000000 915.000000 248.000000 915.000000 284.000000 915.000000" fill="none" marker-end="url(#mk-d2-a698737a988d4f61bf6e563d87f0f5c0-3488378134)" mask="url(#d2-a698737a988d4f61bf6e563d87f0f5c0)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="appendix-icon" transform="translate(543 866)"><svg fill="none" height="32" viewBox="0 0 32 32" width="32">
<g clip-path="url(#clip0_3440_35088111-d2-a698737a988d4f61bf6e563d87f0f5c0-EJVWOZTPOVXGI4TZL5RW63LNN5XC44DBOJYXKZLUL5UW6IQ)">
<path d="M16 31.1109C24.3456 31.1109 31.1111 24.3454 31.1111 15.9998C31.1111 7.65415 24.3456 0.888672 16 0.888672C7.65436 0.888672 0.888885 7.65415 0.888885 15.9998C0.888885 24.3454 7.65436 31.1109 16 31.1109Z" fill="white" stroke="#DEE1EB"></path>
<path d="M14.3909 16.7965C14.7364 17.2584 15.1772 17.6406 15.6834 17.9171C16.1896 18.1938 16.7494 18.3582 17.3248 18.3993C17.9001 18.4405 18.4777 18.3575 19.0181 18.1559C19.5586 17.9543 20.0492 17.6389 20.4571 17.2309L22.8708 14.8173C23.6036 14.0586 24.0089 13.0425 23.9998 11.9877C23.9906 10.933 23.5676 9.92404 22.8217 9.17821C22.0759 8.43237 21.067 8.00931 20.0123 8.00015C18.9575 7.99098 17.9413 8.39644 17.1827 9.1292L15.7988 10.505" stroke="#2E3346" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
<path d="M17.609 15.1874C17.2635 14.7255 16.8227 14.3433 16.3165 14.0667C15.8103 13.7902 15.2505 13.6257 14.6752 13.5845C14.0998 13.5433 13.5223 13.6263 12.9819 13.8279C12.4414 14.0295 11.9506 14.345 11.5428 14.753L9.1292 17.1666C8.39644 17.9252 7.99098 18.9414 8.00015 19.9962C8.00931 21.0509 8.43237 22.0598 9.17821 22.8056C9.92405 23.5515 10.933 23.9745 11.9877 23.9837C13.0425 23.9928 14.0586 23.5875 14.8173 22.8547L16.193 21.4788" stroke="#2E3346" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</g>
<defs>
<clipPath id="clip0_3440_35088111-d2-a698737a988d4f61bf6e563d87f0f5c0-EJVWOZTPOVXGI4TZL5RW63LNN5XC44DBOJYXKZLUL5UW6IQ">
<rect fill="white" height="32" width="32"></rect>
</clipPath>
</defs>
</svg>
</g><g class="appendix-icon" transform="translate(172 866)"><svg fill="none" height="32" viewBox="0 0 32 32" width="32">
<g clip-path="url(#clip0_3440_35088111-d2-a698737a988d4f61bf6e563d87f0f5c0-NNTWM33VNZSHE6K7MNXW23LPNY)">
<path d="M16 31.1109C24.3456 31.1109 31.1111 24.3454 31.1111 15.9998C31.1111 7.65415 24.3456 0.888672 16 0.888672C7.65436 0.888672 0.888885 7.65415 0.888885 15.9998C0.888885 24.3454 7.65436 31.1109 16 31.1109Z" fill="white" stroke="#DEE1EB"></path>
<path d="M14.3909 16.7965C14.7364 17.2584 15.1772 17.6406 15.6834 17.9171C16.1896 18.1938 16.7494 18.3582 17.3248 18.3993C17.9001 18.4405 18.4777 18.3575 19.0181 18.1559C19.5586 17.9543 20.0492 17.6389 20.4571 17.2309L22.8708 14.8173C23.6036 14.0586 24.0089 13.0425 23.9998 11.9877C23.9906 10.933 23.5676 9.92404 22.8217 9.17821C22.0759 8.43237 21.067 8.00931 20.0123 8.00015C18.9575 7.99098 17.9413 8.39644 17.1827 9.1292L15.7988 10.505" stroke="#2E3346" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
<path d="M17.609 15.1874C17.2635 14.7255 16.8227 14.3433 16.3165 14.0667C15.8103 13.7902 15.2505 13.6257 14.6752 13.5845C14.0998 13.5433 13.5223 13.6263 12.9819 13.8279C12.4414 14.0295 11.9506 14.345 11.5428 14.753L9.1292 17.1666C8.39644 17.9252 7.99098 18.9414 8.00015 19.9962C8.00931 21.0509 8.43237 22.0598 9.17821 22.8056C9.92405 23.5515 10.933 23.9745 11.9877 23.9837C13.0425 23.9928 14.0586 23.5875 14.8173 22.8547L16.193 21.4788" stroke="#2E3346" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</g>
<defs>
<clipPath id="clip0_3440_35088111-d2-a698737a988d4f61bf6e563d87f0f5c0-NNTWM33VNZSHE6K7MNXW23LPNY">
<rect fill="white" height="32" width="32"></rect>
</clipPath>
</defs>
</svg>
</g><mask height="2032" id="d2-a698737a988d4f61bf6e563d87f0f5c0" maskUnits="userSpaceOnUse" width="1311" x="-101" y="-101">
<rect fill="white" height="2032" width="1311" x="-101" y="-101"></rect>
</mask></svg></svg></div>
<aside class="md-source-file">
<span class="md-source-file__fact">
<span class="md-icon" title="Last update">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg>
</span>
<span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="November 6, 2025 21:54:45 UTC">November 6, 2025</span>
</span>
</aside>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: optional_deps" class="md-footer__link md-footer__link--prev" href="../optional_deps/">
<div class="md-footer__button md-icon">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</div>
<div class="md-footer__title">
<span class="md-footer__direction">
                Previous
              </span>
<div class="md-ellipsis">
                optional_deps
              </div>
</div>
</a>
<a aria-label="Next: problem_details" class="md-footer__link md-footer__link--next" href="../problem_details/">
<div class="md-footer__title">
<span class="md-footer__direction">
                Next
              </span>
<div class="md-ellipsis">
                problem_details
              </div>
</div>
<div class="md-footer__button md-icon">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.sections", "navigation.top", "navigation.tracking", "navigation.footer", "content.action.edit", "content.action.view"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
<script src="../../../assets/mkdocs_puml/puml.js"></script>
<script src="https://unpkg.com/@panzoom/panzoom@4.5.1/dist/panzoom.min.js"></script>
<script src="../../../assets/mkdocs_puml/interaction.js"></script>
<script>document$.subscribe(() => {
            const dark_scheme_name = "slate"
            
            window.scheme = document.body.getAttribute("data-md-color-scheme")
            const options = {
                attributeFilter: ['data-md-color-scheme'],
            };
            function color_scheme_callback(mutations) {
                for (let mutation of mutations) {
                    if (mutation.attributeName === "data-md-color-scheme") {
                        scheme = document.body.getAttribute("data-md-color-scheme")
                        var iframe_list = document.getElementsByClassName("redoc-iframe")
                        for(var i = 0; i < iframe_list.length; i++) {
                            var ele = iframe_list.item(i);
                            if (ele) {
                                if (scheme === dark_scheme_name) {
                                    ele.contentWindow.enable_dark_mode();
                                } else {
                                    ele.contentWindow.disable_dark_mode();
                                }
                            }
                        }
                    }
                }
            }
            observer = new MutationObserver(color_scheme_callback);
            observer.observe(document.body, options);
            })</script>
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>
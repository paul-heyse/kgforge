<!DOCTYPE html><html class="no-js" lang="en"><head>
<meta charset="utf-8">
<meta content="width=device-width,initial-scale=1" name="viewport">
<link href="https://docs.kgfoundry.dev/modules/orchestration/cli/" rel="canonical">
<link href="../" rel="prev">
<link href="../cli_context/" rel="next">
<link href="../../../assets/images/favicon.png" rel="icon">
<meta content="mkdocs-1.6.1, mkdocs-material-9.6.23" name="generator">
<title>cli - KgFoundry MkDocs Suite</title>
<link href="../../../assets/stylesheets/main.84d31ad4.min.css" rel="stylesheet">
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect">
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet">
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../../assets/_mkdocstrings.css" rel="stylesheet">
<link href="../../../assets/stylesheets/mkdocs_d2_plugin.css" rel="stylesheet">
<link href="../../../assets/mkdocs_puml/puml.css" rel="stylesheet">
<link href="../../../assets/mkdocs_puml/interaction.css" rel="stylesheet">
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
<body dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox">
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox">
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#orchestrationcli">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="KgFoundry MkDocs Suite" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="KgFoundry MkDocs Suite">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            KgFoundry MkDocs Suite
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              cli
            
          </span>
</div>
</div>
</div>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text">
<label class="md-search__icon md-icon" for="__search">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/paul-heyse/kgfoundry" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="KgFoundry MkDocs Suite" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="KgFoundry MkDocs Suite">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
    KgFoundry MkDocs Suite
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/paul-heyse/kgfoundry" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../..">
<span class="md-ellipsis">
    Overview
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../architecture/">
<span class="md-ellipsis">
    Architecture
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../api/">
<span class="md-ellipsis">
    API
    
  </span>
</a>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            API
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api/openapi-cli/">
<span class="md-ellipsis">
    CLI Spec
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api/interfaces/">
<span class="md-ellipsis">
    Interface Catalog
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox">
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
<span class="md-ellipsis">
    Modules
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            Modules
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../">
<span class="md-ellipsis">
    Overview
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_2" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../docling_kg/">
<span class="md-ellipsis">
    docling_kg
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_2">
<span class="md-nav__icon md-icon"></span>
            docling_kg
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../docling_kg/canonicalizer/">
<span class="md-ellipsis">
    canonicalizer
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../docling_kg/hybrid/">
<span class="md-ellipsis">
    hybrid
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../docling_kg/vlm/">
<span class="md-ellipsis">
    vlm
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_3" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../download/">
<span class="md-ellipsis">
    download
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_3">
<span class="md-nav__icon md-icon"></span>
            download
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../download/cli/">
<span class="md-ellipsis">
    cli
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../download/cli_context/">
<span class="md-ellipsis">
    cli_context
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../download/harvester/">
<span class="md-ellipsis">
    harvester
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_4" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../embeddings_dense/">
<span class="md-ellipsis">
    embeddings_dense
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_4">
<span class="md-nav__icon md-icon"></span>
            embeddings_dense
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../embeddings_dense/base/">
<span class="md-ellipsis">
    base
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../embeddings_dense/qwen3/">
<span class="md-ellipsis">
    qwen3
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_5" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../embeddings_sparse/">
<span class="md-ellipsis">
    embeddings_sparse
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_5">
<span class="md-nav__icon md-icon"></span>
            embeddings_sparse
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../embeddings_sparse/base/">
<span class="md-ellipsis">
    base
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../embeddings_sparse/bm25/">
<span class="md-ellipsis">
    bm25
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../embeddings_sparse/splade/">
<span class="md-ellipsis">
    splade
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_6" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../kg_builder/">
<span class="md-ellipsis">
    kg_builder
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_6_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_6">
<span class="md-nav__icon md-icon"></span>
            kg_builder
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../kg_builder/mock_kg/">
<span class="md-ellipsis">
    mock_kg
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kg_builder/neo4j_store/">
<span class="md-ellipsis">
    neo4j_store
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_7" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../kgfoundry_common/">
<span class="md-ellipsis">
    kgfoundry_common
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_7" id="__nav_4_7_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_7_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_7">
<span class="md-nav__icon md-icon"></span>
            kgfoundry_common
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../kgfoundry_common/config/">
<span class="md-ellipsis">
    config
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_7_2" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../kgfoundry_common/errors/">
<span class="md-ellipsis">
    errors
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_7_2" id="__nav_4_7_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_7_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_7_2">
<span class="md-nav__icon md-icon"></span>
            errors
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../kgfoundry_common/errors/codes/">
<span class="md-ellipsis">
    codes
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kgfoundry_common/errors/exceptions/">
<span class="md-ellipsis">
    exceptions
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kgfoundry_common/errors/http/">
<span class="md-ellipsis">
    http
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kgfoundry_common/exceptions/">
<span class="md-ellipsis">
    exceptions
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kgfoundry_common/fastapi_helpers/">
<span class="md-ellipsis">
    fastapi_helpers
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kgfoundry_common/fs/">
<span class="md-ellipsis">
    fs
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kgfoundry_common/gpu/">
<span class="md-ellipsis">
    gpu
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kgfoundry_common/ids/">
<span class="md-ellipsis">
    ids
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kgfoundry_common/jsonschema_utils/">
<span class="md-ellipsis">
    jsonschema_utils
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kgfoundry_common/logging/">
<span class="md-ellipsis">
    logging
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kgfoundry_common/models/">
<span class="md-ellipsis">
    models
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kgfoundry_common/navmap_loader/">
<span class="md-ellipsis">
    navmap_loader
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kgfoundry_common/navmap_types/">
<span class="md-ellipsis">
    navmap_types
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kgfoundry_common/numpy_typing/">
<span class="md-ellipsis">
    numpy_typing
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kgfoundry_common/observability/">
<span class="md-ellipsis">
    observability
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kgfoundry_common/opentelemetry_types/">
<span class="md-ellipsis">
    opentelemetry_types
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kgfoundry_common/optional_deps/">
<span class="md-ellipsis">
    optional_deps
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kgfoundry_common/parquet_io/">
<span class="md-ellipsis">
    parquet_io
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kgfoundry_common/problem_details/">
<span class="md-ellipsis">
    problem_details
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kgfoundry_common/prometheus/">
<span class="md-ellipsis">
    prometheus
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kgfoundry_common/pydantic/">
<span class="md-ellipsis">
    pydantic
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kgfoundry_common/safe_pickle_v2/">
<span class="md-ellipsis">
    safe_pickle_v2
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kgfoundry_common/schema_helpers/">
<span class="md-ellipsis">
    schema_helpers
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kgfoundry_common/sequence_guards/">
<span class="md-ellipsis">
    sequence_guards
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kgfoundry_common/serialization/">
<span class="md-ellipsis">
    serialization
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kgfoundry_common/settings/">
<span class="md-ellipsis">
    settings
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kgfoundry_common/subprocess_utils/">
<span class="md-ellipsis">
    subprocess_utils
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kgfoundry_common/types/">
<span class="md-ellipsis">
    types
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kgfoundry_common/typing/">
<span class="md-ellipsis">
    typing
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kgfoundry_common/vector_types/">
<span class="md-ellipsis">
    vector_types
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_8" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../linking/">
<span class="md-ellipsis">
    linking
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_8" id="__nav_4_8_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_8_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_8">
<span class="md-nav__icon md-icon"></span>
            linking
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../linking/calibration/">
<span class="md-ellipsis">
    calibration
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../linking/linker/">
<span class="md-ellipsis">
    linker
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_9" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../observability/">
<span class="md-ellipsis">
    observability
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_9" id="__nav_4_9_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_9_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_9">
<span class="md-nav__icon md-icon"></span>
            observability
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../observability/metrics/">
<span class="md-ellipsis">
    metrics
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_10" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../ontology/">
<span class="md-ellipsis">
    ontology
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_10" id="__nav_4_10_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_10_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_10">
<span class="md-nav__icon md-icon"></span>
            ontology
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../ontology/catalog/">
<span class="md-ellipsis">
    catalog
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ontology/loader/">
<span class="md-ellipsis">
    loader
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_4_11" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../">
<span class="md-ellipsis">
    orchestration
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_11" id="__nav_4_11_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_4_11_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_11">
<span class="md-nav__icon md-icon"></span>
            orchestration
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox">
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    cli
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    cli
    
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#hierarchy">
<span class="md-ellipsis">
      Hierarchy
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sections">
<span class="md-ellipsis">
      Sections
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#contents">
<span class="md-ellipsis">
      Contents
    </span>
</a>
<nav aria-label="Contents" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationclibm25buildconfig">
<span class="md-ellipsis">
      orchestration.cli.BM25BuildConfig
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli.BM25BuildConfig">
<span class="md-ellipsis">
      BM25BuildConfig
    </span>
</a>
<nav aria-label="BM25BuildConfig" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_bm25builder">
<span class="md-ellipsis">
      orchestration.cli._BM25Builder
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._BM25Builder">
<span class="md-ellipsis">
      _BM25Builder
    </span>
</a>
<nav aria-label="_BM25Builder" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._BM25Builder.build">
<span class="md-ellipsis">
      build
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_commandcontext">
<span class="md-ellipsis">
      orchestration.cli._CommandContext
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._CommandContext">
<span class="md-ellipsis">
      _CommandContext
    </span>
</a>
<nav aria-label="_CommandContext" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_uvicornrun">
<span class="md-ellipsis">
      orchestration.cli._UvicornRun
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._UvicornRun">
<span class="md-ellipsis">
      _UvicornRun
    </span>
</a>
<nav aria-label="_UvicornRun" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._UvicornRun.__call__">
<span class="md-ellipsis">
      __call__
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_build_bm25_index">
<span class="md-ellipsis">
      orchestration.cli._build_bm25_index
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._build_bm25_index">
<span class="md-ellipsis">
      _build_bm25_index
    </span>
</a>
<nav aria-label="_build_bm25_index" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_build_cli_problem">
<span class="md-ellipsis">
      orchestration.cli._build_cli_problem
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._build_cli_problem">
<span class="md-ellipsis">
      _build_cli_problem
    </span>
</a>
<nav aria-label="_build_cli_problem" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_coerce_extension_value">
<span class="md-ellipsis">
      orchestration.cli._coerce_extension_value
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._coerce_extension_value">
<span class="md-ellipsis">
      _coerce_extension_value
    </span>
</a>
<nav aria-label="_coerce_extension_value" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_emit_envelope">
<span class="md-ellipsis">
      orchestration.cli._emit_envelope
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._emit_envelope">
<span class="md-ellipsis">
      _emit_envelope
    </span>
</a>
<nav aria-label="_emit_envelope" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_envelope_path">
<span class="md-ellipsis">
      orchestration.cli._envelope_path
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._envelope_path">
<span class="md-ellipsis">
      _envelope_path
    </span>
</a>
<nav aria-label="_envelope_path" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_error_sort_key">
<span class="md-ellipsis">
      orchestration.cli._error_sort_key
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._error_sort_key">
<span class="md-ellipsis">
      _error_sort_key
    </span>
</a>
<nav aria-label="_error_sort_key" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_error_status_from_http">
<span class="md-ellipsis">
      orchestration.cli._error_status_from_http
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._error_status_from_http">
<span class="md-ellipsis">
      _error_status_from_http
    </span>
</a>
<nav aria-label="_error_status_from_http" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_extract_bm25_document">
<span class="md-ellipsis">
      orchestration.cli._extract_bm25_document
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._extract_bm25_document">
<span class="md-ellipsis">
      _extract_bm25_document
    </span>
</a>
<nav aria-label="_extract_bm25_document" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_finish_success">
<span class="md-ellipsis">
      orchestration.cli._finish_success
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._finish_success">
<span class="md-ellipsis">
      _finish_success
    </span>
</a>
<nav aria-label="_finish_success" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_get_bm25_index_path">
<span class="md-ellipsis">
      orchestration.cli._get_bm25_index_path
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._get_bm25_index_path">
<span class="md-ellipsis">
      _get_bm25_index_path
    </span>
</a>
<nav aria-label="_get_bm25_index_path" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_handle_failure">
<span class="md-ellipsis">
      orchestration.cli._handle_failure
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._handle_failure">
<span class="md-ellipsis">
      _handle_failure
    </span>
</a>
<nav aria-label="_handle_failure" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_instantiate_bm25_builder">
<span class="md-ellipsis">
      orchestration.cli._instantiate_bm25_builder
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._instantiate_bm25_builder">
<span class="md-ellipsis">
      _instantiate_bm25_builder
    </span>
</a>
<nav aria-label="_instantiate_bm25_builder" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_load_bm25_documents">
<span class="md-ellipsis">
      orchestration.cli._load_bm25_documents
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._load_bm25_documents">
<span class="md-ellipsis">
      _load_bm25_documents
    </span>
</a>
<nav aria-label="_load_bm25_documents" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_prepare_index_directory">
<span class="md-ellipsis">
      orchestration.cli._prepare_index_directory
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._prepare_index_directory">
<span class="md-ellipsis">
      _prepare_index_directory
    </span>
</a>
<nav aria-label="_prepare_index_directory" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_problem_type_for">
<span class="md-ellipsis">
      orchestration.cli._problem_type_for
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._problem_type_for">
<span class="md-ellipsis">
      _problem_type_for
    </span>
</a>
<nav aria-label="_problem_type_for" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_resolve_cli_help">
<span class="md-ellipsis">
      orchestration.cli._resolve_cli_help
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._resolve_cli_help">
<span class="md-ellipsis">
      _resolve_cli_help
    </span>
</a>
<nav aria-label="_resolve_cli_help" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_run_e2e_flow">
<span class="md-ellipsis">
      orchestration.cli._run_e2e_flow
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._run_e2e_flow">
<span class="md-ellipsis">
      _run_e2e_flow
    </span>
</a>
<nav aria-label="_run_e2e_flow" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_run_status_from_error">
<span class="md-ellipsis">
      orchestration.cli._run_status_from_error
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._run_status_from_error">
<span class="md-ellipsis">
      _run_status_from_error
    </span>
</a>
<nav aria-label="_run_status_from_error" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_start_command">
<span class="md-ellipsis">
      orchestration.cli._start_command
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._start_command">
<span class="md-ellipsis">
      _start_command
    </span>
</a>
<nav aria-label="_start_command" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_validate_vector_payload">
<span class="md-ellipsis">
      orchestration.cli._validate_vector_payload
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._validate_vector_payload">
<span class="md-ellipsis">
      _validate_vector_payload
    </span>
</a>
<nav aria-label="_validate_vector_payload" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_vector_batch_validator">
<span class="md-ellipsis">
      orchestration.cli._vector_batch_validator
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._vector_batch_validator">
<span class="md-ellipsis">
      _vector_batch_validator
    </span>
</a>
<nav aria-label="_vector_batch_validator" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcliapi">
<span class="md-ellipsis">
      orchestration.cli.api
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli.api">
<span class="md-ellipsis">
      api
    </span>
</a>
<nav aria-label="api" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationclie2e">
<span class="md-ellipsis">
      orchestration.cli.e2e
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli.e2e">
<span class="md-ellipsis">
      e2e
    </span>
</a>
<nav aria-label="e2e" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcliindex_bm25">
<span class="md-ellipsis">
      orchestration.cli.index_bm25
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli.index_bm25">
<span class="md-ellipsis">
      index_bm25
    </span>
</a>
<nav aria-label="index_bm25" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcliindex_faiss">
<span class="md-ellipsis">
      orchestration.cli.index_faiss
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli.index_faiss">
<span class="md-ellipsis">
      index_faiss
    </span>
</a>
<nav aria-label="index_faiss" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcliload_vector_batch_from_json">
<span class="md-ellipsis">
      orchestration.cli.load_vector_batch_from_json
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli.load_vector_batch_from_json">
<span class="md-ellipsis">
      load_vector_batch_from_json
    </span>
</a>
<nav aria-label="load_vector_batch_from_json" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationclirun_index_faiss">
<span class="md-ellipsis">
      orchestration.cli.run_index_faiss
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli.run_index_faiss">
<span class="md-ellipsis">
      run_index_faiss
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#related-api-operations">
<span class="md-ellipsis">
      Related API operations
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#relationships">
<span class="md-ellipsis">
      Relationships
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#autorefs-examples">
<span class="md-ellipsis">
      Autorefs Examples
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#inheritance">
<span class="md-ellipsis">
      Inheritance
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#neighborhood">
<span class="md-ellipsis">
      Neighborhood
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../cli_context/">
<span class="md-ellipsis">
    cli_context
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../config/">
<span class="md-ellipsis">
    config
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../fixture_flow/">
<span class="md-ellipsis">
    fixture_flow
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../flows/">
<span class="md-ellipsis">
    flows
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../safe_pickle/">
<span class="md-ellipsis">
    safe_pickle
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_12" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../registry/">
<span class="md-ellipsis">
    registry
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_12" id="__nav_4_12_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_12_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_12">
<span class="md-nav__icon md-icon"></span>
            registry
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../registry/api/">
<span class="md-ellipsis">
    api
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../registry/duckdb_helpers/">
<span class="md-ellipsis">
    duckdb_helpers
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../registry/duckdb_registry/">
<span class="md-ellipsis">
    duckdb_registry
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../registry/helper/">
<span class="md-ellipsis">
    helper
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../registry/migrate/">
<span class="md-ellipsis">
    migrate
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_13" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../search_api/">
<span class="md-ellipsis">
    search_api
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_13" id="__nav_4_13_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_13_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_13">
<span class="md-nav__icon md-icon"></span>
            search_api
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../search_api/app/">
<span class="md-ellipsis">
    app
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../search_api/bm25_index/">
<span class="md-ellipsis">
    bm25_index
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../search_api/faiss_adapter/">
<span class="md-ellipsis">
    faiss_adapter
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../search_api/faiss_gpu/">
<span class="md-ellipsis">
    faiss_gpu
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../search_api/fastapi_helpers/">
<span class="md-ellipsis">
    fastapi_helpers
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../search_api/fixture_index/">
<span class="md-ellipsis">
    fixture_index
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../search_api/fusion/">
<span class="md-ellipsis">
    fusion
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../search_api/kg_mock/">
<span class="md-ellipsis">
    kg_mock
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../search_api/schemas/">
<span class="md-ellipsis">
    schemas
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../search_api/service/">
<span class="md-ellipsis">
    service
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../search_api/splade_index/">
<span class="md-ellipsis">
    splade_index
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../search_api/types/">
<span class="md-ellipsis">
    types
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../search_api/vectorstore_factory/">
<span class="md-ellipsis">
    vectorstore_factory
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_14" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../search_client/">
<span class="md-ellipsis">
    search_client
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_14" id="__nav_4_14_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_14_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_14">
<span class="md-nav__icon md-icon"></span>
            search_client
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../search_client/client/">
<span class="md-ellipsis">
    client
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_15" type="checkbox">
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../vectorstore_faiss/">
<span class="md-ellipsis">
    vectorstore_faiss
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_15" id="__nav_4_15_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_15_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_15">
<span class="md-nav__icon md-icon"></span>
            vectorstore_faiss
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../vectorstore_faiss/gpu/">
<span class="md-ellipsis">
    gpu
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../diagrams/">
<span class="md-ellipsis">
    Diagrams
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../cli/">
<span class="md-ellipsis">
    CLI
    
  </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#hierarchy">
<span class="md-ellipsis">
      Hierarchy
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sections">
<span class="md-ellipsis">
      Sections
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#contents">
<span class="md-ellipsis">
      Contents
    </span>
</a>
<nav aria-label="Contents" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationclibm25buildconfig">
<span class="md-ellipsis">
      orchestration.cli.BM25BuildConfig
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli.BM25BuildConfig">
<span class="md-ellipsis">
      BM25BuildConfig
    </span>
</a>
<nav aria-label="BM25BuildConfig" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_bm25builder">
<span class="md-ellipsis">
      orchestration.cli._BM25Builder
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._BM25Builder">
<span class="md-ellipsis">
      _BM25Builder
    </span>
</a>
<nav aria-label="_BM25Builder" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._BM25Builder.build">
<span class="md-ellipsis">
      build
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_commandcontext">
<span class="md-ellipsis">
      orchestration.cli._CommandContext
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._CommandContext">
<span class="md-ellipsis">
      _CommandContext
    </span>
</a>
<nav aria-label="_CommandContext" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_uvicornrun">
<span class="md-ellipsis">
      orchestration.cli._UvicornRun
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._UvicornRun">
<span class="md-ellipsis">
      _UvicornRun
    </span>
</a>
<nav aria-label="_UvicornRun" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._UvicornRun.__call__">
<span class="md-ellipsis">
      __call__
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_build_bm25_index">
<span class="md-ellipsis">
      orchestration.cli._build_bm25_index
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._build_bm25_index">
<span class="md-ellipsis">
      _build_bm25_index
    </span>
</a>
<nav aria-label="_build_bm25_index" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_build_cli_problem">
<span class="md-ellipsis">
      orchestration.cli._build_cli_problem
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._build_cli_problem">
<span class="md-ellipsis">
      _build_cli_problem
    </span>
</a>
<nav aria-label="_build_cli_problem" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_coerce_extension_value">
<span class="md-ellipsis">
      orchestration.cli._coerce_extension_value
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._coerce_extension_value">
<span class="md-ellipsis">
      _coerce_extension_value
    </span>
</a>
<nav aria-label="_coerce_extension_value" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_emit_envelope">
<span class="md-ellipsis">
      orchestration.cli._emit_envelope
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._emit_envelope">
<span class="md-ellipsis">
      _emit_envelope
    </span>
</a>
<nav aria-label="_emit_envelope" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_envelope_path">
<span class="md-ellipsis">
      orchestration.cli._envelope_path
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._envelope_path">
<span class="md-ellipsis">
      _envelope_path
    </span>
</a>
<nav aria-label="_envelope_path" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_error_sort_key">
<span class="md-ellipsis">
      orchestration.cli._error_sort_key
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._error_sort_key">
<span class="md-ellipsis">
      _error_sort_key
    </span>
</a>
<nav aria-label="_error_sort_key" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_error_status_from_http">
<span class="md-ellipsis">
      orchestration.cli._error_status_from_http
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._error_status_from_http">
<span class="md-ellipsis">
      _error_status_from_http
    </span>
</a>
<nav aria-label="_error_status_from_http" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_extract_bm25_document">
<span class="md-ellipsis">
      orchestration.cli._extract_bm25_document
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._extract_bm25_document">
<span class="md-ellipsis">
      _extract_bm25_document
    </span>
</a>
<nav aria-label="_extract_bm25_document" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_finish_success">
<span class="md-ellipsis">
      orchestration.cli._finish_success
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._finish_success">
<span class="md-ellipsis">
      _finish_success
    </span>
</a>
<nav aria-label="_finish_success" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_get_bm25_index_path">
<span class="md-ellipsis">
      orchestration.cli._get_bm25_index_path
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._get_bm25_index_path">
<span class="md-ellipsis">
      _get_bm25_index_path
    </span>
</a>
<nav aria-label="_get_bm25_index_path" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_handle_failure">
<span class="md-ellipsis">
      orchestration.cli._handle_failure
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._handle_failure">
<span class="md-ellipsis">
      _handle_failure
    </span>
</a>
<nav aria-label="_handle_failure" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_instantiate_bm25_builder">
<span class="md-ellipsis">
      orchestration.cli._instantiate_bm25_builder
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._instantiate_bm25_builder">
<span class="md-ellipsis">
      _instantiate_bm25_builder
    </span>
</a>
<nav aria-label="_instantiate_bm25_builder" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_load_bm25_documents">
<span class="md-ellipsis">
      orchestration.cli._load_bm25_documents
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._load_bm25_documents">
<span class="md-ellipsis">
      _load_bm25_documents
    </span>
</a>
<nav aria-label="_load_bm25_documents" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_prepare_index_directory">
<span class="md-ellipsis">
      orchestration.cli._prepare_index_directory
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._prepare_index_directory">
<span class="md-ellipsis">
      _prepare_index_directory
    </span>
</a>
<nav aria-label="_prepare_index_directory" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_problem_type_for">
<span class="md-ellipsis">
      orchestration.cli._problem_type_for
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._problem_type_for">
<span class="md-ellipsis">
      _problem_type_for
    </span>
</a>
<nav aria-label="_problem_type_for" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_resolve_cli_help">
<span class="md-ellipsis">
      orchestration.cli._resolve_cli_help
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._resolve_cli_help">
<span class="md-ellipsis">
      _resolve_cli_help
    </span>
</a>
<nav aria-label="_resolve_cli_help" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_run_e2e_flow">
<span class="md-ellipsis">
      orchestration.cli._run_e2e_flow
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._run_e2e_flow">
<span class="md-ellipsis">
      _run_e2e_flow
    </span>
</a>
<nav aria-label="_run_e2e_flow" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_run_status_from_error">
<span class="md-ellipsis">
      orchestration.cli._run_status_from_error
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._run_status_from_error">
<span class="md-ellipsis">
      _run_status_from_error
    </span>
</a>
<nav aria-label="_run_status_from_error" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_start_command">
<span class="md-ellipsis">
      orchestration.cli._start_command
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._start_command">
<span class="md-ellipsis">
      _start_command
    </span>
</a>
<nav aria-label="_start_command" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_validate_vector_payload">
<span class="md-ellipsis">
      orchestration.cli._validate_vector_payload
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._validate_vector_payload">
<span class="md-ellipsis">
      _validate_vector_payload
    </span>
</a>
<nav aria-label="_validate_vector_payload" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcli_vector_batch_validator">
<span class="md-ellipsis">
      orchestration.cli._vector_batch_validator
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli._vector_batch_validator">
<span class="md-ellipsis">
      _vector_batch_validator
    </span>
</a>
<nav aria-label="_vector_batch_validator" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcliapi">
<span class="md-ellipsis">
      orchestration.cli.api
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli.api">
<span class="md-ellipsis">
      api
    </span>
</a>
<nav aria-label="api" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationclie2e">
<span class="md-ellipsis">
      orchestration.cli.e2e
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli.e2e">
<span class="md-ellipsis">
      e2e
    </span>
</a>
<nav aria-label="e2e" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcliindex_bm25">
<span class="md-ellipsis">
      orchestration.cli.index_bm25
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli.index_bm25">
<span class="md-ellipsis">
      index_bm25
    </span>
</a>
<nav aria-label="index_bm25" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcliindex_faiss">
<span class="md-ellipsis">
      orchestration.cli.index_faiss
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli.index_faiss">
<span class="md-ellipsis">
      index_faiss
    </span>
</a>
<nav aria-label="index_faiss" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationcliload_vector_batch_from_json">
<span class="md-ellipsis">
      orchestration.cli.load_vector_batch_from_json
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli.load_vector_batch_from_json">
<span class="md-ellipsis">
      load_vector_batch_from_json
    </span>
</a>
<nav aria-label="load_vector_batch_from_json" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestrationclirun_index_faiss">
<span class="md-ellipsis">
      orchestration.cli.run_index_faiss
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#orchestration.cli.run_index_faiss">
<span class="md-ellipsis">
      run_index_faiss
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#related-api-operations">
<span class="md-ellipsis">
      Related API operations
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#relationships">
<span class="md-ellipsis">
      Relationships
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#autorefs-examples">
<span class="md-ellipsis">
      Autorefs Examples
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#inheritance">
<span class="md-ellipsis">
      Inheritance
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#neighborhood">
<span class="md-ellipsis">
      Neighborhood
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="orchestrationcli">orchestration.cli<a class="headerlink" href="#orchestrationcli" title="Permanent link"></a></h1>
<p>Typer-powered orchestration command suite covering indexing flows, API bootstrapping,
and end-to-end demonstrations. Each command maps to a generated OpenAPI operation
consumed by the MkDocs suite.</p>
<p><a href="https://github.com/paul-heyse/kgfoundry/blob/main/src/orchestration/cli.py">View source on GitHub</a></p>
<h2 id="hierarchy">Hierarchy<a class="headerlink" href="#hierarchy" title="Permanent link"></a></h2>
<ul>
<li><strong>Parent:</strong> <a href="../">orchestration</a></li>
</ul>
<h2 id="sections">Sections<a class="headerlink" href="#sections" title="Permanent link"></a></h2>
<ul>
<li><strong>Public API</strong></li>
</ul>
<h2 id="contents">Contents<a class="headerlink" href="#contents" title="Permanent link"></a></h2>
<h3 id="orchestrationclibm25buildconfig">orchestration.cli.BM25BuildConfig<a class="headerlink" href="#orchestrationclibm25buildconfig" title="Permanent link"></a></h3>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="orchestration.cli.BM25BuildConfig">
<code>orchestration.cli.BM25BuildConfig</code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
</span>
<a class="headerlink" href="#orchestration.cli.BM25BuildConfig" title="Permanent link"></a></h2>
<div class="doc doc-contents first">
<p>Configuration for BM25 index builds.</p>
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">BM25BuildConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Configuration for BM25 index builds."""</span>

    <span class="n">chunks_path</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">backend</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">index_dir</span><span class="p">:</span> <span class="nb">str</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div><h3 id="orchestrationcli_bm25builder">orchestration.cli._BM25Builder<a class="headerlink" href="#orchestrationcli_bm25builder" title="Permanent link"></a></h3>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="orchestration.cli._BM25Builder">
<code>orchestration.cli._BM25Builder</code>
<a class="headerlink" href="#orchestration.cli._BM25Builder" title="Permanent link"></a></h2>
<div class="doc doc-contents first">
<p class="doc doc-class-bases">
              Bases: <code><span title="typing.Protocol">Protocol</span></code></p>
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">_BM25Builder</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">docs</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># pragma: no cover - provided by get_bm25</span>
<span class="w">        </span><span class="sd">"""Protocol describing lucene/pure BM25 builders."""</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="orchestration.cli._BM25Builder.build">
<code class="highlight language-python"><span class="n">build</span><span class="p">(</span><span class="n">docs</span><span class="p">)</span></code>
<a class="headerlink" href="#orchestration.cli._BM25Builder.build" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Protocol describing lucene/pure BM25 builders.</p>
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">docs</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># pragma: no cover - provided by get_bm25</span>
<span class="w">    </span><span class="sd">"""Protocol describing lucene/pure BM25 builders."""</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
</div>
</div>
</div><p><em>Bases:</em> Protocol</p>
<h3 id="orchestrationcli_commandcontext">orchestration.cli._CommandContext<a class="headerlink" href="#orchestrationcli_commandcontext" title="Permanent link"></a></h3>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="orchestration.cli._CommandContext">
<code>orchestration.cli._CommandContext</code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
</span>
<a class="headerlink" href="#orchestration.cli._CommandContext" title="Permanent link"></a></h2>
<div class="doc doc-contents first">
<p>Structured context shared across a single command invocation.</p>
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">slots</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">_CommandContext</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Structured context shared across a single command invocation."""</span>

    <span class="n">subcommand</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">operation_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">correlation_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">logger</span><span class="p">:</span> <span class="n">LoggerAdapter</span>
    <span class="n">start</span><span class="p">:</span> <span class="nb">float</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">extensions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extras</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">object</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">JsonValue</span><span class="p">]:</span>
        <span class="n">payload</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">JsonValue</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">"operation_id"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">operation_id</span><span class="p">,</span>
            <span class="s2">"correlation_id"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">correlation_id</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">extras</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">extras</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">payload</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="p">)]</span> <span class="o">=</span> <span class="n">_coerce_extension_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">payload</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div><h3 id="orchestrationcli_uvicornrun">orchestration.cli._UvicornRun<a class="headerlink" href="#orchestrationcli_uvicornrun" title="Permanent link"></a></h3>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="orchestration.cli._UvicornRun">
<code>orchestration.cli._UvicornRun</code>
<a class="headerlink" href="#orchestration.cli._UvicornRun" title="Permanent link"></a></h2>
<div class="doc doc-contents first">
<p class="doc doc-class-bases">
              Bases: <code><span title="typing.Protocol">Protocol</span></code></p>
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">_UvicornRun</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">host</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">port</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">reload</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># pragma: no cover - runtime contract</span>
<span class="w">        </span><span class="sd">"""Protocol describing the uvicorn ``run`` callable."""</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="orchestration.cli._UvicornRun.__call__">
<code class="highlight language-python"><span class="fm">__call__</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">reload</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>
<a class="headerlink" href="#orchestration.cli._UvicornRun.__call__" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Protocol describing the uvicorn <code>run</code> callable.</p>
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">host</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">port</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">reload</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># pragma: no cover - runtime contract</span>
<span class="w">    </span><span class="sd">"""Protocol describing the uvicorn ``run`` callable."""</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div>
</div>
</div>
</div><p><em>Bases:</em> Protocol</p>
<h3 id="orchestrationcli_build_bm25_index">orchestration.cli._build_bm25_index<a class="headerlink" href="#orchestrationcli_build_bm25_index" title="Permanent link"></a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="orchestration.cli._build_bm25_index">
<code class="highlight language-python"><span class="n">orchestration</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">_build_bm25_index</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">logger</span><span class="p">)</span></code>
<a class="headerlink" href="#orchestration.cli._build_bm25_index" title="Permanent link"></a></h2>
<div class="doc doc-contents first">
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_build_bm25_index</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="n">BM25BuildConfig</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">logger</span><span class="p">:</span> <span class="n">LoggerAdapter</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
    <span class="n">documents</span> <span class="o">=</span> <span class="n">_load_bm25_documents</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">chunks_path</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>
    <span class="n">builder</span><span class="p">,</span> <span class="n">backend_used</span> <span class="o">=</span> <span class="n">_instantiate_bm25_builder</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">builder</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">documents</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">backend_used</span> <span class="o">!=</span> <span class="s2">"lucene"</span><span class="p">:</span>
            <span class="k">raise</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">"Lucene build failed; retrying with pure backend"</span><span class="p">,</span>
            <span class="n">extra</span><span class="o">=</span><span class="p">{</span><span class="s2">"status"</span><span class="p">:</span> <span class="s2">"warning"</span><span class="p">,</span> <span class="s2">"backend"</span><span class="p">:</span> <span class="n">backend_used</span><span class="p">,</span> <span class="s2">"fallback_backend"</span><span class="p">:</span> <span class="s2">"pure"</span><span class="p">},</span>
            <span class="n">exc_info</span><span class="o">=</span><span class="n">exc</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">fallback_builder</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span>
            <span class="s2">"_BM25Builder"</span><span class="p">,</span> <span class="n">get_bm25</span><span class="p">(</span><span class="s2">"pure"</span><span class="p">,</span> <span class="n">config</span><span class="o">.</span><span class="n">index_dir</span><span class="p">,</span> <span class="n">k1</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">load_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">fallback_builder</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">documents</span><span class="p">)</span>
        <span class="n">backend_used</span> <span class="o">=</span> <span class="s2">"pure"</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">,</span> <span class="ne">KeyError</span><span class="p">)</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"Failed to build BM25 index: </span><span class="si">{</span><span class="n">exc</span><span class="si">}</span><span class="s2">"</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exc</span>
    <span class="k">return</span> <span class="n">backend_used</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">documents</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="orchestrationcli_build_cli_problem">orchestration.cli._build_cli_problem<a class="headerlink" href="#orchestrationcli_build_cli_problem" title="Permanent link"></a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="orchestration.cli._build_cli_problem">
<code class="highlight language-python"><span class="n">orchestration</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">_build_cli_problem</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">detail</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">extras</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overrides</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
<a class="headerlink" href="#orchestration.cli._build_cli_problem" title="Permanent link"></a></h2>
<div class="doc doc-contents first">
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_build_cli_problem</span><span class="p">(</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">_CommandContext</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">detail</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">status</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">extras</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">object</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">overrides</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ProblemDetailsDict</span><span class="p">:</span>
    <span class="n">override_title</span> <span class="o">=</span> <span class="n">overrides</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"title"</span><span class="p">)</span> <span class="k">if</span> <span class="n">overrides</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="n">override_type</span> <span class="o">=</span> <span class="n">overrides</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"type"</span><span class="p">)</span> <span class="k">if</span> <span class="n">overrides</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">build_problem_details</span><span class="p">(</span>
        <span class="n">ProblemDetailsParams</span><span class="p">(</span>
            <span class="nb">type</span><span class="o">=</span><span class="n">override_type</span> <span class="ow">or</span> <span class="n">_problem_type_for</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">subcommand</span><span class="p">),</span>
            <span class="n">title</span><span class="o">=</span><span class="n">override_title</span>
            <span class="ow">or</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">CLI_TITLE</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">context</span><span class="o">.</span><span class="n">subcommand</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'-'</span><span class="p">,</span><span class="w"> </span><span class="s1">' '</span><span class="p">)</span><span class="si">}</span><span class="s2"> command failed"</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
            <span class="n">detail</span><span class="o">=</span><span class="n">detail</span><span class="p">,</span>
            <span class="n">instance</span><span class="o">=</span><span class="sa">f</span><span class="s2">"urn:cli:</span><span class="si">{</span><span class="n">CLI_INTERFACE_ID</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">context</span><span class="o">.</span><span class="n">subcommand</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
            <span class="n">extensions</span><span class="o">=</span><span class="n">context</span><span class="o">.</span><span class="n">extensions</span><span class="p">(</span><span class="n">extras</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="orchestrationcli_coerce_extension_value">orchestration.cli._coerce_extension_value<a class="headerlink" href="#orchestrationcli_coerce_extension_value" title="Permanent link"></a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="orchestration.cli._coerce_extension_value">
<code class="highlight language-python"><span class="n">orchestration</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">_coerce_extension_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>
<a class="headerlink" href="#orchestration.cli._coerce_extension_value" title="Permanent link"></a></h2>
<div class="doc doc-contents first">
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_coerce_extension_value</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">JsonValue</span><span class="p">:</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">bool</span><span class="p">))</span> <span class="ow">or</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">value</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)):</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">_coerce_extension_value</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="p">):</span> <span class="n">_coerce_extension_value</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="orchestrationcli_emit_envelope">orchestration.cli._emit_envelope<a class="headerlink" href="#orchestrationcli_emit_envelope" title="Permanent link"></a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="orchestration.cli._emit_envelope">
<code class="highlight language-python"><span class="n">orchestration</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">_emit_envelope</span><span class="p">(</span><span class="n">envelope</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">subcommand</span><span class="p">,</span> <span class="n">logger</span><span class="p">)</span></code>
<a class="headerlink" href="#orchestration.cli._emit_envelope" title="Permanent link"></a></h2>
<div class="doc doc-contents first">
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_emit_envelope</span><span class="p">(</span><span class="n">envelope</span><span class="p">:</span> <span class="n">CliEnvelope</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">subcommand</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">logger</span><span class="p">:</span> <span class="n">LoggerAdapter</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">_envelope_path</span><span class="p">(</span><span class="n">subcommand</span><span class="p">)</span>
    <span class="n">CLI_ENVELOPE_DIR</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="n">render_cli_envelope</span><span class="p">(</span><span class="n">envelope</span><span class="p">)</span>
    <span class="n">path</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">payload</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">"utf-8"</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="s2">"CLI envelope written"</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="p">{</span><span class="s2">"status"</span><span class="p">:</span> <span class="n">envelope</span><span class="o">.</span><span class="n">status</span><span class="p">,</span> <span class="s2">"cli_envelope"</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">path</span><span class="p">)}</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">path</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="orchestrationcli_envelope_path">orchestration.cli._envelope_path<a class="headerlink" href="#orchestrationcli_envelope_path" title="Permanent link"></a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="orchestration.cli._envelope_path">
<code class="highlight language-python"><span class="n">orchestration</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">_envelope_path</span><span class="p">(</span><span class="n">subcommand</span><span class="p">)</span></code>
<a class="headerlink" href="#orchestration.cli._envelope_path" title="Permanent link"></a></h2>
<div class="doc doc-contents first">
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_envelope_path</span><span class="p">(</span><span class="n">subcommand</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
    <span class="n">safe_subcommand</span> <span class="o">=</span> <span class="n">subcommand</span> <span class="ow">or</span> <span class="s2">"root"</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">CLI_SETTINGS</span><span class="o">.</span><span class="n">bin_name</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">CLI_COMMAND</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">safe_subcommand</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span><span class="w"> </span><span class="s1">'-'</span><span class="p">)</span><span class="si">}</span><span class="s2">.json"</span>
    <span class="k">return</span> <span class="n">CLI_ENVELOPE_DIR</span> <span class="o">/</span> <span class="n">filename</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="orchestrationcli_error_sort_key">orchestration.cli._error_sort_key<a class="headerlink" href="#orchestrationcli_error_sort_key" title="Permanent link"></a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="orchestration.cli._error_sort_key">
<code class="highlight language-python"><span class="n">orchestration</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">_error_sort_key</span><span class="p">(</span><span class="n">error</span><span class="p">)</span></code>
<a class="headerlink" href="#orchestration.cli._error_sort_key" title="Permanent link"></a></h2>
<div class="doc doc-contents first">
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">394</span>
<span class="normal">395</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_error_sort_key</span><span class="p">(</span><span class="n">error</span><span class="p">:</span> <span class="n">ValidationErrorProtocol</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
    <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">part</span><span class="p">)</span> <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">error</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="orchestrationcli_error_status_from_http">orchestration.cli._error_status_from_http<a class="headerlink" href="#orchestrationcli_error_status_from_http" title="Permanent link"></a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="orchestration.cli._error_status_from_http">
<code class="highlight language-python"><span class="n">orchestration</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">_error_status_from_http</span><span class="p">(</span><span class="n">status</span><span class="p">)</span></code>
<a class="headerlink" href="#orchestration.cli._error_status_from_http" title="Permanent link"></a></h2>
<div class="doc doc-contents first">
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_error_status_from_http</span><span class="p">(</span><span class="n">status</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CliErrorStatus</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="n">STATUS_UNPROCESSABLE_ENTITY</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"CliErrorStatus"</span><span class="p">,</span> <span class="s2">"violation"</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span>
        <span class="n">status</span> <span class="ow">in</span> <span class="p">{</span><span class="n">STATUS_BAD_REQUEST</span><span class="p">,</span> <span class="n">STATUS_NOT_FOUND</span><span class="p">,</span> <span class="n">STATUS_CLIENT_CLOSED</span><span class="p">}</span>
        <span class="ow">or</span> <span class="n">STATUS_MIN_CLIENT_ERROR</span> <span class="o">&lt;=</span> <span class="n">status</span> <span class="o">&lt;=</span> <span class="n">STATUS_MAX_CLIENT_ERROR</span>
    <span class="p">):</span>
        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"CliErrorStatus"</span><span class="p">,</span> <span class="s2">"config"</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"CliErrorStatus"</span><span class="p">,</span> <span class="s2">"error"</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="orchestrationcli_extract_bm25_document">orchestration.cli._extract_bm25_document<a class="headerlink" href="#orchestrationcli_extract_bm25_document" title="Permanent link"></a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="orchestration.cli._extract_bm25_document">
<code class="highlight language-python"><span class="n">orchestration</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">_extract_bm25_document</span><span class="p">(</span><span class="n">record</span><span class="p">)</span></code>
<a class="headerlink" href="#orchestration.cli._extract_bm25_document" title="Permanent link"></a></h2>
<div class="doc doc-contents first">
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_extract_bm25_document</span><span class="p">(</span><span class="n">record</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">object</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">chunk_id</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"chunk_id"</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">chunk_id</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="n">title_raw</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"title"</span><span class="p">)</span>
    <span class="n">section_raw</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"section"</span><span class="p">)</span>
    <span class="n">text_raw</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"text"</span><span class="p">)</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">title_raw</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">title_raw</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="s2">""</span>
    <span class="n">section</span> <span class="o">=</span> <span class="n">section_raw</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">section_raw</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="s2">""</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">text_raw</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">text_raw</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="s2">""</span>
    <span class="k">return</span> <span class="n">chunk_id</span><span class="p">,</span> <span class="p">{</span><span class="s2">"title"</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span> <span class="s2">"section"</span><span class="p">:</span> <span class="n">section</span><span class="p">,</span> <span class="s2">"body"</span><span class="p">:</span> <span class="n">text</span><span class="p">}</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="orchestrationcli_finish_success">orchestration.cli._finish_success<a class="headerlink" href="#orchestrationcli_finish_success" title="Permanent link"></a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="orchestration.cli._finish_success">
<code class="highlight language-python"><span class="n">orchestration</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">_finish_success</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">builder</span><span class="p">)</span></code>
<a class="headerlink" href="#orchestration.cli._finish_success" title="Permanent link"></a></h2>
<div class="doc doc-contents first">
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_finish_success</span><span class="p">(</span><span class="n">context</span><span class="p">:</span> <span class="n">_CommandContext</span><span class="p">,</span> <span class="n">builder</span><span class="p">:</span> <span class="n">CliEnvelopeBuilder</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CliEnvelope</span><span class="p">:</span>
    <span class="n">envelope</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">finish</span><span class="p">(</span><span class="n">duration_seconds</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">monotonic</span><span class="p">()</span> <span class="o">-</span> <span class="n">context</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">_emit_envelope</span><span class="p">(</span><span class="n">envelope</span><span class="p">,</span> <span class="n">subcommand</span><span class="o">=</span><span class="n">context</span><span class="o">.</span><span class="n">subcommand</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">context</span><span class="o">.</span><span class="n">logger</span><span class="p">)</span>
    <span class="n">context</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="s2">"Command completed"</span><span class="p">,</span>
        <span class="n">extra</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"success"</span><span class="p">,</span>
            <span class="s2">"duration_seconds"</span><span class="p">:</span> <span class="n">envelope</span><span class="o">.</span><span class="n">duration_seconds</span><span class="p">,</span>
            <span class="s2">"cli_envelope"</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">path</span><span class="p">),</span>
        <span class="p">},</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">envelope</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="orchestrationcli_get_bm25_index_path">orchestration.cli._get_bm25_index_path<a class="headerlink" href="#orchestrationcli_get_bm25_index_path" title="Permanent link"></a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="orchestration.cli._get_bm25_index_path">
<code class="highlight language-python"><span class="n">orchestration</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">_get_bm25_index_path</span><span class="p">(</span><span class="n">index_dir</span><span class="p">,</span> <span class="n">backend</span><span class="p">)</span></code>
<a class="headerlink" href="#orchestration.cli._get_bm25_index_path" title="Permanent link"></a></h2>
<div class="doc doc-contents first">
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">326</span>
<span class="normal">327</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_get_bm25_index_path</span><span class="p">(</span><span class="n">index_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">backend</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">index_dir</span> <span class="o">/</span> <span class="s2">"pure_bm25.pkl"</span> <span class="k">if</span> <span class="n">backend</span> <span class="o">==</span> <span class="s2">"pure"</span> <span class="k">else</span> <span class="n">index_dir</span> <span class="o">/</span> <span class="s2">"bm25_index"</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="orchestrationcli_handle_failure">orchestration.cli._handle_failure<a class="headerlink" href="#orchestrationcli_handle_failure" title="Permanent link"></a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="orchestration.cli._handle_failure">
<code class="highlight language-python"><span class="n">orchestration</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">_handle_failure</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">detail</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span></code>
<a class="headerlink" href="#orchestration.cli._handle_failure" title="Permanent link"></a></h2>
<div class="doc doc-contents first">
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_handle_failure</span><span class="p">(</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">_CommandContext</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">detail</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">status</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">:</span> <span class="nb">object</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">error_status_option</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"CliErrorStatus | None"</span><span class="p">,</span> <span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"error_status"</span><span class="p">))</span>
    <span class="n">extras</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"Mapping[str, object] | None"</span><span class="p">,</span> <span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"extras"</span><span class="p">))</span>
    <span class="n">overrides</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"Mapping[str, str] | None"</span><span class="p">,</span> <span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"overrides"</span><span class="p">))</span>
    <span class="n">exc</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"BaseException | None"</span><span class="p">,</span> <span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"exc"</span><span class="p">))</span>

    <span class="n">cli_error_status</span><span class="p">:</span> <span class="n">CliErrorStatus</span> <span class="o">=</span> <span class="n">error_status_option</span> <span class="ow">or</span> <span class="n">_error_status_from_http</span><span class="p">(</span><span class="n">status</span><span class="p">)</span>
    <span class="n">cli_run_status</span><span class="p">:</span> <span class="n">CliStatus</span> <span class="o">=</span> <span class="n">_run_status_from_error</span><span class="p">(</span><span class="n">cli_error_status</span><span class="p">)</span>
    <span class="n">problem_payload</span> <span class="o">=</span> <span class="n">_build_cli_problem</span><span class="p">(</span>
        <span class="n">context</span><span class="p">,</span>
        <span class="n">detail</span><span class="o">=</span><span class="n">detail</span><span class="p">,</span>
        <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
        <span class="n">extras</span><span class="o">=</span><span class="n">extras</span><span class="p">,</span>
        <span class="n">overrides</span><span class="o">=</span><span class="n">overrides</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">builder</span> <span class="o">=</span> <span class="n">CliEnvelopeBuilder</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
        <span class="n">command</span><span class="o">=</span><span class="n">CLI_COMMAND</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">cli_run_status</span><span class="p">,</span> <span class="n">subcommand</span><span class="o">=</span><span class="n">context</span><span class="o">.</span><span class="n">subcommand</span>
    <span class="p">)</span>
    <span class="n">builder</span><span class="o">.</span><span class="n">add_error</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">cli_error_status</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">detail</span><span class="p">,</span> <span class="n">problem</span><span class="o">=</span><span class="n">problem_payload</span><span class="p">)</span>
    <span class="n">builder</span><span class="o">.</span><span class="n">set_problem</span><span class="p">(</span><span class="n">problem_payload</span><span class="p">)</span>
    <span class="n">envelope</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">finish</span><span class="p">(</span><span class="n">duration_seconds</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">monotonic</span><span class="p">()</span> <span class="o">-</span> <span class="n">context</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">_emit_envelope</span><span class="p">(</span><span class="n">envelope</span><span class="p">,</span> <span class="n">subcommand</span><span class="o">=</span><span class="n">context</span><span class="o">.</span><span class="n">subcommand</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">context</span><span class="o">.</span><span class="n">logger</span><span class="p">)</span>
    <span class="n">log_kwargs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">"extra"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"status"</span><span class="p">:</span> <span class="n">cli_run_status</span><span class="p">,</span>
            <span class="s2">"detail"</span><span class="p">:</span> <span class="n">detail</span><span class="p">,</span>
            <span class="s2">"duration_seconds"</span><span class="p">:</span> <span class="n">envelope</span><span class="o">.</span><span class="n">duration_seconds</span><span class="p">,</span>
            <span class="s2">"cli_envelope"</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">path</span><span class="p">),</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">context</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">"Command failed"</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="n">exc</span><span class="p">,</span> <span class="o">**</span><span class="n">log_kwargs</span><span class="p">)</span>
    <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">problem_payload</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">err</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="n">detail</span><span class="p">,</span> <span class="n">err</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="orchestrationcli_instantiate_bm25_builder">orchestration.cli._instantiate_bm25_builder<a class="headerlink" href="#orchestrationcli_instantiate_bm25_builder" title="Permanent link"></a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="orchestration.cli._instantiate_bm25_builder">
<code class="highlight language-python"><span class="n">orchestration</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">_instantiate_bm25_builder</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">logger</span><span class="p">)</span></code>
<a class="headerlink" href="#orchestration.cli._instantiate_bm25_builder" title="Permanent link"></a></h2>
<div class="doc doc-contents first">
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_instantiate_bm25_builder</span><span class="p">(</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">BM25BuildConfig</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">logger</span><span class="p">:</span> <span class="n">LoggerAdapter</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">_BM25Builder</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
    <span class="n">requested_backend</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">builder</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span>
            <span class="s2">"_BM25Builder"</span><span class="p">,</span>
            <span class="n">get_bm25</span><span class="p">(</span><span class="n">requested_backend</span><span class="p">,</span> <span class="n">config</span><span class="o">.</span><span class="n">index_dir</span><span class="p">,</span> <span class="n">k1</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">load_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">requested_backend</span> <span class="o">!=</span> <span class="s2">"lucene"</span><span class="p">:</span>
            <span class="k">raise</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">"Lucene backend unavailable; using pure backend"</span><span class="p">,</span>
            <span class="n">extra</span><span class="o">=</span><span class="p">{</span><span class="s2">"status"</span><span class="p">:</span> <span class="s2">"warning"</span><span class="p">,</span> <span class="s2">"backend"</span><span class="p">:</span> <span class="n">requested_backend</span><span class="p">,</span> <span class="s2">"fallback_backend"</span><span class="p">:</span> <span class="s2">"pure"</span><span class="p">},</span>
            <span class="n">exc_info</span><span class="o">=</span><span class="n">exc</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">fallback</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span>
            <span class="s2">"_BM25Builder"</span><span class="p">,</span> <span class="n">get_bm25</span><span class="p">(</span><span class="s2">"pure"</span><span class="p">,</span> <span class="n">config</span><span class="o">.</span><span class="n">index_dir</span><span class="p">,</span> <span class="n">k1</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">load_existing</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">fallback</span><span class="p">,</span> <span class="s2">"pure"</span>
    <span class="k">return</span> <span class="n">builder</span><span class="p">,</span> <span class="n">requested_backend</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="orchestrationcli_load_bm25_documents">orchestration.cli._load_bm25_documents<a class="headerlink" href="#orchestrationcli_load_bm25_documents" title="Permanent link"></a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="orchestration.cli._load_bm25_documents">
<code class="highlight language-python"><span class="n">orchestration</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">_load_bm25_documents</span><span class="p">(</span><span class="n">chunks_path</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">logger</span><span class="p">)</span></code>
<a class="headerlink" href="#orchestration.cli._load_bm25_documents" title="Permanent link"></a></h2>
<div class="doc doc-contents first">
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_load_bm25_documents</span><span class="p">(</span>
    <span class="n">chunks_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">logger</span><span class="p">:</span> <span class="n">LoggerAdapter</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]:</span>
    <span class="n">docs</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">chunks_path</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">chunks_path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">".jsonl"</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">"r"</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">"utf-8"</span><span class="p">)</span> <span class="k">as</span> <span class="n">handle</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">handle</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">payload</span><span class="p">:</span> <span class="nb">object</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
                <span class="k">except</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONDecodeError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                        <span class="s2">"Skipping invalid JSON line"</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="p">{</span><span class="s2">"status"</span><span class="p">:</span> <span class="s2">"warning"</span><span class="p">,</span> <span class="s2">"error"</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">exc</span><span class="p">)}</span>
                    <span class="p">)</span>
                    <span class="k">continue</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">document</span> <span class="o">:=</span> <span class="n">_extract_bm25_document</span><span class="p">(</span><span class="n">payload</span><span class="p">)):</span>
                    <span class="n">docs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">document</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">"r"</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">"utf-8"</span><span class="p">)</span> <span class="k">as</span> <span class="n">handle</span><span class="p">:</span>
            <span class="n">payload</span><span class="p">:</span> <span class="nb">object</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">"Chunk dataset must be a sequence of mapping objects"</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">docs</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
            <span class="n">document</span>
            <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">payload</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entry</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">document</span> <span class="o">:=</span> <span class="n">_extract_bm25_document</span><span class="p">(</span><span class="n">entry</span><span class="p">))</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">docs</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="orchestrationcli_prepare_index_directory">orchestration.cli._prepare_index_directory<a class="headerlink" href="#orchestrationcli_prepare_index_directory" title="Permanent link"></a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="orchestration.cli._prepare_index_directory">
<code class="highlight language-python"><span class="n">orchestration</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">_prepare_index_directory</span><span class="p">(</span><span class="n">index_path</span><span class="p">)</span></code>
<a class="headerlink" href="#orchestration.cli._prepare_index_directory" title="Permanent link"></a></h2>
<div class="doc doc-contents first">
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">428</span>
<span class="normal">429</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_prepare_index_directory</span><span class="p">(</span><span class="n">index_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">Path</span><span class="p">(</span><span class="n">index_path</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="orchestrationcli_problem_type_for">orchestration.cli._problem_type_for<a class="headerlink" href="#orchestrationcli_problem_type_for" title="Permanent link"></a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="orchestration.cli._problem_type_for">
<code class="highlight language-python"><span class="n">orchestration</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">_problem_type_for</span><span class="p">(</span><span class="n">subcommand</span><span class="p">)</span></code>
<a class="headerlink" href="#orchestration.cli._problem_type_for" title="Permanent link"></a></h2>
<div class="doc doc-contents first">
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_problem_type_for</span><span class="p">(</span><span class="n">subcommand</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="n">safe</span> <span class="o">=</span> <span class="n">subcommand</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">"/"</span><span class="p">,</span> <span class="s2">"-"</span><span class="p">)</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">CLI_PROBLEM_TYPE_BASE</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">safe</span><span class="si">}</span><span class="s2">"</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="orchestrationcli_resolve_cli_help">orchestration.cli._resolve_cli_help<a class="headerlink" href="#orchestrationcli_resolve_cli_help" title="Permanent link"></a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="orchestration.cli._resolve_cli_help">
<code class="highlight language-python"><span class="n">orchestration</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">_resolve_cli_help</span><span class="p">()</span></code>
<a class="headerlink" href="#orchestration.cli._resolve_cli_help" title="Permanent link"></a></h2>
<div class="doc doc-contents first">
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_resolve_cli_help</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">CLI_CONFIG</span><span class="o">.</span><span class="n">title</span> <span class="ow">or</span> <span class="n">CLI_TITLE</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">CLI_SETTINGS</span><span class="o">.</span><span class="n">version</span><span class="si">}</span><span class="s2">)"</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="orchestrationcli_run_e2e_flow">orchestration.cli._run_e2e_flow<a class="headerlink" href="#orchestrationcli_run_e2e_flow" title="Permanent link"></a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="orchestration.cli._run_e2e_flow">
<code class="highlight language-python"><span class="n">orchestration</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">_run_e2e_flow</span><span class="p">()</span></code>
<a class="headerlink" href="#orchestration.cli._run_e2e_flow" title="Permanent link"></a></h2>
<div class="doc doc-contents first">
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_run_e2e_flow</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="k">if</span> <span class="n">_e2e_flow</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">"Prefect is required for the e2e pipeline command. Install it via `pip install -e '.[gpu]'` or add `prefect` manually."</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_e2e_flow</span><span class="p">()</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="orchestrationcli_run_status_from_error">orchestration.cli._run_status_from_error<a class="headerlink" href="#orchestrationcli_run_status_from_error" title="Permanent link"></a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="orchestration.cli._run_status_from_error">
<code class="highlight language-python"><span class="n">orchestration</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">_run_status_from_error</span><span class="p">(</span><span class="n">error_status</span><span class="p">)</span></code>
<a class="headerlink" href="#orchestration.cli._run_status_from_error" title="Permanent link"></a></h2>
<div class="doc doc-contents first">
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">171</span>
<span class="normal">172</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_run_status_from_error</span><span class="p">(</span><span class="n">error_status</span><span class="p">:</span> <span class="n">CliErrorStatus</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CliStatus</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"CliStatus"</span><span class="p">,</span> <span class="n">error_status</span> <span class="k">if</span> <span class="n">error_status</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">"config"</span><span class="p">,</span> <span class="s2">"violation"</span><span class="p">}</span> <span class="k">else</span> <span class="s2">"error"</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="orchestrationcli_start_command">orchestration.cli._start_command<a class="headerlink" href="#orchestrationcli_start_command" title="Permanent link"></a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="orchestration.cli._start_command">
<code class="highlight language-python"><span class="n">orchestration</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">_start_command</span><span class="p">(</span><span class="n">subcommand</span><span class="p">,</span> <span class="o">**</span><span class="n">log_fields</span><span class="p">)</span></code>
<a class="headerlink" href="#orchestration.cli._start_command" title="Permanent link"></a></h2>
<div class="doc doc-contents first">
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_start_command</span><span class="p">(</span>
    <span class="n">subcommand</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">log_fields</span><span class="p">:</span> <span class="nb">object</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">_CommandContext</span><span class="p">,</span> <span class="n">CliEnvelopeBuilder</span><span class="p">]:</span>
    <span class="n">operation_id</span> <span class="o">=</span> <span class="n">CLI_OPERATION_IDS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">subcommand</span><span class="p">,</span> <span class="n">subcommand</span><span class="p">)</span>
    <span class="n">operation_alias</span> <span class="o">=</span> <span class="n">subcommand</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">"-"</span><span class="p">,</span> <span class="s2">"_"</span><span class="p">)</span>
    <span class="n">correlation_id</span> <span class="o">=</span> <span class="n">uuid4</span><span class="p">()</span><span class="o">.</span><span class="n">hex</span>
    <span class="n">filtered_fields</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">value</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">log_fields</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">}</span>
    <span class="n">logger</span> <span class="o">=</span> <span class="n">with_fields</span><span class="p">(</span>
        <span class="n">LOGGER</span><span class="p">,</span>
        <span class="n">correlation_id</span><span class="o">=</span><span class="n">correlation_id</span><span class="p">,</span>
        <span class="n">operation_id</span><span class="o">=</span><span class="n">operation_id</span><span class="p">,</span>
        <span class="n">operation</span><span class="o">=</span><span class="n">operation_alias</span><span class="p">,</span>
        <span class="n">command</span><span class="o">=</span><span class="n">CLI_COMMAND</span><span class="p">,</span>
        <span class="n">subcommand</span><span class="o">=</span><span class="n">subcommand</span><span class="p">,</span>
        <span class="o">**</span><span class="n">filtered_fields</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">"Command started"</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="p">{</span><span class="s2">"status"</span><span class="p">:</span> <span class="s2">"start"</span><span class="p">})</span>
    <span class="n">builder</span> <span class="o">=</span> <span class="n">CliEnvelopeBuilder</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
        <span class="n">command</span><span class="o">=</span><span class="n">CLI_COMMAND</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="s2">"success"</span><span class="p">,</span> <span class="n">subcommand</span><span class="o">=</span><span class="n">subcommand</span>
    <span class="p">)</span>
    <span class="n">context</span> <span class="o">=</span> <span class="n">_CommandContext</span><span class="p">(</span>
        <span class="n">subcommand</span><span class="o">=</span><span class="n">subcommand</span><span class="p">,</span>
        <span class="n">operation_id</span><span class="o">=</span><span class="n">operation_id</span><span class="p">,</span>
        <span class="n">correlation_id</span><span class="o">=</span><span class="n">correlation_id</span><span class="p">,</span>
        <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">,</span>
        <span class="n">start</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">monotonic</span><span class="p">(),</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">context</span><span class="p">,</span> <span class="n">builder</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="orchestrationcli_validate_vector_payload">orchestration.cli._validate_vector_payload<a class="headerlink" href="#orchestrationcli_validate_vector_payload" title="Permanent link"></a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="orchestration.cli._validate_vector_payload">
<code class="highlight language-python"><span class="n">orchestration</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">_validate_vector_payload</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span></code>
<a class="headerlink" href="#orchestration.cli._validate_vector_payload" title="Permanent link"></a></h2>
<div class="doc doc-contents first">
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_validate_vector_payload</span><span class="p">(</span><span class="n">payload</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">validator</span> <span class="o">=</span> <span class="n">_vector_batch_validator</span><span class="p">()</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">validator</span><span class="o">.</span><span class="n">iter_errors</span><span class="p">(</span><span class="n">payload</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="n">_error_sort_key</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="n">messages</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">error</span> <span class="ow">in</span> <span class="n">errors</span><span class="p">[:</span><span class="n">_VECTOR_SCHEMA_ERROR_LIMIT</span><span class="p">]:</span>
        <span class="n">location</span> <span class="o">=</span> <span class="s2">"/"</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">part</span><span class="p">)</span> <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">error</span><span class="o">.</span><span class="n">absolute_path</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">"&lt;root&gt;"</span>
        <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">location</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">error</span><span class="o">.</span><span class="n">message</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">_VECTOR_SCHEMA_ERROR_LIMIT</span><span class="p">:</span>
        <span class="n">remaining</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span> <span class="o">-</span> <span class="n">_VECTOR_SCHEMA_ERROR_LIMIT</span>
        <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"... </span><span class="si">{</span><span class="n">remaining</span><span class="si">}</span><span class="s2"> additional validation errors"</span><span class="p">)</span>
    <span class="k">raise</span> <span class="n">VectorValidationError</span><span class="p">(</span><span class="n">messages</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="n">messages</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="orchestrationcli_vector_batch_validator">orchestration.cli._vector_batch_validator<a class="headerlink" href="#orchestrationcli_vector_batch_validator" title="Permanent link"></a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="orchestration.cli._vector_batch_validator">
<code class="highlight language-python"><span class="n">orchestration</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">_vector_batch_validator</span><span class="p">()</span></code>
<a class="headerlink" href="#orchestration.cli._vector_batch_validator" title="Permanent link"></a></h2>
<div class="doc doc-contents first">
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_vector_batch_validator</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Draft202012ValidatorProtocol</span><span class="p">:</span>
    <span class="n">validator</span> <span class="o">=</span> <span class="n">_VECTOR_VALIDATOR_CACHE</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"validator"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">validator</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">schema</span> <span class="o">=</span> <span class="n">load_schema</span><span class="p">(</span><span class="n">_VECTOR_SCHEMA_PATH</span><span class="p">)</span>
        <span class="n">validator</span> <span class="o">=</span> <span class="n">create_draft202012_validator</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="s2">"dict[str, object]"</span><span class="p">,</span> <span class="n">schema</span><span class="p">))</span>
        <span class="n">_VECTOR_VALIDATOR_CACHE</span><span class="p">[</span><span class="s2">"validator"</span><span class="p">]</span> <span class="o">=</span> <span class="n">validator</span>
    <span class="k">return</span> <span class="n">validator</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="orchestrationcliapi">orchestration.cli.api<a class="headerlink" href="#orchestrationcliapi" title="Permanent link"></a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="orchestration.cli.api">
<code class="highlight language-python"><span class="n">orchestration</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">api</span><span class="p">(</span><span class="n">port</span><span class="o">=</span><span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="mi">8080</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">'Port to bind'</span><span class="p">,</span> <span class="n">show_default</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span></code>
<a class="headerlink" href="#orchestration.cli.api" title="Permanent link"></a></h2>
<div class="doc doc-contents first">
<p>Launch the FastAPI search service using uvicorn.</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>port</code>
</td>
<td>
<code><span title="int">int</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Port to bind the server to. Defaults to 8080.</p>
</div>
</td>
<td>
<code><span title="typer.Option">Option</span>(8080, help='Port to bind', show_default=True)</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Raises:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="typer.Exit">Exit</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Raised when the server cannot be started (missing uvicorn entrypoint or
missing dependency). Envelopes record the failure metadata for
downstream tooling.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">SUBCOMMAND_API</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">api</span><span class="p">(</span><span class="n">port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="mi">8080</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">"Port to bind"</span><span class="p">,</span> <span class="n">show_default</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Launch the FastAPI search service using uvicorn.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    port : int</span>
<span class="sd">        Port to bind the server to. Defaults to 8080.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    typer.Exit</span>
<span class="sd">        Raised when the server cannot be started (missing uvicorn entrypoint or</span>
<span class="sd">        missing dependency). Envelopes record the failure metadata for</span>
<span class="sd">        downstream tooling.</span>
<span class="sd">    """</span>
    <span class="n">context</span><span class="p">,</span> <span class="n">builder</span> <span class="o">=</span> <span class="n">_start_command</span><span class="p">(</span><span class="n">SUBCOMMAND_API</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">port</span><span class="p">)</span>
    <span class="n">builder</span><span class="o">.</span><span class="n">add_file</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s2">"&lt;api&gt;"</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="s2">"success"</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="sa">f</span><span class="s2">"Configured port </span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">uvicorn_module</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="s2">"uvicorn"</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ImportError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
        <span class="n">detail</span> <span class="o">=</span> <span class="s2">"uvicorn is required to run the API server"</span>
        <span class="n">_handle_failure</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="n">detail</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">STATUS_INTERNAL_ERROR</span><span class="p">,</span> <span class="n">exc</span><span class="o">=</span><span class="n">exc</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exc</span>

    <span class="n">run_attr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">uvicorn_module</span><span class="p">,</span> <span class="s2">"run"</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">run_attr</span><span class="p">):</span>
        <span class="n">detail</span> <span class="o">=</span> <span class="s2">"uvicorn.run entry point not available"</span>
        <span class="n">_handle_failure</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="n">detail</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">STATUS_INTERNAL_ERROR</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Starting FastAPI service on port </span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="n">run_server</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"_UvicornRun"</span><span class="p">,</span> <span class="n">run_attr</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">run_server</span><span class="p">(</span><span class="s2">"search_api.app:app"</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s2">"127.0.0.1"</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">port</span><span class="p">,</span> <span class="n">reload</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>  <span class="c1"># pragma: no cover - manual interruption</span>
        <span class="n">detail</span> <span class="o">=</span> <span class="s2">"API server interrupted by user"</span>
        <span class="n">_handle_failure</span><span class="p">(</span>
            <span class="n">context</span><span class="p">,</span>
            <span class="n">detail</span><span class="o">=</span><span class="n">detail</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">STATUS_CLIENT_CLOSED</span><span class="p">,</span>
            <span class="n">error_status</span><span class="o">=</span><span class="s2">"config"</span><span class="p">,</span>
            <span class="n">exc</span><span class="o">=</span><span class="n">exc</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">130</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exc</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">_finish_success</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">builder</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="orchestrationclie2e">orchestration.cli.e2e<a class="headerlink" href="#orchestrationclie2e" title="Permanent link"></a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="orchestration.cli.e2e">
<code class="highlight language-python"><span class="n">orchestration</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">e2e</span><span class="p">()</span></code>
<a class="headerlink" href="#orchestration.cli.e2e" title="Permanent link"></a></h2>
<div class="doc doc-contents first">
<p>Execute the Prefect-powered end-to-end orchestration pipeline.</p>
<p><span class="doc-section-title">Raises:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="typer.Exit">Exit</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Raised with a non-zero exit code when the pipeline cannot be executed
(for example, Prefect is not installed). The envelope captures the
associated Problem Details payload.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">SUBCOMMAND_E2E</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">e2e</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Execute the Prefect-powered end-to-end orchestration pipeline.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    typer.Exit</span>
<span class="sd">        Raised with a non-zero exit code when the pipeline cannot be executed</span>
<span class="sd">        (for example, Prefect is not installed). The envelope captures the</span>
<span class="sd">        associated Problem Details payload.</span>
<span class="sd">    """</span>
    <span class="n">context</span><span class="p">,</span> <span class="n">builder</span> <span class="o">=</span> <span class="n">_start_command</span><span class="p">(</span><span class="n">SUBCOMMAND_E2E</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">stages</span> <span class="o">=</span> <span class="n">_run_e2e_flow</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
        <span class="n">_handle_failure</span><span class="p">(</span>
            <span class="n">context</span><span class="p">,</span>
            <span class="n">detail</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">exc</span><span class="p">),</span>
            <span class="n">status</span><span class="o">=</span><span class="n">STATUS_INTERNAL_ERROR</span><span class="p">,</span>
            <span class="n">error_status</span><span class="o">=</span><span class="s2">"config"</span><span class="p">,</span>
            <span class="n">exc</span><span class="o">=</span><span class="n">exc</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exc</span>

    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">stage</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">stages</span><span class="p">):</span>
        <span class="n">builder</span><span class="o">.</span><span class="n">add_file</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="sa">f</span><span class="s2">"&lt;stage:</span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s2">&gt;"</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="s2">"success"</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">stage</span><span class="p">)</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="n">stage</span><span class="p">)</span>

    <span class="n">_finish_success</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">builder</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="orchestrationcliindex_bm25">orchestration.cli.index_bm25<a class="headerlink" href="#orchestrationcliindex_bm25" title="Permanent link"></a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="orchestration.cli.index_bm25">
<code class="highlight language-python"><span class="n">orchestration</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">index_bm25</span><span class="p">(</span><span class="n">chunks_parquet</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="s1">'lucene'</span><span class="p">,</span> <span class="n">index_dir</span><span class="o">=</span><span class="s1">'./_indices/bm25'</span><span class="p">)</span></code>
<a class="headerlink" href="#orchestration.cli.index_bm25" title="Permanent link"></a></h2>
<div class="doc doc-contents first">
<p>Build a BM25 index from chunk metadata and emit a CLI envelope.</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>chunks_parquet</code>
</td>
<td>
<code><span title="typing.Annotated">Annotated</span>[<span title="str">str</span>, <span title="typer.Argument">Argument</span>]</code>
</td>
<td>
<div class="doc-md-description">
<p>Path to Parquet/JSONL file with chunks.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>backend</code>
</td>
<td>
<code><span title="typing.Annotated">Annotated</span>[<span title="str">str</span>, <span title="typer.Option">Option</span>]</code>
</td>
<td>
<div class="doc-md-description">
<p>Backend to use: 'lucene' or 'pure'. Defaults to 'lucene'.</p>
</div>
</td>
<td>
<code>'lucene'</code>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>index_dir</code>
</td>
<td>
<code><span title="typing.Annotated">Annotated</span>[<span title="str">str</span>, <span title="typer.Option">Option</span>]</code>
</td>
<td>
<div class="doc-md-description">
<p>Output index directory. Defaults to './_indices/bm25'.</p>
</div>
</td>
<td>
<code>'./_indices/bm25'</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Raises:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="typer.Exit">Exit</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Raised with a non-zero exit code when index construction fails. The
generated envelope captures the associated Problem Details payload.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">SUBCOMMAND_INDEX_BM25</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">index_bm25</span><span class="p">(</span>
    <span class="n">chunks_parquet</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">Argument</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">"Path to Parquet/JSONL with chunks"</span><span class="p">),</span>
    <span class="p">],</span>
    <span class="n">backend</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="n">help</span><span class="o">=</span><span class="s2">"lucene|pure"</span><span class="p">,</span> <span class="n">show_default</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="s2">"lucene"</span><span class="p">,</span>
    <span class="n">index_dir</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="n">help</span><span class="o">=</span><span class="s2">"Output index directory"</span><span class="p">,</span> <span class="n">show_default</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="s2">"./_indices/bm25"</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Build a BM25 index from chunk metadata and emit a CLI envelope.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    chunks_parquet : Annotated[str, typer.Argument]</span>
<span class="sd">        Path to Parquet/JSONL file with chunks.</span>
<span class="sd">    backend : Annotated[str, typer.Option], optional</span>
<span class="sd">        Backend to use: 'lucene' or 'pure'. Defaults to 'lucene'.</span>
<span class="sd">    index_dir : Annotated[str, typer.Option], optional</span>
<span class="sd">        Output index directory. Defaults to './_indices/bm25'.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    typer.Exit</span>
<span class="sd">        Raised with a non-zero exit code when index construction fails. The</span>
<span class="sd">        generated envelope captures the associated Problem Details payload.</span>
<span class="sd">    """</span>
    <span class="n">context</span><span class="p">,</span> <span class="n">builder</span> <span class="o">=</span> <span class="n">_start_command</span><span class="p">(</span>
        <span class="n">SUBCOMMAND_INDEX_BM25</span><span class="p">,</span>
        <span class="n">backend</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span>
        <span class="n">chunks_path</span><span class="o">=</span><span class="n">chunks_parquet</span><span class="p">,</span>
        <span class="n">index_dir</span><span class="o">=</span><span class="n">index_dir</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">builder</span><span class="o">.</span><span class="n">add_file</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">chunks_parquet</span><span class="p">)),</span> <span class="n">status</span><span class="o">=</span><span class="s2">"success"</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">"Input dataset"</span><span class="p">)</span>

    <span class="n">config</span> <span class="o">=</span> <span class="n">BM25BuildConfig</span><span class="p">(</span><span class="n">chunks_path</span><span class="o">=</span><span class="n">chunks_parquet</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span> <span class="n">index_dir</span><span class="o">=</span><span class="n">index_dir</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">_prepare_index_directory</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">index_dir</span><span class="p">)</span>
        <span class="n">backend_used</span><span class="p">,</span> <span class="n">doc_count</span> <span class="o">=</span> <span class="n">_build_bm25_index</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">context</span><span class="o">.</span><span class="n">logger</span><span class="p">)</span>
        <span class="n">index_path</span> <span class="o">=</span> <span class="n">_get_bm25_index_path</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">index_dir</span><span class="p">),</span> <span class="n">backend_used</span><span class="p">)</span>
        <span class="n">builder</span><span class="o">.</span><span class="n">add_file</span><span class="p">(</span>
            <span class="n">path</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">index_path</span><span class="p">),</span>
            <span class="n">status</span><span class="o">=</span><span class="s2">"success"</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="sa">f</span><span class="s2">"Indexed </span><span class="si">{</span><span class="n">doc_count</span><span class="si">}</span><span class="s2"> documents using backend=</span><span class="si">{</span><span class="n">backend_used</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">"BM25 index built at </span><span class="si">{</span><span class="n">index_dir</span><span class="si">}</span><span class="s2"> using backend=</span><span class="si">{</span><span class="n">backend_used</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
        <span class="n">_finish_success</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">builder</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">FileNotFoundError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
        <span class="n">detail</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"Chunk dataset not found: </span><span class="si">{</span><span class="n">exc</span><span class="si">}</span><span class="s2">"</span>
        <span class="n">_handle_failure</span><span class="p">(</span>
            <span class="n">context</span><span class="p">,</span>
            <span class="n">detail</span><span class="o">=</span><span class="n">detail</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">STATUS_NOT_FOUND</span><span class="p">,</span>
            <span class="n">error_status</span><span class="o">=</span><span class="s2">"config"</span><span class="p">,</span>
            <span class="n">exc</span><span class="o">=</span><span class="n">exc</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exc</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONDecodeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
        <span class="n">detail</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"Error loading documents: </span><span class="si">{</span><span class="n">exc</span><span class="si">}</span><span class="s2">"</span>
        <span class="n">_handle_failure</span><span class="p">(</span>
            <span class="n">context</span><span class="p">,</span>
            <span class="n">detail</span><span class="o">=</span><span class="n">detail</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">STATUS_UNPROCESSABLE_ENTITY</span><span class="p">,</span>
            <span class="n">error_status</span><span class="o">=</span><span class="s2">"violation"</span><span class="p">,</span>
            <span class="n">exc</span><span class="o">=</span><span class="n">exc</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exc</span>
    <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
        <span class="n">detail</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>
        <span class="n">_handle_failure</span><span class="p">(</span>
            <span class="n">context</span><span class="p">,</span>
            <span class="n">detail</span><span class="o">=</span><span class="n">detail</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">STATUS_INTERNAL_ERROR</span><span class="p">,</span>
            <span class="n">exc</span><span class="o">=</span><span class="n">exc</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exc</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="orchestrationcliindex_faiss">orchestration.cli.index_faiss<a class="headerlink" href="#orchestrationcliindex_faiss" title="Permanent link"></a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="orchestration.cli.index_faiss">
<code class="highlight language-python"><span class="n">orchestration</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">index_faiss</span><span class="p">(</span><span class="n">dense_vectors</span><span class="p">,</span> <span class="n">index_path</span><span class="o">=</span><span class="s1">'./_indices/faiss/shard_000.idx'</span><span class="p">,</span> <span class="n">factory</span><span class="o">=</span><span class="s1">'Flat'</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">'ip'</span><span class="p">)</span></code>
<a class="headerlink" href="#orchestration.cli.index_faiss" title="Permanent link"></a></h2>
<div class="doc doc-contents first">
<p>Build a FAISS index and emit a structured CLI envelope.</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>dense_vectors</code>
</td>
<td>
<code><span title="typing.Annotated">Annotated</span>[<span title="str">str</span>, <span title="typer.Argument">Argument</span>]</code>
</td>
<td>
<div class="doc-md-description">
<p>Path to the dense vector payload (JSON skeleton format).</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>index_path</code>
</td>
<td>
<code><span title="typing.Annotated">Annotated</span>[<span title="str">str</span>, <span title="typer.Option">Option</span>]</code>
</td>
<td>
<div class="doc-md-description">
<p>Destination path for the serialized FAISS index. Defaults to './_indices/faiss/shard_000.idx'.</p>
</div>
</td>
<td>
<code>'./_indices/faiss/shard_000.idx'</code>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>factory</code>
</td>
<td>
<code><span title="typing.Annotated">Annotated</span>[<span title="str">str</span>, <span title="typer.Option">Option</span>]</code>
</td>
<td>
<div class="doc-md-description">
<p>FAISS factory string describing index topology. Defaults to 'Flat'.</p>
</div>
</td>
<td>
<code>'Flat'</code>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>metric</code>
</td>
<td>
<code><span title="typing.Annotated">Annotated</span>[<span title="str">str</span>, <span title="typer.Option">Option</span>]</code>
</td>
<td>
<div class="doc-md-description">
<p>Similarity metric identifier (<code>"ip"</code> or <code>"l2"</code>). Defaults to 'ip'.</p>
</div>
</td>
<td>
<code>'ip'</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Raises:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="typer.Exit">Exit</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Raised with a non-zero exit code when the command fails. The envelope
captures the associated Problem Details payload for downstream tooling.</p>
</div>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Examples:</span></p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">orchestration_cli</span> <span class="o">=</span> <span class="nb">__import__</span><span class="p">(</span><span class="s2">"orchestration.cli"</span><span class="p">)</span><span class="o">.</span><span class="n">cli</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">orchestration_cli</span><span class="o">.</span><span class="n">index_faiss</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">"vectors.json"</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s2">"./_indices/faiss/shard_000.idx"</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">factory</span><span class="o">=</span><span class="s2">"Flat"</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">metric</span><span class="o">=</span><span class="s2">"ip"</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
</code></pre></div>
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">SUBCOMMAND_INDEX_FAISS</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">index_faiss</span><span class="p">(</span>
    <span class="n">dense_vectors</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">Argument</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">"Path to dense vectors JSON (skeleton)"</span><span class="p">),</span>
    <span class="p">],</span>
    <span class="n">index_path</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="n">help</span><span class="o">=</span><span class="s2">"Output FAISS index path"</span><span class="p">,</span> <span class="n">show_default</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="s2">"./_indices/faiss/shard_000.idx"</span><span class="p">,</span>
    <span class="n">factory</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="n">help</span><span class="o">=</span><span class="s2">"FAISS factory string"</span><span class="p">,</span> <span class="n">show_default</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="s2">"Flat"</span><span class="p">,</span>
    <span class="n">metric</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="n">help</span><span class="o">=</span><span class="s2">"Similarity metric ('ip' or 'l2')"</span><span class="p">,</span> <span class="n">show_default</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="p">]</span> <span class="o">=</span> <span class="s2">"ip"</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Build a FAISS index and emit a structured CLI envelope.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dense_vectors : Annotated[str, typer.Argument]</span>
<span class="sd">        Path to the dense vector payload (JSON skeleton format).</span>
<span class="sd">    index_path : Annotated[str, typer.Option], optional</span>
<span class="sd">        Destination path for the serialized FAISS index. Defaults to './_indices/faiss/shard_000.idx'.</span>
<span class="sd">    factory : Annotated[str, typer.Option], optional</span>
<span class="sd">        FAISS factory string describing index topology. Defaults to 'Flat'.</span>
<span class="sd">    metric : Annotated[str, typer.Option], optional</span>
<span class="sd">        Similarity metric identifier (``"ip"`` or ``"l2"``). Defaults to 'ip'.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    typer.Exit</span>
<span class="sd">        Raised with a non-zero exit code when the command fails. The envelope</span>
<span class="sd">        captures the associated Problem Details payload for downstream tooling.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; orchestration_cli = __import__("orchestration.cli").cli</span>
<span class="sd">    &gt;&gt;&gt; orchestration_cli.index_faiss(  # doctest: +SKIP</span>
<span class="sd">    ...     "vectors.json",</span>
<span class="sd">    ...     "./_indices/faiss/shard_000.idx",</span>
<span class="sd">    ...     factory="Flat",</span>
<span class="sd">    ...     metric="ip",</span>
<span class="sd">    ... )</span>
<span class="sd">    """</span>
    <span class="n">context</span><span class="p">,</span> <span class="n">builder</span> <span class="o">=</span> <span class="n">_start_command</span><span class="p">(</span>
        <span class="n">SUBCOMMAND_INDEX_FAISS</span><span class="p">,</span>
        <span class="n">factory</span><span class="o">=</span><span class="n">factory</span><span class="p">,</span>
        <span class="n">metric</span><span class="o">=</span><span class="n">metric</span><span class="p">,</span>
        <span class="n">dense_vectors</span><span class="o">=</span><span class="n">dense_vectors</span><span class="p">,</span>
        <span class="n">index_path</span><span class="o">=</span><span class="n">index_path</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">builder</span><span class="o">.</span><span class="n">add_file</span><span class="p">(</span>
        <span class="n">path</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">dense_vectors</span><span class="p">)),</span> <span class="n">status</span><span class="o">=</span><span class="s2">"success"</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">"Dense vectors source"</span>
    <span class="p">)</span>

    <span class="n">config</span> <span class="o">=</span> <span class="n">IndexCliConfig</span><span class="p">(</span>
        <span class="n">dense_vectors</span><span class="o">=</span><span class="n">dense_vectors</span><span class="p">,</span> <span class="n">index_path</span><span class="o">=</span><span class="n">index_path</span><span class="p">,</span> <span class="n">factory</span><span class="o">=</span><span class="n">factory</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="n">metric</span>
    <span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="n">run_index_faiss</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
        <span class="n">context</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s2">"Building FAISS index"</span><span class="p">,</span>
            <span class="n">extra</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"success"</span><span class="p">,</span>
                <span class="s2">"vectors"</span><span class="p">:</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"vector_count"</span><span class="p">),</span>
                <span class="s2">"dimension"</span><span class="p">:</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"dimension"</span><span class="p">),</span>
            <span class="p">},</span>
        <span class="p">)</span>
        <span class="n">builder</span><span class="o">.</span><span class="n">add_file</span><span class="p">(</span>
            <span class="n">path</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">index_path</span><span class="p">)),</span>
            <span class="n">status</span><span class="o">=</span><span class="s2">"success"</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="sa">f</span><span class="s2">"Stored </span><span class="si">{</span><span class="n">metadata</span><span class="p">[</span><span class="s1">'vector_count'</span><span class="p">]</span><span class="si">}</span><span class="s2"> vectors (dimension=</span><span class="si">{</span><span class="n">metadata</span><span class="p">[</span><span class="s1">'dimension'</span><span class="p">]</span><span class="si">}</span><span class="s2">)"</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">builder</span><span class="o">.</span><span class="n">add_file</span><span class="p">(</span>
            <span class="n">path</span><span class="o">=</span><span class="s2">"&lt;configuration&gt;"</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="s2">"success"</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s2">"factory"</span><span class="p">:</span> <span class="n">factory</span><span class="p">,</span> <span class="s2">"metric"</span><span class="p">:</span> <span class="n">metric</span><span class="p">},</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">"FAISS index vectors stored at </span><span class="si">{</span><span class="n">index_path</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
        <span class="n">_finish_success</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">builder</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">VectorValidationError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
        <span class="n">detail</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>
        <span class="n">_handle_failure</span><span class="p">(</span>
            <span class="n">context</span><span class="p">,</span>
            <span class="n">detail</span><span class="o">=</span><span class="n">detail</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">STATUS_UNPROCESSABLE_ENTITY</span><span class="p">,</span>
            <span class="n">error_status</span><span class="o">=</span><span class="s2">"violation"</span><span class="p">,</span>
            <span class="n">extras</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">"vector_path"</span><span class="p">:</span> <span class="n">dense_vectors</span><span class="p">,</span>
                <span class="s2">"schema_id"</span><span class="p">:</span> <span class="n">_VECTOR_SCHEMA_ID</span><span class="p">,</span>
                <span class="s2">"validation_errors"</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="n">exc</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="s2">"errors"</span><span class="p">)</span> <span class="k">else</span> <span class="p">[],</span>
                <span class="s2">"errors"</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="n">exc</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="s2">"errors"</span><span class="p">)</span> <span class="k">else</span> <span class="p">[],</span>
            <span class="p">},</span>
            <span class="n">overrides</span><span class="o">=</span><span class="p">{</span><span class="s2">"type"</span><span class="p">:</span> <span class="n">_VECTOR_PROBLEM_TYPE</span><span class="p">},</span>
            <span class="n">exc</span><span class="o">=</span><span class="n">exc</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exc</span>
    <span class="k">except</span> <span class="n">ConfigurationError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
        <span class="n">detail</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>
        <span class="n">_handle_failure</span><span class="p">(</span>
            <span class="n">context</span><span class="p">,</span>
            <span class="n">detail</span><span class="o">=</span><span class="n">detail</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">STATUS_UNPROCESSABLE_ENTITY</span><span class="p">,</span>
            <span class="n">error_status</span><span class="o">=</span><span class="s2">"config"</span><span class="p">,</span>
            <span class="n">exc</span><span class="o">=</span><span class="n">exc</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exc</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONDecodeError</span><span class="p">,</span> <span class="ne">FileNotFoundError</span><span class="p">)</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
        <span class="n">detail</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"Error loading vectors: </span><span class="si">{</span><span class="n">exc</span><span class="si">}</span><span class="s2">"</span>
        <span class="n">_handle_failure</span><span class="p">(</span>
            <span class="n">context</span><span class="p">,</span>
            <span class="n">detail</span><span class="o">=</span><span class="n">detail</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">STATUS_BAD_REQUEST</span><span class="p">,</span>
            <span class="n">error_status</span><span class="o">=</span><span class="s2">"config"</span><span class="p">,</span>
            <span class="n">exc</span><span class="o">=</span><span class="n">exc</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exc</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">OSError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">,</span> <span class="ne">RuntimeError</span><span class="p">,</span> <span class="n">IndexBuildError</span><span class="p">)</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
        <span class="n">detail</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"Error saving index: </span><span class="si">{</span><span class="n">exc</span><span class="si">}</span><span class="s2">"</span>
        <span class="n">_handle_failure</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="n">detail</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">STATUS_INTERNAL_ERROR</span><span class="p">,</span> <span class="n">exc</span><span class="o">=</span><span class="n">exc</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exc</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="orchestrationcliload_vector_batch_from_json">orchestration.cli.load_vector_batch_from_json<a class="headerlink" href="#orchestrationcliload_vector_batch_from_json" title="Permanent link"></a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="orchestration.cli.load_vector_batch_from_json">
<code class="highlight language-python"><span class="n">orchestration</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">load_vector_batch_from_json</span><span class="p">(</span><span class="n">vectors_path</span><span class="p">)</span></code>
<a class="headerlink" href="#orchestration.cli.load_vector_batch_from_json" title="Permanent link"></a></h2>
<div class="doc doc-contents first">
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_vector_batch_from_json</span><span class="p">(</span><span class="n">vectors_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">VectorBatch</span><span class="p">:</span>
    <span class="n">vectors_file</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">vectors_path</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">vectors_file</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"Vectors file not found: </span><span class="si">{</span><span class="n">vectors_path</span><span class="si">}</span><span class="s2">"</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">vectors_file</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">"r"</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">"utf-8"</span><span class="p">)</span> <span class="k">as</span> <span class="n">handle</span><span class="p">:</span>
        <span class="n">payload</span><span class="p">:</span> <span class="nb">object</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">"Dense vectors payload must be a sequence of mapping objects"</span>
        <span class="k">raise</span> <span class="n">VectorValidationError</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="p">[</span><span class="n">msg</span><span class="p">])</span>
    <span class="n">_validate_vector_payload</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span>
    <span class="n">records</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"Iterable[Mapping[str, object]]"</span><span class="p">,</span> <span class="n">payload</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">coerce_vector_batch</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h3 id="orchestrationclirun_index_faiss">orchestration.cli.run_index_faiss<a class="headerlink" href="#orchestrationclirun_index_faiss" title="Permanent link"></a></h3>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="orchestration.cli.run_index_faiss">
<code class="highlight language-python"><span class="n">orchestration</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">run_index_faiss</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span></code>
<a class="headerlink" href="#orchestration.cli.run_index_faiss" title="Permanent link"></a></h2>
<div class="doc doc-contents first">
<p>Build a FAISS index using <code>config</code> and return build metadata.</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>config</code>
</td>
<td>
<code><a class="autorefs autorefs-internal" href="../config/#orchestration.config.IndexCliConfig" title="orchestration.config.IndexCliConfig


  
      dataclass
  ">IndexCliConfig</a></code>
</td>
<td>
<div class="doc-md-description">
<p>Structured configuration describing dense vector input, output index
path, FAISS factory string, and metric type.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="dict">dict</span>[<span title="str">str</span>, <span title="object">object</span>]</code>
</td>
<td>
<div class="doc-md-description">
<p>Summary metadata including <code>vector_count</code> and <code>dimension</code>.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="note" open="">
<summary>Notes</summary>
<p>Raises <code>typer.Exit</code> via the surrounding CLI wrapper when any underlying
helper fails. The wrapper also renders RFC 9457 Problem Details payloads for
downstream tooling.</p>
</details>
<p><span class="doc-section-title">Examples:</span></p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="n">IndexCliConfig</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">dense_vectors</span><span class="o">=</span><span class="s2">"vectors.json"</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">index_path</span><span class="o">=</span><span class="s2">"./_indices/faiss/shard_000.idx"</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">factory</span><span class="o">=</span><span class="s2">"Flat"</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">metric</span><span class="o">=</span><span class="s2">"ip"</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">run_index_faiss</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
<span class="go">{'vector_count': 0, 'dimension': 0}</span>
</code></pre></div>
<details class="quote">
<summary>Source code in <code>src/orchestration/cli.py</code></summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">run_index_faiss</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">IndexCliConfig</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">object</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">"""Build a FAISS index using ``config`` and return build metadata.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    config : IndexCliConfig</span>
<span class="sd">        Structured configuration describing dense vector input, output index</span>
<span class="sd">        path, FAISS factory string, and metric type.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    dict[str, object]</span>
<span class="sd">        Summary metadata including ``vector_count`` and ``dimension``.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Raises ``typer.Exit`` via the surrounding CLI wrapper when any underlying</span>
<span class="sd">    helper fails. The wrapper also renders RFC 9457 Problem Details payloads for</span>
<span class="sd">    downstream tooling.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; config = IndexCliConfig(</span>
<span class="sd">    ...     dense_vectors="vectors.json",</span>
<span class="sd">    ...     index_path="./_indices/faiss/shard_000.idx",</span>
<span class="sd">    ...     factory="Flat",</span>
<span class="sd">    ...     metric="ip",</span>
<span class="sd">    ... )</span>
<span class="sd">    &gt;&gt;&gt; run_index_faiss(config=config)</span>
<span class="sd">    {'vector_count': 0, 'dimension': 0}</span>
<span class="sd">    """</span>
    <span class="n">_prepare_index_directory</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">index_path</span><span class="p">)</span>
    <span class="n">batch</span> <span class="o">=</span> <span class="n">load_vector_batch_from_json</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">dense_vectors</span><span class="p">)</span>
    <span class="n">matrix_rows</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">"list[list[float]]"</span><span class="p">,</span> <span class="n">batch</span><span class="o">.</span><span class="n">matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
    <span class="n">vectors_payload</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">component</span><span class="p">)</span> <span class="k">for</span> <span class="n">component</span> <span class="ow">in</span> <span class="n">row</span><span class="p">]</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">matrix_rows</span>
    <span class="p">]</span>
    <span class="n">index_data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">object</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">"keys"</span><span class="p">:</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">vector_id</span><span class="p">)</span> <span class="k">for</span> <span class="n">vector_id</span> <span class="ow">in</span> <span class="n">batch</span><span class="o">.</span><span class="n">ids</span><span class="p">],</span>
        <span class="s2">"vectors"</span><span class="p">:</span> <span class="n">vectors_payload</span><span class="p">,</span>
        <span class="s2">"factory"</span><span class="p">:</span> <span class="n">config</span><span class="o">.</span><span class="n">factory</span><span class="p">,</span>
        <span class="s2">"metric"</span><span class="p">:</span> <span class="n">config</span><span class="o">.</span><span class="n">metric</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">with</span> <span class="n">Path</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">index_path</span><span class="p">)</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">"wb"</span><span class="p">)</span> <span class="k">as</span> <span class="n">handle</span><span class="p">:</span>
        <span class="n">safe_pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">index_data</span><span class="p">,</span> <span class="n">handle</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">"vector_count"</span><span class="p">:</span> <span class="n">batch</span><span class="o">.</span><span class="n">count</span><span class="p">,</span> <span class="s2">"dimension"</span><span class="p">:</span> <span class="n">batch</span><span class="o">.</span><span class="n">dimension</span><span class="p">}</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
</div>
</div><h2 id="related-api-operations">Related API operations<a class="headerlink" href="#related-api-operations" title="Permanent link"></a></h2>
<p><a href="../../../api/openapi-cli/#operation/cli.api"><code>cli.api</code></a> (orchestration-cli  CLI Spec), <a href="../../../api/openapi-cli/#operation/cli.e2e"><code>cli.e2e</code></a> (orchestration-cli  CLI Spec), <a href="../../../api/openapi-cli/#operation/cli.index_bm25"><code>cli.index_bm25</code></a> (orchestration-cli  CLI Spec), <a href="../../../api/openapi-cli/#operation/cli.index_faiss"><code>cli.index_faiss</code></a> (orchestration-cli  CLI Spec)</p>
<h2 id="relationships">Relationships<a class="headerlink" href="#relationships" title="Permanent link"></a></h2>
<p><strong>Imports:</strong> <code>__future__.annotations</code>, <code>collections.abc.Callable</code>, <code>collections.abc.Iterable</code>, <code>collections.abc.Mapping</code>, <code>collections.abc.Sequence</code>, <code>contextlib</code>, <code>dataclasses.dataclass</code>, <code>importlib</code>, <code>json</code>, <code>kgfoundry.embeddings_sparse.bm25.get_bm25</code>, <code>kgfoundry_common.errors.ConfigurationError</code>, <code>kgfoundry_common.errors.IndexBuildError</code>, <code>kgfoundry_common.jsonschema_utils.Draft202012ValidatorProtocol</code>, <code>kgfoundry_common.jsonschema_utils.ValidationErrorProtocol</code>, <code>kgfoundry_common.jsonschema_utils.create_draft202012_validator</code>, <code>kgfoundry_common.schema_helpers.load_schema</code>, <code>kgfoundry_common.vector_types.VectorBatch</code>, <code>kgfoundry_common.vector_types.VectorValidationError</code>, <code>kgfoundry_common.vector_types.coerce_vector_batch</code>, <a href="../cli_context/">orchestration.cli_context</a>, <code>orchestration.config.IndexCliConfig</code>, <code>orchestration.flows.e2e_flow</code>, <a href="../safe_pickle/">orchestration.safe_pickle</a>, <code>pathlib.Path</code>, <code>time</code>, <code>tools.CliEnvelope</code>, <code>tools.CliEnvelopeBuilder</code>, <code>tools.CliErrorStatus</code>, <code>tools.CliStatus</code>, <code>tools.JsonValue</code>, <code>tools.ProblemDetailsDict</code>, <code>tools.ProblemDetailsParams</code>, <code>tools._shared.logging.LoggerAdapter</code>, <code>tools.build_problem_details</code>, <code>tools.get_logger</code>, <code>tools.render_cli_envelope</code>, <code>tools.with_fields</code>, <code>typer</code>, <code>typing.Annotated</code>, <code>typing.Protocol</code>, <code>typing.TYPE_CHECKING</code>, <code>typing.cast</code>, <code>uuid.uuid4</code></p>
<h2 id="autorefs-examples">Autorefs Examples<a class="headerlink" href="#autorefs-examples" title="Permanent link"></a></h2>
<ul>
<li><a class="autorefs autorefs-internal" href="#orchestration.cli.BM25BuildConfig" title="orchestration.cli.BM25BuildConfig


  
      dataclass
  ">orchestration.cli.BM25BuildConfig</a></li>
<li><a class="autorefs autorefs-internal" href="#orchestration.cli._BM25Builder">orchestration.cli._BM25Builder</a></li>
<li><a class="autorefs autorefs-internal" href="#orchestration.cli._CommandContext" title="orchestration.cli._CommandContext


  
      dataclass
  ">orchestration.cli._CommandContext</a></li>
<li><a class="autorefs autorefs-internal" href="#orchestration.cli._build_bm25_index" title="orchestration.cli._build_bm25_index(config, *, logger)">orchestration.cli._build_bm25_index</a></li>
<li><a class="autorefs autorefs-internal" href="#orchestration.cli._build_cli_problem" title="orchestration.cli._build_cli_problem(context, *, detail, status, extras=None, overrides=None)">orchestration.cli._build_cli_problem</a></li>
<li><a class="autorefs autorefs-internal" href="#orchestration.cli._coerce_extension_value" title="orchestration.cli._coerce_extension_value(value)">orchestration.cli._coerce_extension_value</a></li>
</ul>
<h2 id="inheritance">Inheritance<a class="headerlink" href="#inheritance" title="Permanent link"></a></h2>
<div class="highlight"><pre><span></span><code>classDiagram
    class BM25BuildConfig
    class _BM25Builder
    class Protocol
    Protocol &lt;|-- _BM25Builder
    class _CommandContext
    class _UvicornRun
    Protocol &lt;|-- _UvicornRun
</code></pre></div>
<h2 id="neighborhood">Neighborhood<a class="headerlink" href="#neighborhood" title="Permanent link"></a></h2>
<div class="d2"><svg aria-label="Diagram" data-d2-version="v0.7.1" preserveAspectRatio="xMinYMin meet" role="img" viewBox="0 0 1241 5560" xmlns:ns0="http://www.w3.org/1999/xlink"><svg class="d2-89a5d85b9f67400aaef19caf544885c7 d2-svg" height="5560" viewBox="-101 -101 1241 5560" width="1241"><rect class="fill-N7" fill="#FFFFFF" height="5560.000000" rx="0.000000" stroke-width="0" width="1241.000000" x="-101.000000" y="-101.000000"></rect><style type="text/css">
.appendix-icon {
	filter: drop-shadow(0px 0px 32px rgba(31, 36, 58, 0.1));
}
.d2-89a5d85b9f67400aaef19caf544885c7 .text-bold {
	font-family: "d2-89a5d85b9f67400aaef19caf544885c7-font-bold";
}
@font-face {
	font-family: d2-89a5d85b9f67400aaef19caf544885c7-font-bold;
	src: url("data:application/font-woff;base64,d09GRgABAAAAABMkAAoAAAAAHLQAAguFAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAAA9AAAAGAAAABgXxHXrmNtYXAAAAFUAAAAswAAAPoFnQa0Z2x5ZgAAAggAAAwQAAAQhGoGPjVoZWFkAAAOGAAAADYAAAA2G38e1GhoZWEAAA5QAAAAJAAAACQKfwX5aG10eAAADnQAAADNAAAA6HKmCPFsb2NhAAAPRAAAAHYAAAB2gJp8LG1heHAAAA+8AAAAIAAAACAAUgD3bmFtZQAAD9wAAAMoAAAIKgjwVkFwb3N0AAATBAAAAB0AAAAg/9EAMgADAioCvAAFAAACigJYAAAASwKKAlgAAAFeADIBKQAAAgsHAwMEAwICBGAAAvcAAAADAAAAAAAAAABBREJPACAAIP//Au7/BgAAA9gBESAAAZ8AAAAAAfAClAAAACAAA3icdM05SsUAGIXRExONQ9TnPD3neR5jkc5C7CSgCFbiMtyWnSjqKlyGvSD8ggQ7b3vgfkikEhQyn2hrSRV27dlXqpy7VLt249adhwgaPVA5c6F21eh9hFwmj+/4ivd4i9d4ied4io94/O38vxNHTu38fR86luiQynTqkuvWo1efQr8Bg1qGDCuNGDVm3IRJU6bNaJs1Z96CRUuWrVi1Zt2GTVu2+QEAAP//AQAA//9QPCRAAHicbFd7bFvXff6dwyteiaIe5OXlJSm+r3gvSUmUyMtL6kGJelCULIvWy5bkWA/XcB27lm3VViYlkZcCzZItpec09Fw16ZLUaNAtSDYE3oCsmzqsqJMZ9YABSVZgaPPoAi/tsIbptC4P6XI4l6Qku/2DOsLFvb/Hd77v+50DFTAOgE/ga6CBKqgDI7AAksFj8EmiyNNxKR7nOU1cRAZ6HBuVl74nBqhAgAq6N1yPLC6izAK+trN0LHPixG8Xu7qU5//uB8oVdOkHALjwOQAewFmoAgMAQ0uiIIi8VqthJIYXefpu/TfqahpqKL318zuv3fmO/00/Gkkkwuel6Dnlj3B2Z+W55wAANJABwAmcBQPYwEtqkyJmM2vS0qy6aHmNFInJUYHnDVJEXTPvpZZ6W/yRgdTFocXBWDgSTU89nOiewllHOtk0VUfVHOwbOBxATwZ5wa3Mzjb5ABCEClu4DW9AA0CFVxDkaCwmRcwcLQi8V6tlTWYpEotzWjQ/+dTUkSuTyZOeQ9Y433ygaXrYn7QcmtSP/tm5pW9PSN4FzhFZ6D+53GidOw5YrX8UZ0FXRLZUvZYXpUiM1E0Kfv3kMxPjV4+32NunQqGpdjvOpq4uLz8ztOqfO3ToqA9IfRkA9DHOQrW6P6yHlVie9bAZtKF88e67qA5n17/+6PV1KPeSwhvg+n29lFqReVkyaLXo3NFvHpl5embolDtjbQ+OHp87ZhL0S7/2frXUUNSzYHYunzi5rNMtrylve0LFWvCRci0SK8mSgTfwhkzug2vXPsDZL77YWUH1Sr5cN7yPs6BR3zVkcmRzAUF9YQvdxFmoB+C8ghg3k6pkg2QwabW/GDnlPWlss/oDueZ5fVfXiMcd7kPfVzLJ0z2lmHgJZ0FfjCkxkobhNTSbyVE/unHrl999YRRnlf9F1cq2soaYk39dxu8XOAsVxW88bCaHMM7u5AlkpZiv4izBjEQ0mzkpFoszkoEn8MV5muZFkXdils1894zOqKN0Bt2DLz5BV2koeX5iPkpRlTTOKu/ae5zOHjvy7qx87B4bdz332WfPucbH3B+XcxAuMMUcnCQIMsFOI/JmM8tmvvVyL0XVZslSUYOzyj88Hf1a592dFTT4p7H1zv8EKPGpTe3ddA+feHaX/+8PP5ROrwxODK/1JlI4K86NjZ5o/TmaPC0Fi73yhS2swxsQVPlRxj4qiGII/w5ZOK6YAZl6H4sc5qf9oRap6YgnIXSdSbUvBw+6e0WhpSN4uCvdeV7fFvqyU/A6XA5jY21rujU2G20OzlsbXHan0+C1HB6MzbUDAisAZnAWaNIBL3tY3nDnJvr8Jq5fX9/JqzUWPgPAEs5CDYCk2bcfmh/e+s6hOq6OqrXUZq7/GGeVf5VPxWKnZNRGeFX4FACzOAt1AJKskbjSh3FJw27eer6z1lZD1dprup699RH63nXfoCAM+q4rcx+p2AYLW+httA1W4FVWytFYXIWBFlVQWANPPCxO5KN6wg9T44/nMB9w9TbKrWc7F0+t6SjXUKXVxxxKuPQzyUOzdR7Rwn7J0Xj+ovKhZOcvcsyMrslh4dR8fYUtbMabYCopVeRp3iCxtJpMBV0k+8J7idmhQc+Ag9JfylGOlDcx25pYnBVi080Bk1/vcct485VRm6Pnq6NHHk6upUefaPmJsVbd68bCFtpE22C73wv2rIDTapF18ELf8B+kQkP2Qd4tJ5NtlhDT6ZvWdz80ObXS7eQWHaN9vRm27ri7AdTaxcIW2sabwIC7jJUaWCSE3kWpTKLfzF3oWowG2q3a3JqOsqWxRTQyTSY+1qr/xsMTD/XYLaN/uTMQtvFrJutPjLUDQwcGAau1f4C2wXKfk6n+7yGsJbVrpCjJglxDF/sHlrqG5lsprPxUlw7LsbCw8OxNsdkb0/esTE6sJJNnU4yvKiZ5jtqcqDMgtxb1YAFAK/g2WQkf4/dpgFit4YH+/sbxAVe0vqHGpm9wHj2KLp+raJCno3rtUkWFR3BeUr5O5pW30IJptA2t0AUjKjKCHCVAEDLJ5RY4ieVLwvWK6j4Qepm0Wk1xmKmgMaXB5hXUV37TudA+xDS4LbZA54Lc7PnbMboqOht3uIzewPjcl1LrIw5RdDhEMRDpFX2S1aNv6H7L1t6c8FM1fldDpJ4yppoSY3792WqvqWOkUVdnZoxdA9JECN0OBsSA3x8IKrlGK1ev0VisdkcRmz6y2SpHVa+ny0IwqFXShr4cbT8YmTiQc7jtfgvefOWotensvHIHeWJ+K6e8BoUCxAHg5/gtLKj/0dAOTwEUCoV/KSTgPfV5R+l5djenE2/u+ntcohlepNm+q9Sfv/hXf//CchJvKudv3VF+9k9Dj5D3C1vIiDeJ5gkTyRApE/ufR7tyhqoKWmvU+/THDmJ+56ecEaFzFXQxj8aBtsGj5iE+QXb9ng7p3bWPaDsdlvsYz0h4/GDO4fa1kT+tKN/ramnye8PlttuU10pLGT+0XcKvlGM/fms6yp3ZBRDlk86We/Ar6kDlVN19p5M9iygxBpmTF1KpC8nk+VTqfLIlFGoJtbSUNNy9MjX5UPdqprdvlEi56D/D2Iy2gQEnALdXnUpLQeRYZs9+SJ2OA+IDpxOLMXfCVjEmxKabgib/6/gvwjb+Ty4dWUs2WMe+iRp3zYd4xDDaVuO7ASrkuBq2LC4pLhk0+z0CndFa+71Fo+ghTvfhrkm8/q1Ri0s1Coc7vDOLGvdcosQXdBVtg/GefSyqt4hww6jA2nWWGmu9vduE8jORcEXFYxQViCjvAwK2sIVeQNsg3nMWiQpCcR7uBiPT0IlZk/at8INCvzfp8jgdIZuzy3/mSMeMq98WtXV0CO7uwGm94JqzNnCMwczo9I0dgcFp0TJrMosWa2013xEamC9qy1DYQufxCnDqrsoyL8fjknqw2zNmmBtLjRoeWV3lHXqrjmPi+q9M3z6nffzxS28GfVrqrFZfjJUobKFPUZ7w7B4NGEp2/G8TB3JOt10w59aqNa4R/dl5FFXekwM2BxpW6gd9zYCI3lAB5Uszd9/ovPn9a706RkdVMbq+KzdQ/le+jChmfL9S6sv+ifMor+po/3f7IvCl8z9NX1t/pk2r01J0TVX8sfaqOpqiq+jWP159pYWuoSm6mm5G+bu+YUEY4e+q67DvrlL/Bp/2+9P8G2q+WgC0hfLkHCEx4r40NLeXp3bj6vPNOrOOqjRWejee/vbzbXpOT1WZqkSEfz3ONrFsEzte+GSSbWbZJvMkiasv9KAdlCcq2+NBPH4PFLV4zeyps9HGSp9fR//jtaFqo46qNFQlrrzCtY/9SEsto4pGhw39xzvetI8f4t9RqnuOBIsz01fYQv+Fn4Tqko6L3GJNRMPFu0DxqmFGlacuXz5FflY/x/mtFr/F4te/fOPGSy/duPHyRd/CzMyc1zs3M7Og3l3SAOjf8aOqX5LxK8dicWLW6adWo8PepdVVdOGYzm7a2V4tcsUJgD7ET4KdvN+Di/ZROuOo6icuL7G+icvpcMAbt4y3nkglF+SuuaglYf7a4czlMy2tYdE2FpEix7rlCxdimop1Etdc2ELv4SchcL+OeLlsUuWT1N4F7n8y5/iUI+1vbbePDE73+gVv3DnSfKLzxMNxKT7Ud1Yf8c/bG8VGe8B8ulXw+Jy2B4SmY1PhtJmqz/R0TTUVsWUA0Kf4UagiCmAkMm0JDRjZIzMEC5598YkKROlttRHlvz/6mwMHUOWDrgmnLdagnN/4MvpD5cryBumBK2yh9/Gj5MRxTw9q7YyH5eldlP7v0JLQ70j5w53tzXafo9+ITv+y2iPEj7X3fUUf9c3bfJFwW6TWGER966t1wZlU+mRUxb+7sAUfw6vk/sTtY8F1QZIEQZL0suiXZb8ok9mpvos+wSJEAFAKtGQFBE1wG3lQmNyr4rLENv329unTRQ6voI8Kb5LnnOxh9ehn2akpQFBTOI5i+A31OSNpam4fv/2i5tT2syX/hLdRvnxH68uhvFIPqPAq7oAp/Bap07CvTl8o5POFQrgjyPNB8iO2QWb5Oyj/e+9zja5AnU3H6Bxczp35caV2SUOJAfSJwsQeiMP/AwAA//8BAAD//19fgmMAAQAAAAILhcOJwElfDzz1AAED6AAAAADYXaCEAAAAAN1mLzb+N/7ECG0D8QABAAMAAgAAAAAAAAABAAAD2P7vAAAImP43/jcIbQABAAAAAAAAAAAAAAAAAAAAOnicHI2xLkNhHEfP/9ekIW75RF21dOCKRK+uJPoN/6WTfyLBYLB6CQlvYLfaLVbPYPIqBprI1/QOZzsnRx9cKZeF7gnNmeqRUEPoianeCDsl7J+kB0J9QgtCr4RuCLUcqmVfbfnToPxqixNl3L5plDlWn8ZuGanmQBe4DTmzunypwW2M9+5wzXBNOt9Xjb3g9smuPbOtc2baoOqtMZLY1DqVEkdKzJUYK1ErsaPEnrXkjksm9kNl1wxsiEN5Xz2XAAAA//8BAAD//6kXJO8AAAAAAAAsAFAAhACwANQA6gEaATABPAFaAXQBhAG2AdgB+gI6AkwCaAKGAr4C8AMcA04DggOoBBAEMgQ+BEoEYgR+BLAE0gT+BS4FYgWCBb4F5AYGBiIGWgaGBrYG4gb6ByYHZAeIB7oH0AfcB+gH9AgCCA4IJAhCAAAAAQAAADoAkAAMAGMABwABAAAAAAAAAAAAAAAAAAQAA3icnJTPbhtVFMZ/TmzTCsECRVW6ie6CRZHo2FRJ1TYrh9SKRRQHjwtCQkgTz/iPMp4ZeSYO4QlY8xa8RVc8BM+BWKP5fOzYBdEmipJ8d+75851zvnOBHf5mm0r1IfBHPTFcYa9+bniLB/UTw9u061uGqzyp/Wm4RlibG67zea1n+CPeVn8z/ID96k+GH7JbbRv+mGfVHcOfbDv+Mvwp+7xd4Aq84FfDFXbJDG+xw4+Gt3mExaxUeUTTcI3P2DNcZw/oM6EgZkLCCMeQCSOumBGR4xMxY8KQiBBHhxYxhb4mBEKO0X9+DfApmBEo4pgCR4xPTEDO2CL+Iq+Uc2Uc6jSzuxYFYwIu5HFJQIIjZURKQsSl4hQUZLyiQYOcgfhmFOR45EyI8UiZMaJBlzan9BkzIcfRVqSSmU/KkIJrAuV3ZlF2ZkBEQm6srkgIxdOJXyTvDqc4umSyXY98uhHhSxzfybvklsr2Kzz9ujVmm3mXbALm6mesrsS6udYEx7ot87b4VrjgFe5e/dlk8v4ehfpfKPIFV5p/qEklYpLg3C4tfCnId49xHOncwVdHvqdDnxO6vKGvc4sePVqc0afDa/l26eH4mi5nHMujI7y4a0sxZ/yA4xs6siljR9afxcQifiYzdefiOFMdUzL1vGTuqdZIFd59wuUOpRvqyOUz0B6Vlk7zS7RnASNTRSaGU/VyqY3c+heaIqaqpZzt7X25DXPbveUW35Bqh0u1LjiVk1swet9UvXc0c60fj4CQlAtZDEiZ0qDgRrzPCbgixnGs7p1oSwpaK58yz41UEjEVgw6J4szI9Dcw3fjGfbChe2dvSSj/kunlqqr7ZHHq1e2M3qh7yzvfuhytTaBhU03X1DQQ18S0H2mn1vn78s31uqU85YiUmPBfL8AzPJrsc8AhY2UY6GZur0NTL0STlxyq+ksiWQ2l58giHODxnAMOeMnzd/q4ZOKMi1txWc/d4pgjuhx+UBUL+y5HvF59+/+sv4tpU7U4nq5OL+49xSd3UOsX2rPb97KniZWTmFu02604I2BacnG76zW5x3j/AAAA//8BAAD///S3T1F4nGJgZgCD/+cYjBiwAAAAAAD//wEAAP//LwECAwAAAA==");
}</style><style type="text/css">.shape {
  shape-rendering: geometricPrecision;
  stroke-linejoin: round;
}
.connection {
  stroke-linecap: round;
  stroke-linejoin: round;
}
.blend {
  mix-blend-mode: multiply;
  opacity: 0.5;
}

		.d2-89a5d85b9f67400aaef19caf544885c7 .fill-N1{fill:#0A0F25;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .fill-N2{fill:#676C7E;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .fill-N3{fill:#9499AB;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .fill-N4{fill:#CFD2DD;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .fill-N5{fill:#DEE1EB;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .fill-N6{fill:#EEF1F8;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .fill-N7{fill:#FFFFFF;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .fill-B1{fill:#0D32B2;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .fill-B2{fill:#0D32B2;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .fill-B3{fill:#E3E9FD;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .fill-B4{fill:#E3E9FD;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .fill-B5{fill:#EDF0FD;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .fill-B6{fill:#F7F8FE;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .fill-AA2{fill:#4A6FF3;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .fill-AA4{fill:#EDF0FD;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .fill-AA5{fill:#F7F8FE;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .fill-AB4{fill:#EDF0FD;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .fill-AB5{fill:#F7F8FE;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .stroke-N1{stroke:#0A0F25;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .stroke-N2{stroke:#676C7E;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .stroke-N3{stroke:#9499AB;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .stroke-N4{stroke:#CFD2DD;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .stroke-N5{stroke:#DEE1EB;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .stroke-N6{stroke:#EEF1F8;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .stroke-N7{stroke:#FFFFFF;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .stroke-B1{stroke:#0D32B2;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .stroke-B2{stroke:#0D32B2;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .stroke-B3{stroke:#E3E9FD;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .stroke-B4{stroke:#E3E9FD;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .stroke-B5{stroke:#EDF0FD;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .stroke-B6{stroke:#F7F8FE;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .stroke-AA2{stroke:#4A6FF3;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .stroke-AA4{stroke:#EDF0FD;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .stroke-AA5{stroke:#F7F8FE;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .stroke-AB4{stroke:#EDF0FD;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .stroke-AB5{stroke:#F7F8FE;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .background-color-N1{background-color:#0A0F25;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .background-color-N2{background-color:#676C7E;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .background-color-N3{background-color:#9499AB;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .background-color-N4{background-color:#CFD2DD;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .background-color-N5{background-color:#DEE1EB;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .background-color-N6{background-color:#EEF1F8;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .background-color-N7{background-color:#FFFFFF;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .background-color-B1{background-color:#0D32B2;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .background-color-B2{background-color:#0D32B2;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .background-color-B3{background-color:#E3E9FD;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .background-color-B4{background-color:#E3E9FD;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .background-color-B5{background-color:#EDF0FD;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .background-color-B6{background-color:#F7F8FE;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .background-color-AA2{background-color:#4A6FF3;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .background-color-AA4{background-color:#EDF0FD;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .background-color-AA5{background-color:#F7F8FE;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .background-color-AB4{background-color:#EDF0FD;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .background-color-AB5{background-color:#F7F8FE;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .color-N1{color:#0A0F25;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .color-N2{color:#676C7E;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .color-N3{color:#9499AB;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .color-N4{color:#CFD2DD;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .color-N5{color:#DEE1EB;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .color-N6{color:#EEF1F8;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .color-N7{color:#FFFFFF;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .color-B1{color:#0D32B2;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .color-B2{color:#0D32B2;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .color-B3{color:#E3E9FD;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .color-B4{color:#E3E9FD;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .color-B5{color:#EDF0FD;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .color-B6{color:#F7F8FE;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .color-AA2{color:#4A6FF3;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .color-AA4{color:#EDF0FD;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .color-AA5{color:#F7F8FE;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .color-AB4{color:#EDF0FD;}
		.d2-89a5d85b9f67400aaef19caf544885c7 .color-AB5{color:#F7F8FE;}.appendix text.text{fill:#0A0F25}.md{--color-fg-default:#0A0F25;--color-fg-muted:#676C7E;--color-fg-subtle:#9499AB;--color-canvas-default:#FFFFFF;--color-canvas-subtle:#EEF1F8;--color-border-default:#0D32B2;--color-border-muted:#0D32B2;--color-neutral-muted:#EEF1F8;--color-accent-fg:#0D32B2;--color-accent-emphasis:#0D32B2;--color-attention-subtle:#676C7E;--color-danger-fg:red;}.sketch-overlay-B1{fill:url(#streaks-darker-d2-89a5d85b9f67400aaef19caf544885c7);mix-blend-mode:lighten}.sketch-overlay-B2{fill:url(#streaks-darker-d2-89a5d85b9f67400aaef19caf544885c7);mix-blend-mode:lighten}.sketch-overlay-B3{fill:url(#streaks-bright-d2-89a5d85b9f67400aaef19caf544885c7);mix-blend-mode:darken}.sketch-overlay-B4{fill:url(#streaks-bright-d2-89a5d85b9f67400aaef19caf544885c7);mix-blend-mode:darken}.sketch-overlay-B5{fill:url(#streaks-bright-d2-89a5d85b9f67400aaef19caf544885c7);mix-blend-mode:darken}.sketch-overlay-B6{fill:url(#streaks-bright-d2-89a5d85b9f67400aaef19caf544885c7);mix-blend-mode:darken}.sketch-overlay-AA2{fill:url(#streaks-dark-d2-89a5d85b9f67400aaef19caf544885c7);mix-blend-mode:overlay}.sketch-overlay-AA4{fill:url(#streaks-bright-d2-89a5d85b9f67400aaef19caf544885c7);mix-blend-mode:darken}.sketch-overlay-AA5{fill:url(#streaks-bright-d2-89a5d85b9f67400aaef19caf544885c7);mix-blend-mode:darken}.sketch-overlay-AB4{fill:url(#streaks-bright-d2-89a5d85b9f67400aaef19caf544885c7);mix-blend-mode:darken}.sketch-overlay-AB5{fill:url(#streaks-bright-d2-89a5d85b9f67400aaef19caf544885c7);mix-blend-mode:darken}.sketch-overlay-N1{fill:url(#streaks-darker-d2-89a5d85b9f67400aaef19caf544885c7);mix-blend-mode:lighten}.sketch-overlay-N2{fill:url(#streaks-dark-d2-89a5d85b9f67400aaef19caf544885c7);mix-blend-mode:overlay}.sketch-overlay-N3{fill:url(#streaks-normal-d2-89a5d85b9f67400aaef19caf544885c7);mix-blend-mode:color-burn}.sketch-overlay-N4{fill:url(#streaks-normal-d2-89a5d85b9f67400aaef19caf544885c7);mix-blend-mode:color-burn}.sketch-overlay-N5{fill:url(#streaks-bright-d2-89a5d85b9f67400aaef19caf544885c7);mix-blend-mode:darken}.sketch-overlay-N6{fill:url(#streaks-bright-d2-89a5d85b9f67400aaef19caf544885c7);mix-blend-mode:darken}.sketch-overlay-N7{fill:url(#streaks-bright-d2-89a5d85b9f67400aaef19caf544885c7);mix-blend-mode:darken}.light-code{display: block}.dark-code{display: none}</style><a href="https://github.com/paul-heyse/kgfoundry/blob/main/src/orchestration/cli.py" ns0:href="https://github.com/paul-heyse/kgfoundry/blob/main/src/orchestration/cli.py"><g class="JiMzNDtvcmNoZXN0cmF0aW9uLmNsaSYjMzQ7"><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="163.000000" x="242.000000" y="2646.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="323.500000" y="2684.500000">orchestration.cli</text></g></a><g class="JiMzNDtfX2Z1dHVyZV9fLmFubm90YXRpb25zJiMzNDs="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="212.000000" x="666.000000" y="0.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.000000" y="38.500000">__future__.annotations</text></g><g class="JiMzNDtjb2xsZWN0aW9ucy5hYmMuQ2FsbGFibGUmIzM0Ow=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="214.000000" x="665.000000" y="126.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.000000" y="164.500000">collections.abc.Callable</text></g><g class="JiMzNDtjb2xsZWN0aW9ucy5hYmMuSXRlcmFibGUmIzM0Ow=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="213.000000" x="666.000000" y="252.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.500000" y="290.500000">collections.abc.Iterable</text></g><g class="JiMzNDtjb2xsZWN0aW9ucy5hYmMuTWFwcGluZyYjMzQ7"><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="219.000000" x="663.000000" y="378.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.500000" y="416.500000">collections.abc.Mapping</text></g><g class="JiMzNDtjb2xsZWN0aW9ucy5hYmMuU2VxdWVuY2UmIzM0Ow=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="225.000000" x="660.000000" y="504.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.500000" y="542.500000">collections.abc.Sequence</text></g><g class="Y29udGV4dGxpYg=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="118.000000" x="713.000000" y="630.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.000000" y="668.500000">contextlib</text></g><g class="JiMzNDtkYXRhY2xhc3Nlcy5kYXRhY2xhc3MmIzM0Ow=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="199.000000" x="673.000000" y="756.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.500000" y="794.500000">dataclasses.dataclass</text></g><g class="aW1wb3J0bGli"><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="112.000000" x="716.000000" y="882.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.000000" y="920.500000">importlib</text></g><g class="anNvbg=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="76.000000" x="734.000000" y="1008.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.000000" y="1046.500000">json</text></g><g class="JiMzNDtrZ2ZvdW5kcnkuZW1iZWRkaW5nc19zcGFyc2UuYm0yNS5nZXRfYm0yNSYjMzQ7"><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="384.000000" x="580.000000" y="1134.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.000000" y="1172.500000">kgfoundry.embeddings_sparse.bm25.get_bm25</text></g><g class="JiMzNDtrZ2ZvdW5kcnlfY29tbW9uLmVycm9ycy5Db25maWd1cmF0aW9uRXJyb3ImIzM0Ow=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="377.000000" x="584.000000" y="1260.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.500000" y="1298.500000">kgfoundry_common.errors.ConfigurationError</text></g><g class="JiMzNDtrZ2ZvdW5kcnlfY29tbW9uLmVycm9ycy5JbmRleEJ1aWxkRXJyb3ImIzM0Ow=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="355.000000" x="595.000000" y="1386.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.500000" y="1424.500000">kgfoundry_common.errors.IndexBuildError</text></g><g class="JiMzNDtrZ2ZvdW5kcnlfY29tbW9uLmpzb25zY2hlbWFfdXRpbHMuRHJhZnQyMDIwMTJWYWxpZGF0b3JQcm90b2NvbCYjMzQ7"><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="534.000000" x="505.000000" y="1512.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.000000" y="1550.500000">kgfoundry_common.jsonschema_utils.Draft202012ValidatorProtocol</text></g><g class="JiMzNDtrZ2ZvdW5kcnlfY29tbW9uLmpzb25zY2hlbWFfdXRpbHMuVmFsaWRhdGlvbkVycm9yUHJvdG9jb2wmIzM0Ow=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="491.000000" x="527.000000" y="1638.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.500000" y="1676.500000">kgfoundry_common.jsonschema_utils.ValidationErrorProtocol</text></g><g class="JiMzNDtrZ2ZvdW5kcnlfY29tbW9uLmpzb25zY2hlbWFfdXRpbHMuY3JlYXRlX2RyYWZ0MjAyMDEyX3ZhbGlkYXRvciYjMzQ7"><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="533.000000" x="506.000000" y="1764.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.500000" y="1802.500000">kgfoundry_common.jsonschema_utils.create_draft202012_validator</text></g><g class="JiMzNDtrZ2ZvdW5kcnlfY29tbW9uLnNjaGVtYV9oZWxwZXJzLmxvYWRfc2NoZW1hJiMzNDs="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="406.000000" x="569.000000" y="1890.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.000000" y="1928.500000">kgfoundry_common.schema_helpers.load_schema</text></g><g class="JiMzNDtrZ2ZvdW5kcnlfY29tbW9uLnZlY3Rvcl90eXBlcy5WZWN0b3JCYXRjaCYjMzQ7"><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="377.000000" x="584.000000" y="2016.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.500000" y="2054.500000">kgfoundry_common.vector_types.VectorBatch</text></g><g class="JiMzNDtrZ2ZvdW5kcnlfY29tbW9uLnZlY3Rvcl90eXBlcy5WZWN0b3JWYWxpZGF0aW9uRXJyb3ImIzM0Ow=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="446.000000" x="549.000000" y="2142.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.000000" y="2180.500000">kgfoundry_common.vector_types.VectorValidationError</text></g><g class="JiMzNDtrZ2ZvdW5kcnlfY29tbW9uLnZlY3Rvcl90eXBlcy5jb2VyY2VfdmVjdG9yX2JhdGNoJiMzNDs="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="439.000000" x="553.000000" y="2268.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.500000" y="2306.500000">kgfoundry_common.vector_types.coerce_vector_batch</text></g><a href="https://github.com/paul-heyse/kgfoundry/blob/main/src/orchestration/cli_context.py" ns0:href="https://github.com/paul-heyse/kgfoundry/blob/main/src/orchestration/cli_context.py"><g class="JiMzNDtvcmNoZXN0cmF0aW9uLmNsaV9jb250ZXh0JiMzNDs="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="226.000000" x="659.000000" y="2394.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.000000" y="2432.500000">orchestration.cli_context</text></g></a><g class="JiMzNDtvcmNoZXN0cmF0aW9uLmNvbmZpZy5JbmRleENsaUNvbmZpZyYjMzQ7"><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="300.000000" x="622.000000" y="2520.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.000000" y="2558.500000">orchestration.config.IndexCliConfig</text></g><g class="JiMzNDtvcmNoZXN0cmF0aW9uLmZsb3dzLmUyZV9mbG93JiMzNDs="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="255.000000" x="645.000000" y="2646.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.500000" y="2684.500000">orchestration.flows.e2e_flow</text></g><a href="https://github.com/paul-heyse/kgfoundry/blob/main/src/orchestration/safe_pickle.py" ns0:href="https://github.com/paul-heyse/kgfoundry/blob/main/src/orchestration/safe_pickle.py"><g class="JiMzNDtvcmNoZXN0cmF0aW9uLnNhZmVfcGlja2xlJiMzNDs="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="227.000000" x="659.000000" y="2772.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.500000" y="2810.500000">orchestration.safe_pickle</text></g></a><g class="JiMzNDtwYXRobGliLlBhdGgmIzM0Ow=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="133.000000" x="706.000000" y="2898.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.500000" y="2936.500000">pathlib.Path</text></g><g class="dGltZQ=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="78.000000" x="733.000000" y="3024.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.000000" y="3062.500000">time</text></g><g class="JiMzNDt0b29scy5DbGlFbnZlbG9wZSYjMzQ7"><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="169.000000" x="688.000000" y="3150.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.500000" y="3188.500000">tools.CliEnvelope</text></g><g class="JiMzNDt0b29scy5DbGlFbnZlbG9wZUJ1aWxkZXImIzM0Ow=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="222.000000" x="661.000000" y="3276.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.000000" y="3314.500000">tools.CliEnvelopeBuilder</text></g><g class="JiMzNDt0b29scy5DbGlFcnJvclN0YXR1cyYjMzQ7"><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="187.000000" x="679.000000" y="3402.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.500000" y="3440.500000">tools.CliErrorStatus</text></g><g class="JiMzNDt0b29scy5DbGlTdGF0dXMmIzM0Ow=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="150.000000" x="697.000000" y="3528.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.000000" y="3566.500000">tools.CliStatus</text></g><g class="JiMzNDt0b29scy5Kc29uVmFsdWUmIzM0Ow=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="158.000000" x="693.000000" y="3654.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.000000" y="3692.500000">tools.JsonValue</text></g><g class="JiMzNDt0b29scy5Qcm9ibGVtRGV0YWlsc0RpY3QmIzM0Ow=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="224.000000" x="660.000000" y="3780.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.000000" y="3818.500000">tools.ProblemDetailsDict</text></g><g class="JiMzNDt0b29scy5Qcm9ibGVtRGV0YWlsc1BhcmFtcyYjMzQ7"><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="249.000000" x="648.000000" y="3906.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.500000" y="3944.500000">tools.ProblemDetailsParams</text></g><g class="JiMzNDt0b29scy5fc2hhcmVkLmxvZ2dpbmcuTG9nZ2VyQWRhcHRlciYjMzQ7"><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="311.000000" x="617.000000" y="4032.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.500000" y="4070.500000">tools._shared.logging.LoggerAdapter</text></g><g class="JiMzNDt0b29scy5idWlsZF9wcm9ibGVtX2RldGFpbHMmIzM0Ow=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="246.000000" x="649.000000" y="4158.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.000000" y="4196.500000">tools.build_problem_details</text></g><g class="JiMzNDt0b29scy5nZXRfbG9nZ2VyJiMzNDs="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="163.000000" x="691.000000" y="4284.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.500000" y="4322.500000">tools.get_logger</text></g><g class="JiMzNDt0b29scy5yZW5kZXJfY2xpX2VudmVsb3BlJiMzNDs="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="231.000000" x="657.000000" y="4410.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.500000" y="4448.500000">tools.render_cli_envelope</text></g><g class="JiMzNDt0b29scy53aXRoX2ZpZWxkcyYjMzQ7"><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="165.000000" x="690.000000" y="4536.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.500000" y="4574.500000">tools.with_fields</text></g><g class="dHlwZXI="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="84.000000" x="730.000000" y="4662.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.000000" y="4700.500000">typer</text></g><g class="JiMzNDt0eXBpbmcuQW5ub3RhdGVkJiMzNDs="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="170.000000" x="687.000000" y="4788.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.000000" y="4826.500000">typing.Annotated</text></g><g class="JiMzNDt0eXBpbmcuUHJvdG9jb2wmIzM0Ow=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="157.000000" x="694.000000" y="4914.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.500000" y="4952.500000">typing.Protocol</text></g><g class="JiMzNDt0eXBpbmcuVFlQRV9DSEVDS0lORyYjMzQ7"><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="213.000000" x="666.000000" y="5040.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.500000" y="5078.500000">typing.TYPE_CHECKING</text></g><g class="JiMzNDt0eXBpbmcuY2FzdCYjMzQ7"><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="125.000000" x="710.000000" y="5166.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.500000" y="5204.500000">typing.cast</text></g><g class="JiMzNDt1dWlkLnV1aWQ0JiMzNDs="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="123.000000" x="711.000000" y="5292.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="772.500000" y="5330.500000">uuid.uuid4</text></g><a href="https://github.com/paul-heyse/kgfoundry/blob/main/src/orchestration/__init__.py" ns0:href="https://github.com/paul-heyse/kgfoundry/blob/main/src/orchestration/__init__.py"><g class="b3JjaGVzdHJhdGlvbg=="><g class="shape"><rect class="stroke-B1 fill-B6" fill="#F7F8FE" height="66.000000" stroke="#0D32B2" style="stroke-width:2;" width="142.000000" x="0.000000" y="2646.000000"></rect></g><text class="text-bold fill-N1" fill="#0A0F25" style="text-anchor:middle;font-size:16px" x="71.000000" y="2684.500000">orchestration</text></g></a><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O19fZnV0dXJlX18uYW5ub3RhdGlvbnMmIzM0OylbMF0="><marker id="mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134" markerHeight="12.000000" markerUnits="userSpaceOnUse" markerWidth="10.000000" orient="auto" refX="7.000000" refY="6.000000" viewBox="0.000000 0.000000 10.000000 12.000000"> <polygon class="connection fill-B1" fill="#0D32B2" points="0.000000,0.000000 10.000000,6.000000 0.000000,12.000000" stroke-width="2"></polygon> </marker><path class="connection stroke-B1" d="M 325.099380 2644.002471 C 429.000000 555.598999 497.200012 33.000000 662.000000 33.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O2NvbGxlY3Rpb25zLmFiYy5DYWxsYWJsZSYjMzQ7KVswXQ=="><path class="connection stroke-B1" d="M 325.104401 2644.002727 C 429.000000 656.398987 497.000000 159.000000 661.000000 159.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O2NvbGxlY3Rpb25zLmFiYy5JdGVyYWJsZSYjMzQ7KVswXQ=="><path class="connection stroke-B1" d="M 325.109956 2644.003025 C 429.000000 757.198975 497.100006 285.000000 661.500000 285.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O2NvbGxlY3Rpb25zLmFiYy5NYXBwaW5nJiMzNDspWzBd"><path class="connection stroke-B1" d="M 325.116135 2644.003375 C 429.000000 858.000000 496.500000 411.000000 658.500000 411.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O2NvbGxlY3Rpb25zLmFiYy5TZXF1ZW5jZSYjMzQ7KVswXQ=="><path class="connection stroke-B1" d="M 326.122105 2644.003731 C 429.200012 958.799988 495.899994 537.000000 655.500000 537.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyBjb250ZXh0bGliKVswXQ=="><path class="connection stroke-B1" d="M 326.129831 2644.004219 C 429.200012 1059.599976 506.600006 663.000000 709.000000 663.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O2RhdGFjbGFzc2VzLmRhdGFjbGFzcyYjMzQ7KVswXQ=="><path class="connection stroke-B1" d="M 326.138600 2644.004808 C 429.200012 1160.399048 498.500000 789.000000 668.500000 789.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyBpbXBvcnRsaWIpWzBd"><path class="connection stroke-B1" d="M 326.148635 2644.005531 C 429.200012 1261.198975 507.200012 915.000000 712.000000 915.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyBqc29uKVswXQ=="><path class="connection stroke-B1" d="M 326.160231 2644.006429 C 429.200012 1362.000000 510.799988 1041.000000 730.000000 1041.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O2tnZm91bmRyeS5lbWJlZGRpbmdzX3NwYXJzZS5ibTI1LmdldF9ibTI1JiMzNDspWzBd"><path class="connection stroke-B1" d="M 326.173782 2644.007564 C 429.200012 1462.800049 480.000000 1167.000000 576.000000 1167.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O2tnZm91bmRyeV9jb21tb24uZXJyb3JzLkNvbmZpZ3VyYXRpb25FcnJvciYjMzQ7KVswXQ=="><path class="connection stroke-B1" d="M 327.188368 2644.008890 C 429.399994 1563.599976 480.700012 1293.000000 579.500000 1293.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O2tnZm91bmRyeV9jb21tb24uZXJyb3JzLkluZGV4QnVpbGRFcnJvciYjMzQ7KVswXQ=="><path class="connection stroke-B1" d="M 327.207513 2644.010795 C 429.399994 1664.400024 482.899994 1419.000000 590.500000 1419.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O2tnZm91bmRyeV9jb21tb24uanNvbnNjaGVtYV91dGlscy5EcmFmdDIwMjAxMlZhbGlkYXRvclByb3RvY29sJiMzNDspWzBd"><path class="connection stroke-B1" d="M 327.230960 2644.013380 C 429.399994 1765.198975 465.000000 1545.000000 501.000000 1545.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O2tnZm91bmRyeV9jb21tb24uanNvbnNjaGVtYV91dGlscy5WYWxpZGF0aW9uRXJyb3JQcm90b2NvbCYjMzQ7KVswXQ=="><path class="connection stroke-B1" d="M 328.258331 2644.016754 C 429.600006 1866.000000 469.299988 1671.000000 522.500000 1671.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O2tnZm91bmRyeV9jb21tb24uanNvbnNjaGVtYV91dGlscy5jcmVhdGVfZHJhZnQyMDIwMTJfdmFsaWRhdG9yJiMzNDspWzBd"><path class="connection stroke-B1" d="M 328.295883 2644.022008 C 429.600006 1966.800049 465.100006 1797.000000 501.500000 1797.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O2tnZm91bmRyeV9jb21tb24uc2NoZW1hX2hlbHBlcnMubG9hZF9zY2hlbWEmIzM0OylbMF0="><path class="connection stroke-B1" d="M 329.343372 2644.029697 C 429.799988 2067.600098 477.799988 1923.000000 565.000000 1923.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O2tnZm91bmRyeV9jb21tb24udmVjdG9yX3R5cGVzLlZlY3RvckJhdGNoJiMzNDspWzBd"><path class="connection stroke-B1" d="M 330.409872 2644.042449 C 430.000000 2168.399902 480.700012 2049.000000 579.500000 2049.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O2tnZm91bmRyeV9jb21tb24udmVjdG9yX3R5cGVzLlZlY3RvclZhbGlkYXRpb25FcnJvciYjMzQ7KVswXQ=="><path class="connection stroke-B1" d="M 332.505345 2644.064896 C 430.399994 2269.199951 473.799988 2175.000000 545.000000 2175.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O2tnZm91bmRyeV9jb21tb24udmVjdG9yX3R5cGVzLmNvZXJjZV92ZWN0b3JfYmF0Y2gmIzM0OylbMF0="><path class="connection stroke-B1" d="M 335.657041 2644.111006 C 431.000000 2370.000000 474.500000 2301.000000 548.500000 2301.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O29yY2hlc3RyYXRpb24uY2xpX2NvbnRleHQmIzM0OylbMF0="><path class="connection stroke-B1" d="M 341.923471 2644.225965 C 432.200012 2470.800049 495.799988 2427.000000 655.000000 2427.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O29yY2hlc3RyYXRpb24uY29uZmlnLkluZGV4Q2xpQ29uZmlnJiMzNDspWzBd"><path class="connection stroke-B1" d="M 359.443668 2644.615867 C 435.600006 2571.600098 488.399994 2553.000000 618.000000 2553.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O29yY2hlc3RyYXRpb24uZmxvd3MuZTJlX2Zsb3cmIzM0OylbMF0="><path class="connection stroke-B1" d="M 407.000000 2679.000000 C 445.000000 2679.000000 492.899994 2679.000000 640.500000 2679.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O29yY2hlc3RyYXRpb24uc2FmZV9waWNrbGUmIzM0OylbMF0="><path class="connection stroke-B1" d="M 359.443668 2713.384133 C 435.600006 2786.399902 495.700012 2805.000000 654.500000 2805.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O3BhdGhsaWIuUGF0aCYjMzQ7KVswXQ=="><path class="connection stroke-B1" d="M 341.923471 2713.774035 C 432.200012 2887.199951 505.100006 2931.000000 701.500000 2931.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyB0aW1lKVswXQ=="><path class="connection stroke-B1" d="M 335.657041 2713.888994 C 431.000000 2988.000000 510.600006 3057.000000 729.000000 3057.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O3Rvb2xzLkNsaUVudmVsb3BlJiMzNDspWzBd"><path class="connection stroke-B1" d="M 332.505345 2713.935104 C 430.399994 3088.800049 501.500000 3183.000000 683.500000 3183.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O3Rvb2xzLkNsaUVudmVsb3BlQnVpbGRlciYjMzQ7KVswXQ=="><path class="connection stroke-B1" d="M 330.409872 2713.957551 C 430.000000 3189.600098 496.200012 3309.000000 657.000000 3309.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O3Rvb2xzLkNsaUVycm9yU3RhdHVzJiMzNDspWzBd"><path class="connection stroke-B1" d="M 329.343372 2713.970303 C 429.799988 3290.399902 499.700012 3435.000000 674.500000 3435.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O3Rvb2xzLkNsaVN0YXR1cyYjMzQ7KVswXQ=="><path class="connection stroke-B1" d="M 328.295883 2713.977992 C 429.600006 3391.199951 503.399994 3561.000000 693.000000 3561.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O3Rvb2xzLkpzb25WYWx1ZSYjMzQ7KVswXQ=="><path class="connection stroke-B1" d="M 328.258331 2713.983246 C 429.600006 3492.000000 502.600006 3687.000000 689.000000 3687.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O3Rvb2xzLlByb2JsZW1EZXRhaWxzRGljdCYjMzQ7KVswXQ=="><path class="connection stroke-B1" d="M 327.230960 2713.986620 C 429.399994 3592.800049 496.000000 3813.000000 656.000000 3813.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O3Rvb2xzLlByb2JsZW1EZXRhaWxzUGFyYW1zJiMzNDspWzBd"><path class="connection stroke-B1" d="M 327.207513 2713.989205 C 429.399994 3693.600098 493.500000 3939.000000 643.500000 3939.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O3Rvb2xzLl9zaGFyZWQubG9nZ2luZy5Mb2dnZXJBZGFwdGVyJiMzNDspWzBd"><path class="connection stroke-B1" d="M 327.188368 2713.991110 C 429.399994 3794.399902 487.299988 4065.000000 612.500000 4065.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O3Rvb2xzLmJ1aWxkX3Byb2JsZW1fZGV0YWlscyYjMzQ7KVswXQ=="><path class="connection stroke-B1" d="M 326.173782 2713.992436 C 429.200012 3895.199951 493.799988 4191.000000 645.000000 4191.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O3Rvb2xzLmdldF9sb2dnZXImIzM0OylbMF0="><path class="connection stroke-B1" d="M 326.160231 2713.993571 C 429.200012 3996.000000 502.100006 4317.000000 686.500000 4317.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O3Rvb2xzLnJlbmRlcl9jbGlfZW52ZWxvcGUmIzM0OylbMF0="><path class="connection stroke-B1" d="M 326.148635 2713.994469 C 429.200012 4096.799805 495.299988 4443.000000 652.500000 4443.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O3Rvb2xzLndpdGhfZmllbGRzJiMzNDspWzBd"><path class="connection stroke-B1" d="M 326.138600 2713.995192 C 429.200012 4197.600098 501.899994 4569.000000 685.500000 4569.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyB0eXBlcilbMF0="><path class="connection stroke-B1" d="M 326.129831 2713.995781 C 429.200012 4298.399902 510.000000 4695.000000 726.000000 4695.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O3R5cGluZy5Bbm5vdGF0ZWQmIzM0OylbMF0="><path class="connection stroke-B1" d="M 326.122105 2713.996269 C 429.200012 4399.200195 501.399994 4821.000000 683.000000 4821.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O3R5cGluZy5Qcm90b2NvbCYjMzQ7KVswXQ=="><path class="connection stroke-B1" d="M 325.116135 2713.996625 C 429.000000 4500.000000 502.700012 4947.000000 689.500000 4947.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O3R5cGluZy5UWVBFX0NIRUNLSU5HJiMzNDspWzBd"><path class="connection stroke-B1" d="M 325.109956 2713.996975 C 429.000000 4600.799805 497.100006 5073.000000 661.500000 5073.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O3R5cGluZy5jYXN0JiMzNDspWzBd"><path class="connection stroke-B1" d="M 325.104401 2713.997273 C 429.000000 4701.600098 505.899994 5199.000000 705.500000 5199.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KCYjMzQ7b3JjaGVzdHJhdGlvbi5jbGkmIzM0OyAtJmd0OyAmIzM0O3V1aWQudXVpZDQmIzM0OylbMF0="><path class="connection stroke-B1" d="M 325.099380 2713.997529 C 429.000000 4802.399902 506.100006 5325.000000 706.500000 5325.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="KG9yY2hlc3RyYXRpb24gLSZndDsgJiMzNDtvcmNoZXN0cmF0aW9uLmNsaSYjMzQ7KVswXQ=="><path class="connection stroke-B1" d="M 144.000000 2679.000000 C 182.000000 2679.000000 202.000000 2679.000000 238.000000 2679.000000" fill="none" marker-end="url(#mk-d2-89a5d85b9f67400aaef19caf544885c7-3488378134)" mask="url(#d2-89a5d85b9f67400aaef19caf544885c7)" stroke="#0D32B2" style="stroke-width:2;"></path></g><g class="appendix-icon" transform="translate(389 2630)"><svg fill="none" height="32" viewBox="0 0 32 32" width="32">
<g clip-path="url(#clip0_3440_35088111-d2-89a5d85b9f67400aaef19caf544885c7-EJXXEY3IMVZXI4TBORUW63ROMNWGSIQ)">
<path d="M16 31.1109C24.3456 31.1109 31.1111 24.3454 31.1111 15.9998C31.1111 7.65415 24.3456 0.888672 16 0.888672C7.65436 0.888672 0.888885 7.65415 0.888885 15.9998C0.888885 24.3454 7.65436 31.1109 16 31.1109Z" fill="white" stroke="#DEE1EB"></path>
<path d="M14.3909 16.7965C14.7364 17.2584 15.1772 17.6406 15.6834 17.9171C16.1896 18.1938 16.7494 18.3582 17.3248 18.3993C17.9001 18.4405 18.4777 18.3575 19.0181 18.1559C19.5586 17.9543 20.0492 17.6389 20.4571 17.2309L22.8708 14.8173C23.6036 14.0586 24.0089 13.0425 23.9998 11.9877C23.9906 10.933 23.5676 9.92404 22.8217 9.17821C22.0759 8.43237 21.067 8.00931 20.0123 8.00015C18.9575 7.99098 17.9413 8.39644 17.1827 9.1292L15.7988 10.505" stroke="#2E3346" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
<path d="M17.609 15.1874C17.2635 14.7255 16.8227 14.3433 16.3165 14.0667C15.8103 13.7902 15.2505 13.6257 14.6752 13.5845C14.0998 13.5433 13.5223 13.6263 12.9819 13.8279C12.4414 14.0295 11.9506 14.345 11.5428 14.753L9.1292 17.1666C8.39644 17.9252 7.99098 18.9414 8.00015 19.9962C8.00931 21.0509 8.43237 22.0598 9.17821 22.8056C9.92405 23.5515 10.933 23.9745 11.9877 23.9837C13.0425 23.9928 14.0586 23.5875 14.8173 22.8547L16.193 21.4788" stroke="#2E3346" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</g>
<defs>
<clipPath id="clip0_3440_35088111-d2-89a5d85b9f67400aaef19caf544885c7-EJXXEY3IMVZXI4TBORUW63ROMNWGSIQ">
<rect fill="white" height="32" width="32"></rect>
</clipPath>
</defs>
</svg>
</g><g class="appendix-icon" transform="translate(869 2378)"><svg fill="none" height="32" viewBox="0 0 32 32" width="32">
<g clip-path="url(#clip0_3440_35088111-d2-89a5d85b9f67400aaef19caf544885c7-EJXXEY3IMVZXI4TBORUW63ROMNWGSX3DN5XHIZLYOQRA)">
<path d="M16 31.1109C24.3456 31.1109 31.1111 24.3454 31.1111 15.9998C31.1111 7.65415 24.3456 0.888672 16 0.888672C7.65436 0.888672 0.888885 7.65415 0.888885 15.9998C0.888885 24.3454 7.65436 31.1109 16 31.1109Z" fill="white" stroke="#DEE1EB"></path>
<path d="M14.3909 16.7965C14.7364 17.2584 15.1772 17.6406 15.6834 17.9171C16.1896 18.1938 16.7494 18.3582 17.3248 18.3993C17.9001 18.4405 18.4777 18.3575 19.0181 18.1559C19.5586 17.9543 20.0492 17.6389 20.4571 17.2309L22.8708 14.8173C23.6036 14.0586 24.0089 13.0425 23.9998 11.9877C23.9906 10.933 23.5676 9.92404 22.8217 9.17821C22.0759 8.43237 21.067 8.00931 20.0123 8.00015C18.9575 7.99098 17.9413 8.39644 17.1827 9.1292L15.7988 10.505" stroke="#2E3346" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
<path d="M17.609 15.1874C17.2635 14.7255 16.8227 14.3433 16.3165 14.0667C15.8103 13.7902 15.2505 13.6257 14.6752 13.5845C14.0998 13.5433 13.5223 13.6263 12.9819 13.8279C12.4414 14.0295 11.9506 14.345 11.5428 14.753L9.1292 17.1666C8.39644 17.9252 7.99098 18.9414 8.00015 19.9962C8.00931 21.0509 8.43237 22.0598 9.17821 22.8056C9.92405 23.5515 10.933 23.9745 11.9877 23.9837C13.0425 23.9928 14.0586 23.5875 14.8173 22.8547L16.193 21.4788" stroke="#2E3346" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</g>
<defs>
<clipPath id="clip0_3440_35088111-d2-89a5d85b9f67400aaef19caf544885c7-EJXXEY3IMVZXI4TBORUW63ROMNWGSX3DN5XHIZLYOQRA">
<rect fill="white" height="32" width="32"></rect>
</clipPath>
</defs>
</svg>
</g><g class="appendix-icon" transform="translate(870 2756)"><svg fill="none" height="32" viewBox="0 0 32 32" width="32">
<g clip-path="url(#clip0_3440_35088111-d2-89a5d85b9f67400aaef19caf544885c7-EJXXEY3IMVZXI4TBORUW63ROONQWMZK7OBUWG23MMURA)">
<path d="M16 31.1109C24.3456 31.1109 31.1111 24.3454 31.1111 15.9998C31.1111 7.65415 24.3456 0.888672 16 0.888672C7.65436 0.888672 0.888885 7.65415 0.888885 15.9998C0.888885 24.3454 7.65436 31.1109 16 31.1109Z" fill="white" stroke="#DEE1EB"></path>
<path d="M14.3909 16.7965C14.7364 17.2584 15.1772 17.6406 15.6834 17.9171C16.1896 18.1938 16.7494 18.3582 17.3248 18.3993C17.9001 18.4405 18.4777 18.3575 19.0181 18.1559C19.5586 17.9543 20.0492 17.6389 20.4571 17.2309L22.8708 14.8173C23.6036 14.0586 24.0089 13.0425 23.9998 11.9877C23.9906 10.933 23.5676 9.92404 22.8217 9.17821C22.0759 8.43237 21.067 8.00931 20.0123 8.00015C18.9575 7.99098 17.9413 8.39644 17.1827 9.1292L15.7988 10.505" stroke="#2E3346" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
<path d="M17.609 15.1874C17.2635 14.7255 16.8227 14.3433 16.3165 14.0667C15.8103 13.7902 15.2505 13.6257 14.6752 13.5845C14.0998 13.5433 13.5223 13.6263 12.9819 13.8279C12.4414 14.0295 11.9506 14.345 11.5428 14.753L9.1292 17.1666C8.39644 17.9252 7.99098 18.9414 8.00015 19.9962C8.00931 21.0509 8.43237 22.0598 9.17821 22.8056C9.92405 23.5515 10.933 23.9745 11.9877 23.9837C13.0425 23.9928 14.0586 23.5875 14.8173 22.8547L16.193 21.4788" stroke="#2E3346" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</g>
<defs>
<clipPath id="clip0_3440_35088111-d2-89a5d85b9f67400aaef19caf544885c7-EJXXEY3IMVZXI4TBORUW63ROONQWMZK7OBUWG23MMURA">
<rect fill="white" height="32" width="32"></rect>
</clipPath>
</defs>
</svg>
</g><g class="appendix-icon" transform="translate(126 2630)"><svg fill="none" height="32" viewBox="0 0 32 32" width="32">
<g clip-path="url(#clip0_3440_35088111-d2-89a5d85b9f67400aaef19caf544885c7-N5ZGG2DFON2HEYLUNFXW4)">
<path d="M16 31.1109C24.3456 31.1109 31.1111 24.3454 31.1111 15.9998C31.1111 7.65415 24.3456 0.888672 16 0.888672C7.65436 0.888672 0.888885 7.65415 0.888885 15.9998C0.888885 24.3454 7.65436 31.1109 16 31.1109Z" fill="white" stroke="#DEE1EB"></path>
<path d="M14.3909 16.7965C14.7364 17.2584 15.1772 17.6406 15.6834 17.9171C16.1896 18.1938 16.7494 18.3582 17.3248 18.3993C17.9001 18.4405 18.4777 18.3575 19.0181 18.1559C19.5586 17.9543 20.0492 17.6389 20.4571 17.2309L22.8708 14.8173C23.6036 14.0586 24.0089 13.0425 23.9998 11.9877C23.9906 10.933 23.5676 9.92404 22.8217 9.17821C22.0759 8.43237 21.067 8.00931 20.0123 8.00015C18.9575 7.99098 17.9413 8.39644 17.1827 9.1292L15.7988 10.505" stroke="#2E3346" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
<path d="M17.609 15.1874C17.2635 14.7255 16.8227 14.3433 16.3165 14.0667C15.8103 13.7902 15.2505 13.6257 14.6752 13.5845C14.0998 13.5433 13.5223 13.6263 12.9819 13.8279C12.4414 14.0295 11.9506 14.345 11.5428 14.753L9.1292 17.1666C8.39644 17.9252 7.99098 18.9414 8.00015 19.9962C8.00931 21.0509 8.43237 22.0598 9.17821 22.8056C9.92405 23.5515 10.933 23.9745 11.9877 23.9837C13.0425 23.9928 14.0586 23.5875 14.8173 22.8547L16.193 21.4788" stroke="#2E3346" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</g>
<defs>
<clipPath id="clip0_3440_35088111-d2-89a5d85b9f67400aaef19caf544885c7-N5ZGG2DFON2HEYLUNFXW4">
<rect fill="white" height="32" width="32"></rect>
</clipPath>
</defs>
</svg>
</g><mask height="5560" id="d2-89a5d85b9f67400aaef19caf544885c7" maskUnits="userSpaceOnUse" width="1241" x="-101" y="-101">
<rect fill="white" height="5560" width="1241" x="-101" y="-101"></rect>
</mask></svg></svg></div>
<aside class="md-source-file">
<span class="md-source-file__fact">
<span class="md-icon" title="Last update">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg>
</span>
<span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="November 6, 2025 21:54:47 UTC">November 6, 2025</span>
</span>
</aside>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: orchestration" class="md-footer__link md-footer__link--prev" href="../">
<div class="md-footer__button md-icon">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</div>
<div class="md-footer__title">
<span class="md-footer__direction">
                Previous
              </span>
<div class="md-ellipsis">
                orchestration
              </div>
</div>
</a>
<a aria-label="Next: cli_context" class="md-footer__link md-footer__link--next" href="../cli_context/">
<div class="md-footer__title">
<span class="md-footer__direction">
                Next
              </span>
<div class="md-ellipsis">
                cli_context
              </div>
</div>
<div class="md-footer__button md-icon">
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.sections", "navigation.top", "navigation.tracking", "navigation.footer", "content.action.edit", "content.action.view"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
<script src="../../../assets/mkdocs_puml/puml.js"></script>
<script src="https://unpkg.com/@panzoom/panzoom@4.5.1/dist/panzoom.min.js"></script>
<script src="../../../assets/mkdocs_puml/interaction.js"></script>
<script>document$.subscribe(() => {
            const dark_scheme_name = "slate"
            
            window.scheme = document.body.getAttribute("data-md-color-scheme")
            const options = {
                attributeFilter: ['data-md-color-scheme'],
            };
            function color_scheme_callback(mutations) {
                for (let mutation of mutations) {
                    if (mutation.attributeName === "data-md-color-scheme") {
                        scheme = document.body.getAttribute("data-md-color-scheme")
                        var iframe_list = document.getElementsByClassName("redoc-iframe")
                        for(var i = 0; i < iframe_list.length; i++) {
                            var ele = iframe_list.item(i);
                            if (ele) {
                                if (scheme === dark_scheme_name) {
                                    ele.contentWindow.enable_dark_mode();
                                } else {
                                    ele.contentWindow.disable_dark_mode();
                                }
                            }
                        }
                    }
                }
            }
            observer = new MutationObserver(color_scheme_callback);
            observer.observe(document.body, options);
            })</script>
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>
# Import-linter Configuration for Typing Gates Enforcement (Phase 2)
#
# This is a specialized configuration that strictly enforces typing facade-only
# import patterns. It ensures all packages use designated typing facades
# (kgfoundry_common.typing, docs.typing, tools.typing) instead of importing
# directly from private modules (docs._types, docs._cache).
#
# Used by: Task 2.2 (Harden import-linter & Ruff gates)
# Related: tools/lint/check_typing_gates.py
#
# Usage:
#   import-linter --config tools/lint/importlinter.typing.ini
#
# CI Integration:
#   This config is run as part of the pre-commit hook and CI pipeline
#   to validate all code changes comply with typing facade requirements.

[import-linter]
root_package = kgfoundry

[import-linter:contract:typing-facade-only]
name = Type-only imports must use designated facades
type = forbidden
source_modules =
    kgfoundry_common
    kgfoundry
    kgfoundry.docling_kg
    kgfoundry.download
    kgfoundry.embeddings_dense
    kgfoundry.embeddings_sparse
    kgfoundry.kg_builder
    kgfoundry.linking
    kgfoundry.ontology
    kgfoundry.registry
    kgfoundry.search_api
    kgfoundry.vectorstore_faiss
    orchestration
    search_api

forbidden_modules =
    docs._types
    docs._cache
    docs._types.alignment
    docs._types.artifacts
    docs._types.astroid_facade
    docs._types.autoapi_parser
    docs._types.griffe
    docs._types.sphinx_optional

# Allowlist: Façade modules are permitted to import from private modules
# (this is the point of having a façade pattern)
ignore_imports =
    docs.types -> docs._types
    docs.types.artifacts -> docs._types.artifacts
    docs.types.griffe -> docs._types.griffe
    docs.types.sphinx_optional -> docs._types.sphinx_optional
    docs.typing -> docs._types
    kgfoundry_common.typing -> kgfoundry_common.typing
    tools.typing -> kgfoundry_common.typing

[importlinter]
root_package = kgfoundry

[importlinter:contract:docstring_builder_layers]
name = tools.docstring_builder layering
type = layers
layers =
    tools.docstring_builder.cli
    tools.docstring_builder.orchestrator
    tools.docstring_builder.__main__, tools.docstring_builder.apply, tools.docstring_builder.builder_types, tools.docstring_builder.cache, tools.docstring_builder.config, tools.docstring_builder.diff_manager, tools.docstring_builder.docfacts, tools.docstring_builder.docfacts_coordinator, tools.docstring_builder.failure_summary, tools.docstring_builder.file_processor, tools.docstring_builder.harvest, tools.docstring_builder.io, tools.docstring_builder.ir, tools.docstring_builder.legacy, tools.docstring_builder.manifest_builder, tools.docstring_builder.metrics, tools.docstring_builder.models, tools.docstring_builder.normalizer, tools.docstring_builder.normalizer_annotations, tools.docstring_builder.normalizer_signature, tools.docstring_builder.observability, tools.docstring_builder.orchestration, tools.docstring_builder.overrides, tools.docstring_builder.paths, tools.docstring_builder.pipeline, tools.docstring_builder.pipeline_types, tools.docstring_builder.plugins, tools.docstring_builder.policy, tools.docstring_builder.render, tools.docstring_builder.schema, tools.docstring_builder.semantics, tools.docstring_builder.version
    tools._shared

[importlinter:contract:docstring_builder_adapters_no_shared]
name = Docstring builder adapters avoid shared internals
type = forbid
modules =
    tools.docstring_builder.cli
forbidden_modules =
    tools._shared

[importlinter:contract:docs_layers]
name = tools.docs layering
type = layers
layers =
    tools.docs.build_agent_analytics, tools.docs.build_agent_catalog, tools.docs.build_artifacts, tools.docs.build_graphs, tools.docs.build_test_map, tools.docs.export_schemas, tools.docs.render_agent_portal, tools.docs.scan_observability
    tools.docs.analytics_models, tools.docs.build_agent_api, tools.docs.catalog_models, tools.docs.errors, tools.docs.models, tools.docs.observability
    tools._shared

[importlinter:contract:docs_adapters_no_shared]
name = Docs adapters avoid shared internals
type = forbid
modules =
    tools.docs.build_agent_analytics
    tools.docs.build_agent_catalog
    tools.docs.build_artifacts
    tools.docs.build_graphs
    tools.docs.build_test_map
    tools.docs.export_schemas
    tools.docs.render_agent_portal
    tools.docs.scan_observability
forbidden_modules =
    tools._shared

[importlinter:contract:navmap_layers]
name = tools.navmap layering
type = layers
layers =
    tools.navmap.build_navmap, tools.navmap.check_navmap, tools.navmap.migrate_navmaps, tools.navmap.repair_navmaps, tools.navmap.strip_navmap_sections
    tools.navmap.document_models, tools.navmap.models, tools.navmap.observability
    tools._shared

[importlinter:contract:navmap_adapters_no_shared]
name = Navmap adapters avoid shared internals
type = forbid
modules =
    tools.navmap.build_navmap
    tools.navmap.check_navmap
    tools.navmap.migrate_navmaps
    tools.navmap.repair_navmaps
    tools.navmap.strip_navmap_sections
forbidden_modules =
    tools._shared

src.search_api.faiss_adapter
============================

.. py:module:: src.search_api.faiss_adapter

.. autoapi-nested-parse::

   Module for search_api.faiss_adapter.

   NavMap:
   - NavMap: Structure describing a module navmap.
   - DenseVecs: Dense vector matrix paired with chunk identifiers.
   - FaissAdapter: Load dense vectors from DuckDB and expose FAISS searchâ€¦.





Module Contents
---------------

.. py:class:: DenseVecs

   Dense vector matrix paired with chunk identifiers.


   .. py:attribute:: ids
      :type:  list[str]


   .. py:attribute:: mat
      :type:  VecArray


.. py:class:: FaissAdapter(db_path, factory = 'OPQ64,IVF8192,PQ64', metric = 'ip')

   Load dense vectors from DuckDB and expose FAISS search utilities.


   .. py:attribute:: db_path


   .. py:attribute:: factory
      :value: 'OPQ64,IVF8192,PQ64'



   .. py:attribute:: metric
      :value: 'ip'



   .. py:attribute:: index
      :type:  Any | None
      :value: None



   .. py:attribute:: idmap
      :type:  list[str] | None
      :value: None



   .. py:attribute:: vecs
      :type:  DenseVecs | None
      :value: None



   .. py:method:: build()

      Load dense vectors and build a GPU-backed FAISS index when available.



   .. py:method:: load_or_build(cpu_index_path = None)

      Load a pre-built FAISS index or build one on demand.



   .. py:method:: search(qvec, k = 10)

      Return the top ``k`` chunk identifiers most similar to ``qvec``.




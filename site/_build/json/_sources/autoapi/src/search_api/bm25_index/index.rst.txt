src.search_api.bm25_index
=========================

.. py:module:: src.search_api.bm25_index

.. autoapi-nested-parse::

   Module for search_api.bm25_index.

   NavMap:
   - NavMap: Structure describing a module navmap.
   - toks: Tokenise ``text`` into lowercase alphanumeric terms.
   - BM25Doc: Container storing fields required for BM25 scoring.
   - BM25Index: Construct, persist, and query a BM25 index.







Module Contents
---------------

.. py:function:: toks(text)

   Tokenise ``text`` into lowercase alphanumeric terms.


.. py:class:: BM25Doc

   Container storing fields required for BM25 scoring.


   .. py:attribute:: chunk_id
      :type:  str


   .. py:attribute:: doc_id
      :type:  str


   .. py:attribute:: title
      :type:  str


   .. py:attribute:: section
      :type:  str


   .. py:attribute:: tf
      :type:  dict[str, float]


   .. py:attribute:: dl
      :type:  float


.. py:class:: BM25Index(k1 = 0.9, b = 0.4)

   Construct, persist, and query a BM25 index.


   .. py:attribute:: k1
      :value: 0.9



   .. py:attribute:: b
      :value: 0.4



   .. py:attribute:: docs
      :type:  list[BM25Doc]
      :value: []



   .. py:attribute:: df
      :type:  dict[str, int]


   .. py:attribute:: N
      :value: 0



   .. py:attribute:: avgdl
      :value: 0.0



   .. py:method:: build_from_duckdb(db_path)
      :classmethod:


      Build an index using the most recent chunk dataset in DuckDB.



   .. py:method:: save(path)

      Serialize the index to ``path`` using pickle.



   .. py:method:: load(path)
      :classmethod:


      Load a pickled index from ``path``.



   .. py:method:: search(query, k = 10)

      Score documents for ``query`` and return the top ``k`` hits.



   .. py:method:: doc(index)

      Return the :class:`BM25Doc` at ``index``.




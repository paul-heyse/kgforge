src.search_api.app
==================

.. py:module:: src.search_api.app

.. autoapi-nested-parse::

   Module for search_api.app.

   NavMap:
   - SearchRequest: Searchrequest.
   - SearchResult: Searchresult.
   - auth: Validate the bearer-token header for protected endpoints.
   - healthz: Healthz.
   - rrf_fuse: Fuse ranked lists using reciprocal rank fusion.
   - apply_kg_boosts: Apply knowledge-graph boosting heuristics.
   - search: Execute a search request across dense and sparse indices.
   - graph_concepts: Return KG concepts that match the provided query fragment.







Module Contents
---------------

.. py:data:: logger

.. py:data:: API_KEYS
   :type:  set[str]

.. py:data:: app

.. py:data:: CFG_PATH

.. py:data:: CFG

.. py:data:: SPARSE_BACKEND

.. py:data:: BM25_DIR

.. py:data:: SPLADE_DIR

.. py:data:: FAISS_PATH
   :value: './_indices/faiss/shard_000.idx'


.. py:data:: bm25

.. py:data:: splade

.. py:data:: faiss

.. py:data:: kg

.. py:function:: auth(authorization = Header(default=None))

   Validate the bearer-token header for protected endpoints.

   :param authorization: TODO.
   :type authorization: str | None, optional

   :returns: TODO.
   :rtype: None


.. py:function:: healthz()

   Healthz.


.. py:function:: rrf_fuse(lists, k_rrf)

   Fuse ranked lists using reciprocal rank fusion.

   :param lists: TODO.
   :type lists: list[list[tuple[str, float]]]
   :param k_rrf: TODO.
   :type k_rrf: int

   :returns: TODO.
   :rtype: dict[str, float]


.. py:function:: apply_kg_boosts(cands, query, direct = 0.08, one_hop = 0.04)

   Apply knowledge-graph boosting heuristics.

   :param cands: TODO.
   :type cands: dict[str, float]
   :param query: TODO.
   :type query: str
   :param direct: TODO.
   :type direct: float, default=0.08
   :param one_hop: TODO.
   :type one_hop: float, default=0.04

   :returns: TODO.
   :rtype: dict[str, float]


.. py:function:: search(req, _ = Depends(auth))

   Execute a search request across dense and sparse indices.

   :param req: TODO.
   :type req: SearchRequest
   :param _: TODO.
   :type _: None


.. py:function:: graph_concepts(body, _ = Depends(auth))

   Return KG concepts that match the provided query fragment.

   :param body: TODO.
   :type body: Mapping[str, Any]
   :param _: TODO.
   :type _: None



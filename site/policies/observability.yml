# This policy file is deep-merged with the defaults in tools/docs/scan_observability.py,
# so you can override a single field without copying the entire section.
metric:
  name_regex: '^[a-z][a-z0-9_]*$'      # Prometheus snake_case
  allowed_units: [seconds, bytes, meters, grams, joules, volts, amperes, ratio]
  counter_suffix: '_total'
  require_unit_suffix: true             # Require unit suffix (Prometheus practice)

labels:
  reserved: [le, quantile, job, instance]
  high_cardinality_patterns:
    - '(?i)user(_)?id'
    - '(?i)session(_)?id'
    - '(?i)request(_)?id'
    - '(?i)trace(_)?id'
    - '(?i)email'
    - '(?i)url'
    - '(?i)path'

logs:
  require_structured: true              # Flag %-format/f-string w/o structured keys

traces:
  name_regex: '^[a-z0-9_.]+$'           # OTel-ish lower dotted names

# Optional: map error taxonomy to runbooks (if present)
error_taxonomy_json: 'docs/_build/error_taxonomy.json'

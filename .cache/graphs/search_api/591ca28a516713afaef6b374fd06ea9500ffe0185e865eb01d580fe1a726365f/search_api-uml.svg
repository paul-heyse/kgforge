<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: classes_search_api Pages: 1 -->
<svg width="7036pt" height="529pt"
 viewBox="0.00 0.00 7035.50 529.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 525)">
<title>classes_search_api</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-525 7031.5,-525 7031.5,4 -4,4"/>
<!-- search_api.types.AgentSearchQuery -->
<g id="node1" class="node">
<title>search_api.types.AgentSearchQuery</title>
<polygon fill="none" stroke="black" points="0,-53 0,-167 191,-167 191,-53 0,-53"/>
<text text-anchor="start" x="43.5" y="-151.8" font-family="Times,serif" font-size="14.00">AgentSearchQuery</text>
<polyline fill="none" stroke="black" points="0,-144 191,-144 "/>
<text text-anchor="start" x="8" y="-128.8" font-family="Times,serif" font-size="14.00">explain : bool</text>
<text text-anchor="start" x="8" y="-113.8" font-family="Times,serif" font-size="14.00">facets : Mapping[str, str] | None</text>
<text text-anchor="start" x="8" y="-98.8" font-family="Times,serif" font-size="14.00">k : int</text>
<text text-anchor="start" x="8" y="-83.8" font-family="Times,serif" font-size="14.00">query : str</text>
<polyline fill="none" stroke="black" points="0,-76 191,-76 "/>
<text text-anchor="start" x="93.5" y="-60.8" font-family="Times,serif" font-size="14.00"> </text>
</g>
<!-- search_api.types.AgentSearchResponse -->
<g id="node2" class="node">
<title>search_api.types.AgentSearchResponse</title>
<polygon fill="none" stroke="black" points="209,-53 209,-167 462,-167 462,-53 209,-53"/>
<text text-anchor="start" x="274.5" y="-151.8" font-family="Times,serif" font-size="14.00">AgentSearchResponse</text>
<polyline fill="none" stroke="black" points="209,-144 462,-144 "/>
<text text-anchor="start" x="217" y="-128.8" font-family="Times,serif" font-size="14.00">metadata : Mapping[str, JsonValue]</text>
<text text-anchor="start" x="217" y="-113.8" font-family="Times,serif" font-size="14.00">results : list[VectorSearchResultTypedDict]</text>
<text text-anchor="start" x="217" y="-98.8" font-family="Times,serif" font-size="14.00">took_ms : int</text>
<text text-anchor="start" x="217" y="-83.8" font-family="Times,serif" font-size="14.00">total : int</text>
<polyline fill="none" stroke="black" points="209,-76 462,-76 "/>
<text text-anchor="start" x="333.5" y="-60.8" font-family="Times,serif" font-size="14.00"> </text>
</g>
<!-- search_api.bm25_index.BM25Doc -->
<g id="node3" class="node">
<title>search_api.bm25_index.BM25Doc</title>
<polygon fill="none" stroke="black" points="480.5,-38 480.5,-182 590.5,-182 590.5,-38 480.5,-38"/>
<text text-anchor="start" x="506.5" y="-166.8" font-family="Times,serif" font-size="14.00">BM25Doc</text>
<polyline fill="none" stroke="black" points="480.5,-159 590.5,-159 "/>
<text text-anchor="start" x="488.5" y="-143.8" font-family="Times,serif" font-size="14.00">chunk_id : str</text>
<text text-anchor="start" x="488.5" y="-128.8" font-family="Times,serif" font-size="14.00">dl : float</text>
<text text-anchor="start" x="488.5" y="-113.8" font-family="Times,serif" font-size="14.00">doc_id : str</text>
<text text-anchor="start" x="488.5" y="-98.8" font-family="Times,serif" font-size="14.00">section : str</text>
<text text-anchor="start" x="488.5" y="-83.8" font-family="Times,serif" font-size="14.00">tf : dict[str, float]</text>
<text text-anchor="start" x="488.5" y="-68.8" font-family="Times,serif" font-size="14.00">title : str</text>
<polyline fill="none" stroke="black" points="480.5,-61 590.5,-61 "/>
<text text-anchor="start" x="533.5" y="-45.8" font-family="Times,serif" font-size="14.00"> </text>
</g>
<!-- search_api.bm25_index.BM25Index -->
<g id="node4" class="node">
<title>search_api.bm25_index.BM25Index</title>
<polygon fill="none" stroke="black" points="608.5,-0.5 608.5,-219.5 880.5,-219.5 880.5,-0.5 608.5,-0.5"/>
<text text-anchor="start" x="711" y="-204.3" font-family="Times,serif" font-size="14.00">BM25Index</text>
<polyline fill="none" stroke="black" points="608.5,-196.5 880.5,-196.5 "/>
<text text-anchor="start" x="684.5" y="-181.3" font-family="Times,serif" font-size="14.00">N : int</text>
<text text-anchor="start" x="684.5" y="-166.3" font-family="Times,serif" font-size="14.00">avgdl : float</text>
<text text-anchor="start" x="684.5" y="-151.3" font-family="Times,serif" font-size="14.00">b : float</text>
<text text-anchor="start" x="684.5" y="-136.3" font-family="Times,serif" font-size="14.00">df : dict[str, int]</text>
<text text-anchor="start" x="684.5" y="-121.3" font-family="Times,serif" font-size="14.00">docs : list[BM25Doc]</text>
<text text-anchor="start" x="684.5" y="-106.3" font-family="Times,serif" font-size="14.00">k1 : float</text>
<polyline fill="none" stroke="black" points="608.5,-98.5 880.5,-98.5 "/>
<text text-anchor="start" x="616.5" y="-83.3" font-family="Times,serif" font-size="14.00">build_from_duckdb(db_path: str): BM25Index</text>
<text text-anchor="start" x="616.5" y="-68.3" font-family="Times,serif" font-size="14.00">doc(index: int): BM25Doc</text>
<text text-anchor="start" x="616.5" y="-53.3" font-family="Times,serif" font-size="14.00">from_parquet(path: str): BM25Index</text>
<text text-anchor="start" x="616.5" y="-38.3" font-family="Times,serif" font-size="14.00">load(path: str): BM25Index</text>
<text text-anchor="start" x="616.5" y="-23.3" font-family="Times,serif" font-size="14.00">save(path: str): None</text>
<text text-anchor="start" x="616.5" y="-8.3" font-family="Times,serif" font-size="14.00">search(query: str, k: int): list[tuple[str, float]]</text>
</g>
<!-- search_api.types.BM25IndexProtocol -->
<g id="node5" class="node">
<title>search_api.types.BM25IndexProtocol</title>
<polygon fill="none" stroke="black" points="899,-74.6 899,-145.4 1160,-145.4 1160,-74.6 899,-74.6"/>
<text text-anchor="start" x="973.5" y="-130.2" font-family="Times,serif" font-size="14.00">BM25IndexProtocol</text>
<polyline fill="none" stroke="black" points="899,-122.4 1160,-122.4 "/>
<polyline fill="none" stroke="black" points="899,-97.6 1160,-97.6 "/>
<text text-anchor="start" x="907" y="-82.4" font-family="Times,serif" font-size="14.00">search(query: str, k: int): list[tuple[str, float]]</text>
</g>
<!-- search_api.kg_mock.ConceptMeta -->
<g id="node6" class="node">
<title>search_api.kg_mock.ConceptMeta</title>
<polygon fill="none" stroke="black" points="1178,-68 1178,-152 1297,-152 1297,-68 1178,-68"/>
<text text-anchor="start" x="1200.5" y="-136.8" font-family="Times,serif" font-size="14.00">ConceptMeta</text>
<polyline fill="none" stroke="black" points="1178,-129 1297,-129 "/>
<text text-anchor="start" x="1186" y="-113.8" font-family="Times,serif" font-size="14.00">keywords : list[str]</text>
<text text-anchor="start" x="1186" y="-98.8" font-family="Times,serif" font-size="14.00">label : str</text>
<polyline fill="none" stroke="black" points="1178,-91 1297,-91 "/>
<text text-anchor="start" x="1235.5" y="-75.8" font-family="Times,serif" font-size="14.00"> </text>
</g>
<!-- search_api.app.CorrelationIDMiddleware -->
<g id="node7" class="node">
<title>search_api.app.CorrelationIDMiddleware</title>
<polygon fill="none" stroke="black" points="1315,-75.5 1315,-144.5 1918,-144.5 1918,-75.5 1315,-75.5"/>
<text text-anchor="start" x="1545.5" y="-129.3" font-family="Times,serif" font-size="14.00">CorrelationIDMiddleware</text>
<polyline fill="none" stroke="black" points="1315,-121.5 1918,-121.5 "/>
<text text-anchor="start" x="1534.5" y="-106.3" font-family="Times,serif" font-size="14.00">HEADER_NAME : Final[str]</text>
<polyline fill="none" stroke="black" points="1315,-98.5 1918,-98.5 "/>
<text text-anchor="start" x="1323" y="-83.3" font-family="Times,serif" font-size="14.00">dispatch(request: StarletteRequest, call_next: Callable[[StarletteRequest], Awaitable[Response]]): Response</text>
</g>
<!-- search_api.faiss_adapter.DenseVecs -->
<g id="node8" class="node">
<title>search_api.faiss_adapter.DenseVecs</title>
<polygon fill="none" stroke="black" points="1936,-68 1936,-152 2041,-152 2041,-68 1936,-68"/>
<text text-anchor="start" x="1958.5" y="-136.8" font-family="Times,serif" font-size="14.00">DenseVecs</text>
<polyline fill="none" stroke="black" points="1936,-129 2041,-129 "/>
<text text-anchor="start" x="1944" y="-113.8" font-family="Times,serif" font-size="14.00">ids : list[str]</text>
<text text-anchor="start" x="1944" y="-98.8" font-family="Times,serif" font-size="14.00">matrix : ndarray</text>
<polyline fill="none" stroke="black" points="1936,-91 2041,-91 "/>
<text text-anchor="start" x="1986.5" y="-75.8" font-family="Times,serif" font-size="14.00"> </text>
</g>
<!-- search_api.faiss_adapter.FaissAdapter -->
<g id="node9" class="node">
<title>search_api.faiss_adapter.FaissAdapter</title>
<polygon fill="none" stroke="black" points="1758.5,-271.5 1758.5,-520.5 2218.5,-520.5 2218.5,-271.5 1758.5,-271.5"/>
<text text-anchor="start" x="1952.5" y="-505.3" font-family="Times,serif" font-size="14.00">FaissAdapter</text>
<polyline fill="none" stroke="black" points="1758.5,-497.5 2218.5,-497.5 "/>
<text text-anchor="start" x="1863.5" y="-482.3" font-family="Times,serif" font-size="14.00">cpu_matrix : FloatMatrix | None</text>
<text text-anchor="start" x="1863.5" y="-467.3" font-family="Times,serif" font-size="14.00">db_path : str</text>
<text text-anchor="start" x="1863.5" y="-452.3" font-family="Times,serif" font-size="14.00">factory : str</text>
<text text-anchor="start" x="1863.5" y="-437.3" font-family="Times,serif" font-size="14.00">idmap : list[str] | None</text>
<text text-anchor="start" x="1863.5" y="-422.3" font-family="Times,serif" font-size="14.00">index : FaissIndexProtocol | None, NoneType</text>
<text text-anchor="start" x="1863.5" y="-407.3" font-family="Times,serif" font-size="14.00">metric : str</text>
<text text-anchor="start" x="1863.5" y="-392.3" font-family="Times,serif" font-size="14.00">nprobe : int</text>
<text text-anchor="start" x="1863.5" y="-377.3" font-family="Times,serif" font-size="14.00">use_cuvs : bool</text>
<text text-anchor="start" x="1863.5" y="-362.3" font-family="Times,serif" font-size="14.00">use_gpu : bool</text>
<text text-anchor="start" x="1863.5" y="-347.3" font-family="Times,serif" font-size="14.00">vecs : DenseVecs | None</text>
<polyline fill="none" stroke="black" points="1758.5,-339.5 2218.5,-339.5 "/>
<text text-anchor="start" x="1766.5" y="-324.3" font-family="Times,serif" font-size="14.00">build(): None</text>
<text text-anchor="start" x="1766.5" y="-309.3" font-family="Times,serif" font-size="14.00">load_or_build(cpu_index_path: str | None): None</text>
<text text-anchor="start" x="1766.5" y="-294.3" font-family="Times,serif" font-size="14.00">save(index_uri: str, idmap_uri: str | None): None</text>
<text text-anchor="start" x="1766.5" y="-279.3" font-family="Times,serif" font-size="14.00">search(query: Sequence[float] | NDArray[np.float32], k: int): list[tuple[str, float]]</text>
</g>
<!-- search_api.faiss_adapter.DenseVecs&#45;&gt;search_api.faiss_adapter.FaissAdapter -->
<g id="edge6" class="edge">
<title>search_api.faiss_adapter.DenseVecs&#45;&gt;search_api.faiss_adapter.FaissAdapter</title>
<path fill="none" stroke="black" d="M1988.5,-152.3C1988.5,-180.74 1988.5,-220.28 1988.5,-259.21"/>
<polygon fill="none" stroke="black" points="1988.5,-259.25 1992.5,-265.25 1988.5,-271.25 1984.5,-265.25 1988.5,-259.25"/>
<text text-anchor="middle" x="2001" y="-241.8" font-family="Times,serif" font-size="14.00" fill="green">vecs</text>
</g>
<!-- search_api.faiss_adapter.FaissAdapterConfig -->
<g id="node10" class="node">
<title>search_api.faiss_adapter.FaissAdapterConfig</title>
<polygon fill="none" stroke="black" points="2059.5,-38 2059.5,-182 2269.5,-182 2269.5,-38 2059.5,-38"/>
<text text-anchor="start" x="2110" y="-166.8" font-family="Times,serif" font-size="14.00">FaissAdapterConfig</text>
<polyline fill="none" stroke="black" points="2059.5,-159 2269.5,-159 "/>
<text text-anchor="start" x="2067.5" y="-143.8" font-family="Times,serif" font-size="14.00">factory : str</text>
<text text-anchor="start" x="2067.5" y="-128.8" font-family="Times,serif" font-size="14.00">gpu_devices : Sequence[int] | None</text>
<text text-anchor="start" x="2067.5" y="-113.8" font-family="Times,serif" font-size="14.00">metric : str</text>
<text text-anchor="start" x="2067.5" y="-98.8" font-family="Times,serif" font-size="14.00">nprobe : int</text>
<text text-anchor="start" x="2067.5" y="-83.8" font-family="Times,serif" font-size="14.00">use_cuvs : bool</text>
<text text-anchor="start" x="2067.5" y="-68.8" font-family="Times,serif" font-size="14.00">use_gpu : bool</text>
<polyline fill="none" stroke="black" points="2059.5,-61 2269.5,-61 "/>
<text text-anchor="start" x="2162.5" y="-45.8" font-family="Times,serif" font-size="14.00"> </text>
</g>
<!-- search_api.vectorstore_factory.FaissAdapterSettings -->
<g id="node11" class="node">
<title>search_api.vectorstore_factory.FaissAdapterSettings</title>
<polygon fill="none" stroke="black" points="2428.5,-301.5 2428.5,-490.5 2592.5,-490.5 2592.5,-301.5 2428.5,-301.5"/>
<text text-anchor="start" x="2453" y="-475.3" font-family="Times,serif" font-size="14.00">FaissAdapterSettings</text>
<polyline fill="none" stroke="black" points="2428.5,-467.5 2592.5,-467.5 "/>
<text text-anchor="start" x="2436.5" y="-452.3" font-family="Times,serif" font-size="14.00">db_path : str</text>
<text text-anchor="start" x="2436.5" y="-437.3" font-family="Times,serif" font-size="14.00">factory : str</text>
<text text-anchor="start" x="2436.5" y="-422.3" font-family="Times,serif" font-size="14.00">gpu_devices : tuple[int, ...]</text>
<text text-anchor="start" x="2436.5" y="-407.3" font-family="Times,serif" font-size="14.00">index_path : str</text>
<text text-anchor="start" x="2436.5" y="-392.3" font-family="Times,serif" font-size="14.00">metric : str</text>
<text text-anchor="start" x="2436.5" y="-377.3" font-family="Times,serif" font-size="14.00">nprobe : int</text>
<text text-anchor="start" x="2436.5" y="-362.3" font-family="Times,serif" font-size="14.00">timeout_seconds : int</text>
<text text-anchor="start" x="2436.5" y="-347.3" font-family="Times,serif" font-size="14.00">use_cuvs : bool</text>
<text text-anchor="start" x="2436.5" y="-332.3" font-family="Times,serif" font-size="14.00">use_gpu : bool</text>
<polyline fill="none" stroke="black" points="2428.5,-324.5 2592.5,-324.5 "/>
<text text-anchor="start" x="2508.5" y="-309.3" font-family="Times,serif" font-size="14.00"> </text>
</g>
<!-- search_api.types.FaissIndexProtocol -->
<g id="node12" class="node">
<title>search_api.types.FaissIndexProtocol</title>
<polygon fill="none" stroke="black" points="2751,-52.1 2751,-167.9 3230,-167.9 3230,-52.1 2751,-52.1"/>
<text text-anchor="start" x="2938" y="-152.7" font-family="Times,serif" font-size="14.00">FaissIndexProtocol</text>
<polyline fill="none" stroke="black" points="2751,-144.9 3230,-144.9 "/>
<polyline fill="none" stroke="black" points="2751,-120.1 3230,-120.1 "/>
<text text-anchor="start" x="2759" y="-104.9" font-family="Times,serif" font-size="14.00">add(vectors: VectorArray): None</text>
<text text-anchor="start" x="2759" y="-89.9" font-family="Times,serif" font-size="14.00">add_with_ids(vectors: VectorArray, ids: IndexArray): None</text>
<text text-anchor="start" x="2759" y="-74.9" font-family="Times,serif" font-size="14.00">search(vectors: VectorArray, k: int): tuple[NDArray[np.float32], NDArray[np.int64]]</text>
<text text-anchor="start" x="2759" y="-59.9" font-family="Times,serif" font-size="14.00">train(vectors: VectorArray): None</text>
</g>
<!-- search_api.types.FaissModuleProtocol -->
<g id="node13" class="node">
<title>search_api.types.FaissModuleProtocol</title>
<polygon fill="none" stroke="black" points="2900,-316.5 2900,-475.5 3359,-475.5 3359,-316.5 2900,-316.5"/>
<text text-anchor="start" x="3071" y="-460.3" font-family="Times,serif" font-size="14.00">FaissModuleProtocol</text>
<polyline fill="none" stroke="black" points="2900,-452.5 3359,-452.5 "/>
<text text-anchor="start" x="2941.5" y="-437.3" font-family="Times,serif" font-size="14.00">index_flat_ip : Callable[[int], FaissIndexProtocol]</text>
<text text-anchor="start" x="2941.5" y="-422.3" font-family="Times,serif" font-size="14.00">index_id_map2 : Callable[[FaissIndexProtocol], FaissIndexProtocol]</text>
<text text-anchor="start" x="2941.5" y="-407.3" font-family="Times,serif" font-size="14.00">metric_inner_product : int</text>
<text text-anchor="start" x="2941.5" y="-392.3" font-family="Times,serif" font-size="14.00">metric_l2 : int</text>
<text text-anchor="start" x="2941.5" y="-377.3" font-family="Times,serif" font-size="14.00">normalize_l2 : Callable[[VectorArray], None]</text>
<polyline fill="none" stroke="black" points="2900,-369.5 3359,-369.5 "/>
<text text-anchor="start" x="2908" y="-354.3" font-family="Times,serif" font-size="14.00">index_factory(dimension: int, factory_string: str, metric: int): FaissIndexProtocol</text>
<text text-anchor="start" x="2908" y="-339.3" font-family="Times,serif" font-size="14.00">read_index(path: str): FaissIndexProtocol</text>
<text text-anchor="start" x="2908" y="-324.3" font-family="Times,serif" font-size="14.00">write_index(index: FaissIndexProtocol, path: str): None</text>
</g>
<!-- search_api.vectorstore_factory.FaissVectorstoreFactory -->
<g id="node14" class="node">
<title>search_api.vectorstore_factory.FaissVectorstoreFactory</title>
<polygon fill="none" stroke="black" points="2288,-53 2288,-167 2733,-167 2733,-53 2288,-53"/>
<text text-anchor="start" x="2445" y="-151.8" font-family="Times,serif" font-size="14.00">FaissVectorstoreFactory</text>
<polyline fill="none" stroke="black" points="2288,-144 2733,-144 "/>
<text text-anchor="start" x="2489.5" y="-128.8" font-family="Times,serif" font-size="14.00">settings</text>
<polyline fill="none" stroke="black" points="2288,-121 2733,-121 "/>
<text text-anchor="start" x="2296" y="-105.8" font-family="Times,serif" font-size="14.00">build_adapter(): FaissAdapter</text>
<text text-anchor="start" x="2296" y="-90.8" font-family="Times,serif" font-size="14.00">build_index(): FaissAdapter</text>
<text text-anchor="start" x="2296" y="-75.8" font-family="Times,serif" font-size="14.00">load_or_build(cpu_index_path: str | None): FaissAdapter</text>
<text text-anchor="start" x="2296" y="-60.8" font-family="Times,serif" font-size="14.00">save_index(adapter: FaissAdapter, index_uri: str, idmap_uri: str | None): None</text>
</g>
<!-- search_api.vectorstore_factory.FaissVectorstoreFactory&#45;&gt;search_api.vectorstore_factory.FaissAdapterSettings -->
<g id="edge5" class="edge">
<title>search_api.vectorstore_factory.FaissVectorstoreFactory&#45;&gt;search_api.vectorstore_factory.FaissAdapterSettings</title>
<path fill="none" stroke="black" d="M2510.5,-167.11C2510.5,-202.43 2510.5,-249.1 2510.5,-291.01"/>
<polygon fill="black" stroke="black" points="2510.5,-301.27 2506,-291.27 2510.5,-296.27 2510.5,-291.27 2510.5,-291.27 2510.5,-291.27 2510.5,-296.27 2515,-291.27 2510.5,-301.27 2510.5,-301.27"/>
<text text-anchor="middle" x="2531.5" y="-241.8" font-family="Times,serif" font-size="14.00" fill="green">settings</text>
</g>
<!-- search_api.fixture_index.FixtureDoc -->
<g id="node15" class="node">
<title>search_api.fixture_index.FixtureDoc</title>
<polygon fill="none" stroke="black" points="3608.5,-331.5 3608.5,-460.5 3700.5,-460.5 3700.5,-331.5 3608.5,-331.5"/>
<text text-anchor="start" x="3623.5" y="-445.3" font-family="Times,serif" font-size="14.00">FixtureDoc</text>
<polyline fill="none" stroke="black" points="3608.5,-437.5 3700.5,-437.5 "/>
<text text-anchor="start" x="3616.5" y="-422.3" font-family="Times,serif" font-size="14.00">chunk_id : str</text>
<text text-anchor="start" x="3616.5" y="-407.3" font-family="Times,serif" font-size="14.00">doc_id : str</text>
<text text-anchor="start" x="3616.5" y="-392.3" font-family="Times,serif" font-size="14.00">section : str</text>
<text text-anchor="start" x="3616.5" y="-377.3" font-family="Times,serif" font-size="14.00">text : str</text>
<text text-anchor="start" x="3616.5" y="-362.3" font-family="Times,serif" font-size="14.00">title : str</text>
<polyline fill="none" stroke="black" points="3608.5,-354.5 3700.5,-354.5 "/>
<text text-anchor="start" x="3652.5" y="-339.3" font-family="Times,serif" font-size="14.00"> </text>
</g>
<!-- search_api.fixture_index.FixtureIndex -->
<g id="node16" class="node">
<title>search_api.fixture_index.FixtureIndex</title>
<polygon fill="none" stroke="black" points="3523,-30.5 3523,-189.5 3786,-189.5 3786,-30.5 3523,-30.5"/>
<text text-anchor="start" x="3619.5" y="-174.3" font-family="Times,serif" font-size="14.00">FixtureIndex</text>
<polyline fill="none" stroke="black" points="3523,-166.5 3786,-166.5 "/>
<text text-anchor="start" x="3592.5" y="-151.3" font-family="Times,serif" font-size="14.00">N : int</text>
<text text-anchor="start" x="3592.5" y="-136.3" font-family="Times,serif" font-size="14.00">db_path : str</text>
<text text-anchor="start" x="3592.5" y="-121.3" font-family="Times,serif" font-size="14.00">df : dict[str, int]</text>
<text text-anchor="start" x="3592.5" y="-106.3" font-family="Times,serif" font-size="14.00">docs : list[FixtureDoc]</text>
<text text-anchor="start" x="3592.5" y="-91.3" font-family="Times,serif" font-size="14.00">root : Path</text>
<text text-anchor="start" x="3592.5" y="-76.3" font-family="Times,serif" font-size="14.00">tf : list[dict[str, int]]</text>
<polyline fill="none" stroke="black" points="3523,-68.5 3786,-68.5 "/>
<text text-anchor="start" x="3531" y="-53.3" font-family="Times,serif" font-size="14.00">doc(index: int): FixtureDoc</text>
<text text-anchor="start" x="3531" y="-38.3" font-family="Times,serif" font-size="14.00">search(query: str, k: int): list[tuple[int, float]]</text>
</g>
<!-- search_api.fixture_index.FixtureIndex&#45;&gt;search_api.fixture_index.FixtureDoc -->
<g id="edge1" class="edge">
<title>search_api.fixture_index.FixtureIndex&#45;&gt;search_api.fixture_index.FixtureDoc</title>
<path fill="none" stroke="black" d="M3654.5,-189.73C3654.5,-230.9 3654.5,-280.97 3654.5,-321.36"/>
<polygon fill="black" stroke="black" points="3654.5,-331.41 3650,-321.41 3654.5,-326.41 3654.5,-321.41 3654.5,-321.41 3654.5,-321.41 3654.5,-326.41 3659,-321.41 3654.5,-331.41 3654.5,-331.41"/>
<text text-anchor="middle" x="3667" y="-241.8" font-family="Times,serif" font-size="14.00" fill="green">docs</text>
</g>
<!-- search_api.types.GpuClonerOptionsProtocol -->
<g id="node17" class="node">
<title>search_api.types.GpuClonerOptionsProtocol</title>
<polygon fill="none" stroke="black" points="3804,-75.5 3804,-144.5 3969,-144.5 3969,-75.5 3804,-75.5"/>
<text text-anchor="start" x="3812" y="-129.3" font-family="Times,serif" font-size="14.00">GpuClonerOptionsProtocol</text>
<polyline fill="none" stroke="black" points="3804,-121.5 3969,-121.5 "/>
<text text-anchor="start" x="3844" y="-106.3" font-family="Times,serif" font-size="14.00">use_cuvs : bool</text>
<polyline fill="none" stroke="black" points="3804,-98.5 3969,-98.5 "/>
<text text-anchor="start" x="3884.5" y="-83.3" font-family="Times,serif" font-size="14.00"> </text>
</g>
<!-- search_api.faiss_gpu.GpuContext -->
<g id="node18" class="node">
<title>search_api.faiss_gpu.GpuContext</title>
<polygon fill="none" stroke="black" points="3248.5,-53 3248.5,-167 3504.5,-167 3504.5,-53 3248.5,-53"/>
<text text-anchor="start" x="3343" y="-151.8" font-family="Times,serif" font-size="14.00">GpuContext</text>
<polyline fill="none" stroke="black" points="3248.5,-144 3504.5,-144 "/>
<text text-anchor="start" x="3256.5" y="-128.8" font-family="Times,serif" font-size="14.00">device_ids : tuple[int, ...]</text>
<text text-anchor="start" x="3256.5" y="-113.8" font-family="Times,serif" font-size="14.00">module</text>
<text text-anchor="start" x="3256.5" y="-98.8" font-family="Times,serif" font-size="14.00">options : GpuClonerOptionsProtocol | None</text>
<text text-anchor="start" x="3256.5" y="-83.8" font-family="Times,serif" font-size="14.00">resources</text>
<polyline fill="none" stroke="black" points="3248.5,-76 3504.5,-76 "/>
<text text-anchor="start" x="3374.5" y="-60.8" font-family="Times,serif" font-size="14.00"> </text>
</g>
<!-- search_api.faiss_gpu.GpuContext&#45;&gt;search_api.types.FaissModuleProtocol -->
<g id="edge3" class="edge">
<title>search_api.faiss_gpu.GpuContext&#45;&gt;search_api.types.FaissModuleProtocol</title>
<path fill="none" stroke="black" d="M3327.7,-167.11C3292.54,-207.54 3244.44,-262.84 3204.43,-308.84"/>
<polygon fill="black" stroke="black" points="3197.83,-316.43 3201,-305.93 3201.11,-312.66 3204.39,-308.89 3204.39,-308.89 3204.39,-308.89 3201.11,-312.66 3207.79,-311.84 3197.83,-316.43 3197.83,-316.43"/>
<text text-anchor="middle" x="3281.5" y="-241.8" font-family="Times,serif" font-size="14.00" fill="green">module</text>
</g>
<!-- search_api.types.GpuResourcesProtocol -->
<g id="node19" class="node">
<title>search_api.types.GpuResourcesProtocol</title>
<polygon fill="none" stroke="black" points="3377,-360.6 3377,-431.4 3518,-431.4 3518,-360.6 3377,-360.6"/>
<text text-anchor="start" x="3385" y="-416.2" font-family="Times,serif" font-size="14.00">GpuResourcesProtocol</text>
<polyline fill="none" stroke="black" points="3377,-408.4 3518,-408.4 "/>
<polyline fill="none" stroke="black" points="3377,-383.6 3518,-383.6 "/>
<text text-anchor="start" x="3445.5" y="-368.4" font-family="Times,serif" font-size="14.00"> </text>
</g>
<!-- search_api.faiss_gpu.GpuContext&#45;&gt;search_api.types.GpuResourcesProtocol -->
<g id="edge4" class="edge">
<title>search_api.faiss_gpu.GpuContext&#45;&gt;search_api.types.GpuResourcesProtocol</title>
<path fill="none" stroke="black" d="M3390.53,-167.11C3403.99,-220.95 3424.04,-301.17 3436.42,-350.68"/>
<polygon fill="black" stroke="black" points="3438.86,-360.45 3432.07,-351.84 3437.65,-355.6 3436.44,-350.75 3436.44,-350.75 3436.44,-350.75 3437.65,-355.6 3440.8,-349.66 3438.86,-360.45 3438.86,-360.45"/>
<text text-anchor="middle" x="3438.5" y="-241.8" font-family="Times,serif" font-size="14.00" fill="green">resources</text>
</g>
<!-- search_api.app.ResponseValidationMiddleware -->
<g id="node20" class="node">
<title>search_api.app.ResponseValidationMiddleware</title>
<polygon fill="none" stroke="black" points="3987,-60.5 3987,-159.5 4590,-159.5 4590,-60.5 3987,-60.5"/>
<text text-anchor="start" x="4201.5" y="-144.3" font-family="Times,serif" font-size="14.00">ResponseValidationMiddleware</text>
<polyline fill="none" stroke="black" points="3987,-136.5 4590,-136.5 "/>
<text text-anchor="start" x="4190" y="-121.3" font-family="Times,serif" font-size="14.00">enabled : bool</text>
<text text-anchor="start" x="4190" y="-106.3" font-family="Times,serif" font-size="14.00">schema : dict[str, JsonValue] | None</text>
<text text-anchor="start" x="4190" y="-91.3" font-family="Times,serif" font-size="14.00">schema_path : NoneType</text>
<polyline fill="none" stroke="black" points="3987,-83.5 4590,-83.5 "/>
<text text-anchor="start" x="3995" y="-68.3" font-family="Times,serif" font-size="14.00">dispatch(request: StarletteRequest, call_next: Callable[[StarletteRequest], Awaitable[Response]]): Response</text>
</g>
<!-- search_api.schemas.SearchRequest -->
<g id="node21" class="node">
<title>search_api.schemas.SearchRequest</title>
<polygon fill="none" stroke="black" points="4608,-45.5 4608,-174.5 4811,-174.5 4811,-45.5 4608,-45.5"/>
<text text-anchor="start" x="4669" y="-159.3" font-family="Times,serif" font-size="14.00">SearchRequest</text>
<polyline fill="none" stroke="black" points="4608,-151.5 4811,-151.5 "/>
<text text-anchor="start" x="4616" y="-136.3" font-family="Times,serif" font-size="14.00">explain : bool</text>
<text text-anchor="start" x="4616" y="-121.3" font-family="Times,serif" font-size="14.00">filters : dict[str, JsonValue] | None</text>
<text text-anchor="start" x="4616" y="-106.3" font-family="Times,serif" font-size="14.00">k : int</text>
<text text-anchor="start" x="4616" y="-91.3" font-family="Times,serif" font-size="14.00">model_config : ConfigDict</text>
<text text-anchor="start" x="4616" y="-76.3" font-family="Times,serif" font-size="14.00">query : Optional[str]</text>
<polyline fill="none" stroke="black" points="4608,-68.5 4811,-68.5 "/>
<text text-anchor="start" x="4707.5" y="-53.3" font-family="Times,serif" font-size="14.00"> </text>
</g>
<!-- search_api.schemas.SearchResponse -->
<g id="node22" class="node">
<title>search_api.schemas.SearchResponse</title>
<polygon fill="none" stroke="black" points="4829.5,-68 4829.5,-152 5045.5,-152 5045.5,-68 4829.5,-68"/>
<text text-anchor="start" x="4893" y="-136.8" font-family="Times,serif" font-size="14.00">SearchResponse</text>
<polyline fill="none" stroke="black" points="4829.5,-129 5045.5,-129 "/>
<text text-anchor="start" x="4837.5" y="-113.8" font-family="Times,serif" font-size="14.00">model_config : ConfigDict</text>
<text text-anchor="start" x="4837.5" y="-98.8" font-family="Times,serif" font-size="14.00">results : Optional[list[SearchResult]]</text>
<polyline fill="none" stroke="black" points="4829.5,-91 5045.5,-91 "/>
<text text-anchor="start" x="4935.5" y="-75.8" font-family="Times,serif" font-size="14.00"> </text>
</g>
<!-- search_api.schemas.SearchResult -->
<g id="node23" class="node">
<title>search_api.schemas.SearchResult</title>
<polygon fill="none" stroke="black" points="5063.5,-15.5 5063.5,-204.5 5283.5,-204.5 5283.5,-15.5 5063.5,-15.5"/>
<text text-anchor="start" x="5137.5" y="-189.3" font-family="Times,serif" font-size="14.00">SearchResult</text>
<polyline fill="none" stroke="black" points="5063.5,-181.5 5283.5,-181.5 "/>
<text text-anchor="start" x="5071.5" y="-166.3" font-family="Times,serif" font-size="14.00">chunk_id : str</text>
<text text-anchor="start" x="5071.5" y="-151.3" font-family="Times,serif" font-size="14.00">concepts : Optional[list[dict[str, str]]]</text>
<text text-anchor="start" x="5071.5" y="-136.3" font-family="Times,serif" font-size="14.00">doc_id : str</text>
<text text-anchor="start" x="5071.5" y="-121.3" font-family="Times,serif" font-size="14.00">model_config : ConfigDict</text>
<text text-anchor="start" x="5071.5" y="-106.3" font-family="Times,serif" font-size="14.00">score : float</text>
<text text-anchor="start" x="5071.5" y="-91.3" font-family="Times,serif" font-size="14.00">section : str</text>
<text text-anchor="start" x="5071.5" y="-76.3" font-family="Times,serif" font-size="14.00">signals : Optional[dict[str, float]]</text>
<text text-anchor="start" x="5071.5" y="-61.3" font-family="Times,serif" font-size="14.00">spans : Optional[dict[str, int]]</text>
<text text-anchor="start" x="5071.5" y="-46.3" font-family="Times,serif" font-size="14.00">title : str</text>
<polyline fill="none" stroke="black" points="5063.5,-38.5 5283.5,-38.5 "/>
<text text-anchor="start" x="5171.5" y="-23.3" font-family="Times,serif" font-size="14.00"> </text>
</g>
<!-- search_api.splade_index.SpladeDoc -->
<g id="node24" class="node">
<title>search_api.splade_index.SpladeDoc</title>
<polygon fill="none" stroke="black" points="5387.5,-339 5387.5,-453 5479.5,-453 5479.5,-339 5387.5,-339"/>
<text text-anchor="start" x="5403.5" y="-437.8" font-family="Times,serif" font-size="14.00">SpladeDoc</text>
<polyline fill="none" stroke="black" points="5387.5,-430 5479.5,-430 "/>
<text text-anchor="start" x="5395.5" y="-414.8" font-family="Times,serif" font-size="14.00">chunk_id : str</text>
<text text-anchor="start" x="5395.5" y="-399.8" font-family="Times,serif" font-size="14.00">doc_id : str</text>
<text text-anchor="start" x="5395.5" y="-384.8" font-family="Times,serif" font-size="14.00">section : str</text>
<text text-anchor="start" x="5395.5" y="-369.8" font-family="Times,serif" font-size="14.00">text : str</text>
<polyline fill="none" stroke="black" points="5387.5,-362 5479.5,-362 "/>
<text text-anchor="start" x="5431.5" y="-346.8" font-family="Times,serif" font-size="14.00"> </text>
</g>
<!-- search_api.types.SpladeEncoderProtocol -->
<g id="node25" class="node">
<title>search_api.types.SpladeEncoderProtocol</title>
<polygon fill="none" stroke="black" points="5583,-74.6 5583,-145.4 5828,-145.4 5828,-74.6 5583,-74.6"/>
<text text-anchor="start" x="5641.5" y="-130.2" font-family="Times,serif" font-size="14.00">SpladeEncoderProtocol</text>
<polyline fill="none" stroke="black" points="5583,-122.4 5828,-122.4 "/>
<polyline fill="none" stroke="black" points="5583,-97.6 5828,-97.6 "/>
<text text-anchor="start" x="5591" y="-82.4" font-family="Times,serif" font-size="14.00">encode(texts: Sequence[str]): VectorArray</text>
</g>
<!-- search_api.splade_index.SpladeIndex -->
<g id="node26" class="node">
<title>search_api.splade_index.SpladeIndex</title>
<polygon fill="none" stroke="black" points="5302,-45.5 5302,-174.5 5565,-174.5 5565,-45.5 5302,-45.5"/>
<text text-anchor="start" x="5399.5" y="-159.3" font-family="Times,serif" font-size="14.00">SpladeIndex</text>
<polyline fill="none" stroke="black" points="5302,-151.5 5565,-151.5 "/>
<text text-anchor="start" x="5373" y="-136.3" font-family="Times,serif" font-size="14.00">N : int</text>
<text text-anchor="start" x="5373" y="-121.3" font-family="Times,serif" font-size="14.00">db_path : str</text>
<text text-anchor="start" x="5373" y="-106.3" font-family="Times,serif" font-size="14.00">df : dict[str, int]</text>
<text text-anchor="start" x="5373" y="-91.3" font-family="Times,serif" font-size="14.00">docs : list[SpladeDoc]</text>
<polyline fill="none" stroke="black" points="5302,-83.5 5565,-83.5 "/>
<text text-anchor="start" x="5310" y="-68.3" font-family="Times,serif" font-size="14.00">doc(index: int): SpladeDoc</text>
<text text-anchor="start" x="5310" y="-53.3" font-family="Times,serif" font-size="14.00">search(query: str, k: int): list[tuple[int, float]]</text>
</g>
<!-- search_api.splade_index.SpladeIndex&#45;&gt;search_api.splade_index.SpladeDoc -->
<g id="edge2" class="edge">
<title>search_api.splade_index.SpladeIndex&#45;&gt;search_api.splade_index.SpladeDoc</title>
<path fill="none" stroke="black" d="M5433.5,-174.74C5433.5,-220.5 5433.5,-282.04 5433.5,-328.43"/>
<polygon fill="black" stroke="black" points="5433.5,-338.69 5429,-328.69 5433.5,-333.69 5433.5,-328.69 5433.5,-328.69 5433.5,-328.69 5433.5,-333.69 5438,-328.69 5433.5,-338.69 5433.5,-338.69"/>
<text text-anchor="middle" x="5446" y="-241.8" font-family="Times,serif" font-size="14.00" fill="green">docs</text>
</g>
<!-- search_api.types.VectorSearchResult -->
<g id="node27" class="node">
<title>search_api.types.VectorSearchResult</title>
<polygon fill="none" stroke="black" points="5846,-53 5846,-167 5969,-167 5969,-53 5846,-53"/>
<text text-anchor="start" x="5854" y="-151.8" font-family="Times,serif" font-size="14.00">VectorSearchResult</text>
<polyline fill="none" stroke="black" points="5846,-144 5969,-144 "/>
<text text-anchor="start" x="5854.5" y="-128.8" font-family="Times,serif" font-size="14.00">chunk_id : str</text>
<text text-anchor="start" x="5854.5" y="-113.8" font-family="Times,serif" font-size="14.00">doc_id : str</text>
<text text-anchor="start" x="5854.5" y="-98.8" font-family="Times,serif" font-size="14.00">score : float</text>
<text text-anchor="start" x="5854.5" y="-83.8" font-family="Times,serif" font-size="14.00">vector_score : float</text>
<polyline fill="none" stroke="black" points="5846,-76 5969,-76 "/>
<text text-anchor="start" x="5905.5" y="-60.8" font-family="Times,serif" font-size="14.00"> </text>
</g>
<!-- search_api.types.VectorSearchResultTypedDict -->
<g id="node28" class="node">
<title>search_api.types.VectorSearchResultTypedDict</title>
<polygon fill="none" stroke="black" points="5987,-8 5987,-212 6198,-212 6198,-8 5987,-8"/>
<text text-anchor="start" x="6010" y="-196.8" font-family="Times,serif" font-size="14.00">VectorSearchResultTypedDict</text>
<polyline fill="none" stroke="black" points="5987,-189 6198,-189 "/>
<text text-anchor="start" x="5995" y="-173.8" font-family="Times,serif" font-size="14.00">anchor : Mapping[str, int | None]</text>
<text text-anchor="start" x="5995" y="-158.8" font-family="Times,serif" font-size="14.00">kind : str</text>
<text text-anchor="start" x="5995" y="-143.8" font-family="Times,serif" font-size="14.00">lexical_score : float</text>
<text text-anchor="start" x="5995" y="-128.8" font-family="Times,serif" font-size="14.00">metadata : Mapping[str, JsonValue]</text>
<text text-anchor="start" x="5995" y="-113.8" font-family="Times,serif" font-size="14.00">module : str</text>
<text text-anchor="start" x="5995" y="-98.8" font-family="Times,serif" font-size="14.00">package : str</text>
<text text-anchor="start" x="5995" y="-83.8" font-family="Times,serif" font-size="14.00">qname : str</text>
<text text-anchor="start" x="5995" y="-68.8" font-family="Times,serif" font-size="14.00">score : float</text>
<text text-anchor="start" x="5995" y="-53.8" font-family="Times,serif" font-size="14.00">symbol_id : str</text>
<text text-anchor="start" x="5995" y="-38.8" font-family="Times,serif" font-size="14.00">vector_score : float</text>
<polyline fill="none" stroke="black" points="5987,-31 6198,-31 "/>
<text text-anchor="start" x="6090.5" y="-15.8" font-family="Times,serif" font-size="14.00"> </text>
</g>
<!-- search_api.types._FaissModuleAdapter -->
<g id="node29" class="node">
<title>search_api.types._FaissModuleAdapter</title>
<polygon fill="none" stroke="black" points="6216,-30.5 6216,-189.5 6675,-189.5 6675,-30.5 6216,-30.5"/>
<text text-anchor="start" x="6385" y="-174.3" font-family="Times,serif" font-size="14.00">_FaissModuleAdapter</text>
<polyline fill="none" stroke="black" points="6216,-166.5 6675,-166.5 "/>
<text text-anchor="start" x="6373.5" y="-151.3" font-family="Times,serif" font-size="14.00">metric_inner_product : int</text>
<text text-anchor="start" x="6373.5" y="-136.3" font-family="Times,serif" font-size="14.00">metric_l2 : int</text>
<polyline fill="none" stroke="black" points="6216,-128.5 6675,-128.5 "/>
<text text-anchor="start" x="6224" y="-113.3" font-family="Times,serif" font-size="14.00">index_factory(dimension: int, factory_string: str, metric: int): FaissIndexProtocol</text>
<text text-anchor="start" x="6224" y="-98.3" font-family="Times,serif" font-size="14.00">index_flat_ip(dimension: int): FaissIndexProtocol</text>
<text text-anchor="start" x="6224" y="-83.3" font-family="Times,serif" font-size="14.00">index_id_map2(index: FaissIndexProtocol): FaissIndexProtocol</text>
<text text-anchor="start" x="6224" y="-68.3" font-family="Times,serif" font-size="14.00">normalize_l2(vectors: VectorArray): None</text>
<text text-anchor="start" x="6224" y="-53.3" font-family="Times,serif" font-size="14.00">read_index(path: str): FaissIndexProtocol</text>
<text text-anchor="start" x="6224" y="-38.3" font-family="Times,serif" font-size="14.00">write_index(index: FaissIndexProtocol, path: str): None</text>
</g>
<!-- search_api.types._LegacyFaissModule -->
<g id="node30" class="node">
<title>search_api.types._LegacyFaissModule</title>
<polygon fill="none" stroke="black" points="6693.5,-45.5 6693.5,-174.5 7027.5,-174.5 7027.5,-45.5 6693.5,-45.5"/>
<text text-anchor="start" x="6801.5" y="-159.3" font-family="Times,serif" font-size="14.00">_LegacyFaissModule</text>
<polyline fill="none" stroke="black" points="6693.5,-151.5 7027.5,-151.5 "/>
<text text-anchor="start" x="6701.5" y="-136.3" font-family="Times,serif" font-size="14.00">METRIC_INNER_PRODUCT : int</text>
<text text-anchor="start" x="6701.5" y="-121.3" font-family="Times,serif" font-size="14.00">METRIC_L2 : int</text>
<text text-anchor="start" x="6701.5" y="-106.3" font-family="Times,serif" font-size="14.00">index_factory : Callable[[int, str, int], FaissIndexProtocol]</text>
<text text-anchor="start" x="6701.5" y="-91.3" font-family="Times,serif" font-size="14.00">read_index : Callable[[str], FaissIndexProtocol]</text>
<text text-anchor="start" x="6701.5" y="-76.3" font-family="Times,serif" font-size="14.00">write_index : Callable[[FaissIndexProtocol, str], None]</text>
<polyline fill="none" stroke="black" points="6693.5,-68.5 7027.5,-68.5 "/>
<text text-anchor="start" x="6858.5" y="-53.3" font-family="Times,serif" font-size="14.00"> </text>
</g>
</g>
</svg>

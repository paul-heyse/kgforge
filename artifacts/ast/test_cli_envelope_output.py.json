Module(body=[Expr(value=Constant(value='Integration tests for docstring builder CLI envelope emission.', lineno=1, col_offset=0, end_lineno=1, end_col_offset=68), lineno=1, col_offset=0, end_lineno=1, end_col_offset=68), ImportFrom(module='__future__', names=[alias(name='annotations', lineno=3, col_offset=23, end_lineno=3, end_col_offset=34)], level=0, lineno=3, col_offset=0, end_lineno=3, end_col_offset=34), Import(names=[alias(name='json', lineno=5, col_offset=7, end_lineno=5, end_col_offset=11)], lineno=5, col_offset=0, end_lineno=5, end_col_offset=11), ImportFrom(module='pathlib', names=[alias(name='Path', lineno=6, col_offset=20, end_lineno=6, end_col_offset=24)], level=0, lineno=6, col_offset=0, end_lineno=6, end_col_offset=24), ImportFrom(module='tools.docstring_builder', names=[alias(name='cli', lineno=8, col_offset=36, end_lineno=8, end_col_offset=39)], level=0, lineno=8, col_offset=0, end_lineno=8, end_col_offset=39), FunctionDef(name='test_schema_command_writes_cli_envelope', args=arguments(args=[arg(arg='monkeypatch', lineno=11, col_offset=44, end_lineno=11, end_col_offset=55), arg(arg='tmp_path', lineno=11, col_offset=57, end_lineno=11, end_col_offset=65)]), body=[Assign(targets=[Name(id='envelope_dir', ctx=Store(), lineno=12, col_offset=4, end_lineno=12, end_col_offset=16)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=12, col_offset=19, end_lineno=12, end_col_offset=27), op=Div(), right=Constant(value='cli', lineno=12, col_offset=30, end_lineno=12, end_col_offset=35), lineno=12, col_offset=19, end_lineno=12, end_col_offset=35), lineno=12, col_offset=4, end_lineno=12, end_col_offset=35), Expr(value=Call(func=Attribute(value=Name(id='monkeypatch', ctx=Load(), lineno=13, col_offset=4, end_lineno=13, end_col_offset=15), attr='setattr', ctx=Load(), lineno=13, col_offset=4, end_lineno=13, end_col_offset=23), args=[Name(id='cli', ctx=Load(), lineno=13, col_offset=24, end_lineno=13, end_col_offset=27), Constant(value='CLI_ENVELOPE_DIR', lineno=13, col_offset=29, end_lineno=13, end_col_offset=47), Name(id='envelope_dir', ctx=Load(), lineno=13, col_offset=49, end_lineno=13, end_col_offset=61)], lineno=13, col_offset=4, end_lineno=13, end_col_offset=62), lineno=13, col_offset=4, end_lineno=13, end_col_offset=62), Assign(targets=[Name(id='output_target', ctx=Store(), lineno=15, col_offset=4, end_lineno=15, end_col_offset=17)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=15, col_offset=20, end_lineno=15, end_col_offset=28), op=Div(), right=Constant(value='schema.json', lineno=15, col_offset=31, end_lineno=15, end_col_offset=44), lineno=15, col_offset=20, end_lineno=15, end_col_offset=44), lineno=15, col_offset=4, end_lineno=15, end_col_offset=44), Assign(targets=[Name(id='exit_code', ctx=Store(), lineno=17, col_offset=4, end_lineno=17, end_col_offset=13)], value=Call(func=Attribute(value=Name(id='cli', ctx=Load(), lineno=17, col_offset=16, end_lineno=17, end_col_offset=19), attr='main', ctx=Load(), lineno=17, col_offset=16, end_lineno=17, end_col_offset=24), args=[List(elts=[Constant(value='schema', lineno=17, col_offset=26, end_lineno=17, end_col_offset=34), Constant(value='--output', lineno=17, col_offset=36, end_lineno=17, end_col_offset=46), Call(func=Name(id='str', ctx=Load(), lineno=17, col_offset=48, end_lineno=17, end_col_offset=51), args=[Name(id='output_target', ctx=Load(), lineno=17, col_offset=52, end_lineno=17, end_col_offset=65)], lineno=17, col_offset=48, end_lineno=17, end_col_offset=66)], ctx=Load(), lineno=17, col_offset=25, end_lineno=17, end_col_offset=67)], lineno=17, col_offset=16, end_lineno=17, end_col_offset=68), lineno=17, col_offset=4, end_lineno=17, end_col_offset=68), Assert(test=Compare(left=Name(id='exit_code', ctx=Load(), lineno=19, col_offset=11, end_lineno=19, end_col_offset=20), ops=[Eq()], comparators=[Constant(value=0, lineno=19, col_offset=24, end_lineno=19, end_col_offset=25)], lineno=19, col_offset=11, end_lineno=19, end_col_offset=25), lineno=19, col_offset=4, end_lineno=19, end_col_offset=25), Assign(targets=[Name(id='envelope_path', ctx=Store(), lineno=20, col_offset=4, end_lineno=20, end_col_offset=17)], value=BinOp(left=Name(id='envelope_dir', ctx=Load(), lineno=20, col_offset=20, end_lineno=20, end_col_offset=32), op=Div(), right=Constant(value='docstring-builder-schema.json', lineno=20, col_offset=35, end_lineno=20, end_col_offset=66), lineno=20, col_offset=20, end_lineno=20, end_col_offset=66), lineno=20, col_offset=4, end_lineno=20, end_col_offset=66), Assign(targets=[Name(id='payload', ctx=Store(), lineno=21, col_offset=4, end_lineno=21, end_col_offset=11)], value=Call(func=Attribute(value=Name(id='json', ctx=Load(), lineno=21, col_offset=14, end_lineno=21, end_col_offset=18), attr='loads', ctx=Load(), lineno=21, col_offset=14, end_lineno=21, end_col_offset=24), args=[Call(func=Attribute(value=Name(id='envelope_path', ctx=Load(), lineno=21, col_offset=25, end_lineno=21, end_col_offset=38), attr='read_text', ctx=Load(), lineno=21, col_offset=25, end_lineno=21, end_col_offset=48), keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=21, col_offset=58, end_lineno=21, end_col_offset=65), lineno=21, col_offset=49, end_lineno=21, end_col_offset=65)], lineno=21, col_offset=25, end_lineno=21, end_col_offset=66)], lineno=21, col_offset=14, end_lineno=21, end_col_offset=67), lineno=21, col_offset=4, end_lineno=21, end_col_offset=67), Assert(test=Compare(left=Subscript(value=Name(id='payload', ctx=Load(), lineno=23, col_offset=11, end_lineno=23, end_col_offset=18), slice=Constant(value='status', lineno=23, col_offset=19, end_lineno=23, end_col_offset=27), ctx=Load(), lineno=23, col_offset=11, end_lineno=23, end_col_offset=28), ops=[Eq()], comparators=[Constant(value='success', lineno=23, col_offset=32, end_lineno=23, end_col_offset=41)], lineno=23, col_offset=11, end_lineno=23, end_col_offset=41), lineno=23, col_offset=4, end_lineno=23, end_col_offset=41), Assert(test=Call(func=Name(id='any', ctx=Load(), lineno=24, col_offset=11, end_lineno=24, end_col_offset=14), args=[GeneratorExp(elt=Compare(left=Call(func=Attribute(value=Call(func=Name(id='Path', ctx=Load(), lineno=24, col_offset=15, end_lineno=24, end_col_offset=19), args=[Subscript(value=Name(id='entry', ctx=Load(), lineno=24, col_offset=20, end_lineno=24, end_col_offset=25), slice=Constant(value='path', lineno=24, col_offset=26, end_lineno=24, end_col_offset=32), ctx=Load(), lineno=24, col_offset=20, end_lineno=24, end_col_offset=33)], lineno=24, col_offset=15, end_lineno=24, end_col_offset=34), attr='resolve', ctx=Load(), lineno=24, col_offset=15, end_lineno=24, end_col_offset=42), lineno=24, col_offset=15, end_lineno=24, end_col_offset=44), ops=[Eq()], comparators=[Name(id='output_target', ctx=Load(), lineno=24, col_offset=48, end_lineno=24, end_col_offset=61)], lineno=24, col_offset=15, end_lineno=24, end_col_offset=61), generators=[comprehension(target=Name(id='entry', ctx=Store(), lineno=24, col_offset=66, end_lineno=24, end_col_offset=71), iter=Call(func=Attribute(value=Name(id='payload', ctx=Load(), lineno=24, col_offset=75, end_lineno=24, end_col_offset=82), attr='get', ctx=Load(), lineno=24, col_offset=75, end_lineno=24, end_col_offset=86), args=[Constant(value='files', lineno=24, col_offset=87, end_lineno=24, end_col_offset=94), List(ctx=Load(), lineno=24, col_offset=96, end_lineno=24, end_col_offset=98)], lineno=24, col_offset=75, end_lineno=24, end_col_offset=99), is_async=0)], lineno=24, col_offset=14, end_lineno=24, end_col_offset=100)], lineno=24, col_offset=11, end_lineno=24, end_col_offset=100), lineno=24, col_offset=4, end_lineno=24, end_col_offset=100)], returns=Constant(value=None, lineno=11, col_offset=70, end_lineno=11, end_col_offset=74), lineno=11, col_offset=0, end_lineno=24, end_col_offset=100)])
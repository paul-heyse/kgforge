Module(body=[Expr(value=Constant(value='Tests for the typed namespace registry and proxy helpers.\n\nThis module verifies that the NamespaceRegistry provides correct lazy loading, caching, and error\nhandling without relying on Any types.\n', lineno=1, col_offset=0, end_lineno=5, end_col_offset=3), lineno=1, col_offset=0, end_lineno=5, end_col_offset=3), ImportFrom(module='__future__', names=[alias(name='annotations', lineno=7, col_offset=23, end_lineno=7, end_col_offset=34)], level=0, lineno=7, col_offset=0, end_lineno=7, end_col_offset=34), ImportFrom(module='types', names=[alias(name='ModuleType', lineno=9, col_offset=18, end_lineno=9, end_col_offset=28)], level=0, lineno=9, col_offset=0, end_lineno=9, end_col_offset=28), ImportFrom(module='typing', names=[alias(name='TYPE_CHECKING', lineno=10, col_offset=19, end_lineno=10, end_col_offset=32), alias(name='NoReturn', lineno=10, col_offset=34, end_lineno=10, end_col_offset=42), alias(name='cast', lineno=10, col_offset=44, end_lineno=10, end_col_offset=48)], level=0, lineno=10, col_offset=0, end_lineno=10, end_col_offset=48), Import(names=[alias(name='pytest', lineno=12, col_offset=7, end_lineno=12, end_col_offset=13)], lineno=12, col_offset=0, end_lineno=12, end_col_offset=13), ImportFrom(module='tests.helpers', names=[alias(name='load_attribute', lineno=14, col_offset=26, end_lineno=14, end_col_offset=40)], level=0, lineno=14, col_offset=0, end_lineno=14, end_col_offset=40), If(test=Name(id='TYPE_CHECKING', ctx=Load(), lineno=16, col_offset=3, end_lineno=16, end_col_offset=16), body=[ImportFrom(module='collections.abc', names=[alias(name='Callable', lineno=17, col_offset=32, end_lineno=17, end_col_offset=40), alias(name='Iterable', lineno=17, col_offset=42, end_lineno=17, end_col_offset=50), alias(name='MutableMapping', lineno=17, col_offset=52, end_lineno=17, end_col_offset=66)], level=0, lineno=17, col_offset=4, end_lineno=17, end_col_offset=66), ImportFrom(module='kgfoundry._namespace_proxy', names=[alias(name='NamespaceRegistry', lineno=19, col_offset=43, end_lineno=19, end_col_offset=60)], level=0, lineno=19, col_offset=4, end_lineno=19, end_col_offset=60), Assign(targets=[Name(id='NamespaceRegistryType', ctx=Store(), lineno=21, col_offset=4, end_lineno=21, end_col_offset=25)], value=Subscript(value=Name(id='type', ctx=Load(), lineno=21, col_offset=28, end_lineno=21, end_col_offset=32), slice=Name(id='NamespaceRegistry', ctx=Load(), lineno=21, col_offset=33, end_lineno=21, end_col_offset=50), ctx=Load(), lineno=21, col_offset=28, end_lineno=21, end_col_offset=51), lineno=21, col_offset=4, end_lineno=21, end_col_offset=51)], lineno=16, col_offset=0, end_lineno=21, end_col_offset=51), Assign(targets=[Name(id='NamespaceRegistry', ctx=Store(), lineno=26, col_offset=0, end_lineno=26, end_col_offset=17)], value=Call(func=Name(id='cast', ctx=Load(), lineno=26, col_offset=20, end_lineno=26, end_col_offset=24), args=[Constant(value='NamespaceRegistryType', lineno=27, col_offset=4, end_lineno=27, end_col_offset=27), Call(func=Name(id='load_attribute', ctx=Load(), lineno=28, col_offset=4, end_lineno=28, end_col_offset=18), args=[Constant(value='kgfoundry._namespace_proxy', lineno=28, col_offset=19, end_lineno=28, end_col_offset=47), Constant(value='NamespaceRegistry', lineno=28, col_offset=49, end_lineno=28, end_col_offset=68)], lineno=28, col_offset=4, end_lineno=28, end_col_offset=69)], lineno=26, col_offset=20, end_lineno=29, end_col_offset=1), lineno=26, col_offset=0, end_lineno=29, end_col_offset=1), Assign(targets=[Name(id='namespace_exports', ctx=Store(), lineno=30, col_offset=0, end_lineno=30, end_col_offset=17)], value=Call(func=Name(id='cast', ctx=Load(), lineno=30, col_offset=20, end_lineno=30, end_col_offset=24), args=[Constant(value='Callable[[ModuleType], list[str]]', lineno=31, col_offset=4, end_lineno=31, end_col_offset=39), Call(func=Name(id='load_attribute', ctx=Load(), lineno=32, col_offset=4, end_lineno=32, end_col_offset=18), args=[Constant(value='kgfoundry._namespace_proxy', lineno=32, col_offset=19, end_lineno=32, end_col_offset=47), Constant(value='namespace_exports', lineno=32, col_offset=49, end_lineno=32, end_col_offset=68)], lineno=32, col_offset=4, end_lineno=32, end_col_offset=69)], lineno=30, col_offset=20, end_lineno=33, end_col_offset=1), lineno=30, col_offset=0, end_lineno=33, end_col_offset=1), Assign(targets=[Name(id='namespace_attach', ctx=Store(), lineno=34, col_offset=0, end_lineno=34, end_col_offset=16)], value=Call(func=Name(id='cast', ctx=Load(), lineno=34, col_offset=19, end_lineno=34, end_col_offset=23), args=[Constant(value='Callable[[ModuleType, MutableMapping[str, object], Iterable[str]], None]', lineno=35, col_offset=4, end_lineno=35, end_col_offset=78), Call(func=Name(id='load_attribute', ctx=Load(), lineno=36, col_offset=4, end_lineno=36, end_col_offset=18), args=[Constant(value='kgfoundry._namespace_proxy', lineno=36, col_offset=19, end_lineno=36, end_col_offset=47), Constant(value='namespace_attach', lineno=36, col_offset=49, end_lineno=36, end_col_offset=67)], lineno=36, col_offset=4, end_lineno=36, end_col_offset=68)], lineno=34, col_offset=19, end_lineno=37, end_col_offset=1), lineno=34, col_offset=0, end_lineno=37, end_col_offset=1), Assign(targets=[Name(id='namespace_dir', ctx=Store(), lineno=38, col_offset=0, end_lineno=38, end_col_offset=13)], value=Call(func=Name(id='cast', ctx=Load(), lineno=38, col_offset=16, end_lineno=38, end_col_offset=20), args=[Constant(value='Callable[[ModuleType, Iterable[str]], list[str]]', lineno=39, col_offset=4, end_lineno=39, end_col_offset=54), Call(func=Name(id='load_attribute', ctx=Load(), lineno=40, col_offset=4, end_lineno=40, end_col_offset=18), args=[Constant(value='kgfoundry._namespace_proxy', lineno=40, col_offset=19, end_lineno=40, end_col_offset=47), Constant(value='namespace_dir', lineno=40, col_offset=49, end_lineno=40, end_col_offset=64)], lineno=40, col_offset=4, end_lineno=40, end_col_offset=65)], lineno=38, col_offset=16, end_lineno=41, end_col_offset=1), lineno=38, col_offset=0, end_lineno=41, end_col_offset=1), Assign(targets=[Name(id='namespace_getattr', ctx=Store(), lineno=42, col_offset=0, end_lineno=42, end_col_offset=17)], value=Call(func=Name(id='cast', ctx=Load(), lineno=42, col_offset=20, end_lineno=42, end_col_offset=24), args=[Constant(value='Callable[[ModuleType, str], object]', lineno=43, col_offset=4, end_lineno=43, end_col_offset=41), Call(func=Name(id='load_attribute', ctx=Load(), lineno=44, col_offset=4, end_lineno=44, end_col_offset=18), args=[Constant(value='kgfoundry._namespace_proxy', lineno=44, col_offset=19, end_lineno=44, end_col_offset=47), Constant(value='namespace_getattr', lineno=44, col_offset=49, end_lineno=44, end_col_offset=68)], lineno=44, col_offset=4, end_lineno=44, end_col_offset=69)], lineno=42, col_offset=20, end_lineno=45, end_col_offset=1), lineno=42, col_offset=0, end_lineno=45, end_col_offset=1), FunctionDef(name='_set_module_attr', args=arguments(args=[arg(arg='module', annotation=Name(id='ModuleType', ctx=Load(), lineno=48, col_offset=29, end_lineno=48, end_col_offset=39), lineno=48, col_offset=21, end_lineno=48, end_col_offset=39), arg(arg='name', annotation=Name(id='str', ctx=Load(), lineno=48, col_offset=47, end_lineno=48, end_col_offset=50), lineno=48, col_offset=41, end_lineno=48, end_col_offset=50), arg(arg='value', annotation=Name(id='object', ctx=Load(), lineno=48, col_offset=59, end_lineno=48, end_col_offset=65), lineno=48, col_offset=52, end_lineno=48, end_col_offset=65)]), body=[Expr(value=Constant(value='Assign an attribute on a module while preserving static typing.', lineno=49, col_offset=4, end_lineno=49, end_col_offset=73), lineno=49, col_offset=4, end_lineno=49, end_col_offset=73), Expr(value=Call(func=Name(id='setattr', ctx=Load(), lineno=50, col_offset=4, end_lineno=50, end_col_offset=11), args=[Name(id='module', ctx=Load(), lineno=50, col_offset=12, end_lineno=50, end_col_offset=18), Name(id='name', ctx=Load(), lineno=50, col_offset=20, end_lineno=50, end_col_offset=24), Name(id='value', ctx=Load(), lineno=50, col_offset=26, end_lineno=50, end_col_offset=31)], lineno=50, col_offset=4, end_lineno=50, end_col_offset=32), lineno=50, col_offset=4, end_lineno=50, end_col_offset=32)], returns=Constant(value=None, lineno=48, col_offset=70, end_lineno=48, end_col_offset=74), lineno=48, col_offset=0, end_lineno=50, end_col_offset=32), ClassDef(name='TestNamespaceRegistry', body=[Expr(value=Constant(value='Tests for the NamespaceRegistry class.', lineno=54, col_offset=4, end_lineno=54, end_col_offset=48), lineno=54, col_offset=4, end_lineno=54, end_col_offset=48), FunctionDef(name='test_register_and_resolve_single_symbol', args=arguments(args=[arg(arg='self', lineno=56, col_offset=48, end_lineno=56, end_col_offset=52)]), body=[Expr(value=Constant(value='Test basic registration and resolution of a symbol.', lineno=57, col_offset=8, end_lineno=57, end_col_offset=65), lineno=57, col_offset=8, end_lineno=57, end_col_offset=65), Assign(targets=[Name(id='registry', ctx=Store(), lineno=58, col_offset=8, end_lineno=58, end_col_offset=16)], value=Call(func=Name(id='NamespaceRegistry', ctx=Load(), lineno=58, col_offset=19, end_lineno=58, end_col_offset=36), lineno=58, col_offset=19, end_lineno=58, end_col_offset=38), lineno=58, col_offset=8, end_lineno=58, end_col_offset=38), Assign(targets=[Name(id='test_value', ctx=Store(), lineno=59, col_offset=8, end_lineno=59, end_col_offset=18)], value=Dict(keys=[Constant(value='key', lineno=59, col_offset=22, end_lineno=59, end_col_offset=27)], values=[Constant(value='value', lineno=59, col_offset=29, end_lineno=59, end_col_offset=36)], lineno=59, col_offset=21, end_lineno=59, end_col_offset=37), lineno=59, col_offset=8, end_lineno=59, end_col_offset=37), Expr(value=Call(func=Attribute(value=Name(id='registry', ctx=Load(), lineno=60, col_offset=8, end_lineno=60, end_col_offset=16), attr='register', ctx=Load(), lineno=60, col_offset=8, end_lineno=60, end_col_offset=25), args=[Constant(value='test_symbol', lineno=60, col_offset=26, end_lineno=60, end_col_offset=39), Lambda(args=arguments(), body=Name(id='test_value', ctx=Load(), lineno=60, col_offset=49, end_lineno=60, end_col_offset=59), lineno=60, col_offset=41, end_lineno=60, end_col_offset=59)], lineno=60, col_offset=8, end_lineno=60, end_col_offset=60), lineno=60, col_offset=8, end_lineno=60, end_col_offset=60), Assign(targets=[Name(id='resolved', ctx=Store(), lineno=62, col_offset=8, end_lineno=62, end_col_offset=16)], value=Call(func=Attribute(value=Name(id='registry', ctx=Load(), lineno=62, col_offset=19, end_lineno=62, end_col_offset=27), attr='resolve', ctx=Load(), lineno=62, col_offset=19, end_lineno=62, end_col_offset=35), args=[Constant(value='test_symbol', lineno=62, col_offset=36, end_lineno=62, end_col_offset=49)], lineno=62, col_offset=19, end_lineno=62, end_col_offset=50), lineno=62, col_offset=8, end_lineno=62, end_col_offset=50), Assert(test=Compare(left=Name(id='resolved', ctx=Load(), lineno=63, col_offset=15, end_lineno=63, end_col_offset=23), ops=[Is()], comparators=[Name(id='test_value', ctx=Load(), lineno=63, col_offset=27, end_lineno=63, end_col_offset=37)], lineno=63, col_offset=15, end_lineno=63, end_col_offset=37), lineno=63, col_offset=8, end_lineno=63, end_col_offset=37)], returns=Constant(value=None, lineno=56, col_offset=57, end_lineno=56, end_col_offset=61), lineno=56, col_offset=4, end_lineno=63, end_col_offset=37), FunctionDef(name='test_resolve_caches_result', args=arguments(args=[arg(arg='self', lineno=65, col_offset=35, end_lineno=65, end_col_offset=39)]), body=[Expr(value=Constant(value='Test that resolved symbols are cached to avoid repeated loader invocations.', lineno=66, col_offset=8, end_lineno=66, end_col_offset=89), lineno=66, col_offset=8, end_lineno=66, end_col_offset=89), Assign(targets=[Name(id='registry', ctx=Store(), lineno=67, col_offset=8, end_lineno=67, end_col_offset=16)], value=Call(func=Name(id='NamespaceRegistry', ctx=Load(), lineno=67, col_offset=19, end_lineno=67, end_col_offset=36), lineno=67, col_offset=19, end_lineno=67, end_col_offset=38), lineno=67, col_offset=8, end_lineno=67, end_col_offset=38), Assign(targets=[Name(id='call_count', ctx=Store(), lineno=68, col_offset=8, end_lineno=68, end_col_offset=18)], value=Constant(value=0, lineno=68, col_offset=21, end_lineno=68, end_col_offset=22), lineno=68, col_offset=8, end_lineno=68, end_col_offset=22), FunctionDef(name='loader', args=arguments(), body=[Expr(value=Constant(value='Load symbol with call counting.\n\n            Returns\n            -------\n            object\n                Symbol value with call count. Never returns None.\n            ', lineno=71, col_offset=12, end_lineno=77, end_col_offset=15), lineno=71, col_offset=12, end_lineno=77, end_col_offset=15), Nonlocal(names=['call_count'], lineno=78, col_offset=12, end_lineno=78, end_col_offset=31), AugAssign(target=Name(id='call_count', ctx=Store(), lineno=79, col_offset=12, end_lineno=79, end_col_offset=22), op=Add(), value=Constant(value=1, lineno=79, col_offset=26, end_lineno=79, end_col_offset=27), lineno=79, col_offset=12, end_lineno=79, end_col_offset=27), Return(value=JoinedStr(values=[Constant(value='result_', lineno=80, col_offset=21, end_lineno=80, end_col_offset=28), FormattedValue(value=Name(id='call_count', ctx=Load(), lineno=80, col_offset=29, end_lineno=80, end_col_offset=39), conversion=-1, lineno=80, col_offset=28, end_lineno=80, end_col_offset=40)], lineno=80, col_offset=19, end_lineno=80, end_col_offset=41), lineno=80, col_offset=12, end_lineno=80, end_col_offset=41)], returns=Name(id='object', ctx=Load(), lineno=70, col_offset=24, end_lineno=70, end_col_offset=30), lineno=70, col_offset=8, end_lineno=80, end_col_offset=41), Expr(value=Call(func=Attribute(value=Name(id='registry', ctx=Load(), lineno=82, col_offset=8, end_lineno=82, end_col_offset=16), attr='register', ctx=Load(), lineno=82, col_offset=8, end_lineno=82, end_col_offset=25), args=[Constant(value='cached_symbol', lineno=82, col_offset=26, end_lineno=82, end_col_offset=41), Name(id='loader', ctx=Load(), lineno=82, col_offset=43, end_lineno=82, end_col_offset=49)], lineno=82, col_offset=8, end_lineno=82, end_col_offset=50), lineno=82, col_offset=8, end_lineno=82, end_col_offset=50), Assign(targets=[Name(id='result1', ctx=Store(), lineno=85, col_offset=8, end_lineno=85, end_col_offset=15)], value=Call(func=Attribute(value=Name(id='registry', ctx=Load(), lineno=85, col_offset=18, end_lineno=85, end_col_offset=26), attr='resolve', ctx=Load(), lineno=85, col_offset=18, end_lineno=85, end_col_offset=34), args=[Constant(value='cached_symbol', lineno=85, col_offset=35, end_lineno=85, end_col_offset=50)], lineno=85, col_offset=18, end_lineno=85, end_col_offset=51), lineno=85, col_offset=8, end_lineno=85, end_col_offset=51), Assert(test=Compare(left=Name(id='result1', ctx=Load(), lineno=86, col_offset=15, end_lineno=86, end_col_offset=22), ops=[Eq()], comparators=[Constant(value='result_1', lineno=86, col_offset=26, end_lineno=86, end_col_offset=36)], lineno=86, col_offset=15, end_lineno=86, end_col_offset=36), lineno=86, col_offset=8, end_lineno=86, end_col_offset=36), Assert(test=Compare(left=Name(id='call_count', ctx=Load(), lineno=87, col_offset=15, end_lineno=87, end_col_offset=25), ops=[Eq()], comparators=[Constant(value=1, lineno=87, col_offset=29, end_lineno=87, end_col_offset=30)], lineno=87, col_offset=15, end_lineno=87, end_col_offset=30), lineno=87, col_offset=8, end_lineno=87, end_col_offset=30), Assign(targets=[Name(id='result2', ctx=Store(), lineno=90, col_offset=8, end_lineno=90, end_col_offset=15)], value=Call(func=Attribute(value=Name(id='registry', ctx=Load(), lineno=90, col_offset=18, end_lineno=90, end_col_offset=26), attr='resolve', ctx=Load(), lineno=90, col_offset=18, end_lineno=90, end_col_offset=34), args=[Constant(value='cached_symbol', lineno=90, col_offset=35, end_lineno=90, end_col_offset=50)], lineno=90, col_offset=18, end_lineno=90, end_col_offset=51), lineno=90, col_offset=8, end_lineno=90, end_col_offset=51), Assert(test=Compare(left=Name(id='result2', ctx=Load(), lineno=91, col_offset=15, end_lineno=91, end_col_offset=22), ops=[Is()], comparators=[Name(id='result1', ctx=Load(), lineno=91, col_offset=26, end_lineno=91, end_col_offset=33)], lineno=91, col_offset=15, end_lineno=91, end_col_offset=33), lineno=91, col_offset=8, end_lineno=91, end_col_offset=33), Assert(test=Compare(left=Name(id='call_count', ctx=Load(), lineno=92, col_offset=15, end_lineno=92, end_col_offset=25), ops=[Eq()], comparators=[Constant(value=1, lineno=92, col_offset=29, end_lineno=92, end_col_offset=30)], lineno=92, col_offset=15, end_lineno=92, end_col_offset=30), lineno=92, col_offset=8, end_lineno=92, end_col_offset=30)], returns=Constant(value=None, lineno=65, col_offset=44, end_lineno=65, end_col_offset=48), lineno=65, col_offset=4, end_lineno=92, end_col_offset=30), FunctionDef(name='test_register_duplicate_symbol_raises_error', args=arguments(args=[arg(arg='self', lineno=94, col_offset=52, end_lineno=94, end_col_offset=56)]), body=[Expr(value=Constant(value='Test that registering the same symbol twice raises ValueError.', lineno=95, col_offset=8, end_lineno=95, end_col_offset=76), lineno=95, col_offset=8, end_lineno=95, end_col_offset=76), Assign(targets=[Name(id='registry', ctx=Store(), lineno=96, col_offset=8, end_lineno=96, end_col_offset=16)], value=Call(func=Name(id='NamespaceRegistry', ctx=Load(), lineno=96, col_offset=19, end_lineno=96, end_col_offset=36), lineno=96, col_offset=19, end_lineno=96, end_col_offset=38), lineno=96, col_offset=8, end_lineno=96, end_col_offset=38), Expr(value=Call(func=Attribute(value=Name(id='registry', ctx=Load(), lineno=97, col_offset=8, end_lineno=97, end_col_offset=16), attr='register', ctx=Load(), lineno=97, col_offset=8, end_lineno=97, end_col_offset=25), args=[Constant(value='symbol', lineno=97, col_offset=26, end_lineno=97, end_col_offset=34), Lambda(args=arguments(), body=Constant(value='value1', lineno=97, col_offset=44, end_lineno=97, end_col_offset=52), lineno=97, col_offset=36, end_lineno=97, end_col_offset=52)], lineno=97, col_offset=8, end_lineno=97, end_col_offset=53), lineno=97, col_offset=8, end_lineno=97, end_col_offset=53), Assign(targets=[Name(id='expected_msg', ctx=Store(), lineno=99, col_offset=8, end_lineno=99, end_col_offset=20)], value=Constant(value='already registered', lineno=99, col_offset=23, end_lineno=99, end_col_offset=43), lineno=99, col_offset=8, end_lineno=99, end_col_offset=43), With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=100, col_offset=13, end_lineno=100, end_col_offset=19), attr='raises', ctx=Load(), lineno=100, col_offset=13, end_lineno=100, end_col_offset=26), args=[Name(id='ValueError', ctx=Load(), lineno=100, col_offset=27, end_lineno=100, end_col_offset=37)], keywords=[keyword(arg='match', value=Name(id='expected_msg', ctx=Load(), lineno=100, col_offset=45, end_lineno=100, end_col_offset=57), lineno=100, col_offset=39, end_lineno=100, end_col_offset=57)], lineno=100, col_offset=13, end_lineno=100, end_col_offset=58))], body=[Expr(value=Call(func=Attribute(value=Name(id='registry', ctx=Load(), lineno=101, col_offset=12, end_lineno=101, end_col_offset=20), attr='register', ctx=Load(), lineno=101, col_offset=12, end_lineno=101, end_col_offset=29), args=[Constant(value='symbol', lineno=101, col_offset=30, end_lineno=101, end_col_offset=38), Lambda(args=arguments(), body=Constant(value='value2', lineno=101, col_offset=48, end_lineno=101, end_col_offset=56), lineno=101, col_offset=40, end_lineno=101, end_col_offset=56)], lineno=101, col_offset=12, end_lineno=101, end_col_offset=57), lineno=101, col_offset=12, end_lineno=101, end_col_offset=57)], lineno=100, col_offset=8, end_lineno=101, end_col_offset=57)], returns=Constant(value=None, lineno=94, col_offset=61, end_lineno=94, end_col_offset=65), lineno=94, col_offset=4, end_lineno=101, end_col_offset=57), FunctionDef(name='test_resolve_unregistered_symbol_raises_error', args=arguments(args=[arg(arg='self', lineno=103, col_offset=54, end_lineno=103, end_col_offset=58)]), body=[Expr(value=Constant(value='Test that resolving an unregistered symbol raises KeyError.', lineno=104, col_offset=8, end_lineno=104, end_col_offset=73), lineno=104, col_offset=8, end_lineno=104, end_col_offset=73), Assign(targets=[Name(id='registry', ctx=Store(), lineno=105, col_offset=8, end_lineno=105, end_col_offset=16)], value=Call(func=Name(id='NamespaceRegistry', ctx=Load(), lineno=105, col_offset=19, end_lineno=105, end_col_offset=36), lineno=105, col_offset=19, end_lineno=105, end_col_offset=38), lineno=105, col_offset=8, end_lineno=105, end_col_offset=38), Expr(value=Call(func=Attribute(value=Name(id='registry', ctx=Load(), lineno=106, col_offset=8, end_lineno=106, end_col_offset=16), attr='register', ctx=Load(), lineno=106, col_offset=8, end_lineno=106, end_col_offset=25), args=[Constant(value='existing', lineno=106, col_offset=26, end_lineno=106, end_col_offset=36), Lambda(args=arguments(), body=Constant(value='value', lineno=106, col_offset=46, end_lineno=106, end_col_offset=53), lineno=106, col_offset=38, end_lineno=106, end_col_offset=53)], lineno=106, col_offset=8, end_lineno=106, end_col_offset=54), lineno=106, col_offset=8, end_lineno=106, end_col_offset=54), With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=108, col_offset=13, end_lineno=108, end_col_offset=19), attr='raises', ctx=Load(), lineno=108, col_offset=13, end_lineno=108, end_col_offset=26), args=[Name(id='KeyError', ctx=Load(), lineno=108, col_offset=27, end_lineno=108, end_col_offset=35)], keywords=[keyword(arg='match', value=Constant(value='not registered', lineno=108, col_offset=43, end_lineno=108, end_col_offset=59), lineno=108, col_offset=37, end_lineno=108, end_col_offset=59)], lineno=108, col_offset=13, end_lineno=108, end_col_offset=60))], body=[Expr(value=Call(func=Attribute(value=Name(id='registry', ctx=Load(), lineno=109, col_offset=12, end_lineno=109, end_col_offset=20), attr='resolve', ctx=Load(), lineno=109, col_offset=12, end_lineno=109, end_col_offset=28), args=[Constant(value='missing', lineno=109, col_offset=29, end_lineno=109, end_col_offset=38)], lineno=109, col_offset=12, end_lineno=109, end_col_offset=39), lineno=109, col_offset=12, end_lineno=109, end_col_offset=39)], lineno=108, col_offset=8, end_lineno=109, end_col_offset=39)], returns=Constant(value=None, lineno=103, col_offset=63, end_lineno=103, end_col_offset=67), lineno=103, col_offset=4, end_lineno=109, end_col_offset=39), FunctionDef(name='test_resolve_unregistered_lists_available_symbols', args=arguments(args=[arg(arg='self', lineno=111, col_offset=58, end_lineno=111, end_col_offset=62)]), body=[Expr(value=Constant(value='Test that KeyError message lists available symbols.', lineno=112, col_offset=8, end_lineno=112, end_col_offset=65), lineno=112, col_offset=8, end_lineno=112, end_col_offset=65), Assign(targets=[Name(id='registry', ctx=Store(), lineno=113, col_offset=8, end_lineno=113, end_col_offset=16)], value=Call(func=Name(id='NamespaceRegistry', ctx=Load(), lineno=113, col_offset=19, end_lineno=113, end_col_offset=36), lineno=113, col_offset=19, end_lineno=113, end_col_offset=38), lineno=113, col_offset=8, end_lineno=113, end_col_offset=38), Expr(value=Call(func=Attribute(value=Name(id='registry', ctx=Load(), lineno=114, col_offset=8, end_lineno=114, end_col_offset=16), attr='register', ctx=Load(), lineno=114, col_offset=8, end_lineno=114, end_col_offset=25), args=[Constant(value='symbol_a', lineno=114, col_offset=26, end_lineno=114, end_col_offset=36), Lambda(args=arguments(), body=Constant(value='a', lineno=114, col_offset=46, end_lineno=114, end_col_offset=49), lineno=114, col_offset=38, end_lineno=114, end_col_offset=49)], lineno=114, col_offset=8, end_lineno=114, end_col_offset=50), lineno=114, col_offset=8, end_lineno=114, end_col_offset=50), Expr(value=Call(func=Attribute(value=Name(id='registry', ctx=Load(), lineno=115, col_offset=8, end_lineno=115, end_col_offset=16), attr='register', ctx=Load(), lineno=115, col_offset=8, end_lineno=115, end_col_offset=25), args=[Constant(value='symbol_b', lineno=115, col_offset=26, end_lineno=115, end_col_offset=36), Lambda(args=arguments(), body=Constant(value='b', lineno=115, col_offset=46, end_lineno=115, end_col_offset=49), lineno=115, col_offset=38, end_lineno=115, end_col_offset=49)], lineno=115, col_offset=8, end_lineno=115, end_col_offset=50), lineno=115, col_offset=8, end_lineno=115, end_col_offset=50), Assign(targets=[Name(id='msg_pattern', ctx=Store(), lineno=117, col_offset=8, end_lineno=117, end_col_offset=19)], value=Constant(value='Available:.*symbol_a.*symbol_b', lineno=117, col_offset=22, end_lineno=117, end_col_offset=55), lineno=117, col_offset=8, end_lineno=117, end_col_offset=55), With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=118, col_offset=13, end_lineno=118, end_col_offset=19), attr='raises', ctx=Load(), lineno=118, col_offset=13, end_lineno=118, end_col_offset=26), args=[Name(id='KeyError', ctx=Load(), lineno=118, col_offset=27, end_lineno=118, end_col_offset=35)], keywords=[keyword(arg='match', value=Name(id='msg_pattern', ctx=Load(), lineno=118, col_offset=43, end_lineno=118, end_col_offset=54), lineno=118, col_offset=37, end_lineno=118, end_col_offset=54)], lineno=118, col_offset=13, end_lineno=118, end_col_offset=55))], body=[Expr(value=Call(func=Attribute(value=Name(id='registry', ctx=Load(), lineno=119, col_offset=12, end_lineno=119, end_col_offset=20), attr='resolve', ctx=Load(), lineno=119, col_offset=12, end_lineno=119, end_col_offset=28), args=[Constant(value='symbol_c', lineno=119, col_offset=29, end_lineno=119, end_col_offset=39)], lineno=119, col_offset=12, end_lineno=119, end_col_offset=40), lineno=119, col_offset=12, end_lineno=119, end_col_offset=40)], lineno=118, col_offset=8, end_lineno=119, end_col_offset=40)], returns=Constant(value=None, lineno=111, col_offset=67, end_lineno=111, end_col_offset=71), lineno=111, col_offset=4, end_lineno=119, end_col_offset=40), FunctionDef(name='test_list_symbols_returns_sorted_names', args=arguments(args=[arg(arg='self', lineno=121, col_offset=47, end_lineno=121, end_col_offset=51)]), body=[Expr(value=Constant(value='Test that list_symbols returns symbols in sorted order.', lineno=122, col_offset=8, end_lineno=122, end_col_offset=69), lineno=122, col_offset=8, end_lineno=122, end_col_offset=69), Assign(targets=[Name(id='registry', ctx=Store(), lineno=123, col_offset=8, end_lineno=123, end_col_offset=16)], value=Call(func=Name(id='NamespaceRegistry', ctx=Load(), lineno=123, col_offset=19, end_lineno=123, end_col_offset=36), lineno=123, col_offset=19, end_lineno=123, end_col_offset=38), lineno=123, col_offset=8, end_lineno=123, end_col_offset=38), Expr(value=Call(func=Attribute(value=Name(id='registry', ctx=Load(), lineno=124, col_offset=8, end_lineno=124, end_col_offset=16), attr='register', ctx=Load(), lineno=124, col_offset=8, end_lineno=124, end_col_offset=25), args=[Constant(value='zebra', lineno=124, col_offset=26, end_lineno=124, end_col_offset=33), Lambda(args=arguments(), body=Constant(value='z', lineno=124, col_offset=43, end_lineno=124, end_col_offset=46), lineno=124, col_offset=35, end_lineno=124, end_col_offset=46)], lineno=124, col_offset=8, end_lineno=124, end_col_offset=47), lineno=124, col_offset=8, end_lineno=124, end_col_offset=47), Expr(value=Call(func=Attribute(value=Name(id='registry', ctx=Load(), lineno=125, col_offset=8, end_lineno=125, end_col_offset=16), attr='register', ctx=Load(), lineno=125, col_offset=8, end_lineno=125, end_col_offset=25), args=[Constant(value='apple', lineno=125, col_offset=26, end_lineno=125, end_col_offset=33), Lambda(args=arguments(), body=Constant(value='a', lineno=125, col_offset=43, end_lineno=125, end_col_offset=46), lineno=125, col_offset=35, end_lineno=125, end_col_offset=46)], lineno=125, col_offset=8, end_lineno=125, end_col_offset=47), lineno=125, col_offset=8, end_lineno=125, end_col_offset=47), Expr(value=Call(func=Attribute(value=Name(id='registry', ctx=Load(), lineno=126, col_offset=8, end_lineno=126, end_col_offset=16), attr='register', ctx=Load(), lineno=126, col_offset=8, end_lineno=126, end_col_offset=25), args=[Constant(value='mango', lineno=126, col_offset=26, end_lineno=126, end_col_offset=33), Lambda(args=arguments(), body=Constant(value='m', lineno=126, col_offset=43, end_lineno=126, end_col_offset=46), lineno=126, col_offset=35, end_lineno=126, end_col_offset=46)], lineno=126, col_offset=8, end_lineno=126, end_col_offset=47), lineno=126, col_offset=8, end_lineno=126, end_col_offset=47), Assign(targets=[Name(id='symbols', ctx=Store(), lineno=128, col_offset=8, end_lineno=128, end_col_offset=15)], value=Call(func=Attribute(value=Name(id='registry', ctx=Load(), lineno=128, col_offset=18, end_lineno=128, end_col_offset=26), attr='list_symbols', ctx=Load(), lineno=128, col_offset=18, end_lineno=128, end_col_offset=39), lineno=128, col_offset=18, end_lineno=128, end_col_offset=41), lineno=128, col_offset=8, end_lineno=128, end_col_offset=41), Assert(test=Compare(left=Name(id='symbols', ctx=Load(), lineno=129, col_offset=15, end_lineno=129, end_col_offset=22), ops=[Eq()], comparators=[List(elts=[Constant(value='apple', lineno=129, col_offset=27, end_lineno=129, end_col_offset=34), Constant(value='mango', lineno=129, col_offset=36, end_lineno=129, end_col_offset=43), Constant(value='zebra', lineno=129, col_offset=45, end_lineno=129, end_col_offset=52)], ctx=Load(), lineno=129, col_offset=26, end_lineno=129, end_col_offset=53)], lineno=129, col_offset=15, end_lineno=129, end_col_offset=53), lineno=129, col_offset=8, end_lineno=129, end_col_offset=53)], returns=Constant(value=None, lineno=121, col_offset=56, end_lineno=121, end_col_offset=60), lineno=121, col_offset=4, end_lineno=129, end_col_offset=53), FunctionDef(name='test_list_symbols_empty_registry', args=arguments(args=[arg(arg='self', lineno=131, col_offset=41, end_lineno=131, end_col_offset=45)]), body=[Expr(value=Constant(value='Test that list_symbols returns empty list for empty registry.', lineno=132, col_offset=8, end_lineno=132, end_col_offset=75), lineno=132, col_offset=8, end_lineno=132, end_col_offset=75), Assign(targets=[Name(id='registry', ctx=Store(), lineno=133, col_offset=8, end_lineno=133, end_col_offset=16)], value=Call(func=Name(id='NamespaceRegistry', ctx=Load(), lineno=133, col_offset=19, end_lineno=133, end_col_offset=36), lineno=133, col_offset=19, end_lineno=133, end_col_offset=38), lineno=133, col_offset=8, end_lineno=133, end_col_offset=38), Assert(test=Compare(left=Call(func=Attribute(value=Name(id='registry', ctx=Load(), lineno=134, col_offset=15, end_lineno=134, end_col_offset=23), attr='list_symbols', ctx=Load(), lineno=134, col_offset=15, end_lineno=134, end_col_offset=36), lineno=134, col_offset=15, end_lineno=134, end_col_offset=38), ops=[Eq()], comparators=[List(ctx=Load(), lineno=134, col_offset=42, end_lineno=134, end_col_offset=44)], lineno=134, col_offset=15, end_lineno=134, end_col_offset=44), lineno=134, col_offset=8, end_lineno=134, end_col_offset=44)], returns=Constant(value=None, lineno=131, col_offset=50, end_lineno=131, end_col_offset=54), lineno=131, col_offset=4, end_lineno=134, end_col_offset=44), FunctionDef(name='test_resolve_with_exception_in_loader', args=arguments(args=[arg(arg='self', lineno=136, col_offset=46, end_lineno=136, end_col_offset=50)]), body=[Expr(value=Constant(value='Test that exceptions in loaders propagate correctly.', lineno=137, col_offset=8, end_lineno=137, end_col_offset=66), lineno=137, col_offset=8, end_lineno=137, end_col_offset=66), Assign(targets=[Name(id='registry', ctx=Store(), lineno=138, col_offset=8, end_lineno=138, end_col_offset=16)], value=Call(func=Name(id='NamespaceRegistry', ctx=Load(), lineno=138, col_offset=19, end_lineno=138, end_col_offset=36), lineno=138, col_offset=19, end_lineno=138, end_col_offset=38), lineno=138, col_offset=8, end_lineno=138, end_col_offset=38), FunctionDef(name='failing_loader', args=arguments(), body=[Expr(value=Constant(value='Raise ``RuntimeError`` to simulate a failing loader.\n\n            Raises\n            ------\n            RuntimeError\n                Always raised with message "Loader failed" to simulate loader failure.\n\n            Notes\n            -----\n            This function never returns normally; it always raises :exc:`RuntimeError`.\n            The return type annotation ``NoReturn`` indicates that this function never\n            returns a value.\n            ', lineno=141, col_offset=12, end_lineno=153, end_col_offset=15), lineno=141, col_offset=12, end_lineno=153, end_col_offset=15), Raise(exc=Call(func=Name(id='RuntimeError', ctx=Load(), lineno=154, col_offset=18, end_lineno=154, end_col_offset=30), args=[Constant(value='Loader failed', lineno=154, col_offset=31, end_lineno=154, end_col_offset=46)], lineno=154, col_offset=18, end_lineno=154, end_col_offset=47), lineno=154, col_offset=12, end_lineno=154, end_col_offset=47)], returns=Name(id='NoReturn', ctx=Load(), lineno=140, col_offset=32, end_lineno=140, end_col_offset=40), lineno=140, col_offset=8, end_lineno=154, end_col_offset=47), Expr(value=Call(func=Attribute(value=Name(id='registry', ctx=Load(), lineno=156, col_offset=8, end_lineno=156, end_col_offset=16), attr='register', ctx=Load(), lineno=156, col_offset=8, end_lineno=156, end_col_offset=25), args=[Constant(value='failing', lineno=156, col_offset=26, end_lineno=156, end_col_offset=35), Name(id='failing_loader', ctx=Load(), lineno=156, col_offset=37, end_lineno=156, end_col_offset=51)], lineno=156, col_offset=8, end_lineno=156, end_col_offset=52), lineno=156, col_offset=8, end_lineno=156, end_col_offset=52), With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=158, col_offset=13, end_lineno=158, end_col_offset=19), attr='raises', ctx=Load(), lineno=158, col_offset=13, end_lineno=158, end_col_offset=26), args=[Name(id='RuntimeError', ctx=Load(), lineno=158, col_offset=27, end_lineno=158, end_col_offset=39)], keywords=[keyword(arg='match', value=Constant(value='Loader failed', lineno=158, col_offset=47, end_lineno=158, end_col_offset=62), lineno=158, col_offset=41, end_lineno=158, end_col_offset=62)], lineno=158, col_offset=13, end_lineno=158, end_col_offset=63))], body=[Expr(value=Call(func=Attribute(value=Name(id='registry', ctx=Load(), lineno=159, col_offset=12, end_lineno=159, end_col_offset=20), attr='resolve', ctx=Load(), lineno=159, col_offset=12, end_lineno=159, end_col_offset=28), args=[Constant(value='failing', lineno=159, col_offset=29, end_lineno=159, end_col_offset=38)], lineno=159, col_offset=12, end_lineno=159, end_col_offset=39), lineno=159, col_offset=12, end_lineno=159, end_col_offset=39)], lineno=158, col_offset=8, end_lineno=159, end_col_offset=39)], returns=Constant(value=None, lineno=136, col_offset=55, end_lineno=136, end_col_offset=59), lineno=136, col_offset=4, end_lineno=159, end_col_offset=39), FunctionDef(name='test_resolve_returns_various_types', args=arguments(args=[arg(arg='self', lineno=161, col_offset=43, end_lineno=161, end_col_offset=47)]), body=[Expr(value=Constant(value='Test that resolve works with various object types.', lineno=162, col_offset=8, end_lineno=162, end_col_offset=64), lineno=162, col_offset=8, end_lineno=162, end_col_offset=64), Assign(targets=[Name(id='registry', ctx=Store(), lineno=163, col_offset=8, end_lineno=163, end_col_offset=16)], value=Call(func=Name(id='NamespaceRegistry', ctx=Load(), lineno=163, col_offset=19, end_lineno=163, end_col_offset=36), lineno=163, col_offset=19, end_lineno=163, end_col_offset=38), lineno=163, col_offset=8, end_lineno=163, end_col_offset=38), AnnAssign(target=Name(id='test_cases', ctx=Store(), lineno=165, col_offset=8, end_lineno=165, end_col_offset=18), annotation=Subscript(value=Name(id='dict', ctx=Load(), lineno=165, col_offset=20, end_lineno=165, end_col_offset=24), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=165, col_offset=25, end_lineno=165, end_col_offset=28), Name(id='object', ctx=Load(), lineno=165, col_offset=30, end_lineno=165, end_col_offset=36)], ctx=Load(), lineno=165, col_offset=25, end_lineno=165, end_col_offset=36), ctx=Load(), lineno=165, col_offset=20, end_lineno=165, end_col_offset=37), value=Dict(keys=[Constant(value='str_value', lineno=166, col_offset=12, end_lineno=166, end_col_offset=23), Constant(value='int_value', lineno=167, col_offset=12, end_lineno=167, end_col_offset=23), Constant(value='list_value', lineno=168, col_offset=12, end_lineno=168, end_col_offset=24), Constant(value='dict_value', lineno=169, col_offset=12, end_lineno=169, end_col_offset=24), Constant(value='none_value', lineno=170, col_offset=12, end_lineno=170, end_col_offset=24)], values=[Constant(value='hello', lineno=166, col_offset=25, end_lineno=166, end_col_offset=32), Constant(value=42, lineno=167, col_offset=25, end_lineno=167, end_col_offset=27), List(elts=[Constant(value=1, lineno=168, col_offset=27, end_lineno=168, end_col_offset=28), Constant(value=2, lineno=168, col_offset=30, end_lineno=168, end_col_offset=31), Constant(value=3, lineno=168, col_offset=33, end_lineno=168, end_col_offset=34)], ctx=Load(), lineno=168, col_offset=26, end_lineno=168, end_col_offset=35), Dict(keys=[Constant(value='a', lineno=169, col_offset=27, end_lineno=169, end_col_offset=30), Constant(value='b', lineno=169, col_offset=35, end_lineno=169, end_col_offset=38)], values=[Constant(value=1, lineno=169, col_offset=32, end_lineno=169, end_col_offset=33), Constant(value=2, lineno=169, col_offset=40, end_lineno=169, end_col_offset=41)], lineno=169, col_offset=26, end_lineno=169, end_col_offset=42), Constant(value=None, lineno=170, col_offset=26, end_lineno=170, end_col_offset=30)], lineno=165, col_offset=40, end_lineno=171, end_col_offset=9), simple=1, lineno=165, col_offset=8, end_lineno=171, end_col_offset=9), FunctionDef(name='make_factory', args=arguments(args=[arg(arg='val', annotation=Name(id='object', ctx=Load(), lineno=174, col_offset=30, end_lineno=174, end_col_offset=36), lineno=174, col_offset=25, end_lineno=174, end_col_offset=36)]), body=[Expr(value=Constant(value='Create a factory that properly type-narrows lambda captures.\n\n            Parameters\n            ----------\n            val : object\n                Value to capture and return.\n\n            Returns\n            -------\n            Callable[[], object]\n                Factory function returning val.\n            ', lineno=175, col_offset=12, end_lineno=186, end_col_offset=15), lineno=175, col_offset=12, end_lineno=186, end_col_offset=15), FunctionDef(name='_factory', args=arguments(), body=[Return(value=Name(id='val', ctx=Load(), lineno=189, col_offset=23, end_lineno=189, end_col_offset=26), lineno=189, col_offset=16, end_lineno=189, end_col_offset=26)], returns=Name(id='object', ctx=Load(), lineno=188, col_offset=30, end_lineno=188, end_col_offset=36), lineno=188, col_offset=12, end_lineno=189, end_col_offset=26), Return(value=Name(id='_factory', ctx=Load(), lineno=191, col_offset=19, end_lineno=191, end_col_offset=27), lineno=191, col_offset=12, end_lineno=191, end_col_offset=27)], returns=Subscript(value=Name(id='Callable', ctx=Load(), lineno=174, col_offset=41, end_lineno=174, end_col_offset=49), slice=Tuple(elts=[List(ctx=Load(), lineno=174, col_offset=50, end_lineno=174, end_col_offset=52), Name(id='object', ctx=Load(), lineno=174, col_offset=54, end_lineno=174, end_col_offset=60)], ctx=Load(), lineno=174, col_offset=50, end_lineno=174, end_col_offset=60), ctx=Load(), lineno=174, col_offset=41, end_lineno=174, end_col_offset=61), lineno=174, col_offset=8, end_lineno=191, end_col_offset=27), For(target=Tuple(elts=[Name(id='name', ctx=Store(), lineno=193, col_offset=12, end_lineno=193, end_col_offset=16), Name(id='value', ctx=Store(), lineno=193, col_offset=18, end_lineno=193, end_col_offset=23)], ctx=Store(), lineno=193, col_offset=12, end_lineno=193, end_col_offset=23), iter=Call(func=Attribute(value=Name(id='test_cases', ctx=Load(), lineno=193, col_offset=27, end_lineno=193, end_col_offset=37), attr='items', ctx=Load(), lineno=193, col_offset=27, end_lineno=193, end_col_offset=43), lineno=193, col_offset=27, end_lineno=193, end_col_offset=45), body=[Expr(value=Call(func=Attribute(value=Name(id='registry', ctx=Load(), lineno=194, col_offset=12, end_lineno=194, end_col_offset=20), attr='register', ctx=Load(), lineno=194, col_offset=12, end_lineno=194, end_col_offset=29), args=[Name(id='name', ctx=Load(), lineno=194, col_offset=30, end_lineno=194, end_col_offset=34), Call(func=Name(id='make_factory', ctx=Load(), lineno=194, col_offset=36, end_lineno=194, end_col_offset=48), args=[Name(id='value', ctx=Load(), lineno=194, col_offset=49, end_lineno=194, end_col_offset=54)], lineno=194, col_offset=36, end_lineno=194, end_col_offset=55)], lineno=194, col_offset=12, end_lineno=194, end_col_offset=56), lineno=194, col_offset=12, end_lineno=194, end_col_offset=56)], lineno=193, col_offset=8, end_lineno=194, end_col_offset=56), For(target=Tuple(elts=[Name(id='name', ctx=Store(), lineno=196, col_offset=12, end_lineno=196, end_col_offset=16), Name(id='expected_value', ctx=Store(), lineno=196, col_offset=18, end_lineno=196, end_col_offset=32)], ctx=Store(), lineno=196, col_offset=12, end_lineno=196, end_col_offset=32), iter=Call(func=Attribute(value=Name(id='test_cases', ctx=Load(), lineno=196, col_offset=36, end_lineno=196, end_col_offset=46), attr='items', ctx=Load(), lineno=196, col_offset=36, end_lineno=196, end_col_offset=52), lineno=196, col_offset=36, end_lineno=196, end_col_offset=54), body=[Assign(targets=[Name(id='resolved', ctx=Store(), lineno=197, col_offset=12, end_lineno=197, end_col_offset=20)], value=Call(func=Attribute(value=Name(id='registry', ctx=Load(), lineno=197, col_offset=23, end_lineno=197, end_col_offset=31), attr='resolve', ctx=Load(), lineno=197, col_offset=23, end_lineno=197, end_col_offset=39), args=[Name(id='name', ctx=Load(), lineno=197, col_offset=40, end_lineno=197, end_col_offset=44)], lineno=197, col_offset=23, end_lineno=197, end_col_offset=45), lineno=197, col_offset=12, end_lineno=197, end_col_offset=45), Assert(test=Compare(left=Name(id='resolved', ctx=Load(), lineno=198, col_offset=19, end_lineno=198, end_col_offset=27), ops=[Eq()], comparators=[Name(id='expected_value', ctx=Load(), lineno=198, col_offset=31, end_lineno=198, end_col_offset=45)], lineno=198, col_offset=19, end_lineno=198, end_col_offset=45), lineno=198, col_offset=12, end_lineno=198, end_col_offset=45)], lineno=196, col_offset=8, end_lineno=198, end_col_offset=45)], returns=Constant(value=None, lineno=161, col_offset=52, end_lineno=161, end_col_offset=56), lineno=161, col_offset=4, end_lineno=198, end_col_offset=45), FunctionDef(name='test_multiple_registries_independent', args=arguments(args=[arg(arg='self', lineno=200, col_offset=45, end_lineno=200, end_col_offset=49)]), body=[Expr(value=Constant(value='Test that multiple registries maintain separate state.', lineno=201, col_offset=8, end_lineno=201, end_col_offset=68), lineno=201, col_offset=8, end_lineno=201, end_col_offset=68), Assign(targets=[Name(id='registry1', ctx=Store(), lineno=202, col_offset=8, end_lineno=202, end_col_offset=17)], value=Call(func=Name(id='NamespaceRegistry', ctx=Load(), lineno=202, col_offset=20, end_lineno=202, end_col_offset=37), lineno=202, col_offset=20, end_lineno=202, end_col_offset=39), lineno=202, col_offset=8, end_lineno=202, end_col_offset=39), Assign(targets=[Name(id='registry2', ctx=Store(), lineno=203, col_offset=8, end_lineno=203, end_col_offset=17)], value=Call(func=Name(id='NamespaceRegistry', ctx=Load(), lineno=203, col_offset=20, end_lineno=203, end_col_offset=37), lineno=203, col_offset=20, end_lineno=203, end_col_offset=39), lineno=203, col_offset=8, end_lineno=203, end_col_offset=39), Expr(value=Call(func=Attribute(value=Name(id='registry1', ctx=Load(), lineno=205, col_offset=8, end_lineno=205, end_col_offset=17), attr='register', ctx=Load(), lineno=205, col_offset=8, end_lineno=205, end_col_offset=26), args=[Constant(value='symbol', lineno=205, col_offset=27, end_lineno=205, end_col_offset=35), Lambda(args=arguments(), body=Constant(value='value1', lineno=205, col_offset=45, end_lineno=205, end_col_offset=53), lineno=205, col_offset=37, end_lineno=205, end_col_offset=53)], lineno=205, col_offset=8, end_lineno=205, end_col_offset=54), lineno=205, col_offset=8, end_lineno=205, end_col_offset=54), Expr(value=Call(func=Attribute(value=Name(id='registry2', ctx=Load(), lineno=206, col_offset=8, end_lineno=206, end_col_offset=17), attr='register', ctx=Load(), lineno=206, col_offset=8, end_lineno=206, end_col_offset=26), args=[Constant(value='symbol', lineno=206, col_offset=27, end_lineno=206, end_col_offset=35), Lambda(args=arguments(), body=Constant(value='value2', lineno=206, col_offset=45, end_lineno=206, end_col_offset=53), lineno=206, col_offset=37, end_lineno=206, end_col_offset=53)], lineno=206, col_offset=8, end_lineno=206, end_col_offset=54), lineno=206, col_offset=8, end_lineno=206, end_col_offset=54), Assert(test=Compare(left=Call(func=Attribute(value=Name(id='registry1', ctx=Load(), lineno=208, col_offset=15, end_lineno=208, end_col_offset=24), attr='resolve', ctx=Load(), lineno=208, col_offset=15, end_lineno=208, end_col_offset=32), args=[Constant(value='symbol', lineno=208, col_offset=33, end_lineno=208, end_col_offset=41)], lineno=208, col_offset=15, end_lineno=208, end_col_offset=42), ops=[Eq()], comparators=[Constant(value='value1', lineno=208, col_offset=46, end_lineno=208, end_col_offset=54)], lineno=208, col_offset=15, end_lineno=208, end_col_offset=54), lineno=208, col_offset=8, end_lineno=208, end_col_offset=54), Assert(test=Compare(left=Call(func=Attribute(value=Name(id='registry2', ctx=Load(), lineno=209, col_offset=15, end_lineno=209, end_col_offset=24), attr='resolve', ctx=Load(), lineno=209, col_offset=15, end_lineno=209, end_col_offset=32), args=[Constant(value='symbol', lineno=209, col_offset=33, end_lineno=209, end_col_offset=41)], lineno=209, col_offset=15, end_lineno=209, end_col_offset=42), ops=[Eq()], comparators=[Constant(value='value2', lineno=209, col_offset=46, end_lineno=209, end_col_offset=54)], lineno=209, col_offset=15, end_lineno=209, end_col_offset=54), lineno=209, col_offset=8, end_lineno=209, end_col_offset=54)], returns=Constant(value=None, lineno=200, col_offset=54, end_lineno=200, end_col_offset=58), lineno=200, col_offset=4, end_lineno=209, end_col_offset=54)], lineno=53, col_offset=0, end_lineno=209, end_col_offset=54), ClassDef(name='TestNamespaceHelpers', body=[Expr(value=Constant(value='Tests for namespace helper functions.', lineno=213, col_offset=4, end_lineno=213, end_col_offset=47), lineno=213, col_offset=4, end_lineno=213, end_col_offset=47), FunctionDef(name='test_namespace_exports_with_all_attribute', args=arguments(args=[arg(arg='self', lineno=215, col_offset=50, end_lineno=215, end_col_offset=54)]), body=[Expr(value=Constant(value='Test that namespace_exports respects __all__ when present.', lineno=216, col_offset=8, end_lineno=216, end_col_offset=72), lineno=216, col_offset=8, end_lineno=216, end_col_offset=72), Assign(targets=[Name(id='module', ctx=Store(), lineno=217, col_offset=8, end_lineno=217, end_col_offset=14)], value=Call(func=Name(id='ModuleType', ctx=Load(), lineno=217, col_offset=17, end_lineno=217, end_col_offset=27), args=[Constant(value='test_module', lineno=217, col_offset=28, end_lineno=217, end_col_offset=41)], lineno=217, col_offset=17, end_lineno=217, end_col_offset=42), lineno=217, col_offset=8, end_lineno=217, end_col_offset=42), AnnAssign(target=Name(id='all_exports', ctx=Store(), lineno=218, col_offset=8, end_lineno=218, end_col_offset=19), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=218, col_offset=21, end_lineno=218, end_col_offset=25), slice=Name(id='str', ctx=Load(), lineno=218, col_offset=26, end_lineno=218, end_col_offset=29), ctx=Load(), lineno=218, col_offset=21, end_lineno=218, end_col_offset=30), value=List(elts=[Constant(value='public_func', lineno=218, col_offset=34, end_lineno=218, end_col_offset=47), Constant(value='public_class', lineno=218, col_offset=49, end_lineno=218, end_col_offset=63)], ctx=Load(), lineno=218, col_offset=33, end_lineno=218, end_col_offset=64), simple=1, lineno=218, col_offset=8, end_lineno=218, end_col_offset=64), FunctionDef(name='_public_func', args=arguments(), body=[Return(value=Constant(value=None, lineno=221, col_offset=19, end_lineno=221, end_col_offset=23), lineno=221, col_offset=12, end_lineno=221, end_col_offset=23)], returns=Constant(value=None, lineno=220, col_offset=30, end_lineno=220, end_col_offset=34), lineno=220, col_offset=8, end_lineno=221, end_col_offset=23), Expr(value=Call(func=Name(id='_set_module_attr', ctx=Load(), lineno=223, col_offset=8, end_lineno=223, end_col_offset=24), args=[Name(id='module', ctx=Load(), lineno=223, col_offset=25, end_lineno=223, end_col_offset=31), Constant(value='__all__', lineno=223, col_offset=33, end_lineno=223, end_col_offset=42), Name(id='all_exports', ctx=Load(), lineno=223, col_offset=44, end_lineno=223, end_col_offset=55)], lineno=223, col_offset=8, end_lineno=223, end_col_offset=56), lineno=223, col_offset=8, end_lineno=223, end_col_offset=56), Expr(value=Call(func=Name(id='_set_module_attr', ctx=Load(), lineno=224, col_offset=8, end_lineno=224, end_col_offset=24), args=[Name(id='module', ctx=Load(), lineno=224, col_offset=25, end_lineno=224, end_col_offset=31), Constant(value='public_func', lineno=224, col_offset=33, end_lineno=224, end_col_offset=46), Name(id='_public_func', ctx=Load(), lineno=224, col_offset=48, end_lineno=224, end_col_offset=60)], lineno=224, col_offset=8, end_lineno=224, end_col_offset=61), lineno=224, col_offset=8, end_lineno=224, end_col_offset=61), Expr(value=Call(func=Name(id='_set_module_attr', ctx=Load(), lineno=225, col_offset=8, end_lineno=225, end_col_offset=24), args=[Name(id='module', ctx=Load(), lineno=225, col_offset=25, end_lineno=225, end_col_offset=31), Constant(value='public_class', lineno=225, col_offset=33, end_lineno=225, end_col_offset=47), Call(func=Name(id='type', ctx=Load(), lineno=225, col_offset=49, end_lineno=225, end_col_offset=53), args=[Constant(value='PublicClass', lineno=225, col_offset=54, end_lineno=225, end_col_offset=67), Tuple(ctx=Load(), lineno=225, col_offset=69, end_lineno=225, end_col_offset=71), Dict(lineno=225, col_offset=73, end_lineno=225, end_col_offset=75)], lineno=225, col_offset=49, end_lineno=225, end_col_offset=76)], lineno=225, col_offset=8, end_lineno=225, end_col_offset=77), lineno=225, col_offset=8, end_lineno=225, end_col_offset=77), Expr(value=Call(func=Name(id='_set_module_attr', ctx=Load(), lineno=226, col_offset=8, end_lineno=226, end_col_offset=24), args=[Name(id='module', ctx=Load(), lineno=226, col_offset=25, end_lineno=226, end_col_offset=31), Constant(value='_private', lineno=226, col_offset=33, end_lineno=226, end_col_offset=43), Constant(value='should_not_appear', lineno=226, col_offset=45, end_lineno=226, end_col_offset=64)], lineno=226, col_offset=8, end_lineno=226, end_col_offset=65), lineno=226, col_offset=8, end_lineno=226, end_col_offset=65), Assign(targets=[Name(id='exports', ctx=Store(), lineno=228, col_offset=8, end_lineno=228, end_col_offset=15)], value=Call(func=Name(id='namespace_exports', ctx=Load(), lineno=228, col_offset=18, end_lineno=228, end_col_offset=35), args=[Name(id='module', ctx=Load(), lineno=228, col_offset=36, end_lineno=228, end_col_offset=42)], lineno=228, col_offset=18, end_lineno=228, end_col_offset=43), lineno=228, col_offset=8, end_lineno=228, end_col_offset=43), Assert(test=Compare(left=Call(func=Name(id='set', ctx=Load(), lineno=229, col_offset=15, end_lineno=229, end_col_offset=18), args=[Name(id='exports', ctx=Load(), lineno=229, col_offset=19, end_lineno=229, end_col_offset=26)], lineno=229, col_offset=15, end_lineno=229, end_col_offset=27), ops=[Eq()], comparators=[Set(elts=[Constant(value='public_func', lineno=229, col_offset=32, end_lineno=229, end_col_offset=45), Constant(value='public_class', lineno=229, col_offset=47, end_lineno=229, end_col_offset=61)], lineno=229, col_offset=31, end_lineno=229, end_col_offset=62)], lineno=229, col_offset=15, end_lineno=229, end_col_offset=62), lineno=229, col_offset=8, end_lineno=229, end_col_offset=62)], returns=Constant(value=None, lineno=215, col_offset=59, end_lineno=215, end_col_offset=63), lineno=215, col_offset=4, end_lineno=229, end_col_offset=62), FunctionDef(name='test_namespace_exports_without_all_attribute', args=arguments(args=[arg(arg='self', lineno=231, col_offset=53, end_lineno=231, end_col_offset=57)]), body=[Expr(value=Constant(value='Test that namespace_exports filters by convention when __all__ missing.', lineno=232, col_offset=8, end_lineno=232, end_col_offset=85), lineno=232, col_offset=8, end_lineno=232, end_col_offset=85), Assign(targets=[Name(id='module', ctx=Store(), lineno=233, col_offset=8, end_lineno=233, end_col_offset=14)], value=Call(func=Name(id='ModuleType', ctx=Load(), lineno=233, col_offset=17, end_lineno=233, end_col_offset=27), args=[Constant(value='test_module', lineno=233, col_offset=28, end_lineno=233, end_col_offset=41)], lineno=233, col_offset=17, end_lineno=233, end_col_offset=42), lineno=233, col_offset=8, end_lineno=233, end_col_offset=42), Expr(value=Call(func=Name(id='_set_module_attr', ctx=Load(), lineno=234, col_offset=8, end_lineno=234, end_col_offset=24), args=[Name(id='module', ctx=Load(), lineno=234, col_offset=25, end_lineno=234, end_col_offset=31), Constant(value='public_attr', lineno=234, col_offset=33, end_lineno=234, end_col_offset=46), Constant(value='public', lineno=234, col_offset=48, end_lineno=234, end_col_offset=56)], lineno=234, col_offset=8, end_lineno=234, end_col_offset=57), lineno=234, col_offset=8, end_lineno=234, end_col_offset=57), Expr(value=Call(func=Name(id='_set_module_attr', ctx=Load(), lineno=235, col_offset=8, end_lineno=235, end_col_offset=24), args=[Name(id='module', ctx=Load(), lineno=235, col_offset=25, end_lineno=235, end_col_offset=31), Constant(value='_private_attr', lineno=235, col_offset=33, end_lineno=235, end_col_offset=48), Constant(value='private', lineno=235, col_offset=50, end_lineno=235, end_col_offset=59)], lineno=235, col_offset=8, end_lineno=235, end_col_offset=60), lineno=235, col_offset=8, end_lineno=235, end_col_offset=60), Assign(targets=[Name(id='exports', ctx=Store(), lineno=237, col_offset=8, end_lineno=237, end_col_offset=15)], value=Call(func=Name(id='namespace_exports', ctx=Load(), lineno=237, col_offset=18, end_lineno=237, end_col_offset=35), args=[Name(id='module', ctx=Load(), lineno=237, col_offset=36, end_lineno=237, end_col_offset=42)], lineno=237, col_offset=18, end_lineno=237, end_col_offset=43), lineno=237, col_offset=8, end_lineno=237, end_col_offset=43), Assert(test=Compare(left=Constant(value='public_attr', lineno=238, col_offset=15, end_lineno=238, end_col_offset=28), ops=[In()], comparators=[Name(id='exports', ctx=Load(), lineno=238, col_offset=32, end_lineno=238, end_col_offset=39)], lineno=238, col_offset=15, end_lineno=238, end_col_offset=39), lineno=238, col_offset=8, end_lineno=238, end_col_offset=39), Assert(test=Compare(left=Constant(value='_private_attr', lineno=239, col_offset=15, end_lineno=239, end_col_offset=30), ops=[NotIn()], comparators=[Name(id='exports', ctx=Load(), lineno=239, col_offset=38, end_lineno=239, end_col_offset=45)], lineno=239, col_offset=15, end_lineno=239, end_col_offset=45), lineno=239, col_offset=8, end_lineno=239, end_col_offset=45)], returns=Constant(value=None, lineno=231, col_offset=62, end_lineno=231, end_col_offset=66), lineno=231, col_offset=4, end_lineno=239, end_col_offset=45), FunctionDef(name='test_namespace_attach_populates_target', args=arguments(args=[arg(arg='self', lineno=241, col_offset=47, end_lineno=241, end_col_offset=51)]), body=[Expr(value=Constant(value='Test that namespace_attach correctly populates target mapping.', lineno=242, col_offset=8, end_lineno=242, end_col_offset=76), lineno=242, col_offset=8, end_lineno=242, end_col_offset=76), Assign(targets=[Name(id='module', ctx=Store(), lineno=243, col_offset=8, end_lineno=243, end_col_offset=14)], value=Call(func=Name(id='ModuleType', ctx=Load(), lineno=243, col_offset=17, end_lineno=243, end_col_offset=27), args=[Constant(value='test_module', lineno=243, col_offset=28, end_lineno=243, end_col_offset=41)], lineno=243, col_offset=17, end_lineno=243, end_col_offset=42), lineno=243, col_offset=8, end_lineno=243, end_col_offset=42), Expr(value=Call(func=Name(id='_set_module_attr', ctx=Load(), lineno=244, col_offset=8, end_lineno=244, end_col_offset=24), args=[Name(id='module', ctx=Load(), lineno=244, col_offset=25, end_lineno=244, end_col_offset=31), Constant(value='attr1', lineno=244, col_offset=33, end_lineno=244, end_col_offset=40), Constant(value='value1', lineno=244, col_offset=42, end_lineno=244, end_col_offset=50)], lineno=244, col_offset=8, end_lineno=244, end_col_offset=51), lineno=244, col_offset=8, end_lineno=244, end_col_offset=51), Expr(value=Call(func=Name(id='_set_module_attr', ctx=Load(), lineno=245, col_offset=8, end_lineno=245, end_col_offset=24), args=[Name(id='module', ctx=Load(), lineno=245, col_offset=25, end_lineno=245, end_col_offset=31), Constant(value='attr2', lineno=245, col_offset=33, end_lineno=245, end_col_offset=40), Constant(value='value2', lineno=245, col_offset=42, end_lineno=245, end_col_offset=50)], lineno=245, col_offset=8, end_lineno=245, end_col_offset=51), lineno=245, col_offset=8, end_lineno=245, end_col_offset=51), AnnAssign(target=Name(id='target', ctx=Store(), lineno=247, col_offset=8, end_lineno=247, end_col_offset=14), annotation=Subscript(value=Name(id='dict', ctx=Load(), lineno=247, col_offset=16, end_lineno=247, end_col_offset=20), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=247, col_offset=21, end_lineno=247, end_col_offset=24), Name(id='object', ctx=Load(), lineno=247, col_offset=26, end_lineno=247, end_col_offset=32)], ctx=Load(), lineno=247, col_offset=21, end_lineno=247, end_col_offset=32), ctx=Load(), lineno=247, col_offset=16, end_lineno=247, end_col_offset=33), value=Dict(lineno=247, col_offset=36, end_lineno=247, end_col_offset=38), simple=1, lineno=247, col_offset=8, end_lineno=247, end_col_offset=38), Expr(value=Call(func=Name(id='namespace_attach', ctx=Load(), lineno=248, col_offset=8, end_lineno=248, end_col_offset=24), args=[Name(id='module', ctx=Load(), lineno=248, col_offset=25, end_lineno=248, end_col_offset=31), Name(id='target', ctx=Load(), lineno=248, col_offset=33, end_lineno=248, end_col_offset=39), List(elts=[Constant(value='attr1', lineno=248, col_offset=42, end_lineno=248, end_col_offset=49), Constant(value='attr2', lineno=248, col_offset=51, end_lineno=248, end_col_offset=58)], ctx=Load(), lineno=248, col_offset=41, end_lineno=248, end_col_offset=59)], lineno=248, col_offset=8, end_lineno=248, end_col_offset=60), lineno=248, col_offset=8, end_lineno=248, end_col_offset=60), Assert(test=Compare(left=Name(id='target', ctx=Load(), lineno=250, col_offset=15, end_lineno=250, end_col_offset=21), ops=[Eq()], comparators=[Dict(keys=[Constant(value='attr1', lineno=250, col_offset=26, end_lineno=250, end_col_offset=33), Constant(value='attr2', lineno=250, col_offset=45, end_lineno=250, end_col_offset=52)], values=[Constant(value='value1', lineno=250, col_offset=35, end_lineno=250, end_col_offset=43), Constant(value='value2', lineno=250, col_offset=54, end_lineno=250, end_col_offset=62)], lineno=250, col_offset=25, end_lineno=250, end_col_offset=63)], lineno=250, col_offset=15, end_lineno=250, end_col_offset=63), lineno=250, col_offset=8, end_lineno=250, end_col_offset=63)], returns=Constant(value=None, lineno=241, col_offset=56, end_lineno=241, end_col_offset=60), lineno=241, col_offset=4, end_lineno=250, end_col_offset=63), FunctionDef(name='test_namespace_dir_combines_exports_and_module_attrs', args=arguments(args=[arg(arg='self', lineno=252, col_offset=61, end_lineno=252, end_col_offset=65)]), body=[Expr(value=Constant(value='Test that namespace_dir combines exports with non-dunder module attrs.', lineno=253, col_offset=8, end_lineno=253, end_col_offset=84), lineno=253, col_offset=8, end_lineno=253, end_col_offset=84), Assign(targets=[Name(id='module', ctx=Store(), lineno=254, col_offset=8, end_lineno=254, end_col_offset=14)], value=Call(func=Name(id='ModuleType', ctx=Load(), lineno=254, col_offset=17, end_lineno=254, end_col_offset=27), args=[Constant(value='test_module', lineno=254, col_offset=28, end_lineno=254, end_col_offset=41)], lineno=254, col_offset=17, end_lineno=254, end_col_offset=42), lineno=254, col_offset=8, end_lineno=254, end_col_offset=42), Expr(value=Call(func=Name(id='_set_module_attr', ctx=Load(), lineno=255, col_offset=8, end_lineno=255, end_col_offset=24), args=[Name(id='module', ctx=Load(), lineno=255, col_offset=25, end_lineno=255, end_col_offset=31), Constant(value='exported1', lineno=255, col_offset=33, end_lineno=255, end_col_offset=44), Constant(value='export1', lineno=255, col_offset=46, end_lineno=255, end_col_offset=55)], lineno=255, col_offset=8, end_lineno=255, end_col_offset=56), lineno=255, col_offset=8, end_lineno=255, end_col_offset=56), Expr(value=Call(func=Name(id='_set_module_attr', ctx=Load(), lineno=256, col_offset=8, end_lineno=256, end_col_offset=24), args=[Name(id='module', ctx=Load(), lineno=256, col_offset=25, end_lineno=256, end_col_offset=31), Constant(value='extra_attr', lineno=256, col_offset=33, end_lineno=256, end_col_offset=45), Constant(value='extra', lineno=256, col_offset=47, end_lineno=256, end_col_offset=54)], lineno=256, col_offset=8, end_lineno=256, end_col_offset=55), lineno=256, col_offset=8, end_lineno=256, end_col_offset=55), Expr(value=Call(func=Name(id='_set_module_attr', ctx=Load(), lineno=257, col_offset=8, end_lineno=257, end_col_offset=24), args=[Name(id='module', ctx=Load(), lineno=257, col_offset=25, end_lineno=257, end_col_offset=31), Constant(value='__dunder__', lineno=257, col_offset=33, end_lineno=257, end_col_offset=45), Constant(value='ignored', lineno=257, col_offset=47, end_lineno=257, end_col_offset=56)], lineno=257, col_offset=8, end_lineno=257, end_col_offset=57), lineno=257, col_offset=8, end_lineno=257, end_col_offset=57), Assign(targets=[Name(id='dir_result', ctx=Store(), lineno=259, col_offset=8, end_lineno=259, end_col_offset=18)], value=Call(func=Name(id='namespace_dir', ctx=Load(), lineno=259, col_offset=21, end_lineno=259, end_col_offset=34), args=[Name(id='module', ctx=Load(), lineno=259, col_offset=35, end_lineno=259, end_col_offset=41), List(elts=[Constant(value='exported1', lineno=259, col_offset=44, end_lineno=259, end_col_offset=55), Constant(value='exported2', lineno=259, col_offset=57, end_lineno=259, end_col_offset=68)], ctx=Load(), lineno=259, col_offset=43, end_lineno=259, end_col_offset=69)], lineno=259, col_offset=21, end_lineno=259, end_col_offset=70), lineno=259, col_offset=8, end_lineno=259, end_col_offset=70), Assert(test=Compare(left=Constant(value='exported1', lineno=260, col_offset=15, end_lineno=260, end_col_offset=26), ops=[In()], comparators=[Name(id='dir_result', ctx=Load(), lineno=260, col_offset=30, end_lineno=260, end_col_offset=40)], lineno=260, col_offset=15, end_lineno=260, end_col_offset=40), lineno=260, col_offset=8, end_lineno=260, end_col_offset=40), Assert(test=Compare(left=Constant(value='exported2', lineno=261, col_offset=15, end_lineno=261, end_col_offset=26), ops=[In()], comparators=[Name(id='dir_result', ctx=Load(), lineno=261, col_offset=30, end_lineno=261, end_col_offset=40)], lineno=261, col_offset=15, end_lineno=261, end_col_offset=40), lineno=261, col_offset=8, end_lineno=261, end_col_offset=40), Assert(test=Compare(left=Constant(value='extra_attr', lineno=262, col_offset=15, end_lineno=262, end_col_offset=27), ops=[In()], comparators=[Name(id='dir_result', ctx=Load(), lineno=262, col_offset=31, end_lineno=262, end_col_offset=41)], lineno=262, col_offset=15, end_lineno=262, end_col_offset=41), lineno=262, col_offset=8, end_lineno=262, end_col_offset=41), Assert(test=Compare(left=Constant(value='__dunder__', lineno=263, col_offset=15, end_lineno=263, end_col_offset=27), ops=[NotIn()], comparators=[Name(id='dir_result', ctx=Load(), lineno=263, col_offset=35, end_lineno=263, end_col_offset=45)], lineno=263, col_offset=15, end_lineno=263, end_col_offset=45), lineno=263, col_offset=8, end_lineno=263, end_col_offset=45)], returns=Constant(value=None, lineno=252, col_offset=70, end_lineno=252, end_col_offset=74), lineno=252, col_offset=4, end_lineno=263, end_col_offset=45), FunctionDef(name='test_namespace_getattr_returns_attribute', args=arguments(args=[arg(arg='self', lineno=265, col_offset=49, end_lineno=265, end_col_offset=53)]), body=[Expr(value=Constant(value='Test that namespace_getattr correctly retrieves attributes.', lineno=266, col_offset=8, end_lineno=266, end_col_offset=73), lineno=266, col_offset=8, end_lineno=266, end_col_offset=73), Assign(targets=[Name(id='module', ctx=Store(), lineno=267, col_offset=8, end_lineno=267, end_col_offset=14)], value=Call(func=Name(id='ModuleType', ctx=Load(), lineno=267, col_offset=17, end_lineno=267, end_col_offset=27), args=[Constant(value='test_module', lineno=267, col_offset=28, end_lineno=267, end_col_offset=41)], lineno=267, col_offset=17, end_lineno=267, end_col_offset=42), lineno=267, col_offset=8, end_lineno=267, end_col_offset=42), Expr(value=Call(func=Name(id='_set_module_attr', ctx=Load(), lineno=268, col_offset=8, end_lineno=268, end_col_offset=24), args=[Name(id='module', ctx=Load(), lineno=268, col_offset=25, end_lineno=268, end_col_offset=31), Constant(value='test_attr', lineno=268, col_offset=33, end_lineno=268, end_col_offset=44), Constant(value='test_value', lineno=268, col_offset=46, end_lineno=268, end_col_offset=58)], lineno=268, col_offset=8, end_lineno=268, end_col_offset=59), lineno=268, col_offset=8, end_lineno=268, end_col_offset=59), Assign(targets=[Name(id='result', ctx=Store(), lineno=270, col_offset=8, end_lineno=270, end_col_offset=14)], value=Call(func=Name(id='namespace_getattr', ctx=Load(), lineno=270, col_offset=17, end_lineno=270, end_col_offset=34), args=[Name(id='module', ctx=Load(), lineno=270, col_offset=35, end_lineno=270, end_col_offset=41), Constant(value='test_attr', lineno=270, col_offset=43, end_lineno=270, end_col_offset=54)], lineno=270, col_offset=17, end_lineno=270, end_col_offset=55), lineno=270, col_offset=8, end_lineno=270, end_col_offset=55), Assert(test=Compare(left=Name(id='result', ctx=Load(), lineno=271, col_offset=15, end_lineno=271, end_col_offset=21), ops=[Eq()], comparators=[Constant(value='test_value', lineno=271, col_offset=25, end_lineno=271, end_col_offset=37)], lineno=271, col_offset=15, end_lineno=271, end_col_offset=37), lineno=271, col_offset=8, end_lineno=271, end_col_offset=37)], returns=Constant(value=None, lineno=265, col_offset=58, end_lineno=265, end_col_offset=62), lineno=265, col_offset=4, end_lineno=271, end_col_offset=37)], lineno=212, col_offset=0, end_lineno=271, end_col_offset=37)])
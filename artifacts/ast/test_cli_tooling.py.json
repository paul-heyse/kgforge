Module(body=[ImportFrom(module='__future__', names=[alias(name='annotations', lineno=1, col_offset=23, end_lineno=1, end_col_offset=34)], level=0, lineno=1, col_offset=0, end_lineno=1, end_col_offset=34), Import(names=[alias(name='importlib', lineno=3, col_offset=7, end_lineno=3, end_col_offset=16)], lineno=3, col_offset=0, end_lineno=3, end_col_offset=16), ImportFrom(module='pathlib', names=[alias(name='Path', lineno=4, col_offset=20, end_lineno=4, end_col_offset=24)], level=0, lineno=4, col_offset=0, end_lineno=4, end_col_offset=24), ImportFrom(module='textwrap', names=[alias(name='dedent', lineno=5, col_offset=21, end_lineno=5, end_col_offset=27)], level=0, lineno=5, col_offset=0, end_lineno=5, end_col_offset=27), Import(names=[alias(name='pytest', lineno=7, col_offset=7, end_lineno=7, end_col_offset=13)], lineno=7, col_offset=0, end_lineno=7, end_col_offset=13), Assign(targets=[Name(id='cli_tooling', ctx=Store(), lineno=9, col_offset=0, end_lineno=9, end_col_offset=11)], value=Call(func=Attribute(value=Name(id='importlib', ctx=Load(), lineno=9, col_offset=14, end_lineno=9, end_col_offset=23), attr='import_module', ctx=Load(), lineno=9, col_offset=14, end_lineno=9, end_col_offset=37), args=[Constant(value='tools._shared.cli_tooling', lineno=9, col_offset=38, end_lineno=9, end_col_offset=65)], lineno=9, col_offset=14, end_lineno=9, end_col_offset=66), lineno=9, col_offset=0, end_lineno=9, end_col_offset=66), FunctionDef(name='_write_yaml', args=arguments(args=[arg(arg='path', annotation=Name(id='Path', ctx=Load(), lineno=12, col_offset=22, end_lineno=12, end_col_offset=26), lineno=12, col_offset=16, end_lineno=12, end_col_offset=26), arg(arg='content', annotation=Name(id='str', ctx=Load(), lineno=12, col_offset=37, end_lineno=12, end_col_offset=40), lineno=12, col_offset=28, end_lineno=12, end_col_offset=40)]), body=[Expr(value=Call(func=Attribute(value=Name(id='path', ctx=Load(), lineno=13, col_offset=4, end_lineno=13, end_col_offset=8), attr='write_text', ctx=Load(), lineno=13, col_offset=4, end_lineno=13, end_col_offset=19), args=[BinOp(left=Call(func=Attribute(value=Call(func=Name(id='dedent', ctx=Load(), lineno=13, col_offset=20, end_lineno=13, end_col_offset=26), args=[Name(id='content', ctx=Load(), lineno=13, col_offset=27, end_lineno=13, end_col_offset=34)], lineno=13, col_offset=20, end_lineno=13, end_col_offset=35), attr='strip', ctx=Load(), lineno=13, col_offset=20, end_lineno=13, end_col_offset=41), lineno=13, col_offset=20, end_lineno=13, end_col_offset=43), op=Add(), right=Constant(value='\n', lineno=13, col_offset=46, end_lineno=13, end_col_offset=50), lineno=13, col_offset=20, end_lineno=13, end_col_offset=50)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=13, col_offset=61, end_lineno=13, end_col_offset=68), lineno=13, col_offset=52, end_lineno=13, end_col_offset=68)], lineno=13, col_offset=4, end_lineno=13, end_col_offset=69), lineno=13, col_offset=4, end_lineno=13, end_col_offset=69)], returns=Constant(value=None, lineno=12, col_offset=45, end_lineno=12, end_col_offset=49), lineno=12, col_offset=0, end_lineno=13, end_col_offset=69), FunctionDef(name='test_load_cli_tooling_context_success', args=arguments(args=[arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=16, col_offset=52, end_lineno=16, end_col_offset=56), lineno=16, col_offset=42, end_lineno=16, end_col_offset=56)]), body=[Assign(targets=[Name(id='augment_path', ctx=Store(), lineno=17, col_offset=4, end_lineno=17, end_col_offset=16)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=17, col_offset=19, end_lineno=17, end_col_offset=27), op=Div(), right=Constant(value='augment.yaml', lineno=17, col_offset=30, end_lineno=17, end_col_offset=44), lineno=17, col_offset=19, end_lineno=17, end_col_offset=44), lineno=17, col_offset=4, end_lineno=17, end_col_offset=44), Assign(targets=[Name(id='registry_path', ctx=Store(), lineno=18, col_offset=4, end_lineno=18, end_col_offset=17)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=18, col_offset=20, end_lineno=18, end_col_offset=28), op=Div(), right=Constant(value='registry.yaml', lineno=18, col_offset=31, end_lineno=18, end_col_offset=46), lineno=18, col_offset=20, end_lineno=18, end_col_offset=46), lineno=18, col_offset=4, end_lineno=18, end_col_offset=46), Expr(value=Call(func=Name(id='_write_yaml', ctx=Load(), lineno=20, col_offset=4, end_lineno=20, end_col_offset=15), args=[Name(id='augment_path', ctx=Load(), lineno=21, col_offset=8, end_lineno=21, end_col_offset=20), Constant(value='\n        tags:\n          - name: orchestration\n            description: Example tag\n        operations:\n          cli.run:\n            tags: [orchestration]\n        ', lineno=22, col_offset=8, end_lineno=29, end_col_offset=11)], lineno=20, col_offset=4, end_lineno=30, end_col_offset=5), lineno=20, col_offset=4, end_lineno=30, end_col_offset=5), Expr(value=Call(func=Name(id='_write_yaml', ctx=Load(), lineno=32, col_offset=4, end_lineno=32, end_col_offset=15), args=[Name(id='registry_path', ctx=Load(), lineno=33, col_offset=8, end_lineno=33, end_col_offset=21), Constant(value='\n        interfaces:\n          tools-cli:\n            entrypoint: tests.fixtures.cli:app\n            binary: kgf\n            operations: {}\n        ', lineno=34, col_offset=8, end_lineno=40, end_col_offset=11)], lineno=32, col_offset=4, end_lineno=41, end_col_offset=5), lineno=32, col_offset=4, end_lineno=41, end_col_offset=5), Assign(targets=[Name(id='settings', ctx=Store(), lineno=43, col_offset=4, end_lineno=43, end_col_offset=12)], value=Call(func=Attribute(value=Name(id='cli_tooling', ctx=Load(), lineno=43, col_offset=15, end_lineno=43, end_col_offset=26), attr='CLIToolSettings', ctx=Load(), lineno=43, col_offset=15, end_lineno=43, end_col_offset=42), keywords=[keyword(arg='bin_name', value=Constant(value='kgf', lineno=44, col_offset=17, end_lineno=44, end_col_offset=22), lineno=44, col_offset=8, end_lineno=44, end_col_offset=22), keyword(arg='title', value=Constant(value='Test CLI', lineno=45, col_offset=14, end_lineno=45, end_col_offset=24), lineno=45, col_offset=8, end_lineno=45, end_col_offset=24), keyword(arg='version', value=Constant(value='1.0.0', lineno=46, col_offset=16, end_lineno=46, end_col_offset=23), lineno=46, col_offset=8, end_lineno=46, end_col_offset=23), keyword(arg='augment_path', value=Name(id='augment_path', ctx=Load(), lineno=47, col_offset=21, end_lineno=47, end_col_offset=33), lineno=47, col_offset=8, end_lineno=47, end_col_offset=33), keyword(arg='registry_path', value=Name(id='registry_path', ctx=Load(), lineno=48, col_offset=22, end_lineno=48, end_col_offset=35), lineno=48, col_offset=8, end_lineno=48, end_col_offset=35), keyword(arg='interface_id', value=Constant(value='tools-cli', lineno=49, col_offset=21, end_lineno=49, end_col_offset=32), lineno=49, col_offset=8, end_lineno=49, end_col_offset=32)], lineno=43, col_offset=15, end_lineno=50, end_col_offset=5), lineno=43, col_offset=4, end_lineno=50, end_col_offset=5), Assign(targets=[Name(id='context', ctx=Store(), lineno=52, col_offset=4, end_lineno=52, end_col_offset=11)], value=Call(func=Attribute(value=Name(id='cli_tooling', ctx=Load(), lineno=52, col_offset=14, end_lineno=52, end_col_offset=25), attr='load_cli_tooling_context', ctx=Load(), lineno=52, col_offset=14, end_lineno=52, end_col_offset=50), args=[Name(id='settings', ctx=Load(), lineno=52, col_offset=51, end_lineno=52, end_col_offset=59)], lineno=52, col_offset=14, end_lineno=52, end_col_offset=60), lineno=52, col_offset=4, end_lineno=52, end_col_offset=60), Assign(targets=[Name(id='cli_config', ctx=Store(), lineno=54, col_offset=4, end_lineno=54, end_col_offset=14)], value=Attribute(value=Name(id='context', ctx=Load(), lineno=54, col_offset=17, end_lineno=54, end_col_offset=24), attr='cli_config', ctx=Load(), lineno=54, col_offset=17, end_lineno=54, end_col_offset=35), lineno=54, col_offset=4, end_lineno=54, end_col_offset=35), Assert(test=Compare(left=Attribute(value=Name(id='cli_config', ctx=Load(), lineno=55, col_offset=11, end_lineno=55, end_col_offset=21), attr='bin_name', ctx=Load(), lineno=55, col_offset=11, end_lineno=55, end_col_offset=30), ops=[Eq()], comparators=[Constant(value='kgf', lineno=55, col_offset=34, end_lineno=55, end_col_offset=39)], lineno=55, col_offset=11, end_lineno=55, end_col_offset=39), lineno=55, col_offset=4, end_lineno=55, end_col_offset=39), Assert(test=Compare(left=Attribute(value=Name(id='cli_config', ctx=Load(), lineno=56, col_offset=11, end_lineno=56, end_col_offset=21), attr='interface_meta', ctx=Load(), lineno=56, col_offset=11, end_lineno=56, end_col_offset=36), ops=[IsNot()], comparators=[Constant(value=None, lineno=56, col_offset=44, end_lineno=56, end_col_offset=48)], lineno=56, col_offset=11, end_lineno=56, end_col_offset=48), lineno=56, col_offset=4, end_lineno=56, end_col_offset=48), Assert(test=Compare(left=Attribute(value=Attribute(value=Name(id='cli_config', ctx=Load(), lineno=57, col_offset=11, end_lineno=57, end_col_offset=21), attr='interface_meta', ctx=Load(), lineno=57, col_offset=11, end_lineno=57, end_col_offset=36), attr='entrypoint', ctx=Load(), lineno=57, col_offset=11, end_lineno=57, end_col_offset=47), ops=[Eq()], comparators=[Constant(value='tests.fixtures.cli:app', lineno=57, col_offset=51, end_lineno=57, end_col_offset=75)], lineno=57, col_offset=11, end_lineno=57, end_col_offset=75), lineno=57, col_offset=4, end_lineno=57, end_col_offset=75), Assign(targets=[Name(id='override', ctx=Store(), lineno=58, col_offset=4, end_lineno=58, end_col_offset=12)], value=Call(func=Attribute(value=Attribute(value=Name(id='context', ctx=Load(), lineno=58, col_offset=15, end_lineno=58, end_col_offset=22), attr='augment', ctx=Load(), lineno=58, col_offset=15, end_lineno=58, end_col_offset=30), attr='operation_override', ctx=Load(), lineno=58, col_offset=15, end_lineno=58, end_col_offset=49), args=[Constant(value='cli.run', lineno=58, col_offset=50, end_lineno=58, end_col_offset=59)], lineno=58, col_offset=15, end_lineno=58, end_col_offset=60), lineno=58, col_offset=4, end_lineno=58, end_col_offset=60), Assert(test=Compare(left=Name(id='override', ctx=Load(), lineno=59, col_offset=11, end_lineno=59, end_col_offset=19), ops=[IsNot()], comparators=[Constant(value=None, lineno=59, col_offset=27, end_lineno=59, end_col_offset=31)], lineno=59, col_offset=11, end_lineno=59, end_col_offset=31), lineno=59, col_offset=4, end_lineno=59, end_col_offset=31), Assert(test=Compare(left=Attribute(value=Name(id='override', ctx=Load(), lineno=60, col_offset=11, end_lineno=60, end_col_offset=19), attr='tags', ctx=Load(), lineno=60, col_offset=11, end_lineno=60, end_col_offset=24), ops=[Eq()], comparators=[Tuple(elts=[Constant(value='orchestration', lineno=60, col_offset=29, end_lineno=60, end_col_offset=44)], ctx=Load(), lineno=60, col_offset=28, end_lineno=60, end_col_offset=46)], lineno=60, col_offset=11, end_lineno=60, end_col_offset=46), lineno=60, col_offset=4, end_lineno=60, end_col_offset=46)], returns=Constant(value=None, lineno=16, col_offset=61, end_lineno=16, end_col_offset=65), lineno=16, col_offset=0, end_lineno=60, end_col_offset=46), FunctionDef(name='test_load_cli_tooling_context_missing_augment', args=arguments(args=[arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=63, col_offset=60, end_lineno=63, end_col_offset=64), lineno=63, col_offset=50, end_lineno=63, end_col_offset=64)]), body=[Assign(targets=[Name(id='registry_path', ctx=Store(), lineno=64, col_offset=4, end_lineno=64, end_col_offset=17)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=64, col_offset=20, end_lineno=64, end_col_offset=28), op=Div(), right=Constant(value='registry.yaml', lineno=64, col_offset=31, end_lineno=64, end_col_offset=46), lineno=64, col_offset=20, end_lineno=64, end_col_offset=46), lineno=64, col_offset=4, end_lineno=64, end_col_offset=46), Expr(value=Call(func=Name(id='_write_yaml', ctx=Load(), lineno=65, col_offset=4, end_lineno=65, end_col_offset=15), args=[Name(id='registry_path', ctx=Load(), lineno=65, col_offset=16, end_lineno=65, end_col_offset=29), Constant(value='interfaces: {}', lineno=65, col_offset=31, end_lineno=65, end_col_offset=47)], lineno=65, col_offset=4, end_lineno=65, end_col_offset=48), lineno=65, col_offset=4, end_lineno=65, end_col_offset=48), Assign(targets=[Name(id='settings', ctx=Store(), lineno=67, col_offset=4, end_lineno=67, end_col_offset=12)], value=Call(func=Attribute(value=Name(id='cli_tooling', ctx=Load(), lineno=67, col_offset=15, end_lineno=67, end_col_offset=26), attr='CLIToolSettings', ctx=Load(), lineno=67, col_offset=15, end_lineno=67, end_col_offset=42), keywords=[keyword(arg='bin_name', value=Constant(value='kgf', lineno=68, col_offset=17, end_lineno=68, end_col_offset=22), lineno=68, col_offset=8, end_lineno=68, end_col_offset=22), keyword(arg='title', value=Constant(value='Broken CLI', lineno=69, col_offset=14, end_lineno=69, end_col_offset=26), lineno=69, col_offset=8, end_lineno=69, end_col_offset=26), keyword(arg='version', value=Constant(value='0.0.1', lineno=70, col_offset=16, end_lineno=70, end_col_offset=23), lineno=70, col_offset=8, end_lineno=70, end_col_offset=23), keyword(arg='augment_path', value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=71, col_offset=21, end_lineno=71, end_col_offset=29), op=Div(), right=Constant(value='missing.yaml', lineno=71, col_offset=32, end_lineno=71, end_col_offset=46), lineno=71, col_offset=21, end_lineno=71, end_col_offset=46), lineno=71, col_offset=8, end_lineno=71, end_col_offset=46), keyword(arg='registry_path', value=Name(id='registry_path', ctx=Load(), lineno=72, col_offset=22, end_lineno=72, end_col_offset=35), lineno=72, col_offset=8, end_lineno=72, end_col_offset=35)], lineno=67, col_offset=15, end_lineno=73, end_col_offset=5), lineno=67, col_offset=4, end_lineno=73, end_col_offset=5), With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=75, col_offset=9, end_lineno=75, end_col_offset=15), attr='raises', ctx=Load(), lineno=75, col_offset=9, end_lineno=75, end_col_offset=22), args=[Attribute(value=Name(id='cli_tooling', ctx=Load(), lineno=75, col_offset=23, end_lineno=75, end_col_offset=34), attr='CLIConfigError', ctx=Load(), lineno=75, col_offset=23, end_lineno=75, end_col_offset=49)], lineno=75, col_offset=9, end_lineno=75, end_col_offset=50), optional_vars=Name(id='excinfo', ctx=Store(), lineno=75, col_offset=54, end_lineno=75, end_col_offset=61))], body=[Expr(value=Call(func=Attribute(value=Name(id='cli_tooling', ctx=Load(), lineno=76, col_offset=8, end_lineno=76, end_col_offset=19), attr='load_cli_tooling_context', ctx=Load(), lineno=76, col_offset=8, end_lineno=76, end_col_offset=44), args=[Name(id='settings', ctx=Load(), lineno=76, col_offset=45, end_lineno=76, end_col_offset=53)], lineno=76, col_offset=8, end_lineno=76, end_col_offset=54), lineno=76, col_offset=8, end_lineno=76, end_col_offset=54)], lineno=75, col_offset=4, end_lineno=76, end_col_offset=54), Assign(targets=[Name(id='problem', ctx=Store(), lineno=78, col_offset=4, end_lineno=78, end_col_offset=11)], value=Attribute(value=Attribute(value=Name(id='excinfo', ctx=Load(), lineno=78, col_offset=14, end_lineno=78, end_col_offset=21), attr='value', ctx=Load(), lineno=78, col_offset=14, end_lineno=78, end_col_offset=27), attr='problem', ctx=Load(), lineno=78, col_offset=14, end_lineno=78, end_col_offset=35), lineno=78, col_offset=4, end_lineno=78, end_col_offset=35), Assert(test=Compare(left=Subscript(value=Name(id='problem', ctx=Load(), lineno=79, col_offset=11, end_lineno=79, end_col_offset=18), slice=Constant(value='status', lineno=79, col_offset=19, end_lineno=79, end_col_offset=27), ctx=Load(), lineno=79, col_offset=11, end_lineno=79, end_col_offset=28), ops=[Eq()], comparators=[Constant(value=404, lineno=79, col_offset=32, end_lineno=79, end_col_offset=35)], lineno=79, col_offset=11, end_lineno=79, end_col_offset=35), lineno=79, col_offset=4, end_lineno=79, end_col_offset=35), Assert(test=Compare(left=Subscript(value=Name(id='problem', ctx=Load(), lineno=80, col_offset=11, end_lineno=80, end_col_offset=18), slice=Constant(value='type', lineno=80, col_offset=19, end_lineno=80, end_col_offset=25), ctx=Load(), lineno=80, col_offset=11, end_lineno=80, end_col_offset=26), ops=[Eq()], comparators=[Constant(value='https://kgfoundry.dev/problems/cli-config', lineno=80, col_offset=30, end_lineno=80, end_col_offset=73)], lineno=80, col_offset=11, end_lineno=80, end_col_offset=73), lineno=80, col_offset=4, end_lineno=80, end_col_offset=73)], returns=Constant(value=None, lineno=63, col_offset=69, end_lineno=63, end_col_offset=73), lineno=63, col_offset=0, end_lineno=80, end_col_offset=73), FunctionDef(name='test_load_cli_tooling_context_missing_interface', args=arguments(args=[arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=83, col_offset=62, end_lineno=83, end_col_offset=66), lineno=83, col_offset=52, end_lineno=83, end_col_offset=66)]), body=[Assign(targets=[Name(id='augment_path', ctx=Store(), lineno=84, col_offset=4, end_lineno=84, end_col_offset=16)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=84, col_offset=19, end_lineno=84, end_col_offset=27), op=Div(), right=Constant(value='augment.yaml', lineno=84, col_offset=30, end_lineno=84, end_col_offset=44), lineno=84, col_offset=19, end_lineno=84, end_col_offset=44), lineno=84, col_offset=4, end_lineno=84, end_col_offset=44), Assign(targets=[Name(id='registry_path', ctx=Store(), lineno=85, col_offset=4, end_lineno=85, end_col_offset=17)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=85, col_offset=20, end_lineno=85, end_col_offset=28), op=Div(), right=Constant(value='registry.yaml', lineno=85, col_offset=31, end_lineno=85, end_col_offset=46), lineno=85, col_offset=20, end_lineno=85, end_col_offset=46), lineno=85, col_offset=4, end_lineno=85, end_col_offset=46), Expr(value=Call(func=Name(id='_write_yaml', ctx=Load(), lineno=87, col_offset=4, end_lineno=87, end_col_offset=15), args=[Name(id='augment_path', ctx=Load(), lineno=87, col_offset=16, end_lineno=87, end_col_offset=28), Constant(value='operations: {}', lineno=87, col_offset=30, end_lineno=87, end_col_offset=46)], lineno=87, col_offset=4, end_lineno=87, end_col_offset=47), lineno=87, col_offset=4, end_lineno=87, end_col_offset=47), Expr(value=Call(func=Name(id='_write_yaml', ctx=Load(), lineno=88, col_offset=4, end_lineno=88, end_col_offset=15), args=[Name(id='registry_path', ctx=Load(), lineno=88, col_offset=16, end_lineno=88, end_col_offset=29), Constant(value='interfaces: {}', lineno=88, col_offset=31, end_lineno=88, end_col_offset=47)], lineno=88, col_offset=4, end_lineno=88, end_col_offset=48), lineno=88, col_offset=4, end_lineno=88, end_col_offset=48), Assign(targets=[Name(id='settings', ctx=Store(), lineno=90, col_offset=4, end_lineno=90, end_col_offset=12)], value=Call(func=Attribute(value=Name(id='cli_tooling', ctx=Load(), lineno=90, col_offset=15, end_lineno=90, end_col_offset=26), attr='CLIToolSettings', ctx=Load(), lineno=90, col_offset=15, end_lineno=90, end_col_offset=42), keywords=[keyword(arg='bin_name', value=Constant(value='kgf', lineno=91, col_offset=17, end_lineno=91, end_col_offset=22), lineno=91, col_offset=8, end_lineno=91, end_col_offset=22), keyword(arg='title', value=Constant(value='Test', lineno=92, col_offset=14, end_lineno=92, end_col_offset=20), lineno=92, col_offset=8, end_lineno=92, end_col_offset=20), keyword(arg='version', value=Constant(value='0.0.1', lineno=93, col_offset=16, end_lineno=93, end_col_offset=23), lineno=93, col_offset=8, end_lineno=93, end_col_offset=23), keyword(arg='augment_path', value=Name(id='augment_path', ctx=Load(), lineno=94, col_offset=21, end_lineno=94, end_col_offset=33), lineno=94, col_offset=8, end_lineno=94, end_col_offset=33), keyword(arg='registry_path', value=Name(id='registry_path', ctx=Load(), lineno=95, col_offset=22, end_lineno=95, end_col_offset=35), lineno=95, col_offset=8, end_lineno=95, end_col_offset=35), keyword(arg='interface_id', value=Constant(value='missing-cli', lineno=96, col_offset=21, end_lineno=96, end_col_offset=34), lineno=96, col_offset=8, end_lineno=96, end_col_offset=34)], lineno=90, col_offset=15, end_lineno=97, end_col_offset=5), lineno=90, col_offset=4, end_lineno=97, end_col_offset=5), With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=99, col_offset=9, end_lineno=99, end_col_offset=15), attr='raises', ctx=Load(), lineno=99, col_offset=9, end_lineno=99, end_col_offset=22), args=[Attribute(value=Name(id='cli_tooling', ctx=Load(), lineno=99, col_offset=23, end_lineno=99, end_col_offset=34), attr='CLIConfigError', ctx=Load(), lineno=99, col_offset=23, end_lineno=99, end_col_offset=49)], lineno=99, col_offset=9, end_lineno=99, end_col_offset=50), optional_vars=Name(id='excinfo', ctx=Store(), lineno=99, col_offset=54, end_lineno=99, end_col_offset=61))], body=[Expr(value=Call(func=Attribute(value=Name(id='cli_tooling', ctx=Load(), lineno=100, col_offset=8, end_lineno=100, end_col_offset=19), attr='load_cli_tooling_context', ctx=Load(), lineno=100, col_offset=8, end_lineno=100, end_col_offset=44), args=[Name(id='settings', ctx=Load(), lineno=100, col_offset=45, end_lineno=100, end_col_offset=53)], lineno=100, col_offset=8, end_lineno=100, end_col_offset=54), lineno=100, col_offset=8, end_lineno=100, end_col_offset=54)], lineno=99, col_offset=4, end_lineno=100, end_col_offset=54), Assign(targets=[Name(id='problem', ctx=Store(), lineno=102, col_offset=4, end_lineno=102, end_col_offset=11)], value=Attribute(value=Attribute(value=Name(id='excinfo', ctx=Load(), lineno=102, col_offset=14, end_lineno=102, end_col_offset=21), attr='value', ctx=Load(), lineno=102, col_offset=14, end_lineno=102, end_col_offset=27), attr='problem', ctx=Load(), lineno=102, col_offset=14, end_lineno=102, end_col_offset=35), lineno=102, col_offset=4, end_lineno=102, end_col_offset=35), Assert(test=Compare(left=Subscript(value=Name(id='problem', ctx=Load(), lineno=103, col_offset=11, end_lineno=103, end_col_offset=18), slice=Constant(value='status', lineno=103, col_offset=19, end_lineno=103, end_col_offset=27), ctx=Load(), lineno=103, col_offset=11, end_lineno=103, end_col_offset=28), ops=[Eq()], comparators=[Constant(value=422, lineno=103, col_offset=32, end_lineno=103, end_col_offset=35)], lineno=103, col_offset=11, end_lineno=103, end_col_offset=35), lineno=103, col_offset=4, end_lineno=103, end_col_offset=35), Assert(test=Call(func=Attribute(value=Subscript(value=Name(id='problem', ctx=Load(), lineno=104, col_offset=11, end_lineno=104, end_col_offset=18), slice=Constant(value='detail', lineno=104, col_offset=19, end_lineno=104, end_col_offset=27), ctx=Load(), lineno=104, col_offset=11, end_lineno=104, end_col_offset=28), attr='startswith', ctx=Load(), lineno=104, col_offset=11, end_lineno=104, end_col_offset=39), args=[Constant(value="Interface 'missing-cli'", lineno=104, col_offset=40, end_lineno=104, end_col_offset=65)], lineno=104, col_offset=11, end_lineno=104, end_col_offset=66), lineno=104, col_offset=4, end_lineno=104, end_col_offset=66)], returns=Constant(value=None, lineno=83, col_offset=71, end_lineno=83, end_col_offset=75), lineno=83, col_offset=0, end_lineno=104, end_col_offset=66), FunctionDef(name='test_loaders_use_caching', args=arguments(args=[arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=107, col_offset=39, end_lineno=107, end_col_offset=43), lineno=107, col_offset=29, end_lineno=107, end_col_offset=43)]), body=[Assign(targets=[Name(id='augment_path', ctx=Store(), lineno=108, col_offset=4, end_lineno=108, end_col_offset=16)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=108, col_offset=19, end_lineno=108, end_col_offset=27), op=Div(), right=Constant(value='augment.yaml', lineno=108, col_offset=30, end_lineno=108, end_col_offset=44), lineno=108, col_offset=19, end_lineno=108, end_col_offset=44), lineno=108, col_offset=4, end_lineno=108, end_col_offset=44), Assign(targets=[Name(id='registry_path', ctx=Store(), lineno=109, col_offset=4, end_lineno=109, end_col_offset=17)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=109, col_offset=20, end_lineno=109, end_col_offset=28), op=Div(), right=Constant(value='registry.yaml', lineno=109, col_offset=31, end_lineno=109, end_col_offset=46), lineno=109, col_offset=20, end_lineno=109, end_col_offset=46), lineno=109, col_offset=4, end_lineno=109, end_col_offset=46), Expr(value=Call(func=Name(id='_write_yaml', ctx=Load(), lineno=111, col_offset=4, end_lineno=111, end_col_offset=15), args=[Name(id='augment_path', ctx=Load(), lineno=111, col_offset=16, end_lineno=111, end_col_offset=28), Constant(value='operations: {}', lineno=111, col_offset=30, end_lineno=111, end_col_offset=46)], lineno=111, col_offset=4, end_lineno=111, end_col_offset=47), lineno=111, col_offset=4, end_lineno=111, end_col_offset=47), Expr(value=Call(func=Name(id='_write_yaml', ctx=Load(), lineno=112, col_offset=4, end_lineno=112, end_col_offset=15), args=[Name(id='registry_path', ctx=Load(), lineno=112, col_offset=16, end_lineno=112, end_col_offset=29), Constant(value='interfaces: {}', lineno=112, col_offset=31, end_lineno=112, end_col_offset=47)], lineno=112, col_offset=4, end_lineno=112, end_col_offset=48), lineno=112, col_offset=4, end_lineno=112, end_col_offset=48), Assign(targets=[Name(id='first_augment', ctx=Store(), lineno=114, col_offset=4, end_lineno=114, end_col_offset=17)], value=Call(func=Attribute(value=Name(id='cli_tooling', ctx=Load(), lineno=114, col_offset=20, end_lineno=114, end_col_offset=31), attr='load_augment_config', ctx=Load(), lineno=114, col_offset=20, end_lineno=114, end_col_offset=51), args=[Name(id='augment_path', ctx=Load(), lineno=114, col_offset=52, end_lineno=114, end_col_offset=64)], lineno=114, col_offset=20, end_lineno=114, end_col_offset=65), lineno=114, col_offset=4, end_lineno=114, end_col_offset=65), Assign(targets=[Name(id='second_augment', ctx=Store(), lineno=115, col_offset=4, end_lineno=115, end_col_offset=18)], value=Call(func=Attribute(value=Name(id='cli_tooling', ctx=Load(), lineno=115, col_offset=21, end_lineno=115, end_col_offset=32), attr='load_augment_config', ctx=Load(), lineno=115, col_offset=21, end_lineno=115, end_col_offset=52), args=[Name(id='augment_path', ctx=Load(), lineno=115, col_offset=53, end_lineno=115, end_col_offset=65)], lineno=115, col_offset=21, end_lineno=115, end_col_offset=66), lineno=115, col_offset=4, end_lineno=115, end_col_offset=66), Assert(test=Compare(left=Name(id='first_augment', ctx=Load(), lineno=116, col_offset=11, end_lineno=116, end_col_offset=24), ops=[Is()], comparators=[Name(id='second_augment', ctx=Load(), lineno=116, col_offset=28, end_lineno=116, end_col_offset=42)], lineno=116, col_offset=11, end_lineno=116, end_col_offset=42), lineno=116, col_offset=4, end_lineno=116, end_col_offset=42), Assign(targets=[Name(id='first_registry', ctx=Store(), lineno=118, col_offset=4, end_lineno=118, end_col_offset=18)], value=Call(func=Attribute(value=Name(id='cli_tooling', ctx=Load(), lineno=118, col_offset=21, end_lineno=118, end_col_offset=32), attr='load_registry_context', ctx=Load(), lineno=118, col_offset=21, end_lineno=118, end_col_offset=54), args=[Name(id='registry_path', ctx=Load(), lineno=118, col_offset=55, end_lineno=118, end_col_offset=68)], lineno=118, col_offset=21, end_lineno=118, end_col_offset=69), lineno=118, col_offset=4, end_lineno=118, end_col_offset=69), Assign(targets=[Name(id='second_registry', ctx=Store(), lineno=119, col_offset=4, end_lineno=119, end_col_offset=19)], value=Call(func=Attribute(value=Name(id='cli_tooling', ctx=Load(), lineno=119, col_offset=22, end_lineno=119, end_col_offset=33), attr='load_registry_context', ctx=Load(), lineno=119, col_offset=22, end_lineno=119, end_col_offset=55), args=[Name(id='registry_path', ctx=Load(), lineno=119, col_offset=56, end_lineno=119, end_col_offset=69)], lineno=119, col_offset=22, end_lineno=119, end_col_offset=70), lineno=119, col_offset=4, end_lineno=119, end_col_offset=70), Assert(test=Compare(left=Name(id='first_registry', ctx=Load(), lineno=120, col_offset=11, end_lineno=120, end_col_offset=25), ops=[Is()], comparators=[Name(id='second_registry', ctx=Load(), lineno=120, col_offset=29, end_lineno=120, end_col_offset=44)], lineno=120, col_offset=11, end_lineno=120, end_col_offset=44), lineno=120, col_offset=4, end_lineno=120, end_col_offset=44)], returns=Constant(value=None, lineno=107, col_offset=48, end_lineno=107, end_col_offset=52), lineno=107, col_offset=0, end_lineno=120, end_col_offset=44)])
Module(body=[Expr(value=Constant(value='Overview of scan observability.\n\nThis module bundles scan observability logic for the kgfoundry stack. It groups related helpers so\ndownstream packages can import a single cohesive namespace. Refer to the functions and classes below\nfor implementation specifics.\n', lineno=1, col_offset=0, end_lineno=6, end_col_offset=3), lineno=1, col_offset=0, end_lineno=6, end_col_offset=3), ImportFrom(module='__future__', names=[alias(name='annotations', lineno=8, col_offset=23, end_lineno=8, end_col_offset=34)], level=0, lineno=8, col_offset=0, end_lineno=8, end_col_offset=34), Import(names=[alias(name='ast', lineno=10, col_offset=7, end_lineno=10, end_col_offset=10)], lineno=10, col_offset=0, end_lineno=10, end_col_offset=10), Import(names=[alias(name='importlib', lineno=11, col_offset=7, end_lineno=11, end_col_offset=16)], lineno=11, col_offset=0, end_lineno=11, end_col_offset=16), Import(names=[alias(name='json', lineno=12, col_offset=7, end_lineno=12, end_col_offset=11)], lineno=12, col_offset=0, end_lineno=12, end_col_offset=11), Import(names=[alias(name='os', lineno=13, col_offset=7, end_lineno=13, end_col_offset=9)], lineno=13, col_offset=0, end_lineno=13, end_col_offset=9), Import(names=[alias(name='re', lineno=14, col_offset=7, end_lineno=14, end_col_offset=9)], lineno=14, col_offset=0, end_lineno=14, end_col_offset=9), Import(names=[alias(name='sys', lineno=15, col_offset=7, end_lineno=15, end_col_offset=10)], lineno=15, col_offset=0, end_lineno=15, end_col_offset=10), ImportFrom(module='collections.abc', names=[alias(name='Mapping', lineno=16, col_offset=28, end_lineno=16, end_col_offset=35), alias(name='Sequence', lineno=16, col_offset=37, end_lineno=16, end_col_offset=45)], level=0, lineno=16, col_offset=0, end_lineno=16, end_col_offset=45), ImportFrom(module='dataclasses', names=[alias(name='asdict', lineno=17, col_offset=24, end_lineno=17, end_col_offset=30), alias(name='dataclass', lineno=17, col_offset=32, end_lineno=17, end_col_offset=41), alias(name='field', lineno=17, col_offset=43, end_lineno=17, end_col_offset=48)], level=0, lineno=17, col_offset=0, end_lineno=17, end_col_offset=48), ImportFrom(module='pathlib', names=[alias(name='Path', lineno=18, col_offset=20, end_lineno=18, end_col_offset=24)], level=0, lineno=18, col_offset=0, end_lineno=18, end_col_offset=24), ImportFrom(module='typing', names=[alias(name='TYPE_CHECKING', lineno=19, col_offset=19, end_lineno=19, end_col_offset=32), alias(name='Literal', lineno=19, col_offset=34, end_lineno=19, end_col_offset=41), alias(name='cast', lineno=19, col_offset=43, end_lineno=19, end_col_offset=47)], level=0, lineno=19, col_offset=0, end_lineno=19, end_col_offset=47), ImportFrom(module='tools._shared.logging', names=[alias(name='get_logger', lineno=21, col_offset=34, end_lineno=21, end_col_offset=44), alias(name='with_fields', lineno=21, col_offset=46, end_lineno=21, end_col_offset=57)], level=0, lineno=21, col_offset=0, end_lineno=21, end_col_offset=57), ImportFrom(module='tools._shared.proc', names=[alias(name='ToolExecutionError', lineno=22, col_offset=31, end_lineno=22, end_col_offset=49), alias(name='run_tool', lineno=22, col_offset=51, end_lineno=22, end_col_offset=59)], level=0, lineno=22, col_offset=0, end_lineno=22, end_col_offset=59), If(test=Name(id='TYPE_CHECKING', ctx=Load(), lineno=24, col_offset=3, end_lineno=24, end_col_offset=16), body=[ImportFrom(module='types', names=[alias(name='ModuleType', lineno=25, col_offset=22, end_lineno=25, end_col_offset=32)], level=0, lineno=25, col_offset=4, end_lineno=25, end_col_offset=32), ImportFrom(module='tools._shared.logging', names=[alias(name='StructuredLoggerAdapter', lineno=27, col_offset=38, end_lineno=27, end_col_offset=61)], level=0, lineno=27, col_offset=4, end_lineno=27, end_col_offset=61)], lineno=24, col_offset=0, end_lineno=27, end_col_offset=61), AnnAssign(target=Name(id='LOGGER', ctx=Store(), lineno=29, col_offset=0, end_lineno=29, end_col_offset=6), annotation=Name(id='StructuredLoggerAdapter', ctx=Load(), lineno=29, col_offset=8, end_lineno=29, end_col_offset=31), value=Call(func=Name(id='get_logger', ctx=Load(), lineno=29, col_offset=34, end_lineno=29, end_col_offset=44), args=[Name(id='__name__', ctx=Load(), lineno=29, col_offset=45, end_lineno=29, end_col_offset=53)], lineno=29, col_offset=34, end_lineno=29, end_col_offset=54), simple=1, lineno=29, col_offset=0, end_lineno=29, end_col_offset=54), FunctionDef(name='_optional_import', args=arguments(args=[arg(arg='name', annotation=Name(id='str', ctx=Load(), lineno=32, col_offset=27, end_lineno=32, end_col_offset=30), lineno=32, col_offset=21, end_lineno=32, end_col_offset=30)]), body=[Expr(value=Constant(value='Import module if available.\n\n    Parameters\n    ----------\n    name : str\n        Module name to import.\n\n    Returns\n    -------\n    ModuleType | None\n        Module if available, None otherwise.\n    ', lineno=33, col_offset=4, end_lineno=44, end_col_offset=7), lineno=33, col_offset=4, end_lineno=44, end_col_offset=7), Try(body=[Return(value=Call(func=Attribute(value=Name(id='importlib', ctx=Load(), lineno=46, col_offset=15, end_lineno=46, end_col_offset=24), attr='import_module', ctx=Load(), lineno=46, col_offset=15, end_lineno=46, end_col_offset=38), args=[Name(id='name', ctx=Load(), lineno=46, col_offset=39, end_lineno=46, end_col_offset=43)], lineno=46, col_offset=15, end_lineno=46, end_col_offset=44), lineno=46, col_offset=8, end_lineno=46, end_col_offset=44)], handlers=[ExceptHandler(type=Name(id='ModuleNotFoundError', ctx=Load(), lineno=47, col_offset=11, end_lineno=47, end_col_offset=30), body=[Return(value=Constant(value=None, lineno=48, col_offset=15, end_lineno=48, end_col_offset=19), lineno=48, col_offset=8, end_lineno=48, end_col_offset=19)], lineno=47, col_offset=4, end_lineno=48, end_col_offset=19)], lineno=45, col_offset=4, end_lineno=48, end_col_offset=19)], returns=BinOp(left=Name(id='ModuleType', ctx=Load(), lineno=32, col_offset=35, end_lineno=32, end_col_offset=45), op=BitOr(), right=Constant(value=None, lineno=32, col_offset=48, end_lineno=32, end_col_offset=52), lineno=32, col_offset=35, end_lineno=32, end_col_offset=52), lineno=32, col_offset=0, end_lineno=48, end_col_offset=19), Assign(targets=[Name(id='yaml', ctx=Store(), lineno=51, col_offset=0, end_lineno=51, end_col_offset=4)], value=Call(func=Name(id='_optional_import', ctx=Load(), lineno=51, col_offset=7, end_lineno=51, end_col_offset=23), args=[Constant(value='yaml', lineno=51, col_offset=24, end_lineno=51, end_col_offset=30)], lineno=51, col_offset=7, end_lineno=51, end_col_offset=31), lineno=51, col_offset=0, end_lineno=51, end_col_offset=31), Assign(targets=[Name(id='ROOT', ctx=Store(), lineno=53, col_offset=0, end_lineno=53, end_col_offset=4)], value=Subscript(value=Attribute(value=Call(func=Attribute(value=Call(func=Name(id='Path', ctx=Load(), lineno=53, col_offset=7, end_lineno=53, end_col_offset=11), args=[Name(id='__file__', ctx=Load(), lineno=53, col_offset=12, end_lineno=53, end_col_offset=20)], lineno=53, col_offset=7, end_lineno=53, end_col_offset=21), attr='resolve', ctx=Load(), lineno=53, col_offset=7, end_lineno=53, end_col_offset=29), lineno=53, col_offset=7, end_lineno=53, end_col_offset=31), attr='parents', ctx=Load(), lineno=53, col_offset=7, end_lineno=53, end_col_offset=39), slice=Constant(value=2, lineno=53, col_offset=40, end_lineno=53, end_col_offset=41), ctx=Load(), lineno=53, col_offset=7, end_lineno=53, end_col_offset=42), lineno=53, col_offset=0, end_lineno=53, end_col_offset=42), Assign(targets=[Name(id='SRC', ctx=Store(), lineno=54, col_offset=0, end_lineno=54, end_col_offset=3)], value=BinOp(left=Name(id='ROOT', ctx=Load(), lineno=54, col_offset=6, end_lineno=54, end_col_offset=10), op=Div(), right=Constant(value='src', lineno=54, col_offset=13, end_lineno=54, end_col_offset=18), lineno=54, col_offset=6, end_lineno=54, end_col_offset=18), lineno=54, col_offset=0, end_lineno=54, end_col_offset=18), Assign(targets=[Name(id='OUT', ctx=Store(), lineno=55, col_offset=0, end_lineno=55, end_col_offset=3)], value=BinOp(left=BinOp(left=Name(id='ROOT', ctx=Load(), lineno=55, col_offset=6, end_lineno=55, end_col_offset=10), op=Div(), right=Constant(value='docs', lineno=55, col_offset=13, end_lineno=55, end_col_offset=19), lineno=55, col_offset=6, end_lineno=55, end_col_offset=19), op=Div(), right=Constant(value='_build', lineno=55, col_offset=22, end_lineno=55, end_col_offset=30), lineno=55, col_offset=6, end_lineno=55, end_col_offset=30), lineno=55, col_offset=0, end_lineno=55, end_col_offset=30), Expr(value=Call(func=Attribute(value=Name(id='OUT', ctx=Load(), lineno=56, col_offset=0, end_lineno=56, end_col_offset=3), attr='mkdir', ctx=Load(), lineno=56, col_offset=0, end_lineno=56, end_col_offset=9), keywords=[keyword(arg='parents', value=Constant(value=True, lineno=56, col_offset=18, end_lineno=56, end_col_offset=22), lineno=56, col_offset=10, end_lineno=56, end_col_offset=22), keyword(arg='exist_ok', value=Constant(value=True, lineno=56, col_offset=33, end_lineno=56, end_col_offset=37), lineno=56, col_offset=24, end_lineno=56, end_col_offset=37)], lineno=56, col_offset=0, end_lineno=56, end_col_offset=38), lineno=56, col_offset=0, end_lineno=56, end_col_offset=38), Assign(targets=[Name(id='CONFIG_MD', ctx=Store(), lineno=57, col_offset=0, end_lineno=57, end_col_offset=9)], value=BinOp(left=Name(id='OUT', ctx=Load(), lineno=57, col_offset=12, end_lineno=57, end_col_offset=15), op=Div(), right=Constant(value='config.md', lineno=57, col_offset=18, end_lineno=57, end_col_offset=29), lineno=57, col_offset=12, end_lineno=57, end_col_offset=29), lineno=57, col_offset=0, end_lineno=57, end_col_offset=29), Assign(targets=[Name(id='G_ORG', ctx=Store(), lineno=60, col_offset=0, end_lineno=60, end_col_offset=5)], value=Call(func=Attribute(value=Name(id='os', ctx=Load(), lineno=60, col_offset=8, end_lineno=60, end_col_offset=10), attr='getenv', ctx=Load(), lineno=60, col_offset=8, end_lineno=60, end_col_offset=17), args=[Constant(value='DOCS_GITHUB_ORG', lineno=60, col_offset=18, end_lineno=60, end_col_offset=35)], lineno=60, col_offset=8, end_lineno=60, end_col_offset=36), lineno=60, col_offset=0, end_lineno=60, end_col_offset=36), Assign(targets=[Name(id='G_REPO', ctx=Store(), lineno=61, col_offset=0, end_lineno=61, end_col_offset=6)], value=Call(func=Attribute(value=Name(id='os', ctx=Load(), lineno=61, col_offset=9, end_lineno=61, end_col_offset=11), attr='getenv', ctx=Load(), lineno=61, col_offset=9, end_lineno=61, end_col_offset=18), args=[Constant(value='DOCS_GITHUB_REPO', lineno=61, col_offset=19, end_lineno=61, end_col_offset=37)], lineno=61, col_offset=9, end_lineno=61, end_col_offset=38), lineno=61, col_offset=0, end_lineno=61, end_col_offset=38), Assign(targets=[Name(id='G_SHA', ctx=Store(), lineno=62, col_offset=0, end_lineno=62, end_col_offset=5)], value=Call(func=Attribute(value=Name(id='os', ctx=Load(), lineno=62, col_offset=8, end_lineno=62, end_col_offset=10), attr='getenv', ctx=Load(), lineno=62, col_offset=8, end_lineno=62, end_col_offset=17), args=[Constant(value='DOCS_GITHUB_SHA', lineno=62, col_offset=18, end_lineno=62, end_col_offset=35)], lineno=62, col_offset=8, end_lineno=62, end_col_offset=36), lineno=62, col_offset=0, end_lineno=62, end_col_offset=36), Assign(targets=[Name(id='LINK_MODE', ctx=Store(), lineno=63, col_offset=0, end_lineno=63, end_col_offset=9)], value=Call(func=Attribute(value=Call(func=Attribute(value=Name(id='os', ctx=Load(), lineno=63, col_offset=12, end_lineno=63, end_col_offset=14), attr='getenv', ctx=Load(), lineno=63, col_offset=12, end_lineno=63, end_col_offset=21), args=[Constant(value='DOCS_LINK_MODE', lineno=63, col_offset=22, end_lineno=63, end_col_offset=38), Constant(value='both', lineno=63, col_offset=40, end_lineno=63, end_col_offset=46)], lineno=63, col_offset=12, end_lineno=63, end_col_offset=47), attr='lower', ctx=Load(), lineno=63, col_offset=12, end_lineno=63, end_col_offset=53), lineno=63, col_offset=12, end_lineno=63, end_col_offset=55), lineno=63, col_offset=0, end_lineno=63, end_col_offset=55), ClassDef(name='MetricPolicy', body=[Expr(value=Constant(value='Configuration guardrails for metric instrumentation.', lineno=68, col_offset=4, end_lineno=68, end_col_offset=62), lineno=68, col_offset=4, end_lineno=68, end_col_offset=62), AnnAssign(target=Name(id='name_regex', ctx=Store(), lineno=70, col_offset=4, end_lineno=70, end_col_offset=14), annotation=Name(id='str', ctx=Load(), lineno=70, col_offset=16, end_lineno=70, end_col_offset=19), simple=1, lineno=70, col_offset=4, end_lineno=70, end_col_offset=19), AnnAssign(target=Name(id='allowed_units', ctx=Store(), lineno=71, col_offset=4, end_lineno=71, end_col_offset=17), annotation=Subscript(value=Name(id='tuple', ctx=Load(), lineno=71, col_offset=19, end_lineno=71, end_col_offset=24), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=71, col_offset=25, end_lineno=71, end_col_offset=28), Constant(value=Ellipsis, lineno=71, col_offset=30, end_lineno=71, end_col_offset=33)], ctx=Load(), lineno=71, col_offset=25, end_lineno=71, end_col_offset=33), ctx=Load(), lineno=71, col_offset=19, end_lineno=71, end_col_offset=34), simple=1, lineno=71, col_offset=4, end_lineno=71, end_col_offset=34), AnnAssign(target=Name(id='counter_suffix', ctx=Store(), lineno=72, col_offset=4, end_lineno=72, end_col_offset=18), annotation=Name(id='str', ctx=Load(), lineno=72, col_offset=20, end_lineno=72, end_col_offset=23), simple=1, lineno=72, col_offset=4, end_lineno=72, end_col_offset=23), AnnAssign(target=Name(id='require_unit_suffix', ctx=Store(), lineno=73, col_offset=4, end_lineno=73, end_col_offset=23), annotation=Name(id='bool', ctx=Load(), lineno=73, col_offset=25, end_lineno=73, end_col_offset=29), simple=1, lineno=73, col_offset=4, end_lineno=73, end_col_offset=29)], decorator_list=[Call(func=Name(id='dataclass', ctx=Load(), lineno=66, col_offset=1, end_lineno=66, end_col_offset=10), keywords=[keyword(arg='frozen', value=Constant(value=True, lineno=66, col_offset=18, end_lineno=66, end_col_offset=22), lineno=66, col_offset=11, end_lineno=66, end_col_offset=22), keyword(arg='slots', value=Constant(value=True, lineno=66, col_offset=30, end_lineno=66, end_col_offset=34), lineno=66, col_offset=24, end_lineno=66, end_col_offset=34)], lineno=66, col_offset=1, end_lineno=66, end_col_offset=35)], lineno=67, col_offset=0, end_lineno=73, end_col_offset=29), ClassDef(name='LabelsPolicy', body=[Expr(value=Constant(value='Policy for metric label usage.', lineno=78, col_offset=4, end_lineno=78, end_col_offset=40), lineno=78, col_offset=4, end_lineno=78, end_col_offset=40), AnnAssign(target=Name(id='reserved', ctx=Store(), lineno=80, col_offset=4, end_lineno=80, end_col_offset=12), annotation=Subscript(value=Name(id='tuple', ctx=Load(), lineno=80, col_offset=14, end_lineno=80, end_col_offset=19), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=80, col_offset=20, end_lineno=80, end_col_offset=23), Constant(value=Ellipsis, lineno=80, col_offset=25, end_lineno=80, end_col_offset=28)], ctx=Load(), lineno=80, col_offset=20, end_lineno=80, end_col_offset=28), ctx=Load(), lineno=80, col_offset=14, end_lineno=80, end_col_offset=29), simple=1, lineno=80, col_offset=4, end_lineno=80, end_col_offset=29), AnnAssign(target=Name(id='high_cardinality_patterns', ctx=Store(), lineno=81, col_offset=4, end_lineno=81, end_col_offset=29), annotation=Subscript(value=Name(id='tuple', ctx=Load(), lineno=81, col_offset=31, end_lineno=81, end_col_offset=36), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=81, col_offset=37, end_lineno=81, end_col_offset=40), Constant(value=Ellipsis, lineno=81, col_offset=42, end_lineno=81, end_col_offset=45)], ctx=Load(), lineno=81, col_offset=37, end_lineno=81, end_col_offset=45), ctx=Load(), lineno=81, col_offset=31, end_lineno=81, end_col_offset=46), simple=1, lineno=81, col_offset=4, end_lineno=81, end_col_offset=46)], decorator_list=[Call(func=Name(id='dataclass', ctx=Load(), lineno=76, col_offset=1, end_lineno=76, end_col_offset=10), keywords=[keyword(arg='frozen', value=Constant(value=True, lineno=76, col_offset=18, end_lineno=76, end_col_offset=22), lineno=76, col_offset=11, end_lineno=76, end_col_offset=22), keyword(arg='slots', value=Constant(value=True, lineno=76, col_offset=30, end_lineno=76, end_col_offset=34), lineno=76, col_offset=24, end_lineno=76, end_col_offset=34)], lineno=76, col_offset=1, end_lineno=76, end_col_offset=35)], lineno=77, col_offset=0, end_lineno=81, end_col_offset=46), ClassDef(name='LogsPolicy', body=[Expr(value=Constant(value='Policy options for structured logging.', lineno=86, col_offset=4, end_lineno=86, end_col_offset=48), lineno=86, col_offset=4, end_lineno=86, end_col_offset=48), AnnAssign(target=Name(id='require_structured', ctx=Store(), lineno=88, col_offset=4, end_lineno=88, end_col_offset=22), annotation=Name(id='bool', ctx=Load(), lineno=88, col_offset=24, end_lineno=88, end_col_offset=28), value=Constant(value=True, lineno=88, col_offset=31, end_lineno=88, end_col_offset=35), simple=1, lineno=88, col_offset=4, end_lineno=88, end_col_offset=35)], decorator_list=[Call(func=Name(id='dataclass', ctx=Load(), lineno=84, col_offset=1, end_lineno=84, end_col_offset=10), keywords=[keyword(arg='frozen', value=Constant(value=True, lineno=84, col_offset=18, end_lineno=84, end_col_offset=22), lineno=84, col_offset=11, end_lineno=84, end_col_offset=22), keyword(arg='slots', value=Constant(value=True, lineno=84, col_offset=30, end_lineno=84, end_col_offset=34), lineno=84, col_offset=24, end_lineno=84, end_col_offset=34)], lineno=84, col_offset=1, end_lineno=84, end_col_offset=35)], lineno=85, col_offset=0, end_lineno=88, end_col_offset=35), ClassDef(name='TracesPolicy', body=[Expr(value=Constant(value='Policy constraints for tracing spans.', lineno=93, col_offset=4, end_lineno=93, end_col_offset=47), lineno=93, col_offset=4, end_lineno=93, end_col_offset=47), AnnAssign(target=Name(id='name_regex', ctx=Store(), lineno=95, col_offset=4, end_lineno=95, end_col_offset=14), annotation=Name(id='str', ctx=Load(), lineno=95, col_offset=16, end_lineno=95, end_col_offset=19), simple=1, lineno=95, col_offset=4, end_lineno=95, end_col_offset=19)], decorator_list=[Call(func=Name(id='dataclass', ctx=Load(), lineno=91, col_offset=1, end_lineno=91, end_col_offset=10), keywords=[keyword(arg='frozen', value=Constant(value=True, lineno=91, col_offset=18, end_lineno=91, end_col_offset=22), lineno=91, col_offset=11, end_lineno=91, end_col_offset=22), keyword(arg='slots', value=Constant(value=True, lineno=91, col_offset=30, end_lineno=91, end_col_offset=34), lineno=91, col_offset=24, end_lineno=91, end_col_offset=34)], lineno=91, col_offset=1, end_lineno=91, end_col_offset=35)], lineno=92, col_offset=0, end_lineno=95, end_col_offset=19), ClassDef(name='ObservabilityPolicy', body=[Expr(value=Constant(value='Typed observability scanning policy derived from YAML overrides.', lineno=100, col_offset=4, end_lineno=100, end_col_offset=74), lineno=100, col_offset=4, end_lineno=100, end_col_offset=74), AnnAssign(target=Name(id='metric', ctx=Store(), lineno=102, col_offset=4, end_lineno=102, end_col_offset=10), annotation=Name(id='MetricPolicy', ctx=Load(), lineno=102, col_offset=12, end_lineno=102, end_col_offset=24), simple=1, lineno=102, col_offset=4, end_lineno=102, end_col_offset=24), AnnAssign(target=Name(id='labels', ctx=Store(), lineno=103, col_offset=4, end_lineno=103, end_col_offset=10), annotation=Name(id='LabelsPolicy', ctx=Load(), lineno=103, col_offset=12, end_lineno=103, end_col_offset=24), simple=1, lineno=103, col_offset=4, end_lineno=103, end_col_offset=24), AnnAssign(target=Name(id='logs', ctx=Store(), lineno=104, col_offset=4, end_lineno=104, end_col_offset=8), annotation=Name(id='LogsPolicy', ctx=Load(), lineno=104, col_offset=10, end_lineno=104, end_col_offset=20), simple=1, lineno=104, col_offset=4, end_lineno=104, end_col_offset=20), AnnAssign(target=Name(id='traces', ctx=Store(), lineno=105, col_offset=4, end_lineno=105, end_col_offset=10), annotation=Name(id='TracesPolicy', ctx=Load(), lineno=105, col_offset=12, end_lineno=105, end_col_offset=24), simple=1, lineno=105, col_offset=4, end_lineno=105, end_col_offset=24), AnnAssign(target=Name(id='error_taxonomy_json', ctx=Store(), lineno=106, col_offset=4, end_lineno=106, end_col_offset=23), annotation=BinOp(left=Name(id='str', ctx=Load(), lineno=106, col_offset=25, end_lineno=106, end_col_offset=28), op=BitOr(), right=Constant(value=None, lineno=106, col_offset=31, end_lineno=106, end_col_offset=35), lineno=106, col_offset=25, end_lineno=106, end_col_offset=35), value=Constant(value=None, lineno=106, col_offset=38, end_lineno=106, end_col_offset=42), simple=1, lineno=106, col_offset=4, end_lineno=106, end_col_offset=42)], decorator_list=[Call(func=Name(id='dataclass', ctx=Load(), lineno=98, col_offset=1, end_lineno=98, end_col_offset=10), keywords=[keyword(arg='frozen', value=Constant(value=True, lineno=98, col_offset=18, end_lineno=98, end_col_offset=22), lineno=98, col_offset=11, end_lineno=98, end_col_offset=22), keyword(arg='slots', value=Constant(value=True, lineno=98, col_offset=30, end_lineno=98, end_col_offset=34), lineno=98, col_offset=24, end_lineno=98, end_col_offset=34)], lineno=98, col_offset=1, end_lineno=98, end_col_offset=35)], lineno=99, col_offset=0, end_lineno=106, end_col_offset=42), Assign(targets=[Name(id='LintSeverity', ctx=Store(), lineno=109, col_offset=0, end_lineno=109, end_col_offset=12)], value=Subscript(value=Name(id='Literal', ctx=Load(), lineno=109, col_offset=15, end_lineno=109, end_col_offset=22), slice=Tuple(elts=[Constant(value='error', lineno=109, col_offset=23, end_lineno=109, end_col_offset=30), Constant(value='warning', lineno=109, col_offset=32, end_lineno=109, end_col_offset=41)], ctx=Load(), lineno=109, col_offset=23, end_lineno=109, end_col_offset=41), ctx=Load(), lineno=109, col_offset=15, end_lineno=109, end_col_offset=42), lineno=109, col_offset=0, end_lineno=109, end_col_offset=42), Assign(targets=[Name(id='LintKind', ctx=Store(), lineno=110, col_offset=0, end_lineno=110, end_col_offset=8)], value=Subscript(value=Name(id='Literal', ctx=Load(), lineno=110, col_offset=11, end_lineno=110, end_col_offset=18), slice=Tuple(elts=[Constant(value='metric', lineno=110, col_offset=19, end_lineno=110, end_col_offset=27), Constant(value='log', lineno=110, col_offset=29, end_lineno=110, end_col_offset=34), Constant(value='trace', lineno=110, col_offset=36, end_lineno=110, end_col_offset=43)], ctx=Load(), lineno=110, col_offset=19, end_lineno=110, end_col_offset=43), ctx=Load(), lineno=110, col_offset=11, end_lineno=110, end_col_offset=44), lineno=110, col_offset=0, end_lineno=110, end_col_offset=44), ClassDef(name='LintFinding', body=[Expr(value=Constant(value='Structured lint finding produced during observability scans.', lineno=115, col_offset=4, end_lineno=115, end_col_offset=70), lineno=115, col_offset=4, end_lineno=115, end_col_offset=70), AnnAssign(target=Name(id='severity', ctx=Store(), lineno=117, col_offset=4, end_lineno=117, end_col_offset=12), annotation=Name(id='LintSeverity', ctx=Load(), lineno=117, col_offset=14, end_lineno=117, end_col_offset=26), simple=1, lineno=117, col_offset=4, end_lineno=117, end_col_offset=26), AnnAssign(target=Name(id='kind', ctx=Store(), lineno=118, col_offset=4, end_lineno=118, end_col_offset=8), annotation=Name(id='LintKind', ctx=Load(), lineno=118, col_offset=10, end_lineno=118, end_col_offset=18), simple=1, lineno=118, col_offset=4, end_lineno=118, end_col_offset=18), AnnAssign(target=Name(id='name', ctx=Store(), lineno=119, col_offset=4, end_lineno=119, end_col_offset=8), annotation=Name(id='str', ctx=Load(), lineno=119, col_offset=10, end_lineno=119, end_col_offset=13), simple=1, lineno=119, col_offset=4, end_lineno=119, end_col_offset=13), AnnAssign(target=Name(id='rule', ctx=Store(), lineno=120, col_offset=4, end_lineno=120, end_col_offset=8), annotation=Name(id='str', ctx=Load(), lineno=120, col_offset=10, end_lineno=120, end_col_offset=13), simple=1, lineno=120, col_offset=4, end_lineno=120, end_col_offset=13), AnnAssign(target=Name(id='message', ctx=Store(), lineno=121, col_offset=4, end_lineno=121, end_col_offset=11), annotation=Name(id='str', ctx=Load(), lineno=121, col_offset=13, end_lineno=121, end_col_offset=16), simple=1, lineno=121, col_offset=4, end_lineno=121, end_col_offset=16), AnnAssign(target=Name(id='file', ctx=Store(), lineno=122, col_offset=4, end_lineno=122, end_col_offset=8), annotation=Name(id='str', ctx=Load(), lineno=122, col_offset=10, end_lineno=122, end_col_offset=13), simple=1, lineno=122, col_offset=4, end_lineno=122, end_col_offset=13), AnnAssign(target=Name(id='lineno', ctx=Store(), lineno=123, col_offset=4, end_lineno=123, end_col_offset=10), annotation=Name(id='int', ctx=Load(), lineno=123, col_offset=12, end_lineno=123, end_col_offset=15), simple=1, lineno=123, col_offset=4, end_lineno=123, end_col_offset=15)], decorator_list=[Call(func=Name(id='dataclass', ctx=Load(), lineno=113, col_offset=1, end_lineno=113, end_col_offset=10), keywords=[keyword(arg='frozen', value=Constant(value=True, lineno=113, col_offset=18, end_lineno=113, end_col_offset=22), lineno=113, col_offset=11, end_lineno=113, end_col_offset=22), keyword(arg='slots', value=Constant(value=True, lineno=113, col_offset=30, end_lineno=113, end_col_offset=34), lineno=113, col_offset=24, end_lineno=113, end_col_offset=34)], lineno=113, col_offset=1, end_lineno=113, end_col_offset=35)], lineno=114, col_offset=0, end_lineno=123, end_col_offset=15), FunctionDef(name='_rel', args=arguments(args=[arg(arg='p', annotation=Name(id='Path', ctx=Load(), lineno=126, col_offset=12, end_lineno=126, end_col_offset=16), lineno=126, col_offset=9, end_lineno=126, end_col_offset=16)]), body=[Expr(value=Constant(value='Rel.\n\n    Parameters\n    ----------\n    p : Path\n        Path to convert.\n\n    Returns\n    -------\n    str\n        Relative path string.\n    ', lineno=127, col_offset=4, end_lineno=138, end_col_offset=7), lineno=127, col_offset=4, end_lineno=138, end_col_offset=7), Try(body=[Return(value=Call(func=Name(id='str', ctx=Load(), lineno=140, col_offset=15, end_lineno=140, end_col_offset=18), args=[Call(func=Attribute(value=Name(id='p', ctx=Load(), lineno=140, col_offset=19, end_lineno=140, end_col_offset=20), attr='relative_to', ctx=Load(), lineno=140, col_offset=19, end_lineno=140, end_col_offset=32), args=[Name(id='ROOT', ctx=Load(), lineno=140, col_offset=33, end_lineno=140, end_col_offset=37)], lineno=140, col_offset=19, end_lineno=140, end_col_offset=38)], lineno=140, col_offset=15, end_lineno=140, end_col_offset=39), lineno=140, col_offset=8, end_lineno=140, end_col_offset=39)], handlers=[ExceptHandler(type=Name(id='ValueError', ctx=Load(), lineno=141, col_offset=11, end_lineno=141, end_col_offset=21), body=[Return(value=Call(func=Name(id='str', ctx=Load(), lineno=142, col_offset=15, end_lineno=142, end_col_offset=18), args=[Name(id='p', ctx=Load(), lineno=142, col_offset=19, end_lineno=142, end_col_offset=20)], lineno=142, col_offset=15, end_lineno=142, end_col_offset=21), lineno=142, col_offset=8, end_lineno=142, end_col_offset=21)], lineno=141, col_offset=4, end_lineno=142, end_col_offset=21)], lineno=139, col_offset=4, end_lineno=142, end_col_offset=21)], returns=Name(id='str', ctx=Load(), lineno=126, col_offset=21, end_lineno=126, end_col_offset=24), lineno=126, col_offset=0, end_lineno=142, end_col_offset=21), FunctionDef(name='_sha', args=arguments(), body=[Expr(value=Constant(value='Sha.\n\n    Returns\n    -------\n    str\n        Git SHA or "HEAD" if unavailable.\n    ', lineno=146, col_offset=4, end_lineno=152, end_col_offset=7), lineno=146, col_offset=4, end_lineno=152, end_col_offset=7), If(test=Name(id='G_SHA', ctx=Load(), lineno=153, col_offset=7, end_lineno=153, end_col_offset=12), body=[Return(value=Name(id='G_SHA', ctx=Load(), lineno=154, col_offset=15, end_lineno=154, end_col_offset=20), lineno=154, col_offset=8, end_lineno=154, end_col_offset=20)], lineno=153, col_offset=4, end_lineno=154, end_col_offset=20), Assign(targets=[Name(id='log_adapter', ctx=Store(), lineno=155, col_offset=4, end_lineno=155, end_col_offset=15)], value=Call(func=Name(id='with_fields', ctx=Load(), lineno=155, col_offset=18, end_lineno=155, end_col_offset=29), args=[Name(id='LOGGER', ctx=Load(), lineno=155, col_offset=30, end_lineno=155, end_col_offset=36)], keywords=[keyword(arg='command', value=Tuple(elts=[Constant(value='git', lineno=155, col_offset=47, end_lineno=155, end_col_offset=52), Constant(value='rev-parse', lineno=155, col_offset=54, end_lineno=155, end_col_offset=65), Constant(value='HEAD', lineno=155, col_offset=67, end_lineno=155, end_col_offset=73)], ctx=Load(), lineno=155, col_offset=46, end_lineno=155, end_col_offset=74), lineno=155, col_offset=38, end_lineno=155, end_col_offset=74)], lineno=155, col_offset=18, end_lineno=155, end_col_offset=75), lineno=155, col_offset=4, end_lineno=155, end_col_offset=75), Try(body=[Assign(targets=[Name(id='result', ctx=Store(), lineno=157, col_offset=8, end_lineno=157, end_col_offset=14)], value=Call(func=Name(id='run_tool', ctx=Load(), lineno=157, col_offset=17, end_lineno=157, end_col_offset=25), args=[List(elts=[Constant(value='git', lineno=157, col_offset=27, end_lineno=157, end_col_offset=32), Constant(value='rev-parse', lineno=157, col_offset=34, end_lineno=157, end_col_offset=45), Constant(value='HEAD', lineno=157, col_offset=47, end_lineno=157, end_col_offset=53)], ctx=Load(), lineno=157, col_offset=26, end_lineno=157, end_col_offset=54)], keywords=[keyword(arg='cwd', value=Name(id='ROOT', ctx=Load(), lineno=157, col_offset=60, end_lineno=157, end_col_offset=64), lineno=157, col_offset=56, end_lineno=157, end_col_offset=64), keyword(arg='timeout', value=Constant(value=10.0, lineno=157, col_offset=74, end_lineno=157, end_col_offset=78), lineno=157, col_offset=66, end_lineno=157, end_col_offset=78)], lineno=157, col_offset=17, end_lineno=157, end_col_offset=79), lineno=157, col_offset=8, end_lineno=157, end_col_offset=79), Return(value=BoolOp(op=Or(), values=[Call(func=Attribute(value=Attribute(value=Name(id='result', ctx=Load(), lineno=158, col_offset=15, end_lineno=158, end_col_offset=21), attr='stdout', ctx=Load(), lineno=158, col_offset=15, end_lineno=158, end_col_offset=28), attr='strip', ctx=Load(), lineno=158, col_offset=15, end_lineno=158, end_col_offset=34), lineno=158, col_offset=15, end_lineno=158, end_col_offset=36), Constant(value='HEAD', lineno=158, col_offset=40, end_lineno=158, end_col_offset=46)], lineno=158, col_offset=15, end_lineno=158, end_col_offset=46), lineno=158, col_offset=8, end_lineno=158, end_col_offset=46)], handlers=[ExceptHandler(type=Name(id='ToolExecutionError', ctx=Load(), lineno=159, col_offset=11, end_lineno=159, end_col_offset=29), name='exc', body=[Expr(value=Call(func=Attribute(value=Name(id='log_adapter', ctx=Load(), lineno=160, col_offset=8, end_lineno=160, end_col_offset=19), attr='debug', ctx=Load(), lineno=160, col_offset=8, end_lineno=160, end_col_offset=25), args=[Constant(value='Unable to resolve git SHA: %s', lineno=160, col_offset=26, end_lineno=160, end_col_offset=57), Name(id='exc', ctx=Load(), lineno=160, col_offset=59, end_lineno=160, end_col_offset=62)], lineno=160, col_offset=8, end_lineno=160, end_col_offset=63), lineno=160, col_offset=8, end_lineno=160, end_col_offset=63), Return(value=Constant(value='HEAD', lineno=161, col_offset=15, end_lineno=161, end_col_offset=21), lineno=161, col_offset=8, end_lineno=161, end_col_offset=21)], lineno=159, col_offset=4, end_lineno=161, end_col_offset=21)], lineno=156, col_offset=4, end_lineno=161, end_col_offset=21)], returns=Name(id='str', ctx=Load(), lineno=145, col_offset=14, end_lineno=145, end_col_offset=17), lineno=145, col_offset=0, end_lineno=161, end_col_offset=21), FunctionDef(name='_gh_link', args=arguments(args=[arg(arg='path', annotation=Name(id='Path', ctx=Load(), lineno=164, col_offset=19, end_lineno=164, end_col_offset=23), lineno=164, col_offset=13, end_lineno=164, end_col_offset=23), arg(arg='start', annotation=BinOp(left=Name(id='int', ctx=Load(), lineno=164, col_offset=32, end_lineno=164, end_col_offset=35), op=BitOr(), right=Constant(value=None, lineno=164, col_offset=38, end_lineno=164, end_col_offset=42), lineno=164, col_offset=32, end_lineno=164, end_col_offset=42), lineno=164, col_offset=25, end_lineno=164, end_col_offset=42)]), body=[Expr(value=Constant(value='Gh link.\n\n    Parameters\n    ----------\n    path : Path\n        File path.\n    start : int | None\n        Starting line number.\n\n    Returns\n    -------\n    str | None\n        GitHub link URL | None if not configured.\n    ', lineno=165, col_offset=4, end_lineno=178, end_col_offset=7), lineno=165, col_offset=4, end_lineno=178, end_col_offset=7), If(test=UnaryOp(op=Not(), operand=BoolOp(op=And(), values=[Name(id='G_ORG', ctx=Load(), lineno=179, col_offset=12, end_lineno=179, end_col_offset=17), Name(id='G_REPO', ctx=Load(), lineno=179, col_offset=22, end_lineno=179, end_col_offset=28)], lineno=179, col_offset=12, end_lineno=179, end_col_offset=28), lineno=179, col_offset=7, end_lineno=179, end_col_offset=29), body=[Return(value=Constant(value=None, lineno=180, col_offset=15, end_lineno=180, end_col_offset=19), lineno=180, col_offset=8, end_lineno=180, end_col_offset=19)], lineno=179, col_offset=4, end_lineno=180, end_col_offset=19), Assign(targets=[Name(id='frag', ctx=Store(), lineno=181, col_offset=4, end_lineno=181, end_col_offset=8)], value=IfExp(test=Name(id='start', ctx=Load(), lineno=181, col_offset=27, end_lineno=181, end_col_offset=32), body=JoinedStr(values=[Constant(value='#L', lineno=181, col_offset=13, end_lineno=181, end_col_offset=15), FormattedValue(value=Name(id='start', ctx=Load(), lineno=181, col_offset=16, end_lineno=181, end_col_offset=21), conversion=-1, lineno=181, col_offset=15, end_lineno=181, end_col_offset=22)], lineno=181, col_offset=11, end_lineno=181, end_col_offset=23), orelse=Constant(value='', lineno=181, col_offset=38, end_lineno=181, end_col_offset=40), lineno=181, col_offset=11, end_lineno=181, end_col_offset=40), lineno=181, col_offset=4, end_lineno=181, end_col_offset=40), Return(value=JoinedStr(values=[Constant(value='https://github.com/', lineno=182, col_offset=13, end_lineno=182, end_col_offset=32), FormattedValue(value=Name(id='G_ORG', ctx=Load(), lineno=182, col_offset=33, end_lineno=182, end_col_offset=38), conversion=-1, lineno=182, col_offset=32, end_lineno=182, end_col_offset=39), Constant(value='/', lineno=182, col_offset=39, end_lineno=182, end_col_offset=40), FormattedValue(value=Name(id='G_REPO', ctx=Load(), lineno=182, col_offset=41, end_lineno=182, end_col_offset=47), conversion=-1, lineno=182, col_offset=40, end_lineno=182, end_col_offset=48), Constant(value='/blob/', lineno=182, col_offset=48, end_lineno=182, end_col_offset=54), FormattedValue(value=Call(func=Name(id='_sha', ctx=Load(), lineno=182, col_offset=55, end_lineno=182, end_col_offset=59), lineno=182, col_offset=55, end_lineno=182, end_col_offset=61), conversion=-1, lineno=182, col_offset=54, end_lineno=182, end_col_offset=62), Constant(value='/', lineno=182, col_offset=62, end_lineno=182, end_col_offset=63), FormattedValue(value=Call(func=Name(id='_rel', ctx=Load(), lineno=182, col_offset=64, end_lineno=182, end_col_offset=68), args=[Name(id='path', ctx=Load(), lineno=182, col_offset=69, end_lineno=182, end_col_offset=73)], lineno=182, col_offset=64, end_lineno=182, end_col_offset=74), conversion=-1, lineno=182, col_offset=63, end_lineno=182, end_col_offset=75), FormattedValue(value=Name(id='frag', ctx=Load(), lineno=182, col_offset=76, end_lineno=182, end_col_offset=80), conversion=-1, lineno=182, col_offset=75, end_lineno=182, end_col_offset=81)], lineno=182, col_offset=11, end_lineno=182, end_col_offset=82), lineno=182, col_offset=4, end_lineno=182, end_col_offset=82)], returns=BinOp(left=Name(id='str', ctx=Load(), lineno=164, col_offset=47, end_lineno=164, end_col_offset=50), op=BitOr(), right=Constant(value=None, lineno=164, col_offset=53, end_lineno=164, end_col_offset=57), lineno=164, col_offset=47, end_lineno=164, end_col_offset=57), lineno=164, col_offset=0, end_lineno=182, end_col_offset=82), FunctionDef(name='_editor_link', args=arguments(args=[arg(arg='path', annotation=Name(id='Path', ctx=Load(), lineno=185, col_offset=23, end_lineno=185, end_col_offset=27), lineno=185, col_offset=17, end_lineno=185, end_col_offset=27), arg(arg='line', annotation=BinOp(left=Name(id='int', ctx=Load(), lineno=185, col_offset=35, end_lineno=185, end_col_offset=38), op=BitOr(), right=Constant(value=None, lineno=185, col_offset=41, end_lineno=185, end_col_offset=45), lineno=185, col_offset=35, end_lineno=185, end_col_offset=45), lineno=185, col_offset=29, end_lineno=185, end_col_offset=45)]), body=[Expr(value=Constant(value='Editor link.\n\n    Parameters\n    ----------\n    path : Path\n        File path.\n    line : int | None\n        Line number.\n\n    Returns\n    -------\n    str\n        Editor link URL.\n    ', lineno=186, col_offset=4, end_lineno=199, end_col_offset=7), lineno=186, col_offset=4, end_lineno=199, end_col_offset=7), Assign(targets=[Name(id='ln', ctx=Store(), lineno=200, col_offset=4, end_lineno=200, end_col_offset=6)], value=Call(func=Name(id='max', ctx=Load(), lineno=200, col_offset=9, end_lineno=200, end_col_offset=12), args=[Constant(value=1, lineno=200, col_offset=13, end_lineno=200, end_col_offset=14), Call(func=Name(id='int', ctx=Load(), lineno=200, col_offset=16, end_lineno=200, end_col_offset=19), args=[BoolOp(op=Or(), values=[Name(id='line', ctx=Load(), lineno=200, col_offset=20, end_lineno=200, end_col_offset=24), Constant(value=1, lineno=200, col_offset=28, end_lineno=200, end_col_offset=29)], lineno=200, col_offset=20, end_lineno=200, end_col_offset=29)], lineno=200, col_offset=16, end_lineno=200, end_col_offset=30)], lineno=200, col_offset=9, end_lineno=200, end_col_offset=31), lineno=200, col_offset=4, end_lineno=200, end_col_offset=31), Return(value=JoinedStr(values=[Constant(value='vscode://file/', lineno=201, col_offset=13, end_lineno=201, end_col_offset=27), FormattedValue(value=Call(func=Name(id='_rel', ctx=Load(), lineno=201, col_offset=28, end_lineno=201, end_col_offset=32), args=[Name(id='path', ctx=Load(), lineno=201, col_offset=33, end_lineno=201, end_col_offset=37)], lineno=201, col_offset=28, end_lineno=201, end_col_offset=38), conversion=-1, lineno=201, col_offset=27, end_lineno=201, end_col_offset=39), Constant(value=':', lineno=201, col_offset=39, end_lineno=201, end_col_offset=40), FormattedValue(value=Name(id='ln', ctx=Load(), lineno=201, col_offset=41, end_lineno=201, end_col_offset=43), conversion=-1, lineno=201, col_offset=40, end_lineno=201, end_col_offset=44), Constant(value=':1', lineno=201, col_offset=44, end_lineno=201, end_col_offset=46)], lineno=201, col_offset=11, end_lineno=201, end_col_offset=47), lineno=201, col_offset=4, end_lineno=201, end_col_offset=47)], returns=Name(id='str', ctx=Load(), lineno=185, col_offset=50, end_lineno=185, end_col_offset=53), lineno=185, col_offset=0, end_lineno=201, end_col_offset=47), Assign(targets=[Name(id='DEFAULT_POLICY', ctx=Store(), lineno=206, col_offset=0, end_lineno=206, end_col_offset=14)], value=Call(func=Name(id='ObservabilityPolicy', ctx=Load(), lineno=206, col_offset=17, end_lineno=206, end_col_offset=36), keywords=[keyword(arg='metric', value=Call(func=Name(id='MetricPolicy', ctx=Load(), lineno=207, col_offset=11, end_lineno=207, end_col_offset=23), keywords=[keyword(arg='name_regex', value=Constant(value='^[a-z][a-z0-9_]*$', lineno=208, col_offset=19, end_lineno=208, end_col_offset=39), lineno=208, col_offset=8, end_lineno=208, end_col_offset=39), keyword(arg='allowed_units', value=Tuple(elts=[Constant(value='seconds', lineno=210, col_offset=12, end_lineno=210, end_col_offset=21), Constant(value='bytes', lineno=211, col_offset=12, end_lineno=211, end_col_offset=19), Constant(value='meters', lineno=212, col_offset=12, end_lineno=212, end_col_offset=20), Constant(value='grams', lineno=213, col_offset=12, end_lineno=213, end_col_offset=19), Constant(value='joules', lineno=214, col_offset=12, end_lineno=214, end_col_offset=20), Constant(value='volts', lineno=215, col_offset=12, end_lineno=215, end_col_offset=19), Constant(value='amperes', lineno=216, col_offset=12, end_lineno=216, end_col_offset=21), Constant(value='ratio', lineno=217, col_offset=12, end_lineno=217, end_col_offset=19)], ctx=Load(), lineno=209, col_offset=22, end_lineno=218, end_col_offset=9), lineno=209, col_offset=8, end_lineno=218, end_col_offset=9), keyword(arg='counter_suffix', value=Constant(value='_total', lineno=219, col_offset=23, end_lineno=219, end_col_offset=31), lineno=219, col_offset=8, end_lineno=219, end_col_offset=31), keyword(arg='require_unit_suffix', value=Constant(value=True, lineno=220, col_offset=28, end_lineno=220, end_col_offset=32), lineno=220, col_offset=8, end_lineno=220, end_col_offset=32)], lineno=207, col_offset=11, end_lineno=221, end_col_offset=5), lineno=207, col_offset=4, end_lineno=221, end_col_offset=5), keyword(arg='labels', value=Call(func=Name(id='LabelsPolicy', ctx=Load(), lineno=222, col_offset=11, end_lineno=222, end_col_offset=23), keywords=[keyword(arg='reserved', value=Tuple(elts=[Constant(value='le', lineno=223, col_offset=18, end_lineno=223, end_col_offset=22), Constant(value='quantile', lineno=223, col_offset=24, end_lineno=223, end_col_offset=34), Constant(value='job', lineno=223, col_offset=36, end_lineno=223, end_col_offset=41), Constant(value='instance', lineno=223, col_offset=43, end_lineno=223, end_col_offset=53)], ctx=Load(), lineno=223, col_offset=17, end_lineno=223, end_col_offset=54), lineno=223, col_offset=8, end_lineno=223, end_col_offset=54), keyword(arg='high_cardinality_patterns', value=Tuple(elts=[Constant(value='user(_)?id', lineno=225, col_offset=12, end_lineno=225, end_col_offset=25), Constant(value='session(_)?id', lineno=226, col_offset=12, end_lineno=226, end_col_offset=28), Constant(value='request(_)?id', lineno=227, col_offset=12, end_lineno=227, end_col_offset=28), Constant(value='trace(_)?id', lineno=228, col_offset=12, end_lineno=228, end_col_offset=26), Constant(value='email', lineno=229, col_offset=12, end_lineno=229, end_col_offset=20), Constant(value='url', lineno=230, col_offset=12, end_lineno=230, end_col_offset=18), Constant(value='path', lineno=231, col_offset=12, end_lineno=231, end_col_offset=19)], ctx=Load(), lineno=224, col_offset=34, end_lineno=232, end_col_offset=9), lineno=224, col_offset=8, end_lineno=232, end_col_offset=9)], lineno=222, col_offset=11, end_lineno=233, end_col_offset=5), lineno=222, col_offset=4, end_lineno=233, end_col_offset=5), keyword(arg='logs', value=Call(func=Name(id='LogsPolicy', ctx=Load(), lineno=234, col_offset=9, end_lineno=234, end_col_offset=19), keywords=[keyword(arg='require_structured', value=Constant(value=True, lineno=234, col_offset=39, end_lineno=234, end_col_offset=43), lineno=234, col_offset=20, end_lineno=234, end_col_offset=43)], lineno=234, col_offset=9, end_lineno=234, end_col_offset=44), lineno=234, col_offset=4, end_lineno=234, end_col_offset=44), keyword(arg='traces', value=Call(func=Name(id='TracesPolicy', ctx=Load(), lineno=235, col_offset=11, end_lineno=235, end_col_offset=23), keywords=[keyword(arg='name_regex', value=Constant(value='^[a-z0-9_.]+$', lineno=235, col_offset=35, end_lineno=235, end_col_offset=51), lineno=235, col_offset=24, end_lineno=235, end_col_offset=51)], lineno=235, col_offset=11, end_lineno=235, end_col_offset=52), lineno=235, col_offset=4, end_lineno=235, end_col_offset=52), keyword(arg='error_taxonomy_json', value=Constant(value='docs/_build/error_taxonomy.json', lineno=236, col_offset=24, end_lineno=236, end_col_offset=57), lineno=236, col_offset=4, end_lineno=236, end_col_offset=57)], lineno=206, col_offset=17, end_lineno=237, end_col_offset=1), lineno=206, col_offset=0, end_lineno=237, end_col_offset=1), Assign(targets=[Name(id='POLICY_PATH', ctx=Store(), lineno=239, col_offset=0, end_lineno=239, end_col_offset=11)], value=BinOp(left=BinOp(left=BinOp(left=Name(id='ROOT', ctx=Load(), lineno=239, col_offset=14, end_lineno=239, end_col_offset=18), op=Div(), right=Constant(value='docs', lineno=239, col_offset=21, end_lineno=239, end_col_offset=27), lineno=239, col_offset=14, end_lineno=239, end_col_offset=27), op=Div(), right=Constant(value='policies', lineno=239, col_offset=30, end_lineno=239, end_col_offset=40), lineno=239, col_offset=14, end_lineno=239, end_col_offset=40), op=Div(), right=Constant(value='observability.yml', lineno=239, col_offset=43, end_lineno=239, end_col_offset=62), lineno=239, col_offset=14, end_lineno=239, end_col_offset=62), lineno=239, col_offset=0, end_lineno=239, end_col_offset=62), FunctionDef(name='_deep_merge_dicts', args=arguments(args=[arg(arg='base', annotation=Subscript(value=Name(id='Mapping', ctx=Load(), lineno=243, col_offset=10, end_lineno=243, end_col_offset=17), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=243, col_offset=18, end_lineno=243, end_col_offset=21), Name(id='object', ctx=Load(), lineno=243, col_offset=23, end_lineno=243, end_col_offset=29)], ctx=Load(), lineno=243, col_offset=18, end_lineno=243, end_col_offset=29), ctx=Load(), lineno=243, col_offset=10, end_lineno=243, end_col_offset=30), lineno=243, col_offset=4, end_lineno=243, end_col_offset=30), arg(arg='override', annotation=Subscript(value=Name(id='Mapping', ctx=Load(), lineno=243, col_offset=42, end_lineno=243, end_col_offset=49), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=243, col_offset=50, end_lineno=243, end_col_offset=53), Name(id='object', ctx=Load(), lineno=243, col_offset=55, end_lineno=243, end_col_offset=61)], ctx=Load(), lineno=243, col_offset=50, end_lineno=243, end_col_offset=61), ctx=Load(), lineno=243, col_offset=42, end_lineno=243, end_col_offset=62), lineno=243, col_offset=32, end_lineno=243, end_col_offset=62)]), body=[Expr(value=Constant(value='Return a deep merge of ``override`` into ``base`` without mutating either mapping.\n\n    Parameters\n    ----------\n    base : Mapping[str, object]\n        Base dictionary.\n    override : Mapping[str, object]\n        Override dictionary.\n\n    Returns\n    -------\n    dict[str, object]\n        Deeply merged dictionary.\n    ', lineno=245, col_offset=4, end_lineno=258, end_col_offset=7), lineno=245, col_offset=4, end_lineno=258, end_col_offset=7), AnnAssign(target=Name(id='merged', ctx=Store(), lineno=259, col_offset=4, end_lineno=259, end_col_offset=10), annotation=Subscript(value=Name(id='dict', ctx=Load(), lineno=259, col_offset=12, end_lineno=259, end_col_offset=16), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=259, col_offset=17, end_lineno=259, end_col_offset=20), Name(id='object', ctx=Load(), lineno=259, col_offset=22, end_lineno=259, end_col_offset=28)], ctx=Load(), lineno=259, col_offset=17, end_lineno=259, end_col_offset=28), ctx=Load(), lineno=259, col_offset=12, end_lineno=259, end_col_offset=29), value=Call(func=Name(id='dict', ctx=Load(), lineno=259, col_offset=32, end_lineno=259, end_col_offset=36), args=[Name(id='base', ctx=Load(), lineno=259, col_offset=37, end_lineno=259, end_col_offset=41)], lineno=259, col_offset=32, end_lineno=259, end_col_offset=42), simple=1, lineno=259, col_offset=4, end_lineno=259, end_col_offset=42), For(target=Tuple(elts=[Name(id='key', ctx=Store(), lineno=260, col_offset=8, end_lineno=260, end_col_offset=11), Name(id='override_value', ctx=Store(), lineno=260, col_offset=13, end_lineno=260, end_col_offset=27)], ctx=Store(), lineno=260, col_offset=8, end_lineno=260, end_col_offset=27), iter=Call(func=Attribute(value=Name(id='override', ctx=Load(), lineno=260, col_offset=31, end_lineno=260, end_col_offset=39), attr='items', ctx=Load(), lineno=260, col_offset=31, end_lineno=260, end_col_offset=45), lineno=260, col_offset=31, end_lineno=260, end_col_offset=47), body=[Assign(targets=[Name(id='existing', ctx=Store(), lineno=261, col_offset=8, end_lineno=261, end_col_offset=16)], value=Call(func=Attribute(value=Name(id='merged', ctx=Load(), lineno=261, col_offset=19, end_lineno=261, end_col_offset=25), attr='get', ctx=Load(), lineno=261, col_offset=19, end_lineno=261, end_col_offset=29), args=[Name(id='key', ctx=Load(), lineno=261, col_offset=30, end_lineno=261, end_col_offset=33)], lineno=261, col_offset=19, end_lineno=261, end_col_offset=34), lineno=261, col_offset=8, end_lineno=261, end_col_offset=34), If(test=BoolOp(op=And(), values=[Call(func=Name(id='isinstance', ctx=Load(), lineno=262, col_offset=11, end_lineno=262, end_col_offset=21), args=[Name(id='existing', ctx=Load(), lineno=262, col_offset=22, end_lineno=262, end_col_offset=30), Name(id='Mapping', ctx=Load(), lineno=262, col_offset=32, end_lineno=262, end_col_offset=39)], lineno=262, col_offset=11, end_lineno=262, end_col_offset=40), Call(func=Name(id='isinstance', ctx=Load(), lineno=262, col_offset=45, end_lineno=262, end_col_offset=55), args=[Name(id='override_value', ctx=Load(), lineno=262, col_offset=56, end_lineno=262, end_col_offset=70), Name(id='Mapping', ctx=Load(), lineno=262, col_offset=72, end_lineno=262, end_col_offset=79)], lineno=262, col_offset=45, end_lineno=262, end_col_offset=80)], lineno=262, col_offset=11, end_lineno=262, end_col_offset=80), body=[Assign(targets=[Subscript(value=Name(id='merged', ctx=Load(), lineno=263, col_offset=12, end_lineno=263, end_col_offset=18), slice=Name(id='key', ctx=Load(), lineno=263, col_offset=19, end_lineno=263, end_col_offset=22), ctx=Store(), lineno=263, col_offset=12, end_lineno=263, end_col_offset=23)], value=Call(func=Name(id='_deep_merge_dicts', ctx=Load(), lineno=263, col_offset=26, end_lineno=263, end_col_offset=43), args=[Call(func=Name(id='cast', ctx=Load(), lineno=264, col_offset=16, end_lineno=264, end_col_offset=20), args=[Constant(value='Mapping[str, object]', lineno=264, col_offset=21, end_lineno=264, end_col_offset=43), Name(id='existing', ctx=Load(), lineno=264, col_offset=45, end_lineno=264, end_col_offset=53)], lineno=264, col_offset=16, end_lineno=264, end_col_offset=54), Call(func=Name(id='cast', ctx=Load(), lineno=265, col_offset=16, end_lineno=265, end_col_offset=20), args=[Constant(value='Mapping[str, object]', lineno=265, col_offset=21, end_lineno=265, end_col_offset=43), Name(id='override_value', ctx=Load(), lineno=265, col_offset=45, end_lineno=265, end_col_offset=59)], lineno=265, col_offset=16, end_lineno=265, end_col_offset=60)], lineno=263, col_offset=26, end_lineno=266, end_col_offset=13), lineno=263, col_offset=12, end_lineno=266, end_col_offset=13), Continue(lineno=267, col_offset=12, end_lineno=267, end_col_offset=20)], lineno=262, col_offset=8, end_lineno=267, end_col_offset=20), Assign(targets=[Subscript(value=Name(id='merged', ctx=Load(), lineno=268, col_offset=8, end_lineno=268, end_col_offset=14), slice=Name(id='key', ctx=Load(), lineno=268, col_offset=15, end_lineno=268, end_col_offset=18), ctx=Store(), lineno=268, col_offset=8, end_lineno=268, end_col_offset=19)], value=Name(id='override_value', ctx=Load(), lineno=268, col_offset=22, end_lineno=268, end_col_offset=36), lineno=268, col_offset=8, end_lineno=268, end_col_offset=36)], lineno=260, col_offset=4, end_lineno=268, end_col_offset=36), Return(value=Name(id='merged', ctx=Load(), lineno=269, col_offset=11, end_lineno=269, end_col_offset=17), lineno=269, col_offset=4, end_lineno=269, end_col_offset=17)], returns=Subscript(value=Name(id='dict', ctx=Load(), lineno=244, col_offset=5, end_lineno=244, end_col_offset=9), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=244, col_offset=10, end_lineno=244, end_col_offset=13), Name(id='object', ctx=Load(), lineno=244, col_offset=15, end_lineno=244, end_col_offset=21)], ctx=Load(), lineno=244, col_offset=10, end_lineno=244, end_col_offset=21), ctx=Load(), lineno=244, col_offset=5, end_lineno=244, end_col_offset=22), lineno=242, col_offset=0, end_lineno=269, end_col_offset=17), FunctionDef(name='_coerce_str', args=arguments(args=[arg(arg='value', annotation=Name(id='object', ctx=Load(), lineno=272, col_offset=23, end_lineno=272, end_col_offset=29), lineno=272, col_offset=16, end_lineno=272, end_col_offset=29), arg(arg='fallback', annotation=Name(id='str', ctx=Load(), lineno=272, col_offset=41, end_lineno=272, end_col_offset=44), lineno=272, col_offset=31, end_lineno=272, end_col_offset=44)]), body=[Return(value=IfExp(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=273, col_offset=20, end_lineno=273, end_col_offset=30), args=[Name(id='value', ctx=Load(), lineno=273, col_offset=31, end_lineno=273, end_col_offset=36), Name(id='str', ctx=Load(), lineno=273, col_offset=38, end_lineno=273, end_col_offset=41)], lineno=273, col_offset=20, end_lineno=273, end_col_offset=42), body=Name(id='value', ctx=Load(), lineno=273, col_offset=11, end_lineno=273, end_col_offset=16), orelse=Name(id='fallback', ctx=Load(), lineno=273, col_offset=48, end_lineno=273, end_col_offset=56), lineno=273, col_offset=11, end_lineno=273, end_col_offset=56), lineno=273, col_offset=4, end_lineno=273, end_col_offset=56)], returns=Name(id='str', ctx=Load(), lineno=272, col_offset=49, end_lineno=272, end_col_offset=52), lineno=272, col_offset=0, end_lineno=273, end_col_offset=56), FunctionDef(name='_coerce_bool', args=arguments(args=[arg(arg='value', annotation=Name(id='object', ctx=Load(), lineno=276, col_offset=24, end_lineno=276, end_col_offset=30), lineno=276, col_offset=17, end_lineno=276, end_col_offset=30)], kwonlyargs=[arg(arg='fallback', annotation=Name(id='bool', ctx=Load(), lineno=276, col_offset=45, end_lineno=276, end_col_offset=49), lineno=276, col_offset=35, end_lineno=276, end_col_offset=49)], kw_defaults=[None]), body=[Return(value=IfExp(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=277, col_offset=20, end_lineno=277, end_col_offset=30), args=[Name(id='value', ctx=Load(), lineno=277, col_offset=31, end_lineno=277, end_col_offset=36), Name(id='bool', ctx=Load(), lineno=277, col_offset=38, end_lineno=277, end_col_offset=42)], lineno=277, col_offset=20, end_lineno=277, end_col_offset=43), body=Name(id='value', ctx=Load(), lineno=277, col_offset=11, end_lineno=277, end_col_offset=16), orelse=Name(id='fallback', ctx=Load(), lineno=277, col_offset=49, end_lineno=277, end_col_offset=57), lineno=277, col_offset=11, end_lineno=277, end_col_offset=57), lineno=277, col_offset=4, end_lineno=277, end_col_offset=57)], returns=Name(id='bool', ctx=Load(), lineno=276, col_offset=54, end_lineno=276, end_col_offset=58), lineno=276, col_offset=0, end_lineno=277, end_col_offset=57), FunctionDef(name='_coerce_optional_str', args=arguments(args=[arg(arg='value', annotation=Name(id='object', ctx=Load(), lineno=280, col_offset=32, end_lineno=280, end_col_offset=38), lineno=280, col_offset=25, end_lineno=280, end_col_offset=38), arg(arg='fallback', annotation=BinOp(left=Name(id='str', ctx=Load(), lineno=280, col_offset=50, end_lineno=280, end_col_offset=53), op=BitOr(), right=Constant(value=None, lineno=280, col_offset=56, end_lineno=280, end_col_offset=60), lineno=280, col_offset=50, end_lineno=280, end_col_offset=60), lineno=280, col_offset=40, end_lineno=280, end_col_offset=60)]), body=[If(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=281, col_offset=7, end_lineno=281, end_col_offset=17), args=[Name(id='value', ctx=Load(), lineno=281, col_offset=18, end_lineno=281, end_col_offset=23), Name(id='str', ctx=Load(), lineno=281, col_offset=25, end_lineno=281, end_col_offset=28)], lineno=281, col_offset=7, end_lineno=281, end_col_offset=29), body=[Return(value=Name(id='value', ctx=Load(), lineno=282, col_offset=15, end_lineno=282, end_col_offset=20), lineno=282, col_offset=8, end_lineno=282, end_col_offset=20)], lineno=281, col_offset=4, end_lineno=282, end_col_offset=20), If(test=Compare(left=Name(id='value', ctx=Load(), lineno=283, col_offset=7, end_lineno=283, end_col_offset=12), ops=[Is()], comparators=[Constant(value=None, lineno=283, col_offset=16, end_lineno=283, end_col_offset=20)], lineno=283, col_offset=7, end_lineno=283, end_col_offset=20), body=[Return(value=Constant(value=None, lineno=284, col_offset=15, end_lineno=284, end_col_offset=19), lineno=284, col_offset=8, end_lineno=284, end_col_offset=19)], lineno=283, col_offset=4, end_lineno=284, end_col_offset=19), Return(value=Name(id='fallback', ctx=Load(), lineno=285, col_offset=11, end_lineno=285, end_col_offset=19), lineno=285, col_offset=4, end_lineno=285, end_col_offset=19)], returns=BinOp(left=Name(id='str', ctx=Load(), lineno=280, col_offset=65, end_lineno=280, end_col_offset=68), op=BitOr(), right=Constant(value=None, lineno=280, col_offset=71, end_lineno=280, end_col_offset=75), lineno=280, col_offset=65, end_lineno=280, end_col_offset=75), lineno=280, col_offset=0, end_lineno=285, end_col_offset=19), FunctionDef(name='_coerce_str_tuple', args=arguments(args=[arg(arg='value', annotation=Name(id='object', ctx=Load(), lineno=288, col_offset=29, end_lineno=288, end_col_offset=35), lineno=288, col_offset=22, end_lineno=288, end_col_offset=35), arg(arg='fallback', annotation=Subscript(value=Name(id='tuple', ctx=Load(), lineno=288, col_offset=47, end_lineno=288, end_col_offset=52), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=288, col_offset=53, end_lineno=288, end_col_offset=56), Constant(value=Ellipsis, lineno=288, col_offset=58, end_lineno=288, end_col_offset=61)], ctx=Load(), lineno=288, col_offset=53, end_lineno=288, end_col_offset=61), ctx=Load(), lineno=288, col_offset=47, end_lineno=288, end_col_offset=62), lineno=288, col_offset=37, end_lineno=288, end_col_offset=62)]), body=[If(test=BoolOp(op=And(), values=[Call(func=Name(id='isinstance', ctx=Load(), lineno=289, col_offset=7, end_lineno=289, end_col_offset=17), args=[Name(id='value', ctx=Load(), lineno=289, col_offset=18, end_lineno=289, end_col_offset=23), Name(id='Sequence', ctx=Load(), lineno=289, col_offset=25, end_lineno=289, end_col_offset=33)], lineno=289, col_offset=7, end_lineno=289, end_col_offset=34), UnaryOp(op=Not(), operand=Call(func=Name(id='isinstance', ctx=Load(), lineno=289, col_offset=43, end_lineno=289, end_col_offset=53), args=[Name(id='value', ctx=Load(), lineno=289, col_offset=54, end_lineno=289, end_col_offset=59), Tuple(elts=[Name(id='str', ctx=Load(), lineno=289, col_offset=62, end_lineno=289, end_col_offset=65), Name(id='bytes', ctx=Load(), lineno=289, col_offset=67, end_lineno=289, end_col_offset=72)], ctx=Load(), lineno=289, col_offset=61, end_lineno=289, end_col_offset=73)], lineno=289, col_offset=43, end_lineno=289, end_col_offset=74), lineno=289, col_offset=39, end_lineno=289, end_col_offset=74)], lineno=289, col_offset=7, end_lineno=289, end_col_offset=74), body=[AnnAssign(target=Name(id='items', ctx=Store(), lineno=290, col_offset=8, end_lineno=290, end_col_offset=13), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=290, col_offset=15, end_lineno=290, end_col_offset=19), slice=Name(id='str', ctx=Load(), lineno=290, col_offset=20, end_lineno=290, end_col_offset=23), ctx=Load(), lineno=290, col_offset=15, end_lineno=290, end_col_offset=24), value=List(ctx=Load(), lineno=290, col_offset=27, end_lineno=290, end_col_offset=29), simple=1, lineno=290, col_offset=8, end_lineno=290, end_col_offset=29), For(target=Name(id='item', ctx=Store(), lineno=291, col_offset=12, end_lineno=291, end_col_offset=16), iter=Name(id='value', ctx=Load(), lineno=291, col_offset=20, end_lineno=291, end_col_offset=25), body=[If(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=292, col_offset=15, end_lineno=292, end_col_offset=25), args=[Name(id='item', ctx=Load(), lineno=292, col_offset=26, end_lineno=292, end_col_offset=30), Name(id='str', ctx=Load(), lineno=292, col_offset=32, end_lineno=292, end_col_offset=35)], lineno=292, col_offset=15, end_lineno=292, end_col_offset=36), body=[Expr(value=Call(func=Attribute(value=Name(id='items', ctx=Load(), lineno=293, col_offset=16, end_lineno=293, end_col_offset=21), attr='append', ctx=Load(), lineno=293, col_offset=16, end_lineno=293, end_col_offset=28), args=[Name(id='item', ctx=Load(), lineno=293, col_offset=29, end_lineno=293, end_col_offset=33)], lineno=293, col_offset=16, end_lineno=293, end_col_offset=34), lineno=293, col_offset=16, end_lineno=293, end_col_offset=34)], orelse=[Return(value=Name(id='fallback', ctx=Load(), lineno=295, col_offset=23, end_lineno=295, end_col_offset=31), lineno=295, col_offset=16, end_lineno=295, end_col_offset=31)], lineno=292, col_offset=12, end_lineno=295, end_col_offset=31)], lineno=291, col_offset=8, end_lineno=295, end_col_offset=31), Return(value=Call(func=Name(id='tuple', ctx=Load(), lineno=296, col_offset=15, end_lineno=296, end_col_offset=20), args=[Name(id='items', ctx=Load(), lineno=296, col_offset=21, end_lineno=296, end_col_offset=26)], lineno=296, col_offset=15, end_lineno=296, end_col_offset=27), lineno=296, col_offset=8, end_lineno=296, end_col_offset=27)], lineno=289, col_offset=4, end_lineno=296, end_col_offset=27), Return(value=Name(id='fallback', ctx=Load(), lineno=297, col_offset=11, end_lineno=297, end_col_offset=19), lineno=297, col_offset=4, end_lineno=297, end_col_offset=19)], returns=Subscript(value=Name(id='tuple', ctx=Load(), lineno=288, col_offset=67, end_lineno=288, end_col_offset=72), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=288, col_offset=73, end_lineno=288, end_col_offset=76), Constant(value=Ellipsis, lineno=288, col_offset=78, end_lineno=288, end_col_offset=81)], ctx=Load(), lineno=288, col_offset=73, end_lineno=288, end_col_offset=81), ctx=Load(), lineno=288, col_offset=67, end_lineno=288, end_col_offset=82), lineno=288, col_offset=0, end_lineno=297, end_col_offset=19), FunctionDef(name='_build_metric_policy', args=arguments(args=[arg(arg='data', annotation=Subscript(value=Name(id='Mapping', ctx=Load(), lineno=300, col_offset=31, end_lineno=300, end_col_offset=38), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=300, col_offset=39, end_lineno=300, end_col_offset=42), Name(id='object', ctx=Load(), lineno=300, col_offset=44, end_lineno=300, end_col_offset=50)], ctx=Load(), lineno=300, col_offset=39, end_lineno=300, end_col_offset=50), ctx=Load(), lineno=300, col_offset=31, end_lineno=300, end_col_offset=51), lineno=300, col_offset=25, end_lineno=300, end_col_offset=51), arg(arg='default', annotation=Name(id='MetricPolicy', ctx=Load(), lineno=300, col_offset=62, end_lineno=300, end_col_offset=74), lineno=300, col_offset=53, end_lineno=300, end_col_offset=74)]), body=[Return(value=Call(func=Name(id='MetricPolicy', ctx=Load(), lineno=301, col_offset=11, end_lineno=301, end_col_offset=23), keywords=[keyword(arg='name_regex', value=Call(func=Name(id='_coerce_str', ctx=Load(), lineno=302, col_offset=19, end_lineno=302, end_col_offset=30), args=[Call(func=Attribute(value=Name(id='data', ctx=Load(), lineno=302, col_offset=31, end_lineno=302, end_col_offset=35), attr='get', ctx=Load(), lineno=302, col_offset=31, end_lineno=302, end_col_offset=39), args=[Constant(value='name_regex', lineno=302, col_offset=40, end_lineno=302, end_col_offset=52)], lineno=302, col_offset=31, end_lineno=302, end_col_offset=53), Attribute(value=Name(id='default', ctx=Load(), lineno=302, col_offset=55, end_lineno=302, end_col_offset=62), attr='name_regex', ctx=Load(), lineno=302, col_offset=55, end_lineno=302, end_col_offset=73)], lineno=302, col_offset=19, end_lineno=302, end_col_offset=74), lineno=302, col_offset=8, end_lineno=302, end_col_offset=74), keyword(arg='allowed_units', value=Call(func=Name(id='_coerce_str_tuple', ctx=Load(), lineno=303, col_offset=22, end_lineno=303, end_col_offset=39), args=[Call(func=Attribute(value=Name(id='data', ctx=Load(), lineno=303, col_offset=40, end_lineno=303, end_col_offset=44), attr='get', ctx=Load(), lineno=303, col_offset=40, end_lineno=303, end_col_offset=48), args=[Constant(value='allowed_units', lineno=303, col_offset=49, end_lineno=303, end_col_offset=64)], lineno=303, col_offset=40, end_lineno=303, end_col_offset=65), Attribute(value=Name(id='default', ctx=Load(), lineno=303, col_offset=67, end_lineno=303, end_col_offset=74), attr='allowed_units', ctx=Load(), lineno=303, col_offset=67, end_lineno=303, end_col_offset=88)], lineno=303, col_offset=22, end_lineno=303, end_col_offset=89), lineno=303, col_offset=8, end_lineno=303, end_col_offset=89), keyword(arg='counter_suffix', value=Call(func=Name(id='_coerce_str', ctx=Load(), lineno=304, col_offset=23, end_lineno=304, end_col_offset=34), args=[Call(func=Attribute(value=Name(id='data', ctx=Load(), lineno=304, col_offset=35, end_lineno=304, end_col_offset=39), attr='get', ctx=Load(), lineno=304, col_offset=35, end_lineno=304, end_col_offset=43), args=[Constant(value='counter_suffix', lineno=304, col_offset=44, end_lineno=304, end_col_offset=60)], lineno=304, col_offset=35, end_lineno=304, end_col_offset=61), Attribute(value=Name(id='default', ctx=Load(), lineno=304, col_offset=63, end_lineno=304, end_col_offset=70), attr='counter_suffix', ctx=Load(), lineno=304, col_offset=63, end_lineno=304, end_col_offset=85)], lineno=304, col_offset=23, end_lineno=304, end_col_offset=86), lineno=304, col_offset=8, end_lineno=304, end_col_offset=86), keyword(arg='require_unit_suffix', value=Call(func=Name(id='_coerce_bool', ctx=Load(), lineno=305, col_offset=28, end_lineno=305, end_col_offset=40), args=[Call(func=Attribute(value=Name(id='data', ctx=Load(), lineno=306, col_offset=12, end_lineno=306, end_col_offset=16), attr='get', ctx=Load(), lineno=306, col_offset=12, end_lineno=306, end_col_offset=20), args=[Constant(value='require_unit_suffix', lineno=306, col_offset=21, end_lineno=306, end_col_offset=42)], lineno=306, col_offset=12, end_lineno=306, end_col_offset=43)], keywords=[keyword(arg='fallback', value=Attribute(value=Name(id='default', ctx=Load(), lineno=307, col_offset=21, end_lineno=307, end_col_offset=28), attr='require_unit_suffix', ctx=Load(), lineno=307, col_offset=21, end_lineno=307, end_col_offset=48), lineno=307, col_offset=12, end_lineno=307, end_col_offset=48)], lineno=305, col_offset=28, end_lineno=308, end_col_offset=9), lineno=305, col_offset=8, end_lineno=308, end_col_offset=9)], lineno=301, col_offset=11, end_lineno=309, end_col_offset=5), lineno=301, col_offset=4, end_lineno=309, end_col_offset=5)], returns=Name(id='MetricPolicy', ctx=Load(), lineno=300, col_offset=79, end_lineno=300, end_col_offset=91), lineno=300, col_offset=0, end_lineno=309, end_col_offset=5), FunctionDef(name='_build_labels_policy', args=arguments(args=[arg(arg='data', annotation=Subscript(value=Name(id='Mapping', ctx=Load(), lineno=312, col_offset=31, end_lineno=312, end_col_offset=38), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=312, col_offset=39, end_lineno=312, end_col_offset=42), Name(id='object', ctx=Load(), lineno=312, col_offset=44, end_lineno=312, end_col_offset=50)], ctx=Load(), lineno=312, col_offset=39, end_lineno=312, end_col_offset=50), ctx=Load(), lineno=312, col_offset=31, end_lineno=312, end_col_offset=51), lineno=312, col_offset=25, end_lineno=312, end_col_offset=51), arg(arg='default', annotation=Name(id='LabelsPolicy', ctx=Load(), lineno=312, col_offset=62, end_lineno=312, end_col_offset=74), lineno=312, col_offset=53, end_lineno=312, end_col_offset=74)]), body=[Return(value=Call(func=Name(id='LabelsPolicy', ctx=Load(), lineno=313, col_offset=11, end_lineno=313, end_col_offset=23), keywords=[keyword(arg='reserved', value=Call(func=Name(id='_coerce_str_tuple', ctx=Load(), lineno=314, col_offset=17, end_lineno=314, end_col_offset=34), args=[Call(func=Attribute(value=Name(id='data', ctx=Load(), lineno=314, col_offset=35, end_lineno=314, end_col_offset=39), attr='get', ctx=Load(), lineno=314, col_offset=35, end_lineno=314, end_col_offset=43), args=[Constant(value='reserved', lineno=314, col_offset=44, end_lineno=314, end_col_offset=54)], lineno=314, col_offset=35, end_lineno=314, end_col_offset=55), Attribute(value=Name(id='default', ctx=Load(), lineno=314, col_offset=57, end_lineno=314, end_col_offset=64), attr='reserved', ctx=Load(), lineno=314, col_offset=57, end_lineno=314, end_col_offset=73)], lineno=314, col_offset=17, end_lineno=314, end_col_offset=74), lineno=314, col_offset=8, end_lineno=314, end_col_offset=74), keyword(arg='high_cardinality_patterns', value=Call(func=Name(id='_coerce_str_tuple', ctx=Load(), lineno=315, col_offset=34, end_lineno=315, end_col_offset=51), args=[Call(func=Attribute(value=Name(id='data', ctx=Load(), lineno=316, col_offset=12, end_lineno=316, end_col_offset=16), attr='get', ctx=Load(), lineno=316, col_offset=12, end_lineno=316, end_col_offset=20), args=[Constant(value='high_cardinality_patterns', lineno=316, col_offset=21, end_lineno=316, end_col_offset=48)], lineno=316, col_offset=12, end_lineno=316, end_col_offset=49), Attribute(value=Name(id='default', ctx=Load(), lineno=317, col_offset=12, end_lineno=317, end_col_offset=19), attr='high_cardinality_patterns', ctx=Load(), lineno=317, col_offset=12, end_lineno=317, end_col_offset=45)], lineno=315, col_offset=34, end_lineno=318, end_col_offset=9), lineno=315, col_offset=8, end_lineno=318, end_col_offset=9)], lineno=313, col_offset=11, end_lineno=319, end_col_offset=5), lineno=313, col_offset=4, end_lineno=319, end_col_offset=5)], returns=Name(id='LabelsPolicy', ctx=Load(), lineno=312, col_offset=79, end_lineno=312, end_col_offset=91), lineno=312, col_offset=0, end_lineno=319, end_col_offset=5), FunctionDef(name='_build_logs_policy', args=arguments(args=[arg(arg='data', annotation=Subscript(value=Name(id='Mapping', ctx=Load(), lineno=322, col_offset=29, end_lineno=322, end_col_offset=36), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=322, col_offset=37, end_lineno=322, end_col_offset=40), Name(id='object', ctx=Load(), lineno=322, col_offset=42, end_lineno=322, end_col_offset=48)], ctx=Load(), lineno=322, col_offset=37, end_lineno=322, end_col_offset=48), ctx=Load(), lineno=322, col_offset=29, end_lineno=322, end_col_offset=49), lineno=322, col_offset=23, end_lineno=322, end_col_offset=49), arg(arg='default', annotation=Name(id='LogsPolicy', ctx=Load(), lineno=322, col_offset=60, end_lineno=322, end_col_offset=70), lineno=322, col_offset=51, end_lineno=322, end_col_offset=70)]), body=[Return(value=Call(func=Name(id='LogsPolicy', ctx=Load(), lineno=323, col_offset=11, end_lineno=323, end_col_offset=21), keywords=[keyword(arg='require_structured', value=Call(func=Name(id='_coerce_bool', ctx=Load(), lineno=324, col_offset=27, end_lineno=324, end_col_offset=39), args=[Call(func=Attribute(value=Name(id='data', ctx=Load(), lineno=325, col_offset=12, end_lineno=325, end_col_offset=16), attr='get', ctx=Load(), lineno=325, col_offset=12, end_lineno=325, end_col_offset=20), args=[Constant(value='require_structured', lineno=325, col_offset=21, end_lineno=325, end_col_offset=41)], lineno=325, col_offset=12, end_lineno=325, end_col_offset=42)], keywords=[keyword(arg='fallback', value=Attribute(value=Name(id='default', ctx=Load(), lineno=326, col_offset=21, end_lineno=326, end_col_offset=28), attr='require_structured', ctx=Load(), lineno=326, col_offset=21, end_lineno=326, end_col_offset=47), lineno=326, col_offset=12, end_lineno=326, end_col_offset=47)], lineno=324, col_offset=27, end_lineno=327, end_col_offset=9), lineno=324, col_offset=8, end_lineno=327, end_col_offset=9)], lineno=323, col_offset=11, end_lineno=328, end_col_offset=5), lineno=323, col_offset=4, end_lineno=328, end_col_offset=5)], returns=Name(id='LogsPolicy', ctx=Load(), lineno=322, col_offset=75, end_lineno=322, end_col_offset=85), lineno=322, col_offset=0, end_lineno=328, end_col_offset=5), FunctionDef(name='_build_traces_policy', args=arguments(args=[arg(arg='data', annotation=Subscript(value=Name(id='Mapping', ctx=Load(), lineno=331, col_offset=31, end_lineno=331, end_col_offset=38), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=331, col_offset=39, end_lineno=331, end_col_offset=42), Name(id='object', ctx=Load(), lineno=331, col_offset=44, end_lineno=331, end_col_offset=50)], ctx=Load(), lineno=331, col_offset=39, end_lineno=331, end_col_offset=50), ctx=Load(), lineno=331, col_offset=31, end_lineno=331, end_col_offset=51), lineno=331, col_offset=25, end_lineno=331, end_col_offset=51), arg(arg='default', annotation=Name(id='TracesPolicy', ctx=Load(), lineno=331, col_offset=62, end_lineno=331, end_col_offset=74), lineno=331, col_offset=53, end_lineno=331, end_col_offset=74)]), body=[Return(value=Call(func=Name(id='TracesPolicy', ctx=Load(), lineno=332, col_offset=11, end_lineno=332, end_col_offset=23), keywords=[keyword(arg='name_regex', value=Call(func=Name(id='_coerce_str', ctx=Load(), lineno=332, col_offset=35, end_lineno=332, end_col_offset=46), args=[Call(func=Attribute(value=Name(id='data', ctx=Load(), lineno=332, col_offset=47, end_lineno=332, end_col_offset=51), attr='get', ctx=Load(), lineno=332, col_offset=47, end_lineno=332, end_col_offset=55), args=[Constant(value='name_regex', lineno=332, col_offset=56, end_lineno=332, end_col_offset=68)], lineno=332, col_offset=47, end_lineno=332, end_col_offset=69), Attribute(value=Name(id='default', ctx=Load(), lineno=332, col_offset=71, end_lineno=332, end_col_offset=78), attr='name_regex', ctx=Load(), lineno=332, col_offset=71, end_lineno=332, end_col_offset=89)], lineno=332, col_offset=35, end_lineno=332, end_col_offset=90), lineno=332, col_offset=24, end_lineno=332, end_col_offset=90)], lineno=332, col_offset=11, end_lineno=332, end_col_offset=91), lineno=332, col_offset=4, end_lineno=332, end_col_offset=91)], returns=Name(id='TracesPolicy', ctx=Load(), lineno=331, col_offset=79, end_lineno=331, end_col_offset=91), lineno=331, col_offset=0, end_lineno=332, end_col_offset=91), FunctionDef(name='_build_policy_from_mapping', args=arguments(args=[arg(arg='data', annotation=Subscript(value=Name(id='Mapping', ctx=Load(), lineno=335, col_offset=37, end_lineno=335, end_col_offset=44), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=335, col_offset=45, end_lineno=335, end_col_offset=48), Name(id='object', ctx=Load(), lineno=335, col_offset=50, end_lineno=335, end_col_offset=56)], ctx=Load(), lineno=335, col_offset=45, end_lineno=335, end_col_offset=56), ctx=Load(), lineno=335, col_offset=37, end_lineno=335, end_col_offset=57), lineno=335, col_offset=31, end_lineno=335, end_col_offset=57)]), body=[Assign(targets=[Name(id='metric_data', ctx=Store(), lineno=336, col_offset=4, end_lineno=336, end_col_offset=15)], value=Call(func=Attribute(value=Name(id='data', ctx=Load(), lineno=336, col_offset=18, end_lineno=336, end_col_offset=22), attr='get', ctx=Load(), lineno=336, col_offset=18, end_lineno=336, end_col_offset=26), args=[Constant(value='metric', lineno=336, col_offset=27, end_lineno=336, end_col_offset=35)], lineno=336, col_offset=18, end_lineno=336, end_col_offset=36), lineno=336, col_offset=4, end_lineno=336, end_col_offset=36), Assign(targets=[Name(id='labels_data', ctx=Store(), lineno=337, col_offset=4, end_lineno=337, end_col_offset=15)], value=Call(func=Attribute(value=Name(id='data', ctx=Load(), lineno=337, col_offset=18, end_lineno=337, end_col_offset=22), attr='get', ctx=Load(), lineno=337, col_offset=18, end_lineno=337, end_col_offset=26), args=[Constant(value='labels', lineno=337, col_offset=27, end_lineno=337, end_col_offset=35)], lineno=337, col_offset=18, end_lineno=337, end_col_offset=36), lineno=337, col_offset=4, end_lineno=337, end_col_offset=36), Assign(targets=[Name(id='logs_data', ctx=Store(), lineno=338, col_offset=4, end_lineno=338, end_col_offset=13)], value=Call(func=Attribute(value=Name(id='data', ctx=Load(), lineno=338, col_offset=16, end_lineno=338, end_col_offset=20), attr='get', ctx=Load(), lineno=338, col_offset=16, end_lineno=338, end_col_offset=24), args=[Constant(value='logs', lineno=338, col_offset=25, end_lineno=338, end_col_offset=31)], lineno=338, col_offset=16, end_lineno=338, end_col_offset=32), lineno=338, col_offset=4, end_lineno=338, end_col_offset=32), Assign(targets=[Name(id='traces_data', ctx=Store(), lineno=339, col_offset=4, end_lineno=339, end_col_offset=15)], value=Call(func=Attribute(value=Name(id='data', ctx=Load(), lineno=339, col_offset=18, end_lineno=339, end_col_offset=22), attr='get', ctx=Load(), lineno=339, col_offset=18, end_lineno=339, end_col_offset=26), args=[Constant(value='traces', lineno=339, col_offset=27, end_lineno=339, end_col_offset=35)], lineno=339, col_offset=18, end_lineno=339, end_col_offset=36), lineno=339, col_offset=4, end_lineno=339, end_col_offset=36), If(test=BoolOp(op=Or(), values=[UnaryOp(op=Not(), operand=Call(func=Name(id='isinstance', ctx=Load(), lineno=341, col_offset=11, end_lineno=341, end_col_offset=21), args=[Name(id='metric_data', ctx=Load(), lineno=341, col_offset=22, end_lineno=341, end_col_offset=33), Name(id='Mapping', ctx=Load(), lineno=341, col_offset=35, end_lineno=341, end_col_offset=42)], lineno=341, col_offset=11, end_lineno=341, end_col_offset=43), lineno=341, col_offset=7, end_lineno=341, end_col_offset=43), UnaryOp(op=Not(), operand=Call(func=Name(id='isinstance', ctx=Load(), lineno=341, col_offset=51, end_lineno=341, end_col_offset=61), args=[Name(id='labels_data', ctx=Load(), lineno=341, col_offset=62, end_lineno=341, end_col_offset=73), Name(id='Mapping', ctx=Load(), lineno=341, col_offset=75, end_lineno=341, end_col_offset=82)], lineno=341, col_offset=51, end_lineno=341, end_col_offset=83), lineno=341, col_offset=47, end_lineno=341, end_col_offset=83)], lineno=341, col_offset=7, end_lineno=341, end_col_offset=83), body=[Assign(targets=[Name(id='message', ctx=Store(), lineno=342, col_offset=8, end_lineno=342, end_col_offset=15)], value=Constant(value='Policy overrides must include metric and labels mappings', lineno=342, col_offset=18, end_lineno=342, end_col_offset=76), lineno=342, col_offset=8, end_lineno=342, end_col_offset=76), Raise(exc=Call(func=Name(id='TypeError', ctx=Load(), lineno=343, col_offset=14, end_lineno=343, end_col_offset=23), args=[Name(id='message', ctx=Load(), lineno=343, col_offset=24, end_lineno=343, end_col_offset=31)], lineno=343, col_offset=14, end_lineno=343, end_col_offset=32), lineno=343, col_offset=8, end_lineno=343, end_col_offset=32)], lineno=341, col_offset=4, end_lineno=343, end_col_offset=32), If(test=BoolOp(op=Or(), values=[UnaryOp(op=Not(), operand=Call(func=Name(id='isinstance', ctx=Load(), lineno=344, col_offset=11, end_lineno=344, end_col_offset=21), args=[Name(id='logs_data', ctx=Load(), lineno=344, col_offset=22, end_lineno=344, end_col_offset=31), Name(id='Mapping', ctx=Load(), lineno=344, col_offset=33, end_lineno=344, end_col_offset=40)], lineno=344, col_offset=11, end_lineno=344, end_col_offset=41), lineno=344, col_offset=7, end_lineno=344, end_col_offset=41), UnaryOp(op=Not(), operand=Call(func=Name(id='isinstance', ctx=Load(), lineno=344, col_offset=49, end_lineno=344, end_col_offset=59), args=[Name(id='traces_data', ctx=Load(), lineno=344, col_offset=60, end_lineno=344, end_col_offset=71), Name(id='Mapping', ctx=Load(), lineno=344, col_offset=73, end_lineno=344, end_col_offset=80)], lineno=344, col_offset=49, end_lineno=344, end_col_offset=81), lineno=344, col_offset=45, end_lineno=344, end_col_offset=81)], lineno=344, col_offset=7, end_lineno=344, end_col_offset=81), body=[Assign(targets=[Name(id='message', ctx=Store(), lineno=345, col_offset=8, end_lineno=345, end_col_offset=15)], value=Constant(value='Policy overrides must include logs and traces mappings', lineno=345, col_offset=18, end_lineno=345, end_col_offset=74), lineno=345, col_offset=8, end_lineno=345, end_col_offset=74), Raise(exc=Call(func=Name(id='TypeError', ctx=Load(), lineno=346, col_offset=14, end_lineno=346, end_col_offset=23), args=[Name(id='message', ctx=Load(), lineno=346, col_offset=24, end_lineno=346, end_col_offset=31)], lineno=346, col_offset=14, end_lineno=346, end_col_offset=32), lineno=346, col_offset=8, end_lineno=346, end_col_offset=32)], lineno=344, col_offset=4, end_lineno=346, end_col_offset=32), Assign(targets=[Name(id='metric', ctx=Store(), lineno=348, col_offset=4, end_lineno=348, end_col_offset=10)], value=Call(func=Name(id='_build_metric_policy', ctx=Load(), lineno=348, col_offset=13, end_lineno=348, end_col_offset=33), args=[Call(func=Name(id='cast', ctx=Load(), lineno=348, col_offset=34, end_lineno=348, end_col_offset=38), args=[Constant(value='Mapping[str, object]', lineno=348, col_offset=39, end_lineno=348, end_col_offset=61), Name(id='metric_data', ctx=Load(), lineno=348, col_offset=63, end_lineno=348, end_col_offset=74)], lineno=348, col_offset=34, end_lineno=348, end_col_offset=75), Attribute(value=Name(id='DEFAULT_POLICY', ctx=Load(), lineno=348, col_offset=77, end_lineno=348, end_col_offset=91), attr='metric', ctx=Load(), lineno=348, col_offset=77, end_lineno=348, end_col_offset=98)], lineno=348, col_offset=13, end_lineno=348, end_col_offset=99), lineno=348, col_offset=4, end_lineno=348, end_col_offset=99), Assign(targets=[Name(id='labels', ctx=Store(), lineno=349, col_offset=4, end_lineno=349, end_col_offset=10)], value=Call(func=Name(id='_build_labels_policy', ctx=Load(), lineno=349, col_offset=13, end_lineno=349, end_col_offset=33), args=[Call(func=Name(id='cast', ctx=Load(), lineno=349, col_offset=34, end_lineno=349, end_col_offset=38), args=[Constant(value='Mapping[str, object]', lineno=349, col_offset=39, end_lineno=349, end_col_offset=61), Name(id='labels_data', ctx=Load(), lineno=349, col_offset=63, end_lineno=349, end_col_offset=74)], lineno=349, col_offset=34, end_lineno=349, end_col_offset=75), Attribute(value=Name(id='DEFAULT_POLICY', ctx=Load(), lineno=349, col_offset=77, end_lineno=349, end_col_offset=91), attr='labels', ctx=Load(), lineno=349, col_offset=77, end_lineno=349, end_col_offset=98)], lineno=349, col_offset=13, end_lineno=349, end_col_offset=99), lineno=349, col_offset=4, end_lineno=349, end_col_offset=99), Assign(targets=[Name(id='logs', ctx=Store(), lineno=350, col_offset=4, end_lineno=350, end_col_offset=8)], value=Call(func=Name(id='_build_logs_policy', ctx=Load(), lineno=350, col_offset=11, end_lineno=350, end_col_offset=29), args=[Call(func=Name(id='cast', ctx=Load(), lineno=350, col_offset=30, end_lineno=350, end_col_offset=34), args=[Constant(value='Mapping[str, object]', lineno=350, col_offset=35, end_lineno=350, end_col_offset=57), Name(id='logs_data', ctx=Load(), lineno=350, col_offset=59, end_lineno=350, end_col_offset=68)], lineno=350, col_offset=30, end_lineno=350, end_col_offset=69), Attribute(value=Name(id='DEFAULT_POLICY', ctx=Load(), lineno=350, col_offset=71, end_lineno=350, end_col_offset=85), attr='logs', ctx=Load(), lineno=350, col_offset=71, end_lineno=350, end_col_offset=90)], lineno=350, col_offset=11, end_lineno=350, end_col_offset=91), lineno=350, col_offset=4, end_lineno=350, end_col_offset=91), Assign(targets=[Name(id='traces', ctx=Store(), lineno=351, col_offset=4, end_lineno=351, end_col_offset=10)], value=Call(func=Name(id='_build_traces_policy', ctx=Load(), lineno=351, col_offset=13, end_lineno=351, end_col_offset=33), args=[Call(func=Name(id='cast', ctx=Load(), lineno=351, col_offset=34, end_lineno=351, end_col_offset=38), args=[Constant(value='Mapping[str, object]', lineno=351, col_offset=39, end_lineno=351, end_col_offset=61), Name(id='traces_data', ctx=Load(), lineno=351, col_offset=63, end_lineno=351, end_col_offset=74)], lineno=351, col_offset=34, end_lineno=351, end_col_offset=75), Attribute(value=Name(id='DEFAULT_POLICY', ctx=Load(), lineno=351, col_offset=77, end_lineno=351, end_col_offset=91), attr='traces', ctx=Load(), lineno=351, col_offset=77, end_lineno=351, end_col_offset=98)], lineno=351, col_offset=13, end_lineno=351, end_col_offset=99), lineno=351, col_offset=4, end_lineno=351, end_col_offset=99), Assign(targets=[Name(id='error_taxonomy', ctx=Store(), lineno=352, col_offset=4, end_lineno=352, end_col_offset=18)], value=Call(func=Name(id='_coerce_optional_str', ctx=Load(), lineno=352, col_offset=21, end_lineno=352, end_col_offset=41), args=[Call(func=Attribute(value=Name(id='data', ctx=Load(), lineno=353, col_offset=8, end_lineno=353, end_col_offset=12), attr='get', ctx=Load(), lineno=353, col_offset=8, end_lineno=353, end_col_offset=16), args=[Constant(value='error_taxonomy_json', lineno=353, col_offset=17, end_lineno=353, end_col_offset=38)], lineno=353, col_offset=8, end_lineno=353, end_col_offset=39), Attribute(value=Name(id='DEFAULT_POLICY', ctx=Load(), lineno=354, col_offset=8, end_lineno=354, end_col_offset=22), attr='error_taxonomy_json', ctx=Load(), lineno=354, col_offset=8, end_lineno=354, end_col_offset=42)], lineno=352, col_offset=21, end_lineno=355, end_col_offset=5), lineno=352, col_offset=4, end_lineno=355, end_col_offset=5), Return(value=Call(func=Name(id='ObservabilityPolicy', ctx=Load(), lineno=356, col_offset=11, end_lineno=356, end_col_offset=30), keywords=[keyword(arg='metric', value=Name(id='metric', ctx=Load(), lineno=357, col_offset=15, end_lineno=357, end_col_offset=21), lineno=357, col_offset=8, end_lineno=357, end_col_offset=21), keyword(arg='labels', value=Name(id='labels', ctx=Load(), lineno=358, col_offset=15, end_lineno=358, end_col_offset=21), lineno=358, col_offset=8, end_lineno=358, end_col_offset=21), keyword(arg='logs', value=Name(id='logs', ctx=Load(), lineno=359, col_offset=13, end_lineno=359, end_col_offset=17), lineno=359, col_offset=8, end_lineno=359, end_col_offset=17), keyword(arg='traces', value=Name(id='traces', ctx=Load(), lineno=360, col_offset=15, end_lineno=360, end_col_offset=21), lineno=360, col_offset=8, end_lineno=360, end_col_offset=21), keyword(arg='error_taxonomy_json', value=Name(id='error_taxonomy', ctx=Load(), lineno=361, col_offset=28, end_lineno=361, end_col_offset=42), lineno=361, col_offset=8, end_lineno=361, end_col_offset=42)], lineno=356, col_offset=11, end_lineno=362, end_col_offset=5), lineno=356, col_offset=4, end_lineno=362, end_col_offset=5)], returns=Name(id='ObservabilityPolicy', ctx=Load(), lineno=335, col_offset=62, end_lineno=335, end_col_offset=81), lineno=335, col_offset=0, end_lineno=362, end_col_offset=5), FunctionDef(name='load_policy', args=arguments(), body=[Expr(value=Constant(value="Load the observability policy from disk, falling back to defaults on failure.\n\n    This function reads the observability policy configuration file from disk,\n    parses it as YAML, and merges it with default settings. If the file doesn't\n    exist or YAML parsing fails, it returns the default policy. Other errors\n    (e.g., I/O errors) are logged and propagated.\n\n    Returns\n    -------\n    ObservabilityPolicy\n        Loaded policy merged with defaults, or default policy if file doesn't\n        exist or YAML parsing fails.\n\n    Raises\n    ------\n    Exception\n        Any exception raised during policy loading that is not a YAML parsing error\n        is explicitly re-raised after logging. YAML parsing issues are logged and\n        result in the default policy being returned. The exception is caught using\n        ``except Exception as exc`` and explicitly re-raises non-YAML errors using\n        ``raise exc`` to satisfy static analysis tools.\n\n    ", lineno=366, col_offset=4, end_lineno=388, end_col_offset=7), lineno=366, col_offset=4, end_lineno=388, end_col_offset=7), Assign(targets=[Name(id='policy', ctx=Store(), lineno=389, col_offset=4, end_lineno=389, end_col_offset=10)], value=Name(id='DEFAULT_POLICY', ctx=Load(), lineno=389, col_offset=13, end_lineno=389, end_col_offset=27), lineno=389, col_offset=4, end_lineno=389, end_col_offset=27), If(test=BoolOp(op=Or(), values=[Compare(left=Name(id='yaml', ctx=Load(), lineno=390, col_offset=7, end_lineno=390, end_col_offset=11), ops=[Is()], comparators=[Constant(value=None, lineno=390, col_offset=15, end_lineno=390, end_col_offset=19)], lineno=390, col_offset=7, end_lineno=390, end_col_offset=19), UnaryOp(op=Not(), operand=Call(func=Attribute(value=Name(id='POLICY_PATH', ctx=Load(), lineno=390, col_offset=27, end_lineno=390, end_col_offset=38), attr='exists', ctx=Load(), lineno=390, col_offset=27, end_lineno=390, end_col_offset=45), lineno=390, col_offset=27, end_lineno=390, end_col_offset=47), lineno=390, col_offset=23, end_lineno=390, end_col_offset=47)], lineno=390, col_offset=7, end_lineno=390, end_col_offset=47), body=[Return(value=Name(id='policy', ctx=Load(), lineno=391, col_offset=15, end_lineno=391, end_col_offset=21), lineno=391, col_offset=8, end_lineno=391, end_col_offset=21)], lineno=390, col_offset=4, end_lineno=391, end_col_offset=21), Try(body=[Assign(targets=[Name(id='text', ctx=Store(), lineno=394, col_offset=8, end_lineno=394, end_col_offset=12)], value=Call(func=Attribute(value=Name(id='POLICY_PATH', ctx=Load(), lineno=394, col_offset=15, end_lineno=394, end_col_offset=26), attr='read_text', ctx=Load(), lineno=394, col_offset=15, end_lineno=394, end_col_offset=36), keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=394, col_offset=46, end_lineno=394, end_col_offset=53), lineno=394, col_offset=37, end_lineno=394, end_col_offset=53)], lineno=394, col_offset=15, end_lineno=394, end_col_offset=54), lineno=394, col_offset=8, end_lineno=394, end_col_offset=54)], handlers=[ExceptHandler(type=Name(id='OSError', ctx=Load(), lineno=395, col_offset=11, end_lineno=395, end_col_offset=18), name='exc', body=[Expr(value=Call(func=Attribute(value=Call(func=Name(id='with_fields', ctx=Load(), lineno=396, col_offset=8, end_lineno=396, end_col_offset=19), args=[Name(id='LOGGER', ctx=Load(), lineno=396, col_offset=20, end_lineno=396, end_col_offset=26)], keywords=[keyword(arg='policy_path', value=Call(func=Name(id='str', ctx=Load(), lineno=396, col_offset=40, end_lineno=396, end_col_offset=43), args=[Name(id='POLICY_PATH', ctx=Load(), lineno=396, col_offset=44, end_lineno=396, end_col_offset=55)], lineno=396, col_offset=40, end_lineno=396, end_col_offset=56), lineno=396, col_offset=28, end_lineno=396, end_col_offset=56)], lineno=396, col_offset=8, end_lineno=396, end_col_offset=57), attr='warning', ctx=Load(), lineno=396, col_offset=8, end_lineno=396, end_col_offset=65), args=[Constant(value='Failed to read observability policy: %s', lineno=397, col_offset=12, end_lineno=397, end_col_offset=53), Name(id='exc', ctx=Load(), lineno=397, col_offset=55, end_lineno=397, end_col_offset=58)], lineno=396, col_offset=8, end_lineno=398, end_col_offset=9), lineno=396, col_offset=8, end_lineno=398, end_col_offset=9), Return(value=Name(id='policy', ctx=Load(), lineno=399, col_offset=15, end_lineno=399, end_col_offset=21), lineno=399, col_offset=8, end_lineno=399, end_col_offset=21)], lineno=395, col_offset=4, end_lineno=399, end_col_offset=21)], lineno=393, col_offset=4, end_lineno=399, end_col_offset=21), Try(body=[AnnAssign(target=Name(id='overrides_raw', ctx=Store(), lineno=402, col_offset=8, end_lineno=402, end_col_offset=21), annotation=Name(id='object', ctx=Load(), lineno=402, col_offset=23, end_lineno=402, end_col_offset=29), value=Call(func=Attribute(value=Name(id='yaml', ctx=Load(), lineno=402, col_offset=32, end_lineno=402, end_col_offset=36), attr='safe_load', ctx=Load(), lineno=402, col_offset=32, end_lineno=402, end_col_offset=46), args=[Name(id='text', ctx=Load(), lineno=402, col_offset=47, end_lineno=402, end_col_offset=51)], lineno=402, col_offset=32, end_lineno=402, end_col_offset=52), simple=1, lineno=402, col_offset=8, end_lineno=402, end_col_offset=52)], handlers=[ExceptHandler(type=Name(id='Exception', ctx=Load(), lineno=403, col_offset=11, end_lineno=403, end_col_offset=20), name='exc', body=[AnnAssign(target=Name(id='yaml_error_type', ctx=Store(), lineno=404, col_offset=8, end_lineno=404, end_col_offset=23), annotation=Subscript(value=Name(id='type', ctx=Load(), lineno=404, col_offset=25, end_lineno=404, end_col_offset=29), slice=Name(id='Exception', ctx=Load(), lineno=404, col_offset=30, end_lineno=404, end_col_offset=39), ctx=Load(), lineno=404, col_offset=25, end_lineno=404, end_col_offset=40), value=Call(func=Name(id='cast', ctx=Load(), lineno=404, col_offset=43, end_lineno=404, end_col_offset=47), args=[Constant(value='type[Exception]', lineno=405, col_offset=12, end_lineno=405, end_col_offset=29), Call(func=Name(id='getattr', ctx=Load(), lineno=406, col_offset=12, end_lineno=406, end_col_offset=19), args=[Name(id='yaml', ctx=Load(), lineno=406, col_offset=20, end_lineno=406, end_col_offset=24), Constant(value='YAMLError', lineno=406, col_offset=26, end_lineno=406, end_col_offset=37), Name(id='Exception', ctx=Load(), lineno=406, col_offset=39, end_lineno=406, end_col_offset=48)], lineno=406, col_offset=12, end_lineno=406, end_col_offset=49)], lineno=404, col_offset=43, end_lineno=407, end_col_offset=9), simple=1, lineno=404, col_offset=8, end_lineno=407, end_col_offset=9), If(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=408, col_offset=11, end_lineno=408, end_col_offset=21), args=[Name(id='exc', ctx=Load(), lineno=408, col_offset=22, end_lineno=408, end_col_offset=25), Name(id='yaml_error_type', ctx=Load(), lineno=408, col_offset=27, end_lineno=408, end_col_offset=42)], lineno=408, col_offset=11, end_lineno=408, end_col_offset=43), body=[Expr(value=Call(func=Attribute(value=Call(func=Name(id='with_fields', ctx=Load(), lineno=409, col_offset=12, end_lineno=409, end_col_offset=23), args=[Name(id='LOGGER', ctx=Load(), lineno=409, col_offset=24, end_lineno=409, end_col_offset=30)], keywords=[keyword(arg='policy_path', value=Call(func=Name(id='str', ctx=Load(), lineno=409, col_offset=44, end_lineno=409, end_col_offset=47), args=[Name(id='POLICY_PATH', ctx=Load(), lineno=409, col_offset=48, end_lineno=409, end_col_offset=59)], lineno=409, col_offset=44, end_lineno=409, end_col_offset=60), lineno=409, col_offset=32, end_lineno=409, end_col_offset=60)], lineno=409, col_offset=12, end_lineno=409, end_col_offset=61), attr='warning', ctx=Load(), lineno=409, col_offset=12, end_lineno=409, end_col_offset=69), args=[Constant(value='Failed to parse observability policy YAML: %s', lineno=410, col_offset=16, end_lineno=410, end_col_offset=63), Name(id='exc', ctx=Load(), lineno=410, col_offset=65, end_lineno=410, end_col_offset=68)], lineno=409, col_offset=12, end_lineno=411, end_col_offset=13), lineno=409, col_offset=12, end_lineno=411, end_col_offset=13), Return(value=Name(id='policy', ctx=Load(), lineno=412, col_offset=19, end_lineno=412, end_col_offset=25), lineno=412, col_offset=12, end_lineno=412, end_col_offset=25)], lineno=408, col_offset=8, end_lineno=412, end_col_offset=25), Raise(lineno=413, col_offset=8, end_lineno=413, end_col_offset=13)], lineno=403, col_offset=4, end_lineno=413, end_col_offset=13)], lineno=401, col_offset=4, end_lineno=413, end_col_offset=13), If(test=Compare(left=Name(id='overrides_raw', ctx=Load(), lineno=415, col_offset=7, end_lineno=415, end_col_offset=20), ops=[Is()], comparators=[Constant(value=None, lineno=415, col_offset=24, end_lineno=415, end_col_offset=28)], lineno=415, col_offset=7, end_lineno=415, end_col_offset=28), body=[Return(value=Name(id='policy', ctx=Load(), lineno=416, col_offset=15, end_lineno=416, end_col_offset=21), lineno=416, col_offset=8, end_lineno=416, end_col_offset=21)], lineno=415, col_offset=4, end_lineno=416, end_col_offset=21), If(test=UnaryOp(op=Not(), operand=Call(func=Name(id='isinstance', ctx=Load(), lineno=417, col_offset=11, end_lineno=417, end_col_offset=21), args=[Name(id='overrides_raw', ctx=Load(), lineno=417, col_offset=22, end_lineno=417, end_col_offset=35), Name(id='Mapping', ctx=Load(), lineno=417, col_offset=37, end_lineno=417, end_col_offset=44)], lineno=417, col_offset=11, end_lineno=417, end_col_offset=45), lineno=417, col_offset=7, end_lineno=417, end_col_offset=45), body=[Expr(value=Call(func=Attribute(value=Call(func=Name(id='with_fields', ctx=Load(), lineno=418, col_offset=8, end_lineno=418, end_col_offset=19), args=[Name(id='LOGGER', ctx=Load(), lineno=418, col_offset=20, end_lineno=418, end_col_offset=26)], keywords=[keyword(arg='policy_path', value=Call(func=Name(id='str', ctx=Load(), lineno=418, col_offset=40, end_lineno=418, end_col_offset=43), args=[Name(id='POLICY_PATH', ctx=Load(), lineno=418, col_offset=44, end_lineno=418, end_col_offset=55)], lineno=418, col_offset=40, end_lineno=418, end_col_offset=56), lineno=418, col_offset=28, end_lineno=418, end_col_offset=56)], lineno=418, col_offset=8, end_lineno=418, end_col_offset=57), attr='warning', ctx=Load(), lineno=418, col_offset=8, end_lineno=418, end_col_offset=65), args=[Constant(value='Observability policy override must be a mapping, got %s', lineno=419, col_offset=12, end_lineno=419, end_col_offset=69), Attribute(value=Call(func=Name(id='type', ctx=Load(), lineno=420, col_offset=12, end_lineno=420, end_col_offset=16), args=[Name(id='overrides_raw', ctx=Load(), lineno=420, col_offset=17, end_lineno=420, end_col_offset=30)], lineno=420, col_offset=12, end_lineno=420, end_col_offset=31), attr='__name__', ctx=Load(), lineno=420, col_offset=12, end_lineno=420, end_col_offset=40)], lineno=418, col_offset=8, end_lineno=421, end_col_offset=9), lineno=418, col_offset=8, end_lineno=421, end_col_offset=9), Return(value=Name(id='policy', ctx=Load(), lineno=422, col_offset=15, end_lineno=422, end_col_offset=21), lineno=422, col_offset=8, end_lineno=422, end_col_offset=21)], lineno=417, col_offset=4, end_lineno=422, end_col_offset=21), Assign(targets=[Name(id='merged_data', ctx=Store(), lineno=424, col_offset=4, end_lineno=424, end_col_offset=15)], value=Call(func=Name(id='_deep_merge_dicts', ctx=Load(), lineno=424, col_offset=18, end_lineno=424, end_col_offset=35), args=[Call(func=Name(id='cast', ctx=Load(), lineno=425, col_offset=8, end_lineno=425, end_col_offset=12), args=[Constant(value='Mapping[str, object]', lineno=425, col_offset=13, end_lineno=425, end_col_offset=35), Call(func=Name(id='asdict', ctx=Load(), lineno=425, col_offset=37, end_lineno=425, end_col_offset=43), args=[Name(id='DEFAULT_POLICY', ctx=Load(), lineno=425, col_offset=44, end_lineno=425, end_col_offset=58)], lineno=425, col_offset=37, end_lineno=425, end_col_offset=59)], lineno=425, col_offset=8, end_lineno=425, end_col_offset=60), Call(func=Name(id='cast', ctx=Load(), lineno=426, col_offset=8, end_lineno=426, end_col_offset=12), args=[Constant(value='Mapping[str, object]', lineno=426, col_offset=13, end_lineno=426, end_col_offset=35), Name(id='overrides_raw', ctx=Load(), lineno=426, col_offset=37, end_lineno=426, end_col_offset=50)], lineno=426, col_offset=8, end_lineno=426, end_col_offset=51)], lineno=424, col_offset=18, end_lineno=427, end_col_offset=5), lineno=424, col_offset=4, end_lineno=427, end_col_offset=5), Try(body=[Assign(targets=[Name(id='policy', ctx=Store(), lineno=429, col_offset=8, end_lineno=429, end_col_offset=14)], value=Call(func=Name(id='_build_policy_from_mapping', ctx=Load(), lineno=429, col_offset=17, end_lineno=429, end_col_offset=43), args=[Name(id='merged_data', ctx=Load(), lineno=429, col_offset=44, end_lineno=429, end_col_offset=55)], lineno=429, col_offset=17, end_lineno=429, end_col_offset=56), lineno=429, col_offset=8, end_lineno=429, end_col_offset=56)], handlers=[ExceptHandler(type=Name(id='TypeError', ctx=Load(), lineno=430, col_offset=11, end_lineno=430, end_col_offset=20), name='exc', body=[Expr(value=Call(func=Attribute(value=Call(func=Name(id='with_fields', ctx=Load(), lineno=431, col_offset=8, end_lineno=431, end_col_offset=19), args=[Name(id='LOGGER', ctx=Load(), lineno=431, col_offset=20, end_lineno=431, end_col_offset=26)], keywords=[keyword(arg='policy_path', value=Call(func=Name(id='str', ctx=Load(), lineno=431, col_offset=40, end_lineno=431, end_col_offset=43), args=[Name(id='POLICY_PATH', ctx=Load(), lineno=431, col_offset=44, end_lineno=431, end_col_offset=55)], lineno=431, col_offset=40, end_lineno=431, end_col_offset=56), lineno=431, col_offset=28, end_lineno=431, end_col_offset=56)], lineno=431, col_offset=8, end_lineno=431, end_col_offset=57), attr='warning', ctx=Load(), lineno=431, col_offset=8, end_lineno=431, end_col_offset=65), args=[Constant(value='Observability policy overrides are invalid: %s', lineno=432, col_offset=12, end_lineno=432, end_col_offset=60), Name(id='exc', ctx=Load(), lineno=432, col_offset=62, end_lineno=432, end_col_offset=65)], lineno=431, col_offset=8, end_lineno=433, end_col_offset=9), lineno=431, col_offset=8, end_lineno=433, end_col_offset=9)], lineno=430, col_offset=4, end_lineno=433, end_col_offset=9)], lineno=428, col_offset=4, end_lineno=433, end_col_offset=9), Return(value=Name(id='policy', ctx=Load(), lineno=434, col_offset=11, end_lineno=434, end_col_offset=17), lineno=434, col_offset=4, end_lineno=434, end_col_offset=17)], returns=Name(id='ObservabilityPolicy', ctx=Load(), lineno=365, col_offset=21, end_lineno=365, end_col_offset=40), lineno=365, col_offset=0, end_lineno=434, end_col_offset=17), ClassDef(name='MetricRow', body=[Expr(value=Constant(value='Model the MetricRow.\n\n    Represent the metricrow data structure used throughout the project. The class encapsulates\n    behaviour behind a well-defined interface for collaborating components. Instances are typically\n    created by factories or runtime orchestrators documented nearby.\n    ', lineno=442, col_offset=4, end_lineno=447, end_col_offset=7), lineno=442, col_offset=4, end_lineno=447, end_col_offset=7), AnnAssign(target=Name(id='name', ctx=Store(), lineno=449, col_offset=4, end_lineno=449, end_col_offset=8), annotation=Name(id='str', ctx=Load(), lineno=449, col_offset=10, end_lineno=449, end_col_offset=13), simple=1, lineno=449, col_offset=4, end_lineno=449, end_col_offset=13), AnnAssign(target=Name(id='type', ctx=Store(), lineno=450, col_offset=4, end_lineno=450, end_col_offset=8), annotation=BinOp(left=Name(id='str', ctx=Load(), lineno=450, col_offset=10, end_lineno=450, end_col_offset=13), op=BitOr(), right=Constant(value=None, lineno=450, col_offset=16, end_lineno=450, end_col_offset=20), lineno=450, col_offset=10, end_lineno=450, end_col_offset=20), simple=1, lineno=450, col_offset=4, end_lineno=450, end_col_offset=20), AnnAssign(target=Name(id='unit', ctx=Store(), lineno=451, col_offset=4, end_lineno=451, end_col_offset=8), annotation=BinOp(left=Name(id='str', ctx=Load(), lineno=451, col_offset=10, end_lineno=451, end_col_offset=13), op=BitOr(), right=Constant(value=None, lineno=451, col_offset=16, end_lineno=451, end_col_offset=20), lineno=451, col_offset=10, end_lineno=451, end_col_offset=20), simple=1, lineno=451, col_offset=4, end_lineno=451, end_col_offset=20), AnnAssign(target=Name(id='labels', ctx=Store(), lineno=452, col_offset=4, end_lineno=452, end_col_offset=10), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=452, col_offset=12, end_lineno=452, end_col_offset=16), slice=Name(id='str', ctx=Load(), lineno=452, col_offset=17, end_lineno=452, end_col_offset=20), ctx=Load(), lineno=452, col_offset=12, end_lineno=452, end_col_offset=21), simple=1, lineno=452, col_offset=4, end_lineno=452, end_col_offset=21), AnnAssign(target=Name(id='file', ctx=Store(), lineno=453, col_offset=4, end_lineno=453, end_col_offset=8), annotation=Name(id='str', ctx=Load(), lineno=453, col_offset=10, end_lineno=453, end_col_offset=13), simple=1, lineno=453, col_offset=4, end_lineno=453, end_col_offset=13), AnnAssign(target=Name(id='lineno', ctx=Store(), lineno=454, col_offset=4, end_lineno=454, end_col_offset=10), annotation=Name(id='int', ctx=Load(), lineno=454, col_offset=12, end_lineno=454, end_col_offset=15), simple=1, lineno=454, col_offset=4, end_lineno=454, end_col_offset=15), AnnAssign(target=Name(id='call', ctx=Store(), lineno=455, col_offset=4, end_lineno=455, end_col_offset=8), annotation=Name(id='str', ctx=Load(), lineno=455, col_offset=10, end_lineno=455, end_col_offset=13), simple=1, lineno=455, col_offset=4, end_lineno=455, end_col_offset=13), AnnAssign(target=Name(id='recommended_aggregation', ctx=Store(), lineno=456, col_offset=4, end_lineno=456, end_col_offset=27), annotation=BinOp(left=Name(id='str', ctx=Load(), lineno=456, col_offset=29, end_lineno=456, end_col_offset=32), op=BitOr(), right=Constant(value=None, lineno=456, col_offset=35, end_lineno=456, end_col_offset=39), lineno=456, col_offset=29, end_lineno=456, end_col_offset=39), simple=1, lineno=456, col_offset=4, end_lineno=456, end_col_offset=39), AnnAssign(target=Name(id='source_link', ctx=Store(), lineno=457, col_offset=4, end_lineno=457, end_col_offset=15), annotation=Subscript(value=Name(id='dict', ctx=Load(), lineno=457, col_offset=17, end_lineno=457, end_col_offset=21), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=457, col_offset=22, end_lineno=457, end_col_offset=25), Name(id='str', ctx=Load(), lineno=457, col_offset=27, end_lineno=457, end_col_offset=30)], ctx=Load(), lineno=457, col_offset=22, end_lineno=457, end_col_offset=30), ctx=Load(), lineno=457, col_offset=17, end_lineno=457, end_col_offset=31), simple=1, lineno=457, col_offset=4, end_lineno=457, end_col_offset=31)], decorator_list=[Call(func=Name(id='dataclass', ctx=Load(), lineno=440, col_offset=1, end_lineno=440, end_col_offset=10), keywords=[keyword(arg='frozen', value=Constant(value=True, lineno=440, col_offset=18, end_lineno=440, end_col_offset=22), lineno=440, col_offset=11, end_lineno=440, end_col_offset=22)], lineno=440, col_offset=1, end_lineno=440, end_col_offset=23)], lineno=441, col_offset=0, end_lineno=457, end_col_offset=31), ClassDef(name='LogRow', body=[Expr(value=Constant(value='Model the LogRow.\n\n    Represent the logrow data structure used throughout the project. The class encapsulates\n    behaviour behind a well-defined interface for collaborating components. Instances are typically\n    created by factories or runtime orchestrators documented nearby.\n    ', lineno=462, col_offset=4, end_lineno=467, end_col_offset=7), lineno=462, col_offset=4, end_lineno=467, end_col_offset=7), AnnAssign(target=Name(id='logger', ctx=Store(), lineno=469, col_offset=4, end_lineno=469, end_col_offset=10), annotation=BinOp(left=Name(id='str', ctx=Load(), lineno=469, col_offset=12, end_lineno=469, end_col_offset=15), op=BitOr(), right=Constant(value=None, lineno=469, col_offset=18, end_lineno=469, end_col_offset=22), lineno=469, col_offset=12, end_lineno=469, end_col_offset=22), simple=1, lineno=469, col_offset=4, end_lineno=469, end_col_offset=22), AnnAssign(target=Name(id='level', ctx=Store(), lineno=470, col_offset=4, end_lineno=470, end_col_offset=9), annotation=Name(id='str', ctx=Load(), lineno=470, col_offset=11, end_lineno=470, end_col_offset=14), simple=1, lineno=470, col_offset=4, end_lineno=470, end_col_offset=14), AnnAssign(target=Name(id='message_template', ctx=Store(), lineno=471, col_offset=4, end_lineno=471, end_col_offset=20), annotation=Name(id='str', ctx=Load(), lineno=471, col_offset=22, end_lineno=471, end_col_offset=25), simple=1, lineno=471, col_offset=4, end_lineno=471, end_col_offset=25), AnnAssign(target=Name(id='structured_keys', ctx=Store(), lineno=472, col_offset=4, end_lineno=472, end_col_offset=19), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=472, col_offset=21, end_lineno=472, end_col_offset=25), slice=Name(id='str', ctx=Load(), lineno=472, col_offset=26, end_lineno=472, end_col_offset=29), ctx=Load(), lineno=472, col_offset=21, end_lineno=472, end_col_offset=30), simple=1, lineno=472, col_offset=4, end_lineno=472, end_col_offset=30), AnnAssign(target=Name(id='file', ctx=Store(), lineno=473, col_offset=4, end_lineno=473, end_col_offset=8), annotation=Name(id='str', ctx=Load(), lineno=473, col_offset=10, end_lineno=473, end_col_offset=13), simple=1, lineno=473, col_offset=4, end_lineno=473, end_col_offset=13), AnnAssign(target=Name(id='lineno', ctx=Store(), lineno=474, col_offset=4, end_lineno=474, end_col_offset=10), annotation=Name(id='int', ctx=Load(), lineno=474, col_offset=12, end_lineno=474, end_col_offset=15), simple=1, lineno=474, col_offset=4, end_lineno=474, end_col_offset=15), AnnAssign(target=Name(id='source_link', ctx=Store(), lineno=475, col_offset=4, end_lineno=475, end_col_offset=15), annotation=Subscript(value=Name(id='dict', ctx=Load(), lineno=475, col_offset=17, end_lineno=475, end_col_offset=21), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=475, col_offset=22, end_lineno=475, end_col_offset=25), Name(id='str', ctx=Load(), lineno=475, col_offset=27, end_lineno=475, end_col_offset=30)], ctx=Load(), lineno=475, col_offset=22, end_lineno=475, end_col_offset=30), ctx=Load(), lineno=475, col_offset=17, end_lineno=475, end_col_offset=31), simple=1, lineno=475, col_offset=4, end_lineno=475, end_col_offset=31), AnnAssign(target=Name(id='runbook', ctx=Store(), lineno=476, col_offset=4, end_lineno=476, end_col_offset=11), annotation=BinOp(left=Name(id='str', ctx=Load(), lineno=476, col_offset=13, end_lineno=476, end_col_offset=16), op=BitOr(), right=Constant(value=None, lineno=476, col_offset=19, end_lineno=476, end_col_offset=23), lineno=476, col_offset=13, end_lineno=476, end_col_offset=23), value=Constant(value=None, lineno=476, col_offset=26, end_lineno=476, end_col_offset=30), simple=1, lineno=476, col_offset=4, end_lineno=476, end_col_offset=30)], decorator_list=[Call(func=Name(id='dataclass', ctx=Load(), lineno=460, col_offset=1, end_lineno=460, end_col_offset=10), keywords=[keyword(arg='frozen', value=Constant(value=True, lineno=460, col_offset=18, end_lineno=460, end_col_offset=22), lineno=460, col_offset=11, end_lineno=460, end_col_offset=22)], lineno=460, col_offset=1, end_lineno=460, end_col_offset=23)], lineno=461, col_offset=0, end_lineno=476, end_col_offset=30), ClassDef(name='TraceRow', body=[Expr(value=Constant(value='Model the TraceRow.\n\n    Represent the tracerow data structure used throughout the project. The class encapsulates\n    behaviour behind a well-defined interface for collaborating components. Instances are typically\n    created by factories or runtime orchestrators documented nearby.\n    ', lineno=481, col_offset=4, end_lineno=486, end_col_offset=7), lineno=481, col_offset=4, end_lineno=486, end_col_offset=7), AnnAssign(target=Name(id='span_name', ctx=Store(), lineno=488, col_offset=4, end_lineno=488, end_col_offset=13), annotation=BinOp(left=Name(id='str', ctx=Load(), lineno=488, col_offset=15, end_lineno=488, end_col_offset=18), op=BitOr(), right=Constant(value=None, lineno=488, col_offset=21, end_lineno=488, end_col_offset=25), lineno=488, col_offset=15, end_lineno=488, end_col_offset=25), simple=1, lineno=488, col_offset=4, end_lineno=488, end_col_offset=25), AnnAssign(target=Name(id='attributes', ctx=Store(), lineno=489, col_offset=4, end_lineno=489, end_col_offset=14), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=489, col_offset=16, end_lineno=489, end_col_offset=20), slice=Name(id='str', ctx=Load(), lineno=489, col_offset=21, end_lineno=489, end_col_offset=24), ctx=Load(), lineno=489, col_offset=16, end_lineno=489, end_col_offset=25), simple=1, lineno=489, col_offset=4, end_lineno=489, end_col_offset=25), AnnAssign(target=Name(id='file', ctx=Store(), lineno=490, col_offset=4, end_lineno=490, end_col_offset=8), annotation=Name(id='str', ctx=Load(), lineno=490, col_offset=10, end_lineno=490, end_col_offset=13), simple=1, lineno=490, col_offset=4, end_lineno=490, end_col_offset=13), AnnAssign(target=Name(id='lineno', ctx=Store(), lineno=491, col_offset=4, end_lineno=491, end_col_offset=10), annotation=Name(id='int', ctx=Load(), lineno=491, col_offset=12, end_lineno=491, end_col_offset=15), simple=1, lineno=491, col_offset=4, end_lineno=491, end_col_offset=15), AnnAssign(target=Name(id='call', ctx=Store(), lineno=492, col_offset=4, end_lineno=492, end_col_offset=8), annotation=Name(id='str', ctx=Load(), lineno=492, col_offset=10, end_lineno=492, end_col_offset=13), simple=1, lineno=492, col_offset=4, end_lineno=492, end_col_offset=13), AnnAssign(target=Name(id='source_link', ctx=Store(), lineno=493, col_offset=4, end_lineno=493, end_col_offset=15), annotation=Subscript(value=Name(id='dict', ctx=Load(), lineno=493, col_offset=17, end_lineno=493, end_col_offset=21), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=493, col_offset=22, end_lineno=493, end_col_offset=25), Name(id='str', ctx=Load(), lineno=493, col_offset=27, end_lineno=493, end_col_offset=30)], ctx=Load(), lineno=493, col_offset=22, end_lineno=493, end_col_offset=30), ctx=Load(), lineno=493, col_offset=17, end_lineno=493, end_col_offset=31), simple=1, lineno=493, col_offset=4, end_lineno=493, end_col_offset=31)], decorator_list=[Call(func=Name(id='dataclass', ctx=Load(), lineno=479, col_offset=1, end_lineno=479, end_col_offset=10), keywords=[keyword(arg='frozen', value=Constant(value=True, lineno=479, col_offset=18, end_lineno=479, end_col_offset=22), lineno=479, col_offset=11, end_lineno=479, end_col_offset=22)], lineno=479, col_offset=1, end_lineno=479, end_col_offset=23)], lineno=480, col_offset=0, end_lineno=493, end_col_offset=31), Assign(targets=[Name(id='_LOG_METHODS', ctx=Store(), lineno=498, col_offset=0, end_lineno=498, end_col_offset=12)], value=Set(elts=[Constant(value='debug', lineno=499, col_offset=4, end_lineno=499, end_col_offset=11), Constant(value='info', lineno=500, col_offset=4, end_lineno=500, end_col_offset=10), Constant(value='warning', lineno=501, col_offset=4, end_lineno=501, end_col_offset=13), Constant(value='error', lineno=502, col_offset=4, end_lineno=502, end_col_offset=11), Constant(value='exception', lineno=503, col_offset=4, end_lineno=503, end_col_offset=15), Constant(value='critical', lineno=504, col_offset=4, end_lineno=504, end_col_offset=14)], lineno=498, col_offset=15, end_lineno=505, end_col_offset=1), lineno=498, col_offset=0, end_lineno=505, end_col_offset=1), Assign(targets=[Name(id='_METRIC_CALL_TYPES', ctx=Store(), lineno=507, col_offset=0, end_lineno=507, end_col_offset=18)], value=Dict(keys=[Constant(value='Counter', lineno=509, col_offset=4, end_lineno=509, end_col_offset=13), Constant(value='Gauge', lineno=510, col_offset=4, end_lineno=510, end_col_offset=11), Constant(value='Histogram', lineno=511, col_offset=4, end_lineno=511, end_col_offset=15), Constant(value='Summary', lineno=512, col_offset=4, end_lineno=512, end_col_offset=13), Constant(value='create_counter', lineno=513, col_offset=4, end_lineno=513, end_col_offset=20), Constant(value='create_gauge', lineno=514, col_offset=4, end_lineno=514, end_col_offset=18), Constant(value='create_histogram', lineno=515, col_offset=4, end_lineno=515, end_col_offset=22)], values=[Constant(value='counter', lineno=509, col_offset=15, end_lineno=509, end_col_offset=24), Constant(value='gauge', lineno=510, col_offset=13, end_lineno=510, end_col_offset=20), Constant(value='histogram', lineno=511, col_offset=17, end_lineno=511, end_col_offset=28), Constant(value='summary', lineno=512, col_offset=15, end_lineno=512, end_col_offset=24), Constant(value='counter', lineno=513, col_offset=22, end_lineno=513, end_col_offset=31), Constant(value='gauge', lineno=514, col_offset=20, end_lineno=514, end_col_offset=27), Constant(value='histogram', lineno=515, col_offset=24, end_lineno=515, end_col_offset=35)], lineno=507, col_offset=21, end_lineno=516, end_col_offset=1), lineno=507, col_offset=0, end_lineno=516, end_col_offset=1), Assign(targets=[Name(id='_PROM_UNITS', ctx=Store(), lineno=517, col_offset=0, end_lineno=517, end_col_offset=11)], value=Call(func=Name(id='set', ctx=Load(), lineno=517, col_offset=14, end_lineno=517, end_col_offset=17), args=[Attribute(value=Attribute(value=Name(id='DEFAULT_POLICY', ctx=Load(), lineno=517, col_offset=18, end_lineno=517, end_col_offset=32), attr='metric', ctx=Load(), lineno=517, col_offset=18, end_lineno=517, end_col_offset=39), attr='allowed_units', ctx=Load(), lineno=517, col_offset=18, end_lineno=517, end_col_offset=53)], lineno=517, col_offset=14, end_lineno=517, end_col_offset=54), lineno=517, col_offset=0, end_lineno=517, end_col_offset=54), FunctionDef(name='_first_str', args=arguments(args=[arg(arg='node', annotation=Attribute(value=Name(id='ast', ctx=Load(), lineno=520, col_offset=21, end_lineno=520, end_col_offset=24), attr='AST', ctx=Load(), lineno=520, col_offset=21, end_lineno=520, end_col_offset=28), lineno=520, col_offset=15, end_lineno=520, end_col_offset=28)]), body=[Expr(value=Constant(value="Return the first string literal value found in node's args, else None.\n\n    Parameters\n    ----------\n    node : ast.AST\n        AST node to examine.\n\n    Returns\n    -------\n    str | None\n        First string literal | None.\n    ", lineno=521, col_offset=4, end_lineno=532, end_col_offset=7), lineno=521, col_offset=4, end_lineno=532, end_col_offset=7), If(test=BoolOp(op=And(), values=[Call(func=Name(id='isinstance', ctx=Load(), lineno=533, col_offset=7, end_lineno=533, end_col_offset=17), args=[Name(id='node', ctx=Load(), lineno=533, col_offset=18, end_lineno=533, end_col_offset=22), Attribute(value=Name(id='ast', ctx=Load(), lineno=533, col_offset=24, end_lineno=533, end_col_offset=27), attr='Call', ctx=Load(), lineno=533, col_offset=24, end_lineno=533, end_col_offset=32)], lineno=533, col_offset=7, end_lineno=533, end_col_offset=33), Attribute(value=Name(id='node', ctx=Load(), lineno=533, col_offset=38, end_lineno=533, end_col_offset=42), attr='args', ctx=Load(), lineno=533, col_offset=38, end_lineno=533, end_col_offset=47)], lineno=533, col_offset=7, end_lineno=533, end_col_offset=47), body=[Assign(targets=[Name(id='arg0', ctx=Store(), lineno=534, col_offset=8, end_lineno=534, end_col_offset=12)], value=Subscript(value=Attribute(value=Name(id='node', ctx=Load(), lineno=534, col_offset=15, end_lineno=534, end_col_offset=19), attr='args', ctx=Load(), lineno=534, col_offset=15, end_lineno=534, end_col_offset=24), slice=Constant(value=0, lineno=534, col_offset=25, end_lineno=534, end_col_offset=26), ctx=Load(), lineno=534, col_offset=15, end_lineno=534, end_col_offset=27), lineno=534, col_offset=8, end_lineno=534, end_col_offset=27), If(test=BoolOp(op=And(), values=[Call(func=Name(id='isinstance', ctx=Load(), lineno=535, col_offset=11, end_lineno=535, end_col_offset=21), args=[Name(id='arg0', ctx=Load(), lineno=535, col_offset=22, end_lineno=535, end_col_offset=26), Attribute(value=Name(id='ast', ctx=Load(), lineno=535, col_offset=28, end_lineno=535, end_col_offset=31), attr='Constant', ctx=Load(), lineno=535, col_offset=28, end_lineno=535, end_col_offset=40)], lineno=535, col_offset=11, end_lineno=535, end_col_offset=41), Call(func=Name(id='isinstance', ctx=Load(), lineno=535, col_offset=46, end_lineno=535, end_col_offset=56), args=[Attribute(value=Name(id='arg0', ctx=Load(), lineno=535, col_offset=57, end_lineno=535, end_col_offset=61), attr='value', ctx=Load(), lineno=535, col_offset=57, end_lineno=535, end_col_offset=67), Name(id='str', ctx=Load(), lineno=535, col_offset=69, end_lineno=535, end_col_offset=72)], lineno=535, col_offset=46, end_lineno=535, end_col_offset=73)], lineno=535, col_offset=11, end_lineno=535, end_col_offset=73), body=[Return(value=Attribute(value=Name(id='arg0', ctx=Load(), lineno=536, col_offset=19, end_lineno=536, end_col_offset=23), attr='value', ctx=Load(), lineno=536, col_offset=19, end_lineno=536, end_col_offset=29), lineno=536, col_offset=12, end_lineno=536, end_col_offset=29)], lineno=535, col_offset=8, end_lineno=536, end_col_offset=29), If(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=537, col_offset=11, end_lineno=537, end_col_offset=21), args=[Name(id='arg0', ctx=Load(), lineno=537, col_offset=22, end_lineno=537, end_col_offset=26), Attribute(value=Name(id='ast', ctx=Load(), lineno=537, col_offset=28, end_lineno=537, end_col_offset=31), attr='JoinedStr', ctx=Load(), lineno=537, col_offset=28, end_lineno=537, end_col_offset=41)], lineno=537, col_offset=11, end_lineno=537, end_col_offset=42), body=[Return(value=Constant(value=None, lineno=539, col_offset=19, end_lineno=539, end_col_offset=23), lineno=539, col_offset=12, end_lineno=539, end_col_offset=23)], lineno=537, col_offset=8, end_lineno=539, end_col_offset=23)], lineno=533, col_offset=4, end_lineno=539, end_col_offset=23), Return(value=Constant(value=None, lineno=540, col_offset=11, end_lineno=540, end_col_offset=15), lineno=540, col_offset=4, end_lineno=540, end_col_offset=15)], returns=BinOp(left=Name(id='str', ctx=Load(), lineno=520, col_offset=33, end_lineno=520, end_col_offset=36), op=BitOr(), right=Constant(value=None, lineno=520, col_offset=39, end_lineno=520, end_col_offset=43), lineno=520, col_offset=33, end_lineno=520, end_col_offset=43), lineno=520, col_offset=0, end_lineno=540, end_col_offset=15), FunctionDef(name='_keywords_map', args=arguments(args=[arg(arg='node', annotation=Attribute(value=Name(id='ast', ctx=Load(), lineno=543, col_offset=24, end_lineno=543, end_col_offset=27), attr='Call', ctx=Load(), lineno=543, col_offset=24, end_lineno=543, end_col_offset=32), lineno=543, col_offset=18, end_lineno=543, end_col_offset=32), arg(arg='text', annotation=Name(id='str', ctx=Load(), lineno=543, col_offset=40, end_lineno=543, end_col_offset=43), lineno=543, col_offset=34, end_lineno=543, end_col_offset=43)]), body=[Expr(value=Constant(value='Keywords map.\n\n    Parameters\n    ----------\n    node : ast.Call\n        AST call node.\n    text : str\n        Source text.\n\n    Returns\n    -------\n    dict[str, str]\n        Mapping of keyword argument names to source strings.\n    ', lineno=544, col_offset=4, end_lineno=557, end_col_offset=7), lineno=544, col_offset=4, end_lineno=557, end_col_offset=7), AnnAssign(target=Name(id='out', ctx=Store(), lineno=558, col_offset=4, end_lineno=558, end_col_offset=7), annotation=Subscript(value=Name(id='dict', ctx=Load(), lineno=558, col_offset=9, end_lineno=558, end_col_offset=13), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=558, col_offset=14, end_lineno=558, end_col_offset=17), Name(id='str', ctx=Load(), lineno=558, col_offset=19, end_lineno=558, end_col_offset=22)], ctx=Load(), lineno=558, col_offset=14, end_lineno=558, end_col_offset=22), ctx=Load(), lineno=558, col_offset=9, end_lineno=558, end_col_offset=23), value=Dict(lineno=558, col_offset=26, end_lineno=558, end_col_offset=28), simple=1, lineno=558, col_offset=4, end_lineno=558, end_col_offset=28), For(target=Name(id='kw', ctx=Store(), lineno=559, col_offset=8, end_lineno=559, end_col_offset=10), iter=BoolOp(op=Or(), values=[Attribute(value=Name(id='node', ctx=Load(), lineno=559, col_offset=14, end_lineno=559, end_col_offset=18), attr='keywords', ctx=Load(), lineno=559, col_offset=14, end_lineno=559, end_col_offset=27), List(ctx=Load(), lineno=559, col_offset=31, end_lineno=559, end_col_offset=33)], lineno=559, col_offset=14, end_lineno=559, end_col_offset=33), body=[Assign(targets=[Name(id='k', ctx=Store(), lineno=560, col_offset=8, end_lineno=560, end_col_offset=9)], value=Attribute(value=Name(id='kw', ctx=Load(), lineno=560, col_offset=12, end_lineno=560, end_col_offset=14), attr='arg', ctx=Load(), lineno=560, col_offset=12, end_lineno=560, end_col_offset=18), lineno=560, col_offset=8, end_lineno=560, end_col_offset=18), If(test=Compare(left=Name(id='k', ctx=Load(), lineno=561, col_offset=11, end_lineno=561, end_col_offset=12), ops=[Is()], comparators=[Constant(value=None, lineno=561, col_offset=16, end_lineno=561, end_col_offset=20)], lineno=561, col_offset=11, end_lineno=561, end_col_offset=20), body=[Continue(lineno=562, col_offset=12, end_lineno=562, end_col_offset=20)], lineno=561, col_offset=8, end_lineno=562, end_col_offset=20), Try(body=[Assign(targets=[Name(id='vsrc', ctx=Store(), lineno=564, col_offset=12, end_lineno=564, end_col_offset=16)], value=BoolOp(op=Or(), values=[Call(func=Attribute(value=Name(id='ast', ctx=Load(), lineno=564, col_offset=19, end_lineno=564, end_col_offset=22), attr='get_source_segment', ctx=Load(), lineno=564, col_offset=19, end_lineno=564, end_col_offset=41), args=[Name(id='text', ctx=Load(), lineno=564, col_offset=42, end_lineno=564, end_col_offset=46), Attribute(value=Name(id='kw', ctx=Load(), lineno=564, col_offset=48, end_lineno=564, end_col_offset=50), attr='value', ctx=Load(), lineno=564, col_offset=48, end_lineno=564, end_col_offset=56)], lineno=564, col_offset=19, end_lineno=564, end_col_offset=57), Constant(value='', lineno=564, col_offset=61, end_lineno=564, end_col_offset=63)], lineno=564, col_offset=19, end_lineno=564, end_col_offset=63), lineno=564, col_offset=12, end_lineno=564, end_col_offset=63)], handlers=[ExceptHandler(type=Tuple(elts=[Name(id='OSError', ctx=Load(), lineno=565, col_offset=16, end_lineno=565, end_col_offset=23), Name(id='TypeError', ctx=Load(), lineno=565, col_offset=25, end_lineno=565, end_col_offset=34), Name(id='ValueError', ctx=Load(), lineno=565, col_offset=36, end_lineno=565, end_col_offset=46)], ctx=Load(), lineno=565, col_offset=15, end_lineno=565, end_col_offset=47), name='exc', body=[Expr(value=Call(func=Attribute(value=Call(func=Name(id='with_fields', ctx=Load(), lineno=566, col_offset=12, end_lineno=566, end_col_offset=23), args=[Name(id='LOGGER', ctx=Load(), lineno=566, col_offset=24, end_lineno=566, end_col_offset=30)], keywords=[keyword(arg='keyword', value=Name(id='k', ctx=Load(), lineno=566, col_offset=40, end_lineno=566, end_col_offset=41), lineno=566, col_offset=32, end_lineno=566, end_col_offset=41)], lineno=566, col_offset=12, end_lineno=566, end_col_offset=42), attr='debug', ctx=Load(), lineno=566, col_offset=12, end_lineno=566, end_col_offset=48), args=[Constant(value='Unable to read source segment: %s', lineno=566, col_offset=49, end_lineno=566, end_col_offset=84), Name(id='exc', ctx=Load(), lineno=566, col_offset=86, end_lineno=566, end_col_offset=89)], lineno=566, col_offset=12, end_lineno=566, end_col_offset=90), lineno=566, col_offset=12, end_lineno=566, end_col_offset=90), Assign(targets=[Name(id='vsrc', ctx=Store(), lineno=567, col_offset=12, end_lineno=567, end_col_offset=16)], value=Constant(value='', lineno=567, col_offset=19, end_lineno=567, end_col_offset=21), lineno=567, col_offset=12, end_lineno=567, end_col_offset=21)], lineno=565, col_offset=8, end_lineno=567, end_col_offset=21)], lineno=563, col_offset=8, end_lineno=567, end_col_offset=21), Assign(targets=[Subscript(value=Name(id='out', ctx=Load(), lineno=568, col_offset=8, end_lineno=568, end_col_offset=11), slice=Name(id='k', ctx=Load(), lineno=568, col_offset=12, end_lineno=568, end_col_offset=13), ctx=Store(), lineno=568, col_offset=8, end_lineno=568, end_col_offset=14)], value=Call(func=Attribute(value=Name(id='vsrc', ctx=Load(), lineno=568, col_offset=17, end_lineno=568, end_col_offset=21), attr='strip', ctx=Load(), lineno=568, col_offset=17, end_lineno=568, end_col_offset=27), lineno=568, col_offset=17, end_lineno=568, end_col_offset=29), lineno=568, col_offset=8, end_lineno=568, end_col_offset=29)], lineno=559, col_offset=4, end_lineno=568, end_col_offset=29), Return(value=Name(id='out', ctx=Load(), lineno=569, col_offset=11, end_lineno=569, end_col_offset=14), lineno=569, col_offset=4, end_lineno=569, end_col_offset=14)], returns=Subscript(value=Name(id='dict', ctx=Load(), lineno=543, col_offset=48, end_lineno=543, end_col_offset=52), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=543, col_offset=53, end_lineno=543, end_col_offset=56), Name(id='str', ctx=Load(), lineno=543, col_offset=58, end_lineno=543, end_col_offset=61)], ctx=Load(), lineno=543, col_offset=53, end_lineno=543, end_col_offset=61), ctx=Load(), lineno=543, col_offset=48, end_lineno=543, end_col_offset=62), lineno=543, col_offset=0, end_lineno=569, end_col_offset=14), FunctionDef(name='_extract_labels_from_kw', args=arguments(args=[arg(arg='kw_map', annotation=Subscript(value=Name(id='dict', ctx=Load(), lineno=572, col_offset=36, end_lineno=572, end_col_offset=40), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=572, col_offset=41, end_lineno=572, end_col_offset=44), Name(id='str', ctx=Load(), lineno=572, col_offset=46, end_lineno=572, end_col_offset=49)], ctx=Load(), lineno=572, col_offset=41, end_lineno=572, end_col_offset=49), ctx=Load(), lineno=572, col_offset=36, end_lineno=572, end_col_offset=50), lineno=572, col_offset=28, end_lineno=572, end_col_offset=50)]), body=[Expr(value=Constant(value='Extract labels from kw.\n\n    Parameters\n    ----------\n    kw_map : dict[str, str]\n        Keyword arguments mapping.\n\n    Returns\n    -------\n    list[str]\n        List of label names extracted from keyword arguments.\n    ', lineno=573, col_offset=4, end_lineno=584, end_col_offset=7), lineno=573, col_offset=4, end_lineno=584, end_col_offset=7), Assign(targets=[Name(id='s', ctx=Store(), lineno=587, col_offset=4, end_lineno=587, end_col_offset=5)], value=BoolOp(op=Or(), values=[Call(func=Attribute(value=Name(id='kw_map', ctx=Load(), lineno=587, col_offset=8, end_lineno=587, end_col_offset=14), attr='get', ctx=Load(), lineno=587, col_offset=8, end_lineno=587, end_col_offset=18), args=[Constant(value='labelnames', lineno=587, col_offset=19, end_lineno=587, end_col_offset=31)], lineno=587, col_offset=8, end_lineno=587, end_col_offset=32), Call(func=Attribute(value=Name(id='kw_map', ctx=Load(), lineno=587, col_offset=36, end_lineno=587, end_col_offset=42), attr='get', ctx=Load(), lineno=587, col_offset=36, end_lineno=587, end_col_offset=46), args=[Constant(value='label_names', lineno=587, col_offset=47, end_lineno=587, end_col_offset=60)], lineno=587, col_offset=36, end_lineno=587, end_col_offset=61), Constant(value='', lineno=587, col_offset=65, end_lineno=587, end_col_offset=67)], lineno=587, col_offset=8, end_lineno=587, end_col_offset=67), lineno=587, col_offset=4, end_lineno=587, end_col_offset=67), AnnAssign(target=Name(id='names', ctx=Store(), lineno=589, col_offset=4, end_lineno=589, end_col_offset=9), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=589, col_offset=11, end_lineno=589, end_col_offset=15), slice=Name(id='str', ctx=Load(), lineno=589, col_offset=16, end_lineno=589, end_col_offset=19), ctx=Load(), lineno=589, col_offset=11, end_lineno=589, end_col_offset=20), value=Call(func=Attribute(value=Name(id='re', ctx=Load(), lineno=589, col_offset=23, end_lineno=589, end_col_offset=25), attr='findall', ctx=Load(), lineno=589, col_offset=23, end_lineno=589, end_col_offset=33), args=[Constant(value='[\\"\']([A-Za-z_][A-Za-z0-9_]*)[\\"\']', lineno=589, col_offset=34, end_lineno=589, end_col_offset=71), Name(id='s', ctx=Load(), lineno=589, col_offset=73, end_lineno=589, end_col_offset=74)], lineno=589, col_offset=23, end_lineno=589, end_col_offset=75), simple=1, lineno=589, col_offset=4, end_lineno=589, end_col_offset=75), Return(value=Call(func=Name(id='_dedupe_strings', ctx=Load(), lineno=590, col_offset=11, end_lineno=590, end_col_offset=26), args=[Name(id='names', ctx=Load(), lineno=590, col_offset=27, end_lineno=590, end_col_offset=32)], lineno=590, col_offset=11, end_lineno=590, end_col_offset=33), lineno=590, col_offset=4, end_lineno=590, end_col_offset=33)], returns=Subscript(value=Name(id='list', ctx=Load(), lineno=572, col_offset=55, end_lineno=572, end_col_offset=59), slice=Name(id='str', ctx=Load(), lineno=572, col_offset=60, end_lineno=572, end_col_offset=63), ctx=Load(), lineno=572, col_offset=55, end_lineno=572, end_col_offset=64), lineno=572, col_offset=0, end_lineno=590, end_col_offset=33), FunctionDef(name='_infer_unit_from_name', args=arguments(args=[arg(arg='name', annotation=Name(id='str', ctx=Load(), lineno=593, col_offset=32, end_lineno=593, end_col_offset=35), lineno=593, col_offset=26, end_lineno=593, end_col_offset=35)]), body=[Expr(value=Constant(value='Infer unit from name.\n\n    Parameters\n    ----------\n    name : str\n        Metric name.\n\n    Returns\n    -------\n    str | None\n        Unit suffix if found, None otherwise.\n    ', lineno=594, col_offset=4, end_lineno=605, end_col_offset=7), lineno=594, col_offset=4, end_lineno=605, end_col_offset=7), Assign(targets=[Name(id='parts', ctx=Store(), lineno=608, col_offset=4, end_lineno=608, end_col_offset=9)], value=Call(func=Attribute(value=Name(id='name', ctx=Load(), lineno=608, col_offset=12, end_lineno=608, end_col_offset=16), attr='split', ctx=Load(), lineno=608, col_offset=12, end_lineno=608, end_col_offset=22), args=[Constant(value='_', lineno=608, col_offset=23, end_lineno=608, end_col_offset=26)], lineno=608, col_offset=12, end_lineno=608, end_col_offset=27), lineno=608, col_offset=4, end_lineno=608, end_col_offset=27), Assign(targets=[Name(id='suffix', ctx=Store(), lineno=609, col_offset=4, end_lineno=609, end_col_offset=10)], value=IfExp(test=Name(id='parts', ctx=Load(), lineno=609, col_offset=26, end_lineno=609, end_col_offset=31), body=Subscript(value=Name(id='parts', ctx=Load(), lineno=609, col_offset=13, end_lineno=609, end_col_offset=18), slice=UnaryOp(op=USub(), operand=Constant(value=1, lineno=609, col_offset=20, end_lineno=609, end_col_offset=21), lineno=609, col_offset=19, end_lineno=609, end_col_offset=21), ctx=Load(), lineno=609, col_offset=13, end_lineno=609, end_col_offset=22), orelse=Constant(value='', lineno=609, col_offset=37, end_lineno=609, end_col_offset=39), lineno=609, col_offset=13, end_lineno=609, end_col_offset=39), lineno=609, col_offset=4, end_lineno=609, end_col_offset=39), Return(value=IfExp(test=Compare(left=Name(id='suffix', ctx=Load(), lineno=610, col_offset=21, end_lineno=610, end_col_offset=27), ops=[In()], comparators=[Name(id='_PROM_UNITS', ctx=Load(), lineno=610, col_offset=31, end_lineno=610, end_col_offset=42)], lineno=610, col_offset=21, end_lineno=610, end_col_offset=42), body=Name(id='suffix', ctx=Load(), lineno=610, col_offset=11, end_lineno=610, end_col_offset=17), orelse=Constant(value=None, lineno=610, col_offset=48, end_lineno=610, end_col_offset=52), lineno=610, col_offset=11, end_lineno=610, end_col_offset=52), lineno=610, col_offset=4, end_lineno=610, end_col_offset=52)], returns=BinOp(left=Name(id='str', ctx=Load(), lineno=593, col_offset=40, end_lineno=593, end_col_offset=43), op=BitOr(), right=Constant(value=None, lineno=593, col_offset=46, end_lineno=593, end_col_offset=50), lineno=593, col_offset=40, end_lineno=593, end_col_offset=50), lineno=593, col_offset=0, end_lineno=610, end_col_offset=52), FunctionDef(name='_recommended_aggregation', args=arguments(args=[arg(arg='mtype', annotation=BinOp(left=Name(id='str', ctx=Load(), lineno=613, col_offset=36, end_lineno=613, end_col_offset=39), op=BitOr(), right=Constant(value=None, lineno=613, col_offset=42, end_lineno=613, end_col_offset=46), lineno=613, col_offset=36, end_lineno=613, end_col_offset=46), lineno=613, col_offset=29, end_lineno=613, end_col_offset=46)]), body=[Expr(value=Constant(value='Recommended aggregation.\n\n    Parameters\n    ----------\n    mtype : str | None\n        Metric type.\n\n    Returns\n    -------\n    str | None\n        Recommended aggregation query | None.\n    ', lineno=614, col_offset=4, end_lineno=625, end_col_offset=7), lineno=614, col_offset=4, end_lineno=625, end_col_offset=7), If(test=Compare(left=Name(id='mtype', ctx=Load(), lineno=626, col_offset=7, end_lineno=626, end_col_offset=12), ops=[Eq()], comparators=[Constant(value='counter', lineno=626, col_offset=16, end_lineno=626, end_col_offset=25)], lineno=626, col_offset=7, end_lineno=626, end_col_offset=25), body=[Return(value=Constant(value='rate(sum by (...) (__metric__[5m]))', lineno=627, col_offset=15, end_lineno=627, end_col_offset=52), lineno=627, col_offset=8, end_lineno=627, end_col_offset=52)], lineno=626, col_offset=4, end_lineno=627, end_col_offset=52), If(test=Compare(left=Name(id='mtype', ctx=Load(), lineno=628, col_offset=7, end_lineno=628, end_col_offset=12), ops=[Eq()], comparators=[Constant(value='histogram', lineno=628, col_offset=16, end_lineno=628, end_col_offset=27)], lineno=628, col_offset=7, end_lineno=628, end_col_offset=27), body=[Return(value=Constant(value='histogram_quantile(0.95, sum by (..., le) (rate(__metric___bucket[5m])))', lineno=629, col_offset=15, end_lineno=629, end_col_offset=89), lineno=629, col_offset=8, end_lineno=629, end_col_offset=89)], lineno=628, col_offset=4, end_lineno=629, end_col_offset=89), If(test=Compare(left=Name(id='mtype', ctx=Load(), lineno=630, col_offset=7, end_lineno=630, end_col_offset=12), ops=[Eq()], comparators=[Constant(value='summary', lineno=630, col_offset=16, end_lineno=630, end_col_offset=25)], lineno=630, col_offset=7, end_lineno=630, end_col_offset=25), body=[Return(value=Constant(value='quantile_over_time(0.95, __metric__[5m])', lineno=631, col_offset=15, end_lineno=631, end_col_offset=57), lineno=631, col_offset=8, end_lineno=631, end_col_offset=57)], lineno=630, col_offset=4, end_lineno=631, end_col_offset=57), Return(value=Constant(value=None, lineno=632, col_offset=11, end_lineno=632, end_col_offset=15), lineno=632, col_offset=4, end_lineno=632, end_col_offset=15)], returns=BinOp(left=Name(id='str', ctx=Load(), lineno=613, col_offset=51, end_lineno=613, end_col_offset=54), op=BitOr(), right=Constant(value=None, lineno=613, col_offset=57, end_lineno=613, end_col_offset=61), lineno=613, col_offset=51, end_lineno=613, end_col_offset=61), lineno=613, col_offset=0, end_lineno=632, end_col_offset=15), FunctionDef(name='_dedupe_strings', args=arguments(args=[arg(arg='values', annotation=Subscript(value=Name(id='Sequence', ctx=Load(), lineno=635, col_offset=28, end_lineno=635, end_col_offset=36), slice=Name(id='str', ctx=Load(), lineno=635, col_offset=37, end_lineno=635, end_col_offset=40), ctx=Load(), lineno=635, col_offset=28, end_lineno=635, end_col_offset=41), lineno=635, col_offset=20, end_lineno=635, end_col_offset=41)]), body=[Expr(value=Constant(value='Return ``values`` with duplicates removed, preserving order.\n\n    Parameters\n    ----------\n    values : Sequence[str]\n        Sequence of strings.\n\n    Returns\n    -------\n    list[str]\n        List with duplicates removed, preserving order.\n    ', lineno=636, col_offset=4, end_lineno=647, end_col_offset=7), lineno=636, col_offset=4, end_lineno=647, end_col_offset=7), AnnAssign(target=Name(id='seen', ctx=Store(), lineno=648, col_offset=4, end_lineno=648, end_col_offset=8), annotation=Subscript(value=Name(id='set', ctx=Load(), lineno=648, col_offset=10, end_lineno=648, end_col_offset=13), slice=Name(id='str', ctx=Load(), lineno=648, col_offset=14, end_lineno=648, end_col_offset=17), ctx=Load(), lineno=648, col_offset=10, end_lineno=648, end_col_offset=18), value=Call(func=Name(id='set', ctx=Load(), lineno=648, col_offset=21, end_lineno=648, end_col_offset=24), lineno=648, col_offset=21, end_lineno=648, end_col_offset=26), simple=1, lineno=648, col_offset=4, end_lineno=648, end_col_offset=26), AnnAssign(target=Name(id='ordered', ctx=Store(), lineno=649, col_offset=4, end_lineno=649, end_col_offset=11), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=649, col_offset=13, end_lineno=649, end_col_offset=17), slice=Name(id='str', ctx=Load(), lineno=649, col_offset=18, end_lineno=649, end_col_offset=21), ctx=Load(), lineno=649, col_offset=13, end_lineno=649, end_col_offset=22), value=List(ctx=Load(), lineno=649, col_offset=25, end_lineno=649, end_col_offset=27), simple=1, lineno=649, col_offset=4, end_lineno=649, end_col_offset=27), For(target=Name(id='value', ctx=Store(), lineno=650, col_offset=8, end_lineno=650, end_col_offset=13), iter=Name(id='values', ctx=Load(), lineno=650, col_offset=17, end_lineno=650, end_col_offset=23), body=[If(test=Compare(left=Name(id='value', ctx=Load(), lineno=651, col_offset=11, end_lineno=651, end_col_offset=16), ops=[NotIn()], comparators=[Name(id='seen', ctx=Load(), lineno=651, col_offset=24, end_lineno=651, end_col_offset=28)], lineno=651, col_offset=11, end_lineno=651, end_col_offset=28), body=[Expr(value=Call(func=Attribute(value=Name(id='seen', ctx=Load(), lineno=652, col_offset=12, end_lineno=652, end_col_offset=16), attr='add', ctx=Load(), lineno=652, col_offset=12, end_lineno=652, end_col_offset=20), args=[Name(id='value', ctx=Load(), lineno=652, col_offset=21, end_lineno=652, end_col_offset=26)], lineno=652, col_offset=12, end_lineno=652, end_col_offset=27), lineno=652, col_offset=12, end_lineno=652, end_col_offset=27), Expr(value=Call(func=Attribute(value=Name(id='ordered', ctx=Load(), lineno=653, col_offset=12, end_lineno=653, end_col_offset=19), attr='append', ctx=Load(), lineno=653, col_offset=12, end_lineno=653, end_col_offset=26), args=[Name(id='value', ctx=Load(), lineno=653, col_offset=27, end_lineno=653, end_col_offset=32)], lineno=653, col_offset=12, end_lineno=653, end_col_offset=33), lineno=653, col_offset=12, end_lineno=653, end_col_offset=33)], lineno=651, col_offset=8, end_lineno=653, end_col_offset=33)], lineno=650, col_offset=4, end_lineno=653, end_col_offset=33), Return(value=Name(id='ordered', ctx=Load(), lineno=654, col_offset=11, end_lineno=654, end_col_offset=18), lineno=654, col_offset=4, end_lineno=654, end_col_offset=18)], returns=Subscript(value=Name(id='list', ctx=Load(), lineno=635, col_offset=46, end_lineno=635, end_col_offset=50), slice=Name(id='str', ctx=Load(), lineno=635, col_offset=51, end_lineno=635, end_col_offset=54), ctx=Load(), lineno=635, col_offset=46, end_lineno=635, end_col_offset=55), lineno=635, col_offset=0, end_lineno=654, end_col_offset=18), FunctionDef(name='_is_structured_logging', args=arguments(args=[arg(arg='call', annotation=Attribute(value=Name(id='ast', ctx=Load(), lineno=657, col_offset=33, end_lineno=657, end_col_offset=36), attr='Call', ctx=Load(), lineno=657, col_offset=33, end_lineno=657, end_col_offset=41), lineno=657, col_offset=27, end_lineno=657, end_col_offset=41), arg(arg='text', annotation=Name(id='str', ctx=Load(), lineno=657, col_offset=49, end_lineno=657, end_col_offset=52), lineno=657, col_offset=43, end_lineno=657, end_col_offset=52)]), body=[Expr(value=Constant(value="Return (structured_keys, is_structured).\n\n    Structured if kwargs or 'extra={'...'}' carries keys.\n    Warn if %-format or f-string is used with positional args (unstructured).\n\n    Parameters\n    ----------\n    call : ast.Call\n        AST call node.\n    text : str\n        Source text.\n\n    Returns\n    -------\n    tuple[list[str], bool]\n        (structured_keys, is_structured) tuple.\n    ", lineno=658, col_offset=4, end_lineno=674, end_col_offset=7), lineno=658, col_offset=4, end_lineno=674, end_col_offset=7), AnnAssign(target=Name(id='keys', ctx=Store(), lineno=675, col_offset=4, end_lineno=675, end_col_offset=8), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=675, col_offset=10, end_lineno=675, end_col_offset=14), slice=Name(id='str', ctx=Load(), lineno=675, col_offset=15, end_lineno=675, end_col_offset=18), ctx=Load(), lineno=675, col_offset=10, end_lineno=675, end_col_offset=19), value=List(ctx=Load(), lineno=675, col_offset=22, end_lineno=675, end_col_offset=24), simple=1, lineno=675, col_offset=4, end_lineno=675, end_col_offset=24), For(target=Name(id='kw', ctx=Store(), lineno=677, col_offset=8, end_lineno=677, end_col_offset=10), iter=BoolOp(op=Or(), values=[Attribute(value=Name(id='call', ctx=Load(), lineno=677, col_offset=14, end_lineno=677, end_col_offset=18), attr='keywords', ctx=Load(), lineno=677, col_offset=14, end_lineno=677, end_col_offset=27), List(ctx=Load(), lineno=677, col_offset=31, end_lineno=677, end_col_offset=33)], lineno=677, col_offset=14, end_lineno=677, end_col_offset=33), body=[If(test=BoolOp(op=And(), values=[Attribute(value=Name(id='kw', ctx=Load(), lineno=678, col_offset=11, end_lineno=678, end_col_offset=13), attr='arg', ctx=Load(), lineno=678, col_offset=11, end_lineno=678, end_col_offset=17), Compare(left=Attribute(value=Name(id='kw', ctx=Load(), lineno=678, col_offset=22, end_lineno=678, end_col_offset=24), attr='arg', ctx=Load(), lineno=678, col_offset=22, end_lineno=678, end_col_offset=28), ops=[NotIn()], comparators=[Set(elts=[Constant(value='exc_info', lineno=678, col_offset=37, end_lineno=678, end_col_offset=47), Constant(value='stack_info', lineno=678, col_offset=49, end_lineno=678, end_col_offset=61)], lineno=678, col_offset=36, end_lineno=678, end_col_offset=62)], lineno=678, col_offset=22, end_lineno=678, end_col_offset=62)], lineno=678, col_offset=11, end_lineno=678, end_col_offset=62), body=[Expr(value=Call(func=Attribute(value=Name(id='keys', ctx=Load(), lineno=679, col_offset=12, end_lineno=679, end_col_offset=16), attr='append', ctx=Load(), lineno=679, col_offset=12, end_lineno=679, end_col_offset=23), args=[Attribute(value=Name(id='kw', ctx=Load(), lineno=679, col_offset=24, end_lineno=679, end_col_offset=26), attr='arg', ctx=Load(), lineno=679, col_offset=24, end_lineno=679, end_col_offset=30)], lineno=679, col_offset=12, end_lineno=679, end_col_offset=31), lineno=679, col_offset=12, end_lineno=679, end_col_offset=31)], lineno=678, col_offset=8, end_lineno=679, end_col_offset=31), If(test=Compare(left=Attribute(value=Name(id='kw', ctx=Load(), lineno=680, col_offset=11, end_lineno=680, end_col_offset=13), attr='arg', ctx=Load(), lineno=680, col_offset=11, end_lineno=680, end_col_offset=17), ops=[Eq()], comparators=[Constant(value='extra', lineno=680, col_offset=21, end_lineno=680, end_col_offset=28)], lineno=680, col_offset=11, end_lineno=680, end_col_offset=28), body=[Assign(targets=[Name(id='src', ctx=Store(), lineno=682, col_offset=12, end_lineno=682, end_col_offset=15)], value=BoolOp(op=Or(), values=[Call(func=Attribute(value=Name(id='ast', ctx=Load(), lineno=682, col_offset=18, end_lineno=682, end_col_offset=21), attr='get_source_segment', ctx=Load(), lineno=682, col_offset=18, end_lineno=682, end_col_offset=40), args=[Name(id='text', ctx=Load(), lineno=682, col_offset=41, end_lineno=682, end_col_offset=45), Attribute(value=Name(id='kw', ctx=Load(), lineno=682, col_offset=47, end_lineno=682, end_col_offset=49), attr='value', ctx=Load(), lineno=682, col_offset=47, end_lineno=682, end_col_offset=55)], lineno=682, col_offset=18, end_lineno=682, end_col_offset=56), Constant(value='', lineno=682, col_offset=60, end_lineno=682, end_col_offset=62)], lineno=682, col_offset=18, end_lineno=682, end_col_offset=62), lineno=682, col_offset=12, end_lineno=682, end_col_offset=62), AnnAssign(target=Name(id='extra_keys', ctx=Store(), lineno=683, col_offset=12, end_lineno=683, end_col_offset=22), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=683, col_offset=24, end_lineno=683, end_col_offset=28), slice=Name(id='str', ctx=Load(), lineno=683, col_offset=29, end_lineno=683, end_col_offset=32), ctx=Load(), lineno=683, col_offset=24, end_lineno=683, end_col_offset=33), value=Call(func=Attribute(value=Name(id='re', ctx=Load(), lineno=683, col_offset=36, end_lineno=683, end_col_offset=38), attr='findall', ctx=Load(), lineno=683, col_offset=36, end_lineno=683, end_col_offset=46), args=[Constant(value='[\\"\']([A-Za-z_][A-Za-z0-9_]*)[\\"\']\\s*:', lineno=683, col_offset=47, end_lineno=683, end_col_offset=88), Name(id='src', ctx=Load(), lineno=683, col_offset=90, end_lineno=683, end_col_offset=93)], lineno=683, col_offset=36, end_lineno=683, end_col_offset=94), simple=1, lineno=683, col_offset=12, end_lineno=683, end_col_offset=94), Expr(value=Call(func=Attribute(value=Name(id='keys', ctx=Load(), lineno=684, col_offset=12, end_lineno=684, end_col_offset=16), attr='extend', ctx=Load(), lineno=684, col_offset=12, end_lineno=684, end_col_offset=23), args=[Name(id='extra_keys', ctx=Load(), lineno=684, col_offset=24, end_lineno=684, end_col_offset=34)], lineno=684, col_offset=12, end_lineno=684, end_col_offset=35), lineno=684, col_offset=12, end_lineno=684, end_col_offset=35)], lineno=680, col_offset=8, end_lineno=684, end_col_offset=35)], lineno=677, col_offset=4, end_lineno=684, end_col_offset=35), Assign(targets=[Name(id='unstructured', ctx=Store(), lineno=686, col_offset=4, end_lineno=686, end_col_offset=16)], value=Constant(value=False, lineno=686, col_offset=19, end_lineno=686, end_col_offset=24), lineno=686, col_offset=4, end_lineno=686, end_col_offset=24), If(test=Attribute(value=Name(id='call', ctx=Load(), lineno=687, col_offset=7, end_lineno=687, end_col_offset=11), attr='args', ctx=Load(), lineno=687, col_offset=7, end_lineno=687, end_col_offset=16), body=[Assign(targets=[Name(id='a0', ctx=Store(), lineno=688, col_offset=8, end_lineno=688, end_col_offset=10)], value=Subscript(value=Attribute(value=Name(id='call', ctx=Load(), lineno=688, col_offset=13, end_lineno=688, end_col_offset=17), attr='args', ctx=Load(), lineno=688, col_offset=13, end_lineno=688, end_col_offset=22), slice=Constant(value=0, lineno=688, col_offset=23, end_lineno=688, end_col_offset=24), ctx=Load(), lineno=688, col_offset=13, end_lineno=688, end_col_offset=25), lineno=688, col_offset=8, end_lineno=688, end_col_offset=25), If(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=689, col_offset=11, end_lineno=689, end_col_offset=21), args=[Name(id='a0', ctx=Load(), lineno=689, col_offset=22, end_lineno=689, end_col_offset=24), Attribute(value=Name(id='ast', ctx=Load(), lineno=689, col_offset=26, end_lineno=689, end_col_offset=29), attr='JoinedStr', ctx=Load(), lineno=689, col_offset=26, end_lineno=689, end_col_offset=39)], lineno=689, col_offset=11, end_lineno=689, end_col_offset=40), body=[Assign(targets=[Name(id='unstructured', ctx=Store(), lineno=690, col_offset=12, end_lineno=690, end_col_offset=24)], value=Constant(value=True, lineno=690, col_offset=27, end_lineno=690, end_col_offset=31), lineno=690, col_offset=12, end_lineno=690, end_col_offset=31)], lineno=689, col_offset=8, end_lineno=690, end_col_offset=31), If(test=Compare(left=Call(func=Name(id='len', ctx=Load(), lineno=693, col_offset=11, end_lineno=693, end_col_offset=14), args=[Attribute(value=Name(id='call', ctx=Load(), lineno=693, col_offset=15, end_lineno=693, end_col_offset=19), attr='args', ctx=Load(), lineno=693, col_offset=15, end_lineno=693, end_col_offset=24)], lineno=693, col_offset=11, end_lineno=693, end_col_offset=25), ops=[Gt()], comparators=[Constant(value=1, lineno=693, col_offset=28, end_lineno=693, end_col_offset=29)], lineno=693, col_offset=11, end_lineno=693, end_col_offset=29), body=[Assign(targets=[Name(id='unstructured', ctx=Store(), lineno=694, col_offset=12, end_lineno=694, end_col_offset=24)], value=Constant(value=True, lineno=694, col_offset=27, end_lineno=694, end_col_offset=31), lineno=694, col_offset=12, end_lineno=694, end_col_offset=31)], lineno=693, col_offset=8, end_lineno=694, end_col_offset=31)], lineno=687, col_offset=4, end_lineno=694, end_col_offset=31), Return(value=Tuple(elts=[Call(func=Name(id='_dedupe_strings', ctx=Load(), lineno=695, col_offset=12, end_lineno=695, end_col_offset=27), args=[Name(id='keys', ctx=Load(), lineno=695, col_offset=28, end_lineno=695, end_col_offset=32)], lineno=695, col_offset=12, end_lineno=695, end_col_offset=33), UnaryOp(op=Not(), operand=Name(id='unstructured', ctx=Load(), lineno=695, col_offset=39, end_lineno=695, end_col_offset=51), lineno=695, col_offset=35, end_lineno=695, end_col_offset=51)], ctx=Load(), lineno=695, col_offset=11, end_lineno=695, end_col_offset=52), lineno=695, col_offset=4, end_lineno=695, end_col_offset=52)], returns=Subscript(value=Name(id='tuple', ctx=Load(), lineno=657, col_offset=57, end_lineno=657, end_col_offset=62), slice=Tuple(elts=[Subscript(value=Name(id='list', ctx=Load(), lineno=657, col_offset=63, end_lineno=657, end_col_offset=67), slice=Name(id='str', ctx=Load(), lineno=657, col_offset=68, end_lineno=657, end_col_offset=71), ctx=Load(), lineno=657, col_offset=63, end_lineno=657, end_col_offset=72), Name(id='bool', ctx=Load(), lineno=657, col_offset=74, end_lineno=657, end_col_offset=78)], ctx=Load(), lineno=657, col_offset=63, end_lineno=657, end_col_offset=78), ctx=Load(), lineno=657, col_offset=57, end_lineno=657, end_col_offset=79), lineno=657, col_offset=0, end_lineno=695, end_col_offset=52), FunctionDef(name='_lint_metric', args=arguments(args=[arg(arg='policy', annotation=Name(id='ObservabilityPolicy', ctx=Load(), lineno=701, col_offset=25, end_lineno=701, end_col_offset=44), lineno=701, col_offset=17, end_lineno=701, end_col_offset=44), arg(arg='row', annotation=Name(id='MetricRow', ctx=Load(), lineno=701, col_offset=51, end_lineno=701, end_col_offset=60), lineno=701, col_offset=46, end_lineno=701, end_col_offset=60)]), body=[Expr(value=Constant(value='Lint metric.\n\n    Parameters\n    ----------\n    policy : ObservabilityPolicy\n        Observability policy.\n    row : MetricRow\n        Metric row to lint.\n\n    Returns\n    -------\n    list[LintFinding]\n        List of lint findings.\n    ', lineno=702, col_offset=4, end_lineno=715, end_col_offset=7), lineno=702, col_offset=4, end_lineno=715, end_col_offset=7), AnnAssign(target=Name(id='errs', ctx=Store(), lineno=716, col_offset=4, end_lineno=716, end_col_offset=8), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=716, col_offset=10, end_lineno=716, end_col_offset=14), slice=Name(id='LintFinding', ctx=Load(), lineno=716, col_offset=15, end_lineno=716, end_col_offset=26), ctx=Load(), lineno=716, col_offset=10, end_lineno=716, end_col_offset=27), value=List(ctx=Load(), lineno=716, col_offset=30, end_lineno=716, end_col_offset=32), simple=1, lineno=716, col_offset=4, end_lineno=716, end_col_offset=32), Assign(targets=[Name(id='name_rx', ctx=Store(), lineno=717, col_offset=4, end_lineno=717, end_col_offset=11)], value=Call(func=Attribute(value=Name(id='re', ctx=Load(), lineno=717, col_offset=14, end_lineno=717, end_col_offset=16), attr='compile', ctx=Load(), lineno=717, col_offset=14, end_lineno=717, end_col_offset=24), args=[Attribute(value=Attribute(value=Name(id='policy', ctx=Load(), lineno=717, col_offset=25, end_lineno=717, end_col_offset=31), attr='metric', ctx=Load(), lineno=717, col_offset=25, end_lineno=717, end_col_offset=38), attr='name_regex', ctx=Load(), lineno=717, col_offset=25, end_lineno=717, end_col_offset=49)], lineno=717, col_offset=14, end_lineno=717, end_col_offset=50), lineno=717, col_offset=4, end_lineno=717, end_col_offset=50), If(test=UnaryOp(op=Not(), operand=Call(func=Attribute(value=Name(id='name_rx', ctx=Load(), lineno=718, col_offset=11, end_lineno=718, end_col_offset=18), attr='match', ctx=Load(), lineno=718, col_offset=11, end_lineno=718, end_col_offset=24), args=[BoolOp(op=Or(), values=[Attribute(value=Name(id='row', ctx=Load(), lineno=718, col_offset=25, end_lineno=718, end_col_offset=28), attr='name', ctx=Load(), lineno=718, col_offset=25, end_lineno=718, end_col_offset=33), Constant(value='', lineno=718, col_offset=37, end_lineno=718, end_col_offset=39)], lineno=718, col_offset=25, end_lineno=718, end_col_offset=39)], lineno=718, col_offset=11, end_lineno=718, end_col_offset=40), lineno=718, col_offset=7, end_lineno=718, end_col_offset=40), body=[Expr(value=Call(func=Attribute(value=Name(id='errs', ctx=Load(), lineno=719, col_offset=8, end_lineno=719, end_col_offset=12), attr='append', ctx=Load(), lineno=719, col_offset=8, end_lineno=719, end_col_offset=19), args=[Call(func=Name(id='LintFinding', ctx=Load(), lineno=720, col_offset=12, end_lineno=720, end_col_offset=23), keywords=[keyword(arg='severity', value=Constant(value='error', lineno=721, col_offset=25, end_lineno=721, end_col_offset=32), lineno=721, col_offset=16, end_lineno=721, end_col_offset=32), keyword(arg='kind', value=Constant(value='metric', lineno=722, col_offset=21, end_lineno=722, end_col_offset=29), lineno=722, col_offset=16, end_lineno=722, end_col_offset=29), keyword(arg='name', value=Attribute(value=Name(id='row', ctx=Load(), lineno=723, col_offset=21, end_lineno=723, end_col_offset=24), attr='name', ctx=Load(), lineno=723, col_offset=21, end_lineno=723, end_col_offset=29), lineno=723, col_offset=16, end_lineno=723, end_col_offset=29), keyword(arg='rule', value=Constant(value='name_regex', lineno=724, col_offset=21, end_lineno=724, end_col_offset=33), lineno=724, col_offset=16, end_lineno=724, end_col_offset=33), keyword(arg='message', value=JoinedStr(values=[Constant(value="Metric '", lineno=725, col_offset=26, end_lineno=725, end_col_offset=34), FormattedValue(value=Attribute(value=Name(id='row', ctx=Load(), lineno=725, col_offset=35, end_lineno=725, end_col_offset=38), attr='name', ctx=Load(), lineno=725, col_offset=35, end_lineno=725, end_col_offset=43), conversion=-1, lineno=725, col_offset=34, end_lineno=725, end_col_offset=44), Constant(value="' must match regex ", lineno=725, col_offset=44, end_lineno=725, end_col_offset=63), FormattedValue(value=Attribute(value=Name(id='name_rx', ctx=Load(), lineno=725, col_offset=64, end_lineno=725, end_col_offset=71), attr='pattern', ctx=Load(), lineno=725, col_offset=64, end_lineno=725, end_col_offset=79), conversion=-1, lineno=725, col_offset=63, end_lineno=725, end_col_offset=80)], lineno=725, col_offset=24, end_lineno=725, end_col_offset=81), lineno=725, col_offset=16, end_lineno=725, end_col_offset=81), keyword(arg='file', value=Attribute(value=Name(id='row', ctx=Load(), lineno=726, col_offset=21, end_lineno=726, end_col_offset=24), attr='file', ctx=Load(), lineno=726, col_offset=21, end_lineno=726, end_col_offset=29), lineno=726, col_offset=16, end_lineno=726, end_col_offset=29), keyword(arg='lineno', value=Attribute(value=Name(id='row', ctx=Load(), lineno=727, col_offset=23, end_lineno=727, end_col_offset=26), attr='lineno', ctx=Load(), lineno=727, col_offset=23, end_lineno=727, end_col_offset=33), lineno=727, col_offset=16, end_lineno=727, end_col_offset=33)], lineno=720, col_offset=12, end_lineno=728, end_col_offset=13)], lineno=719, col_offset=8, end_lineno=729, end_col_offset=9), lineno=719, col_offset=8, end_lineno=729, end_col_offset=9)], lineno=718, col_offset=4, end_lineno=729, end_col_offset=9), If(test=BoolOp(op=And(), values=[Attribute(value=Attribute(value=Name(id='policy', ctx=Load(), lineno=730, col_offset=7, end_lineno=730, end_col_offset=13), attr='metric', ctx=Load(), lineno=730, col_offset=7, end_lineno=730, end_col_offset=20), attr='require_unit_suffix', ctx=Load(), lineno=730, col_offset=7, end_lineno=730, end_col_offset=40), Compare(left=Attribute(value=Name(id='row', ctx=Load(), lineno=730, col_offset=45, end_lineno=730, end_col_offset=48), attr='type', ctx=Load(), lineno=730, col_offset=45, end_lineno=730, end_col_offset=53), ops=[In()], comparators=[Set(elts=[Constant(value='counter', lineno=731, col_offset=8, end_lineno=731, end_col_offset=17), Constant(value='gauge', lineno=732, col_offset=8, end_lineno=732, end_col_offset=15), Constant(value='histogram', lineno=733, col_offset=8, end_lineno=733, end_col_offset=19), Constant(value='summary', lineno=734, col_offset=8, end_lineno=734, end_col_offset=17)], lineno=730, col_offset=57, end_lineno=735, end_col_offset=5)], lineno=730, col_offset=45, end_lineno=735, end_col_offset=5)], lineno=730, col_offset=7, end_lineno=735, end_col_offset=5), body=[Assign(targets=[Name(id='unit', ctx=Store(), lineno=736, col_offset=8, end_lineno=736, end_col_offset=12)], value=Call(func=Name(id='_infer_unit_from_name', ctx=Load(), lineno=736, col_offset=15, end_lineno=736, end_col_offset=36), args=[Attribute(value=Name(id='row', ctx=Load(), lineno=736, col_offset=37, end_lineno=736, end_col_offset=40), attr='name', ctx=Load(), lineno=736, col_offset=37, end_lineno=736, end_col_offset=45)], lineno=736, col_offset=15, end_lineno=736, end_col_offset=46), lineno=736, col_offset=8, end_lineno=736, end_col_offset=46), If(test=BoolOp(op=And(), values=[Compare(left=Name(id='unit', ctx=Load(), lineno=737, col_offset=11, end_lineno=737, end_col_offset=15), ops=[Is()], comparators=[Constant(value=None, lineno=737, col_offset=19, end_lineno=737, end_col_offset=23)], lineno=737, col_offset=11, end_lineno=737, end_col_offset=23), Compare(left=Attribute(value=Name(id='row', ctx=Load(), lineno=737, col_offset=28, end_lineno=737, end_col_offset=31), attr='type', ctx=Load(), lineno=737, col_offset=28, end_lineno=737, end_col_offset=36), ops=[NotEq()], comparators=[Constant(value='counter', lineno=737, col_offset=40, end_lineno=737, end_col_offset=49)], lineno=737, col_offset=28, end_lineno=737, end_col_offset=49)], lineno=737, col_offset=11, end_lineno=737, end_col_offset=49), body=[Expr(value=Call(func=Attribute(value=Name(id='errs', ctx=Load(), lineno=738, col_offset=12, end_lineno=738, end_col_offset=16), attr='append', ctx=Load(), lineno=738, col_offset=12, end_lineno=738, end_col_offset=23), args=[Call(func=Name(id='LintFinding', ctx=Load(), lineno=739, col_offset=16, end_lineno=739, end_col_offset=27), keywords=[keyword(arg='severity', value=Constant(value='warning', lineno=740, col_offset=29, end_lineno=740, end_col_offset=38), lineno=740, col_offset=20, end_lineno=740, end_col_offset=38), keyword(arg='kind', value=Constant(value='metric', lineno=741, col_offset=25, end_lineno=741, end_col_offset=33), lineno=741, col_offset=20, end_lineno=741, end_col_offset=33), keyword(arg='name', value=Attribute(value=Name(id='row', ctx=Load(), lineno=742, col_offset=25, end_lineno=742, end_col_offset=28), attr='name', ctx=Load(), lineno=742, col_offset=25, end_lineno=742, end_col_offset=33), lineno=742, col_offset=20, end_lineno=742, end_col_offset=33), keyword(arg='rule', value=Constant(value='unit_suffix', lineno=743, col_offset=25, end_lineno=743, end_col_offset=38), lineno=743, col_offset=20, end_lineno=743, end_col_offset=38), keyword(arg='message', value=Constant(value='Metric should include base unit suffix (e.g., _seconds, _bytes). See Prometheus naming.', lineno=745, col_offset=24, end_lineno=746, end_col_offset=44), lineno=744, col_offset=20, end_lineno=747, end_col_offset=21), keyword(arg='file', value=Attribute(value=Name(id='row', ctx=Load(), lineno=748, col_offset=25, end_lineno=748, end_col_offset=28), attr='file', ctx=Load(), lineno=748, col_offset=25, end_lineno=748, end_col_offset=33), lineno=748, col_offset=20, end_lineno=748, end_col_offset=33), keyword(arg='lineno', value=Attribute(value=Name(id='row', ctx=Load(), lineno=749, col_offset=27, end_lineno=749, end_col_offset=30), attr='lineno', ctx=Load(), lineno=749, col_offset=27, end_lineno=749, end_col_offset=37), lineno=749, col_offset=20, end_lineno=749, end_col_offset=37)], lineno=739, col_offset=16, end_lineno=750, end_col_offset=17)], lineno=738, col_offset=12, end_lineno=751, end_col_offset=13), lineno=738, col_offset=12, end_lineno=751, end_col_offset=13)], lineno=737, col_offset=8, end_lineno=751, end_col_offset=13), If(test=BoolOp(op=And(), values=[Compare(left=Attribute(value=Name(id='row', ctx=Load(), lineno=752, col_offset=11, end_lineno=752, end_col_offset=14), attr='type', ctx=Load(), lineno=752, col_offset=11, end_lineno=752, end_col_offset=19), ops=[Eq()], comparators=[Constant(value='counter', lineno=752, col_offset=23, end_lineno=752, end_col_offset=32)], lineno=752, col_offset=11, end_lineno=752, end_col_offset=32), UnaryOp(op=Not(), operand=Call(func=Attribute(value=Attribute(value=Name(id='row', ctx=Load(), lineno=752, col_offset=41, end_lineno=752, end_col_offset=44), attr='name', ctx=Load(), lineno=752, col_offset=41, end_lineno=752, end_col_offset=49), attr='endswith', ctx=Load(), lineno=752, col_offset=41, end_lineno=752, end_col_offset=58), args=[Attribute(value=Attribute(value=Name(id='policy', ctx=Load(), lineno=752, col_offset=59, end_lineno=752, end_col_offset=65), attr='metric', ctx=Load(), lineno=752, col_offset=59, end_lineno=752, end_col_offset=72), attr='counter_suffix', ctx=Load(), lineno=752, col_offset=59, end_lineno=752, end_col_offset=87)], lineno=752, col_offset=41, end_lineno=752, end_col_offset=88), lineno=752, col_offset=37, end_lineno=752, end_col_offset=88)], lineno=752, col_offset=11, end_lineno=752, end_col_offset=88), body=[Expr(value=Call(func=Attribute(value=Name(id='errs', ctx=Load(), lineno=753, col_offset=12, end_lineno=753, end_col_offset=16), attr='append', ctx=Load(), lineno=753, col_offset=12, end_lineno=753, end_col_offset=23), args=[Call(func=Name(id='LintFinding', ctx=Load(), lineno=754, col_offset=16, end_lineno=754, end_col_offset=27), keywords=[keyword(arg='severity', value=Constant(value='error', lineno=755, col_offset=29, end_lineno=755, end_col_offset=36), lineno=755, col_offset=20, end_lineno=755, end_col_offset=36), keyword(arg='kind', value=Constant(value='metric', lineno=756, col_offset=25, end_lineno=756, end_col_offset=33), lineno=756, col_offset=20, end_lineno=756, end_col_offset=33), keyword(arg='name', value=Attribute(value=Name(id='row', ctx=Load(), lineno=757, col_offset=25, end_lineno=757, end_col_offset=28), attr='name', ctx=Load(), lineno=757, col_offset=25, end_lineno=757, end_col_offset=33), lineno=757, col_offset=20, end_lineno=757, end_col_offset=33), keyword(arg='rule', value=Constant(value='counter_total', lineno=758, col_offset=25, end_lineno=758, end_col_offset=40), lineno=758, col_offset=20, end_lineno=758, end_col_offset=40), keyword(arg='message', value=Constant(value="Counter names should end with '_total' in Prometheus exposition format.", lineno=759, col_offset=28, end_lineno=759, end_col_offset=101), lineno=759, col_offset=20, end_lineno=759, end_col_offset=101), keyword(arg='file', value=Attribute(value=Name(id='row', ctx=Load(), lineno=760, col_offset=25, end_lineno=760, end_col_offset=28), attr='file', ctx=Load(), lineno=760, col_offset=25, end_lineno=760, end_col_offset=33), lineno=760, col_offset=20, end_lineno=760, end_col_offset=33), keyword(arg='lineno', value=Attribute(value=Name(id='row', ctx=Load(), lineno=761, col_offset=27, end_lineno=761, end_col_offset=30), attr='lineno', ctx=Load(), lineno=761, col_offset=27, end_lineno=761, end_col_offset=37), lineno=761, col_offset=20, end_lineno=761, end_col_offset=37)], lineno=754, col_offset=16, end_lineno=762, end_col_offset=17)], lineno=753, col_offset=12, end_lineno=763, end_col_offset=13), lineno=753, col_offset=12, end_lineno=763, end_col_offset=13)], lineno=752, col_offset=8, end_lineno=763, end_col_offset=13)], lineno=730, col_offset=4, end_lineno=763, end_col_offset=13), Assign(targets=[Name(id='reserved', ctx=Store(), lineno=765, col_offset=4, end_lineno=765, end_col_offset=12)], value=Call(func=Name(id='set', ctx=Load(), lineno=765, col_offset=15, end_lineno=765, end_col_offset=18), args=[Attribute(value=Attribute(value=Name(id='policy', ctx=Load(), lineno=765, col_offset=19, end_lineno=765, end_col_offset=25), attr='labels', ctx=Load(), lineno=765, col_offset=19, end_lineno=765, end_col_offset=32), attr='reserved', ctx=Load(), lineno=765, col_offset=19, end_lineno=765, end_col_offset=41)], lineno=765, col_offset=15, end_lineno=765, end_col_offset=42), lineno=765, col_offset=4, end_lineno=765, end_col_offset=42), Assign(targets=[Name(id='hc_rx', ctx=Store(), lineno=766, col_offset=4, end_lineno=766, end_col_offset=9)], value=ListComp(elt=Call(func=Attribute(value=Name(id='re', ctx=Load(), lineno=766, col_offset=13, end_lineno=766, end_col_offset=15), attr='compile', ctx=Load(), lineno=766, col_offset=13, end_lineno=766, end_col_offset=23), args=[Name(id='pat', ctx=Load(), lineno=766, col_offset=24, end_lineno=766, end_col_offset=27), Attribute(value=Name(id='re', ctx=Load(), lineno=766, col_offset=29, end_lineno=766, end_col_offset=31), attr='IGNORECASE', ctx=Load(), lineno=766, col_offset=29, end_lineno=766, end_col_offset=42)], lineno=766, col_offset=13, end_lineno=766, end_col_offset=43), generators=[comprehension(target=Name(id='pat', ctx=Store(), lineno=766, col_offset=48, end_lineno=766, end_col_offset=51), iter=Attribute(value=Attribute(value=Name(id='policy', ctx=Load(), lineno=766, col_offset=55, end_lineno=766, end_col_offset=61), attr='labels', ctx=Load(), lineno=766, col_offset=55, end_lineno=766, end_col_offset=68), attr='high_cardinality_patterns', ctx=Load(), lineno=766, col_offset=55, end_lineno=766, end_col_offset=94), is_async=0)], lineno=766, col_offset=12, end_lineno=766, end_col_offset=95), lineno=766, col_offset=4, end_lineno=766, end_col_offset=95), For(target=Name(id='lab', ctx=Store(), lineno=767, col_offset=8, end_lineno=767, end_col_offset=11), iter=BoolOp(op=Or(), values=[Attribute(value=Name(id='row', ctx=Load(), lineno=767, col_offset=15, end_lineno=767, end_col_offset=18), attr='labels', ctx=Load(), lineno=767, col_offset=15, end_lineno=767, end_col_offset=25), List(ctx=Load(), lineno=767, col_offset=29, end_lineno=767, end_col_offset=31)], lineno=767, col_offset=15, end_lineno=767, end_col_offset=31), body=[If(test=Compare(left=Name(id='lab', ctx=Load(), lineno=768, col_offset=11, end_lineno=768, end_col_offset=14), ops=[In()], comparators=[Name(id='reserved', ctx=Load(), lineno=768, col_offset=18, end_lineno=768, end_col_offset=26)], lineno=768, col_offset=11, end_lineno=768, end_col_offset=26), body=[Expr(value=Call(func=Attribute(value=Name(id='errs', ctx=Load(), lineno=769, col_offset=12, end_lineno=769, end_col_offset=16), attr='append', ctx=Load(), lineno=769, col_offset=12, end_lineno=769, end_col_offset=23), args=[Call(func=Name(id='LintFinding', ctx=Load(), lineno=770, col_offset=16, end_lineno=770, end_col_offset=27), keywords=[keyword(arg='severity', value=Constant(value='error', lineno=771, col_offset=29, end_lineno=771, end_col_offset=36), lineno=771, col_offset=20, end_lineno=771, end_col_offset=36), keyword(arg='kind', value=Constant(value='metric', lineno=772, col_offset=25, end_lineno=772, end_col_offset=33), lineno=772, col_offset=20, end_lineno=772, end_col_offset=33), keyword(arg='name', value=Attribute(value=Name(id='row', ctx=Load(), lineno=773, col_offset=25, end_lineno=773, end_col_offset=28), attr='name', ctx=Load(), lineno=773, col_offset=25, end_lineno=773, end_col_offset=33), lineno=773, col_offset=20, end_lineno=773, end_col_offset=33), keyword(arg='rule', value=Constant(value='reserved_label', lineno=774, col_offset=25, end_lineno=774, end_col_offset=41), lineno=774, col_offset=20, end_lineno=774, end_col_offset=41), keyword(arg='message', value=JoinedStr(values=[Constant(value="Label '", lineno=775, col_offset=30, end_lineno=775, end_col_offset=37), FormattedValue(value=Name(id='lab', ctx=Load(), lineno=775, col_offset=38, end_lineno=775, end_col_offset=41), conversion=-1, lineno=775, col_offset=37, end_lineno=775, end_col_offset=42), Constant(value="' is reserved (Prometheus/internal). Avoid defining it in instrumentation.", lineno=775, col_offset=42, end_lineno=775, end_col_offset=116)], lineno=775, col_offset=28, end_lineno=775, end_col_offset=117), lineno=775, col_offset=20, end_lineno=775, end_col_offset=117), keyword(arg='file', value=Attribute(value=Name(id='row', ctx=Load(), lineno=776, col_offset=25, end_lineno=776, end_col_offset=28), attr='file', ctx=Load(), lineno=776, col_offset=25, end_lineno=776, end_col_offset=33), lineno=776, col_offset=20, end_lineno=776, end_col_offset=33), keyword(arg='lineno', value=Attribute(value=Name(id='row', ctx=Load(), lineno=777, col_offset=27, end_lineno=777, end_col_offset=30), attr='lineno', ctx=Load(), lineno=777, col_offset=27, end_lineno=777, end_col_offset=37), lineno=777, col_offset=20, end_lineno=777, end_col_offset=37)], lineno=770, col_offset=16, end_lineno=778, end_col_offset=17)], lineno=769, col_offset=12, end_lineno=779, end_col_offset=13), lineno=769, col_offset=12, end_lineno=779, end_col_offset=13)], lineno=768, col_offset=8, end_lineno=779, end_col_offset=13), If(test=Call(func=Name(id='any', ctx=Load(), lineno=780, col_offset=11, end_lineno=780, end_col_offset=14), args=[GeneratorExp(elt=Call(func=Attribute(value=Name(id='rx', ctx=Load(), lineno=780, col_offset=15, end_lineno=780, end_col_offset=17), attr='search', ctx=Load(), lineno=780, col_offset=15, end_lineno=780, end_col_offset=24), args=[Name(id='lab', ctx=Load(), lineno=780, col_offset=25, end_lineno=780, end_col_offset=28)], lineno=780, col_offset=15, end_lineno=780, end_col_offset=29), generators=[comprehension(target=Name(id='rx', ctx=Store(), lineno=780, col_offset=34, end_lineno=780, end_col_offset=36), iter=Name(id='hc_rx', ctx=Load(), lineno=780, col_offset=40, end_lineno=780, end_col_offset=45), is_async=0)], lineno=780, col_offset=14, end_lineno=780, end_col_offset=46)], lineno=780, col_offset=11, end_lineno=780, end_col_offset=46), body=[Expr(value=Call(func=Attribute(value=Name(id='errs', ctx=Load(), lineno=781, col_offset=12, end_lineno=781, end_col_offset=16), attr='append', ctx=Load(), lineno=781, col_offset=12, end_lineno=781, end_col_offset=23), args=[Call(func=Name(id='LintFinding', ctx=Load(), lineno=782, col_offset=16, end_lineno=782, end_col_offset=27), keywords=[keyword(arg='severity', value=Constant(value='warning', lineno=783, col_offset=29, end_lineno=783, end_col_offset=38), lineno=783, col_offset=20, end_lineno=783, end_col_offset=38), keyword(arg='kind', value=Constant(value='metric', lineno=784, col_offset=25, end_lineno=784, end_col_offset=33), lineno=784, col_offset=20, end_lineno=784, end_col_offset=33), keyword(arg='name', value=Attribute(value=Name(id='row', ctx=Load(), lineno=785, col_offset=25, end_lineno=785, end_col_offset=28), attr='name', ctx=Load(), lineno=785, col_offset=25, end_lineno=785, end_col_offset=33), lineno=785, col_offset=20, end_lineno=785, end_col_offset=33), keyword(arg='rule', value=Constant(value='high_cardinality_label', lineno=786, col_offset=25, end_lineno=786, end_col_offset=49), lineno=786, col_offset=20, end_lineno=786, end_col_offset=49), keyword(arg='message', value=JoinedStr(values=[Constant(value="Label '", lineno=788, col_offset=26, end_lineno=788, end_col_offset=33), FormattedValue(value=Name(id='lab', ctx=Load(), lineno=788, col_offset=34, end_lineno=788, end_col_offset=37), conversion=-1, lineno=788, col_offset=33, end_lineno=788, end_col_offset=38), Constant(value="' frequently causes cardinality explosion; reconsider (user_id/request_id/url/path).", lineno=788, col_offset=38, end_lineno=789, end_col_offset=70)], lineno=788, col_offset=24, end_lineno=789, end_col_offset=70), lineno=787, col_offset=20, end_lineno=790, end_col_offset=21), keyword(arg='file', value=Attribute(value=Name(id='row', ctx=Load(), lineno=791, col_offset=25, end_lineno=791, end_col_offset=28), attr='file', ctx=Load(), lineno=791, col_offset=25, end_lineno=791, end_col_offset=33), lineno=791, col_offset=20, end_lineno=791, end_col_offset=33), keyword(arg='lineno', value=Attribute(value=Name(id='row', ctx=Load(), lineno=792, col_offset=27, end_lineno=792, end_col_offset=30), attr='lineno', ctx=Load(), lineno=792, col_offset=27, end_lineno=792, end_col_offset=37), lineno=792, col_offset=20, end_lineno=792, end_col_offset=37)], lineno=782, col_offset=16, end_lineno=793, end_col_offset=17)], lineno=781, col_offset=12, end_lineno=794, end_col_offset=13), lineno=781, col_offset=12, end_lineno=794, end_col_offset=13)], lineno=780, col_offset=8, end_lineno=794, end_col_offset=13)], lineno=767, col_offset=4, end_lineno=794, end_col_offset=13), Return(value=Name(id='errs', ctx=Load(), lineno=795, col_offset=11, end_lineno=795, end_col_offset=15), lineno=795, col_offset=4, end_lineno=795, end_col_offset=15)], returns=Subscript(value=Name(id='list', ctx=Load(), lineno=701, col_offset=65, end_lineno=701, end_col_offset=69), slice=Name(id='LintFinding', ctx=Load(), lineno=701, col_offset=70, end_lineno=701, end_col_offset=81), ctx=Load(), lineno=701, col_offset=65, end_lineno=701, end_col_offset=82), lineno=701, col_offset=0, end_lineno=795, end_col_offset=15), FunctionDef(name='_lint_log', args=arguments(args=[arg(arg='policy', annotation=Name(id='ObservabilityPolicy', ctx=Load(), lineno=798, col_offset=22, end_lineno=798, end_col_offset=41), lineno=798, col_offset=14, end_lineno=798, end_col_offset=41), arg(arg='row', annotation=Name(id='LogRow', ctx=Load(), lineno=798, col_offset=48, end_lineno=798, end_col_offset=54), lineno=798, col_offset=43, end_lineno=798, end_col_offset=54)]), body=[Expr(value=Constant(value='Lint log.\n\n    Parameters\n    ----------\n    policy : ObservabilityPolicy\n        Observability policy.\n    row : LogRow\n        Log row to lint.\n\n    Returns\n    -------\n    list[LintFinding]\n        List of lint findings.\n    ', lineno=799, col_offset=4, end_lineno=812, end_col_offset=7), lineno=799, col_offset=4, end_lineno=812, end_col_offset=7), AnnAssign(target=Name(id='errs', ctx=Store(), lineno=813, col_offset=4, end_lineno=813, end_col_offset=8), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=813, col_offset=10, end_lineno=813, end_col_offset=14), slice=Name(id='LintFinding', ctx=Load(), lineno=813, col_offset=15, end_lineno=813, end_col_offset=26), ctx=Load(), lineno=813, col_offset=10, end_lineno=813, end_col_offset=27), value=List(ctx=Load(), lineno=813, col_offset=30, end_lineno=813, end_col_offset=32), simple=1, lineno=813, col_offset=4, end_lineno=813, end_col_offset=32), If(test=BoolOp(op=And(), values=[Attribute(value=Attribute(value=Name(id='policy', ctx=Load(), lineno=814, col_offset=7, end_lineno=814, end_col_offset=13), attr='logs', ctx=Load(), lineno=814, col_offset=7, end_lineno=814, end_col_offset=18), attr='require_structured', ctx=Load(), lineno=814, col_offset=7, end_lineno=814, end_col_offset=37), UnaryOp(op=Not(), operand=Attribute(value=Name(id='row', ctx=Load(), lineno=814, col_offset=46, end_lineno=814, end_col_offset=49), attr='structured_keys', ctx=Load(), lineno=814, col_offset=46, end_lineno=814, end_col_offset=65), lineno=814, col_offset=42, end_lineno=814, end_col_offset=65)], lineno=814, col_offset=7, end_lineno=814, end_col_offset=65), body=[Expr(value=Call(func=Attribute(value=Name(id='errs', ctx=Load(), lineno=815, col_offset=8, end_lineno=815, end_col_offset=12), attr='append', ctx=Load(), lineno=815, col_offset=8, end_lineno=815, end_col_offset=19), args=[Call(func=Name(id='LintFinding', ctx=Load(), lineno=816, col_offset=12, end_lineno=816, end_col_offset=23), keywords=[keyword(arg='severity', value=Constant(value='warning', lineno=817, col_offset=25, end_lineno=817, end_col_offset=34), lineno=817, col_offset=16, end_lineno=817, end_col_offset=34), keyword(arg='kind', value=Constant(value='log', lineno=818, col_offset=21, end_lineno=818, end_col_offset=26), lineno=818, col_offset=16, end_lineno=818, end_col_offset=26), keyword(arg='name', value=Subscript(value=Attribute(value=Name(id='row', ctx=Load(), lineno=819, col_offset=21, end_lineno=819, end_col_offset=24), attr='message_template', ctx=Load(), lineno=819, col_offset=21, end_lineno=819, end_col_offset=41), slice=Slice(upper=Constant(value=50, lineno=819, col_offset=43, end_lineno=819, end_col_offset=45), lineno=819, col_offset=42, end_lineno=819, end_col_offset=45), ctx=Load(), lineno=819, col_offset=21, end_lineno=819, end_col_offset=46), lineno=819, col_offset=16, end_lineno=819, end_col_offset=46), keyword(arg='rule', value=Constant(value='structured_logging', lineno=820, col_offset=21, end_lineno=820, end_col_offset=41), lineno=820, col_offset=16, end_lineno=820, end_col_offset=41), keyword(arg='message', value=Constant(value='Prefer structured logging (key=value/extra=) over %-format or f-strings.', lineno=821, col_offset=24, end_lineno=821, end_col_offset=101), lineno=821, col_offset=16, end_lineno=821, end_col_offset=101), keyword(arg='file', value=Attribute(value=Name(id='row', ctx=Load(), lineno=822, col_offset=21, end_lineno=822, end_col_offset=24), attr='file', ctx=Load(), lineno=822, col_offset=21, end_lineno=822, end_col_offset=29), lineno=822, col_offset=16, end_lineno=822, end_col_offset=29), keyword(arg='lineno', value=Attribute(value=Name(id='row', ctx=Load(), lineno=823, col_offset=23, end_lineno=823, end_col_offset=26), attr='lineno', ctx=Load(), lineno=823, col_offset=23, end_lineno=823, end_col_offset=33), lineno=823, col_offset=16, end_lineno=823, end_col_offset=33)], lineno=816, col_offset=12, end_lineno=824, end_col_offset=13)], lineno=815, col_offset=8, end_lineno=825, end_col_offset=9), lineno=815, col_offset=8, end_lineno=825, end_col_offset=9)], lineno=814, col_offset=4, end_lineno=825, end_col_offset=9), Return(value=Name(id='errs', ctx=Load(), lineno=826, col_offset=11, end_lineno=826, end_col_offset=15), lineno=826, col_offset=4, end_lineno=826, end_col_offset=15)], returns=Subscript(value=Name(id='list', ctx=Load(), lineno=798, col_offset=59, end_lineno=798, end_col_offset=63), slice=Name(id='LintFinding', ctx=Load(), lineno=798, col_offset=64, end_lineno=798, end_col_offset=75), ctx=Load(), lineno=798, col_offset=59, end_lineno=798, end_col_offset=76), lineno=798, col_offset=0, end_lineno=826, end_col_offset=15), FunctionDef(name='_lint_trace', args=arguments(args=[arg(arg='policy', annotation=Name(id='ObservabilityPolicy', ctx=Load(), lineno=829, col_offset=24, end_lineno=829, end_col_offset=43), lineno=829, col_offset=16, end_lineno=829, end_col_offset=43), arg(arg='row', annotation=Name(id='TraceRow', ctx=Load(), lineno=829, col_offset=50, end_lineno=829, end_col_offset=58), lineno=829, col_offset=45, end_lineno=829, end_col_offset=58)]), body=[Expr(value=Constant(value='Lint trace.\n\n    Parameters\n    ----------\n    policy : ObservabilityPolicy\n        Observability policy.\n    row : TraceRow\n        Trace row to lint.\n\n    Returns\n    -------\n    list[LintFinding]\n        List of lint findings.\n    ', lineno=830, col_offset=4, end_lineno=843, end_col_offset=7), lineno=830, col_offset=4, end_lineno=843, end_col_offset=7), AnnAssign(target=Name(id='errs', ctx=Store(), lineno=844, col_offset=4, end_lineno=844, end_col_offset=8), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=844, col_offset=10, end_lineno=844, end_col_offset=14), slice=Name(id='LintFinding', ctx=Load(), lineno=844, col_offset=15, end_lineno=844, end_col_offset=26), ctx=Load(), lineno=844, col_offset=10, end_lineno=844, end_col_offset=27), value=List(ctx=Load(), lineno=844, col_offset=30, end_lineno=844, end_col_offset=32), simple=1, lineno=844, col_offset=4, end_lineno=844, end_col_offset=32), Assign(targets=[Name(id='rx', ctx=Store(), lineno=845, col_offset=4, end_lineno=845, end_col_offset=6)], value=Call(func=Attribute(value=Name(id='re', ctx=Load(), lineno=845, col_offset=9, end_lineno=845, end_col_offset=11), attr='compile', ctx=Load(), lineno=845, col_offset=9, end_lineno=845, end_col_offset=19), args=[Attribute(value=Attribute(value=Name(id='policy', ctx=Load(), lineno=845, col_offset=20, end_lineno=845, end_col_offset=26), attr='traces', ctx=Load(), lineno=845, col_offset=20, end_lineno=845, end_col_offset=33), attr='name_regex', ctx=Load(), lineno=845, col_offset=20, end_lineno=845, end_col_offset=44)], lineno=845, col_offset=9, end_lineno=845, end_col_offset=45), lineno=845, col_offset=4, end_lineno=845, end_col_offset=45), If(test=BoolOp(op=And(), values=[Attribute(value=Name(id='row', ctx=Load(), lineno=846, col_offset=7, end_lineno=846, end_col_offset=10), attr='span_name', ctx=Load(), lineno=846, col_offset=7, end_lineno=846, end_col_offset=20), UnaryOp(op=Not(), operand=Call(func=Attribute(value=Name(id='rx', ctx=Load(), lineno=846, col_offset=29, end_lineno=846, end_col_offset=31), attr='match', ctx=Load(), lineno=846, col_offset=29, end_lineno=846, end_col_offset=37), args=[Attribute(value=Name(id='row', ctx=Load(), lineno=846, col_offset=38, end_lineno=846, end_col_offset=41), attr='span_name', ctx=Load(), lineno=846, col_offset=38, end_lineno=846, end_col_offset=51)], lineno=846, col_offset=29, end_lineno=846, end_col_offset=52), lineno=846, col_offset=25, end_lineno=846, end_col_offset=52)], lineno=846, col_offset=7, end_lineno=846, end_col_offset=52), body=[Expr(value=Call(func=Attribute(value=Name(id='errs', ctx=Load(), lineno=847, col_offset=8, end_lineno=847, end_col_offset=12), attr='append', ctx=Load(), lineno=847, col_offset=8, end_lineno=847, end_col_offset=19), args=[Call(func=Name(id='LintFinding', ctx=Load(), lineno=848, col_offset=12, end_lineno=848, end_col_offset=23), keywords=[keyword(arg='severity', value=Constant(value='warning', lineno=849, col_offset=25, end_lineno=849, end_col_offset=34), lineno=849, col_offset=16, end_lineno=849, end_col_offset=34), keyword(arg='kind', value=Constant(value='trace', lineno=850, col_offset=21, end_lineno=850, end_col_offset=28), lineno=850, col_offset=16, end_lineno=850, end_col_offset=28), keyword(arg='name', value=Attribute(value=Name(id='row', ctx=Load(), lineno=851, col_offset=21, end_lineno=851, end_col_offset=24), attr='span_name', ctx=Load(), lineno=851, col_offset=21, end_lineno=851, end_col_offset=34), lineno=851, col_offset=16, end_lineno=851, end_col_offset=34), keyword(arg='rule', value=Constant(value='span_name', lineno=852, col_offset=21, end_lineno=852, end_col_offset=32), lineno=852, col_offset=16, end_lineno=852, end_col_offset=32), keyword(arg='message', value=JoinedStr(values=[Constant(value='Span name should match regex ', lineno=853, col_offset=26, end_lineno=853, end_col_offset=55), FormattedValue(value=Attribute(value=Name(id='rx', ctx=Load(), lineno=853, col_offset=56, end_lineno=853, end_col_offset=58), attr='pattern', ctx=Load(), lineno=853, col_offset=56, end_lineno=853, end_col_offset=66), conversion=-1, lineno=853, col_offset=55, end_lineno=853, end_col_offset=67), Constant(value=' (OTel naming).', lineno=853, col_offset=67, end_lineno=853, end_col_offset=82)], lineno=853, col_offset=24, end_lineno=853, end_col_offset=83), lineno=853, col_offset=16, end_lineno=853, end_col_offset=83), keyword(arg='file', value=Attribute(value=Name(id='row', ctx=Load(), lineno=854, col_offset=21, end_lineno=854, end_col_offset=24), attr='file', ctx=Load(), lineno=854, col_offset=21, end_lineno=854, end_col_offset=29), lineno=854, col_offset=16, end_lineno=854, end_col_offset=29), keyword(arg='lineno', value=Attribute(value=Name(id='row', ctx=Load(), lineno=855, col_offset=23, end_lineno=855, end_col_offset=26), attr='lineno', ctx=Load(), lineno=855, col_offset=23, end_lineno=855, end_col_offset=33), lineno=855, col_offset=16, end_lineno=855, end_col_offset=33)], lineno=848, col_offset=12, end_lineno=856, end_col_offset=13)], lineno=847, col_offset=8, end_lineno=857, end_col_offset=9), lineno=847, col_offset=8, end_lineno=857, end_col_offset=9)], lineno=846, col_offset=4, end_lineno=857, end_col_offset=9), Return(value=Name(id='errs', ctx=Load(), lineno=858, col_offset=11, end_lineno=858, end_col_offset=15), lineno=858, col_offset=4, end_lineno=858, end_col_offset=15)], returns=Subscript(value=Name(id='list', ctx=Load(), lineno=829, col_offset=63, end_lineno=829, end_col_offset=67), slice=Name(id='LintFinding', ctx=Load(), lineno=829, col_offset=68, end_lineno=829, end_col_offset=79), ctx=Load(), lineno=829, col_offset=63, end_lineno=829, end_col_offset=80), lineno=829, col_offset=0, end_lineno=858, end_col_offset=15), FunctionDef(name='read_ast', args=arguments(args=[arg(arg='path', annotation=Name(id='Path', ctx=Load(), lineno=864, col_offset=19, end_lineno=864, end_col_offset=23), lineno=864, col_offset=13, end_lineno=864, end_col_offset=23)]), body=[Expr(value=Constant(value='Compute read ast.\n\n    Carry out the read ast operation for the surrounding component. Generated documentation highlights how this helper collaborates with neighbouring utilities. Callers rely on the routine to remain stable across releases.\n\n    Parameters\n    ----------\n    path : Path\n        Description for ``path``.\n\n    Returns\n    -------\n    tuple[str, ast.AST | None]\n        Description of return value.\n\n    Examples\n    --------\n    >>> from tools.docs.scan_observability import read_ast\n    >>> result = read_ast(...)\n    >>> result  # doctest: +ELLIPSIS\n    ', lineno=865, col_offset=4, end_lineno=884, end_col_offset=7), lineno=865, col_offset=4, end_lineno=884, end_col_offset=7), Try(body=[Assign(targets=[Name(id='text', ctx=Store(), lineno=886, col_offset=8, end_lineno=886, end_col_offset=12)], value=Call(func=Attribute(value=Name(id='path', ctx=Load(), lineno=886, col_offset=15, end_lineno=886, end_col_offset=19), attr='read_text', ctx=Load(), lineno=886, col_offset=15, end_lineno=886, end_col_offset=29), keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=886, col_offset=39, end_lineno=886, end_col_offset=46), lineno=886, col_offset=30, end_lineno=886, end_col_offset=46)], lineno=886, col_offset=15, end_lineno=886, end_col_offset=47), lineno=886, col_offset=8, end_lineno=886, end_col_offset=47)], handlers=[ExceptHandler(type=Name(id='OSError', ctx=Load(), lineno=887, col_offset=11, end_lineno=887, end_col_offset=18), body=[Return(value=Tuple(elts=[Constant(value='', lineno=888, col_offset=16, end_lineno=888, end_col_offset=18), Constant(value=None, lineno=888, col_offset=20, end_lineno=888, end_col_offset=24)], ctx=Load(), lineno=888, col_offset=15, end_lineno=888, end_col_offset=25), lineno=888, col_offset=8, end_lineno=888, end_col_offset=25)], lineno=887, col_offset=4, end_lineno=888, end_col_offset=25)], lineno=885, col_offset=4, end_lineno=888, end_col_offset=25), Try(body=[Assign(targets=[Name(id='tree', ctx=Store(), lineno=890, col_offset=8, end_lineno=890, end_col_offset=12)], value=Call(func=Attribute(value=Name(id='ast', ctx=Load(), lineno=890, col_offset=15, end_lineno=890, end_col_offset=18), attr='parse', ctx=Load(), lineno=890, col_offset=15, end_lineno=890, end_col_offset=24), args=[Name(id='text', ctx=Load(), lineno=890, col_offset=25, end_lineno=890, end_col_offset=29)], lineno=890, col_offset=15, end_lineno=890, end_col_offset=30), lineno=890, col_offset=8, end_lineno=890, end_col_offset=30)], handlers=[ExceptHandler(type=Name(id='SyntaxError', ctx=Load(), lineno=891, col_offset=11, end_lineno=891, end_col_offset=22), body=[Return(value=Tuple(elts=[Name(id='text', ctx=Load(), lineno=892, col_offset=16, end_lineno=892, end_col_offset=20), Constant(value=None, lineno=892, col_offset=22, end_lineno=892, end_col_offset=26)], ctx=Load(), lineno=892, col_offset=15, end_lineno=892, end_col_offset=27), lineno=892, col_offset=8, end_lineno=892, end_col_offset=27)], lineno=891, col_offset=4, end_lineno=892, end_col_offset=27)], lineno=889, col_offset=4, end_lineno=892, end_col_offset=27), Return(value=Tuple(elts=[Name(id='text', ctx=Load(), lineno=893, col_offset=12, end_lineno=893, end_col_offset=16), Name(id='tree', ctx=Load(), lineno=893, col_offset=18, end_lineno=893, end_col_offset=22)], ctx=Load(), lineno=893, col_offset=11, end_lineno=893, end_col_offset=23), lineno=893, col_offset=4, end_lineno=893, end_col_offset=23)], returns=Subscript(value=Name(id='tuple', ctx=Load(), lineno=864, col_offset=28, end_lineno=864, end_col_offset=33), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=864, col_offset=34, end_lineno=864, end_col_offset=37), BinOp(left=Attribute(value=Name(id='ast', ctx=Load(), lineno=864, col_offset=39, end_lineno=864, end_col_offset=42), attr='AST', ctx=Load(), lineno=864, col_offset=39, end_lineno=864, end_col_offset=46), op=BitOr(), right=Constant(value=None, lineno=864, col_offset=49, end_lineno=864, end_col_offset=53), lineno=864, col_offset=39, end_lineno=864, end_col_offset=53)], ctx=Load(), lineno=864, col_offset=34, end_lineno=864, end_col_offset=53), ctx=Load(), lineno=864, col_offset=28, end_lineno=864, end_col_offset=54), lineno=864, col_offset=0, end_lineno=893, end_col_offset=23), ClassDef(name='_ObservabilityExtractor', body=[AnnAssign(target=Name(id='text', ctx=Store(), lineno=898, col_offset=4, end_lineno=898, end_col_offset=8), annotation=Name(id='str', ctx=Load(), lineno=898, col_offset=10, end_lineno=898, end_col_offset=13), simple=1, lineno=898, col_offset=4, end_lineno=898, end_col_offset=13), AnnAssign(target=Name(id='path', ctx=Store(), lineno=899, col_offset=4, end_lineno=899, end_col_offset=8), annotation=Name(id='Path', ctx=Load(), lineno=899, col_offset=10, end_lineno=899, end_col_offset=14), simple=1, lineno=899, col_offset=4, end_lineno=899, end_col_offset=14), AnnAssign(target=Name(id='logs', ctx=Store(), lineno=900, col_offset=4, end_lineno=900, end_col_offset=8), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=900, col_offset=10, end_lineno=900, end_col_offset=14), slice=Name(id='LogRow', ctx=Load(), lineno=900, col_offset=15, end_lineno=900, end_col_offset=21), ctx=Load(), lineno=900, col_offset=10, end_lineno=900, end_col_offset=22), value=Call(func=Name(id='field', ctx=Load(), lineno=900, col_offset=25, end_lineno=900, end_col_offset=30), keywords=[keyword(arg='default_factory', value=Name(id='list', ctx=Load(), lineno=900, col_offset=47, end_lineno=900, end_col_offset=51), lineno=900, col_offset=31, end_lineno=900, end_col_offset=51)], lineno=900, col_offset=25, end_lineno=900, end_col_offset=52), simple=1, lineno=900, col_offset=4, end_lineno=900, end_col_offset=52), AnnAssign(target=Name(id='metrics', ctx=Store(), lineno=901, col_offset=4, end_lineno=901, end_col_offset=11), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=901, col_offset=13, end_lineno=901, end_col_offset=17), slice=Name(id='MetricRow', ctx=Load(), lineno=901, col_offset=18, end_lineno=901, end_col_offset=27), ctx=Load(), lineno=901, col_offset=13, end_lineno=901, end_col_offset=28), value=Call(func=Name(id='field', ctx=Load(), lineno=901, col_offset=31, end_lineno=901, end_col_offset=36), keywords=[keyword(arg='default_factory', value=Name(id='list', ctx=Load(), lineno=901, col_offset=53, end_lineno=901, end_col_offset=57), lineno=901, col_offset=37, end_lineno=901, end_col_offset=57)], lineno=901, col_offset=31, end_lineno=901, end_col_offset=58), simple=1, lineno=901, col_offset=4, end_lineno=901, end_col_offset=58), AnnAssign(target=Name(id='traces', ctx=Store(), lineno=902, col_offset=4, end_lineno=902, end_col_offset=10), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=902, col_offset=12, end_lineno=902, end_col_offset=16), slice=Name(id='TraceRow', ctx=Load(), lineno=902, col_offset=17, end_lineno=902, end_col_offset=25), ctx=Load(), lineno=902, col_offset=12, end_lineno=902, end_col_offset=26), value=Call(func=Name(id='field', ctx=Load(), lineno=902, col_offset=29, end_lineno=902, end_col_offset=34), keywords=[keyword(arg='default_factory', value=Name(id='list', ctx=Load(), lineno=902, col_offset=51, end_lineno=902, end_col_offset=55), lineno=902, col_offset=35, end_lineno=902, end_col_offset=55)], lineno=902, col_offset=29, end_lineno=902, end_col_offset=56), simple=1, lineno=902, col_offset=4, end_lineno=902, end_col_offset=56), FunctionDef(name='process', args=arguments(args=[arg(arg='self', lineno=904, col_offset=16, end_lineno=904, end_col_offset=20), arg(arg='node', annotation=Attribute(value=Name(id='ast', ctx=Load(), lineno=904, col_offset=28, end_lineno=904, end_col_offset=31), attr='AST', ctx=Load(), lineno=904, col_offset=28, end_lineno=904, end_col_offset=35), lineno=904, col_offset=22, end_lineno=904, end_col_offset=35)]), body=[Expr(value=Constant(value='Process AST node and collect observability calls.\n\n        Parameters\n        ----------\n        node : ast.AST\n            AST node to process.\n        ', lineno=905, col_offset=8, end_lineno=911, end_col_offset=11), lineno=905, col_offset=8, end_lineno=911, end_col_offset=11), If(test=BoolOp(op=Or(), values=[UnaryOp(op=Not(), operand=Call(func=Name(id='isinstance', ctx=Load(), lineno=912, col_offset=15, end_lineno=912, end_col_offset=25), args=[Name(id='node', ctx=Load(), lineno=912, col_offset=26, end_lineno=912, end_col_offset=30), Attribute(value=Name(id='ast', ctx=Load(), lineno=912, col_offset=32, end_lineno=912, end_col_offset=35), attr='Call', ctx=Load(), lineno=912, col_offset=32, end_lineno=912, end_col_offset=40)], lineno=912, col_offset=15, end_lineno=912, end_col_offset=41), lineno=912, col_offset=11, end_lineno=912, end_col_offset=41), UnaryOp(op=Not(), operand=Call(func=Name(id='isinstance', ctx=Load(), lineno=912, col_offset=49, end_lineno=912, end_col_offset=59), args=[Attribute(value=Name(id='node', ctx=Load(), lineno=912, col_offset=60, end_lineno=912, end_col_offset=64), attr='func', ctx=Load(), lineno=912, col_offset=60, end_lineno=912, end_col_offset=69), Attribute(value=Name(id='ast', ctx=Load(), lineno=912, col_offset=71, end_lineno=912, end_col_offset=74), attr='Attribute', ctx=Load(), lineno=912, col_offset=71, end_lineno=912, end_col_offset=84)], lineno=912, col_offset=49, end_lineno=912, end_col_offset=85), lineno=912, col_offset=45, end_lineno=912, end_col_offset=85)], lineno=912, col_offset=11, end_lineno=912, end_col_offset=85), body=[Return(lineno=913, col_offset=12, end_lineno=913, end_col_offset=18)], lineno=912, col_offset=8, end_lineno=913, end_col_offset=18), Assign(targets=[Name(id='attr', ctx=Store(), lineno=914, col_offset=8, end_lineno=914, end_col_offset=12)], value=Attribute(value=Attribute(value=Name(id='node', ctx=Load(), lineno=914, col_offset=15, end_lineno=914, end_col_offset=19), attr='func', ctx=Load(), lineno=914, col_offset=15, end_lineno=914, end_col_offset=24), attr='attr', ctx=Load(), lineno=914, col_offset=15, end_lineno=914, end_col_offset=29), lineno=914, col_offset=8, end_lineno=914, end_col_offset=29), Assign(targets=[Name(id='base_node', ctx=Store(), lineno=915, col_offset=8, end_lineno=915, end_col_offset=17)], value=Attribute(value=Attribute(value=Name(id='node', ctx=Load(), lineno=915, col_offset=20, end_lineno=915, end_col_offset=24), attr='func', ctx=Load(), lineno=915, col_offset=20, end_lineno=915, end_col_offset=29), attr='value', ctx=Load(), lineno=915, col_offset=20, end_lineno=915, end_col_offset=35), lineno=915, col_offset=8, end_lineno=915, end_col_offset=35), Assign(targets=[Name(id='base_name', ctx=Store(), lineno=916, col_offset=8, end_lineno=916, end_col_offset=17)], value=IfExp(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=916, col_offset=36, end_lineno=916, end_col_offset=46), args=[Name(id='base_node', ctx=Load(), lineno=916, col_offset=47, end_lineno=916, end_col_offset=56), Attribute(value=Name(id='ast', ctx=Load(), lineno=916, col_offset=58, end_lineno=916, end_col_offset=61), attr='Name', ctx=Load(), lineno=916, col_offset=58, end_lineno=916, end_col_offset=66)], lineno=916, col_offset=36, end_lineno=916, end_col_offset=67), body=Attribute(value=Name(id='base_node', ctx=Load(), lineno=916, col_offset=20, end_lineno=916, end_col_offset=29), attr='id', ctx=Load(), lineno=916, col_offset=20, end_lineno=916, end_col_offset=32), orelse=Constant(value=None, lineno=916, col_offset=73, end_lineno=916, end_col_offset=77), lineno=916, col_offset=20, end_lineno=916, end_col_offset=77), lineno=916, col_offset=8, end_lineno=916, end_col_offset=77), Assign(targets=[Name(id='kwmap', ctx=Store(), lineno=917, col_offset=8, end_lineno=917, end_col_offset=13)], value=Call(func=Name(id='_keywords_map', ctx=Load(), lineno=917, col_offset=16, end_lineno=917, end_col_offset=29), args=[Name(id='node', ctx=Load(), lineno=917, col_offset=30, end_lineno=917, end_col_offset=34), Attribute(value=Name(id='self', ctx=Load(), lineno=917, col_offset=36, end_lineno=917, end_col_offset=40), attr='text', ctx=Load(), lineno=917, col_offset=36, end_lineno=917, end_col_offset=45)], lineno=917, col_offset=16, end_lineno=917, end_col_offset=46), lineno=917, col_offset=8, end_lineno=917, end_col_offset=46), Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load(), lineno=918, col_offset=8, end_lineno=918, end_col_offset=12), attr='_collect_log', ctx=Load(), lineno=918, col_offset=8, end_lineno=918, end_col_offset=25), args=[Name(id='node', ctx=Load(), lineno=918, col_offset=26, end_lineno=918, end_col_offset=30), Name(id='attr', ctx=Load(), lineno=918, col_offset=32, end_lineno=918, end_col_offset=36), Name(id='base_name', ctx=Load(), lineno=918, col_offset=38, end_lineno=918, end_col_offset=47)], lineno=918, col_offset=8, end_lineno=918, end_col_offset=48), lineno=918, col_offset=8, end_lineno=918, end_col_offset=48), Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load(), lineno=919, col_offset=8, end_lineno=919, end_col_offset=12), attr='_collect_metric', ctx=Load(), lineno=919, col_offset=8, end_lineno=919, end_col_offset=28), args=[Name(id='node', ctx=Load(), lineno=919, col_offset=29, end_lineno=919, end_col_offset=33), Name(id='attr', ctx=Load(), lineno=919, col_offset=35, end_lineno=919, end_col_offset=39), Name(id='base_name', ctx=Load(), lineno=919, col_offset=41, end_lineno=919, end_col_offset=50), Name(id='kwmap', ctx=Load(), lineno=919, col_offset=52, end_lineno=919, end_col_offset=57)], lineno=919, col_offset=8, end_lineno=919, end_col_offset=58), lineno=919, col_offset=8, end_lineno=919, end_col_offset=58), Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load(), lineno=920, col_offset=8, end_lineno=920, end_col_offset=12), attr='_collect_trace', ctx=Load(), lineno=920, col_offset=8, end_lineno=920, end_col_offset=27), args=[Name(id='node', ctx=Load(), lineno=920, col_offset=28, end_lineno=920, end_col_offset=32), Name(id='attr', ctx=Load(), lineno=920, col_offset=34, end_lineno=920, end_col_offset=38)], lineno=920, col_offset=8, end_lineno=920, end_col_offset=39), lineno=920, col_offset=8, end_lineno=920, end_col_offset=39)], returns=Constant(value=None, lineno=904, col_offset=40, end_lineno=904, end_col_offset=44), lineno=904, col_offset=4, end_lineno=920, end_col_offset=39), FunctionDef(name='_collect_log', args=arguments(args=[arg(arg='self', lineno=922, col_offset=21, end_lineno=922, end_col_offset=25), arg(arg='node', annotation=Attribute(value=Name(id='ast', ctx=Load(), lineno=922, col_offset=33, end_lineno=922, end_col_offset=36), attr='Call', ctx=Load(), lineno=922, col_offset=33, end_lineno=922, end_col_offset=41), lineno=922, col_offset=27, end_lineno=922, end_col_offset=41), arg(arg='attr', annotation=Name(id='str', ctx=Load(), lineno=922, col_offset=49, end_lineno=922, end_col_offset=52), lineno=922, col_offset=43, end_lineno=922, end_col_offset=52), arg(arg='base_name', annotation=BinOp(left=Name(id='str', ctx=Load(), lineno=922, col_offset=65, end_lineno=922, end_col_offset=68), op=BitOr(), right=Constant(value=None, lineno=922, col_offset=71, end_lineno=922, end_col_offset=75), lineno=922, col_offset=65, end_lineno=922, end_col_offset=75), lineno=922, col_offset=54, end_lineno=922, end_col_offset=75)]), body=[Delete(targets=[Name(id='base_name', ctx=Del(), lineno=923, col_offset=12, end_lineno=923, end_col_offset=21)], lineno=923, col_offset=8, end_lineno=923, end_col_offset=21), If(test=Compare(left=Name(id='attr', ctx=Load(), lineno=924, col_offset=11, end_lineno=924, end_col_offset=15), ops=[NotIn()], comparators=[Name(id='_LOG_METHODS', ctx=Load(), lineno=924, col_offset=23, end_lineno=924, end_col_offset=35)], lineno=924, col_offset=11, end_lineno=924, end_col_offset=35), body=[Return(lineno=925, col_offset=12, end_lineno=925, end_col_offset=18)], lineno=924, col_offset=8, end_lineno=925, end_col_offset=18), Assign(targets=[Name(id='message_template', ctx=Store(), lineno=926, col_offset=8, end_lineno=926, end_col_offset=24)], value=Constant(value='', lineno=926, col_offset=27, end_lineno=926, end_col_offset=29), lineno=926, col_offset=8, end_lineno=926, end_col_offset=29), If(test=Attribute(value=Name(id='node', ctx=Load(), lineno=927, col_offset=11, end_lineno=927, end_col_offset=15), attr='args', ctx=Load(), lineno=927, col_offset=11, end_lineno=927, end_col_offset=20), body=[Assign(targets=[Name(id='segment', ctx=Store(), lineno=928, col_offset=12, end_lineno=928, end_col_offset=19)], value=Call(func=Attribute(value=Name(id='ast', ctx=Load(), lineno=928, col_offset=22, end_lineno=928, end_col_offset=25), attr='get_source_segment', ctx=Load(), lineno=928, col_offset=22, end_lineno=928, end_col_offset=44), args=[Attribute(value=Name(id='self', ctx=Load(), lineno=928, col_offset=45, end_lineno=928, end_col_offset=49), attr='text', ctx=Load(), lineno=928, col_offset=45, end_lineno=928, end_col_offset=54), Subscript(value=Attribute(value=Name(id='node', ctx=Load(), lineno=928, col_offset=56, end_lineno=928, end_col_offset=60), attr='args', ctx=Load(), lineno=928, col_offset=56, end_lineno=928, end_col_offset=65), slice=Constant(value=0, lineno=928, col_offset=66, end_lineno=928, end_col_offset=67), ctx=Load(), lineno=928, col_offset=56, end_lineno=928, end_col_offset=68)], lineno=928, col_offset=22, end_lineno=928, end_col_offset=69), lineno=928, col_offset=12, end_lineno=928, end_col_offset=69), Assign(targets=[Name(id='message_template', ctx=Store(), lineno=929, col_offset=12, end_lineno=929, end_col_offset=28)], value=Subscript(value=Call(func=Attribute(value=BoolOp(op=Or(), values=[Name(id='segment', ctx=Load(), lineno=929, col_offset=32, end_lineno=929, end_col_offset=39), Constant(value='', lineno=929, col_offset=43, end_lineno=929, end_col_offset=45)], lineno=929, col_offset=32, end_lineno=929, end_col_offset=45), attr='strip', ctx=Load(), lineno=929, col_offset=31, end_lineno=929, end_col_offset=52), lineno=929, col_offset=31, end_lineno=929, end_col_offset=54), slice=Slice(upper=Constant(value=240, lineno=929, col_offset=56, end_lineno=929, end_col_offset=59), lineno=929, col_offset=55, end_lineno=929, end_col_offset=59), ctx=Load(), lineno=929, col_offset=31, end_lineno=929, end_col_offset=60), lineno=929, col_offset=12, end_lineno=929, end_col_offset=60)], lineno=927, col_offset=8, end_lineno=929, end_col_offset=60), Assign(targets=[Tuple(elts=[Name(id='keys', ctx=Store(), lineno=930, col_offset=8, end_lineno=930, end_col_offset=12), Name(id='_', ctx=Store(), lineno=930, col_offset=14, end_lineno=930, end_col_offset=15)], ctx=Store(), lineno=930, col_offset=8, end_lineno=930, end_col_offset=15)], value=Call(func=Name(id='_is_structured_logging', ctx=Load(), lineno=930, col_offset=18, end_lineno=930, end_col_offset=40), args=[Name(id='node', ctx=Load(), lineno=930, col_offset=41, end_lineno=930, end_col_offset=45), Attribute(value=Name(id='self', ctx=Load(), lineno=930, col_offset=47, end_lineno=930, end_col_offset=51), attr='text', ctx=Load(), lineno=930, col_offset=47, end_lineno=930, end_col_offset=56)], lineno=930, col_offset=18, end_lineno=930, end_col_offset=57), lineno=930, col_offset=8, end_lineno=930, end_col_offset=57), Assign(targets=[Name(id='log_row', ctx=Store(), lineno=931, col_offset=8, end_lineno=931, end_col_offset=15)], value=Call(func=Name(id='LogRow', ctx=Load(), lineno=931, col_offset=18, end_lineno=931, end_col_offset=24), keywords=[keyword(arg='logger', value=Call(func=Attribute(value=Name(id='self', ctx=Load(), lineno=932, col_offset=19, end_lineno=932, end_col_offset=23), attr='_logger_name', ctx=Load(), lineno=932, col_offset=19, end_lineno=932, end_col_offset=36), args=[Name(id='node', ctx=Load(), lineno=932, col_offset=37, end_lineno=932, end_col_offset=41)], lineno=932, col_offset=19, end_lineno=932, end_col_offset=42), lineno=932, col_offset=12, end_lineno=932, end_col_offset=42), keyword(arg='level', value=Name(id='attr', ctx=Load(), lineno=933, col_offset=18, end_lineno=933, end_col_offset=22), lineno=933, col_offset=12, end_lineno=933, end_col_offset=22), keyword(arg='message_template', value=Name(id='message_template', ctx=Load(), lineno=934, col_offset=29, end_lineno=934, end_col_offset=45), lineno=934, col_offset=12, end_lineno=934, end_col_offset=45), keyword(arg='structured_keys', value=Call(func=Name(id='_dedupe_strings', ctx=Load(), lineno=935, col_offset=28, end_lineno=935, end_col_offset=43), args=[Name(id='keys', ctx=Load(), lineno=935, col_offset=44, end_lineno=935, end_col_offset=48)], lineno=935, col_offset=28, end_lineno=935, end_col_offset=49), lineno=935, col_offset=12, end_lineno=935, end_col_offset=49), keyword(arg='file', value=Call(func=Name(id='_rel', ctx=Load(), lineno=936, col_offset=17, end_lineno=936, end_col_offset=21), args=[Attribute(value=Name(id='self', ctx=Load(), lineno=936, col_offset=22, end_lineno=936, end_col_offset=26), attr='path', ctx=Load(), lineno=936, col_offset=22, end_lineno=936, end_col_offset=31)], lineno=936, col_offset=17, end_lineno=936, end_col_offset=32), lineno=936, col_offset=12, end_lineno=936, end_col_offset=32), keyword(arg='lineno', value=Attribute(value=Name(id='node', ctx=Load(), lineno=937, col_offset=19, end_lineno=937, end_col_offset=23), attr='lineno', ctx=Load(), lineno=937, col_offset=19, end_lineno=937, end_col_offset=30), lineno=937, col_offset=12, end_lineno=937, end_col_offset=30), keyword(arg='source_link', value=Call(func=Name(id='_links_for', ctx=Load(), lineno=938, col_offset=24, end_lineno=938, end_col_offset=34), args=[Attribute(value=Name(id='self', ctx=Load(), lineno=938, col_offset=35, end_lineno=938, end_col_offset=39), attr='path', ctx=Load(), lineno=938, col_offset=35, end_lineno=938, end_col_offset=44), Attribute(value=Name(id='node', ctx=Load(), lineno=938, col_offset=46, end_lineno=938, end_col_offset=50), attr='lineno', ctx=Load(), lineno=938, col_offset=46, end_lineno=938, end_col_offset=57)], lineno=938, col_offset=24, end_lineno=938, end_col_offset=58), lineno=938, col_offset=12, end_lineno=938, end_col_offset=58)], lineno=931, col_offset=18, end_lineno=939, end_col_offset=9), lineno=931, col_offset=8, end_lineno=939, end_col_offset=9), Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='self', ctx=Load(), lineno=940, col_offset=8, end_lineno=940, end_col_offset=12), attr='logs', ctx=Load(), lineno=940, col_offset=8, end_lineno=940, end_col_offset=17), attr='append', ctx=Load(), lineno=940, col_offset=8, end_lineno=940, end_col_offset=24), args=[Name(id='log_row', ctx=Load(), lineno=940, col_offset=25, end_lineno=940, end_col_offset=32)], lineno=940, col_offset=8, end_lineno=940, end_col_offset=33), lineno=940, col_offset=8, end_lineno=940, end_col_offset=33)], returns=Constant(value=None, lineno=922, col_offset=80, end_lineno=922, end_col_offset=84), lineno=922, col_offset=4, end_lineno=940, end_col_offset=33), FunctionDef(name='_collect_metric', args=arguments(args=[arg(arg='self', lineno=943, col_offset=8, end_lineno=943, end_col_offset=12), arg(arg='node', annotation=Attribute(value=Name(id='ast', ctx=Load(), lineno=944, col_offset=14, end_lineno=944, end_col_offset=17), attr='Call', ctx=Load(), lineno=944, col_offset=14, end_lineno=944, end_col_offset=22), lineno=944, col_offset=8, end_lineno=944, end_col_offset=22), arg(arg='attr', annotation=Name(id='str', ctx=Load(), lineno=945, col_offset=14, end_lineno=945, end_col_offset=17), lineno=945, col_offset=8, end_lineno=945, end_col_offset=17), arg(arg='base_name', annotation=BinOp(left=Name(id='str', ctx=Load(), lineno=946, col_offset=19, end_lineno=946, end_col_offset=22), op=BitOr(), right=Constant(value=None, lineno=946, col_offset=25, end_lineno=946, end_col_offset=29), lineno=946, col_offset=19, end_lineno=946, end_col_offset=29), lineno=946, col_offset=8, end_lineno=946, end_col_offset=29), arg(arg='kwmap', annotation=Subscript(value=Name(id='dict', ctx=Load(), lineno=947, col_offset=15, end_lineno=947, end_col_offset=19), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=947, col_offset=20, end_lineno=947, end_col_offset=23), Name(id='str', ctx=Load(), lineno=947, col_offset=25, end_lineno=947, end_col_offset=28)], ctx=Load(), lineno=947, col_offset=20, end_lineno=947, end_col_offset=28), ctx=Load(), lineno=947, col_offset=15, end_lineno=947, end_col_offset=29), lineno=947, col_offset=8, end_lineno=947, end_col_offset=29)]), body=[If(test=BoolOp(op=And(), values=[Compare(left=Name(id='base_name', ctx=Load(), lineno=950, col_offset=12, end_lineno=950, end_col_offset=21), ops=[NotIn()], comparators=[Set(elts=[Constant(value='prometheus_client', lineno=950, col_offset=30, end_lineno=950, end_col_offset=49), Constant(value='metrics', lineno=950, col_offset=51, end_lineno=950, end_col_offset=60), Constant(value='stats', lineno=950, col_offset=62, end_lineno=950, end_col_offset=69)], lineno=950, col_offset=29, end_lineno=950, end_col_offset=70)], lineno=950, col_offset=12, end_lineno=950, end_col_offset=70), Compare(left=Name(id='attr', ctx=Load(), lineno=951, col_offset=16, end_lineno=951, end_col_offset=20), ops=[NotIn()], comparators=[Name(id='_METRIC_CALL_TYPES', ctx=Load(), lineno=951, col_offset=28, end_lineno=951, end_col_offset=46)], lineno=951, col_offset=16, end_lineno=951, end_col_offset=46)], lineno=950, col_offset=12, end_lineno=951, end_col_offset=46), body=[Return(lineno=953, col_offset=12, end_lineno=953, end_col_offset=18)], lineno=949, col_offset=8, end_lineno=953, end_col_offset=18), Assign(targets=[Name(id='metric_type', ctx=Store(), lineno=954, col_offset=8, end_lineno=954, end_col_offset=19)], value=Call(func=Attribute(value=Name(id='_METRIC_CALL_TYPES', ctx=Load(), lineno=954, col_offset=22, end_lineno=954, end_col_offset=40), attr='get', ctx=Load(), lineno=954, col_offset=22, end_lineno=954, end_col_offset=44), args=[Name(id='attr', ctx=Load(), lineno=954, col_offset=45, end_lineno=954, end_col_offset=49)], lineno=954, col_offset=22, end_lineno=954, end_col_offset=50), lineno=954, col_offset=8, end_lineno=954, end_col_offset=50), Assign(targets=[Name(id='metric_name', ctx=Store(), lineno=955, col_offset=8, end_lineno=955, end_col_offset=19)], value=Call(func=Name(id='_first_str', ctx=Load(), lineno=955, col_offset=22, end_lineno=955, end_col_offset=32), args=[Name(id='node', ctx=Load(), lineno=955, col_offset=33, end_lineno=955, end_col_offset=37)], lineno=955, col_offset=22, end_lineno=955, end_col_offset=38), lineno=955, col_offset=8, end_lineno=955, end_col_offset=38), Assign(targets=[Name(id='labels', ctx=Store(), lineno=956, col_offset=8, end_lineno=956, end_col_offset=14)], value=Call(func=Name(id='_extract_labels_from_kw', ctx=Load(), lineno=956, col_offset=17, end_lineno=956, end_col_offset=40), args=[Name(id='kwmap', ctx=Load(), lineno=956, col_offset=41, end_lineno=956, end_col_offset=46)], lineno=956, col_offset=17, end_lineno=956, end_col_offset=47), lineno=956, col_offset=8, end_lineno=956, end_col_offset=47), Assign(targets=[Name(id='unit', ctx=Store(), lineno=957, col_offset=8, end_lineno=957, end_col_offset=12)], value=IfExp(test=Name(id='metric_name', ctx=Load(), lineno=957, col_offset=59, end_lineno=957, end_col_offset=70), body=Call(func=Name(id='_infer_unit_from_name', ctx=Load(), lineno=957, col_offset=15, end_lineno=957, end_col_offset=36), args=[BoolOp(op=Or(), values=[Name(id='metric_name', ctx=Load(), lineno=957, col_offset=37, end_lineno=957, end_col_offset=48), Constant(value='', lineno=957, col_offset=52, end_lineno=957, end_col_offset=54)], lineno=957, col_offset=37, end_lineno=957, end_col_offset=54)], lineno=957, col_offset=15, end_lineno=957, end_col_offset=55), orelse=Constant(value=None, lineno=957, col_offset=76, end_lineno=957, end_col_offset=80), lineno=957, col_offset=15, end_lineno=957, end_col_offset=80), lineno=957, col_offset=8, end_lineno=957, end_col_offset=80), Assign(targets=[Name(id='metric_row', ctx=Store(), lineno=958, col_offset=8, end_lineno=958, end_col_offset=18)], value=Call(func=Name(id='MetricRow', ctx=Load(), lineno=958, col_offset=21, end_lineno=958, end_col_offset=30), keywords=[keyword(arg='name', value=BoolOp(op=Or(), values=[Name(id='metric_name', ctx=Load(), lineno=959, col_offset=17, end_lineno=959, end_col_offset=28), Constant(value='<dynamic>', lineno=959, col_offset=32, end_lineno=959, end_col_offset=43)], lineno=959, col_offset=17, end_lineno=959, end_col_offset=43), lineno=959, col_offset=12, end_lineno=959, end_col_offset=43), keyword(arg='type', value=Name(id='metric_type', ctx=Load(), lineno=960, col_offset=17, end_lineno=960, end_col_offset=28), lineno=960, col_offset=12, end_lineno=960, end_col_offset=28), keyword(arg='unit', value=Name(id='unit', ctx=Load(), lineno=961, col_offset=17, end_lineno=961, end_col_offset=21), lineno=961, col_offset=12, end_lineno=961, end_col_offset=21), keyword(arg='labels', value=Name(id='labels', ctx=Load(), lineno=962, col_offset=19, end_lineno=962, end_col_offset=25), lineno=962, col_offset=12, end_lineno=962, end_col_offset=25), keyword(arg='file', value=Call(func=Name(id='_rel', ctx=Load(), lineno=963, col_offset=17, end_lineno=963, end_col_offset=21), args=[Attribute(value=Name(id='self', ctx=Load(), lineno=963, col_offset=22, end_lineno=963, end_col_offset=26), attr='path', ctx=Load(), lineno=963, col_offset=22, end_lineno=963, end_col_offset=31)], lineno=963, col_offset=17, end_lineno=963, end_col_offset=32), lineno=963, col_offset=12, end_lineno=963, end_col_offset=32), keyword(arg='lineno', value=Attribute(value=Name(id='node', ctx=Load(), lineno=964, col_offset=19, end_lineno=964, end_col_offset=23), attr='lineno', ctx=Load(), lineno=964, col_offset=19, end_lineno=964, end_col_offset=30), lineno=964, col_offset=12, end_lineno=964, end_col_offset=30), keyword(arg='call', value=Subscript(value=Call(func=Attribute(value=BoolOp(op=Or(), values=[Call(func=Attribute(value=Name(id='ast', ctx=Load(), lineno=965, col_offset=18, end_lineno=965, end_col_offset=21), attr='get_source_segment', ctx=Load(), lineno=965, col_offset=18, end_lineno=965, end_col_offset=40), args=[Attribute(value=Name(id='self', ctx=Load(), lineno=965, col_offset=41, end_lineno=965, end_col_offset=45), attr='text', ctx=Load(), lineno=965, col_offset=41, end_lineno=965, end_col_offset=50), Name(id='node', ctx=Load(), lineno=965, col_offset=52, end_lineno=965, end_col_offset=56)], lineno=965, col_offset=18, end_lineno=965, end_col_offset=57), Constant(value='', lineno=965, col_offset=61, end_lineno=965, end_col_offset=63)], lineno=965, col_offset=18, end_lineno=965, end_col_offset=63), attr='strip', ctx=Load(), lineno=965, col_offset=17, end_lineno=965, end_col_offset=70), lineno=965, col_offset=17, end_lineno=965, end_col_offset=72), slice=Slice(upper=Constant(value=240, lineno=965, col_offset=74, end_lineno=965, end_col_offset=77), lineno=965, col_offset=73, end_lineno=965, end_col_offset=77), ctx=Load(), lineno=965, col_offset=17, end_lineno=965, end_col_offset=78), lineno=965, col_offset=12, end_lineno=965, end_col_offset=78), keyword(arg='recommended_aggregation', value=Call(func=Name(id='_recommended_aggregation', ctx=Load(), lineno=966, col_offset=36, end_lineno=966, end_col_offset=60), args=[Name(id='metric_type', ctx=Load(), lineno=966, col_offset=61, end_lineno=966, end_col_offset=72)], lineno=966, col_offset=36, end_lineno=966, end_col_offset=73), lineno=966, col_offset=12, end_lineno=966, end_col_offset=73), keyword(arg='source_link', value=Call(func=Name(id='_links_for', ctx=Load(), lineno=967, col_offset=24, end_lineno=967, end_col_offset=34), args=[Attribute(value=Name(id='self', ctx=Load(), lineno=967, col_offset=35, end_lineno=967, end_col_offset=39), attr='path', ctx=Load(), lineno=967, col_offset=35, end_lineno=967, end_col_offset=44), Attribute(value=Name(id='node', ctx=Load(), lineno=967, col_offset=46, end_lineno=967, end_col_offset=50), attr='lineno', ctx=Load(), lineno=967, col_offset=46, end_lineno=967, end_col_offset=57)], lineno=967, col_offset=24, end_lineno=967, end_col_offset=58), lineno=967, col_offset=12, end_lineno=967, end_col_offset=58)], lineno=958, col_offset=21, end_lineno=968, end_col_offset=9), lineno=958, col_offset=8, end_lineno=968, end_col_offset=9), Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='self', ctx=Load(), lineno=969, col_offset=8, end_lineno=969, end_col_offset=12), attr='metrics', ctx=Load(), lineno=969, col_offset=8, end_lineno=969, end_col_offset=20), attr='append', ctx=Load(), lineno=969, col_offset=8, end_lineno=969, end_col_offset=27), args=[Name(id='metric_row', ctx=Load(), lineno=969, col_offset=28, end_lineno=969, end_col_offset=38)], lineno=969, col_offset=8, end_lineno=969, end_col_offset=39), lineno=969, col_offset=8, end_lineno=969, end_col_offset=39)], returns=Constant(value=None, lineno=948, col_offset=9, end_lineno=948, end_col_offset=13), lineno=942, col_offset=4, end_lineno=969, end_col_offset=39), FunctionDef(name='_collect_trace', args=arguments(args=[arg(arg='self', lineno=971, col_offset=23, end_lineno=971, end_col_offset=27), arg(arg='node', annotation=Attribute(value=Name(id='ast', ctx=Load(), lineno=971, col_offset=35, end_lineno=971, end_col_offset=38), attr='Call', ctx=Load(), lineno=971, col_offset=35, end_lineno=971, end_col_offset=43), lineno=971, col_offset=29, end_lineno=971, end_col_offset=43), arg(arg='attr', annotation=Name(id='str', ctx=Load(), lineno=971, col_offset=51, end_lineno=971, end_col_offset=54), lineno=971, col_offset=45, end_lineno=971, end_col_offset=54)]), body=[If(test=Compare(left=Name(id='attr', ctx=Load(), lineno=972, col_offset=11, end_lineno=972, end_col_offset=15), ops=[In()], comparators=[Set(elts=[Constant(value='start_span', lineno=972, col_offset=20, end_lineno=972, end_col_offset=32), Constant(value='start_as_current_span', lineno=972, col_offset=34, end_lineno=972, end_col_offset=57)], lineno=972, col_offset=19, end_lineno=972, end_col_offset=58)], lineno=972, col_offset=11, end_lineno=972, end_col_offset=58), body=[Assign(targets=[Name(id='span_name', ctx=Store(), lineno=973, col_offset=12, end_lineno=973, end_col_offset=21)], value=Call(func=Name(id='_first_str', ctx=Load(), lineno=973, col_offset=24, end_lineno=973, end_col_offset=34), args=[Name(id='node', ctx=Load(), lineno=973, col_offset=35, end_lineno=973, end_col_offset=39)], lineno=973, col_offset=24, end_lineno=973, end_col_offset=40), lineno=973, col_offset=12, end_lineno=973, end_col_offset=40), Assign(targets=[Name(id='trace_row', ctx=Store(), lineno=974, col_offset=12, end_lineno=974, end_col_offset=21)], value=Call(func=Name(id='TraceRow', ctx=Load(), lineno=974, col_offset=24, end_lineno=974, end_col_offset=32), keywords=[keyword(arg='span_name', value=Name(id='span_name', ctx=Load(), lineno=975, col_offset=26, end_lineno=975, end_col_offset=35), lineno=975, col_offset=16, end_lineno=975, end_col_offset=35), keyword(arg='attributes', value=List(ctx=Load(), lineno=976, col_offset=27, end_lineno=976, end_col_offset=29), lineno=976, col_offset=16, end_lineno=976, end_col_offset=29), keyword(arg='file', value=Call(func=Name(id='_rel', ctx=Load(), lineno=977, col_offset=21, end_lineno=977, end_col_offset=25), args=[Attribute(value=Name(id='self', ctx=Load(), lineno=977, col_offset=26, end_lineno=977, end_col_offset=30), attr='path', ctx=Load(), lineno=977, col_offset=26, end_lineno=977, end_col_offset=35)], lineno=977, col_offset=21, end_lineno=977, end_col_offset=36), lineno=977, col_offset=16, end_lineno=977, end_col_offset=36), keyword(arg='lineno', value=Attribute(value=Name(id='node', ctx=Load(), lineno=978, col_offset=23, end_lineno=978, end_col_offset=27), attr='lineno', ctx=Load(), lineno=978, col_offset=23, end_lineno=978, end_col_offset=34), lineno=978, col_offset=16, end_lineno=978, end_col_offset=34), keyword(arg='call', value=Subscript(value=Call(func=Attribute(value=BoolOp(op=Or(), values=[Call(func=Attribute(value=Name(id='ast', ctx=Load(), lineno=979, col_offset=22, end_lineno=979, end_col_offset=25), attr='get_source_segment', ctx=Load(), lineno=979, col_offset=22, end_lineno=979, end_col_offset=44), args=[Attribute(value=Name(id='self', ctx=Load(), lineno=979, col_offset=45, end_lineno=979, end_col_offset=49), attr='text', ctx=Load(), lineno=979, col_offset=45, end_lineno=979, end_col_offset=54), Name(id='node', ctx=Load(), lineno=979, col_offset=56, end_lineno=979, end_col_offset=60)], lineno=979, col_offset=22, end_lineno=979, end_col_offset=61), Constant(value='', lineno=979, col_offset=65, end_lineno=979, end_col_offset=67)], lineno=979, col_offset=22, end_lineno=979, end_col_offset=67), attr='strip', ctx=Load(), lineno=979, col_offset=21, end_lineno=979, end_col_offset=74), lineno=979, col_offset=21, end_lineno=979, end_col_offset=76), slice=Slice(upper=Constant(value=240, lineno=979, col_offset=78, end_lineno=979, end_col_offset=81), lineno=979, col_offset=77, end_lineno=979, end_col_offset=81), ctx=Load(), lineno=979, col_offset=21, end_lineno=979, end_col_offset=82), lineno=979, col_offset=16, end_lineno=979, end_col_offset=82), keyword(arg='source_link', value=Call(func=Name(id='_links_for', ctx=Load(), lineno=980, col_offset=28, end_lineno=980, end_col_offset=38), args=[Attribute(value=Name(id='self', ctx=Load(), lineno=980, col_offset=39, end_lineno=980, end_col_offset=43), attr='path', ctx=Load(), lineno=980, col_offset=39, end_lineno=980, end_col_offset=48), Attribute(value=Name(id='node', ctx=Load(), lineno=980, col_offset=50, end_lineno=980, end_col_offset=54), attr='lineno', ctx=Load(), lineno=980, col_offset=50, end_lineno=980, end_col_offset=61)], lineno=980, col_offset=28, end_lineno=980, end_col_offset=62), lineno=980, col_offset=16, end_lineno=980, end_col_offset=62)], lineno=974, col_offset=24, end_lineno=981, end_col_offset=13), lineno=974, col_offset=12, end_lineno=981, end_col_offset=13), Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='self', ctx=Load(), lineno=982, col_offset=12, end_lineno=982, end_col_offset=16), attr='traces', ctx=Load(), lineno=982, col_offset=12, end_lineno=982, end_col_offset=23), attr='append', ctx=Load(), lineno=982, col_offset=12, end_lineno=982, end_col_offset=30), args=[Name(id='trace_row', ctx=Load(), lineno=982, col_offset=31, end_lineno=982, end_col_offset=40)], lineno=982, col_offset=12, end_lineno=982, end_col_offset=41), lineno=982, col_offset=12, end_lineno=982, end_col_offset=41), Return(lineno=983, col_offset=12, end_lineno=983, end_col_offset=18)], lineno=972, col_offset=8, end_lineno=983, end_col_offset=18), If(test=BoolOp(op=And(), values=[Compare(left=Name(id='attr', ctx=Load(), lineno=984, col_offset=11, end_lineno=984, end_col_offset=15), ops=[In()], comparators=[Set(elts=[Constant(value='set_attribute', lineno=984, col_offset=20, end_lineno=984, end_col_offset=35), Constant(value='add_event', lineno=984, col_offset=37, end_lineno=984, end_col_offset=48)], lineno=984, col_offset=19, end_lineno=984, end_col_offset=49)], lineno=984, col_offset=11, end_lineno=984, end_col_offset=49), Attribute(value=Name(id='self', ctx=Load(), lineno=984, col_offset=54, end_lineno=984, end_col_offset=58), attr='traces', ctx=Load(), lineno=984, col_offset=54, end_lineno=984, end_col_offset=65)], lineno=984, col_offset=11, end_lineno=984, end_col_offset=65), body=[Assign(targets=[Name(id='segment', ctx=Store(), lineno=985, col_offset=12, end_lineno=985, end_col_offset=19)], value=BoolOp(op=Or(), values=[Call(func=Attribute(value=Name(id='ast', ctx=Load(), lineno=985, col_offset=22, end_lineno=985, end_col_offset=25), attr='get_source_segment', ctx=Load(), lineno=985, col_offset=22, end_lineno=985, end_col_offset=44), args=[Attribute(value=Name(id='self', ctx=Load(), lineno=985, col_offset=45, end_lineno=985, end_col_offset=49), attr='text', ctx=Load(), lineno=985, col_offset=45, end_lineno=985, end_col_offset=54), Name(id='node', ctx=Load(), lineno=985, col_offset=56, end_lineno=985, end_col_offset=60)], lineno=985, col_offset=22, end_lineno=985, end_col_offset=61), Constant(value='', lineno=985, col_offset=65, end_lineno=985, end_col_offset=67)], lineno=985, col_offset=22, end_lineno=985, end_col_offset=67), lineno=985, col_offset=12, end_lineno=985, end_col_offset=67), Assign(targets=[Name(id='attribute_key', ctx=Store(), lineno=986, col_offset=12, end_lineno=986, end_col_offset=25)], value=BoolOp(op=Or(), values=[Call(func=Name(id='_first_str', ctx=Load(), lineno=986, col_offset=28, end_lineno=986, end_col_offset=38), args=[Name(id='node', ctx=Load(), lineno=986, col_offset=39, end_lineno=986, end_col_offset=43)], lineno=986, col_offset=28, end_lineno=986, end_col_offset=44), Subscript(value=Name(id='segment', ctx=Load(), lineno=986, col_offset=48, end_lineno=986, end_col_offset=55), slice=Slice(upper=Constant(value=80, lineno=986, col_offset=57, end_lineno=986, end_col_offset=59), lineno=986, col_offset=56, end_lineno=986, end_col_offset=59), ctx=Load(), lineno=986, col_offset=48, end_lineno=986, end_col_offset=60)], lineno=986, col_offset=28, end_lineno=986, end_col_offset=60), lineno=986, col_offset=12, end_lineno=986, end_col_offset=60), Expr(value=Call(func=Attribute(value=Attribute(value=Subscript(value=Attribute(value=Name(id='self', ctx=Load(), lineno=987, col_offset=12, end_lineno=987, end_col_offset=16), attr='traces', ctx=Load(), lineno=987, col_offset=12, end_lineno=987, end_col_offset=23), slice=UnaryOp(op=USub(), operand=Constant(value=1, lineno=987, col_offset=25, end_lineno=987, end_col_offset=26), lineno=987, col_offset=24, end_lineno=987, end_col_offset=26), ctx=Load(), lineno=987, col_offset=12, end_lineno=987, end_col_offset=27), attr='attributes', ctx=Load(), lineno=987, col_offset=12, end_lineno=987, end_col_offset=38), attr='append', ctx=Load(), lineno=987, col_offset=12, end_lineno=987, end_col_offset=45), args=[Name(id='attribute_key', ctx=Load(), lineno=987, col_offset=46, end_lineno=987, end_col_offset=59)], lineno=987, col_offset=12, end_lineno=987, end_col_offset=60), lineno=987, col_offset=12, end_lineno=987, end_col_offset=60)], lineno=984, col_offset=8, end_lineno=987, end_col_offset=60)], returns=Constant(value=None, lineno=971, col_offset=59, end_lineno=971, end_col_offset=63), lineno=971, col_offset=4, end_lineno=987, end_col_offset=60), FunctionDef(name='_logger_name', args=arguments(args=[arg(arg='node', annotation=Attribute(value=Name(id='ast', ctx=Load(), lineno=990, col_offset=27, end_lineno=990, end_col_offset=30), attr='Call', ctx=Load(), lineno=990, col_offset=27, end_lineno=990, end_col_offset=35), lineno=990, col_offset=21, end_lineno=990, end_col_offset=35)]), body=[Assign(targets=[Name(id='base_node', ctx=Store(), lineno=991, col_offset=8, end_lineno=991, end_col_offset=17)], value=IfExp(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=991, col_offset=39, end_lineno=991, end_col_offset=49), args=[Attribute(value=Name(id='node', ctx=Load(), lineno=991, col_offset=50, end_lineno=991, end_col_offset=54), attr='func', ctx=Load(), lineno=991, col_offset=50, end_lineno=991, end_col_offset=59), Attribute(value=Name(id='ast', ctx=Load(), lineno=991, col_offset=61, end_lineno=991, end_col_offset=64), attr='Attribute', ctx=Load(), lineno=991, col_offset=61, end_lineno=991, end_col_offset=74)], lineno=991, col_offset=39, end_lineno=991, end_col_offset=75), body=Attribute(value=Attribute(value=Name(id='node', ctx=Load(), lineno=991, col_offset=20, end_lineno=991, end_col_offset=24), attr='func', ctx=Load(), lineno=991, col_offset=20, end_lineno=991, end_col_offset=29), attr='value', ctx=Load(), lineno=991, col_offset=20, end_lineno=991, end_col_offset=35), orelse=Constant(value=None, lineno=991, col_offset=81, end_lineno=991, end_col_offset=85), lineno=991, col_offset=20, end_lineno=991, end_col_offset=85), lineno=991, col_offset=8, end_lineno=991, end_col_offset=85), If(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=992, col_offset=11, end_lineno=992, end_col_offset=21), args=[Name(id='base_node', ctx=Load(), lineno=992, col_offset=22, end_lineno=992, end_col_offset=31), Attribute(value=Name(id='ast', ctx=Load(), lineno=992, col_offset=33, end_lineno=992, end_col_offset=36), attr='Name', ctx=Load(), lineno=992, col_offset=33, end_lineno=992, end_col_offset=41)], lineno=992, col_offset=11, end_lineno=992, end_col_offset=42), body=[Return(value=Attribute(value=Name(id='base_node', ctx=Load(), lineno=993, col_offset=19, end_lineno=993, end_col_offset=28), attr='id', ctx=Load(), lineno=993, col_offset=19, end_lineno=993, end_col_offset=31), lineno=993, col_offset=12, end_lineno=993, end_col_offset=31)], lineno=992, col_offset=8, end_lineno=993, end_col_offset=31), Return(value=Constant(value=None, lineno=994, col_offset=15, end_lineno=994, end_col_offset=19), lineno=994, col_offset=8, end_lineno=994, end_col_offset=19)], decorator_list=[Name(id='staticmethod', ctx=Load(), lineno=989, col_offset=5, end_lineno=989, end_col_offset=17)], returns=BinOp(left=Name(id='str', ctx=Load(), lineno=990, col_offset=40, end_lineno=990, end_col_offset=43), op=BitOr(), right=Constant(value=None, lineno=990, col_offset=46, end_lineno=990, end_col_offset=50), lineno=990, col_offset=40, end_lineno=990, end_col_offset=50), lineno=990, col_offset=4, end_lineno=994, end_col_offset=19)], decorator_list=[Call(func=Name(id='dataclass', ctx=Load(), lineno=896, col_offset=1, end_lineno=896, end_col_offset=10), keywords=[keyword(arg='slots', value=Constant(value=True, lineno=896, col_offset=17, end_lineno=896, end_col_offset=21), lineno=896, col_offset=11, end_lineno=896, end_col_offset=21), keyword(arg='frozen', value=Constant(value=True, lineno=896, col_offset=30, end_lineno=896, end_col_offset=34), lineno=896, col_offset=23, end_lineno=896, end_col_offset=34)], lineno=896, col_offset=1, end_lineno=896, end_col_offset=35)], lineno=897, col_offset=0, end_lineno=994, end_col_offset=19), FunctionDef(name='scan_file', args=arguments(args=[arg(arg='path', annotation=Name(id='Path', ctx=Load(), lineno=998, col_offset=10, end_lineno=998, end_col_offset=14), lineno=998, col_offset=4, end_lineno=998, end_col_offset=14), arg(arg='policy', annotation=Name(id='ObservabilityPolicy', ctx=Load(), lineno=999, col_offset=12, end_lineno=999, end_col_offset=31), lineno=999, col_offset=4, end_lineno=999, end_col_offset=31)]), body=[Expr(value=Constant(value='Compute scan file.\n\n    Carry out the scan file operation for the surrounding component. Generated documentation highlights how this helper collaborates with neighbouring utilities. Callers rely on the routine to remain stable across releases.\n\n    Parameters\n    ----------\n    path : Path\n        Description for ``path``.\n    policy : ObservabilityPolicy\n        Description for ``policy``.\n\n    Returns\n    -------\n    tuple[list[LogRow], list[MetricRow], list[TraceRow]]\n        Description of return value.\n\n    Examples\n    --------\n    >>> from tools.docs.scan_observability import scan_file\n    >>> result = scan_file(..., ...)\n    >>> result  # doctest: +ELLIPSIS\n    ', lineno=1001, col_offset=4, end_lineno=1022, end_col_offset=7), lineno=1001, col_offset=4, end_lineno=1022, end_col_offset=7), Delete(targets=[Name(id='policy', ctx=Del(), lineno=1023, col_offset=8, end_lineno=1023, end_col_offset=14)], lineno=1023, col_offset=4, end_lineno=1023, end_col_offset=14), Assign(targets=[Tuple(elts=[Name(id='text', ctx=Store(), lineno=1024, col_offset=4, end_lineno=1024, end_col_offset=8), Name(id='tree', ctx=Store(), lineno=1024, col_offset=10, end_lineno=1024, end_col_offset=14)], ctx=Store(), lineno=1024, col_offset=4, end_lineno=1024, end_col_offset=14)], value=Call(func=Name(id='read_ast', ctx=Load(), lineno=1024, col_offset=17, end_lineno=1024, end_col_offset=25), args=[Name(id='path', ctx=Load(), lineno=1024, col_offset=26, end_lineno=1024, end_col_offset=30)], lineno=1024, col_offset=17, end_lineno=1024, end_col_offset=31), lineno=1024, col_offset=4, end_lineno=1024, end_col_offset=31), If(test=BoolOp(op=Or(), values=[UnaryOp(op=Not(), operand=Name(id='text', ctx=Load(), lineno=1025, col_offset=11, end_lineno=1025, end_col_offset=15), lineno=1025, col_offset=7, end_lineno=1025, end_col_offset=15), Compare(left=Name(id='tree', ctx=Load(), lineno=1025, col_offset=19, end_lineno=1025, end_col_offset=23), ops=[Is()], comparators=[Constant(value=None, lineno=1025, col_offset=27, end_lineno=1025, end_col_offset=31)], lineno=1025, col_offset=19, end_lineno=1025, end_col_offset=31)], lineno=1025, col_offset=7, end_lineno=1025, end_col_offset=31), body=[Return(value=Tuple(elts=[List(ctx=Load(), lineno=1026, col_offset=16, end_lineno=1026, end_col_offset=18), List(ctx=Load(), lineno=1026, col_offset=20, end_lineno=1026, end_col_offset=22), List(ctx=Load(), lineno=1026, col_offset=24, end_lineno=1026, end_col_offset=26)], ctx=Load(), lineno=1026, col_offset=15, end_lineno=1026, end_col_offset=27), lineno=1026, col_offset=8, end_lineno=1026, end_col_offset=27)], lineno=1025, col_offset=4, end_lineno=1026, end_col_offset=27), Assign(targets=[Name(id='extractor', ctx=Store(), lineno=1027, col_offset=4, end_lineno=1027, end_col_offset=13)], value=Call(func=Name(id='_ObservabilityExtractor', ctx=Load(), lineno=1027, col_offset=16, end_lineno=1027, end_col_offset=39), keywords=[keyword(arg='text', value=Name(id='text', ctx=Load(), lineno=1027, col_offset=45, end_lineno=1027, end_col_offset=49), lineno=1027, col_offset=40, end_lineno=1027, end_col_offset=49), keyword(arg='path', value=Name(id='path', ctx=Load(), lineno=1027, col_offset=56, end_lineno=1027, end_col_offset=60), lineno=1027, col_offset=51, end_lineno=1027, end_col_offset=60)], lineno=1027, col_offset=16, end_lineno=1027, end_col_offset=61), lineno=1027, col_offset=4, end_lineno=1027, end_col_offset=61), For(target=Name(id='node', ctx=Store(), lineno=1028, col_offset=8, end_lineno=1028, end_col_offset=12), iter=Call(func=Attribute(value=Name(id='ast', ctx=Load(), lineno=1028, col_offset=16, end_lineno=1028, end_col_offset=19), attr='walk', ctx=Load(), lineno=1028, col_offset=16, end_lineno=1028, end_col_offset=24), args=[Name(id='tree', ctx=Load(), lineno=1028, col_offset=25, end_lineno=1028, end_col_offset=29)], lineno=1028, col_offset=16, end_lineno=1028, end_col_offset=30), body=[Expr(value=Call(func=Attribute(value=Name(id='extractor', ctx=Load(), lineno=1029, col_offset=8, end_lineno=1029, end_col_offset=17), attr='process', ctx=Load(), lineno=1029, col_offset=8, end_lineno=1029, end_col_offset=25), args=[Name(id='node', ctx=Load(), lineno=1029, col_offset=26, end_lineno=1029, end_col_offset=30)], lineno=1029, col_offset=8, end_lineno=1029, end_col_offset=31), lineno=1029, col_offset=8, end_lineno=1029, end_col_offset=31)], lineno=1028, col_offset=4, end_lineno=1029, end_col_offset=31), Return(value=Tuple(elts=[Attribute(value=Name(id='extractor', ctx=Load(), lineno=1030, col_offset=12, end_lineno=1030, end_col_offset=21), attr='logs', ctx=Load(), lineno=1030, col_offset=12, end_lineno=1030, end_col_offset=26), Attribute(value=Name(id='extractor', ctx=Load(), lineno=1030, col_offset=28, end_lineno=1030, end_col_offset=37), attr='metrics', ctx=Load(), lineno=1030, col_offset=28, end_lineno=1030, end_col_offset=45), Attribute(value=Name(id='extractor', ctx=Load(), lineno=1030, col_offset=47, end_lineno=1030, end_col_offset=56), attr='traces', ctx=Load(), lineno=1030, col_offset=47, end_lineno=1030, end_col_offset=63)], ctx=Load(), lineno=1030, col_offset=11, end_lineno=1030, end_col_offset=64), lineno=1030, col_offset=4, end_lineno=1030, end_col_offset=64)], returns=Subscript(value=Name(id='tuple', ctx=Load(), lineno=1000, col_offset=5, end_lineno=1000, end_col_offset=10), slice=Tuple(elts=[Subscript(value=Name(id='list', ctx=Load(), lineno=1000, col_offset=11, end_lineno=1000, end_col_offset=15), slice=Name(id='LogRow', ctx=Load(), lineno=1000, col_offset=16, end_lineno=1000, end_col_offset=22), ctx=Load(), lineno=1000, col_offset=11, end_lineno=1000, end_col_offset=23), Subscript(value=Name(id='list', ctx=Load(), lineno=1000, col_offset=25, end_lineno=1000, end_col_offset=29), slice=Name(id='MetricRow', ctx=Load(), lineno=1000, col_offset=30, end_lineno=1000, end_col_offset=39), ctx=Load(), lineno=1000, col_offset=25, end_lineno=1000, end_col_offset=40), Subscript(value=Name(id='list', ctx=Load(), lineno=1000, col_offset=42, end_lineno=1000, end_col_offset=46), slice=Name(id='TraceRow', ctx=Load(), lineno=1000, col_offset=47, end_lineno=1000, end_col_offset=55), ctx=Load(), lineno=1000, col_offset=42, end_lineno=1000, end_col_offset=56)], ctx=Load(), lineno=1000, col_offset=11, end_lineno=1000, end_col_offset=56), ctx=Load(), lineno=1000, col_offset=5, end_lineno=1000, end_col_offset=57), lineno=997, col_offset=0, end_lineno=1030, end_col_offset=64), FunctionDef(name='_links_for', args=arguments(args=[arg(arg='path', annotation=Name(id='Path', ctx=Load(), lineno=1033, col_offset=21, end_lineno=1033, end_col_offset=25), lineno=1033, col_offset=15, end_lineno=1033, end_col_offset=25), arg(arg='lineno', annotation=Name(id='int', ctx=Load(), lineno=1033, col_offset=35, end_lineno=1033, end_col_offset=38), lineno=1033, col_offset=27, end_lineno=1033, end_col_offset=38)]), body=[Expr(value=Constant(value='Links for.\n\n    Parameters\n    ----------\n    path : Path\n        File path.\n    lineno : int\n        Line number.\n\n    Returns\n    -------\n    dict[str, str]\n        Dictionary of link type to URL.\n    ', lineno=1034, col_offset=4, end_lineno=1047, end_col_offset=7), lineno=1034, col_offset=4, end_lineno=1047, end_col_offset=7), AnnAssign(target=Name(id='out', ctx=Store(), lineno=1048, col_offset=4, end_lineno=1048, end_col_offset=7), annotation=Subscript(value=Name(id='dict', ctx=Load(), lineno=1048, col_offset=9, end_lineno=1048, end_col_offset=13), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=1048, col_offset=14, end_lineno=1048, end_col_offset=17), Name(id='str', ctx=Load(), lineno=1048, col_offset=19, end_lineno=1048, end_col_offset=22)], ctx=Load(), lineno=1048, col_offset=14, end_lineno=1048, end_col_offset=22), ctx=Load(), lineno=1048, col_offset=9, end_lineno=1048, end_col_offset=23), value=Dict(lineno=1048, col_offset=26, end_lineno=1048, end_col_offset=28), simple=1, lineno=1048, col_offset=4, end_lineno=1048, end_col_offset=28), If(test=Compare(left=Name(id='LINK_MODE', ctx=Load(), lineno=1049, col_offset=7, end_lineno=1049, end_col_offset=16), ops=[In()], comparators=[Set(elts=[Constant(value='editor', lineno=1049, col_offset=21, end_lineno=1049, end_col_offset=29), Constant(value='both', lineno=1049, col_offset=31, end_lineno=1049, end_col_offset=37)], lineno=1049, col_offset=20, end_lineno=1049, end_col_offset=38)], lineno=1049, col_offset=7, end_lineno=1049, end_col_offset=38), body=[Assign(targets=[Subscript(value=Name(id='out', ctx=Load(), lineno=1050, col_offset=8, end_lineno=1050, end_col_offset=11), slice=Constant(value='editor', lineno=1050, col_offset=12, end_lineno=1050, end_col_offset=20), ctx=Store(), lineno=1050, col_offset=8, end_lineno=1050, end_col_offset=21)], value=Call(func=Name(id='_editor_link', ctx=Load(), lineno=1050, col_offset=24, end_lineno=1050, end_col_offset=36), args=[Name(id='path', ctx=Load(), lineno=1050, col_offset=37, end_lineno=1050, end_col_offset=41), Name(id='lineno', ctx=Load(), lineno=1050, col_offset=43, end_lineno=1050, end_col_offset=49)], lineno=1050, col_offset=24, end_lineno=1050, end_col_offset=50), lineno=1050, col_offset=8, end_lineno=1050, end_col_offset=50)], lineno=1049, col_offset=4, end_lineno=1050, end_col_offset=50), If(test=Compare(left=Name(id='LINK_MODE', ctx=Load(), lineno=1051, col_offset=7, end_lineno=1051, end_col_offset=16), ops=[In()], comparators=[Set(elts=[Constant(value='github', lineno=1051, col_offset=21, end_lineno=1051, end_col_offset=29), Constant(value='both', lineno=1051, col_offset=31, end_lineno=1051, end_col_offset=37)], lineno=1051, col_offset=20, end_lineno=1051, end_col_offset=38)], lineno=1051, col_offset=7, end_lineno=1051, end_col_offset=38), body=[Assign(targets=[Name(id='gh', ctx=Store(), lineno=1052, col_offset=8, end_lineno=1052, end_col_offset=10)], value=Call(func=Name(id='_gh_link', ctx=Load(), lineno=1052, col_offset=13, end_lineno=1052, end_col_offset=21), args=[Name(id='path', ctx=Load(), lineno=1052, col_offset=22, end_lineno=1052, end_col_offset=26), Name(id='lineno', ctx=Load(), lineno=1052, col_offset=28, end_lineno=1052, end_col_offset=34)], lineno=1052, col_offset=13, end_lineno=1052, end_col_offset=35), lineno=1052, col_offset=8, end_lineno=1052, end_col_offset=35), If(test=Name(id='gh', ctx=Load(), lineno=1053, col_offset=11, end_lineno=1053, end_col_offset=13), body=[Assign(targets=[Subscript(value=Name(id='out', ctx=Load(), lineno=1054, col_offset=12, end_lineno=1054, end_col_offset=15), slice=Constant(value='github', lineno=1054, col_offset=16, end_lineno=1054, end_col_offset=24), ctx=Store(), lineno=1054, col_offset=12, end_lineno=1054, end_col_offset=25)], value=Name(id='gh', ctx=Load(), lineno=1054, col_offset=28, end_lineno=1054, end_col_offset=30), lineno=1054, col_offset=12, end_lineno=1054, end_col_offset=30)], lineno=1053, col_offset=8, end_lineno=1054, end_col_offset=30)], lineno=1051, col_offset=4, end_lineno=1054, end_col_offset=30), Return(value=Name(id='out', ctx=Load(), lineno=1055, col_offset=11, end_lineno=1055, end_col_offset=14), lineno=1055, col_offset=4, end_lineno=1055, end_col_offset=14)], returns=Subscript(value=Name(id='dict', ctx=Load(), lineno=1033, col_offset=43, end_lineno=1033, end_col_offset=47), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=1033, col_offset=48, end_lineno=1033, end_col_offset=51), Name(id='str', ctx=Load(), lineno=1033, col_offset=53, end_lineno=1033, end_col_offset=56)], ctx=Load(), lineno=1033, col_offset=48, end_lineno=1033, end_col_offset=56), ctx=Load(), lineno=1033, col_offset=43, end_lineno=1033, end_col_offset=57), lineno=1033, col_offset=0, end_lineno=1055, end_col_offset=14), FunctionDef(name='_write_config_summary', args=arguments(args=[arg(arg='metrics', annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=1059, col_offset=13, end_lineno=1059, end_col_offset=17), slice=Name(id='MetricRow', ctx=Load(), lineno=1059, col_offset=18, end_lineno=1059, end_col_offset=27), ctx=Load(), lineno=1059, col_offset=13, end_lineno=1059, end_col_offset=28), lineno=1059, col_offset=4, end_lineno=1059, end_col_offset=28), arg(arg='logs', annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=1059, col_offset=36, end_lineno=1059, end_col_offset=40), slice=Name(id='LogRow', ctx=Load(), lineno=1059, col_offset=41, end_lineno=1059, end_col_offset=47), ctx=Load(), lineno=1059, col_offset=36, end_lineno=1059, end_col_offset=48), lineno=1059, col_offset=30, end_lineno=1059, end_col_offset=48), arg(arg='traces', annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=1059, col_offset=58, end_lineno=1059, end_col_offset=62), slice=Name(id='TraceRow', ctx=Load(), lineno=1059, col_offset=63, end_lineno=1059, end_col_offset=71), ctx=Load(), lineno=1059, col_offset=58, end_lineno=1059, end_col_offset=72), lineno=1059, col_offset=50, end_lineno=1059, end_col_offset=72)]), body=[Expr(value=Constant(value='Emit a Markdown summary that Sphinx includes in observability docs.', lineno=1061, col_offset=4, end_lineno=1061, end_col_offset=77), lineno=1061, col_offset=4, end_lineno=1061, end_col_offset=77), If(test=BoolOp(op=And(), values=[UnaryOp(op=Not(), operand=Name(id='metrics', ctx=Load(), lineno=1062, col_offset=11, end_lineno=1062, end_col_offset=18), lineno=1062, col_offset=7, end_lineno=1062, end_col_offset=18), UnaryOp(op=Not(), operand=Name(id='logs', ctx=Load(), lineno=1062, col_offset=27, end_lineno=1062, end_col_offset=31), lineno=1062, col_offset=23, end_lineno=1062, end_col_offset=31), UnaryOp(op=Not(), operand=Name(id='traces', ctx=Load(), lineno=1062, col_offset=40, end_lineno=1062, end_col_offset=46), lineno=1062, col_offset=36, end_lineno=1062, end_col_offset=46)], lineno=1062, col_offset=7, end_lineno=1062, end_col_offset=46), body=[Expr(value=Call(func=Attribute(value=Name(id='CONFIG_MD', ctx=Load(), lineno=1063, col_offset=8, end_lineno=1063, end_col_offset=17), attr='write_text', ctx=Load(), lineno=1063, col_offset=8, end_lineno=1063, end_col_offset=28), args=[Constant(value='No observability instrumentation detected for this repository.\n', lineno=1064, col_offset=12, end_lineno=1064, end_col_offset=78)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=1065, col_offset=21, end_lineno=1065, end_col_offset=28), lineno=1065, col_offset=12, end_lineno=1065, end_col_offset=28)], lineno=1063, col_offset=8, end_lineno=1066, end_col_offset=9), lineno=1063, col_offset=8, end_lineno=1066, end_col_offset=9), Return(lineno=1067, col_offset=8, end_lineno=1067, end_col_offset=14)], lineno=1062, col_offset=4, end_lineno=1067, end_col_offset=14), AnnAssign(target=Name(id='lines', ctx=Store(), lineno=1069, col_offset=4, end_lineno=1069, end_col_offset=9), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=1069, col_offset=11, end_lineno=1069, end_col_offset=15), slice=Name(id='str', ctx=Load(), lineno=1069, col_offset=16, end_lineno=1069, end_col_offset=19), ctx=Load(), lineno=1069, col_offset=11, end_lineno=1069, end_col_offset=20), value=List(elts=[Constant(value='# Observability Instrumentation', lineno=1069, col_offset=24, end_lineno=1069, end_col_offset=57), Constant(value='', lineno=1069, col_offset=59, end_lineno=1069, end_col_offset=61)], ctx=Load(), lineno=1069, col_offset=23, end_lineno=1069, end_col_offset=62), simple=1, lineno=1069, col_offset=4, end_lineno=1069, end_col_offset=62), If(test=Name(id='metrics', ctx=Load(), lineno=1070, col_offset=7, end_lineno=1070, end_col_offset=14), body=[Expr(value=Call(func=Attribute(value=Name(id='lines', ctx=Load(), lineno=1071, col_offset=8, end_lineno=1071, end_col_offset=13), attr='append', ctx=Load(), lineno=1071, col_offset=8, end_lineno=1071, end_col_offset=20), args=[Constant(value='## Metrics', lineno=1071, col_offset=21, end_lineno=1071, end_col_offset=33)], lineno=1071, col_offset=8, end_lineno=1071, end_col_offset=34), lineno=1071, col_offset=8, end_lineno=1071, end_col_offset=34), Expr(value=Call(func=Attribute(value=Name(id='lines', ctx=Load(), lineno=1072, col_offset=8, end_lineno=1072, end_col_offset=13), attr='append', ctx=Load(), lineno=1072, col_offset=8, end_lineno=1072, end_col_offset=20), args=[JoinedStr(values=[Constant(value='Discovered ', lineno=1073, col_offset=14, end_lineno=1073, end_col_offset=25), FormattedValue(value=Call(func=Name(id='len', ctx=Load(), lineno=1073, col_offset=26, end_lineno=1073, end_col_offset=29), args=[Name(id='metrics', ctx=Load(), lineno=1073, col_offset=30, end_lineno=1073, end_col_offset=37)], lineno=1073, col_offset=26, end_lineno=1073, end_col_offset=38), conversion=-1, lineno=1073, col_offset=25, end_lineno=1073, end_col_offset=39), Constant(value=' metric definition(s); see `docs/_build/metrics.json`.', lineno=1073, col_offset=39, end_lineno=1073, end_col_offset=93)], lineno=1073, col_offset=12, end_lineno=1073, end_col_offset=94)], lineno=1072, col_offset=8, end_lineno=1074, end_col_offset=9), lineno=1072, col_offset=8, end_lineno=1074, end_col_offset=9), Expr(value=Call(func=Attribute(value=Name(id='lines', ctx=Load(), lineno=1075, col_offset=8, end_lineno=1075, end_col_offset=13), attr='append', ctx=Load(), lineno=1075, col_offset=8, end_lineno=1075, end_col_offset=20), args=[Constant(value='', lineno=1075, col_offset=21, end_lineno=1075, end_col_offset=23)], lineno=1075, col_offset=8, end_lineno=1075, end_col_offset=24), lineno=1075, col_offset=8, end_lineno=1075, end_col_offset=24)], lineno=1070, col_offset=4, end_lineno=1075, end_col_offset=24), If(test=Name(id='logs', ctx=Load(), lineno=1076, col_offset=7, end_lineno=1076, end_col_offset=11), body=[Expr(value=Call(func=Attribute(value=Name(id='lines', ctx=Load(), lineno=1077, col_offset=8, end_lineno=1077, end_col_offset=13), attr='append', ctx=Load(), lineno=1077, col_offset=8, end_lineno=1077, end_col_offset=20), args=[Constant(value='## Logs', lineno=1077, col_offset=21, end_lineno=1077, end_col_offset=30)], lineno=1077, col_offset=8, end_lineno=1077, end_col_offset=31), lineno=1077, col_offset=8, end_lineno=1077, end_col_offset=31), Expr(value=Call(func=Attribute(value=Name(id='lines', ctx=Load(), lineno=1078, col_offset=8, end_lineno=1078, end_col_offset=13), attr='append', ctx=Load(), lineno=1078, col_offset=8, end_lineno=1078, end_col_offset=20), args=[JoinedStr(values=[Constant(value='Collected ', lineno=1079, col_offset=14, end_lineno=1079, end_col_offset=24), FormattedValue(value=Call(func=Name(id='len', ctx=Load(), lineno=1079, col_offset=25, end_lineno=1079, end_col_offset=28), args=[Name(id='logs', ctx=Load(), lineno=1079, col_offset=29, end_lineno=1079, end_col_offset=33)], lineno=1079, col_offset=25, end_lineno=1079, end_col_offset=34), conversion=-1, lineno=1079, col_offset=24, end_lineno=1079, end_col_offset=35), Constant(value=' structured log template(s); see `docs/_build/log_events.json`.', lineno=1079, col_offset=35, end_lineno=1079, end_col_offset=98)], lineno=1079, col_offset=12, end_lineno=1079, end_col_offset=99)], lineno=1078, col_offset=8, end_lineno=1080, end_col_offset=9), lineno=1078, col_offset=8, end_lineno=1080, end_col_offset=9), Expr(value=Call(func=Attribute(value=Name(id='lines', ctx=Load(), lineno=1081, col_offset=8, end_lineno=1081, end_col_offset=13), attr='append', ctx=Load(), lineno=1081, col_offset=8, end_lineno=1081, end_col_offset=20), args=[Constant(value='', lineno=1081, col_offset=21, end_lineno=1081, end_col_offset=23)], lineno=1081, col_offset=8, end_lineno=1081, end_col_offset=24), lineno=1081, col_offset=8, end_lineno=1081, end_col_offset=24)], lineno=1076, col_offset=4, end_lineno=1081, end_col_offset=24), If(test=Name(id='traces', ctx=Load(), lineno=1082, col_offset=7, end_lineno=1082, end_col_offset=13), body=[Expr(value=Call(func=Attribute(value=Name(id='lines', ctx=Load(), lineno=1083, col_offset=8, end_lineno=1083, end_col_offset=13), attr='append', ctx=Load(), lineno=1083, col_offset=8, end_lineno=1083, end_col_offset=20), args=[Constant(value='## Traces', lineno=1083, col_offset=21, end_lineno=1083, end_col_offset=32)], lineno=1083, col_offset=8, end_lineno=1083, end_col_offset=33), lineno=1083, col_offset=8, end_lineno=1083, end_col_offset=33), Expr(value=Call(func=Attribute(value=Name(id='lines', ctx=Load(), lineno=1084, col_offset=8, end_lineno=1084, end_col_offset=13), attr='append', ctx=Load(), lineno=1084, col_offset=8, end_lineno=1084, end_col_offset=20), args=[JoinedStr(values=[Constant(value='Detected ', lineno=1084, col_offset=23, end_lineno=1084, end_col_offset=32), FormattedValue(value=Call(func=Name(id='len', ctx=Load(), lineno=1084, col_offset=33, end_lineno=1084, end_col_offset=36), args=[Name(id='traces', ctx=Load(), lineno=1084, col_offset=37, end_lineno=1084, end_col_offset=43)], lineno=1084, col_offset=33, end_lineno=1084, end_col_offset=44), conversion=-1, lineno=1084, col_offset=32, end_lineno=1084, end_col_offset=45), Constant(value=' span definition(s); see `docs/_build/traces.json`.', lineno=1084, col_offset=45, end_lineno=1084, end_col_offset=96)], lineno=1084, col_offset=21, end_lineno=1084, end_col_offset=97)], lineno=1084, col_offset=8, end_lineno=1084, end_col_offset=98), lineno=1084, col_offset=8, end_lineno=1084, end_col_offset=98), Expr(value=Call(func=Attribute(value=Name(id='lines', ctx=Load(), lineno=1085, col_offset=8, end_lineno=1085, end_col_offset=13), attr='append', ctx=Load(), lineno=1085, col_offset=8, end_lineno=1085, end_col_offset=20), args=[Constant(value='', lineno=1085, col_offset=21, end_lineno=1085, end_col_offset=23)], lineno=1085, col_offset=8, end_lineno=1085, end_col_offset=24), lineno=1085, col_offset=8, end_lineno=1085, end_col_offset=24)], lineno=1082, col_offset=4, end_lineno=1085, end_col_offset=24), Expr(value=Call(func=Attribute(value=Name(id='CONFIG_MD', ctx=Load(), lineno=1087, col_offset=4, end_lineno=1087, end_col_offset=13), attr='write_text', ctx=Load(), lineno=1087, col_offset=4, end_lineno=1087, end_col_offset=24), args=[Call(func=Attribute(value=Constant(value='\n', lineno=1087, col_offset=25, end_lineno=1087, end_col_offset=29), attr='join', ctx=Load(), lineno=1087, col_offset=25, end_lineno=1087, end_col_offset=34), args=[Name(id='lines', ctx=Load(), lineno=1087, col_offset=35, end_lineno=1087, end_col_offset=40)], lineno=1087, col_offset=25, end_lineno=1087, end_col_offset=41)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=1087, col_offset=52, end_lineno=1087, end_col_offset=59), lineno=1087, col_offset=43, end_lineno=1087, end_col_offset=59)], lineno=1087, col_offset=4, end_lineno=1087, end_col_offset=60), lineno=1087, col_offset=4, end_lineno=1087, end_col_offset=60)], returns=Constant(value=None, lineno=1060, col_offset=5, end_lineno=1060, end_col_offset=9), lineno=1058, col_offset=0, end_lineno=1087, end_col_offset=60), FunctionDef(name='_scan_repository', args=arguments(args=[arg(arg='policy', annotation=Name(id='ObservabilityPolicy', ctx=Load(), lineno=1091, col_offset=12, end_lineno=1091, end_col_offset=31), lineno=1091, col_offset=4, end_lineno=1091, end_col_offset=31)]), body=[Expr(value=Constant(value='Traverse the source tree and collect observability artefacts.\n\n    Parameters\n    ----------\n    policy : ObservabilityPolicy\n        Observability policy.\n\n    Returns\n    -------\n    tuple[list[LogRow], list[MetricRow], list[TraceRow], list[LintFinding]]\n        (logs, metrics, traces, lints) tuple.\n    ', lineno=1093, col_offset=4, end_lineno=1104, end_col_offset=7), lineno=1093, col_offset=4, end_lineno=1104, end_col_offset=7), AnnAssign(target=Name(id='all_logs', ctx=Store(), lineno=1105, col_offset=4, end_lineno=1105, end_col_offset=12), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=1105, col_offset=14, end_lineno=1105, end_col_offset=18), slice=Name(id='LogRow', ctx=Load(), lineno=1105, col_offset=19, end_lineno=1105, end_col_offset=25), ctx=Load(), lineno=1105, col_offset=14, end_lineno=1105, end_col_offset=26), value=List(ctx=Load(), lineno=1105, col_offset=29, end_lineno=1105, end_col_offset=31), simple=1, lineno=1105, col_offset=4, end_lineno=1105, end_col_offset=31), AnnAssign(target=Name(id='all_metrics', ctx=Store(), lineno=1106, col_offset=4, end_lineno=1106, end_col_offset=15), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=1106, col_offset=17, end_lineno=1106, end_col_offset=21), slice=Name(id='MetricRow', ctx=Load(), lineno=1106, col_offset=22, end_lineno=1106, end_col_offset=31), ctx=Load(), lineno=1106, col_offset=17, end_lineno=1106, end_col_offset=32), value=List(ctx=Load(), lineno=1106, col_offset=35, end_lineno=1106, end_col_offset=37), simple=1, lineno=1106, col_offset=4, end_lineno=1106, end_col_offset=37), AnnAssign(target=Name(id='all_traces', ctx=Store(), lineno=1107, col_offset=4, end_lineno=1107, end_col_offset=14), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=1107, col_offset=16, end_lineno=1107, end_col_offset=20), slice=Name(id='TraceRow', ctx=Load(), lineno=1107, col_offset=21, end_lineno=1107, end_col_offset=29), ctx=Load(), lineno=1107, col_offset=16, end_lineno=1107, end_col_offset=30), value=List(ctx=Load(), lineno=1107, col_offset=33, end_lineno=1107, end_col_offset=35), simple=1, lineno=1107, col_offset=4, end_lineno=1107, end_col_offset=35), AnnAssign(target=Name(id='lints', ctx=Store(), lineno=1108, col_offset=4, end_lineno=1108, end_col_offset=9), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=1108, col_offset=11, end_lineno=1108, end_col_offset=15), slice=Name(id='LintFinding', ctx=Load(), lineno=1108, col_offset=16, end_lineno=1108, end_col_offset=27), ctx=Load(), lineno=1108, col_offset=11, end_lineno=1108, end_col_offset=28), value=List(ctx=Load(), lineno=1108, col_offset=31, end_lineno=1108, end_col_offset=33), simple=1, lineno=1108, col_offset=4, end_lineno=1108, end_col_offset=33), For(target=Name(id='py', ctx=Store(), lineno=1110, col_offset=8, end_lineno=1110, end_col_offset=10), iter=Call(func=Attribute(value=Name(id='SRC', ctx=Load(), lineno=1110, col_offset=14, end_lineno=1110, end_col_offset=17), attr='rglob', ctx=Load(), lineno=1110, col_offset=14, end_lineno=1110, end_col_offset=23), args=[Constant(value='*.py', lineno=1110, col_offset=24, end_lineno=1110, end_col_offset=30)], lineno=1110, col_offset=14, end_lineno=1110, end_col_offset=31), body=[Assign(targets=[Tuple(elts=[Name(id='file_logs', ctx=Store(), lineno=1111, col_offset=8, end_lineno=1111, end_col_offset=17), Name(id='file_metrics', ctx=Store(), lineno=1111, col_offset=19, end_lineno=1111, end_col_offset=31), Name(id='file_traces', ctx=Store(), lineno=1111, col_offset=33, end_lineno=1111, end_col_offset=44)], ctx=Store(), lineno=1111, col_offset=8, end_lineno=1111, end_col_offset=44)], value=Call(func=Name(id='scan_file', ctx=Load(), lineno=1111, col_offset=47, end_lineno=1111, end_col_offset=56), args=[Name(id='py', ctx=Load(), lineno=1111, col_offset=57, end_lineno=1111, end_col_offset=59), Name(id='policy', ctx=Load(), lineno=1111, col_offset=61, end_lineno=1111, end_col_offset=67)], lineno=1111, col_offset=47, end_lineno=1111, end_col_offset=68), lineno=1111, col_offset=8, end_lineno=1111, end_col_offset=68), Expr(value=Call(func=Attribute(value=Name(id='all_logs', ctx=Load(), lineno=1112, col_offset=8, end_lineno=1112, end_col_offset=16), attr='extend', ctx=Load(), lineno=1112, col_offset=8, end_lineno=1112, end_col_offset=23), args=[Name(id='file_logs', ctx=Load(), lineno=1112, col_offset=24, end_lineno=1112, end_col_offset=33)], lineno=1112, col_offset=8, end_lineno=1112, end_col_offset=34), lineno=1112, col_offset=8, end_lineno=1112, end_col_offset=34), Expr(value=Call(func=Attribute(value=Name(id='all_metrics', ctx=Load(), lineno=1113, col_offset=8, end_lineno=1113, end_col_offset=19), attr='extend', ctx=Load(), lineno=1113, col_offset=8, end_lineno=1113, end_col_offset=26), args=[Name(id='file_metrics', ctx=Load(), lineno=1113, col_offset=27, end_lineno=1113, end_col_offset=39)], lineno=1113, col_offset=8, end_lineno=1113, end_col_offset=40), lineno=1113, col_offset=8, end_lineno=1113, end_col_offset=40), Expr(value=Call(func=Attribute(value=Name(id='all_traces', ctx=Load(), lineno=1114, col_offset=8, end_lineno=1114, end_col_offset=18), attr='extend', ctx=Load(), lineno=1114, col_offset=8, end_lineno=1114, end_col_offset=25), args=[Name(id='file_traces', ctx=Load(), lineno=1114, col_offset=26, end_lineno=1114, end_col_offset=37)], lineno=1114, col_offset=8, end_lineno=1114, end_col_offset=38), lineno=1114, col_offset=8, end_lineno=1114, end_col_offset=38), For(target=Name(id='metric', ctx=Store(), lineno=1116, col_offset=12, end_lineno=1116, end_col_offset=18), iter=Name(id='file_metrics', ctx=Load(), lineno=1116, col_offset=22, end_lineno=1116, end_col_offset=34), body=[Expr(value=Call(func=Attribute(value=Name(id='lints', ctx=Load(), lineno=1117, col_offset=12, end_lineno=1117, end_col_offset=17), attr='extend', ctx=Load(), lineno=1117, col_offset=12, end_lineno=1117, end_col_offset=24), args=[Call(func=Name(id='_lint_metric', ctx=Load(), lineno=1117, col_offset=25, end_lineno=1117, end_col_offset=37), args=[Name(id='policy', ctx=Load(), lineno=1117, col_offset=38, end_lineno=1117, end_col_offset=44), Name(id='metric', ctx=Load(), lineno=1117, col_offset=46, end_lineno=1117, end_col_offset=52)], lineno=1117, col_offset=25, end_lineno=1117, end_col_offset=53)], lineno=1117, col_offset=12, end_lineno=1117, end_col_offset=54), lineno=1117, col_offset=12, end_lineno=1117, end_col_offset=54)], lineno=1116, col_offset=8, end_lineno=1117, end_col_offset=54), For(target=Name(id='log_event', ctx=Store(), lineno=1118, col_offset=12, end_lineno=1118, end_col_offset=21), iter=Name(id='file_logs', ctx=Load(), lineno=1118, col_offset=25, end_lineno=1118, end_col_offset=34), body=[Expr(value=Call(func=Attribute(value=Name(id='lints', ctx=Load(), lineno=1119, col_offset=12, end_lineno=1119, end_col_offset=17), attr='extend', ctx=Load(), lineno=1119, col_offset=12, end_lineno=1119, end_col_offset=24), args=[Call(func=Name(id='_lint_log', ctx=Load(), lineno=1119, col_offset=25, end_lineno=1119, end_col_offset=34), args=[Name(id='policy', ctx=Load(), lineno=1119, col_offset=35, end_lineno=1119, end_col_offset=41), Name(id='log_event', ctx=Load(), lineno=1119, col_offset=43, end_lineno=1119, end_col_offset=52)], lineno=1119, col_offset=25, end_lineno=1119, end_col_offset=53)], lineno=1119, col_offset=12, end_lineno=1119, end_col_offset=54), lineno=1119, col_offset=12, end_lineno=1119, end_col_offset=54)], lineno=1118, col_offset=8, end_lineno=1119, end_col_offset=54), For(target=Name(id='trace', ctx=Store(), lineno=1120, col_offset=12, end_lineno=1120, end_col_offset=17), iter=Name(id='file_traces', ctx=Load(), lineno=1120, col_offset=21, end_lineno=1120, end_col_offset=32), body=[Expr(value=Call(func=Attribute(value=Name(id='lints', ctx=Load(), lineno=1121, col_offset=12, end_lineno=1121, end_col_offset=17), attr='extend', ctx=Load(), lineno=1121, col_offset=12, end_lineno=1121, end_col_offset=24), args=[Call(func=Name(id='_lint_trace', ctx=Load(), lineno=1121, col_offset=25, end_lineno=1121, end_col_offset=36), args=[Name(id='policy', ctx=Load(), lineno=1121, col_offset=37, end_lineno=1121, end_col_offset=43), Name(id='trace', ctx=Load(), lineno=1121, col_offset=45, end_lineno=1121, end_col_offset=50)], lineno=1121, col_offset=25, end_lineno=1121, end_col_offset=51)], lineno=1121, col_offset=12, end_lineno=1121, end_col_offset=52), lineno=1121, col_offset=12, end_lineno=1121, end_col_offset=52)], lineno=1120, col_offset=8, end_lineno=1121, end_col_offset=52)], lineno=1110, col_offset=4, end_lineno=1121, end_col_offset=52), Return(value=Tuple(elts=[Name(id='all_logs', ctx=Load(), lineno=1123, col_offset=11, end_lineno=1123, end_col_offset=19), Name(id='all_metrics', ctx=Load(), lineno=1123, col_offset=21, end_lineno=1123, end_col_offset=32), Name(id='all_traces', ctx=Load(), lineno=1123, col_offset=34, end_lineno=1123, end_col_offset=44), Name(id='lints', ctx=Load(), lineno=1123, col_offset=46, end_lineno=1123, end_col_offset=51)], ctx=Load(), lineno=1123, col_offset=11, end_lineno=1123, end_col_offset=51), lineno=1123, col_offset=4, end_lineno=1123, end_col_offset=51)], returns=Subscript(value=Name(id='tuple', ctx=Load(), lineno=1092, col_offset=5, end_lineno=1092, end_col_offset=10), slice=Tuple(elts=[Subscript(value=Name(id='list', ctx=Load(), lineno=1092, col_offset=11, end_lineno=1092, end_col_offset=15), slice=Name(id='LogRow', ctx=Load(), lineno=1092, col_offset=16, end_lineno=1092, end_col_offset=22), ctx=Load(), lineno=1092, col_offset=11, end_lineno=1092, end_col_offset=23), Subscript(value=Name(id='list', ctx=Load(), lineno=1092, col_offset=25, end_lineno=1092, end_col_offset=29), slice=Name(id='MetricRow', ctx=Load(), lineno=1092, col_offset=30, end_lineno=1092, end_col_offset=39), ctx=Load(), lineno=1092, col_offset=25, end_lineno=1092, end_col_offset=40), Subscript(value=Name(id='list', ctx=Load(), lineno=1092, col_offset=42, end_lineno=1092, end_col_offset=46), slice=Name(id='TraceRow', ctx=Load(), lineno=1092, col_offset=47, end_lineno=1092, end_col_offset=55), ctx=Load(), lineno=1092, col_offset=42, end_lineno=1092, end_col_offset=56), Subscript(value=Name(id='list', ctx=Load(), lineno=1092, col_offset=58, end_lineno=1092, end_col_offset=62), slice=Name(id='LintFinding', ctx=Load(), lineno=1092, col_offset=63, end_lineno=1092, end_col_offset=74), ctx=Load(), lineno=1092, col_offset=58, end_lineno=1092, end_col_offset=75)], ctx=Load(), lineno=1092, col_offset=11, end_lineno=1092, end_col_offset=75), ctx=Load(), lineno=1092, col_offset=5, end_lineno=1092, end_col_offset=76), lineno=1090, col_offset=0, end_lineno=1123, end_col_offset=51), FunctionDef(name='_load_runbooks', args=arguments(args=[arg(arg='policy', annotation=Name(id='ObservabilityPolicy', ctx=Load(), lineno=1126, col_offset=27, end_lineno=1126, end_col_offset=46), lineno=1126, col_offset=19, end_lineno=1126, end_col_offset=46)]), body=[Expr(value=Constant(value='Load optional runbook mappings from the error taxonomy.\n\n    Parameters\n    ----------\n    policy : ObservabilityPolicy\n        Observability policy.\n\n    Returns\n    -------\n    dict[str, str]\n        Mapping of error message to runbook URL.\n    ', lineno=1127, col_offset=4, end_lineno=1138, end_col_offset=7), lineno=1127, col_offset=4, end_lineno=1138, end_col_offset=7), Assign(targets=[Name(id='taxonomy', ctx=Store(), lineno=1139, col_offset=4, end_lineno=1139, end_col_offset=12)], value=BoolOp(op=Or(), values=[Attribute(value=Name(id='policy', ctx=Load(), lineno=1139, col_offset=15, end_lineno=1139, end_col_offset=21), attr='error_taxonomy_json', ctx=Load(), lineno=1139, col_offset=15, end_lineno=1139, end_col_offset=41), Constant(value='', lineno=1139, col_offset=45, end_lineno=1139, end_col_offset=47)], lineno=1139, col_offset=15, end_lineno=1139, end_col_offset=47), lineno=1139, col_offset=4, end_lineno=1139, end_col_offset=47), Assign(targets=[Name(id='tax_path', ctx=Store(), lineno=1140, col_offset=4, end_lineno=1140, end_col_offset=12)], value=IfExp(test=Name(id='taxonomy', ctx=Load(), lineno=1140, col_offset=34, end_lineno=1140, end_col_offset=42), body=BinOp(left=Name(id='ROOT', ctx=Load(), lineno=1140, col_offset=15, end_lineno=1140, end_col_offset=19), op=Div(), right=Name(id='taxonomy', ctx=Load(), lineno=1140, col_offset=22, end_lineno=1140, end_col_offset=30), lineno=1140, col_offset=15, end_lineno=1140, end_col_offset=30), orelse=BinOp(left=Name(id='ROOT', ctx=Load(), lineno=1140, col_offset=48, end_lineno=1140, end_col_offset=52), op=Div(), right=Constant(value='', lineno=1140, col_offset=55, end_lineno=1140, end_col_offset=57), lineno=1140, col_offset=48, end_lineno=1140, end_col_offset=57), lineno=1140, col_offset=15, end_lineno=1140, end_col_offset=57), lineno=1140, col_offset=4, end_lineno=1140, end_col_offset=57), If(test=UnaryOp(op=Not(), operand=Call(func=Attribute(value=Name(id='tax_path', ctx=Load(), lineno=1141, col_offset=11, end_lineno=1141, end_col_offset=19), attr='exists', ctx=Load(), lineno=1141, col_offset=11, end_lineno=1141, end_col_offset=26), lineno=1141, col_offset=11, end_lineno=1141, end_col_offset=28), lineno=1141, col_offset=7, end_lineno=1141, end_col_offset=28), body=[Return(value=Dict(lineno=1142, col_offset=15, end_lineno=1142, end_col_offset=17), lineno=1142, col_offset=8, end_lineno=1142, end_col_offset=17)], lineno=1141, col_offset=4, end_lineno=1142, end_col_offset=17), Try(body=[Assign(targets=[Name(id='tax_text', ctx=Store(), lineno=1145, col_offset=8, end_lineno=1145, end_col_offset=16)], value=Call(func=Attribute(value=Name(id='tax_path', ctx=Load(), lineno=1145, col_offset=19, end_lineno=1145, end_col_offset=27), attr='read_text', ctx=Load(), lineno=1145, col_offset=19, end_lineno=1145, end_col_offset=37), keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=1145, col_offset=47, end_lineno=1145, end_col_offset=54), lineno=1145, col_offset=38, end_lineno=1145, end_col_offset=54)], lineno=1145, col_offset=19, end_lineno=1145, end_col_offset=55), lineno=1145, col_offset=8, end_lineno=1145, end_col_offset=55)], handlers=[ExceptHandler(type=Name(id='OSError', ctx=Load(), lineno=1146, col_offset=11, end_lineno=1146, end_col_offset=18), name='exc', body=[Expr(value=Call(func=Attribute(value=Call(func=Name(id='with_fields', ctx=Load(), lineno=1147, col_offset=8, end_lineno=1147, end_col_offset=19), args=[Name(id='LOGGER', ctx=Load(), lineno=1147, col_offset=20, end_lineno=1147, end_col_offset=26)], keywords=[keyword(arg='taxonomy', value=Call(func=Name(id='str', ctx=Load(), lineno=1147, col_offset=37, end_lineno=1147, end_col_offset=40), args=[Name(id='tax_path', ctx=Load(), lineno=1147, col_offset=41, end_lineno=1147, end_col_offset=49)], lineno=1147, col_offset=37, end_lineno=1147, end_col_offset=50), lineno=1147, col_offset=28, end_lineno=1147, end_col_offset=50)], lineno=1147, col_offset=8, end_lineno=1147, end_col_offset=51), attr='warning', ctx=Load(), lineno=1147, col_offset=8, end_lineno=1147, end_col_offset=59), args=[Constant(value='Failed to read error taxonomy JSON: %s', lineno=1148, col_offset=12, end_lineno=1148, end_col_offset=52), Name(id='exc', ctx=Load(), lineno=1148, col_offset=54, end_lineno=1148, end_col_offset=57)], lineno=1147, col_offset=8, end_lineno=1149, end_col_offset=9), lineno=1147, col_offset=8, end_lineno=1149, end_col_offset=9), Return(value=Dict(lineno=1150, col_offset=15, end_lineno=1150, end_col_offset=17), lineno=1150, col_offset=8, end_lineno=1150, end_col_offset=17)], lineno=1146, col_offset=4, end_lineno=1150, end_col_offset=17)], lineno=1144, col_offset=4, end_lineno=1150, end_col_offset=17), Try(body=[AnnAssign(target=Name(id='tax_data_raw', ctx=Store(), lineno=1153, col_offset=8, end_lineno=1153, end_col_offset=20), annotation=Name(id='object', ctx=Load(), lineno=1153, col_offset=22, end_lineno=1153, end_col_offset=28), value=Call(func=Attribute(value=Name(id='json', ctx=Load(), lineno=1153, col_offset=31, end_lineno=1153, end_col_offset=35), attr='loads', ctx=Load(), lineno=1153, col_offset=31, end_lineno=1153, end_col_offset=41), args=[Name(id='tax_text', ctx=Load(), lineno=1153, col_offset=42, end_lineno=1153, end_col_offset=50)], lineno=1153, col_offset=31, end_lineno=1153, end_col_offset=51), simple=1, lineno=1153, col_offset=8, end_lineno=1153, end_col_offset=51)], handlers=[ExceptHandler(type=Attribute(value=Name(id='json', ctx=Load(), lineno=1154, col_offset=11, end_lineno=1154, end_col_offset=15), attr='JSONDecodeError', ctx=Load(), lineno=1154, col_offset=11, end_lineno=1154, end_col_offset=31), name='exc', body=[Expr(value=Call(func=Attribute(value=Call(func=Name(id='with_fields', ctx=Load(), lineno=1155, col_offset=8, end_lineno=1155, end_col_offset=19), args=[Name(id='LOGGER', ctx=Load(), lineno=1155, col_offset=20, end_lineno=1155, end_col_offset=26)], keywords=[keyword(arg='taxonomy', value=Call(func=Name(id='str', ctx=Load(), lineno=1155, col_offset=37, end_lineno=1155, end_col_offset=40), args=[Name(id='tax_path', ctx=Load(), lineno=1155, col_offset=41, end_lineno=1155, end_col_offset=49)], lineno=1155, col_offset=37, end_lineno=1155, end_col_offset=50), lineno=1155, col_offset=28, end_lineno=1155, end_col_offset=50)], lineno=1155, col_offset=8, end_lineno=1155, end_col_offset=51), attr='warning', ctx=Load(), lineno=1155, col_offset=8, end_lineno=1155, end_col_offset=59), args=[Constant(value='Failed to parse error taxonomy JSON: %s', lineno=1156, col_offset=12, end_lineno=1156, end_col_offset=53), Name(id='exc', ctx=Load(), lineno=1156, col_offset=55, end_lineno=1156, end_col_offset=58)], lineno=1155, col_offset=8, end_lineno=1157, end_col_offset=9), lineno=1155, col_offset=8, end_lineno=1157, end_col_offset=9), Return(value=Dict(lineno=1158, col_offset=15, end_lineno=1158, end_col_offset=17), lineno=1158, col_offset=8, end_lineno=1158, end_col_offset=17)], lineno=1154, col_offset=4, end_lineno=1158, end_col_offset=17)], lineno=1152, col_offset=4, end_lineno=1158, end_col_offset=17), If(test=UnaryOp(op=Not(), operand=Call(func=Name(id='isinstance', ctx=Load(), lineno=1160, col_offset=11, end_lineno=1160, end_col_offset=21), args=[Name(id='tax_data_raw', ctx=Load(), lineno=1160, col_offset=22, end_lineno=1160, end_col_offset=34), Name(id='Mapping', ctx=Load(), lineno=1160, col_offset=36, end_lineno=1160, end_col_offset=43)], lineno=1160, col_offset=11, end_lineno=1160, end_col_offset=44), lineno=1160, col_offset=7, end_lineno=1160, end_col_offset=44), body=[Return(value=Dict(lineno=1161, col_offset=15, end_lineno=1161, end_col_offset=17), lineno=1161, col_offset=8, end_lineno=1161, end_col_offset=17)], lineno=1160, col_offset=4, end_lineno=1161, end_col_offset=17), Assign(targets=[Name(id='tax_data', ctx=Store(), lineno=1163, col_offset=4, end_lineno=1163, end_col_offset=12)], value=Call(func=Name(id='cast', ctx=Load(), lineno=1163, col_offset=15, end_lineno=1163, end_col_offset=19), args=[Constant(value='Mapping[str, object]', lineno=1163, col_offset=20, end_lineno=1163, end_col_offset=42), Name(id='tax_data_raw', ctx=Load(), lineno=1163, col_offset=44, end_lineno=1163, end_col_offset=56)], lineno=1163, col_offset=15, end_lineno=1163, end_col_offset=57), lineno=1163, col_offset=4, end_lineno=1163, end_col_offset=57), AnnAssign(target=Name(id='runbooks', ctx=Store(), lineno=1165, col_offset=4, end_lineno=1165, end_col_offset=12), annotation=Subscript(value=Name(id='dict', ctx=Load(), lineno=1165, col_offset=14, end_lineno=1165, end_col_offset=18), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=1165, col_offset=19, end_lineno=1165, end_col_offset=22), Name(id='str', ctx=Load(), lineno=1165, col_offset=24, end_lineno=1165, end_col_offset=27)], ctx=Load(), lineno=1165, col_offset=19, end_lineno=1165, end_col_offset=27), ctx=Load(), lineno=1165, col_offset=14, end_lineno=1165, end_col_offset=28), value=Dict(lineno=1165, col_offset=31, end_lineno=1165, end_col_offset=33), simple=1, lineno=1165, col_offset=4, end_lineno=1165, end_col_offset=33), Assign(targets=[Name(id='errors_field', ctx=Store(), lineno=1166, col_offset=4, end_lineno=1166, end_col_offset=16)], value=Call(func=Attribute(value=Name(id='tax_data', ctx=Load(), lineno=1166, col_offset=19, end_lineno=1166, end_col_offset=27), attr='get', ctx=Load(), lineno=1166, col_offset=19, end_lineno=1166, end_col_offset=31), args=[Constant(value='errors', lineno=1166, col_offset=32, end_lineno=1166, end_col_offset=40)], lineno=1166, col_offset=19, end_lineno=1166, end_col_offset=41), lineno=1166, col_offset=4, end_lineno=1166, end_col_offset=41), If(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=1167, col_offset=7, end_lineno=1167, end_col_offset=17), args=[Name(id='errors_field', ctx=Load(), lineno=1167, col_offset=18, end_lineno=1167, end_col_offset=30), Name(id='Sequence', ctx=Load(), lineno=1167, col_offset=32, end_lineno=1167, end_col_offset=40)], lineno=1167, col_offset=7, end_lineno=1167, end_col_offset=41), body=[For(target=Name(id='item', ctx=Store(), lineno=1168, col_offset=12, end_lineno=1168, end_col_offset=16), iter=Name(id='errors_field', ctx=Load(), lineno=1168, col_offset=20, end_lineno=1168, end_col_offset=32), body=[If(test=UnaryOp(op=Not(), operand=Call(func=Name(id='isinstance', ctx=Load(), lineno=1169, col_offset=19, end_lineno=1169, end_col_offset=29), args=[Name(id='item', ctx=Load(), lineno=1169, col_offset=30, end_lineno=1169, end_col_offset=34), Name(id='Mapping', ctx=Load(), lineno=1169, col_offset=36, end_lineno=1169, end_col_offset=43)], lineno=1169, col_offset=19, end_lineno=1169, end_col_offset=44), lineno=1169, col_offset=15, end_lineno=1169, end_col_offset=44), body=[Continue(lineno=1170, col_offset=16, end_lineno=1170, end_col_offset=24)], lineno=1169, col_offset=12, end_lineno=1170, end_col_offset=24), Assign(targets=[Name(id='message', ctx=Store(), lineno=1171, col_offset=12, end_lineno=1171, end_col_offset=19)], value=Call(func=Attribute(value=Name(id='item', ctx=Load(), lineno=1171, col_offset=22, end_lineno=1171, end_col_offset=26), attr='get', ctx=Load(), lineno=1171, col_offset=22, end_lineno=1171, end_col_offset=30), args=[Constant(value='message', lineno=1171, col_offset=31, end_lineno=1171, end_col_offset=40)], lineno=1171, col_offset=22, end_lineno=1171, end_col_offset=41), lineno=1171, col_offset=12, end_lineno=1171, end_col_offset=41), Assign(targets=[Name(id='extensions', ctx=Store(), lineno=1172, col_offset=12, end_lineno=1172, end_col_offset=22)], value=Call(func=Attribute(value=Name(id='item', ctx=Load(), lineno=1172, col_offset=25, end_lineno=1172, end_col_offset=29), attr='get', ctx=Load(), lineno=1172, col_offset=25, end_lineno=1172, end_col_offset=33), args=[Constant(value='extensions', lineno=1172, col_offset=34, end_lineno=1172, end_col_offset=46)], lineno=1172, col_offset=25, end_lineno=1172, end_col_offset=47), lineno=1172, col_offset=12, end_lineno=1172, end_col_offset=47), If(test=BoolOp(op=Or(), values=[UnaryOp(op=Not(), operand=Call(func=Name(id='isinstance', ctx=Load(), lineno=1173, col_offset=19, end_lineno=1173, end_col_offset=29), args=[Name(id='message', ctx=Load(), lineno=1173, col_offset=30, end_lineno=1173, end_col_offset=37), Name(id='str', ctx=Load(), lineno=1173, col_offset=39, end_lineno=1173, end_col_offset=42)], lineno=1173, col_offset=19, end_lineno=1173, end_col_offset=43), lineno=1173, col_offset=15, end_lineno=1173, end_col_offset=43), UnaryOp(op=Not(), operand=Call(func=Name(id='isinstance', ctx=Load(), lineno=1173, col_offset=51, end_lineno=1173, end_col_offset=61), args=[Name(id='extensions', ctx=Load(), lineno=1173, col_offset=62, end_lineno=1173, end_col_offset=72), Name(id='Mapping', ctx=Load(), lineno=1173, col_offset=74, end_lineno=1173, end_col_offset=81)], lineno=1173, col_offset=51, end_lineno=1173, end_col_offset=82), lineno=1173, col_offset=47, end_lineno=1173, end_col_offset=82)], lineno=1173, col_offset=15, end_lineno=1173, end_col_offset=82), body=[Continue(lineno=1174, col_offset=16, end_lineno=1174, end_col_offset=24)], lineno=1173, col_offset=12, end_lineno=1174, end_col_offset=24), Assign(targets=[Name(id='extensions_map', ctx=Store(), lineno=1175, col_offset=12, end_lineno=1175, end_col_offset=26)], value=Call(func=Name(id='cast', ctx=Load(), lineno=1175, col_offset=29, end_lineno=1175, end_col_offset=33), args=[Constant(value='Mapping[str, object]', lineno=1175, col_offset=34, end_lineno=1175, end_col_offset=56), Name(id='extensions', ctx=Load(), lineno=1175, col_offset=58, end_lineno=1175, end_col_offset=68)], lineno=1175, col_offset=29, end_lineno=1175, end_col_offset=69), lineno=1175, col_offset=12, end_lineno=1175, end_col_offset=69), Assign(targets=[Name(id='runbook_value', ctx=Store(), lineno=1176, col_offset=12, end_lineno=1176, end_col_offset=25)], value=Call(func=Attribute(value=Name(id='extensions_map', ctx=Load(), lineno=1176, col_offset=28, end_lineno=1176, end_col_offset=42), attr='get', ctx=Load(), lineno=1176, col_offset=28, end_lineno=1176, end_col_offset=46), args=[Constant(value='runbook', lineno=1176, col_offset=47, end_lineno=1176, end_col_offset=56)], lineno=1176, col_offset=28, end_lineno=1176, end_col_offset=57), lineno=1176, col_offset=12, end_lineno=1176, end_col_offset=57), If(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=1177, col_offset=15, end_lineno=1177, end_col_offset=25), args=[Name(id='runbook_value', ctx=Load(), lineno=1177, col_offset=26, end_lineno=1177, end_col_offset=39), Name(id='str', ctx=Load(), lineno=1177, col_offset=41, end_lineno=1177, end_col_offset=44)], lineno=1177, col_offset=15, end_lineno=1177, end_col_offset=45), body=[Assign(targets=[Subscript(value=Name(id='runbooks', ctx=Load(), lineno=1178, col_offset=16, end_lineno=1178, end_col_offset=24), slice=Name(id='message', ctx=Load(), lineno=1178, col_offset=25, end_lineno=1178, end_col_offset=32), ctx=Store(), lineno=1178, col_offset=16, end_lineno=1178, end_col_offset=33)], value=Name(id='runbook_value', ctx=Load(), lineno=1178, col_offset=36, end_lineno=1178, end_col_offset=49), lineno=1178, col_offset=16, end_lineno=1178, end_col_offset=49)], lineno=1177, col_offset=12, end_lineno=1178, end_col_offset=49)], lineno=1168, col_offset=8, end_lineno=1178, end_col_offset=49)], lineno=1167, col_offset=4, end_lineno=1178, end_col_offset=49), Return(value=Name(id='runbooks', ctx=Load(), lineno=1179, col_offset=11, end_lineno=1179, end_col_offset=19), lineno=1179, col_offset=4, end_lineno=1179, end_col_offset=19)], returns=Subscript(value=Name(id='dict', ctx=Load(), lineno=1126, col_offset=51, end_lineno=1126, end_col_offset=55), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=1126, col_offset=56, end_lineno=1126, end_col_offset=59), Name(id='str', ctx=Load(), lineno=1126, col_offset=61, end_lineno=1126, end_col_offset=64)], ctx=Load(), lineno=1126, col_offset=56, end_lineno=1126, end_col_offset=64), ctx=Load(), lineno=1126, col_offset=51, end_lineno=1126, end_col_offset=65), lineno=1126, col_offset=0, end_lineno=1179, end_col_offset=19), FunctionDef(name='_apply_runbooks', args=arguments(args=[arg(arg='logs', annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=1182, col_offset=26, end_lineno=1182, end_col_offset=30), slice=Subscript(value=Name(id='dict', ctx=Load(), lineno=1182, col_offset=31, end_lineno=1182, end_col_offset=35), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=1182, col_offset=36, end_lineno=1182, end_col_offset=39), Name(id='object', ctx=Load(), lineno=1182, col_offset=41, end_lineno=1182, end_col_offset=47)], ctx=Load(), lineno=1182, col_offset=36, end_lineno=1182, end_col_offset=47), ctx=Load(), lineno=1182, col_offset=31, end_lineno=1182, end_col_offset=48), ctx=Load(), lineno=1182, col_offset=26, end_lineno=1182, end_col_offset=49), lineno=1182, col_offset=20, end_lineno=1182, end_col_offset=49), arg(arg='runbooks', annotation=Subscript(value=Name(id='dict', ctx=Load(), lineno=1182, col_offset=61, end_lineno=1182, end_col_offset=65), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=1182, col_offset=66, end_lineno=1182, end_col_offset=69), Name(id='str', ctx=Load(), lineno=1182, col_offset=71, end_lineno=1182, end_col_offset=74)], ctx=Load(), lineno=1182, col_offset=66, end_lineno=1182, end_col_offset=74), ctx=Load(), lineno=1182, col_offset=61, end_lineno=1182, end_col_offset=75), lineno=1182, col_offset=51, end_lineno=1182, end_col_offset=75)]), body=[Expr(value=Constant(value='Attach runbook URLs to log rows when taxonomy entries match.', lineno=1183, col_offset=4, end_lineno=1183, end_col_offset=70), lineno=1183, col_offset=4, end_lineno=1183, end_col_offset=70), If(test=UnaryOp(op=Not(), operand=Name(id='runbooks', ctx=Load(), lineno=1184, col_offset=11, end_lineno=1184, end_col_offset=19), lineno=1184, col_offset=7, end_lineno=1184, end_col_offset=19), body=[Return(lineno=1185, col_offset=8, end_lineno=1185, end_col_offset=14)], lineno=1184, col_offset=4, end_lineno=1185, end_col_offset=14), For(target=Name(id='row', ctx=Store(), lineno=1187, col_offset=8, end_lineno=1187, end_col_offset=11), iter=Name(id='logs', ctx=Load(), lineno=1187, col_offset=15, end_lineno=1187, end_col_offset=19), body=[Assign(targets=[Name(id='current_runbook', ctx=Store(), lineno=1188, col_offset=8, end_lineno=1188, end_col_offset=23)], value=Call(func=Name(id='cast', ctx=Load(), lineno=1188, col_offset=26, end_lineno=1188, end_col_offset=30), args=[Constant(value='str | None', lineno=1188, col_offset=31, end_lineno=1188, end_col_offset=43), Call(func=Attribute(value=Name(id='row', ctx=Load(), lineno=1188, col_offset=45, end_lineno=1188, end_col_offset=48), attr='get', ctx=Load(), lineno=1188, col_offset=45, end_lineno=1188, end_col_offset=52), args=[Constant(value='runbook', lineno=1188, col_offset=53, end_lineno=1188, end_col_offset=62)], lineno=1188, col_offset=45, end_lineno=1188, end_col_offset=63)], lineno=1188, col_offset=26, end_lineno=1188, end_col_offset=64), lineno=1188, col_offset=8, end_lineno=1188, end_col_offset=64), If(test=Name(id='current_runbook', ctx=Load(), lineno=1189, col_offset=11, end_lineno=1189, end_col_offset=26), body=[Continue(lineno=1190, col_offset=12, end_lineno=1190, end_col_offset=20)], lineno=1189, col_offset=8, end_lineno=1190, end_col_offset=20), Assign(targets=[Name(id='template', ctx=Store(), lineno=1191, col_offset=8, end_lineno=1191, end_col_offset=16)], value=Call(func=Name(id='cast', ctx=Load(), lineno=1191, col_offset=19, end_lineno=1191, end_col_offset=23), args=[Constant(value='str', lineno=1191, col_offset=24, end_lineno=1191, end_col_offset=29), BoolOp(op=Or(), values=[Call(func=Attribute(value=Name(id='row', ctx=Load(), lineno=1191, col_offset=31, end_lineno=1191, end_col_offset=34), attr='get', ctx=Load(), lineno=1191, col_offset=31, end_lineno=1191, end_col_offset=38), args=[Constant(value='message_template', lineno=1191, col_offset=39, end_lineno=1191, end_col_offset=57)], lineno=1191, col_offset=31, end_lineno=1191, end_col_offset=58), Constant(value='', lineno=1191, col_offset=62, end_lineno=1191, end_col_offset=64)], lineno=1191, col_offset=31, end_lineno=1191, end_col_offset=64)], lineno=1191, col_offset=19, end_lineno=1191, end_col_offset=65), lineno=1191, col_offset=8, end_lineno=1191, end_col_offset=65), For(target=Tuple(elts=[Name(id='message', ctx=Store(), lineno=1192, col_offset=12, end_lineno=1192, end_col_offset=19), Name(id='runbook', ctx=Store(), lineno=1192, col_offset=21, end_lineno=1192, end_col_offset=28)], ctx=Store(), lineno=1192, col_offset=12, end_lineno=1192, end_col_offset=28), iter=Call(func=Attribute(value=Name(id='runbooks', ctx=Load(), lineno=1192, col_offset=32, end_lineno=1192, end_col_offset=40), attr='items', ctx=Load(), lineno=1192, col_offset=32, end_lineno=1192, end_col_offset=46), lineno=1192, col_offset=32, end_lineno=1192, end_col_offset=48), body=[If(test=BoolOp(op=And(), values=[Name(id='message', ctx=Load(), lineno=1193, col_offset=15, end_lineno=1193, end_col_offset=22), Compare(left=Name(id='message', ctx=Load(), lineno=1193, col_offset=27, end_lineno=1193, end_col_offset=34), ops=[In()], comparators=[Name(id='template', ctx=Load(), lineno=1193, col_offset=38, end_lineno=1193, end_col_offset=46)], lineno=1193, col_offset=27, end_lineno=1193, end_col_offset=46)], lineno=1193, col_offset=15, end_lineno=1193, end_col_offset=46), body=[Assign(targets=[Subscript(value=Name(id='row', ctx=Load(), lineno=1194, col_offset=16, end_lineno=1194, end_col_offset=19), slice=Constant(value='runbook', lineno=1194, col_offset=20, end_lineno=1194, end_col_offset=29), ctx=Store(), lineno=1194, col_offset=16, end_lineno=1194, end_col_offset=30)], value=Name(id='runbook', ctx=Load(), lineno=1194, col_offset=33, end_lineno=1194, end_col_offset=40), lineno=1194, col_offset=16, end_lineno=1194, end_col_offset=40), Break(lineno=1195, col_offset=16, end_lineno=1195, end_col_offset=21)], lineno=1193, col_offset=12, end_lineno=1195, end_col_offset=21)], lineno=1192, col_offset=8, end_lineno=1195, end_col_offset=21)], lineno=1187, col_offset=4, end_lineno=1195, end_col_offset=21)], returns=Constant(value=None, lineno=1182, col_offset=80, end_lineno=1182, end_col_offset=84), lineno=1182, col_offset=0, end_lineno=1195, end_col_offset=21), FunctionDef(name='_write_outputs', args=arguments(args=[arg(arg='metrics', annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=1199, col_offset=13, end_lineno=1199, end_col_offset=17), slice=Name(id='MetricRow', ctx=Load(), lineno=1199, col_offset=18, end_lineno=1199, end_col_offset=27), ctx=Load(), lineno=1199, col_offset=13, end_lineno=1199, end_col_offset=28), lineno=1199, col_offset=4, end_lineno=1199, end_col_offset=28), arg(arg='logs', annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=1200, col_offset=10, end_lineno=1200, end_col_offset=14), slice=Name(id='LogRow', ctx=Load(), lineno=1200, col_offset=15, end_lineno=1200, end_col_offset=21), ctx=Load(), lineno=1200, col_offset=10, end_lineno=1200, end_col_offset=22), lineno=1200, col_offset=4, end_lineno=1200, end_col_offset=22), arg(arg='log_payload', annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=1201, col_offset=17, end_lineno=1201, end_col_offset=21), slice=Subscript(value=Name(id='dict', ctx=Load(), lineno=1201, col_offset=22, end_lineno=1201, end_col_offset=26), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=1201, col_offset=27, end_lineno=1201, end_col_offset=30), Name(id='object', ctx=Load(), lineno=1201, col_offset=32, end_lineno=1201, end_col_offset=38)], ctx=Load(), lineno=1201, col_offset=27, end_lineno=1201, end_col_offset=38), ctx=Load(), lineno=1201, col_offset=22, end_lineno=1201, end_col_offset=39), ctx=Load(), lineno=1201, col_offset=17, end_lineno=1201, end_col_offset=40), lineno=1201, col_offset=4, end_lineno=1201, end_col_offset=40), arg(arg='traces', annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=1202, col_offset=12, end_lineno=1202, end_col_offset=16), slice=Name(id='TraceRow', ctx=Load(), lineno=1202, col_offset=17, end_lineno=1202, end_col_offset=25), ctx=Load(), lineno=1202, col_offset=12, end_lineno=1202, end_col_offset=26), lineno=1202, col_offset=4, end_lineno=1202, end_col_offset=26), arg(arg='lints', annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=1203, col_offset=11, end_lineno=1203, end_col_offset=15), slice=Name(id='LintFinding', ctx=Load(), lineno=1203, col_offset=16, end_lineno=1203, end_col_offset=27), ctx=Load(), lineno=1203, col_offset=11, end_lineno=1203, end_col_offset=28), lineno=1203, col_offset=4, end_lineno=1203, end_col_offset=28)]), body=[Expr(value=Constant(value='Persist JSON artefacts used by downstream documentation builders.', lineno=1205, col_offset=4, end_lineno=1205, end_col_offset=75), lineno=1205, col_offset=4, end_lineno=1205, end_col_offset=75), Assign(targets=[Name(id='metrics_payload', ctx=Store(), lineno=1206, col_offset=4, end_lineno=1206, end_col_offset=19)], value=ListComp(elt=Call(func=Name(id='cast', ctx=Load(), lineno=1206, col_offset=23, end_lineno=1206, end_col_offset=27), args=[Constant(value='dict[str, object]', lineno=1206, col_offset=28, end_lineno=1206, end_col_offset=47), Call(func=Name(id='asdict', ctx=Load(), lineno=1206, col_offset=49, end_lineno=1206, end_col_offset=55), args=[Name(id='x', ctx=Load(), lineno=1206, col_offset=56, end_lineno=1206, end_col_offset=57)], lineno=1206, col_offset=49, end_lineno=1206, end_col_offset=58)], lineno=1206, col_offset=23, end_lineno=1206, end_col_offset=59), generators=[comprehension(target=Name(id='x', ctx=Store(), lineno=1206, col_offset=64, end_lineno=1206, end_col_offset=65), iter=Name(id='metrics', ctx=Load(), lineno=1206, col_offset=69, end_lineno=1206, end_col_offset=76), is_async=0)], lineno=1206, col_offset=22, end_lineno=1206, end_col_offset=77), lineno=1206, col_offset=4, end_lineno=1206, end_col_offset=77), Expr(value=Call(func=Attribute(value=BinOp(left=Name(id='OUT', ctx=Load(), lineno=1207, col_offset=5, end_lineno=1207, end_col_offset=8), op=Div(), right=Constant(value='metrics.json', lineno=1207, col_offset=11, end_lineno=1207, end_col_offset=25), lineno=1207, col_offset=5, end_lineno=1207, end_col_offset=25), attr='write_text', ctx=Load(), lineno=1207, col_offset=4, end_lineno=1207, end_col_offset=37), args=[BinOp(left=Call(func=Attribute(value=Name(id='json', ctx=Load(), lineno=1208, col_offset=8, end_lineno=1208, end_col_offset=12), attr='dumps', ctx=Load(), lineno=1208, col_offset=8, end_lineno=1208, end_col_offset=18), args=[Name(id='metrics_payload', ctx=Load(), lineno=1208, col_offset=19, end_lineno=1208, end_col_offset=34)], keywords=[keyword(arg='indent', value=Constant(value=2, lineno=1208, col_offset=43, end_lineno=1208, end_col_offset=44), lineno=1208, col_offset=36, end_lineno=1208, end_col_offset=44)], lineno=1208, col_offset=8, end_lineno=1208, end_col_offset=45), op=Add(), right=Constant(value='\n', lineno=1208, col_offset=48, end_lineno=1208, end_col_offset=52), lineno=1208, col_offset=8, end_lineno=1208, end_col_offset=52)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=1209, col_offset=17, end_lineno=1209, end_col_offset=24), lineno=1209, col_offset=8, end_lineno=1209, end_col_offset=24)], lineno=1207, col_offset=4, end_lineno=1210, end_col_offset=5), lineno=1207, col_offset=4, end_lineno=1210, end_col_offset=5), Expr(value=Call(func=Attribute(value=BinOp(left=Name(id='OUT', ctx=Load(), lineno=1211, col_offset=5, end_lineno=1211, end_col_offset=8), op=Div(), right=Constant(value='log_events.json', lineno=1211, col_offset=11, end_lineno=1211, end_col_offset=28), lineno=1211, col_offset=5, end_lineno=1211, end_col_offset=28), attr='write_text', ctx=Load(), lineno=1211, col_offset=4, end_lineno=1211, end_col_offset=40), args=[BinOp(left=Call(func=Attribute(value=Name(id='json', ctx=Load(), lineno=1212, col_offset=8, end_lineno=1212, end_col_offset=12), attr='dumps', ctx=Load(), lineno=1212, col_offset=8, end_lineno=1212, end_col_offset=18), args=[Name(id='log_payload', ctx=Load(), lineno=1212, col_offset=19, end_lineno=1212, end_col_offset=30)], keywords=[keyword(arg='indent', value=Constant(value=2, lineno=1212, col_offset=39, end_lineno=1212, end_col_offset=40), lineno=1212, col_offset=32, end_lineno=1212, end_col_offset=40)], lineno=1212, col_offset=8, end_lineno=1212, end_col_offset=41), op=Add(), right=Constant(value='\n', lineno=1212, col_offset=44, end_lineno=1212, end_col_offset=48), lineno=1212, col_offset=8, end_lineno=1212, end_col_offset=48)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=1213, col_offset=17, end_lineno=1213, end_col_offset=24), lineno=1213, col_offset=8, end_lineno=1213, end_col_offset=24)], lineno=1211, col_offset=4, end_lineno=1214, end_col_offset=5), lineno=1211, col_offset=4, end_lineno=1214, end_col_offset=5), Assign(targets=[Name(id='trace_payload', ctx=Store(), lineno=1215, col_offset=4, end_lineno=1215, end_col_offset=17)], value=ListComp(elt=Call(func=Name(id='cast', ctx=Load(), lineno=1215, col_offset=21, end_lineno=1215, end_col_offset=25), args=[Constant(value='dict[str, object]', lineno=1215, col_offset=26, end_lineno=1215, end_col_offset=45), Call(func=Name(id='asdict', ctx=Load(), lineno=1215, col_offset=47, end_lineno=1215, end_col_offset=53), args=[Name(id='x', ctx=Load(), lineno=1215, col_offset=54, end_lineno=1215, end_col_offset=55)], lineno=1215, col_offset=47, end_lineno=1215, end_col_offset=56)], lineno=1215, col_offset=21, end_lineno=1215, end_col_offset=57), generators=[comprehension(target=Name(id='x', ctx=Store(), lineno=1215, col_offset=62, end_lineno=1215, end_col_offset=63), iter=Name(id='traces', ctx=Load(), lineno=1215, col_offset=67, end_lineno=1215, end_col_offset=73), is_async=0)], lineno=1215, col_offset=20, end_lineno=1215, end_col_offset=74), lineno=1215, col_offset=4, end_lineno=1215, end_col_offset=74), Expr(value=Call(func=Attribute(value=BinOp(left=Name(id='OUT', ctx=Load(), lineno=1216, col_offset=5, end_lineno=1216, end_col_offset=8), op=Div(), right=Constant(value='traces.json', lineno=1216, col_offset=11, end_lineno=1216, end_col_offset=24), lineno=1216, col_offset=5, end_lineno=1216, end_col_offset=24), attr='write_text', ctx=Load(), lineno=1216, col_offset=4, end_lineno=1216, end_col_offset=36), args=[BinOp(left=Call(func=Attribute(value=Name(id='json', ctx=Load(), lineno=1217, col_offset=8, end_lineno=1217, end_col_offset=12), attr='dumps', ctx=Load(), lineno=1217, col_offset=8, end_lineno=1217, end_col_offset=18), args=[Name(id='trace_payload', ctx=Load(), lineno=1217, col_offset=19, end_lineno=1217, end_col_offset=32)], keywords=[keyword(arg='indent', value=Constant(value=2, lineno=1217, col_offset=41, end_lineno=1217, end_col_offset=42), lineno=1217, col_offset=34, end_lineno=1217, end_col_offset=42)], lineno=1217, col_offset=8, end_lineno=1217, end_col_offset=43), op=Add(), right=Constant(value='\n', lineno=1217, col_offset=46, end_lineno=1217, end_col_offset=50), lineno=1217, col_offset=8, end_lineno=1217, end_col_offset=50)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=1218, col_offset=17, end_lineno=1218, end_col_offset=24), lineno=1218, col_offset=8, end_lineno=1218, end_col_offset=24)], lineno=1216, col_offset=4, end_lineno=1219, end_col_offset=5), lineno=1216, col_offset=4, end_lineno=1219, end_col_offset=5), Assign(targets=[Name(id='lint_payload', ctx=Store(), lineno=1220, col_offset=4, end_lineno=1220, end_col_offset=16)], value=ListComp(elt=Call(func=Name(id='cast', ctx=Load(), lineno=1220, col_offset=20, end_lineno=1220, end_col_offset=24), args=[Constant(value='dict[str, object]', lineno=1220, col_offset=25, end_lineno=1220, end_col_offset=44), Call(func=Name(id='asdict', ctx=Load(), lineno=1220, col_offset=46, end_lineno=1220, end_col_offset=52), args=[Name(id='finding', ctx=Load(), lineno=1220, col_offset=53, end_lineno=1220, end_col_offset=60)], lineno=1220, col_offset=46, end_lineno=1220, end_col_offset=61)], lineno=1220, col_offset=20, end_lineno=1220, end_col_offset=62), generators=[comprehension(target=Name(id='finding', ctx=Store(), lineno=1220, col_offset=67, end_lineno=1220, end_col_offset=74), iter=Name(id='lints', ctx=Load(), lineno=1220, col_offset=78, end_lineno=1220, end_col_offset=83), is_async=0)], lineno=1220, col_offset=19, end_lineno=1220, end_col_offset=84), lineno=1220, col_offset=4, end_lineno=1220, end_col_offset=84), Expr(value=Call(func=Attribute(value=BinOp(left=Name(id='OUT', ctx=Load(), lineno=1221, col_offset=5, end_lineno=1221, end_col_offset=8), op=Div(), right=Constant(value='observability_lint.json', lineno=1221, col_offset=11, end_lineno=1221, end_col_offset=36), lineno=1221, col_offset=5, end_lineno=1221, end_col_offset=36), attr='write_text', ctx=Load(), lineno=1221, col_offset=4, end_lineno=1221, end_col_offset=48), args=[BinOp(left=Call(func=Attribute(value=Name(id='json', ctx=Load(), lineno=1222, col_offset=8, end_lineno=1222, end_col_offset=12), attr='dumps', ctx=Load(), lineno=1222, col_offset=8, end_lineno=1222, end_col_offset=18), args=[Name(id='lint_payload', ctx=Load(), lineno=1222, col_offset=19, end_lineno=1222, end_col_offset=31)], keywords=[keyword(arg='indent', value=Constant(value=2, lineno=1222, col_offset=40, end_lineno=1222, end_col_offset=41), lineno=1222, col_offset=33, end_lineno=1222, end_col_offset=41)], lineno=1222, col_offset=8, end_lineno=1222, end_col_offset=42), op=Add(), right=Constant(value='\n', lineno=1222, col_offset=45, end_lineno=1222, end_col_offset=49), lineno=1222, col_offset=8, end_lineno=1222, end_col_offset=49)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=1223, col_offset=17, end_lineno=1223, end_col_offset=24), lineno=1223, col_offset=8, end_lineno=1223, end_col_offset=24)], lineno=1221, col_offset=4, end_lineno=1224, end_col_offset=5), lineno=1221, col_offset=4, end_lineno=1224, end_col_offset=5), Expr(value=Call(func=Name(id='_write_config_summary', ctx=Load(), lineno=1225, col_offset=4, end_lineno=1225, end_col_offset=25), args=[Name(id='metrics', ctx=Load(), lineno=1225, col_offset=26, end_lineno=1225, end_col_offset=33), Name(id='logs', ctx=Load(), lineno=1225, col_offset=35, end_lineno=1225, end_col_offset=39), Name(id='traces', ctx=Load(), lineno=1225, col_offset=41, end_lineno=1225, end_col_offset=47)], lineno=1225, col_offset=4, end_lineno=1225, end_col_offset=48), lineno=1225, col_offset=4, end_lineno=1225, end_col_offset=48)], returns=Constant(value=None, lineno=1204, col_offset=5, end_lineno=1204, end_col_offset=9), lineno=1198, col_offset=0, end_lineno=1225, end_col_offset=48), FunctionDef(name='_summarize_exit', args=arguments(args=[arg(arg='metrics', annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=1229, col_offset=13, end_lineno=1229, end_col_offset=17), slice=Name(id='MetricRow', ctx=Load(), lineno=1229, col_offset=18, end_lineno=1229, end_col_offset=27), ctx=Load(), lineno=1229, col_offset=13, end_lineno=1229, end_col_offset=28), lineno=1229, col_offset=4, end_lineno=1229, end_col_offset=28), arg(arg='logs', annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=1230, col_offset=10, end_lineno=1230, end_col_offset=14), slice=Name(id='LogRow', ctx=Load(), lineno=1230, col_offset=15, end_lineno=1230, end_col_offset=21), ctx=Load(), lineno=1230, col_offset=10, end_lineno=1230, end_col_offset=22), lineno=1230, col_offset=4, end_lineno=1230, end_col_offset=22), arg(arg='traces', annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=1231, col_offset=12, end_lineno=1231, end_col_offset=16), slice=Name(id='TraceRow', ctx=Load(), lineno=1231, col_offset=17, end_lineno=1231, end_col_offset=25), ctx=Load(), lineno=1231, col_offset=12, end_lineno=1231, end_col_offset=26), lineno=1231, col_offset=4, end_lineno=1231, end_col_offset=26), arg(arg='lints', annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=1232, col_offset=11, end_lineno=1232, end_col_offset=15), slice=Name(id='LintFinding', ctx=Load(), lineno=1232, col_offset=16, end_lineno=1232, end_col_offset=27), ctx=Load(), lineno=1232, col_offset=11, end_lineno=1232, end_col_offset=28), lineno=1232, col_offset=4, end_lineno=1232, end_col_offset=28)]), body=[Expr(value=Constant(value='Report a summary to stdout and return the desired exit code.\n\n    Parameters\n    ----------\n    metrics : list[MetricRow]\n        List of metric rows.\n    logs : list[LogRow]\n        List of log rows.\n    traces : list[TraceRow]\n        List of trace rows.\n    lints : list[LintFinding]\n        List of lint findings.\n\n    Returns\n    -------\n    int\n        Exit code: 0 on success, 2 if errors found and OBS_FAIL_ON_LINT=1.\n    ', lineno=1234, col_offset=4, end_lineno=1251, end_col_offset=7), lineno=1234, col_offset=4, end_lineno=1251, end_col_offset=7), Assign(targets=[Name(id='fail', ctx=Store(), lineno=1252, col_offset=4, end_lineno=1252, end_col_offset=8)], value=Compare(left=Call(func=Attribute(value=Name(id='os', ctx=Load(), lineno=1252, col_offset=11, end_lineno=1252, end_col_offset=13), attr='getenv', ctx=Load(), lineno=1252, col_offset=11, end_lineno=1252, end_col_offset=20), args=[Constant(value='OBS_FAIL_ON_LINT', lineno=1252, col_offset=21, end_lineno=1252, end_col_offset=39), Constant(value='0', lineno=1252, col_offset=41, end_lineno=1252, end_col_offset=44)], lineno=1252, col_offset=11, end_lineno=1252, end_col_offset=45), ops=[Eq()], comparators=[Constant(value='1', lineno=1252, col_offset=49, end_lineno=1252, end_col_offset=52)], lineno=1252, col_offset=11, end_lineno=1252, end_col_offset=52), lineno=1252, col_offset=4, end_lineno=1252, end_col_offset=52), Assign(targets=[Name(id='error_count', ctx=Store(), lineno=1253, col_offset=4, end_lineno=1253, end_col_offset=15)], value=Call(func=Name(id='sum', ctx=Load(), lineno=1253, col_offset=18, end_lineno=1253, end_col_offset=21), args=[GeneratorExp(elt=Constant(value=1, lineno=1253, col_offset=22, end_lineno=1253, end_col_offset=23), generators=[comprehension(target=Name(id='item', ctx=Store(), lineno=1253, col_offset=28, end_lineno=1253, end_col_offset=32), iter=Name(id='lints', ctx=Load(), lineno=1253, col_offset=36, end_lineno=1253, end_col_offset=41), ifs=[Compare(left=Attribute(value=Name(id='item', ctx=Load(), lineno=1253, col_offset=45, end_lineno=1253, end_col_offset=49), attr='severity', ctx=Load(), lineno=1253, col_offset=45, end_lineno=1253, end_col_offset=58), ops=[Eq()], comparators=[Constant(value='error', lineno=1253, col_offset=62, end_lineno=1253, end_col_offset=69)], lineno=1253, col_offset=45, end_lineno=1253, end_col_offset=69)], is_async=0)], lineno=1253, col_offset=21, end_lineno=1253, end_col_offset=70)], lineno=1253, col_offset=18, end_lineno=1253, end_col_offset=70), lineno=1253, col_offset=4, end_lineno=1253, end_col_offset=70), Assign(targets=[Name(id='warning_count', ctx=Store(), lineno=1254, col_offset=4, end_lineno=1254, end_col_offset=17)], value=Call(func=Name(id='sum', ctx=Load(), lineno=1254, col_offset=20, end_lineno=1254, end_col_offset=23), args=[GeneratorExp(elt=Constant(value=1, lineno=1254, col_offset=24, end_lineno=1254, end_col_offset=25), generators=[comprehension(target=Name(id='item', ctx=Store(), lineno=1254, col_offset=30, end_lineno=1254, end_col_offset=34), iter=Name(id='lints', ctx=Load(), lineno=1254, col_offset=38, end_lineno=1254, end_col_offset=43), ifs=[Compare(left=Attribute(value=Name(id='item', ctx=Load(), lineno=1254, col_offset=47, end_lineno=1254, end_col_offset=51), attr='severity', ctx=Load(), lineno=1254, col_offset=47, end_lineno=1254, end_col_offset=60), ops=[Eq()], comparators=[Constant(value='warning', lineno=1254, col_offset=64, end_lineno=1254, end_col_offset=73)], lineno=1254, col_offset=47, end_lineno=1254, end_col_offset=73)], is_async=0)], lineno=1254, col_offset=23, end_lineno=1254, end_col_offset=74)], lineno=1254, col_offset=20, end_lineno=1254, end_col_offset=74), lineno=1254, col_offset=4, end_lineno=1254, end_col_offset=74), If(test=BoolOp(op=And(), values=[Name(id='fail', ctx=Load(), lineno=1255, col_offset=7, end_lineno=1255, end_col_offset=11), Name(id='error_count', ctx=Load(), lineno=1255, col_offset=16, end_lineno=1255, end_col_offset=27)], lineno=1255, col_offset=7, end_lineno=1255, end_col_offset=27), body=[Expr(value=Call(func=Attribute(value=Name(id='LOGGER', ctx=Load(), lineno=1256, col_offset=8, end_lineno=1256, end_col_offset=14), attr='error', ctx=Load(), lineno=1256, col_offset=8, end_lineno=1256, end_col_offset=20), args=[Constant(value='[obs] %d error(s), %d warning(s)  failing (OBS_FAIL_ON_LINT=1)', lineno=1257, col_offset=12, end_lineno=1257, end_col_offset=79), Name(id='error_count', ctx=Load(), lineno=1258, col_offset=12, end_lineno=1258, end_col_offset=23), Name(id='warning_count', ctx=Load(), lineno=1259, col_offset=12, end_lineno=1259, end_col_offset=25)], lineno=1256, col_offset=8, end_lineno=1260, end_col_offset=9), lineno=1256, col_offset=8, end_lineno=1260, end_col_offset=9), Return(value=Constant(value=2, lineno=1261, col_offset=15, end_lineno=1261, end_col_offset=16), lineno=1261, col_offset=8, end_lineno=1261, end_col_offset=16)], lineno=1255, col_offset=4, end_lineno=1261, end_col_offset=16), Expr(value=Call(func=Attribute(value=Name(id='LOGGER', ctx=Load(), lineno=1263, col_offset=4, end_lineno=1263, end_col_offset=10), attr='info', ctx=Load(), lineno=1263, col_offset=4, end_lineno=1263, end_col_offset=15), args=[Constant(value='[obs] metrics=%d logs=%d traces=%d; lint errors=%d warnings=%d', lineno=1264, col_offset=8, end_lineno=1264, end_col_offset=72), Call(func=Name(id='len', ctx=Load(), lineno=1265, col_offset=8, end_lineno=1265, end_col_offset=11), args=[Name(id='metrics', ctx=Load(), lineno=1265, col_offset=12, end_lineno=1265, end_col_offset=19)], lineno=1265, col_offset=8, end_lineno=1265, end_col_offset=20), Call(func=Name(id='len', ctx=Load(), lineno=1266, col_offset=8, end_lineno=1266, end_col_offset=11), args=[Name(id='logs', ctx=Load(), lineno=1266, col_offset=12, end_lineno=1266, end_col_offset=16)], lineno=1266, col_offset=8, end_lineno=1266, end_col_offset=17), Call(func=Name(id='len', ctx=Load(), lineno=1267, col_offset=8, end_lineno=1267, end_col_offset=11), args=[Name(id='traces', ctx=Load(), lineno=1267, col_offset=12, end_lineno=1267, end_col_offset=18)], lineno=1267, col_offset=8, end_lineno=1267, end_col_offset=19), Name(id='error_count', ctx=Load(), lineno=1268, col_offset=8, end_lineno=1268, end_col_offset=19), Name(id='warning_count', ctx=Load(), lineno=1269, col_offset=8, end_lineno=1269, end_col_offset=21)], lineno=1263, col_offset=4, end_lineno=1270, end_col_offset=5), lineno=1263, col_offset=4, end_lineno=1270, end_col_offset=5), Return(value=Constant(value=0, lineno=1271, col_offset=11, end_lineno=1271, end_col_offset=12), lineno=1271, col_offset=4, end_lineno=1271, end_col_offset=12)], returns=Name(id='int', ctx=Load(), lineno=1233, col_offset=5, end_lineno=1233, end_col_offset=8), lineno=1228, col_offset=0, end_lineno=1271, end_col_offset=12), FunctionDef(name='main', args=arguments(), body=[Expr(value=Constant(value='Coordinate observability scanning.\n\n    Returns\n    -------\n    int\n        Exit code: 0 on success, 2 if errors found and OBS_FAIL_ON_LINT=1.\n    ', lineno=1275, col_offset=4, end_lineno=1281, end_col_offset=7), lineno=1275, col_offset=4, end_lineno=1281, end_col_offset=7), Assign(targets=[Name(id='policy', ctx=Store(), lineno=1282, col_offset=4, end_lineno=1282, end_col_offset=10)], value=Call(func=Name(id='load_policy', ctx=Load(), lineno=1282, col_offset=13, end_lineno=1282, end_col_offset=24), lineno=1282, col_offset=13, end_lineno=1282, end_col_offset=26), lineno=1282, col_offset=4, end_lineno=1282, end_col_offset=26), If(test=UnaryOp(op=Not(), operand=Call(func=Attribute(value=Name(id='SRC', ctx=Load(), lineno=1283, col_offset=11, end_lineno=1283, end_col_offset=14), attr='exists', ctx=Load(), lineno=1283, col_offset=11, end_lineno=1283, end_col_offset=21), lineno=1283, col_offset=11, end_lineno=1283, end_col_offset=23), lineno=1283, col_offset=7, end_lineno=1283, end_col_offset=23), body=[Return(value=Constant(value=0, lineno=1284, col_offset=15, end_lineno=1284, end_col_offset=16), lineno=1284, col_offset=8, end_lineno=1284, end_col_offset=16)], lineno=1283, col_offset=4, end_lineno=1284, end_col_offset=16), Assign(targets=[Tuple(elts=[Name(id='logs', ctx=Store(), lineno=1286, col_offset=4, end_lineno=1286, end_col_offset=8), Name(id='metrics', ctx=Store(), lineno=1286, col_offset=10, end_lineno=1286, end_col_offset=17), Name(id='traces', ctx=Store(), lineno=1286, col_offset=19, end_lineno=1286, end_col_offset=25), Name(id='lints', ctx=Store(), lineno=1286, col_offset=27, end_lineno=1286, end_col_offset=32)], ctx=Store(), lineno=1286, col_offset=4, end_lineno=1286, end_col_offset=32)], value=Call(func=Name(id='_scan_repository', ctx=Load(), lineno=1286, col_offset=35, end_lineno=1286, end_col_offset=51), args=[Name(id='policy', ctx=Load(), lineno=1286, col_offset=52, end_lineno=1286, end_col_offset=58)], lineno=1286, col_offset=35, end_lineno=1286, end_col_offset=59), lineno=1286, col_offset=4, end_lineno=1286, end_col_offset=59), Assign(targets=[Name(id='runbooks', ctx=Store(), lineno=1287, col_offset=4, end_lineno=1287, end_col_offset=12)], value=Call(func=Name(id='_load_runbooks', ctx=Load(), lineno=1287, col_offset=15, end_lineno=1287, end_col_offset=29), args=[Name(id='policy', ctx=Load(), lineno=1287, col_offset=30, end_lineno=1287, end_col_offset=36)], lineno=1287, col_offset=15, end_lineno=1287, end_col_offset=37), lineno=1287, col_offset=4, end_lineno=1287, end_col_offset=37), Assign(targets=[Name(id='log_payload', ctx=Store(), lineno=1288, col_offset=4, end_lineno=1288, end_col_offset=15)], value=ListComp(elt=Call(func=Name(id='cast', ctx=Load(), lineno=1288, col_offset=19, end_lineno=1288, end_col_offset=23), args=[Constant(value='dict[str, object]', lineno=1288, col_offset=24, end_lineno=1288, end_col_offset=43), Call(func=Name(id='asdict', ctx=Load(), lineno=1288, col_offset=45, end_lineno=1288, end_col_offset=51), args=[Name(id='entry', ctx=Load(), lineno=1288, col_offset=52, end_lineno=1288, end_col_offset=57)], lineno=1288, col_offset=45, end_lineno=1288, end_col_offset=58)], lineno=1288, col_offset=19, end_lineno=1288, end_col_offset=59), generators=[comprehension(target=Name(id='entry', ctx=Store(), lineno=1288, col_offset=64, end_lineno=1288, end_col_offset=69), iter=Name(id='logs', ctx=Load(), lineno=1288, col_offset=73, end_lineno=1288, end_col_offset=77), is_async=0)], lineno=1288, col_offset=18, end_lineno=1288, end_col_offset=78), lineno=1288, col_offset=4, end_lineno=1288, end_col_offset=78), Expr(value=Call(func=Name(id='_apply_runbooks', ctx=Load(), lineno=1289, col_offset=4, end_lineno=1289, end_col_offset=19), args=[Name(id='log_payload', ctx=Load(), lineno=1289, col_offset=20, end_lineno=1289, end_col_offset=31), Name(id='runbooks', ctx=Load(), lineno=1289, col_offset=33, end_lineno=1289, end_col_offset=41)], lineno=1289, col_offset=4, end_lineno=1289, end_col_offset=42), lineno=1289, col_offset=4, end_lineno=1289, end_col_offset=42), Expr(value=Call(func=Name(id='_write_outputs', ctx=Load(), lineno=1290, col_offset=4, end_lineno=1290, end_col_offset=18), args=[Name(id='metrics', ctx=Load(), lineno=1290, col_offset=19, end_lineno=1290, end_col_offset=26), Name(id='logs', ctx=Load(), lineno=1290, col_offset=28, end_lineno=1290, end_col_offset=32), Name(id='log_payload', ctx=Load(), lineno=1290, col_offset=34, end_lineno=1290, end_col_offset=45), Name(id='traces', ctx=Load(), lineno=1290, col_offset=47, end_lineno=1290, end_col_offset=53), Name(id='lints', ctx=Load(), lineno=1290, col_offset=55, end_lineno=1290, end_col_offset=60)], lineno=1290, col_offset=4, end_lineno=1290, end_col_offset=61), lineno=1290, col_offset=4, end_lineno=1290, end_col_offset=61), Return(value=Call(func=Name(id='_summarize_exit', ctx=Load(), lineno=1291, col_offset=11, end_lineno=1291, end_col_offset=26), args=[Name(id='metrics', ctx=Load(), lineno=1291, col_offset=27, end_lineno=1291, end_col_offset=34), Name(id='logs', ctx=Load(), lineno=1291, col_offset=36, end_lineno=1291, end_col_offset=40), Name(id='traces', ctx=Load(), lineno=1291, col_offset=42, end_lineno=1291, end_col_offset=48), Name(id='lints', ctx=Load(), lineno=1291, col_offset=50, end_lineno=1291, end_col_offset=55)], lineno=1291, col_offset=11, end_lineno=1291, end_col_offset=56), lineno=1291, col_offset=4, end_lineno=1291, end_col_offset=56)], returns=Name(id='int', ctx=Load(), lineno=1274, col_offset=14, end_lineno=1274, end_col_offset=17), lineno=1274, col_offset=0, end_lineno=1291, end_col_offset=56), If(test=Compare(left=Name(id='__name__', ctx=Load(), lineno=1294, col_offset=3, end_lineno=1294, end_col_offset=11), ops=[Eq()], comparators=[Constant(value='__main__', lineno=1294, col_offset=15, end_lineno=1294, end_col_offset=25)], lineno=1294, col_offset=3, end_lineno=1294, end_col_offset=25), body=[Expr(value=Call(func=Attribute(value=Name(id='sys', ctx=Load(), lineno=1295, col_offset=4, end_lineno=1295, end_col_offset=7), attr='exit', ctx=Load(), lineno=1295, col_offset=4, end_lineno=1295, end_col_offset=12), args=[Call(func=Name(id='main', ctx=Load(), lineno=1295, col_offset=13, end_lineno=1295, end_col_offset=17), lineno=1295, col_offset=13, end_lineno=1295, end_col_offset=19)], lineno=1295, col_offset=4, end_lineno=1295, end_col_offset=20), lineno=1295, col_offset=4, end_lineno=1295, end_col_offset=20)], lineno=1294, col_offset=0, end_lineno=1295, end_col_offset=20)])
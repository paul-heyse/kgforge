Module(body=[Expr(value=Constant(value='Unit tests for docstring builder pipeline helpers.', lineno=1, col_offset=0, end_lineno=1, end_col_offset=56), lineno=1, col_offset=0, end_lineno=1, end_col_offset=56), ImportFrom(module='__future__', names=[alias(name='annotations', lineno=3, col_offset=23, end_lineno=3, end_col_offset=34)], level=0, lineno=3, col_offset=0, end_lineno=3, end_col_offset=34), Import(names=[alias(name='logging', lineno=5, col_offset=7, end_lineno=5, end_col_offset=14)], lineno=5, col_offset=0, end_lineno=5, end_col_offset=14), ImportFrom(module='dataclasses', names=[alias(name='dataclass', lineno=6, col_offset=24, end_lineno=6, end_col_offset=33), alias(name='field', lineno=6, col_offset=35, end_lineno=6, end_col_offset=40)], level=0, lineno=6, col_offset=0, end_lineno=6, end_col_offset=40), ImportFrom(module='typing', names=[alias(name='TYPE_CHECKING', lineno=7, col_offset=19, end_lineno=7, end_col_offset=32)], level=0, lineno=7, col_offset=0, end_lineno=7, end_col_offset=32), Import(names=[alias(name='pytest', lineno=9, col_offset=7, end_lineno=9, end_col_offset=13)], lineno=9, col_offset=0, end_lineno=9, end_col_offset=13), ImportFrom(module='tools.docstring_builder.builder_types', names=[alias(name='ExitStatus', lineno=10, col_offset=50, end_lineno=10, end_col_offset=60)], level=0, lineno=10, col_offset=0, end_lineno=10, end_col_offset=60), ImportFrom(module='tools.docstring_builder.failure_summary', names=[alias(name='FailureSummaryRenderer', lineno=12, col_offset=4, end_lineno=12, end_col_offset=26), alias(name='RunSummarySnapshot', lineno=13, col_offset=4, end_lineno=13, end_col_offset=22)], level=0, lineno=11, col_offset=0, end_lineno=14, end_col_offset=1), ImportFrom(module='tools.docstring_builder.metrics', names=[alias(name='MetricsRecorder', lineno=15, col_offset=44, end_lineno=15, end_col_offset=59)], level=0, lineno=15, col_offset=0, end_lineno=15, end_col_offset=59), ImportFrom(module='tools.docstring_builder.models', names=[alias(name='RunStatus', lineno=16, col_offset=43, end_lineno=16, end_col_offset=52)], level=0, lineno=16, col_offset=0, end_lineno=16, end_col_offset=52), ImportFrom(module='tools.docstring_builder.paths', names=[alias(name='OBSERVABILITY_PATH', lineno=17, col_offset=42, end_lineno=17, end_col_offset=60)], level=0, lineno=17, col_offset=0, end_lineno=17, end_col_offset=60), ImportFrom(module='tools.docstring_builder.pipeline_types', names=[alias(name='ErrorEnvelope', lineno=18, col_offset=51, end_lineno=18, end_col_offset=64), alias(name='FileOutcome', lineno=18, col_offset=66, end_lineno=18, end_col_offset=77)], level=0, lineno=18, col_offset=0, end_lineno=18, end_col_offset=77), If(test=Name(id='TYPE_CHECKING', ctx=Load(), lineno=20, col_offset=3, end_lineno=20, end_col_offset=16), body=[ImportFrom(module='_pytest.logging', names=[alias(name='LogCaptureFixture', lineno=21, col_offset=32, end_lineno=21, end_col_offset=49)], level=0, lineno=21, col_offset=4, end_lineno=21, end_col_offset=49), ImportFrom(module='tools.docstring_builder.docfacts', names=[alias(name='DocFact', lineno=22, col_offset=49, end_lineno=22, end_col_offset=56)], level=0, lineno=22, col_offset=4, end_lineno=22, end_col_offset=56)], lineno=20, col_offset=0, end_lineno=22, end_col_offset=56), ClassDef(name='_HistogramStub', body=[AnnAssign(target=Name(id='labels_called', ctx=Store(), lineno=27, col_offset=4, end_lineno=27, end_col_offset=17), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=27, col_offset=19, end_lineno=27, end_col_offset=23), slice=Subscript(value=Name(id='dict', ctx=Load(), lineno=27, col_offset=24, end_lineno=27, end_col_offset=28), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=27, col_offset=29, end_lineno=27, end_col_offset=32), Name(id='object', ctx=Load(), lineno=27, col_offset=34, end_lineno=27, end_col_offset=40)], ctx=Load(), lineno=27, col_offset=29, end_lineno=27, end_col_offset=40), ctx=Load(), lineno=27, col_offset=24, end_lineno=27, end_col_offset=41), ctx=Load(), lineno=27, col_offset=19, end_lineno=27, end_col_offset=42), value=Call(func=Name(id='field', ctx=Load(), lineno=27, col_offset=45, end_lineno=27, end_col_offset=50), keywords=[keyword(arg='default_factory', value=Name(id='list', ctx=Load(), lineno=27, col_offset=67, end_lineno=27, end_col_offset=71), lineno=27, col_offset=51, end_lineno=27, end_col_offset=71)], lineno=27, col_offset=45, end_lineno=27, end_col_offset=72), simple=1, lineno=27, col_offset=4, end_lineno=27, end_col_offset=72), AnnAssign(target=Name(id='observed', ctx=Store(), lineno=28, col_offset=4, end_lineno=28, end_col_offset=12), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=28, col_offset=14, end_lineno=28, end_col_offset=18), slice=Name(id='float', ctx=Load(), lineno=28, col_offset=19, end_lineno=28, end_col_offset=24), ctx=Load(), lineno=28, col_offset=14, end_lineno=28, end_col_offset=25), value=Call(func=Name(id='field', ctx=Load(), lineno=28, col_offset=28, end_lineno=28, end_col_offset=33), keywords=[keyword(arg='default_factory', value=Name(id='list', ctx=Load(), lineno=28, col_offset=50, end_lineno=28, end_col_offset=54), lineno=28, col_offset=34, end_lineno=28, end_col_offset=54)], lineno=28, col_offset=28, end_lineno=28, end_col_offset=55), simple=1, lineno=28, col_offset=4, end_lineno=28, end_col_offset=55), FunctionDef(name='labels', args=arguments(args=[arg(arg='self', lineno=30, col_offset=15, end_lineno=30, end_col_offset=19)], kwarg=arg(arg='labels', annotation=Name(id='object', ctx=Load(), lineno=30, col_offset=31, end_lineno=30, end_col_offset=37), lineno=30, col_offset=23, end_lineno=30, end_col_offset=37)), body=[Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='self', ctx=Load(), lineno=31, col_offset=8, end_lineno=31, end_col_offset=12), attr='labels_called', ctx=Load(), lineno=31, col_offset=8, end_lineno=31, end_col_offset=26), attr='append', ctx=Load(), lineno=31, col_offset=8, end_lineno=31, end_col_offset=33), args=[Name(id='labels', ctx=Load(), lineno=31, col_offset=34, end_lineno=31, end_col_offset=40)], lineno=31, col_offset=8, end_lineno=31, end_col_offset=41), lineno=31, col_offset=8, end_lineno=31, end_col_offset=41), Return(value=Name(id='self', ctx=Load(), lineno=32, col_offset=15, end_lineno=32, end_col_offset=19), lineno=32, col_offset=8, end_lineno=32, end_col_offset=19)], returns=Name(id='_HistogramStub', ctx=Load(), lineno=30, col_offset=42, end_lineno=30, end_col_offset=56), lineno=30, col_offset=4, end_lineno=32, end_col_offset=19), FunctionDef(name='observe', args=arguments(args=[arg(arg='self', lineno=34, col_offset=16, end_lineno=34, end_col_offset=20), arg(arg='value', annotation=Name(id='float', ctx=Load(), lineno=34, col_offset=29, end_lineno=34, end_col_offset=34), lineno=34, col_offset=22, end_lineno=34, end_col_offset=34)]), body=[Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='self', ctx=Load(), lineno=35, col_offset=8, end_lineno=35, end_col_offset=12), attr='observed', ctx=Load(), lineno=35, col_offset=8, end_lineno=35, end_col_offset=21), attr='append', ctx=Load(), lineno=35, col_offset=8, end_lineno=35, end_col_offset=28), args=[Name(id='value', ctx=Load(), lineno=35, col_offset=29, end_lineno=35, end_col_offset=34)], lineno=35, col_offset=8, end_lineno=35, end_col_offset=35), lineno=35, col_offset=8, end_lineno=35, end_col_offset=35)], returns=Constant(value=None, lineno=34, col_offset=39, end_lineno=34, end_col_offset=43), lineno=34, col_offset=4, end_lineno=35, end_col_offset=35)], decorator_list=[Call(func=Name(id='dataclass', ctx=Load(), lineno=25, col_offset=1, end_lineno=25, end_col_offset=10), keywords=[keyword(arg='slots', value=Constant(value=True, lineno=25, col_offset=17, end_lineno=25, end_col_offset=21), lineno=25, col_offset=11, end_lineno=25, end_col_offset=21), keyword(arg='frozen', value=Constant(value=True, lineno=25, col_offset=30, end_lineno=25, end_col_offset=34), lineno=25, col_offset=23, end_lineno=25, end_col_offset=34)], lineno=25, col_offset=1, end_lineno=25, end_col_offset=35)], lineno=26, col_offset=0, end_lineno=35, end_col_offset=35), ClassDef(name='_CounterStub', body=[AnnAssign(target=Name(id='labels_called', ctx=Store(), lineno=40, col_offset=4, end_lineno=40, end_col_offset=17), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=40, col_offset=19, end_lineno=40, end_col_offset=23), slice=Subscript(value=Name(id='dict', ctx=Load(), lineno=40, col_offset=24, end_lineno=40, end_col_offset=28), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=40, col_offset=29, end_lineno=40, end_col_offset=32), Name(id='object', ctx=Load(), lineno=40, col_offset=34, end_lineno=40, end_col_offset=40)], ctx=Load(), lineno=40, col_offset=29, end_lineno=40, end_col_offset=40), ctx=Load(), lineno=40, col_offset=24, end_lineno=40, end_col_offset=41), ctx=Load(), lineno=40, col_offset=19, end_lineno=40, end_col_offset=42), value=Call(func=Name(id='field', ctx=Load(), lineno=40, col_offset=45, end_lineno=40, end_col_offset=50), keywords=[keyword(arg='default_factory', value=Name(id='list', ctx=Load(), lineno=40, col_offset=67, end_lineno=40, end_col_offset=71), lineno=40, col_offset=51, end_lineno=40, end_col_offset=71)], lineno=40, col_offset=45, end_lineno=40, end_col_offset=72), simple=1, lineno=40, col_offset=4, end_lineno=40, end_col_offset=72), AnnAssign(target=Name(id='increments', ctx=Store(), lineno=41, col_offset=4, end_lineno=41, end_col_offset=14), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=41, col_offset=16, end_lineno=41, end_col_offset=20), slice=Name(id='float', ctx=Load(), lineno=41, col_offset=21, end_lineno=41, end_col_offset=26), ctx=Load(), lineno=41, col_offset=16, end_lineno=41, end_col_offset=27), value=Call(func=Name(id='field', ctx=Load(), lineno=41, col_offset=30, end_lineno=41, end_col_offset=35), keywords=[keyword(arg='default_factory', value=Name(id='list', ctx=Load(), lineno=41, col_offset=52, end_lineno=41, end_col_offset=56), lineno=41, col_offset=36, end_lineno=41, end_col_offset=56)], lineno=41, col_offset=30, end_lineno=41, end_col_offset=57), simple=1, lineno=41, col_offset=4, end_lineno=41, end_col_offset=57), FunctionDef(name='labels', args=arguments(args=[arg(arg='self', lineno=43, col_offset=15, end_lineno=43, end_col_offset=19)], kwarg=arg(arg='labels', annotation=Name(id='object', ctx=Load(), lineno=43, col_offset=31, end_lineno=43, end_col_offset=37), lineno=43, col_offset=23, end_lineno=43, end_col_offset=37)), body=[Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='self', ctx=Load(), lineno=44, col_offset=8, end_lineno=44, end_col_offset=12), attr='labels_called', ctx=Load(), lineno=44, col_offset=8, end_lineno=44, end_col_offset=26), attr='append', ctx=Load(), lineno=44, col_offset=8, end_lineno=44, end_col_offset=33), args=[Name(id='labels', ctx=Load(), lineno=44, col_offset=34, end_lineno=44, end_col_offset=40)], lineno=44, col_offset=8, end_lineno=44, end_col_offset=41), lineno=44, col_offset=8, end_lineno=44, end_col_offset=41), Return(value=Name(id='self', ctx=Load(), lineno=45, col_offset=15, end_lineno=45, end_col_offset=19), lineno=45, col_offset=8, end_lineno=45, end_col_offset=19)], returns=Name(id='_CounterStub', ctx=Load(), lineno=43, col_offset=42, end_lineno=43, end_col_offset=54), lineno=43, col_offset=4, end_lineno=45, end_col_offset=19), FunctionDef(name='inc', args=arguments(args=[arg(arg='self', lineno=47, col_offset=12, end_lineno=47, end_col_offset=16), arg(arg='value', annotation=Name(id='float', ctx=Load(), lineno=47, col_offset=25, end_lineno=47, end_col_offset=30), lineno=47, col_offset=18, end_lineno=47, end_col_offset=30)], defaults=[Constant(value=1.0, lineno=47, col_offset=33, end_lineno=47, end_col_offset=36)]), body=[Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='self', ctx=Load(), lineno=48, col_offset=8, end_lineno=48, end_col_offset=12), attr='increments', ctx=Load(), lineno=48, col_offset=8, end_lineno=48, end_col_offset=23), attr='append', ctx=Load(), lineno=48, col_offset=8, end_lineno=48, end_col_offset=30), args=[Name(id='value', ctx=Load(), lineno=48, col_offset=31, end_lineno=48, end_col_offset=36)], lineno=48, col_offset=8, end_lineno=48, end_col_offset=37), lineno=48, col_offset=8, end_lineno=48, end_col_offset=37)], returns=Constant(value=None, lineno=47, col_offset=41, end_lineno=47, end_col_offset=45), lineno=47, col_offset=4, end_lineno=48, end_col_offset=37)], decorator_list=[Call(func=Name(id='dataclass', ctx=Load(), lineno=38, col_offset=1, end_lineno=38, end_col_offset=10), keywords=[keyword(arg='slots', value=Constant(value=True, lineno=38, col_offset=17, end_lineno=38, end_col_offset=21), lineno=38, col_offset=11, end_lineno=38, end_col_offset=21), keyword(arg='frozen', value=Constant(value=True, lineno=38, col_offset=30, end_lineno=38, end_col_offset=34), lineno=38, col_offset=23, end_lineno=38, end_col_offset=34)], lineno=38, col_offset=1, end_lineno=38, end_col_offset=35)], lineno=39, col_offset=0, end_lineno=48, end_col_offset=37), FunctionDef(name='_empty_docfacts', args=arguments(), body=[Expr(value=Constant(value='Return an empty list of docfacts.\n\n    Returns\n    -------\n    list[DocFact]\n        Empty list.\n    ', lineno=52, col_offset=4, end_lineno=58, end_col_offset=7), lineno=52, col_offset=4, end_lineno=58, end_col_offset=7), Return(value=List(ctx=Load(), lineno=59, col_offset=11, end_lineno=59, end_col_offset=13), lineno=59, col_offset=4, end_lineno=59, end_col_offset=13)], returns=Subscript(value=Name(id='list', ctx=Load(), lineno=51, col_offset=25, end_lineno=51, end_col_offset=29), slice=Name(id='DocFact', ctx=Load(), lineno=51, col_offset=30, end_lineno=51, end_col_offset=37), ctx=Load(), lineno=51, col_offset=25, end_lineno=51, end_col_offset=38), lineno=51, col_offset=0, end_lineno=59, end_col_offset=13), FunctionDef(name='_captured_messages', args=arguments(args=[arg(arg='caplog', annotation=Name(id='LogCaptureFixture', ctx=Load(), lineno=62, col_offset=31, end_lineno=62, end_col_offset=48), lineno=62, col_offset=23, end_lineno=62, end_col_offset=48)]), body=[Expr(value=Constant(value='Return captured log messages from the caplog fixture.\n\n    Parameters\n    ----------\n    caplog : LogCaptureFixture\n        Pytest log capture fixture.\n\n    Returns\n    -------\n    list[str]\n        List of captured log messages.\n    ', lineno=63, col_offset=4, end_lineno=74, end_col_offset=7), lineno=63, col_offset=4, end_lineno=74, end_col_offset=7), Return(value=ListComp(elt=Call(func=Attribute(value=Name(id='record', ctx=Load(), lineno=75, col_offset=12, end_lineno=75, end_col_offset=18), attr='getMessage', ctx=Load(), lineno=75, col_offset=12, end_lineno=75, end_col_offset=29), lineno=75, col_offset=12, end_lineno=75, end_col_offset=31), generators=[comprehension(target=Name(id='record', ctx=Store(), lineno=75, col_offset=36, end_lineno=75, end_col_offset=42), iter=Attribute(value=Name(id='caplog', ctx=Load(), lineno=75, col_offset=46, end_lineno=75, end_col_offset=52), attr='records', ctx=Load(), lineno=75, col_offset=46, end_lineno=75, end_col_offset=60), is_async=0)], lineno=75, col_offset=11, end_lineno=75, end_col_offset=61), lineno=75, col_offset=4, end_lineno=75, end_col_offset=61)], returns=Subscript(value=Name(id='list', ctx=Load(), lineno=62, col_offset=53, end_lineno=62, end_col_offset=57), slice=Name(id='str', ctx=Load(), lineno=62, col_offset=58, end_lineno=62, end_col_offset=61), ctx=Load(), lineno=62, col_offset=53, end_lineno=62, end_col_offset=62), lineno=62, col_offset=0, end_lineno=75, end_col_offset=61), ClassDef(name='TestFailureSummaryRenderer', body=[Expr(value=Constant(value='Tests for FailureSummaryRenderer.', lineno=79, col_offset=4, end_lineno=79, end_col_offset=43), lineno=79, col_offset=4, end_lineno=79, end_col_offset=43), FunctionDef(name='test_render_no_errors', args=arguments(args=[arg(arg='self', lineno=81, col_offset=30, end_lineno=81, end_col_offset=34), arg(arg='caplog', annotation=Name(id='LogCaptureFixture', ctx=Load(), lineno=81, col_offset=44, end_lineno=81, end_col_offset=61), lineno=81, col_offset=36, end_lineno=81, end_col_offset=61)]), body=[Expr(value=Constant(value='Empty error list should produce no output.', lineno=82, col_offset=8, end_lineno=82, end_col_offset=56), lineno=82, col_offset=8, end_lineno=82, end_col_offset=56), Assign(targets=[Name(id='renderer', ctx=Store(), lineno=83, col_offset=8, end_lineno=83, end_col_offset=16)], value=Call(func=Name(id='FailureSummaryRenderer', ctx=Load(), lineno=83, col_offset=19, end_lineno=83, end_col_offset=41), keywords=[keyword(arg='logger', value=Call(func=Attribute(value=Name(id='logging', ctx=Load(), lineno=83, col_offset=49, end_lineno=83, end_col_offset=56), attr='getLogger', ctx=Load(), lineno=83, col_offset=49, end_lineno=83, end_col_offset=66), args=[Name(id='__name__', ctx=Load(), lineno=83, col_offset=67, end_lineno=83, end_col_offset=75)], lineno=83, col_offset=49, end_lineno=83, end_col_offset=76), lineno=83, col_offset=42, end_lineno=83, end_col_offset=76)], lineno=83, col_offset=19, end_lineno=83, end_col_offset=77), lineno=83, col_offset=8, end_lineno=83, end_col_offset=77), Assign(targets=[Name(id='summary', ctx=Store(), lineno=84, col_offset=8, end_lineno=84, end_col_offset=15)], value=Call(func=Name(id='RunSummarySnapshot', ctx=Load(), lineno=84, col_offset=18, end_lineno=84, end_col_offset=36), keywords=[keyword(arg='considered', value=Constant(value=10, lineno=85, col_offset=23, end_lineno=85, end_col_offset=25), lineno=85, col_offset=12, end_lineno=85, end_col_offset=25), keyword(arg='processed', value=Constant(value=10, lineno=86, col_offset=22, end_lineno=86, end_col_offset=24), lineno=86, col_offset=12, end_lineno=86, end_col_offset=24), keyword(arg='changed', value=Constant(value=0, lineno=87, col_offset=20, end_lineno=87, end_col_offset=21), lineno=87, col_offset=12, end_lineno=87, end_col_offset=21), keyword(arg='status_counts', value=Dict(keys=[Constant(value='success', lineno=88, col_offset=27, end_lineno=88, end_col_offset=36), Constant(value='violation', lineno=88, col_offset=42, end_lineno=88, end_col_offset=53), Constant(value='config', lineno=88, col_offset=58, end_lineno=88, end_col_offset=66), Constant(value='error', lineno=88, col_offset=71, end_lineno=88, end_col_offset=78)], values=[Constant(value=10, lineno=88, col_offset=38, end_lineno=88, end_col_offset=40), Constant(value=0, lineno=88, col_offset=55, end_lineno=88, end_col_offset=56), Constant(value=0, lineno=88, col_offset=68, end_lineno=88, end_col_offset=69), Constant(value=0, lineno=88, col_offset=80, end_lineno=88, end_col_offset=81)], lineno=88, col_offset=26, end_lineno=88, end_col_offset=82), lineno=88, col_offset=12, end_lineno=88, end_col_offset=82), keyword(arg='observability_path', value=Name(id='OBSERVABILITY_PATH', ctx=Load(), lineno=89, col_offset=31, end_lineno=89, end_col_offset=49), lineno=89, col_offset=12, end_lineno=89, end_col_offset=49)], lineno=84, col_offset=18, end_lineno=90, end_col_offset=9), lineno=84, col_offset=8, end_lineno=90, end_col_offset=9), Expr(value=Call(func=Attribute(value=Name(id='renderer', ctx=Load(), lineno=91, col_offset=8, end_lineno=91, end_col_offset=16), attr='render', ctx=Load(), lineno=91, col_offset=8, end_lineno=91, end_col_offset=23), args=[Name(id='summary', ctx=Load(), lineno=91, col_offset=24, end_lineno=91, end_col_offset=31), List(ctx=Load(), lineno=91, col_offset=33, end_lineno=91, end_col_offset=35)], lineno=91, col_offset=8, end_lineno=91, end_col_offset=36), lineno=91, col_offset=8, end_lineno=91, end_col_offset=36), Assert(test=Compare(left=Call(func=Name(id='len', ctx=Load(), lineno=92, col_offset=15, end_lineno=92, end_col_offset=18), args=[Attribute(value=Name(id='caplog', ctx=Load(), lineno=92, col_offset=19, end_lineno=92, end_col_offset=25), attr='records', ctx=Load(), lineno=92, col_offset=19, end_lineno=92, end_col_offset=33)], lineno=92, col_offset=15, end_lineno=92, end_col_offset=34), ops=[Eq()], comparators=[Constant(value=0, lineno=92, col_offset=38, end_lineno=92, end_col_offset=39)], lineno=92, col_offset=15, end_lineno=92, end_col_offset=39), lineno=92, col_offset=8, end_lineno=92, end_col_offset=39)], returns=Constant(value=None, lineno=81, col_offset=66, end_lineno=81, end_col_offset=70), lineno=81, col_offset=4, end_lineno=92, end_col_offset=39), FunctionDef(name='test_render_with_errors', args=arguments(args=[arg(arg='self', lineno=94, col_offset=32, end_lineno=94, end_col_offset=36), arg(arg='caplog', annotation=Name(id='LogCaptureFixture', ctx=Load(), lineno=94, col_offset=46, end_lineno=94, end_col_offset=63), lineno=94, col_offset=38, end_lineno=94, end_col_offset=63)]), body=[Expr(value=Constant(value='Error list should produce structured logging.', lineno=95, col_offset=8, end_lineno=95, end_col_offset=59), lineno=95, col_offset=8, end_lineno=95, end_col_offset=59), Assign(targets=[Name(id='renderer', ctx=Store(), lineno=96, col_offset=8, end_lineno=96, end_col_offset=16)], value=Call(func=Name(id='FailureSummaryRenderer', ctx=Load(), lineno=96, col_offset=19, end_lineno=96, end_col_offset=41), keywords=[keyword(arg='logger', value=Call(func=Attribute(value=Name(id='logging', ctx=Load(), lineno=96, col_offset=49, end_lineno=96, end_col_offset=56), attr='getLogger', ctx=Load(), lineno=96, col_offset=49, end_lineno=96, end_col_offset=66), args=[Name(id='__name__', ctx=Load(), lineno=96, col_offset=67, end_lineno=96, end_col_offset=75)], lineno=96, col_offset=49, end_lineno=96, end_col_offset=76), lineno=96, col_offset=42, end_lineno=96, end_col_offset=76)], lineno=96, col_offset=19, end_lineno=96, end_col_offset=77), lineno=96, col_offset=8, end_lineno=96, end_col_offset=77), Assign(targets=[Name(id='summary', ctx=Store(), lineno=97, col_offset=8, end_lineno=97, end_col_offset=15)], value=Call(func=Name(id='RunSummarySnapshot', ctx=Load(), lineno=97, col_offset=18, end_lineno=97, end_col_offset=36), keywords=[keyword(arg='considered', value=Constant(value=10, lineno=98, col_offset=23, end_lineno=98, end_col_offset=25), lineno=98, col_offset=12, end_lineno=98, end_col_offset=25), keyword(arg='processed', value=Constant(value=8, lineno=99, col_offset=22, end_lineno=99, end_col_offset=23), lineno=99, col_offset=12, end_lineno=99, end_col_offset=23), keyword(arg='changed', value=Constant(value=2, lineno=100, col_offset=20, end_lineno=100, end_col_offset=21), lineno=100, col_offset=12, end_lineno=100, end_col_offset=21), keyword(arg='status_counts', value=Dict(keys=[Constant(value='success', lineno=101, col_offset=27, end_lineno=101, end_col_offset=36), Constant(value='violation', lineno=101, col_offset=41, end_lineno=101, end_col_offset=52), Constant(value='config', lineno=101, col_offset=57, end_lineno=101, end_col_offset=65), Constant(value='error', lineno=101, col_offset=70, end_lineno=101, end_col_offset=77)], values=[Constant(value=7, lineno=101, col_offset=38, end_lineno=101, end_col_offset=39), Constant(value=1, lineno=101, col_offset=54, end_lineno=101, end_col_offset=55), Constant(value=0, lineno=101, col_offset=67, end_lineno=101, end_col_offset=68), Constant(value=0, lineno=101, col_offset=79, end_lineno=101, end_col_offset=80)], lineno=101, col_offset=26, end_lineno=101, end_col_offset=81), lineno=101, col_offset=12, end_lineno=101, end_col_offset=81), keyword(arg='observability_path', value=Name(id='OBSERVABILITY_PATH', ctx=Load(), lineno=102, col_offset=31, end_lineno=102, end_col_offset=49), lineno=102, col_offset=12, end_lineno=102, end_col_offset=49)], lineno=97, col_offset=18, end_lineno=103, end_col_offset=9), lineno=97, col_offset=8, end_lineno=103, end_col_offset=9), Assign(targets=[Name(id='errors', ctx=Store(), lineno=104, col_offset=8, end_lineno=104, end_col_offset=14)], value=List(elts=[Call(func=Name(id='ErrorEnvelope', ctx=Load(), lineno=105, col_offset=12, end_lineno=105, end_col_offset=25), keywords=[keyword(arg='file', value=Constant(value='foo.py', lineno=105, col_offset=31, end_lineno=105, end_col_offset=39), lineno=105, col_offset=26, end_lineno=105, end_col_offset=39), keyword(arg='status', value=Attribute(value=Name(id='RunStatus', ctx=Load(), lineno=105, col_offset=48, end_lineno=105, end_col_offset=57), attr='VIOLATION', ctx=Load(), lineno=105, col_offset=48, end_lineno=105, end_col_offset=67), lineno=105, col_offset=41, end_lineno=105, end_col_offset=67), keyword(arg='message', value=Constant(value='drift detected', lineno=105, col_offset=77, end_lineno=105, end_col_offset=93), lineno=105, col_offset=69, end_lineno=105, end_col_offset=93)], lineno=105, col_offset=12, end_lineno=105, end_col_offset=94), Call(func=Name(id='ErrorEnvelope', ctx=Load(), lineno=106, col_offset=12, end_lineno=106, end_col_offset=25), keywords=[keyword(arg='file', value=Constant(value='bar.py', lineno=106, col_offset=31, end_lineno=106, end_col_offset=39), lineno=106, col_offset=26, end_lineno=106, end_col_offset=39), keyword(arg='status', value=Attribute(value=Name(id='RunStatus', ctx=Load(), lineno=106, col_offset=48, end_lineno=106, end_col_offset=57), attr='ERROR', ctx=Load(), lineno=106, col_offset=48, end_lineno=106, end_col_offset=63), lineno=106, col_offset=41, end_lineno=106, end_col_offset=63), keyword(arg='message', value=Constant(value='harvest failed', lineno=106, col_offset=73, end_lineno=106, end_col_offset=89), lineno=106, col_offset=65, end_lineno=106, end_col_offset=89)], lineno=106, col_offset=12, end_lineno=106, end_col_offset=90)], ctx=Load(), lineno=104, col_offset=17, end_lineno=107, end_col_offset=9), lineno=104, col_offset=8, end_lineno=107, end_col_offset=9), Expr(value=Call(func=Attribute(value=Name(id='renderer', ctx=Load(), lineno=108, col_offset=8, end_lineno=108, end_col_offset=16), attr='render', ctx=Load(), lineno=108, col_offset=8, end_lineno=108, end_col_offset=23), args=[Name(id='summary', ctx=Load(), lineno=108, col_offset=24, end_lineno=108, end_col_offset=31), Name(id='errors', ctx=Load(), lineno=108, col_offset=33, end_lineno=108, end_col_offset=39)], lineno=108, col_offset=8, end_lineno=108, end_col_offset=40), lineno=108, col_offset=8, end_lineno=108, end_col_offset=40), Assign(targets=[Name(id='messages', ctx=Store(), lineno=109, col_offset=8, end_lineno=109, end_col_offset=16)], value=Call(func=Name(id='_captured_messages', ctx=Load(), lineno=109, col_offset=19, end_lineno=109, end_col_offset=37), args=[Name(id='caplog', ctx=Load(), lineno=109, col_offset=38, end_lineno=109, end_col_offset=44)], lineno=109, col_offset=19, end_lineno=109, end_col_offset=45), lineno=109, col_offset=8, end_lineno=109, end_col_offset=45), Assert(test=Call(func=Name(id='any', ctx=Load(), lineno=110, col_offset=15, end_lineno=110, end_col_offset=18), args=[GeneratorExp(elt=Compare(left=Constant(value='[SUMMARY]', lineno=110, col_offset=19, end_lineno=110, end_col_offset=30), ops=[In()], comparators=[Name(id='message', ctx=Load(), lineno=110, col_offset=34, end_lineno=110, end_col_offset=41)], lineno=110, col_offset=19, end_lineno=110, end_col_offset=41), generators=[comprehension(target=Name(id='message', ctx=Store(), lineno=110, col_offset=46, end_lineno=110, end_col_offset=53), iter=Name(id='messages', ctx=Load(), lineno=110, col_offset=57, end_lineno=110, end_col_offset=65), is_async=0)], lineno=110, col_offset=18, end_lineno=110, end_col_offset=66)], lineno=110, col_offset=15, end_lineno=110, end_col_offset=66), lineno=110, col_offset=8, end_lineno=110, end_col_offset=66)], returns=Constant(value=None, lineno=94, col_offset=68, end_lineno=94, end_col_offset=72), lineno=94, col_offset=4, end_lineno=110, end_col_offset=66), FunctionDef(name='test_render_truncates_top_errors', args=arguments(args=[arg(arg='self', lineno=112, col_offset=41, end_lineno=112, end_col_offset=45), arg(arg='caplog', annotation=Name(id='LogCaptureFixture', ctx=Load(), lineno=112, col_offset=55, end_lineno=112, end_col_offset=72), lineno=112, col_offset=47, end_lineno=112, end_col_offset=72)]), body=[Expr(value=Constant(value='Should only show top 5 errors.', lineno=113, col_offset=8, end_lineno=113, end_col_offset=44), lineno=113, col_offset=8, end_lineno=113, end_col_offset=44), Assign(targets=[Name(id='renderer', ctx=Store(), lineno=114, col_offset=8, end_lineno=114, end_col_offset=16)], value=Call(func=Name(id='FailureSummaryRenderer', ctx=Load(), lineno=114, col_offset=19, end_lineno=114, end_col_offset=41), keywords=[keyword(arg='logger', value=Call(func=Attribute(value=Name(id='logging', ctx=Load(), lineno=114, col_offset=49, end_lineno=114, end_col_offset=56), attr='getLogger', ctx=Load(), lineno=114, col_offset=49, end_lineno=114, end_col_offset=66), args=[Name(id='__name__', ctx=Load(), lineno=114, col_offset=67, end_lineno=114, end_col_offset=75)], lineno=114, col_offset=49, end_lineno=114, end_col_offset=76), lineno=114, col_offset=42, end_lineno=114, end_col_offset=76)], lineno=114, col_offset=19, end_lineno=114, end_col_offset=77), lineno=114, col_offset=8, end_lineno=114, end_col_offset=77), Assign(targets=[Name(id='summary', ctx=Store(), lineno=115, col_offset=8, end_lineno=115, end_col_offset=15)], value=Call(func=Name(id='RunSummarySnapshot', ctx=Load(), lineno=115, col_offset=18, end_lineno=115, end_col_offset=36), keywords=[keyword(arg='considered', value=Constant(value=20, lineno=116, col_offset=23, end_lineno=116, end_col_offset=25), lineno=116, col_offset=12, end_lineno=116, end_col_offset=25), keyword(arg='processed', value=Constant(value=15, lineno=117, col_offset=22, end_lineno=117, end_col_offset=24), lineno=117, col_offset=12, end_lineno=117, end_col_offset=24), keyword(arg='changed', value=Constant(value=5, lineno=118, col_offset=20, end_lineno=118, end_col_offset=21), lineno=118, col_offset=12, end_lineno=118, end_col_offset=21), keyword(arg='status_counts', value=Dict(keys=[Constant(value='success', lineno=119, col_offset=27, end_lineno=119, end_col_offset=36), Constant(value='violation', lineno=119, col_offset=42, end_lineno=119, end_col_offset=53), Constant(value='config', lineno=119, col_offset=58, end_lineno=119, end_col_offset=66), Constant(value='error', lineno=119, col_offset=71, end_lineno=119, end_col_offset=78)], values=[Constant(value=10, lineno=119, col_offset=38, end_lineno=119, end_col_offset=40), Constant(value=5, lineno=119, col_offset=55, end_lineno=119, end_col_offset=56), Constant(value=0, lineno=119, col_offset=68, end_lineno=119, end_col_offset=69), Constant(value=0, lineno=119, col_offset=80, end_lineno=119, end_col_offset=81)], lineno=119, col_offset=26, end_lineno=119, end_col_offset=82), lineno=119, col_offset=12, end_lineno=119, end_col_offset=82), keyword(arg='observability_path', value=Name(id='OBSERVABILITY_PATH', ctx=Load(), lineno=120, col_offset=31, end_lineno=120, end_col_offset=49), lineno=120, col_offset=12, end_lineno=120, end_col_offset=49)], lineno=115, col_offset=18, end_lineno=121, end_col_offset=9), lineno=115, col_offset=8, end_lineno=121, end_col_offset=9), Assign(targets=[Name(id='errors', ctx=Store(), lineno=122, col_offset=8, end_lineno=122, end_col_offset=14)], value=ListComp(elt=Call(func=Name(id='ErrorEnvelope', ctx=Load(), lineno=123, col_offset=12, end_lineno=123, end_col_offset=25), keywords=[keyword(arg='file', value=JoinedStr(values=[Constant(value='file_', lineno=123, col_offset=33, end_lineno=123, end_col_offset=38), FormattedValue(value=Name(id='i', ctx=Load(), lineno=123, col_offset=39, end_lineno=123, end_col_offset=40), conversion=-1, lineno=123, col_offset=38, end_lineno=123, end_col_offset=41), Constant(value='.py', lineno=123, col_offset=41, end_lineno=123, end_col_offset=44)], lineno=123, col_offset=31, end_lineno=123, end_col_offset=45), lineno=123, col_offset=26, end_lineno=123, end_col_offset=45), keyword(arg='status', value=Attribute(value=Name(id='RunStatus', ctx=Load(), lineno=123, col_offset=54, end_lineno=123, end_col_offset=63), attr='VIOLATION', ctx=Load(), lineno=123, col_offset=54, end_lineno=123, end_col_offset=73), lineno=123, col_offset=47, end_lineno=123, end_col_offset=73), keyword(arg='message', value=JoinedStr(values=[Constant(value='error ', lineno=123, col_offset=85, end_lineno=123, end_col_offset=91), FormattedValue(value=Name(id='i', ctx=Load(), lineno=123, col_offset=92, end_lineno=123, end_col_offset=93), conversion=-1, lineno=123, col_offset=91, end_lineno=123, end_col_offset=94)], lineno=123, col_offset=83, end_lineno=123, end_col_offset=95), lineno=123, col_offset=75, end_lineno=123, end_col_offset=95)], lineno=123, col_offset=12, end_lineno=123, end_col_offset=96), generators=[comprehension(target=Name(id='i', ctx=Store(), lineno=124, col_offset=16, end_lineno=124, end_col_offset=17), iter=Call(func=Name(id='range', ctx=Load(), lineno=124, col_offset=21, end_lineno=124, end_col_offset=26), args=[Constant(value=10, lineno=124, col_offset=27, end_lineno=124, end_col_offset=29)], lineno=124, col_offset=21, end_lineno=124, end_col_offset=30), is_async=0)], lineno=122, col_offset=17, end_lineno=125, end_col_offset=9), lineno=122, col_offset=8, end_lineno=125, end_col_offset=9), Expr(value=Call(func=Attribute(value=Name(id='renderer', ctx=Load(), lineno=126, col_offset=8, end_lineno=126, end_col_offset=16), attr='render', ctx=Load(), lineno=126, col_offset=8, end_lineno=126, end_col_offset=23), args=[Name(id='summary', ctx=Load(), lineno=126, col_offset=24, end_lineno=126, end_col_offset=31), Name(id='errors', ctx=Load(), lineno=126, col_offset=33, end_lineno=126, end_col_offset=39)], lineno=126, col_offset=8, end_lineno=126, end_col_offset=40), lineno=126, col_offset=8, end_lineno=126, end_col_offset=40), Assign(targets=[Name(id='messages', ctx=Store(), lineno=127, col_offset=8, end_lineno=127, end_col_offset=16)], value=Call(func=Name(id='_captured_messages', ctx=Load(), lineno=127, col_offset=19, end_lineno=127, end_col_offset=37), args=[Name(id='caplog', ctx=Load(), lineno=127, col_offset=38, end_lineno=127, end_col_offset=44)], lineno=127, col_offset=19, end_lineno=127, end_col_offset=45), lineno=127, col_offset=8, end_lineno=127, end_col_offset=45), Assign(targets=[Name(id='output', ctx=Store(), lineno=128, col_offset=8, end_lineno=128, end_col_offset=14)], value=Call(func=Attribute(value=Constant(value='\n', lineno=128, col_offset=17, end_lineno=128, end_col_offset=21), attr='join', ctx=Load(), lineno=128, col_offset=17, end_lineno=128, end_col_offset=26), args=[Name(id='messages', ctx=Load(), lineno=128, col_offset=27, end_lineno=128, end_col_offset=35)], lineno=128, col_offset=17, end_lineno=128, end_col_offset=36), lineno=128, col_offset=8, end_lineno=128, end_col_offset=36), Assert(test=Compare(left=Call(func=Attribute(value=Name(id='output', ctx=Load(), lineno=129, col_offset=15, end_lineno=129, end_col_offset=21), attr='count', ctx=Load(), lineno=129, col_offset=15, end_lineno=129, end_col_offset=27), args=[Constant(value='file_', lineno=129, col_offset=28, end_lineno=129, end_col_offset=35)], lineno=129, col_offset=15, end_lineno=129, end_col_offset=36), ops=[Eq()], comparators=[Constant(value=5, lineno=129, col_offset=40, end_lineno=129, end_col_offset=41)], lineno=129, col_offset=15, end_lineno=129, end_col_offset=41), lineno=129, col_offset=8, end_lineno=129, end_col_offset=41)], returns=Constant(value=None, lineno=112, col_offset=77, end_lineno=112, end_col_offset=81), lineno=112, col_offset=4, end_lineno=129, end_col_offset=41)], lineno=78, col_offset=0, end_lineno=129, end_col_offset=41), ClassDef(name='TestMetricsRecorder', body=[Expr(value=Constant(value='Tests for MetricsRecorder.', lineno=133, col_offset=4, end_lineno=133, end_col_offset=36), lineno=133, col_offset=4, end_lineno=133, end_col_offset=36), FunctionDef(name='test_observe_cli_duration', args=arguments(args=[arg(arg='self', lineno=135, col_offset=34, end_lineno=135, end_col_offset=38)]), body=[Expr(value=Constant(value='Should record duration and increment counter.', lineno=136, col_offset=8, end_lineno=136, end_col_offset=59), lineno=136, col_offset=8, end_lineno=136, end_col_offset=59), Assign(targets=[Name(id='histogram', ctx=Store(), lineno=137, col_offset=8, end_lineno=137, end_col_offset=17)], value=Call(func=Name(id='_HistogramStub', ctx=Load(), lineno=137, col_offset=20, end_lineno=137, end_col_offset=34), lineno=137, col_offset=20, end_lineno=137, end_col_offset=36), lineno=137, col_offset=8, end_lineno=137, end_col_offset=36), Assign(targets=[Name(id='counter', ctx=Store(), lineno=138, col_offset=8, end_lineno=138, end_col_offset=15)], value=Call(func=Name(id='_CounterStub', ctx=Load(), lineno=138, col_offset=18, end_lineno=138, end_col_offset=30), lineno=138, col_offset=18, end_lineno=138, end_col_offset=32), lineno=138, col_offset=8, end_lineno=138, end_col_offset=32), Assign(targets=[Name(id='recorder', ctx=Store(), lineno=140, col_offset=8, end_lineno=140, end_col_offset=16)], value=Call(func=Name(id='MetricsRecorder', ctx=Load(), lineno=140, col_offset=19, end_lineno=140, end_col_offset=34), keywords=[keyword(arg='cli_duration_seconds', value=Name(id='histogram', ctx=Load(), lineno=140, col_offset=56, end_lineno=140, end_col_offset=65), lineno=140, col_offset=35, end_lineno=140, end_col_offset=65), keyword(arg='runs_total', value=Name(id='counter', ctx=Load(), lineno=140, col_offset=78, end_lineno=140, end_col_offset=85), lineno=140, col_offset=67, end_lineno=140, end_col_offset=85)], lineno=140, col_offset=19, end_lineno=140, end_col_offset=86), lineno=140, col_offset=8, end_lineno=140, end_col_offset=86), Expr(value=Call(func=Attribute(value=Name(id='recorder', ctx=Load(), lineno=142, col_offset=8, end_lineno=142, end_col_offset=16), attr='observe_cli_duration', ctx=Load(), lineno=142, col_offset=8, end_lineno=142, end_col_offset=37), keywords=[keyword(arg='command', value=Constant(value='check', lineno=143, col_offset=20, end_lineno=143, end_col_offset=27), lineno=143, col_offset=12, end_lineno=143, end_col_offset=27), keyword(arg='status', value=Attribute(value=Name(id='ExitStatus', ctx=Load(), lineno=144, col_offset=19, end_lineno=144, end_col_offset=29), attr='SUCCESS', ctx=Load(), lineno=144, col_offset=19, end_lineno=144, end_col_offset=37), lineno=144, col_offset=12, end_lineno=144, end_col_offset=37), keyword(arg='duration_seconds', value=Constant(value=1.5, lineno=145, col_offset=29, end_lineno=145, end_col_offset=32), lineno=145, col_offset=12, end_lineno=145, end_col_offset=32)], lineno=142, col_offset=8, end_lineno=146, end_col_offset=9), lineno=142, col_offset=8, end_lineno=146, end_col_offset=9), Assert(test=Compare(left=Attribute(value=Name(id='histogram', ctx=Load(), lineno=148, col_offset=15, end_lineno=148, end_col_offset=24), attr='labels_called', ctx=Load(), lineno=148, col_offset=15, end_lineno=148, end_col_offset=38), ops=[Eq()], comparators=[List(elts=[Dict(keys=[Constant(value='command', lineno=148, col_offset=44, end_lineno=148, end_col_offset=53), Constant(value='status', lineno=148, col_offset=64, end_lineno=148, end_col_offset=72)], values=[Constant(value='check', lineno=148, col_offset=55, end_lineno=148, end_col_offset=62), Constant(value='success', lineno=148, col_offset=74, end_lineno=148, end_col_offset=83)], lineno=148, col_offset=43, end_lineno=148, end_col_offset=84)], ctx=Load(), lineno=148, col_offset=42, end_lineno=148, end_col_offset=85)], lineno=148, col_offset=15, end_lineno=148, end_col_offset=85), lineno=148, col_offset=8, end_lineno=148, end_col_offset=85), Assert(test=Compare(left=Attribute(value=Name(id='histogram', ctx=Load(), lineno=149, col_offset=15, end_lineno=149, end_col_offset=24), attr='observed', ctx=Load(), lineno=149, col_offset=15, end_lineno=149, end_col_offset=33), ops=[Eq()], comparators=[List(elts=[Constant(value=1.5, lineno=149, col_offset=38, end_lineno=149, end_col_offset=41)], ctx=Load(), lineno=149, col_offset=37, end_lineno=149, end_col_offset=42)], lineno=149, col_offset=15, end_lineno=149, end_col_offset=42), lineno=149, col_offset=8, end_lineno=149, end_col_offset=42), Assert(test=Compare(left=Attribute(value=Name(id='counter', ctx=Load(), lineno=150, col_offset=15, end_lineno=150, end_col_offset=22), attr='labels_called', ctx=Load(), lineno=150, col_offset=15, end_lineno=150, end_col_offset=36), ops=[Eq()], comparators=[List(elts=[Dict(keys=[Constant(value='status', lineno=150, col_offset=42, end_lineno=150, end_col_offset=50)], values=[Constant(value='success', lineno=150, col_offset=52, end_lineno=150, end_col_offset=61)], lineno=150, col_offset=41, end_lineno=150, end_col_offset=62)], ctx=Load(), lineno=150, col_offset=40, end_lineno=150, end_col_offset=63)], lineno=150, col_offset=15, end_lineno=150, end_col_offset=63), lineno=150, col_offset=8, end_lineno=150, end_col_offset=63), Assert(test=Compare(left=Attribute(value=Name(id='counter', ctx=Load(), lineno=151, col_offset=15, end_lineno=151, end_col_offset=22), attr='increments', ctx=Load(), lineno=151, col_offset=15, end_lineno=151, end_col_offset=33), ops=[Eq()], comparators=[List(elts=[Constant(value=1.0, lineno=151, col_offset=38, end_lineno=151, end_col_offset=41)], ctx=Load(), lineno=151, col_offset=37, end_lineno=151, end_col_offset=42)], lineno=151, col_offset=15, end_lineno=151, end_col_offset=42), lineno=151, col_offset=8, end_lineno=151, end_col_offset=42)], returns=Constant(value=None, lineno=135, col_offset=43, end_lineno=135, end_col_offset=47), lineno=135, col_offset=4, end_lineno=151, end_col_offset=42)], lineno=132, col_offset=0, end_lineno=151, end_col_offset=42), ClassDef(name='TestErrorEnvelope', body=[Expr(value=Constant(value='Tests for ErrorEnvelope.', lineno=155, col_offset=4, end_lineno=155, end_col_offset=34), lineno=155, col_offset=4, end_lineno=155, end_col_offset=34), FunctionDef(name='test_to_report', args=arguments(args=[arg(arg='self', lineno=157, col_offset=23, end_lineno=157, end_col_offset=27)]), body=[Expr(value=Constant(value='Should convert to error report dict.', lineno=158, col_offset=8, end_lineno=158, end_col_offset=50), lineno=158, col_offset=8, end_lineno=158, end_col_offset=50), Assign(targets=[Name(id='envelope', ctx=Store(), lineno=159, col_offset=8, end_lineno=159, end_col_offset=16)], value=Call(func=Name(id='ErrorEnvelope', ctx=Load(), lineno=159, col_offset=19, end_lineno=159, end_col_offset=32), keywords=[keyword(arg='file', value=Constant(value='test.py', lineno=160, col_offset=17, end_lineno=160, end_col_offset=26), lineno=160, col_offset=12, end_lineno=160, end_col_offset=26), keyword(arg='status', value=Attribute(value=Name(id='RunStatus', ctx=Load(), lineno=161, col_offset=19, end_lineno=161, end_col_offset=28), attr='VIOLATION', ctx=Load(), lineno=161, col_offset=19, end_lineno=161, end_col_offset=38), lineno=161, col_offset=12, end_lineno=161, end_col_offset=38), keyword(arg='message', value=Constant(value='test error', lineno=162, col_offset=20, end_lineno=162, end_col_offset=32), lineno=162, col_offset=12, end_lineno=162, end_col_offset=32)], lineno=159, col_offset=19, end_lineno=163, end_col_offset=9), lineno=159, col_offset=8, end_lineno=163, end_col_offset=9), Assign(targets=[Name(id='report', ctx=Store(), lineno=164, col_offset=8, end_lineno=164, end_col_offset=14)], value=Call(func=Attribute(value=Name(id='envelope', ctx=Load(), lineno=164, col_offset=17, end_lineno=164, end_col_offset=25), attr='to_report', ctx=Load(), lineno=164, col_offset=17, end_lineno=164, end_col_offset=35), lineno=164, col_offset=17, end_lineno=164, end_col_offset=37), lineno=164, col_offset=8, end_lineno=164, end_col_offset=37), Assert(test=Compare(left=Subscript(value=Name(id='report', ctx=Load(), lineno=165, col_offset=15, end_lineno=165, end_col_offset=21), slice=Constant(value='file', lineno=165, col_offset=22, end_lineno=165, end_col_offset=28), ctx=Load(), lineno=165, col_offset=15, end_lineno=165, end_col_offset=29), ops=[Eq()], comparators=[Constant(value='test.py', lineno=165, col_offset=33, end_lineno=165, end_col_offset=42)], lineno=165, col_offset=15, end_lineno=165, end_col_offset=42), lineno=165, col_offset=8, end_lineno=165, end_col_offset=42), Assert(test=Compare(left=Subscript(value=Name(id='report', ctx=Load(), lineno=166, col_offset=15, end_lineno=166, end_col_offset=21), slice=Constant(value='status', lineno=166, col_offset=22, end_lineno=166, end_col_offset=30), ctx=Load(), lineno=166, col_offset=15, end_lineno=166, end_col_offset=31), ops=[Eq()], comparators=[Attribute(value=Name(id='RunStatus', ctx=Load(), lineno=166, col_offset=35, end_lineno=166, end_col_offset=44), attr='VIOLATION', ctx=Load(), lineno=166, col_offset=35, end_lineno=166, end_col_offset=54)], lineno=166, col_offset=15, end_lineno=166, end_col_offset=54), lineno=166, col_offset=8, end_lineno=166, end_col_offset=54), Assert(test=Compare(left=Subscript(value=Name(id='report', ctx=Load(), lineno=167, col_offset=15, end_lineno=167, end_col_offset=21), slice=Constant(value='message', lineno=167, col_offset=22, end_lineno=167, end_col_offset=31), ctx=Load(), lineno=167, col_offset=15, end_lineno=167, end_col_offset=32), ops=[Eq()], comparators=[Constant(value='test error', lineno=167, col_offset=36, end_lineno=167, end_col_offset=48)], lineno=167, col_offset=15, end_lineno=167, end_col_offset=48), lineno=167, col_offset=8, end_lineno=167, end_col_offset=48)], returns=Constant(value=None, lineno=157, col_offset=32, end_lineno=157, end_col_offset=36), lineno=157, col_offset=4, end_lineno=167, end_col_offset=48)], lineno=154, col_offset=0, end_lineno=167, end_col_offset=48), ClassDef(name='TestFileOutcomeTracking', body=[Expr(value=Constant(value='Tests for FileOutcome data structure.', lineno=171, col_offset=4, end_lineno=171, end_col_offset=47), lineno=171, col_offset=4, end_lineno=171, end_col_offset=47), FunctionDef(name='test_file_outcome_defaults', args=arguments(args=[arg(arg='self', lineno=173, col_offset=35, end_lineno=173, end_col_offset=39)]), body=[Expr(value=Constant(value='FileOutcome should have sensible defaults.', lineno=174, col_offset=8, end_lineno=174, end_col_offset=56), lineno=174, col_offset=8, end_lineno=174, end_col_offset=56), Assign(targets=[Name(id='outcome', ctx=Store(), lineno=175, col_offset=8, end_lineno=175, end_col_offset=15)], value=Call(func=Name(id='FileOutcome', ctx=Load(), lineno=175, col_offset=18, end_lineno=175, end_col_offset=29), keywords=[keyword(arg='status', value=Attribute(value=Name(id='ExitStatus', ctx=Load(), lineno=176, col_offset=19, end_lineno=176, end_col_offset=29), attr='SUCCESS', ctx=Load(), lineno=176, col_offset=19, end_lineno=176, end_col_offset=37), lineno=176, col_offset=12, end_lineno=176, end_col_offset=37), keyword(arg='docfacts', value=Call(func=Name(id='_empty_docfacts', ctx=Load(), lineno=177, col_offset=21, end_lineno=177, end_col_offset=36), lineno=177, col_offset=21, end_lineno=177, end_col_offset=38), lineno=177, col_offset=12, end_lineno=177, end_col_offset=38), keyword(arg='preview', value=Constant(value=None, lineno=178, col_offset=20, end_lineno=178, end_col_offset=24), lineno=178, col_offset=12, end_lineno=178, end_col_offset=24), keyword(arg='changed', value=Constant(value=False, lineno=179, col_offset=20, end_lineno=179, end_col_offset=25), lineno=179, col_offset=12, end_lineno=179, end_col_offset=25), keyword(arg='skipped', value=Constant(value=False, lineno=180, col_offset=20, end_lineno=180, end_col_offset=25), lineno=180, col_offset=12, end_lineno=180, end_col_offset=25)], lineno=175, col_offset=18, end_lineno=181, end_col_offset=9), lineno=175, col_offset=8, end_lineno=181, end_col_offset=9), Assert(test=Compare(left=Attribute(value=Name(id='outcome', ctx=Load(), lineno=182, col_offset=15, end_lineno=182, end_col_offset=22), attr='cache_hit', ctx=Load(), lineno=182, col_offset=15, end_lineno=182, end_col_offset=32), ops=[Is()], comparators=[Constant(value=False, lineno=182, col_offset=36, end_lineno=182, end_col_offset=41)], lineno=182, col_offset=15, end_lineno=182, end_col_offset=41), lineno=182, col_offset=8, end_lineno=182, end_col_offset=41), Assert(test=Compare(left=Attribute(value=Name(id='outcome', ctx=Load(), lineno=183, col_offset=15, end_lineno=183, end_col_offset=22), attr='message', ctx=Load(), lineno=183, col_offset=15, end_lineno=183, end_col_offset=30), ops=[Is()], comparators=[Constant(value=None, lineno=183, col_offset=34, end_lineno=183, end_col_offset=38)], lineno=183, col_offset=15, end_lineno=183, end_col_offset=38), lineno=183, col_offset=8, end_lineno=183, end_col_offset=38), Assert(test=Compare(left=Attribute(value=Name(id='outcome', ctx=Load(), lineno=184, col_offset=15, end_lineno=184, end_col_offset=22), attr='semantics', ctx=Load(), lineno=184, col_offset=15, end_lineno=184, end_col_offset=32), ops=[Eq()], comparators=[List(ctx=Load(), lineno=184, col_offset=36, end_lineno=184, end_col_offset=38)], lineno=184, col_offset=15, end_lineno=184, end_col_offset=38), lineno=184, col_offset=8, end_lineno=184, end_col_offset=38), Assert(test=Compare(left=Attribute(value=Name(id='outcome', ctx=Load(), lineno=185, col_offset=15, end_lineno=185, end_col_offset=22), attr='ir', ctx=Load(), lineno=185, col_offset=15, end_lineno=185, end_col_offset=25), ops=[Eq()], comparators=[List(ctx=Load(), lineno=185, col_offset=29, end_lineno=185, end_col_offset=31)], lineno=185, col_offset=15, end_lineno=185, end_col_offset=31), lineno=185, col_offset=8, end_lineno=185, end_col_offset=31)], returns=Constant(value=None, lineno=173, col_offset=44, end_lineno=173, end_col_offset=48), lineno=173, col_offset=4, end_lineno=185, end_col_offset=31)], lineno=170, col_offset=0, end_lineno=185, end_col_offset=31), ClassDef(name='TestStatusMapping', body=[Expr(value=Constant(value='Tests for status value mappings.', lineno=198, col_offset=4, end_lineno=198, end_col_offset=42), lineno=198, col_offset=4, end_lineno=198, end_col_offset=42), FunctionDef(name='test_status_to_label', args=arguments(args=[arg(arg='self', lineno=200, col_offset=29, end_lineno=200, end_col_offset=33), arg(arg='status', annotation=Name(id='RunStatus', ctx=Load(), lineno=200, col_offset=43, end_lineno=200, end_col_offset=52), lineno=200, col_offset=35, end_lineno=200, end_col_offset=52), arg(arg='label', annotation=Name(id='str', ctx=Load(), lineno=200, col_offset=61, end_lineno=200, end_col_offset=64), lineno=200, col_offset=54, end_lineno=200, end_col_offset=64)]), body=[Expr(value=Constant(value='Verify status string representation.', lineno=201, col_offset=8, end_lineno=201, end_col_offset=50), lineno=201, col_offset=8, end_lineno=201, end_col_offset=50), Assign(targets=[Name(id='envelope', ctx=Store(), lineno=202, col_offset=8, end_lineno=202, end_col_offset=16)], value=Call(func=Name(id='ErrorEnvelope', ctx=Load(), lineno=202, col_offset=19, end_lineno=202, end_col_offset=32), keywords=[keyword(arg='file', value=Constant(value='test.py', lineno=202, col_offset=38, end_lineno=202, end_col_offset=47), lineno=202, col_offset=33, end_lineno=202, end_col_offset=47), keyword(arg='status', value=Name(id='status', ctx=Load(), lineno=202, col_offset=56, end_lineno=202, end_col_offset=62), lineno=202, col_offset=49, end_lineno=202, end_col_offset=62), keyword(arg='message', value=Constant(value='', lineno=202, col_offset=72, end_lineno=202, end_col_offset=74), lineno=202, col_offset=64, end_lineno=202, end_col_offset=74)], lineno=202, col_offset=19, end_lineno=202, end_col_offset=75), lineno=202, col_offset=8, end_lineno=202, end_col_offset=75), Assert(test=Compare(left=Attribute(value=Name(id='envelope', ctx=Load(), lineno=203, col_offset=15, end_lineno=203, end_col_offset=23), attr='status', ctx=Load(), lineno=203, col_offset=15, end_lineno=203, end_col_offset=30), ops=[Eq()], comparators=[Name(id='status', ctx=Load(), lineno=203, col_offset=34, end_lineno=203, end_col_offset=40)], lineno=203, col_offset=15, end_lineno=203, end_col_offset=40), lineno=203, col_offset=8, end_lineno=203, end_col_offset=40), Assert(test=Compare(left=Call(func=Name(id='str', ctx=Load(), lineno=204, col_offset=15, end_lineno=204, end_col_offset=18), args=[Attribute(value=Name(id='envelope', ctx=Load(), lineno=204, col_offset=19, end_lineno=204, end_col_offset=27), attr='status', ctx=Load(), lineno=204, col_offset=19, end_lineno=204, end_col_offset=34)], lineno=204, col_offset=15, end_lineno=204, end_col_offset=35), ops=[Eq()], comparators=[Name(id='label', ctx=Load(), lineno=204, col_offset=39, end_lineno=204, end_col_offset=44)], lineno=204, col_offset=15, end_lineno=204, end_col_offset=44), lineno=204, col_offset=8, end_lineno=204, end_col_offset=44)], returns=Constant(value=None, lineno=200, col_offset=69, end_lineno=200, end_col_offset=73), lineno=200, col_offset=4, end_lineno=204, end_col_offset=44)], decorator_list=[Call(func=Attribute(value=Attribute(value=Name(id='pytest', ctx=Load(), lineno=188, col_offset=1, end_lineno=188, end_col_offset=7), attr='mark', ctx=Load(), lineno=188, col_offset=1, end_lineno=188, end_col_offset=12), attr='parametrize', ctx=Load(), lineno=188, col_offset=1, end_lineno=188, end_col_offset=24), args=[Tuple(elts=[Constant(value='status', lineno=189, col_offset=5, end_lineno=189, end_col_offset=13), Constant(value='label', lineno=189, col_offset=15, end_lineno=189, end_col_offset=22)], ctx=Load(), lineno=189, col_offset=4, end_lineno=189, end_col_offset=23), List(elts=[Tuple(elts=[Attribute(value=Name(id='RunStatus', ctx=Load(), lineno=191, col_offset=9, end_lineno=191, end_col_offset=18), attr='SUCCESS', ctx=Load(), lineno=191, col_offset=9, end_lineno=191, end_col_offset=26), Constant(value='success', lineno=191, col_offset=28, end_lineno=191, end_col_offset=37)], ctx=Load(), lineno=191, col_offset=8, end_lineno=191, end_col_offset=38), Tuple(elts=[Attribute(value=Name(id='RunStatus', ctx=Load(), lineno=192, col_offset=9, end_lineno=192, end_col_offset=18), attr='VIOLATION', ctx=Load(), lineno=192, col_offset=9, end_lineno=192, end_col_offset=28), Constant(value='violation', lineno=192, col_offset=30, end_lineno=192, end_col_offset=41)], ctx=Load(), lineno=192, col_offset=8, end_lineno=192, end_col_offset=42), Tuple(elts=[Attribute(value=Name(id='RunStatus', ctx=Load(), lineno=193, col_offset=9, end_lineno=193, end_col_offset=18), attr='CONFIG', ctx=Load(), lineno=193, col_offset=9, end_lineno=193, end_col_offset=25), Constant(value='config', lineno=193, col_offset=27, end_lineno=193, end_col_offset=35)], ctx=Load(), lineno=193, col_offset=8, end_lineno=193, end_col_offset=36), Tuple(elts=[Attribute(value=Name(id='RunStatus', ctx=Load(), lineno=194, col_offset=9, end_lineno=194, end_col_offset=18), attr='ERROR', ctx=Load(), lineno=194, col_offset=9, end_lineno=194, end_col_offset=24), Constant(value='error', lineno=194, col_offset=26, end_lineno=194, end_col_offset=33)], ctx=Load(), lineno=194, col_offset=8, end_lineno=194, end_col_offset=34)], ctx=Load(), lineno=190, col_offset=4, end_lineno=195, end_col_offset=5)], lineno=188, col_offset=1, end_lineno=196, end_col_offset=1)], lineno=197, col_offset=0, end_lineno=204, end_col_offset=44)])
Module(body=[Expr(value=Constant(value='Smoke tests for configuration validation.\n\nThese tests verify that configuration fails fast with clear error messages when required fields are\nmissing or invalid.\n', lineno=1, col_offset=0, end_lineno=5, end_col_offset=3), lineno=1, col_offset=0, end_lineno=5, end_col_offset=3), ImportFrom(module='__future__', names=[alias(name='annotations', lineno=7, col_offset=23, end_lineno=7, end_col_offset=34)], level=0, lineno=7, col_offset=0, end_lineno=7, end_col_offset=34), Import(names=[alias(name='base64', lineno=9, col_offset=7, end_lineno=9, end_col_offset=13)], lineno=9, col_offset=0, end_lineno=9, end_col_offset=13), Import(names=[alias(name='pytest', lineno=11, col_offset=7, end_lineno=11, end_col_offset=13)], lineno=11, col_offset=0, end_lineno=11, end_col_offset=13), ImportFrom(module='kgfoundry_common.config', names=[alias(name='AppSettings', lineno=13, col_offset=36, end_lineno=13, end_col_offset=47)], level=0, lineno=13, col_offset=0, end_lineno=13, end_col_offset=47), FunctionDef(name='make_settings', args=arguments(kwarg=arg(arg='overrides', annotation=Name(id='object', ctx=Load(), lineno=16, col_offset=31, end_lineno=16, end_col_offset=37), lineno=16, col_offset=20, end_lineno=16, end_col_offset=37)), body=[Expr(value=Constant(value='Construct AppSettings using typed overrides.\n\n    Parameters\n    ----------\n    **overrides : object\n        Field overrides for AppSettings.\n\n    Returns\n    -------\n    AppSettings\n        Configured AppSettings instance.\n    ', lineno=17, col_offset=4, end_lineno=28, end_col_offset=7), lineno=17, col_offset=4, end_lineno=28, end_col_offset=7), AnnAssign(target=Name(id='overrides_dict', ctx=Store(), lineno=29, col_offset=4, end_lineno=29, end_col_offset=18), annotation=Subscript(value=Name(id='dict', ctx=Load(), lineno=29, col_offset=20, end_lineno=29, end_col_offset=24), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=29, col_offset=25, end_lineno=29, end_col_offset=28), Name(id='object', ctx=Load(), lineno=29, col_offset=30, end_lineno=29, end_col_offset=36)], ctx=Load(), lineno=29, col_offset=25, end_lineno=29, end_col_offset=36), ctx=Load(), lineno=29, col_offset=20, end_lineno=29, end_col_offset=37), value=Call(func=Name(id='dict', ctx=Load(), lineno=29, col_offset=40, end_lineno=29, end_col_offset=44), args=[Name(id='overrides', ctx=Load(), lineno=29, col_offset=45, end_lineno=29, end_col_offset=54)], lineno=29, col_offset=40, end_lineno=29, end_col_offset=55), simple=1, lineno=29, col_offset=4, end_lineno=29, end_col_offset=55), AnnAssign(target=Name(id='app_settings_cls', ctx=Store(), lineno=30, col_offset=4, end_lineno=30, end_col_offset=20), annotation=Subscript(value=Name(id='type', ctx=Load(), lineno=30, col_offset=22, end_lineno=30, end_col_offset=26), slice=Name(id='AppSettings', ctx=Load(), lineno=30, col_offset=27, end_lineno=30, end_col_offset=38), ctx=Load(), lineno=30, col_offset=22, end_lineno=30, end_col_offset=39), value=Name(id='AppSettings', ctx=Load(), lineno=30, col_offset=42, end_lineno=30, end_col_offset=53), simple=1, lineno=30, col_offset=4, end_lineno=30, end_col_offset=53), Return(value=Call(func=Attribute(value=Name(id='app_settings_cls', ctx=Load(), lineno=31, col_offset=11, end_lineno=31, end_col_offset=27), attr='from_dict', ctx=Load(), lineno=31, col_offset=11, end_lineno=31, end_col_offset=37), args=[Name(id='overrides_dict', ctx=Load(), lineno=31, col_offset=38, end_lineno=31, end_col_offset=52)], lineno=31, col_offset=11, end_lineno=31, end_col_offset=53), lineno=31, col_offset=4, end_lineno=31, end_col_offset=53)], returns=Name(id='AppSettings', ctx=Load(), lineno=16, col_offset=42, end_lineno=16, end_col_offset=53), lineno=16, col_offset=0, end_lineno=31, end_col_offset=53), ClassDef(name='TestConfigurationValidation', body=[Expr(value=Constant(value='Test suite for AppSettings validation.', lineno=35, col_offset=4, end_lineno=35, end_col_offset=48), lineno=35, col_offset=4, end_lineno=35, end_col_offset=48), FunctionDef(name='test_valid_minimal_config', args=arguments(args=[arg(arg='self', lineno=37, col_offset=34, end_lineno=37, end_col_offset=38)]), body=[Expr(value=Constant(value='Test that minimal valid configuration loads.', lineno=38, col_offset=8, end_lineno=38, end_col_offset=58), lineno=38, col_offset=8, end_lineno=38, end_col_offset=58), Assign(targets=[Name(id='settings', ctx=Store(), lineno=40, col_offset=8, end_lineno=40, end_col_offset=16)], value=Call(func=Name(id='make_settings', ctx=Load(), lineno=40, col_offset=19, end_lineno=40, end_col_offset=32), lineno=40, col_offset=19, end_lineno=40, end_col_offset=34), lineno=40, col_offset=8, end_lineno=40, end_col_offset=34), Assert(test=Compare(left=Attribute(value=Name(id='settings', ctx=Load(), lineno=41, col_offset=15, end_lineno=41, end_col_offset=23), attr='log_level', ctx=Load(), lineno=41, col_offset=15, end_lineno=41, end_col_offset=33), ops=[Eq()], comparators=[Constant(value='INFO', lineno=41, col_offset=37, end_lineno=41, end_col_offset=43)], lineno=41, col_offset=15, end_lineno=41, end_col_offset=43), lineno=41, col_offset=8, end_lineno=41, end_col_offset=43), Assert(test=Compare(left=Attribute(value=Name(id='settings', ctx=Load(), lineno=42, col_offset=15, end_lineno=42, end_col_offset=23), attr='log_format', ctx=Load(), lineno=42, col_offset=15, end_lineno=42, end_col_offset=34), ops=[Eq()], comparators=[Constant(value='json', lineno=42, col_offset=38, end_lineno=42, end_col_offset=44)], lineno=42, col_offset=15, end_lineno=42, end_col_offset=44), lineno=42, col_offset=8, end_lineno=42, end_col_offset=44), Assert(test=Compare(left=Attribute(value=Name(id='settings', ctx=Load(), lineno=43, col_offset=15, end_lineno=43, end_col_offset=23), attr='subprocess_timeout', ctx=Load(), lineno=43, col_offset=15, end_lineno=43, end_col_offset=42), ops=[Eq()], comparators=[Constant(value=300, lineno=43, col_offset=46, end_lineno=43, end_col_offset=49)], lineno=43, col_offset=15, end_lineno=43, end_col_offset=49), lineno=43, col_offset=8, end_lineno=43, end_col_offset=49), Assert(test=Compare(left=Attribute(value=Name(id='settings', ctx=Load(), lineno=44, col_offset=15, end_lineno=44, end_col_offset=23), attr='request_timeout', ctx=Load(), lineno=44, col_offset=15, end_lineno=44, end_col_offset=39), ops=[Eq()], comparators=[Constant(value=30, lineno=44, col_offset=43, end_lineno=44, end_col_offset=45)], lineno=44, col_offset=15, end_lineno=44, end_col_offset=45), lineno=44, col_offset=8, end_lineno=44, end_col_offset=45)], returns=Constant(value=None, lineno=37, col_offset=43, end_lineno=37, end_col_offset=47), lineno=37, col_offset=4, end_lineno=44, end_col_offset=45), FunctionDef(name='test_log_level_validation', args=arguments(args=[arg(arg='self', lineno=46, col_offset=34, end_lineno=46, end_col_offset=38)]), body=[Expr(value=Constant(value='Test log level validation rejects invalid values.', lineno=47, col_offset=8, end_lineno=47, end_col_offset=63), lineno=47, col_offset=8, end_lineno=47, end_col_offset=63), With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=48, col_offset=13, end_lineno=48, end_col_offset=19), attr='raises', ctx=Load(), lineno=48, col_offset=13, end_lineno=48, end_col_offset=26), args=[Name(id='ValueError', ctx=Load(), lineno=48, col_offset=27, end_lineno=48, end_col_offset=37)], keywords=[keyword(arg='match', value=Constant(value='Invalid log level', lineno=48, col_offset=45, end_lineno=48, end_col_offset=64), lineno=48, col_offset=39, end_lineno=48, end_col_offset=64)], lineno=48, col_offset=13, end_lineno=48, end_col_offset=65))], body=[Expr(value=Call(func=Name(id='make_settings', ctx=Load(), lineno=49, col_offset=12, end_lineno=49, end_col_offset=25), keywords=[keyword(arg='log_level', value=Constant(value='INVALID', lineno=49, col_offset=36, end_lineno=49, end_col_offset=45), lineno=49, col_offset=26, end_lineno=49, end_col_offset=45)], lineno=49, col_offset=12, end_lineno=49, end_col_offset=46), lineno=49, col_offset=12, end_lineno=49, end_col_offset=46)], lineno=48, col_offset=8, end_lineno=49, end_col_offset=46)], returns=Constant(value=None, lineno=46, col_offset=43, end_lineno=46, end_col_offset=47), lineno=46, col_offset=4, end_lineno=49, end_col_offset=46), FunctionDef(name='test_log_level_case_insensitive', args=arguments(args=[arg(arg='self', lineno=51, col_offset=40, end_lineno=51, end_col_offset=44)]), body=[Expr(value=Constant(value='Test log level accepts any case.', lineno=52, col_offset=8, end_lineno=52, end_col_offset=46), lineno=52, col_offset=8, end_lineno=52, end_col_offset=46), Assign(targets=[Name(id='settings', ctx=Store(), lineno=53, col_offset=8, end_lineno=53, end_col_offset=16)], value=Call(func=Name(id='make_settings', ctx=Load(), lineno=53, col_offset=19, end_lineno=53, end_col_offset=32), keywords=[keyword(arg='log_level', value=Constant(value='debug', lineno=53, col_offset=43, end_lineno=53, end_col_offset=50), lineno=53, col_offset=33, end_lineno=53, end_col_offset=50)], lineno=53, col_offset=19, end_lineno=53, end_col_offset=51), lineno=53, col_offset=8, end_lineno=53, end_col_offset=51), Assert(test=Compare(left=Attribute(value=Name(id='settings', ctx=Load(), lineno=54, col_offset=15, end_lineno=54, end_col_offset=23), attr='log_level', ctx=Load(), lineno=54, col_offset=15, end_lineno=54, end_col_offset=33), ops=[Eq()], comparators=[Constant(value='DEBUG', lineno=54, col_offset=37, end_lineno=54, end_col_offset=44)], lineno=54, col_offset=15, end_lineno=54, end_col_offset=44), lineno=54, col_offset=8, end_lineno=54, end_col_offset=44)], returns=Constant(value=None, lineno=51, col_offset=49, end_lineno=51, end_col_offset=53), lineno=51, col_offset=4, end_lineno=54, end_col_offset=44), FunctionDef(name='test_log_format_validation', args=arguments(args=[arg(arg='self', lineno=56, col_offset=35, end_lineno=56, end_col_offset=39)]), body=[Expr(value=Constant(value='Test log format validation rejects invalid values.', lineno=57, col_offset=8, end_lineno=57, end_col_offset=64), lineno=57, col_offset=8, end_lineno=57, end_col_offset=64), With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=58, col_offset=13, end_lineno=58, end_col_offset=19), attr='raises', ctx=Load(), lineno=58, col_offset=13, end_lineno=58, end_col_offset=26), args=[Name(id='ValueError', ctx=Load(), lineno=58, col_offset=27, end_lineno=58, end_col_offset=37)], keywords=[keyword(arg='match', value=Constant(value='Invalid log format', lineno=58, col_offset=45, end_lineno=58, end_col_offset=65), lineno=58, col_offset=39, end_lineno=58, end_col_offset=65)], lineno=58, col_offset=13, end_lineno=58, end_col_offset=66))], body=[Expr(value=Call(func=Name(id='make_settings', ctx=Load(), lineno=59, col_offset=12, end_lineno=59, end_col_offset=25), keywords=[keyword(arg='log_format', value=Constant(value='invalid', lineno=59, col_offset=37, end_lineno=59, end_col_offset=46), lineno=59, col_offset=26, end_lineno=59, end_col_offset=46)], lineno=59, col_offset=12, end_lineno=59, end_col_offset=47), lineno=59, col_offset=12, end_lineno=59, end_col_offset=47)], lineno=58, col_offset=8, end_lineno=59, end_col_offset=47)], returns=Constant(value=None, lineno=56, col_offset=44, end_lineno=56, end_col_offset=48), lineno=56, col_offset=4, end_lineno=59, end_col_offset=47), FunctionDef(name='test_subprocess_timeout_validation', args=arguments(args=[arg(arg='self', lineno=61, col_offset=43, end_lineno=61, end_col_offset=47)]), body=[Expr(value=Constant(value='Test subprocess timeout must be positive and within bounds.', lineno=62, col_offset=8, end_lineno=62, end_col_offset=73), lineno=62, col_offset=8, end_lineno=62, end_col_offset=73), With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=64, col_offset=13, end_lineno=64, end_col_offset=19), attr='raises', ctx=Load(), lineno=64, col_offset=13, end_lineno=64, end_col_offset=26), args=[Name(id='ValueError', ctx=Load(), lineno=64, col_offset=27, end_lineno=64, end_col_offset=37)], keywords=[keyword(arg='match', value=Constant(value='greater than or equal to 1', lineno=64, col_offset=45, end_lineno=64, end_col_offset=73), lineno=64, col_offset=39, end_lineno=64, end_col_offset=73)], lineno=64, col_offset=13, end_lineno=64, end_col_offset=74))], body=[Expr(value=Call(func=Name(id='make_settings', ctx=Load(), lineno=65, col_offset=12, end_lineno=65, end_col_offset=25), keywords=[keyword(arg='subprocess_timeout', value=Constant(value=0, lineno=65, col_offset=45, end_lineno=65, end_col_offset=46), lineno=65, col_offset=26, end_lineno=65, end_col_offset=46)], lineno=65, col_offset=12, end_lineno=65, end_col_offset=47), lineno=65, col_offset=12, end_lineno=65, end_col_offset=47)], lineno=64, col_offset=8, end_lineno=65, end_col_offset=47), With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=68, col_offset=13, end_lineno=68, end_col_offset=19), attr='raises', ctx=Load(), lineno=68, col_offset=13, end_lineno=68, end_col_offset=26), args=[Name(id='ValueError', ctx=Load(), lineno=68, col_offset=27, end_lineno=68, end_col_offset=37)], keywords=[keyword(arg='match', value=Constant(value='less than or equal to 3600', lineno=68, col_offset=45, end_lineno=68, end_col_offset=73), lineno=68, col_offset=39, end_lineno=68, end_col_offset=73)], lineno=68, col_offset=13, end_lineno=68, end_col_offset=74))], body=[Expr(value=Call(func=Name(id='make_settings', ctx=Load(), lineno=69, col_offset=12, end_lineno=69, end_col_offset=25), keywords=[keyword(arg='subprocess_timeout', value=Constant(value=3601, lineno=69, col_offset=45, end_lineno=69, end_col_offset=49), lineno=69, col_offset=26, end_lineno=69, end_col_offset=49)], lineno=69, col_offset=12, end_lineno=69, end_col_offset=50), lineno=69, col_offset=12, end_lineno=69, end_col_offset=50)], lineno=68, col_offset=8, end_lineno=69, end_col_offset=50), Assign(targets=[Name(id='settings', ctx=Store(), lineno=72, col_offset=8, end_lineno=72, end_col_offset=16)], value=Call(func=Name(id='make_settings', ctx=Load(), lineno=72, col_offset=19, end_lineno=72, end_col_offset=32), keywords=[keyword(arg='subprocess_timeout', value=Constant(value=300, lineno=72, col_offset=52, end_lineno=72, end_col_offset=55), lineno=72, col_offset=33, end_lineno=72, end_col_offset=55)], lineno=72, col_offset=19, end_lineno=72, end_col_offset=56), lineno=72, col_offset=8, end_lineno=72, end_col_offset=56), Assert(test=Compare(left=Attribute(value=Name(id='settings', ctx=Load(), lineno=73, col_offset=15, end_lineno=73, end_col_offset=23), attr='subprocess_timeout', ctx=Load(), lineno=73, col_offset=15, end_lineno=73, end_col_offset=42), ops=[Eq()], comparators=[Constant(value=300, lineno=73, col_offset=46, end_lineno=73, end_col_offset=49)], lineno=73, col_offset=15, end_lineno=73, end_col_offset=49), lineno=73, col_offset=8, end_lineno=73, end_col_offset=49)], returns=Constant(value=None, lineno=61, col_offset=52, end_lineno=61, end_col_offset=56), lineno=61, col_offset=4, end_lineno=73, end_col_offset=49), FunctionDef(name='test_request_timeout_validation', args=arguments(args=[arg(arg='self', lineno=75, col_offset=40, end_lineno=75, end_col_offset=44)]), body=[Expr(value=Constant(value='Test request timeout must be positive and within bounds.', lineno=76, col_offset=8, end_lineno=76, end_col_offset=70), lineno=76, col_offset=8, end_lineno=76, end_col_offset=70), With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=78, col_offset=13, end_lineno=78, end_col_offset=19), attr='raises', ctx=Load(), lineno=78, col_offset=13, end_lineno=78, end_col_offset=26), args=[Name(id='ValueError', ctx=Load(), lineno=78, col_offset=27, end_lineno=78, end_col_offset=37)], keywords=[keyword(arg='match', value=Constant(value='greater than or equal to 1', lineno=78, col_offset=45, end_lineno=78, end_col_offset=73), lineno=78, col_offset=39, end_lineno=78, end_col_offset=73)], lineno=78, col_offset=13, end_lineno=78, end_col_offset=74))], body=[Expr(value=Call(func=Name(id='make_settings', ctx=Load(), lineno=79, col_offset=12, end_lineno=79, end_col_offset=25), keywords=[keyword(arg='request_timeout', value=Constant(value=0, lineno=79, col_offset=42, end_lineno=79, end_col_offset=43), lineno=79, col_offset=26, end_lineno=79, end_col_offset=43)], lineno=79, col_offset=12, end_lineno=79, end_col_offset=44), lineno=79, col_offset=12, end_lineno=79, end_col_offset=44)], lineno=78, col_offset=8, end_lineno=79, end_col_offset=44), With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=82, col_offset=13, end_lineno=82, end_col_offset=19), attr='raises', ctx=Load(), lineno=82, col_offset=13, end_lineno=82, end_col_offset=26), args=[Name(id='ValueError', ctx=Load(), lineno=82, col_offset=27, end_lineno=82, end_col_offset=37)], keywords=[keyword(arg='match', value=Constant(value='less than or equal to 3600', lineno=82, col_offset=45, end_lineno=82, end_col_offset=73), lineno=82, col_offset=39, end_lineno=82, end_col_offset=73)], lineno=82, col_offset=13, end_lineno=82, end_col_offset=74))], body=[Expr(value=Call(func=Name(id='make_settings', ctx=Load(), lineno=83, col_offset=12, end_lineno=83, end_col_offset=25), keywords=[keyword(arg='request_timeout', value=Constant(value=3601, lineno=83, col_offset=42, end_lineno=83, end_col_offset=46), lineno=83, col_offset=26, end_lineno=83, end_col_offset=46)], lineno=83, col_offset=12, end_lineno=83, end_col_offset=47), lineno=83, col_offset=12, end_lineno=83, end_col_offset=47)], lineno=82, col_offset=8, end_lineno=83, end_col_offset=47), Assign(targets=[Name(id='settings', ctx=Store(), lineno=86, col_offset=8, end_lineno=86, end_col_offset=16)], value=Call(func=Name(id='make_settings', ctx=Load(), lineno=86, col_offset=19, end_lineno=86, end_col_offset=32), keywords=[keyword(arg='request_timeout', value=Constant(value=30, lineno=86, col_offset=49, end_lineno=86, end_col_offset=51), lineno=86, col_offset=33, end_lineno=86, end_col_offset=51)], lineno=86, col_offset=19, end_lineno=86, end_col_offset=52), lineno=86, col_offset=8, end_lineno=86, end_col_offset=52), Assert(test=Compare(left=Attribute(value=Name(id='settings', ctx=Load(), lineno=87, col_offset=15, end_lineno=87, end_col_offset=23), attr='request_timeout', ctx=Load(), lineno=87, col_offset=15, end_lineno=87, end_col_offset=39), ops=[Eq()], comparators=[Constant(value=30, lineno=87, col_offset=43, end_lineno=87, end_col_offset=45)], lineno=87, col_offset=15, end_lineno=87, end_col_offset=45), lineno=87, col_offset=8, end_lineno=87, end_col_offset=45)], returns=Constant(value=None, lineno=75, col_offset=49, end_lineno=75, end_col_offset=53), lineno=75, col_offset=4, end_lineno=87, end_col_offset=45)], lineno=34, col_offset=0, end_lineno=87, end_col_offset=45), ClassDef(name='TestSigningKeyValidation', body=[Expr(value=Constant(value='Test suite for signing key validation.', lineno=91, col_offset=4, end_lineno=91, end_col_offset=48), lineno=91, col_offset=4, end_lineno=91, end_col_offset=48), FunctionDef(name='test_signing_key_optional', args=arguments(args=[arg(arg='self', lineno=93, col_offset=34, end_lineno=93, end_col_offset=38)]), body=[Expr(value=Constant(value='Test that signing key is optional.', lineno=94, col_offset=8, end_lineno=94, end_col_offset=48), lineno=94, col_offset=8, end_lineno=94, end_col_offset=48), Assign(targets=[Name(id='settings', ctx=Store(), lineno=95, col_offset=8, end_lineno=95, end_col_offset=16)], value=Call(func=Name(id='make_settings', ctx=Load(), lineno=95, col_offset=19, end_lineno=95, end_col_offset=32), lineno=95, col_offset=19, end_lineno=95, end_col_offset=34), lineno=95, col_offset=8, end_lineno=95, end_col_offset=34), Assert(test=Compare(left=Attribute(value=Name(id='settings', ctx=Load(), lineno=96, col_offset=15, end_lineno=96, end_col_offset=23), attr='signing_key', ctx=Load(), lineno=96, col_offset=15, end_lineno=96, end_col_offset=35), ops=[Is()], comparators=[Constant(value=None, lineno=96, col_offset=39, end_lineno=96, end_col_offset=43)], lineno=96, col_offset=15, end_lineno=96, end_col_offset=43), lineno=96, col_offset=8, end_lineno=96, end_col_offset=43)], returns=Constant(value=None, lineno=93, col_offset=43, end_lineno=93, end_col_offset=47), lineno=93, col_offset=4, end_lineno=96, end_col_offset=43), FunctionDef(name='test_signing_key_cannot_be_empty', args=arguments(args=[arg(arg='self', lineno=98, col_offset=41, end_lineno=98, end_col_offset=45)]), body=[Expr(value=Constant(value='Test that signing key cannot be empty string.', lineno=99, col_offset=8, end_lineno=99, end_col_offset=59), lineno=99, col_offset=8, end_lineno=99, end_col_offset=59), With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=100, col_offset=13, end_lineno=100, end_col_offset=19), attr='raises', ctx=Load(), lineno=100, col_offset=13, end_lineno=100, end_col_offset=26), args=[Name(id='ValueError', ctx=Load(), lineno=100, col_offset=27, end_lineno=100, end_col_offset=37)], keywords=[keyword(arg='match', value=Constant(value='cannot be empty', lineno=100, col_offset=45, end_lineno=100, end_col_offset=62), lineno=100, col_offset=39, end_lineno=100, end_col_offset=62)], lineno=100, col_offset=13, end_lineno=100, end_col_offset=63))], body=[Expr(value=Call(func=Name(id='make_settings', ctx=Load(), lineno=101, col_offset=12, end_lineno=101, end_col_offset=25), keywords=[keyword(arg='signing_key', value=Constant(value='', lineno=101, col_offset=38, end_lineno=101, end_col_offset=40), lineno=101, col_offset=26, end_lineno=101, end_col_offset=40)], lineno=101, col_offset=12, end_lineno=101, end_col_offset=41), lineno=101, col_offset=12, end_lineno=101, end_col_offset=41)], lineno=100, col_offset=8, end_lineno=101, end_col_offset=41)], returns=Constant(value=None, lineno=98, col_offset=50, end_lineno=98, end_col_offset=54), lineno=98, col_offset=4, end_lineno=101, end_col_offset=41), FunctionDef(name='test_signing_key_must_be_base64', args=arguments(args=[arg(arg='self', lineno=103, col_offset=40, end_lineno=103, end_col_offset=44)]), body=[Expr(value=Constant(value='Test that signing key must be valid base64.', lineno=104, col_offset=8, end_lineno=104, end_col_offset=57), lineno=104, col_offset=8, end_lineno=104, end_col_offset=57), With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=106, col_offset=13, end_lineno=106, end_col_offset=19), attr='raises', ctx=Load(), lineno=106, col_offset=13, end_lineno=106, end_col_offset=26), args=[Name(id='ValueError', ctx=Load(), lineno=106, col_offset=27, end_lineno=106, end_col_offset=37)], keywords=[keyword(arg='match', value=Constant(value='must be valid base64', lineno=106, col_offset=45, end_lineno=106, end_col_offset=67), lineno=106, col_offset=39, end_lineno=106, end_col_offset=67)], lineno=106, col_offset=13, end_lineno=106, end_col_offset=68))], body=[Expr(value=Call(func=Name(id='make_settings', ctx=Load(), lineno=107, col_offset=12, end_lineno=107, end_col_offset=25), keywords=[keyword(arg='signing_key', value=Constant(value='!!!invalid base64!!!', lineno=107, col_offset=38, end_lineno=107, end_col_offset=60), lineno=107, col_offset=26, end_lineno=107, end_col_offset=60)], lineno=107, col_offset=12, end_lineno=107, end_col_offset=61), lineno=107, col_offset=12, end_lineno=107, end_col_offset=61)], lineno=106, col_offset=8, end_lineno=107, end_col_offset=61)], returns=Constant(value=None, lineno=103, col_offset=49, end_lineno=103, end_col_offset=53), lineno=103, col_offset=4, end_lineno=107, end_col_offset=61), FunctionDef(name='test_signing_key_minimum_length', args=arguments(args=[arg(arg='self', lineno=109, col_offset=40, end_lineno=109, end_col_offset=44)]), body=[Expr(value=Constant(value='Test that signing key must be at least 32 bytes when decoded.', lineno=110, col_offset=8, end_lineno=110, end_col_offset=75), lineno=110, col_offset=8, end_lineno=110, end_col_offset=75), Assign(targets=[Name(id='short_key', ctx=Store(), lineno=112, col_offset=8, end_lineno=112, end_col_offset=17)], value=Call(func=Attribute(value=Call(func=Attribute(value=Name(id='base64', ctx=Load(), lineno=112, col_offset=20, end_lineno=112, end_col_offset=26), attr='b64encode', ctx=Load(), lineno=112, col_offset=20, end_lineno=112, end_col_offset=36), args=[BinOp(left=Constant(value=b'x', lineno=112, col_offset=37, end_lineno=112, end_col_offset=41), op=Mult(), right=Constant(value=31, lineno=112, col_offset=44, end_lineno=112, end_col_offset=46), lineno=112, col_offset=37, end_lineno=112, end_col_offset=46)], lineno=112, col_offset=20, end_lineno=112, end_col_offset=47), attr='decode', ctx=Load(), lineno=112, col_offset=20, end_lineno=112, end_col_offset=54), lineno=112, col_offset=20, end_lineno=112, end_col_offset=56), lineno=112, col_offset=8, end_lineno=112, end_col_offset=56), With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=113, col_offset=13, end_lineno=113, end_col_offset=19), attr='raises', ctx=Load(), lineno=113, col_offset=13, end_lineno=113, end_col_offset=26), args=[Name(id='ValueError', ctx=Load(), lineno=113, col_offset=27, end_lineno=113, end_col_offset=37)], keywords=[keyword(arg='match', value=Constant(value='must be â‰¥32 bytes', lineno=113, col_offset=45, end_lineno=113, end_col_offset=66), lineno=113, col_offset=39, end_lineno=113, end_col_offset=66)], lineno=113, col_offset=13, end_lineno=113, end_col_offset=67))], body=[Expr(value=Call(func=Name(id='make_settings', ctx=Load(), lineno=114, col_offset=12, end_lineno=114, end_col_offset=25), keywords=[keyword(arg='signing_key', value=Name(id='short_key', ctx=Load(), lineno=114, col_offset=38, end_lineno=114, end_col_offset=47), lineno=114, col_offset=26, end_lineno=114, end_col_offset=47)], lineno=114, col_offset=12, end_lineno=114, end_col_offset=48), lineno=114, col_offset=12, end_lineno=114, end_col_offset=48)], lineno=113, col_offset=8, end_lineno=114, end_col_offset=48)], returns=Constant(value=None, lineno=109, col_offset=49, end_lineno=109, end_col_offset=53), lineno=109, col_offset=4, end_lineno=114, end_col_offset=48), FunctionDef(name='test_signing_key_valid', args=arguments(args=[arg(arg='self', lineno=116, col_offset=31, end_lineno=116, end_col_offset=35)]), body=[Expr(value=Constant(value='Test that valid signing key is accepted.', lineno=117, col_offset=8, end_lineno=117, end_col_offset=54), lineno=117, col_offset=8, end_lineno=117, end_col_offset=54), Assign(targets=[Name(id='valid_key', ctx=Store(), lineno=119, col_offset=8, end_lineno=119, end_col_offset=17)], value=Call(func=Attribute(value=Call(func=Attribute(value=Name(id='base64', ctx=Load(), lineno=119, col_offset=20, end_lineno=119, end_col_offset=26), attr='b64encode', ctx=Load(), lineno=119, col_offset=20, end_lineno=119, end_col_offset=36), args=[BinOp(left=Constant(value=b'x', lineno=119, col_offset=37, end_lineno=119, end_col_offset=41), op=Mult(), right=Constant(value=32, lineno=119, col_offset=44, end_lineno=119, end_col_offset=46), lineno=119, col_offset=37, end_lineno=119, end_col_offset=46)], lineno=119, col_offset=20, end_lineno=119, end_col_offset=47), attr='decode', ctx=Load(), lineno=119, col_offset=20, end_lineno=119, end_col_offset=54), lineno=119, col_offset=20, end_lineno=119, end_col_offset=56), lineno=119, col_offset=8, end_lineno=119, end_col_offset=56), Assign(targets=[Name(id='settings', ctx=Store(), lineno=120, col_offset=8, end_lineno=120, end_col_offset=16)], value=Call(func=Name(id='make_settings', ctx=Load(), lineno=120, col_offset=19, end_lineno=120, end_col_offset=32), keywords=[keyword(arg='signing_key', value=Name(id='valid_key', ctx=Load(), lineno=120, col_offset=45, end_lineno=120, end_col_offset=54), lineno=120, col_offset=33, end_lineno=120, end_col_offset=54)], lineno=120, col_offset=19, end_lineno=120, end_col_offset=55), lineno=120, col_offset=8, end_lineno=120, end_col_offset=55), Assert(test=Compare(left=Attribute(value=Name(id='settings', ctx=Load(), lineno=121, col_offset=15, end_lineno=121, end_col_offset=23), attr='signing_key', ctx=Load(), lineno=121, col_offset=15, end_lineno=121, end_col_offset=35), ops=[Eq()], comparators=[Name(id='valid_key', ctx=Load(), lineno=121, col_offset=39, end_lineno=121, end_col_offset=48)], lineno=121, col_offset=15, end_lineno=121, end_col_offset=48), lineno=121, col_offset=8, end_lineno=121, end_col_offset=48)], returns=Constant(value=None, lineno=116, col_offset=40, end_lineno=116, end_col_offset=44), lineno=116, col_offset=4, end_lineno=121, end_col_offset=48), FunctionDef(name='test_valid_timeout_values', args=arguments(args=[arg(arg='self', lineno=127, col_offset=34, end_lineno=127, end_col_offset=38), arg(arg='timeout_value', annotation=Name(id='int', ctx=Load(), lineno=127, col_offset=55, end_lineno=127, end_col_offset=58), lineno=127, col_offset=40, end_lineno=127, end_col_offset=58)]), body=[Expr(value=Constant(value='Test that valid timeout values are accepted.', lineno=128, col_offset=8, end_lineno=128, end_col_offset=58), lineno=128, col_offset=8, end_lineno=128, end_col_offset=58), Assign(targets=[Name(id='settings', ctx=Store(), lineno=129, col_offset=8, end_lineno=129, end_col_offset=16)], value=Call(func=Name(id='make_settings', ctx=Load(), lineno=129, col_offset=19, end_lineno=129, end_col_offset=32), keywords=[keyword(arg='subprocess_timeout', value=Name(id='timeout_value', ctx=Load(), lineno=130, col_offset=31, end_lineno=130, end_col_offset=44), lineno=130, col_offset=12, end_lineno=130, end_col_offset=44), keyword(arg='request_timeout', value=Name(id='timeout_value', ctx=Load(), lineno=131, col_offset=28, end_lineno=131, end_col_offset=41), lineno=131, col_offset=12, end_lineno=131, end_col_offset=41)], lineno=129, col_offset=19, end_lineno=132, end_col_offset=9), lineno=129, col_offset=8, end_lineno=132, end_col_offset=9), Assert(test=Compare(left=Attribute(value=Name(id='settings', ctx=Load(), lineno=133, col_offset=15, end_lineno=133, end_col_offset=23), attr='subprocess_timeout', ctx=Load(), lineno=133, col_offset=15, end_lineno=133, end_col_offset=42), ops=[Eq()], comparators=[Name(id='timeout_value', ctx=Load(), lineno=133, col_offset=46, end_lineno=133, end_col_offset=59)], lineno=133, col_offset=15, end_lineno=133, end_col_offset=59), lineno=133, col_offset=8, end_lineno=133, end_col_offset=59), Assert(test=Compare(left=Attribute(value=Name(id='settings', ctx=Load(), lineno=134, col_offset=15, end_lineno=134, end_col_offset=23), attr='request_timeout', ctx=Load(), lineno=134, col_offset=15, end_lineno=134, end_col_offset=39), ops=[Eq()], comparators=[Name(id='timeout_value', ctx=Load(), lineno=134, col_offset=43, end_lineno=134, end_col_offset=56)], lineno=134, col_offset=15, end_lineno=134, end_col_offset=56), lineno=134, col_offset=8, end_lineno=134, end_col_offset=56)], decorator_list=[Call(func=Attribute(value=Attribute(value=Name(id='pytest', ctx=Load(), lineno=123, col_offset=5, end_lineno=123, end_col_offset=11), attr='mark', ctx=Load(), lineno=123, col_offset=5, end_lineno=123, end_col_offset=16), attr='parametrize', ctx=Load(), lineno=123, col_offset=5, end_lineno=123, end_col_offset=28), args=[Constant(value='timeout_value', lineno=124, col_offset=8, end_lineno=124, end_col_offset=23), List(elts=[Constant(value=1, lineno=125, col_offset=9, end_lineno=125, end_col_offset=10), Constant(value=30, lineno=125, col_offset=12, end_lineno=125, end_col_offset=14), Constant(value=300, lineno=125, col_offset=16, end_lineno=125, end_col_offset=19), Constant(value=3600, lineno=125, col_offset=21, end_lineno=125, end_col_offset=25)], ctx=Load(), lineno=125, col_offset=8, end_lineno=125, end_col_offset=26)], lineno=123, col_offset=5, end_lineno=126, end_col_offset=5)], returns=Constant(value=None, lineno=127, col_offset=63, end_lineno=127, end_col_offset=67), lineno=127, col_offset=4, end_lineno=134, end_col_offset=56), FunctionDef(name='test_invalid_timeout_values', args=arguments(args=[arg(arg='self', lineno=140, col_offset=36, end_lineno=140, end_col_offset=40), arg(arg='timeout_value', annotation=Name(id='int', ctx=Load(), lineno=140, col_offset=57, end_lineno=140, end_col_offset=60), lineno=140, col_offset=42, end_lineno=140, end_col_offset=60)]), body=[Expr(value=Constant(value='Test that invalid timeout values are rejected.', lineno=141, col_offset=8, end_lineno=141, end_col_offset=60), lineno=141, col_offset=8, end_lineno=141, end_col_offset=60), With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=142, col_offset=13, end_lineno=142, end_col_offset=19), attr='raises', ctx=Load(), lineno=142, col_offset=13, end_lineno=142, end_col_offset=26), args=[Name(id='ValueError', ctx=Load(), lineno=143, col_offset=12, end_lineno=143, end_col_offset=22)], keywords=[keyword(arg='match', value=Constant(value='(greater than or equal to 1|less than or equal to 3600)', lineno=144, col_offset=18, end_lineno=144, end_col_offset=76), lineno=144, col_offset=12, end_lineno=144, end_col_offset=76)], lineno=142, col_offset=13, end_lineno=145, end_col_offset=9))], body=[Expr(value=Call(func=Name(id='make_settings', ctx=Load(), lineno=146, col_offset=12, end_lineno=146, end_col_offset=25), keywords=[keyword(arg='subprocess_timeout', value=Name(id='timeout_value', ctx=Load(), lineno=146, col_offset=45, end_lineno=146, end_col_offset=58), lineno=146, col_offset=26, end_lineno=146, end_col_offset=58)], lineno=146, col_offset=12, end_lineno=146, end_col_offset=59), lineno=146, col_offset=12, end_lineno=146, end_col_offset=59)], lineno=142, col_offset=8, end_lineno=146, end_col_offset=59), With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=148, col_offset=13, end_lineno=148, end_col_offset=19), attr='raises', ctx=Load(), lineno=148, col_offset=13, end_lineno=148, end_col_offset=26), args=[Name(id='ValueError', ctx=Load(), lineno=149, col_offset=12, end_lineno=149, end_col_offset=22)], keywords=[keyword(arg='match', value=Constant(value='(greater than or equal to 1|less than or equal to 3600)', lineno=150, col_offset=18, end_lineno=150, end_col_offset=76), lineno=150, col_offset=12, end_lineno=150, end_col_offset=76)], lineno=148, col_offset=13, end_lineno=151, end_col_offset=9))], body=[Expr(value=Call(func=Name(id='make_settings', ctx=Load(), lineno=152, col_offset=12, end_lineno=152, end_col_offset=25), keywords=[keyword(arg='request_timeout', value=Name(id='timeout_value', ctx=Load(), lineno=152, col_offset=42, end_lineno=152, end_col_offset=55), lineno=152, col_offset=26, end_lineno=152, end_col_offset=55)], lineno=152, col_offset=12, end_lineno=152, end_col_offset=56), lineno=152, col_offset=12, end_lineno=152, end_col_offset=56)], lineno=148, col_offset=8, end_lineno=152, end_col_offset=56)], decorator_list=[Call(func=Attribute(value=Attribute(value=Name(id='pytest', ctx=Load(), lineno=136, col_offset=5, end_lineno=136, end_col_offset=11), attr='mark', ctx=Load(), lineno=136, col_offset=5, end_lineno=136, end_col_offset=16), attr='parametrize', ctx=Load(), lineno=136, col_offset=5, end_lineno=136, end_col_offset=28), args=[Constant(value='timeout_value', lineno=137, col_offset=8, end_lineno=137, end_col_offset=23), List(elts=[UnaryOp(op=USub(), operand=Constant(value=1, lineno=138, col_offset=10, end_lineno=138, end_col_offset=11), lineno=138, col_offset=9, end_lineno=138, end_col_offset=11), Constant(value=0, lineno=138, col_offset=13, end_lineno=138, end_col_offset=14), Constant(value=3601, lineno=138, col_offset=16, end_lineno=138, end_col_offset=20), Constant(value=10000, lineno=138, col_offset=22, end_lineno=138, end_col_offset=27)], ctx=Load(), lineno=138, col_offset=8, end_lineno=138, end_col_offset=28)], lineno=136, col_offset=5, end_lineno=139, end_col_offset=5)], returns=Constant(value=None, lineno=140, col_offset=65, end_lineno=140, end_col_offset=69), lineno=140, col_offset=4, end_lineno=152, end_col_offset=56)], lineno=90, col_offset=0, end_lineno=152, end_col_offset=56), ClassDef(name='TestConfigurationErrorMessages', body=[Expr(value=Constant(value='Test that error messages are clear and actionable.', lineno=156, col_offset=4, end_lineno=156, end_col_offset=60), lineno=156, col_offset=4, end_lineno=156, end_col_offset=60), FunctionDef(name='test_log_level_error_message_helpful', args=arguments(args=[arg(arg='self', lineno=158, col_offset=45, end_lineno=158, end_col_offset=49)]), body=[Expr(value=Constant(value='Test that log level error message suggests valid options.', lineno=159, col_offset=8, end_lineno=159, end_col_offset=71), lineno=159, col_offset=8, end_lineno=159, end_col_offset=71), Try(body=[Expr(value=Call(func=Name(id='make_settings', ctx=Load(), lineno=161, col_offset=12, end_lineno=161, end_col_offset=25), keywords=[keyword(arg='log_level', value=Constant(value='TRACE', lineno=161, col_offset=36, end_lineno=161, end_col_offset=43), lineno=161, col_offset=26, end_lineno=161, end_col_offset=43)], lineno=161, col_offset=12, end_lineno=161, end_col_offset=44), lineno=161, col_offset=12, end_lineno=161, end_col_offset=44)], handlers=[ExceptHandler(type=Name(id='ValueError', ctx=Load(), lineno=162, col_offset=15, end_lineno=162, end_col_offset=25), name='exc', body=[Assign(targets=[Name(id='error_msg', ctx=Store(), lineno=163, col_offset=12, end_lineno=163, end_col_offset=21)], value=Call(func=Name(id='str', ctx=Load(), lineno=163, col_offset=24, end_lineno=163, end_col_offset=27), args=[Name(id='exc', ctx=Load(), lineno=163, col_offset=28, end_lineno=163, end_col_offset=31)], lineno=163, col_offset=24, end_lineno=163, end_col_offset=32), lineno=163, col_offset=12, end_lineno=163, end_col_offset=32), Assert(test=BoolOp(op=Or(), values=[Compare(left=Constant(value='DEBUG', lineno=165, col_offset=19, end_lineno=165, end_col_offset=26), ops=[In()], comparators=[Name(id='error_msg', ctx=Load(), lineno=165, col_offset=30, end_lineno=165, end_col_offset=39)], lineno=165, col_offset=19, end_lineno=165, end_col_offset=39), Compare(left=Constant(value='INFO', lineno=165, col_offset=43, end_lineno=165, end_col_offset=49), ops=[In()], comparators=[Name(id='error_msg', ctx=Load(), lineno=165, col_offset=53, end_lineno=165, end_col_offset=62)], lineno=165, col_offset=43, end_lineno=165, end_col_offset=62)], lineno=165, col_offset=19, end_lineno=165, end_col_offset=62), lineno=165, col_offset=12, end_lineno=165, end_col_offset=62)], lineno=162, col_offset=8, end_lineno=165, end_col_offset=62)], lineno=160, col_offset=8, end_lineno=165, end_col_offset=62)], returns=Constant(value=None, lineno=158, col_offset=54, end_lineno=158, end_col_offset=58), lineno=158, col_offset=4, end_lineno=165, end_col_offset=62), FunctionDef(name='test_signing_key_error_message_helpful', args=arguments(args=[arg(arg='self', lineno=167, col_offset=47, end_lineno=167, end_col_offset=51)]), body=[Expr(value=Constant(value='Test that signing key error message guides remediation.', lineno=168, col_offset=8, end_lineno=168, end_col_offset=69), lineno=168, col_offset=8, end_lineno=168, end_col_offset=69), Assign(targets=[Name(id='short_key', ctx=Store(), lineno=169, col_offset=8, end_lineno=169, end_col_offset=17)], value=Call(func=Attribute(value=Call(func=Attribute(value=Name(id='base64', ctx=Load(), lineno=169, col_offset=20, end_lineno=169, end_col_offset=26), attr='b64encode', ctx=Load(), lineno=169, col_offset=20, end_lineno=169, end_col_offset=36), args=[Constant(value=b'short', lineno=169, col_offset=37, end_lineno=169, end_col_offset=45)], lineno=169, col_offset=20, end_lineno=169, end_col_offset=46), attr='decode', ctx=Load(), lineno=169, col_offset=20, end_lineno=169, end_col_offset=53), lineno=169, col_offset=20, end_lineno=169, end_col_offset=55), lineno=169, col_offset=8, end_lineno=169, end_col_offset=55), Try(body=[Expr(value=Call(func=Name(id='make_settings', ctx=Load(), lineno=171, col_offset=12, end_lineno=171, end_col_offset=25), keywords=[keyword(arg='signing_key', value=Name(id='short_key', ctx=Load(), lineno=171, col_offset=38, end_lineno=171, end_col_offset=47), lineno=171, col_offset=26, end_lineno=171, end_col_offset=47)], lineno=171, col_offset=12, end_lineno=171, end_col_offset=48), lineno=171, col_offset=12, end_lineno=171, end_col_offset=48)], handlers=[ExceptHandler(type=Name(id='ValueError', ctx=Load(), lineno=172, col_offset=15, end_lineno=172, end_col_offset=25), name='exc', body=[Assign(targets=[Name(id='error_msg', ctx=Store(), lineno=173, col_offset=12, end_lineno=173, end_col_offset=21)], value=Call(func=Name(id='str', ctx=Load(), lineno=173, col_offset=24, end_lineno=173, end_col_offset=27), args=[Name(id='exc', ctx=Load(), lineno=173, col_offset=28, end_lineno=173, end_col_offset=31)], lineno=173, col_offset=24, end_lineno=173, end_col_offset=32), lineno=173, col_offset=12, end_lineno=173, end_col_offset=32), Assert(test=BoolOp(op=Or(), values=[Compare(left=Constant(value='32', lineno=175, col_offset=19, end_lineno=175, end_col_offset=23), ops=[In()], comparators=[Name(id='error_msg', ctx=Load(), lineno=175, col_offset=27, end_lineno=175, end_col_offset=36)], lineno=175, col_offset=19, end_lineno=175, end_col_offset=36), Compare(left=Constant(value='bytes', lineno=175, col_offset=40, end_lineno=175, end_col_offset=47), ops=[In()], comparators=[Name(id='error_msg', ctx=Load(), lineno=175, col_offset=51, end_lineno=175, end_col_offset=60)], lineno=175, col_offset=40, end_lineno=175, end_col_offset=60)], lineno=175, col_offset=19, end_lineno=175, end_col_offset=60), lineno=175, col_offset=12, end_lineno=175, end_col_offset=60)], lineno=172, col_offset=8, end_lineno=175, end_col_offset=60)], lineno=170, col_offset=8, end_lineno=175, end_col_offset=60)], returns=Constant(value=None, lineno=167, col_offset=56, end_lineno=167, end_col_offset=60), lineno=167, col_offset=4, end_lineno=175, end_col_offset=60)], lineno=155, col_offset=0, end_lineno=175, end_col_offset=60)])
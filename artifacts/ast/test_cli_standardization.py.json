Module(body=[Expr(value=Constant(value='Assertions that all CLIs consume the shared cli_tooling contracts consistently.', lineno=1, col_offset=0, end_lineno=1, end_col_offset=85), lineno=1, col_offset=0, end_lineno=1, end_col_offset=85), ImportFrom(module='__future__', names=[alias(name='annotations', lineno=3, col_offset=23, end_lineno=3, end_col_offset=34)], level=0, lineno=3, col_offset=0, end_lineno=3, end_col_offset=34), Import(names=[alias(name='importlib', lineno=5, col_offset=7, end_lineno=5, end_col_offset=16)], lineno=5, col_offset=0, end_lineno=5, end_col_offset=16), Import(names=[alias(name='pytest', lineno=7, col_offset=7, end_lineno=7, end_col_offset=13)], lineno=7, col_offset=0, end_lineno=7, end_col_offset=13), Assign(targets=[Name(id='CLI_SUITES', ctx=Store(), lineno=9, col_offset=0, end_lineno=9, end_col_offset=10)], value=Tuple(elts=[Tuple(elts=[Constant(value='tools.docs.build_graphs', lineno=10, col_offset=5, end_lineno=10, end_col_offset=30), Constant(value='docs._scripts.cli_context', lineno=10, col_offset=32, end_lineno=10, end_col_offset=59), Constant(value='docs-build-graphs', lineno=10, col_offset=61, end_lineno=10, end_col_offset=80)], ctx=Load(), lineno=10, col_offset=4, end_lineno=10, end_col_offset=81), Tuple(elts=[Constant(value='download.cli', lineno=11, col_offset=5, end_lineno=11, end_col_offset=19), Constant(value='download.cli_context', lineno=11, col_offset=21, end_lineno=11, end_col_offset=43), Constant(value=None, lineno=11, col_offset=45, end_lineno=11, end_col_offset=49)], ctx=Load(), lineno=11, col_offset=4, end_lineno=11, end_col_offset=50), Tuple(elts=[Constant(value='orchestration.cli', lineno=12, col_offset=5, end_lineno=12, end_col_offset=24), Constant(value='orchestration.cli_context', lineno=12, col_offset=26, end_lineno=12, end_col_offset=53), Constant(value=None, lineno=12, col_offset=55, end_lineno=12, end_col_offset=59)], ctx=Load(), lineno=12, col_offset=4, end_lineno=12, end_col_offset=60), Tuple(elts=[Constant(value='tools.docstring_builder.cli', lineno=13, col_offset=5, end_lineno=13, end_col_offset=34), Constant(value='tools.docstring_builder.cli_context', lineno=13, col_offset=36, end_lineno=13, end_col_offset=73), Constant(value=None, lineno=13, col_offset=75, end_lineno=13, end_col_offset=79)], ctx=Load(), lineno=13, col_offset=4, end_lineno=13, end_col_offset=80)], ctx=Load(), lineno=9, col_offset=13, end_lineno=14, end_col_offset=1), lineno=9, col_offset=0, end_lineno=14, end_col_offset=1), FunctionDef(name='test_cli_configuration_matches_context', args=arguments(args=[arg(arg='module_path', annotation=Name(id='str', ctx=Load(), lineno=19, col_offset=17, end_lineno=19, end_col_offset=20), lineno=19, col_offset=4, end_lineno=19, end_col_offset=20), arg(arg='context_path', annotation=Name(id='str', ctx=Load(), lineno=19, col_offset=36, end_lineno=19, end_col_offset=39), lineno=19, col_offset=22, end_lineno=19, end_col_offset=39), arg(arg='command_name', annotation=BinOp(left=Name(id='str', ctx=Load(), lineno=19, col_offset=55, end_lineno=19, end_col_offset=58), op=BitOr(), right=Constant(value=None, lineno=19, col_offset=61, end_lineno=19, end_col_offset=65), lineno=19, col_offset=55, end_lineno=19, end_col_offset=65), lineno=19, col_offset=41, end_lineno=19, end_col_offset=65)]), body=[Expr(value=Constant(value='Ensure each CLI module mirrors the metadata provided by its cli_context.', lineno=21, col_offset=4, end_lineno=21, end_col_offset=82), lineno=21, col_offset=4, end_lineno=21, end_col_offset=82), Assign(targets=[Name(id='module', ctx=Store(), lineno=22, col_offset=4, end_lineno=22, end_col_offset=10)], value=Call(func=Attribute(value=Name(id='importlib', ctx=Load(), lineno=22, col_offset=13, end_lineno=22, end_col_offset=22), attr='import_module', ctx=Load(), lineno=22, col_offset=13, end_lineno=22, end_col_offset=36), args=[Name(id='module_path', ctx=Load(), lineno=22, col_offset=37, end_lineno=22, end_col_offset=48)], lineno=22, col_offset=13, end_lineno=22, end_col_offset=49), lineno=22, col_offset=4, end_lineno=22, end_col_offset=49), Assign(targets=[Name(id='context', ctx=Store(), lineno=23, col_offset=4, end_lineno=23, end_col_offset=11)], value=Call(func=Attribute(value=Name(id='importlib', ctx=Load(), lineno=23, col_offset=14, end_lineno=23, end_col_offset=23), attr='import_module', ctx=Load(), lineno=23, col_offset=14, end_lineno=23, end_col_offset=37), args=[Name(id='context_path', ctx=Load(), lineno=23, col_offset=38, end_lineno=23, end_col_offset=50)], lineno=23, col_offset=14, end_lineno=23, end_col_offset=51), lineno=23, col_offset=4, end_lineno=23, end_col_offset=51), If(test=Compare(left=Name(id='command_name', ctx=Load(), lineno=25, col_offset=7, end_lineno=25, end_col_offset=19), ops=[IsNot()], comparators=[Constant(value=None, lineno=25, col_offset=27, end_lineno=25, end_col_offset=31)], lineno=25, col_offset=7, end_lineno=25, end_col_offset=31), body=[Assign(targets=[Name(id='definition', ctx=Store(), lineno=26, col_offset=8, end_lineno=26, end_col_offset=18)], value=Call(func=Attribute(value=Name(id='context', ctx=Load(), lineno=26, col_offset=21, end_lineno=26, end_col_offset=28), attr='get_cli_definition', ctx=Load(), lineno=26, col_offset=21, end_lineno=26, end_col_offset=47), args=[Name(id='command_name', ctx=Load(), lineno=26, col_offset=48, end_lineno=26, end_col_offset=60)], lineno=26, col_offset=21, end_lineno=26, end_col_offset=61), lineno=26, col_offset=8, end_lineno=26, end_col_offset=61), Assign(targets=[Name(id='settings', ctx=Store(), lineno=27, col_offset=8, end_lineno=27, end_col_offset=16)], value=Call(func=Attribute(value=Name(id='context', ctx=Load(), lineno=27, col_offset=19, end_lineno=27, end_col_offset=26), attr='get_cli_settings', ctx=Load(), lineno=27, col_offset=19, end_lineno=27, end_col_offset=43), args=[Name(id='command_name', ctx=Load(), lineno=27, col_offset=44, end_lineno=27, end_col_offset=56)], lineno=27, col_offset=19, end_lineno=27, end_col_offset=57), lineno=27, col_offset=8, end_lineno=27, end_col_offset=57), Assign(targets=[Name(id='config', ctx=Store(), lineno=28, col_offset=8, end_lineno=28, end_col_offset=14)], value=Call(func=Attribute(value=Name(id='context', ctx=Load(), lineno=28, col_offset=17, end_lineno=28, end_col_offset=24), attr='get_cli_config', ctx=Load(), lineno=28, col_offset=17, end_lineno=28, end_col_offset=39), args=[Name(id='command_name', ctx=Load(), lineno=28, col_offset=40, end_lineno=28, end_col_offset=52)], lineno=28, col_offset=17, end_lineno=28, end_col_offset=53), lineno=28, col_offset=8, end_lineno=28, end_col_offset=53), Assign(targets=[Name(id='expected_command', ctx=Store(), lineno=29, col_offset=8, end_lineno=29, end_col_offset=24)], value=Attribute(value=Name(id='definition', ctx=Load(), lineno=29, col_offset=27, end_lineno=29, end_col_offset=37), attr='command', ctx=Load(), lineno=29, col_offset=27, end_lineno=29, end_col_offset=45), lineno=29, col_offset=8, end_lineno=29, end_col_offset=45), Assign(targets=[Name(id='expected_title', ctx=Store(), lineno=30, col_offset=8, end_lineno=30, end_col_offset=22)], value=Attribute(value=Name(id='definition', ctx=Load(), lineno=30, col_offset=25, end_lineno=30, end_col_offset=35), attr='title', ctx=Load(), lineno=30, col_offset=25, end_lineno=30, end_col_offset=41), lineno=30, col_offset=8, end_lineno=30, end_col_offset=41), Assign(targets=[Name(id='expected_interface', ctx=Store(), lineno=31, col_offset=8, end_lineno=31, end_col_offset=26)], value=Attribute(value=Name(id='definition', ctx=Load(), lineno=31, col_offset=29, end_lineno=31, end_col_offset=39), attr='interface_id', ctx=Load(), lineno=31, col_offset=29, end_lineno=31, end_col_offset=52), lineno=31, col_offset=8, end_lineno=31, end_col_offset=52), Assign(targets=[Name(id='expected_operation_ids', ctx=Store(), lineno=32, col_offset=8, end_lineno=32, end_col_offset=30)], value=Call(func=Name(id='dict', ctx=Load(), lineno=32, col_offset=33, end_lineno=32, end_col_offset=37), args=[Attribute(value=Name(id='definition', ctx=Load(), lineno=32, col_offset=38, end_lineno=32, end_col_offset=48), attr='operation_ids', ctx=Load(), lineno=32, col_offset=38, end_lineno=32, end_col_offset=62)], lineno=32, col_offset=33, end_lineno=32, end_col_offset=63), lineno=32, col_offset=8, end_lineno=32, end_col_offset=63)], orelse=[Assign(targets=[Name(id='definition', ctx=Store(), lineno=34, col_offset=8, end_lineno=34, end_col_offset=18)], value=Constant(value=None, lineno=34, col_offset=21, end_lineno=34, end_col_offset=25), lineno=34, col_offset=8, end_lineno=34, end_col_offset=25), Assign(targets=[Name(id='settings', ctx=Store(), lineno=35, col_offset=8, end_lineno=35, end_col_offset=16)], value=Call(func=Attribute(value=Name(id='context', ctx=Load(), lineno=35, col_offset=19, end_lineno=35, end_col_offset=26), attr='get_cli_settings', ctx=Load(), lineno=35, col_offset=19, end_lineno=35, end_col_offset=43), lineno=35, col_offset=19, end_lineno=35, end_col_offset=45), lineno=35, col_offset=8, end_lineno=35, end_col_offset=45), Assign(targets=[Name(id='config', ctx=Store(), lineno=36, col_offset=8, end_lineno=36, end_col_offset=14)], value=Call(func=Attribute(value=Name(id='context', ctx=Load(), lineno=36, col_offset=17, end_lineno=36, end_col_offset=24), attr='get_cli_config', ctx=Load(), lineno=36, col_offset=17, end_lineno=36, end_col_offset=39), lineno=36, col_offset=17, end_lineno=36, end_col_offset=41), lineno=36, col_offset=8, end_lineno=36, end_col_offset=41), Assign(targets=[Name(id='expected_command', ctx=Store(), lineno=37, col_offset=8, end_lineno=37, end_col_offset=24)], value=Attribute(value=Name(id='context', ctx=Load(), lineno=37, col_offset=27, end_lineno=37, end_col_offset=34), attr='CLI_COMMAND', ctx=Load(), lineno=37, col_offset=27, end_lineno=37, end_col_offset=46), lineno=37, col_offset=8, end_lineno=37, end_col_offset=46), Assign(targets=[Name(id='expected_title', ctx=Store(), lineno=38, col_offset=8, end_lineno=38, end_col_offset=22)], value=Attribute(value=Name(id='context', ctx=Load(), lineno=38, col_offset=25, end_lineno=38, end_col_offset=32), attr='CLI_TITLE', ctx=Load(), lineno=38, col_offset=25, end_lineno=38, end_col_offset=42), lineno=38, col_offset=8, end_lineno=38, end_col_offset=42), Assign(targets=[Name(id='expected_interface', ctx=Store(), lineno=39, col_offset=8, end_lineno=39, end_col_offset=26)], value=Attribute(value=Name(id='context', ctx=Load(), lineno=39, col_offset=29, end_lineno=39, end_col_offset=36), attr='CLI_INTERFACE_ID', ctx=Load(), lineno=39, col_offset=29, end_lineno=39, end_col_offset=53), lineno=39, col_offset=8, end_lineno=39, end_col_offset=53), Assign(targets=[Name(id='expected_operation_ids', ctx=Store(), lineno=40, col_offset=8, end_lineno=40, end_col_offset=30)], value=Call(func=Name(id='dict', ctx=Load(), lineno=40, col_offset=33, end_lineno=40, end_col_offset=37), args=[Attribute(value=Name(id='context', ctx=Load(), lineno=40, col_offset=38, end_lineno=40, end_col_offset=45), attr='CLI_OPERATION_IDS', ctx=Load(), lineno=40, col_offset=38, end_lineno=40, end_col_offset=63)], lineno=40, col_offset=33, end_lineno=40, end_col_offset=64), lineno=40, col_offset=8, end_lineno=40, end_col_offset=64)], lineno=25, col_offset=4, end_lineno=40, end_col_offset=64), Assert(test=Compare(left=Name(id='settings', ctx=Load(), lineno=42, col_offset=11, end_lineno=42, end_col_offset=19), ops=[Eq()], comparators=[Attribute(value=Name(id='module', ctx=Load(), lineno=42, col_offset=23, end_lineno=42, end_col_offset=29), attr='CLI_SETTINGS', ctx=Load(), lineno=42, col_offset=23, end_lineno=42, end_col_offset=42)], lineno=42, col_offset=11, end_lineno=42, end_col_offset=42), lineno=42, col_offset=4, end_lineno=42, end_col_offset=42), Assert(test=Compare(left=Attribute(value=Name(id='module', ctx=Load(), lineno=43, col_offset=11, end_lineno=43, end_col_offset=17), attr='CLI_CONFIG', ctx=Load(), lineno=43, col_offset=11, end_lineno=43, end_col_offset=28), ops=[Is()], comparators=[Name(id='config', ctx=Load(), lineno=43, col_offset=32, end_lineno=43, end_col_offset=38)], lineno=43, col_offset=11, end_lineno=43, end_col_offset=38), lineno=43, col_offset=4, end_lineno=43, end_col_offset=38), Assert(test=Compare(left=Name(id='expected_command', ctx=Load(), lineno=44, col_offset=11, end_lineno=44, end_col_offset=27), ops=[Eq()], comparators=[Attribute(value=Name(id='module', ctx=Load(), lineno=44, col_offset=31, end_lineno=44, end_col_offset=37), attr='CLI_COMMAND', ctx=Load(), lineno=44, col_offset=31, end_lineno=44, end_col_offset=49)], lineno=44, col_offset=11, end_lineno=44, end_col_offset=49), lineno=44, col_offset=4, end_lineno=44, end_col_offset=49), Assert(test=Compare(left=Name(id='expected_title', ctx=Load(), lineno=45, col_offset=11, end_lineno=45, end_col_offset=25), ops=[Eq()], comparators=[Attribute(value=Name(id='module', ctx=Load(), lineno=45, col_offset=29, end_lineno=45, end_col_offset=35), attr='CLI_TITLE', ctx=Load(), lineno=45, col_offset=29, end_lineno=45, end_col_offset=45)], lineno=45, col_offset=11, end_lineno=45, end_col_offset=45), lineno=45, col_offset=4, end_lineno=45, end_col_offset=45), Assert(test=Compare(left=Name(id='expected_interface', ctx=Load(), lineno=46, col_offset=11, end_lineno=46, end_col_offset=29), ops=[Eq()], comparators=[Attribute(value=Name(id='module', ctx=Load(), lineno=46, col_offset=33, end_lineno=46, end_col_offset=39), attr='CLI_INTERFACE_ID', ctx=Load(), lineno=46, col_offset=33, end_lineno=46, end_col_offset=56)], lineno=46, col_offset=11, end_lineno=46, end_col_offset=56), lineno=46, col_offset=4, end_lineno=46, end_col_offset=56), Assert(test=Compare(left=Name(id='expected_operation_ids', ctx=Load(), lineno=47, col_offset=11, end_lineno=47, end_col_offset=33), ops=[Eq()], comparators=[Attribute(value=Name(id='module', ctx=Load(), lineno=47, col_offset=37, end_lineno=47, end_col_offset=43), attr='CLI_OPERATION_IDS', ctx=Load(), lineno=47, col_offset=37, end_lineno=47, end_col_offset=61)], lineno=47, col_offset=11, end_lineno=47, end_col_offset=61), lineno=47, col_offset=4, end_lineno=47, end_col_offset=61), Assign(targets=[Name(id='expected_envelope_dir', ctx=Store(), lineno=49, col_offset=4, end_lineno=49, end_col_offset=25)], value=BinOp(left=BinOp(left=BinOp(left=Attribute(value=Name(id='context', ctx=Load(), lineno=49, col_offset=28, end_lineno=49, end_col_offset=35), attr='REPO_ROOT', ctx=Load(), lineno=49, col_offset=28, end_lineno=49, end_col_offset=45), op=Div(), right=Constant(value='site', lineno=49, col_offset=48, end_lineno=49, end_col_offset=54), lineno=49, col_offset=28, end_lineno=49, end_col_offset=54), op=Div(), right=Constant(value='_build', lineno=49, col_offset=57, end_lineno=49, end_col_offset=65), lineno=49, col_offset=28, end_lineno=49, end_col_offset=65), op=Div(), right=Constant(value='cli', lineno=49, col_offset=68, end_lineno=49, end_col_offset=73), lineno=49, col_offset=28, end_lineno=49, end_col_offset=73), lineno=49, col_offset=4, end_lineno=49, end_col_offset=73), Assert(test=Compare(left=Name(id='expected_envelope_dir', ctx=Load(), lineno=50, col_offset=11, end_lineno=50, end_col_offset=32), ops=[Eq()], comparators=[Attribute(value=Name(id='module', ctx=Load(), lineno=50, col_offset=36, end_lineno=50, end_col_offset=42), attr='CLI_ENVELOPE_DIR', ctx=Load(), lineno=50, col_offset=36, end_lineno=50, end_col_offset=59)], lineno=50, col_offset=11, end_lineno=50, end_col_offset=59), lineno=50, col_offset=4, end_lineno=50, end_col_offset=59), If(test=Compare(left=Name(id='definition', ctx=Load(), lineno=52, col_offset=7, end_lineno=52, end_col_offset=17), ops=[IsNot()], comparators=[Constant(value=None, lineno=52, col_offset=25, end_lineno=52, end_col_offset=29)], lineno=52, col_offset=7, end_lineno=52, end_col_offset=29), body=[Assert(test=Compare(left=Name(id='command_name', ctx=Load(), lineno=53, col_offset=15, end_lineno=53, end_col_offset=27), ops=[Eq()], comparators=[Attribute(value=Name(id='module', ctx=Load(), lineno=53, col_offset=31, end_lineno=53, end_col_offset=37), attr='CLI_COMMAND_NAME', ctx=Load(), lineno=53, col_offset=31, end_lineno=53, end_col_offset=54)], lineno=53, col_offset=15, end_lineno=53, end_col_offset=54), lineno=53, col_offset=8, end_lineno=53, end_col_offset=54), Assert(test=Compare(left=Subscript(value=Name(id='expected_operation_ids', ctx=Load(), lineno=54, col_offset=15, end_lineno=54, end_col_offset=37), slice=Attribute(value=Name(id='module', ctx=Load(), lineno=54, col_offset=38, end_lineno=54, end_col_offset=44), attr='SUBCOMMAND_BUILD_GRAPHS', ctx=Load(), lineno=54, col_offset=38, end_lineno=54, end_col_offset=68), ctx=Load(), lineno=54, col_offset=15, end_lineno=54, end_col_offset=69), ops=[Eq()], comparators=[Attribute(value=Name(id='module', ctx=Load(), lineno=54, col_offset=73, end_lineno=54, end_col_offset=79), attr='CLI_OPERATION_ID', ctx=Load(), lineno=54, col_offset=73, end_lineno=54, end_col_offset=96)], lineno=54, col_offset=15, end_lineno=54, end_col_offset=96), lineno=54, col_offset=8, end_lineno=54, end_col_offset=96)], lineno=52, col_offset=4, end_lineno=54, end_col_offset=96)], decorator_list=[Call(func=Attribute(value=Attribute(value=Name(id='pytest', ctx=Load(), lineno=17, col_offset=1, end_lineno=17, end_col_offset=7), attr='mark', ctx=Load(), lineno=17, col_offset=1, end_lineno=17, end_col_offset=12), attr='parametrize', ctx=Load(), lineno=17, col_offset=1, end_lineno=17, end_col_offset=24), args=[Tuple(elts=[Constant(value='module_path', lineno=17, col_offset=26, end_lineno=17, end_col_offset=39), Constant(value='context_path', lineno=17, col_offset=41, end_lineno=17, end_col_offset=55), Constant(value='command_name', lineno=17, col_offset=57, end_lineno=17, end_col_offset=71)], ctx=Load(), lineno=17, col_offset=25, end_lineno=17, end_col_offset=72), Call(func=Name(id='list', ctx=Load(), lineno=17, col_offset=74, end_lineno=17, end_col_offset=78), args=[Name(id='CLI_SUITES', ctx=Load(), lineno=17, col_offset=79, end_lineno=17, end_col_offset=89)], lineno=17, col_offset=74, end_lineno=17, end_col_offset=90)], lineno=17, col_offset=1, end_lineno=17, end_col_offset=91)], returns=Constant(value=None, lineno=20, col_offset=5, end_lineno=20, end_col_offset=9), lineno=18, col_offset=0, end_lineno=54, end_col_offset=96)])
Module(body=[Expr(value=Constant(value='Testing bootstrap helpers for kgfoundry.\n\nThis module centralises environment setup so pytest (and any other test\nrunner) can resolve the project package layout without ad-hoc hacks. It is\nimported by ``tests.conftest`` before any of the test modules, ensuring the\n``src`` directory is always on ``sys.path`` and optional dependencies can be\nloaded lazily.\n', lineno=1, col_offset=0, end_lineno=8, end_col_offset=3), lineno=1, col_offset=0, end_lineno=8, end_col_offset=3), ImportFrom(module='__future__', names=[alias(name='annotations', lineno=10, col_offset=23, end_lineno=10, end_col_offset=34)], level=0, lineno=10, col_offset=0, end_lineno=10, end_col_offset=34), Import(names=[alias(name='importlib', lineno=12, col_offset=7, end_lineno=12, end_col_offset=16)], lineno=12, col_offset=0, end_lineno=12, end_col_offset=16), Import(names=[alias(name='importlib.util', lineno=13, col_offset=7, end_lineno=13, end_col_offset=21)], lineno=13, col_offset=0, end_lineno=13, end_col_offset=21), Import(names=[alias(name='inspect', lineno=14, col_offset=7, end_lineno=14, end_col_offset=14)], lineno=14, col_offset=0, end_lineno=14, end_col_offset=14), Import(names=[alias(name='sys', lineno=15, col_offset=7, end_lineno=15, end_col_offset=10)], lineno=15, col_offset=0, end_lineno=15, end_col_offset=10), ImportFrom(module='importlib', names=[alias(name='import_module', lineno=16, col_offset=22, end_lineno=16, end_col_offset=35)], level=0, lineno=16, col_offset=0, end_lineno=16, end_col_offset=35), ImportFrom(module='pathlib', names=[alias(name='Path', lineno=17, col_offset=20, end_lineno=17, end_col_offset=24)], level=0, lineno=17, col_offset=0, end_lineno=17, end_col_offset=24), ImportFrom(module='typing', names=[alias(name='TYPE_CHECKING', lineno=18, col_offset=19, end_lineno=18, end_col_offset=32), alias(name='Final', lineno=18, col_offset=34, end_lineno=18, end_col_offset=39), alias(name='Protocol', lineno=18, col_offset=41, end_lineno=18, end_col_offset=49), alias(name='cast', lineno=18, col_offset=51, end_lineno=18, end_col_offset=55), alias(name='no_type_check', lineno=18, col_offset=57, end_lineno=18, end_col_offset=70)], level=0, lineno=18, col_offset=0, end_lineno=18, end_col_offset=70), If(test=Name(id='TYPE_CHECKING', ctx=Load(), lineno=20, col_offset=3, end_lineno=20, end_col_offset=16), body=[ImportFrom(module='collections.abc', names=[alias(name='Callable', lineno=21, col_offset=32, end_lineno=21, end_col_offset=40)], level=0, lineno=21, col_offset=4, end_lineno=21, end_col_offset=40), ImportFrom(module='types', names=[alias(name='ModuleType', lineno=22, col_offset=22, end_lineno=22, end_col_offset=32)], level=0, lineno=22, col_offset=4, end_lineno=22, end_col_offset=32), ImportFrom(module='click.testing', names=[alias(name='Result', lineno=24, col_offset=30, end_lineno=24, end_col_offset=36)], level=0, lineno=24, col_offset=4, end_lineno=24, end_col_offset=36)], lineno=20, col_offset=0, end_lineno=24, end_col_offset=36), AnnAssign(target=Name(id='REPO_ROOT', ctx=Store(), lineno=26, col_offset=0, end_lineno=26, end_col_offset=9), annotation=Subscript(value=Name(id='Final', ctx=Load(), lineno=26, col_offset=11, end_lineno=26, end_col_offset=16), slice=Name(id='Path', ctx=Load(), lineno=26, col_offset=17, end_lineno=26, end_col_offset=21), ctx=Load(), lineno=26, col_offset=11, end_lineno=26, end_col_offset=22), value=Attribute(value=Attribute(value=Call(func=Attribute(value=Call(func=Name(id='Path', ctx=Load(), lineno=26, col_offset=25, end_lineno=26, end_col_offset=29), args=[Name(id='__file__', ctx=Load(), lineno=26, col_offset=30, end_lineno=26, end_col_offset=38)], lineno=26, col_offset=25, end_lineno=26, end_col_offset=39), attr='resolve', ctx=Load(), lineno=26, col_offset=25, end_lineno=26, end_col_offset=47), lineno=26, col_offset=25, end_lineno=26, end_col_offset=49), attr='parent', ctx=Load(), lineno=26, col_offset=25, end_lineno=26, end_col_offset=56), attr='parent', ctx=Load(), lineno=26, col_offset=25, end_lineno=26, end_col_offset=63), simple=1, lineno=26, col_offset=0, end_lineno=26, end_col_offset=63), AnnAssign(target=Name(id='SRC_PATH', ctx=Store(), lineno=27, col_offset=0, end_lineno=27, end_col_offset=8), annotation=Subscript(value=Name(id='Final', ctx=Load(), lineno=27, col_offset=10, end_lineno=27, end_col_offset=15), slice=Name(id='Path', ctx=Load(), lineno=27, col_offset=16, end_lineno=27, end_col_offset=20), ctx=Load(), lineno=27, col_offset=10, end_lineno=27, end_col_offset=21), value=BinOp(left=Name(id='REPO_ROOT', ctx=Load(), lineno=27, col_offset=24, end_lineno=27, end_col_offset=33), op=Div(), right=Constant(value='src', lineno=27, col_offset=36, end_lineno=27, end_col_offset=41), lineno=27, col_offset=24, end_lineno=27, end_col_offset=41), simple=1, lineno=27, col_offset=0, end_lineno=27, end_col_offset=41), ClassDef(name='_BootstrapState', body=[AnnAssign(target=Name(id='bootstrapped', ctx=Store(), lineno=31, col_offset=4, end_lineno=31, end_col_offset=16), annotation=Name(id='bool', ctx=Load(), lineno=31, col_offset=18, end_lineno=31, end_col_offset=22), value=Constant(value=False, lineno=31, col_offset=25, end_lineno=31, end_col_offset=30), simple=1, lineno=31, col_offset=4, end_lineno=31, end_col_offset=30)], lineno=30, col_offset=0, end_lineno=31, end_col_offset=30), FunctionDef(name='_load_cli_runner_cls', args=arguments(), body=[Try(body=[Assign(targets=[Name(id='testing_module', ctx=Store(), lineno=37, col_offset=8, end_lineno=37, end_col_offset=22)], value=Call(func=Name(id='import_module', ctx=Load(), lineno=37, col_offset=25, end_lineno=37, end_col_offset=38), args=[Constant(value='typer.testing', lineno=37, col_offset=39, end_lineno=37, end_col_offset=54)], lineno=37, col_offset=25, end_lineno=37, end_col_offset=55), lineno=37, col_offset=8, end_lineno=37, end_col_offset=55)], handlers=[ExceptHandler(type=Name(id='ImportError', ctx=Load(), lineno=38, col_offset=11, end_lineno=38, end_col_offset=22), body=[Return(value=Constant(value=None, lineno=39, col_offset=15, end_lineno=39, end_col_offset=19), lineno=39, col_offset=8, end_lineno=39, end_col_offset=19)], lineno=38, col_offset=4, end_lineno=39, end_col_offset=19)], lineno=36, col_offset=4, end_lineno=39, end_col_offset=19), AnnAssign(target=Name(id='candidate_obj', ctx=Store(), lineno=41, col_offset=4, end_lineno=41, end_col_offset=17), annotation=BinOp(left=Name(id='object', ctx=Load(), lineno=41, col_offset=19, end_lineno=41, end_col_offset=25), op=BitOr(), right=Constant(value=None, lineno=41, col_offset=28, end_lineno=41, end_col_offset=32), lineno=41, col_offset=19, end_lineno=41, end_col_offset=32), value=Call(func=Name(id='getattr', ctx=Load(), lineno=41, col_offset=35, end_lineno=41, end_col_offset=42), args=[Name(id='testing_module', ctx=Load(), lineno=41, col_offset=43, end_lineno=41, end_col_offset=57), Constant(value='CliRunner', lineno=41, col_offset=59, end_lineno=41, end_col_offset=70), Constant(value=None, lineno=41, col_offset=72, end_lineno=41, end_col_offset=76)], lineno=41, col_offset=35, end_lineno=41, end_col_offset=77), simple=1, lineno=41, col_offset=4, end_lineno=41, end_col_offset=77), If(test=BoolOp(op=Or(), values=[Compare(left=Name(id='candidate_obj', ctx=Load(), lineno=42, col_offset=7, end_lineno=42, end_col_offset=20), ops=[Is()], comparators=[Constant(value=None, lineno=42, col_offset=24, end_lineno=42, end_col_offset=28)], lineno=42, col_offset=7, end_lineno=42, end_col_offset=28), UnaryOp(op=Not(), operand=Call(func=Name(id='isinstance', ctx=Load(), lineno=42, col_offset=36, end_lineno=42, end_col_offset=46), args=[Name(id='candidate_obj', ctx=Load(), lineno=42, col_offset=47, end_lineno=42, end_col_offset=60), Name(id='type', ctx=Load(), lineno=42, col_offset=62, end_lineno=42, end_col_offset=66)], lineno=42, col_offset=36, end_lineno=42, end_col_offset=67), lineno=42, col_offset=32, end_lineno=42, end_col_offset=67)], lineno=42, col_offset=7, end_lineno=42, end_col_offset=67), body=[Return(value=Constant(value=None, lineno=43, col_offset=15, end_lineno=43, end_col_offset=19), lineno=43, col_offset=8, end_lineno=43, end_col_offset=19)], lineno=42, col_offset=4, end_lineno=43, end_col_offset=19), Assign(targets=[Name(id='runner_cls_obj', ctx=Store(), lineno=44, col_offset=4, end_lineno=44, end_col_offset=18)], value=Call(func=Name(id='cast', ctx=Load(), lineno=44, col_offset=21, end_lineno=44, end_col_offset=25), args=[Constant(value='type[_CliRunnerProtocol]', lineno=44, col_offset=26, end_lineno=44, end_col_offset=52), Name(id='candidate_obj', ctx=Load(), lineno=44, col_offset=54, end_lineno=44, end_col_offset=67)], lineno=44, col_offset=21, end_lineno=44, end_col_offset=68), lineno=44, col_offset=4, end_lineno=44, end_col_offset=68), If(test=UnaryOp(op=Not(), operand=Call(func=Name(id='hasattr', ctx=Load(), lineno=45, col_offset=11, end_lineno=45, end_col_offset=18), args=[Name(id='runner_cls_obj', ctx=Load(), lineno=45, col_offset=19, end_lineno=45, end_col_offset=33), Constant(value='invoke', lineno=45, col_offset=35, end_lineno=45, end_col_offset=43)], lineno=45, col_offset=11, end_lineno=45, end_col_offset=44), lineno=45, col_offset=7, end_lineno=45, end_col_offset=44), body=[Return(value=Constant(value=None, lineno=46, col_offset=15, end_lineno=46, end_col_offset=19), lineno=46, col_offset=8, end_lineno=46, end_col_offset=19)], lineno=45, col_offset=4, end_lineno=46, end_col_offset=19), Return(value=Name(id='runner_cls_obj', ctx=Load(), lineno=47, col_offset=11, end_lineno=47, end_col_offset=25), lineno=47, col_offset=4, end_lineno=47, end_col_offset=25)], decorator_list=[Name(id='no_type_check', ctx=Load(), lineno=34, col_offset=1, end_lineno=34, end_col_offset=14)], returns=BinOp(left=Subscript(value=Name(id='type', ctx=Load(), lineno=35, col_offset=30, end_lineno=35, end_col_offset=34), slice=Name(id='_CliRunnerProtocol', ctx=Load(), lineno=35, col_offset=35, end_lineno=35, end_col_offset=53), ctx=Load(), lineno=35, col_offset=30, end_lineno=35, end_col_offset=54), op=BitOr(), right=Constant(value=None, lineno=35, col_offset=57, end_lineno=35, end_col_offset=61), lineno=35, col_offset=30, end_lineno=35, end_col_offset=61), lineno=35, col_offset=0, end_lineno=47, end_col_offset=25), FunctionDef(name='ensure_src_path', args=arguments(), body=[Expr(value=Constant(value='Add the ``src`` directory to ``sys.path`` exactly once.', lineno=51, col_offset=4, end_lineno=51, end_col_offset=65), lineno=51, col_offset=4, end_lineno=51, end_col_offset=65), If(test=Attribute(value=Name(id='_BootstrapState', ctx=Load(), lineno=52, col_offset=7, end_lineno=52, end_col_offset=22), attr='bootstrapped', ctx=Load(), lineno=52, col_offset=7, end_lineno=52, end_col_offset=35), body=[Return(lineno=53, col_offset=8, end_lineno=53, end_col_offset=14)], lineno=52, col_offset=4, end_lineno=53, end_col_offset=14), If(test=Compare(left=Call(func=Name(id='str', ctx=Load(), lineno=54, col_offset=7, end_lineno=54, end_col_offset=10), args=[Name(id='SRC_PATH', ctx=Load(), lineno=54, col_offset=11, end_lineno=54, end_col_offset=19)], lineno=54, col_offset=7, end_lineno=54, end_col_offset=20), ops=[NotIn()], comparators=[Attribute(value=Name(id='sys', ctx=Load(), lineno=54, col_offset=28, end_lineno=54, end_col_offset=31), attr='path', ctx=Load(), lineno=54, col_offset=28, end_lineno=54, end_col_offset=36)], lineno=54, col_offset=7, end_lineno=54, end_col_offset=36), body=[Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='sys', ctx=Load(), lineno=55, col_offset=8, end_lineno=55, end_col_offset=11), attr='path', ctx=Load(), lineno=55, col_offset=8, end_lineno=55, end_col_offset=16), attr='insert', ctx=Load(), lineno=55, col_offset=8, end_lineno=55, end_col_offset=23), args=[Constant(value=0, lineno=55, col_offset=24, end_lineno=55, end_col_offset=25), Call(func=Name(id='str', ctx=Load(), lineno=55, col_offset=27, end_lineno=55, end_col_offset=30), args=[Name(id='SRC_PATH', ctx=Load(), lineno=55, col_offset=31, end_lineno=55, end_col_offset=39)], lineno=55, col_offset=27, end_lineno=55, end_col_offset=40)], lineno=55, col_offset=8, end_lineno=55, end_col_offset=41), lineno=55, col_offset=8, end_lineno=55, end_col_offset=41), Expr(value=Call(func=Attribute(value=Name(id='importlib', ctx=Load(), lineno=56, col_offset=8, end_lineno=56, end_col_offset=17), attr='invalidate_caches', ctx=Load(), lineno=56, col_offset=8, end_lineno=56, end_col_offset=35), lineno=56, col_offset=8, end_lineno=56, end_col_offset=37), lineno=56, col_offset=8, end_lineno=56, end_col_offset=37)], lineno=54, col_offset=4, end_lineno=56, end_col_offset=37), Assign(targets=[Attribute(value=Name(id='_BootstrapState', ctx=Load(), lineno=57, col_offset=4, end_lineno=57, end_col_offset=19), attr='bootstrapped', ctx=Store(), lineno=57, col_offset=4, end_lineno=57, end_col_offset=32)], value=Constant(value=True, lineno=57, col_offset=35, end_lineno=57, end_col_offset=39), lineno=57, col_offset=4, end_lineno=57, end_col_offset=39)], returns=Constant(value=None, lineno=50, col_offset=25, end_lineno=50, end_col_offset=29), lineno=50, col_offset=0, end_lineno=57, end_col_offset=39), FunctionDef(name='load_optional_module', args=arguments(args=[arg(arg='module_name', annotation=Name(id='str', ctx=Load(), lineno=60, col_offset=38, end_lineno=60, end_col_offset=41), lineno=60, col_offset=25, end_lineno=60, end_col_offset=41)]), body=[Expr(value=Constant(value='Return ``module_name`` when importable, otherwise ``None``.\n\n    Parameters\n    ----------\n    module_name : str\n        Module name to import.\n\n    Returns\n    -------\n    ModuleType | None\n        Imported module if available, otherwise None.\n    ', lineno=61, col_offset=4, end_lineno=72, end_col_offset=7), lineno=61, col_offset=4, end_lineno=72, end_col_offset=7), Assign(targets=[Name(id='spec', ctx=Store(), lineno=73, col_offset=4, end_lineno=73, end_col_offset=8)], value=Call(func=Attribute(value=Attribute(value=Name(id='importlib', ctx=Load(), lineno=73, col_offset=11, end_lineno=73, end_col_offset=20), attr='util', ctx=Load(), lineno=73, col_offset=11, end_lineno=73, end_col_offset=25), attr='find_spec', ctx=Load(), lineno=73, col_offset=11, end_lineno=73, end_col_offset=35), args=[Name(id='module_name', ctx=Load(), lineno=73, col_offset=36, end_lineno=73, end_col_offset=47)], lineno=73, col_offset=11, end_lineno=73, end_col_offset=48), lineno=73, col_offset=4, end_lineno=73, end_col_offset=48), If(test=Compare(left=Name(id='spec', ctx=Load(), lineno=74, col_offset=7, end_lineno=74, end_col_offset=11), ops=[Is()], comparators=[Constant(value=None, lineno=74, col_offset=15, end_lineno=74, end_col_offset=19)], lineno=74, col_offset=7, end_lineno=74, end_col_offset=19), body=[Return(value=Constant(value=None, lineno=75, col_offset=15, end_lineno=75, end_col_offset=19), lineno=75, col_offset=8, end_lineno=75, end_col_offset=19)], lineno=74, col_offset=4, end_lineno=75, end_col_offset=19), Return(value=Call(func=Attribute(value=Name(id='importlib', ctx=Load(), lineno=76, col_offset=11, end_lineno=76, end_col_offset=20), attr='import_module', ctx=Load(), lineno=76, col_offset=11, end_lineno=76, end_col_offset=34), args=[Name(id='module_name', ctx=Load(), lineno=76, col_offset=35, end_lineno=76, end_col_offset=46)], lineno=76, col_offset=11, end_lineno=76, end_col_offset=47), lineno=76, col_offset=4, end_lineno=76, end_col_offset=47)], returns=BinOp(left=Name(id='ModuleType', ctx=Load(), lineno=60, col_offset=46, end_lineno=60, end_col_offset=56), op=BitOr(), right=Constant(value=None, lineno=60, col_offset=59, end_lineno=60, end_col_offset=63), lineno=60, col_offset=46, end_lineno=60, end_col_offset=63), lineno=60, col_offset=0, end_lineno=76, end_col_offset=47), FunctionDef(name='load_optional_attr', args=arguments(args=[arg(arg='module_name', annotation=Name(id='str', ctx=Load(), lineno=79, col_offset=36, end_lineno=79, end_col_offset=39), lineno=79, col_offset=23, end_lineno=79, end_col_offset=39), arg(arg='attr_name', annotation=Name(id='str', ctx=Load(), lineno=79, col_offset=52, end_lineno=79, end_col_offset=55), lineno=79, col_offset=41, end_lineno=79, end_col_offset=55)]), body=[Expr(value=Constant(value='Return ``getattr`` from ``module_name`` when available.\n\n    ``None`` is returned when either the module or the attribute cannot be\n    imported. Consumers remain responsible for type-casting the result.\n\n    Parameters\n    ----------\n    module_name : str\n        Module name to import from.\n    attr_name : str\n        Attribute name to retrieve.\n\n    Returns\n    -------\n    object | None\n        Attribute value if available, otherwise None.\n    ', lineno=80, col_offset=4, end_lineno=96, end_col_offset=7), lineno=80, col_offset=4, end_lineno=96, end_col_offset=7), Assign(targets=[Name(id='module', ctx=Store(), lineno=97, col_offset=4, end_lineno=97, end_col_offset=10)], value=Call(func=Name(id='load_optional_module', ctx=Load(), lineno=97, col_offset=13, end_lineno=97, end_col_offset=33), args=[Name(id='module_name', ctx=Load(), lineno=97, col_offset=34, end_lineno=97, end_col_offset=45)], lineno=97, col_offset=13, end_lineno=97, end_col_offset=46), lineno=97, col_offset=4, end_lineno=97, end_col_offset=46), If(test=Compare(left=Name(id='module', ctx=Load(), lineno=98, col_offset=7, end_lineno=98, end_col_offset=13), ops=[Is()], comparators=[Constant(value=None, lineno=98, col_offset=17, end_lineno=98, end_col_offset=21)], lineno=98, col_offset=7, end_lineno=98, end_col_offset=21), body=[Return(value=Constant(value=None, lineno=99, col_offset=15, end_lineno=99, end_col_offset=19), lineno=99, col_offset=8, end_lineno=99, end_col_offset=19)], lineno=98, col_offset=4, end_lineno=99, end_col_offset=19), Return(value=Call(func=Name(id='cast', ctx=Load(), lineno=100, col_offset=11, end_lineno=100, end_col_offset=15), args=[Constant(value='object | None', lineno=100, col_offset=16, end_lineno=100, end_col_offset=31), Call(func=Name(id='getattr', ctx=Load(), lineno=100, col_offset=33, end_lineno=100, end_col_offset=40), args=[Name(id='module', ctx=Load(), lineno=100, col_offset=41, end_lineno=100, end_col_offset=47), Name(id='attr_name', ctx=Load(), lineno=100, col_offset=49, end_lineno=100, end_col_offset=58), Constant(value=None, lineno=100, col_offset=60, end_lineno=100, end_col_offset=64)], lineno=100, col_offset=33, end_lineno=100, end_col_offset=65)], lineno=100, col_offset=11, end_lineno=100, end_col_offset=66), lineno=100, col_offset=4, end_lineno=100, end_col_offset=66)], returns=BinOp(left=Name(id='object', ctx=Load(), lineno=79, col_offset=60, end_lineno=79, end_col_offset=66), op=BitOr(), right=Constant(value=None, lineno=79, col_offset=69, end_lineno=79, end_col_offset=73), lineno=79, col_offset=60, end_lineno=79, end_col_offset=73), lineno=79, col_offset=0, end_lineno=100, end_col_offset=66), Expr(value=Call(func=Name(id='ensure_src_path', ctx=Load(), lineno=104, col_offset=0, end_lineno=104, end_col_offset=15), lineno=104, col_offset=0, end_lineno=104, end_col_offset=17), lineno=104, col_offset=0, end_lineno=104, end_col_offset=17), ClassDef(name='_CliRunnerProtocol', bases=[Name(id='Protocol', ctx=Load(), lineno=107, col_offset=25, end_lineno=107, end_col_offset=33)], body=[FunctionDef(name='invoke', args=arguments(args=[arg(arg='self', lineno=108, col_offset=15, end_lineno=108, end_col_offset=19)], vararg=arg(arg='args', annotation=Name(id='object', ctx=Load(), lineno=108, col_offset=28, end_lineno=108, end_col_offset=34), lineno=108, col_offset=22, end_lineno=108, end_col_offset=34), kwarg=arg(arg='kwargs', annotation=Name(id='object', ctx=Load(), lineno=108, col_offset=46, end_lineno=108, end_col_offset=52), lineno=108, col_offset=38, end_lineno=108, end_col_offset=52)), body=[Expr(value=Constant(value='Invoke the CLI with the provided arguments.', lineno=109, col_offset=8, end_lineno=109, end_col_offset=57), lineno=109, col_offset=8, end_lineno=109, end_col_offset=57), Expr(value=Constant(value=Ellipsis, lineno=110, col_offset=8, end_lineno=110, end_col_offset=11), lineno=110, col_offset=8, end_lineno=110, end_col_offset=11)], returns=Name(id='Result', ctx=Load(), lineno=108, col_offset=57, end_lineno=108, end_col_offset=63), lineno=108, col_offset=4, end_lineno=110, end_col_offset=11)], lineno=107, col_offset=0, end_lineno=110, end_col_offset=11), FunctionDef(name='_patch_cli_runner_mix_stderr', args=arguments(), body=[Expr(value=Constant(value='Allow ``CliRunner.invoke`` to accept ``mix_stderr`` across Click versions.', lineno=115, col_offset=4, end_lineno=115, end_col_offset=84), lineno=115, col_offset=4, end_lineno=115, end_col_offset=84), Assign(targets=[Name(id='cli_runner_cls', ctx=Store(), lineno=116, col_offset=4, end_lineno=116, end_col_offset=18)], value=Call(func=Name(id='_load_cli_runner_cls', ctx=Load(), lineno=116, col_offset=21, end_lineno=116, end_col_offset=41), lineno=116, col_offset=21, end_lineno=116, end_col_offset=43), lineno=116, col_offset=4, end_lineno=116, end_col_offset=43), If(test=Compare(left=Name(id='cli_runner_cls', ctx=Load(), lineno=117, col_offset=7, end_lineno=117, end_col_offset=21), ops=[Is()], comparators=[Constant(value=None, lineno=117, col_offset=25, end_lineno=117, end_col_offset=29)], lineno=117, col_offset=7, end_lineno=117, end_col_offset=29), body=[Return(lineno=118, col_offset=8, end_lineno=118, end_col_offset=14)], lineno=117, col_offset=4, end_lineno=118, end_col_offset=14), If(test=Call(func=Name(id='hasattr', ctx=Load(), lineno=120, col_offset=7, end_lineno=120, end_col_offset=14), args=[Attribute(value=Name(id='cli_runner_cls', ctx=Load(), lineno=120, col_offset=15, end_lineno=120, end_col_offset=29), attr='invoke', ctx=Load(), lineno=120, col_offset=15, end_lineno=120, end_col_offset=36), Constant(value='__kgfoundry_mixstderr__', lineno=120, col_offset=38, end_lineno=120, end_col_offset=63)], lineno=120, col_offset=7, end_lineno=120, end_col_offset=64), body=[Return(lineno=121, col_offset=8, end_lineno=121, end_col_offset=14)], lineno=120, col_offset=4, end_lineno=121, end_col_offset=14), Assign(targets=[Name(id='signature', ctx=Store(), lineno=123, col_offset=4, end_lineno=123, end_col_offset=13)], value=Call(func=Attribute(value=Name(id='inspect', ctx=Load(), lineno=123, col_offset=16, end_lineno=123, end_col_offset=23), attr='signature', ctx=Load(), lineno=123, col_offset=16, end_lineno=123, end_col_offset=33), args=[Attribute(value=Name(id='cli_runner_cls', ctx=Load(), lineno=123, col_offset=34, end_lineno=123, end_col_offset=48), attr='invoke', ctx=Load(), lineno=123, col_offset=34, end_lineno=123, end_col_offset=55)], lineno=123, col_offset=16, end_lineno=123, end_col_offset=56), lineno=123, col_offset=4, end_lineno=123, end_col_offset=56), If(test=Compare(left=Constant(value='mix_stderr', lineno=124, col_offset=7, end_lineno=124, end_col_offset=19), ops=[In()], comparators=[Attribute(value=Name(id='signature', ctx=Load(), lineno=124, col_offset=23, end_lineno=124, end_col_offset=32), attr='parameters', ctx=Load(), lineno=124, col_offset=23, end_lineno=124, end_col_offset=43)], lineno=124, col_offset=7, end_lineno=124, end_col_offset=43), body=[Return(lineno=125, col_offset=8, end_lineno=125, end_col_offset=14)], lineno=124, col_offset=4, end_lineno=125, end_col_offset=14), Assign(targets=[Name(id='invoke_attr', ctx=Store(), lineno=127, col_offset=4, end_lineno=127, end_col_offset=15)], value=Call(func=Name(id='cast', ctx=Load(), lineno=127, col_offset=18, end_lineno=127, end_col_offset=22), args=[Constant(value='object', lineno=127, col_offset=23, end_lineno=127, end_col_offset=31), Attribute(value=Name(id='cli_runner_cls', ctx=Load(), lineno=127, col_offset=33, end_lineno=127, end_col_offset=47), attr='invoke', ctx=Load(), lineno=127, col_offset=33, end_lineno=127, end_col_offset=54)], lineno=127, col_offset=18, end_lineno=127, end_col_offset=55), lineno=127, col_offset=4, end_lineno=127, end_col_offset=55), Assign(targets=[Name(id='invoke_callable', ctx=Store(), lineno=128, col_offset=4, end_lineno=128, end_col_offset=19)], value=Call(func=Name(id='cast', ctx=Load(), lineno=128, col_offset=22, end_lineno=128, end_col_offset=26), args=[Constant(value='Callable[..., Result]', lineno=128, col_offset=27, end_lineno=128, end_col_offset=50), Name(id='invoke_attr', ctx=Load(), lineno=128, col_offset=52, end_lineno=128, end_col_offset=63)], lineno=128, col_offset=22, end_lineno=128, end_col_offset=64), lineno=128, col_offset=4, end_lineno=128, end_col_offset=64), FunctionDef(name='invoke', args=arguments(args=[arg(arg='self', annotation=Name(id='object', ctx=Load(), lineno=130, col_offset=21, end_lineno=130, end_col_offset=27), lineno=130, col_offset=15, end_lineno=130, end_col_offset=27)], vararg=arg(arg='invoke_args', annotation=Name(id='object', ctx=Load(), lineno=130, col_offset=43, end_lineno=130, end_col_offset=49), lineno=130, col_offset=30, end_lineno=130, end_col_offset=49), kwarg=arg(arg='invoke_kwargs', annotation=Name(id='object', ctx=Load(), lineno=130, col_offset=68, end_lineno=130, end_col_offset=74), lineno=130, col_offset=53, end_lineno=130, end_col_offset=74)), body=[Expr(value=Constant(value='Invoke CLI command with mix_stderr parameter removed.\n\n        Parameters\n        ----------\n        self : object\n            CLI runner instance.\n        *invoke_args : object\n            Positional arguments.\n        **invoke_kwargs : object\n            Keyword arguments (mix_stderr removed if present).\n\n        Returns\n        -------\n        Result\n            CLI execution result.\n        ', lineno=131, col_offset=8, end_lineno=146, end_col_offset=11), lineno=131, col_offset=8, end_lineno=146, end_col_offset=11), Expr(value=Call(func=Attribute(value=Name(id='invoke_kwargs', ctx=Load(), lineno=147, col_offset=8, end_lineno=147, end_col_offset=21), attr='pop', ctx=Load(), lineno=147, col_offset=8, end_lineno=147, end_col_offset=25), args=[Constant(value='mix_stderr', lineno=147, col_offset=26, end_lineno=147, end_col_offset=38), Constant(value=None, lineno=147, col_offset=40, end_lineno=147, end_col_offset=44)], lineno=147, col_offset=8, end_lineno=147, end_col_offset=45), lineno=147, col_offset=8, end_lineno=147, end_col_offset=45), Return(value=Call(func=Name(id='invoke_callable', ctx=Load(), lineno=148, col_offset=15, end_lineno=148, end_col_offset=30), args=[Name(id='self', ctx=Load(), lineno=148, col_offset=31, end_lineno=148, end_col_offset=35), Starred(value=Name(id='invoke_args', ctx=Load(), lineno=148, col_offset=38, end_lineno=148, end_col_offset=49), ctx=Load(), lineno=148, col_offset=37, end_lineno=148, end_col_offset=49)], keywords=[keyword(value=Name(id='invoke_kwargs', ctx=Load(), lineno=148, col_offset=53, end_lineno=148, end_col_offset=66), lineno=148, col_offset=51, end_lineno=148, end_col_offset=66)], lineno=148, col_offset=15, end_lineno=148, end_col_offset=67), lineno=148, col_offset=8, end_lineno=148, end_col_offset=67)], returns=Name(id='Result', ctx=Load(), lineno=130, col_offset=79, end_lineno=130, end_col_offset=85), lineno=130, col_offset=4, end_lineno=148, end_col_offset=67), Assign(targets=[Attribute(value=Name(id='invoke', ctx=Load(), lineno=150, col_offset=4, end_lineno=150, end_col_offset=10), attr='__kgfoundry_mixstderr__', ctx=Store(), lineno=150, col_offset=4, end_lineno=150, end_col_offset=34)], value=Constant(value=True, lineno=150, col_offset=37, end_lineno=150, end_col_offset=41), lineno=150, col_offset=4, end_lineno=150, end_col_offset=41), Assign(targets=[Attribute(value=Name(id='cli_runner_cls', ctx=Load(), lineno=151, col_offset=4, end_lineno=151, end_col_offset=18), attr='invoke', ctx=Store(), lineno=151, col_offset=4, end_lineno=151, end_col_offset=25)], value=Call(func=Name(id='cast', ctx=Load(), lineno=151, col_offset=28, end_lineno=151, end_col_offset=32), args=[Constant(value='Callable[..., Result]', lineno=151, col_offset=33, end_lineno=151, end_col_offset=56), Name(id='invoke', ctx=Load(), lineno=151, col_offset=58, end_lineno=151, end_col_offset=64)], lineno=151, col_offset=28, end_lineno=151, end_col_offset=65), lineno=151, col_offset=4, end_lineno=151, end_col_offset=65)], decorator_list=[Name(id='no_type_check', ctx=Load(), lineno=113, col_offset=1, end_lineno=113, end_col_offset=14)], returns=Constant(value=None, lineno=114, col_offset=38, end_lineno=114, end_col_offset=42), lineno=114, col_offset=0, end_lineno=151, end_col_offset=65), Expr(value=Call(func=Name(id='_patch_cli_runner_mix_stderr', ctx=Load(), lineno=154, col_offset=0, end_lineno=154, end_col_offset=28), lineno=154, col_offset=0, end_lineno=154, end_col_offset=30), lineno=154, col_offset=0, end_lineno=154, end_col_offset=30)])
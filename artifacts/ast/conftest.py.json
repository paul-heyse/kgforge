Module(body=[Expr(value=Constant(value='Shared fixtures for vector ingestion regression tests.\n\nThese fixtures provide canonical payloads, schema validators, and deterministic correlation\nidentifiers so the test suite can exercise vector ingestion behaviour without repeating setup\nboilerplate.\n', lineno=1, col_offset=0, end_lineno=6, end_col_offset=3), lineno=1, col_offset=0, end_lineno=6, end_col_offset=3), ImportFrom(module='__future__', names=[alias(name='annotations', lineno=8, col_offset=23, end_lineno=8, end_col_offset=34)], level=0, lineno=8, col_offset=0, end_lineno=8, end_col_offset=34), ImportFrom(module='pathlib', names=[alias(name='Path', lineno=10, col_offset=20, end_lineno=10, end_col_offset=24)], level=0, lineno=10, col_offset=0, end_lineno=10, end_col_offset=24), ImportFrom(module='typing', names=[alias(name='TYPE_CHECKING', lineno=11, col_offset=19, end_lineno=11, end_col_offset=32), alias(name='Final', lineno=11, col_offset=34, end_lineno=11, end_col_offset=39), alias(name='cast', lineno=11, col_offset=41, end_lineno=11, end_col_offset=45)], level=0, lineno=11, col_offset=0, end_lineno=11, end_col_offset=45), ImportFrom(module='uuid', names=[alias(name='UUID', lineno=12, col_offset=17, end_lineno=12, end_col_offset=21)], level=0, lineno=12, col_offset=0, end_lineno=12, end_col_offset=21), Import(names=[alias(name='numpy', asname='np', lineno=14, col_offset=7, end_lineno=14, end_col_offset=18)], lineno=14, col_offset=0, end_lineno=14, end_col_offset=18), Import(names=[alias(name='pytest', lineno=15, col_offset=7, end_lineno=15, end_col_offset=13)], lineno=15, col_offset=0, end_lineno=15, end_col_offset=13), ImportFrom(module='kgfoundry_common.jsonschema_utils', names=[alias(name='create_draft202012_validator', lineno=18, col_offset=4, end_lineno=18, end_col_offset=32)], level=0, lineno=17, col_offset=0, end_lineno=19, end_col_offset=1), ImportFrom(module='kgfoundry_common.schema_helpers', names=[alias(name='load_schema', lineno=20, col_offset=44, end_lineno=20, end_col_offset=55)], level=0, lineno=20, col_offset=0, end_lineno=20, end_col_offset=55), If(test=Name(id='TYPE_CHECKING', ctx=Load(), lineno=22, col_offset=3, end_lineno=22, end_col_offset=16), body=[ImportFrom(module='collections.abc', names=[alias(name='Callable', lineno=23, col_offset=32, end_lineno=23, end_col_offset=40), alias(name='Sequence', lineno=23, col_offset=42, end_lineno=23, end_col_offset=50)], level=0, lineno=23, col_offset=4, end_lineno=23, end_col_offset=50), ImportFrom(module='kgfoundry_common.jsonschema_utils', names=[alias(name='Draft202012ValidatorProtocol', lineno=26, col_offset=8, end_lineno=26, end_col_offset=36)], level=0, lineno=25, col_offset=4, end_lineno=27, end_col_offset=5), ImportFrom(module='kgfoundry_common.types', names=[alias(name='JsonValue', lineno=28, col_offset=39, end_lineno=28, end_col_offset=48)], level=0, lineno=28, col_offset=4, end_lineno=28, end_col_offset=48), ImportFrom(module='kgfoundry_common.vector_types', names=[alias(name='VectorMatrix', lineno=29, col_offset=46, end_lineno=29, end_col_offset=58)], level=0, lineno=29, col_offset=4, end_lineno=29, end_col_offset=58)], lineno=22, col_offset=0, end_lineno=29, end_col_offset=58), TypeAlias(name=Name(id='VectorPayload', ctx=Store(), lineno=31, col_offset=5, end_lineno=31, end_col_offset=18), value=Subscript(value=Name(id='list', ctx=Load(), lineno=31, col_offset=21, end_lineno=31, end_col_offset=25), slice=Subscript(value=Name(id='dict', ctx=Load(), lineno=31, col_offset=26, end_lineno=31, end_col_offset=30), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=31, col_offset=31, end_lineno=31, end_col_offset=34), Name(id='object', ctx=Load(), lineno=31, col_offset=36, end_lineno=31, end_col_offset=42)], ctx=Load(), lineno=31, col_offset=31, end_lineno=31, end_col_offset=42), ctx=Load(), lineno=31, col_offset=26, end_lineno=31, end_col_offset=43), ctx=Load(), lineno=31, col_offset=21, end_lineno=31, end_col_offset=44), lineno=31, col_offset=0, end_lineno=31, end_col_offset=44), AnnAssign(target=Name(id='_REPO_ROOT', ctx=Store(), lineno=33, col_offset=0, end_lineno=33, end_col_offset=10), annotation=Subscript(value=Name(id='Final', ctx=Load(), lineno=33, col_offset=12, end_lineno=33, end_col_offset=17), slice=Name(id='Path', ctx=Load(), lineno=33, col_offset=18, end_lineno=33, end_col_offset=22), ctx=Load(), lineno=33, col_offset=12, end_lineno=33, end_col_offset=23), value=Subscript(value=Attribute(value=Call(func=Attribute(value=Call(func=Name(id='Path', ctx=Load(), lineno=33, col_offset=26, end_lineno=33, end_col_offset=30), args=[Name(id='__file__', ctx=Load(), lineno=33, col_offset=31, end_lineno=33, end_col_offset=39)], lineno=33, col_offset=26, end_lineno=33, end_col_offset=40), attr='resolve', ctx=Load(), lineno=33, col_offset=26, end_lineno=33, end_col_offset=48), lineno=33, col_offset=26, end_lineno=33, end_col_offset=50), attr='parents', ctx=Load(), lineno=33, col_offset=26, end_lineno=33, end_col_offset=58), slice=Constant(value=2, lineno=33, col_offset=59, end_lineno=33, end_col_offset=60), ctx=Load(), lineno=33, col_offset=26, end_lineno=33, end_col_offset=61), simple=1, lineno=33, col_offset=0, end_lineno=33, end_col_offset=61), AnnAssign(target=Name(id='_VECTOR_SCHEMA_PATH', ctx=Store(), lineno=34, col_offset=0, end_lineno=34, end_col_offset=19), annotation=Subscript(value=Name(id='Final', ctx=Load(), lineno=34, col_offset=21, end_lineno=34, end_col_offset=26), slice=Name(id='Path', ctx=Load(), lineno=34, col_offset=27, end_lineno=34, end_col_offset=31), ctx=Load(), lineno=34, col_offset=21, end_lineno=34, end_col_offset=32), value=BinOp(left=BinOp(left=BinOp(left=Name(id='_REPO_ROOT', ctx=Load(), lineno=35, col_offset=4, end_lineno=35, end_col_offset=14), op=Div(), right=Constant(value='schema', lineno=35, col_offset=17, end_lineno=35, end_col_offset=25), lineno=35, col_offset=4, end_lineno=35, end_col_offset=25), op=Div(), right=Constant(value='vector-ingestion', lineno=35, col_offset=28, end_lineno=35, end_col_offset=46), lineno=35, col_offset=4, end_lineno=35, end_col_offset=46), op=Div(), right=Constant(value='vector-batch.v1.schema.json', lineno=35, col_offset=49, end_lineno=35, end_col_offset=78), lineno=35, col_offset=4, end_lineno=35, end_col_offset=78), simple=1, lineno=34, col_offset=0, end_lineno=36, end_col_offset=1), FunctionDef(name='_vector_schema_path', args=arguments(), body=[Expr(value=Constant(value='Return the absolute path to the canonical vector batch schema.\n\n    Returns\n    -------\n    Path\n        Path to vector batch schema file.\n    ', lineno=40, col_offset=4, end_lineno=46, end_col_offset=7), lineno=40, col_offset=4, end_lineno=46, end_col_offset=7), Return(value=Name(id='_VECTOR_SCHEMA_PATH', ctx=Load(), lineno=47, col_offset=11, end_lineno=47, end_col_offset=30), lineno=47, col_offset=4, end_lineno=47, end_col_offset=30)], returns=Name(id='Path', ctx=Load(), lineno=39, col_offset=29, end_lineno=39, end_col_offset=33), lineno=39, col_offset=0, end_lineno=47, end_col_offset=30), AnnAssign(target=Name(id='vector_schema_path', ctx=Store(), lineno=50, col_offset=0, end_lineno=50, end_col_offset=18), annotation=Subscript(value=Name(id='Callable', ctx=Load(), lineno=50, col_offset=20, end_lineno=50, end_col_offset=28), slice=Tuple(elts=[List(ctx=Load(), lineno=50, col_offset=29, end_lineno=50, end_col_offset=31), Name(id='Path', ctx=Load(), lineno=50, col_offset=33, end_lineno=50, end_col_offset=37)], ctx=Load(), lineno=50, col_offset=29, end_lineno=50, end_col_offset=37), ctx=Load(), lineno=50, col_offset=20, end_lineno=50, end_col_offset=38), value=Call(func=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=50, col_offset=41, end_lineno=50, end_col_offset=47), attr='fixture', ctx=Load(), lineno=50, col_offset=41, end_lineno=50, end_col_offset=55), keywords=[keyword(arg='scope', value=Constant(value='session', lineno=50, col_offset=62, end_lineno=50, end_col_offset=71), lineno=50, col_offset=56, end_lineno=50, end_col_offset=71)], lineno=50, col_offset=41, end_lineno=50, end_col_offset=72), args=[Name(id='_vector_schema_path', ctx=Load(), lineno=50, col_offset=73, end_lineno=50, end_col_offset=92)], lineno=50, col_offset=41, end_lineno=50, end_col_offset=93), simple=1, lineno=50, col_offset=0, end_lineno=50, end_col_offset=93), FunctionDef(name='_vector_schema', args=arguments(args=[arg(arg='vector_schema_path', annotation=Name(id='Path', ctx=Load(), lineno=53, col_offset=39, end_lineno=53, end_col_offset=43), lineno=53, col_offset=19, end_lineno=53, end_col_offset=43)]), body=[Expr(value=Constant(value='Load the canonical vector batch schema once per test session.\n\n    Parameters\n    ----------\n    vector_schema_path : Path\n        Path to schema file.\n\n    Returns\n    -------\n    dict[str, JsonValue]\n        Parsed schema dictionary.\n    ', lineno=54, col_offset=4, end_lineno=65, end_col_offset=7), lineno=54, col_offset=4, end_lineno=65, end_col_offset=7), Return(value=Call(func=Name(id='load_schema', ctx=Load(), lineno=66, col_offset=11, end_lineno=66, end_col_offset=22), args=[Name(id='vector_schema_path', ctx=Load(), lineno=66, col_offset=23, end_lineno=66, end_col_offset=41)], lineno=66, col_offset=11, end_lineno=66, end_col_offset=42), lineno=66, col_offset=4, end_lineno=66, end_col_offset=42)], returns=Subscript(value=Name(id='dict', ctx=Load(), lineno=53, col_offset=48, end_lineno=53, end_col_offset=52), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=53, col_offset=53, end_lineno=53, end_col_offset=56), Name(id='JsonValue', ctx=Load(), lineno=53, col_offset=58, end_lineno=53, end_col_offset=67)], ctx=Load(), lineno=53, col_offset=53, end_lineno=53, end_col_offset=67), ctx=Load(), lineno=53, col_offset=48, end_lineno=53, end_col_offset=68), lineno=53, col_offset=0, end_lineno=66, end_col_offset=42), AnnAssign(target=Name(id='vector_schema', ctx=Store(), lineno=69, col_offset=0, end_lineno=69, end_col_offset=13), annotation=Subscript(value=Name(id='Callable', ctx=Load(), lineno=69, col_offset=15, end_lineno=69, end_col_offset=23), slice=Tuple(elts=[List(elts=[Name(id='Path', ctx=Load(), lineno=69, col_offset=25, end_lineno=69, end_col_offset=29)], ctx=Load(), lineno=69, col_offset=24, end_lineno=69, end_col_offset=30), Subscript(value=Name(id='dict', ctx=Load(), lineno=69, col_offset=32, end_lineno=69, end_col_offset=36), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=69, col_offset=37, end_lineno=69, end_col_offset=40), Name(id='JsonValue', ctx=Load(), lineno=69, col_offset=42, end_lineno=69, end_col_offset=51)], ctx=Load(), lineno=69, col_offset=37, end_lineno=69, end_col_offset=51), ctx=Load(), lineno=69, col_offset=32, end_lineno=69, end_col_offset=52)], ctx=Load(), lineno=69, col_offset=24, end_lineno=69, end_col_offset=52), ctx=Load(), lineno=69, col_offset=15, end_lineno=69, end_col_offset=53), value=Call(func=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=69, col_offset=56, end_lineno=69, end_col_offset=62), attr='fixture', ctx=Load(), lineno=69, col_offset=56, end_lineno=69, end_col_offset=70), keywords=[keyword(arg='scope', value=Constant(value='session', lineno=69, col_offset=77, end_lineno=69, end_col_offset=86), lineno=69, col_offset=71, end_lineno=69, end_col_offset=86)], lineno=69, col_offset=56, end_lineno=69, end_col_offset=87), args=[Name(id='_vector_schema', ctx=Load(), lineno=70, col_offset=4, end_lineno=70, end_col_offset=18)], lineno=69, col_offset=56, end_lineno=71, end_col_offset=1), simple=1, lineno=69, col_offset=0, end_lineno=71, end_col_offset=1), FunctionDef(name='_vector_validator', args=arguments(args=[arg(arg='vector_schema', annotation=Subscript(value=Name(id='dict', ctx=Load(), lineno=75, col_offset=19, end_lineno=75, end_col_offset=23), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=75, col_offset=24, end_lineno=75, end_col_offset=27), Name(id='JsonValue', ctx=Load(), lineno=75, col_offset=29, end_lineno=75, end_col_offset=38)], ctx=Load(), lineno=75, col_offset=24, end_lineno=75, end_col_offset=38), ctx=Load(), lineno=75, col_offset=19, end_lineno=75, end_col_offset=39), lineno=75, col_offset=4, end_lineno=75, end_col_offset=39)]), body=[Expr(value=Constant(value='Provide a cached JSON Schema validator for vector payloads.\n\n    Parameters\n    ----------\n    vector_schema : dict[str, JsonValue]\n        Schema dictionary.\n\n    Returns\n    -------\n    Draft202012ValidatorProtocol\n        Validator instance.\n    ', lineno=77, col_offset=4, end_lineno=88, end_col_offset=7), lineno=77, col_offset=4, end_lineno=88, end_col_offset=7), Return(value=Call(func=Name(id='create_draft202012_validator', ctx=Load(), lineno=89, col_offset=11, end_lineno=89, end_col_offset=39), args=[Name(id='vector_schema', ctx=Load(), lineno=89, col_offset=40, end_lineno=89, end_col_offset=53)], lineno=89, col_offset=11, end_lineno=89, end_col_offset=54), lineno=89, col_offset=4, end_lineno=89, end_col_offset=54)], returns=Name(id='Draft202012ValidatorProtocol', ctx=Load(), lineno=76, col_offset=5, end_lineno=76, end_col_offset=33), lineno=74, col_offset=0, end_lineno=89, end_col_offset=54), AnnAssign(target=Name(id='vector_validator', ctx=Store(), lineno=92, col_offset=0, end_lineno=92, end_col_offset=16), annotation=Subscript(value=Name(id='Callable', ctx=Load(), lineno=92, col_offset=18, end_lineno=92, end_col_offset=26), slice=Tuple(elts=[List(elts=[Subscript(value=Name(id='dict', ctx=Load(), lineno=92, col_offset=28, end_lineno=92, end_col_offset=32), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=92, col_offset=33, end_lineno=92, end_col_offset=36), Name(id='JsonValue', ctx=Load(), lineno=92, col_offset=38, end_lineno=92, end_col_offset=47)], ctx=Load(), lineno=92, col_offset=33, end_lineno=92, end_col_offset=47), ctx=Load(), lineno=92, col_offset=28, end_lineno=92, end_col_offset=48)], ctx=Load(), lineno=92, col_offset=27, end_lineno=92, end_col_offset=49), Name(id='Draft202012ValidatorProtocol', ctx=Load(), lineno=92, col_offset=51, end_lineno=92, end_col_offset=79)], ctx=Load(), lineno=92, col_offset=27, end_lineno=92, end_col_offset=79), ctx=Load(), lineno=92, col_offset=18, end_lineno=92, end_col_offset=80), value=Call(func=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=92, col_offset=83, end_lineno=92, end_col_offset=89), attr='fixture', ctx=Load(), lineno=92, col_offset=83, end_lineno=92, end_col_offset=97), keywords=[keyword(arg='scope', value=Constant(value='session', lineno=93, col_offset=10, end_lineno=93, end_col_offset=19), lineno=93, col_offset=4, end_lineno=93, end_col_offset=19)], lineno=92, col_offset=83, end_lineno=94, end_col_offset=1), args=[Name(id='_vector_validator', ctx=Load(), lineno=94, col_offset=2, end_lineno=94, end_col_offset=19)], lineno=92, col_offset=83, end_lineno=94, end_col_offset=20), simple=1, lineno=92, col_offset=0, end_lineno=94, end_col_offset=20), FunctionDef(name='_canonical_vector_payload', args=arguments(), body=[Expr(value=Constant(value='Return a well-formed vector payload used across tests.\n\n    Returns\n    -------\n    VectorPayload\n        List of vector records.\n    ', lineno=98, col_offset=4, end_lineno=104, end_col_offset=7), lineno=98, col_offset=4, end_lineno=104, end_col_offset=7), Return(value=List(elts=[Dict(keys=[Constant(value='key', lineno=106, col_offset=9, end_lineno=106, end_col_offset=14), Constant(value='vector', lineno=106, col_offset=25, end_lineno=106, end_col_offset=33)], values=[Constant(value='vec-1', lineno=106, col_offset=16, end_lineno=106, end_col_offset=23), List(elts=[Constant(value=0.1, lineno=106, col_offset=36, end_lineno=106, end_col_offset=39), Constant(value=0.2, lineno=106, col_offset=41, end_lineno=106, end_col_offset=44), Constant(value=0.3, lineno=106, col_offset=46, end_lineno=106, end_col_offset=49)], ctx=Load(), lineno=106, col_offset=35, end_lineno=106, end_col_offset=50)], lineno=106, col_offset=8, end_lineno=106, end_col_offset=51), Dict(keys=[Constant(value='key', lineno=107, col_offset=9, end_lineno=107, end_col_offset=14), Constant(value='vector', lineno=107, col_offset=25, end_lineno=107, end_col_offset=33)], values=[Constant(value='vec-2', lineno=107, col_offset=16, end_lineno=107, end_col_offset=23), List(elts=[Constant(value=0.4, lineno=107, col_offset=36, end_lineno=107, end_col_offset=39), Constant(value=0.5, lineno=107, col_offset=41, end_lineno=107, end_col_offset=44), Constant(value=0.6, lineno=107, col_offset=46, end_lineno=107, end_col_offset=49)], ctx=Load(), lineno=107, col_offset=35, end_lineno=107, end_col_offset=50)], lineno=107, col_offset=8, end_lineno=107, end_col_offset=51)], ctx=Load(), lineno=105, col_offset=11, end_lineno=108, end_col_offset=5), lineno=105, col_offset=4, end_lineno=108, end_col_offset=5)], returns=Name(id='VectorPayload', ctx=Load(), lineno=97, col_offset=35, end_lineno=97, end_col_offset=48), lineno=97, col_offset=0, end_lineno=108, end_col_offset=5), AnnAssign(target=Name(id='canonical_vector_payload', ctx=Store(), lineno=111, col_offset=0, end_lineno=111, end_col_offset=24), annotation=Subscript(value=Name(id='Callable', ctx=Load(), lineno=111, col_offset=26, end_lineno=111, end_col_offset=34), slice=Tuple(elts=[List(ctx=Load(), lineno=111, col_offset=35, end_lineno=111, end_col_offset=37), Name(id='VectorPayload', ctx=Load(), lineno=111, col_offset=39, end_lineno=111, end_col_offset=52)], ctx=Load(), lineno=111, col_offset=35, end_lineno=111, end_col_offset=52), ctx=Load(), lineno=111, col_offset=26, end_lineno=111, end_col_offset=53), value=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=111, col_offset=56, end_lineno=111, end_col_offset=62), attr='fixture', ctx=Load(), lineno=111, col_offset=56, end_lineno=111, end_col_offset=70), args=[Name(id='_canonical_vector_payload', ctx=Load(), lineno=111, col_offset=71, end_lineno=111, end_col_offset=96)], lineno=111, col_offset=56, end_lineno=111, end_col_offset=97), simple=1, lineno=111, col_offset=0, end_lineno=111, end_col_offset=97), FunctionDef(name='_inconsistent_dimension_payload', args=arguments(), body=[Expr(value=Constant(value='Return a payload containing a ragged vector for negative tests.\n\n    Returns\n    -------\n    VectorPayload\n        Payload with inconsistent vector dimensions.\n    ', lineno=115, col_offset=4, end_lineno=121, end_col_offset=7), lineno=115, col_offset=4, end_lineno=121, end_col_offset=7), Return(value=List(elts=[Dict(keys=[Constant(value='key', lineno=123, col_offset=9, end_lineno=123, end_col_offset=14), Constant(value='vector', lineno=123, col_offset=25, end_lineno=123, end_col_offset=33)], values=[Constant(value='vec-1', lineno=123, col_offset=16, end_lineno=123, end_col_offset=23), List(elts=[Constant(value=0.1, lineno=123, col_offset=36, end_lineno=123, end_col_offset=39), Constant(value=0.2, lineno=123, col_offset=41, end_lineno=123, end_col_offset=44), Constant(value=0.3, lineno=123, col_offset=46, end_lineno=123, end_col_offset=49)], ctx=Load(), lineno=123, col_offset=35, end_lineno=123, end_col_offset=50)], lineno=123, col_offset=8, end_lineno=123, end_col_offset=51), Dict(keys=[Constant(value='key', lineno=124, col_offset=9, end_lineno=124, end_col_offset=14), Constant(value='vector', lineno=124, col_offset=25, end_lineno=124, end_col_offset=33)], values=[Constant(value='vec-2', lineno=124, col_offset=16, end_lineno=124, end_col_offset=23), List(elts=[Constant(value=0.4, lineno=124, col_offset=36, end_lineno=124, end_col_offset=39), Constant(value=0.5, lineno=124, col_offset=41, end_lineno=124, end_col_offset=44)], ctx=Load(), lineno=124, col_offset=35, end_lineno=124, end_col_offset=45)], lineno=124, col_offset=8, end_lineno=124, end_col_offset=46)], ctx=Load(), lineno=122, col_offset=11, end_lineno=125, end_col_offset=5), lineno=122, col_offset=4, end_lineno=125, end_col_offset=5)], returns=Name(id='VectorPayload', ctx=Load(), lineno=114, col_offset=41, end_lineno=114, end_col_offset=54), lineno=114, col_offset=0, end_lineno=125, end_col_offset=5), AnnAssign(target=Name(id='inconsistent_dimension_payload', ctx=Store(), lineno=128, col_offset=0, end_lineno=128, end_col_offset=30), annotation=Subscript(value=Name(id='Callable', ctx=Load(), lineno=128, col_offset=32, end_lineno=128, end_col_offset=40), slice=Tuple(elts=[List(ctx=Load(), lineno=128, col_offset=41, end_lineno=128, end_col_offset=43), Name(id='VectorPayload', ctx=Load(), lineno=128, col_offset=45, end_lineno=128, end_col_offset=58)], ctx=Load(), lineno=128, col_offset=41, end_lineno=128, end_col_offset=58), ctx=Load(), lineno=128, col_offset=32, end_lineno=128, end_col_offset=59), value=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=128, col_offset=62, end_lineno=128, end_col_offset=68), attr='fixture', ctx=Load(), lineno=128, col_offset=62, end_lineno=128, end_col_offset=76), args=[Name(id='_inconsistent_dimension_payload', ctx=Load(), lineno=129, col_offset=4, end_lineno=129, end_col_offset=35)], lineno=128, col_offset=62, end_lineno=130, end_col_offset=1), simple=1, lineno=128, col_offset=0, end_lineno=130, end_col_offset=1), FunctionDef(name='_non_numeric_payload', args=arguments(), body=[Expr(value=Constant(value='Return a payload with non-numeric entries for validation failures.\n\n    Returns\n    -------\n    VectorPayload\n        Payload with invalid numeric values.\n    ', lineno=134, col_offset=4, end_lineno=140, end_col_offset=7), lineno=134, col_offset=4, end_lineno=140, end_col_offset=7), Return(value=List(elts=[Dict(keys=[Constant(value='key', lineno=142, col_offset=9, end_lineno=142, end_col_offset=14), Constant(value='vector', lineno=142, col_offset=25, end_lineno=142, end_col_offset=33)], values=[Constant(value='vec-1', lineno=142, col_offset=16, end_lineno=142, end_col_offset=23), List(elts=[Constant(value=0.1, lineno=142, col_offset=36, end_lineno=142, end_col_offset=39), Constant(value='oops', lineno=142, col_offset=41, end_lineno=142, end_col_offset=47), Constant(value=0.3, lineno=142, col_offset=49, end_lineno=142, end_col_offset=52)], ctx=Load(), lineno=142, col_offset=35, end_lineno=142, end_col_offset=53)], lineno=142, col_offset=8, end_lineno=142, end_col_offset=54)], ctx=Load(), lineno=141, col_offset=11, end_lineno=143, end_col_offset=5), lineno=141, col_offset=4, end_lineno=143, end_col_offset=5)], returns=Name(id='VectorPayload', ctx=Load(), lineno=133, col_offset=30, end_lineno=133, end_col_offset=43), lineno=133, col_offset=0, end_lineno=143, end_col_offset=5), AnnAssign(target=Name(id='non_numeric_payload', ctx=Store(), lineno=146, col_offset=0, end_lineno=146, end_col_offset=19), annotation=Subscript(value=Name(id='Callable', ctx=Load(), lineno=146, col_offset=21, end_lineno=146, end_col_offset=29), slice=Tuple(elts=[List(ctx=Load(), lineno=146, col_offset=30, end_lineno=146, end_col_offset=32), Name(id='VectorPayload', ctx=Load(), lineno=146, col_offset=34, end_lineno=146, end_col_offset=47)], ctx=Load(), lineno=146, col_offset=30, end_lineno=146, end_col_offset=47), ctx=Load(), lineno=146, col_offset=21, end_lineno=146, end_col_offset=48), value=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=146, col_offset=51, end_lineno=146, end_col_offset=57), attr='fixture', ctx=Load(), lineno=146, col_offset=51, end_lineno=146, end_col_offset=65), args=[Name(id='_non_numeric_payload', ctx=Load(), lineno=146, col_offset=66, end_lineno=146, end_col_offset=86)], lineno=146, col_offset=51, end_lineno=146, end_col_offset=87), simple=1, lineno=146, col_offset=0, end_lineno=146, end_col_offset=87), FunctionDef(name='_canonical_vector_matrix', args=arguments(args=[arg(arg='canonical_vector_payload', annotation=Name(id='VectorPayload', ctx=Load(), lineno=149, col_offset=55, end_lineno=149, end_col_offset=68), lineno=149, col_offset=29, end_lineno=149, end_col_offset=68)]), body=[Expr(value=Constant(value='Return a numpy matrix representation of the canonical payload.\n\n    Parameters\n    ----------\n    canonical_vector_payload : VectorPayload\n        Vector payload to convert.\n\n    Returns\n    -------\n    VectorMatrix\n        NumPy array matrix representation.\n    ', lineno=150, col_offset=4, end_lineno=161, end_col_offset=7), lineno=150, col_offset=4, end_lineno=161, end_col_offset=7), Assign(targets=[Name(id='vectors', ctx=Store(), lineno=162, col_offset=4, end_lineno=162, end_col_offset=11)], value=ListComp(elt=Call(func=Name(id='cast', ctx=Load(), lineno=162, col_offset=15, end_lineno=162, end_col_offset=19), args=[Constant(value='Sequence[float]', lineno=162, col_offset=20, end_lineno=162, end_col_offset=37), Subscript(value=Name(id='record', ctx=Load(), lineno=162, col_offset=39, end_lineno=162, end_col_offset=45), slice=Constant(value='vector', lineno=162, col_offset=46, end_lineno=162, end_col_offset=54), ctx=Load(), lineno=162, col_offset=39, end_lineno=162, end_col_offset=55)], lineno=162, col_offset=15, end_lineno=162, end_col_offset=56), generators=[comprehension(target=Name(id='record', ctx=Store(), lineno=162, col_offset=61, end_lineno=162, end_col_offset=67), iter=Name(id='canonical_vector_payload', ctx=Load(), lineno=162, col_offset=71, end_lineno=162, end_col_offset=95), is_async=0)], lineno=162, col_offset=14, end_lineno=162, end_col_offset=96), lineno=162, col_offset=4, end_lineno=162, end_col_offset=96), Return(value=Call(func=Attribute(value=Name(id='np', ctx=Load(), lineno=163, col_offset=11, end_lineno=163, end_col_offset=13), attr='asarray', ctx=Load(), lineno=163, col_offset=11, end_lineno=163, end_col_offset=21), args=[Name(id='vectors', ctx=Load(), lineno=163, col_offset=22, end_lineno=163, end_col_offset=29)], keywords=[keyword(arg='dtype', value=Attribute(value=Name(id='np', ctx=Load(), lineno=163, col_offset=37, end_lineno=163, end_col_offset=39), attr='float32', ctx=Load(), lineno=163, col_offset=37, end_lineno=163, end_col_offset=47), lineno=163, col_offset=31, end_lineno=163, end_col_offset=47)], lineno=163, col_offset=11, end_lineno=163, end_col_offset=48), lineno=163, col_offset=4, end_lineno=163, end_col_offset=48)], returns=Name(id='VectorMatrix', ctx=Load(), lineno=149, col_offset=73, end_lineno=149, end_col_offset=85), lineno=149, col_offset=0, end_lineno=163, end_col_offset=48), AnnAssign(target=Name(id='canonical_vector_matrix', ctx=Store(), lineno=166, col_offset=0, end_lineno=166, end_col_offset=23), annotation=Subscript(value=Name(id='Callable', ctx=Load(), lineno=166, col_offset=25, end_lineno=166, end_col_offset=33), slice=Tuple(elts=[List(elts=[Name(id='VectorPayload', ctx=Load(), lineno=166, col_offset=35, end_lineno=166, end_col_offset=48)], ctx=Load(), lineno=166, col_offset=34, end_lineno=166, end_col_offset=49), Name(id='VectorMatrix', ctx=Load(), lineno=166, col_offset=51, end_lineno=166, end_col_offset=63)], ctx=Load(), lineno=166, col_offset=34, end_lineno=166, end_col_offset=63), ctx=Load(), lineno=166, col_offset=25, end_lineno=166, end_col_offset=64), value=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=166, col_offset=67, end_lineno=166, end_col_offset=73), attr='fixture', ctx=Load(), lineno=166, col_offset=67, end_lineno=166, end_col_offset=81), args=[Name(id='_canonical_vector_matrix', ctx=Load(), lineno=167, col_offset=4, end_lineno=167, end_col_offset=28)], lineno=166, col_offset=67, end_lineno=168, end_col_offset=1), simple=1, lineno=166, col_offset=0, end_lineno=168, end_col_offset=1), AnnAssign(target=Name(id='_DETERMINISTIC_UUID', ctx=Store(), lineno=171, col_offset=0, end_lineno=171, end_col_offset=19), annotation=Subscript(value=Name(id='Final', ctx=Load(), lineno=171, col_offset=21, end_lineno=171, end_col_offset=26), slice=Name(id='UUID', ctx=Load(), lineno=171, col_offset=27, end_lineno=171, end_col_offset=31), ctx=Load(), lineno=171, col_offset=21, end_lineno=171, end_col_offset=32), value=Call(func=Name(id='UUID', ctx=Load(), lineno=171, col_offset=35, end_lineno=171, end_col_offset=39), args=[Constant(value='12345678-1234-5678-1234-567812345678', lineno=171, col_offset=40, end_lineno=171, end_col_offset=78)], lineno=171, col_offset=35, end_lineno=171, end_col_offset=79), simple=1, lineno=171, col_offset=0, end_lineno=171, end_col_offset=79), FunctionDef(name='_deterministic_uuid', args=arguments(), body=[Expr(value=Constant(value='Return a deterministic UUID for correlation ID tests.\n\n    Returns\n    -------\n    UUID\n        Fixed UUID value.\n    ', lineno=175, col_offset=4, end_lineno=181, end_col_offset=7), lineno=175, col_offset=4, end_lineno=181, end_col_offset=7), Return(value=Name(id='_DETERMINISTIC_UUID', ctx=Load(), lineno=182, col_offset=11, end_lineno=182, end_col_offset=30), lineno=182, col_offset=4, end_lineno=182, end_col_offset=30)], returns=Name(id='UUID', ctx=Load(), lineno=174, col_offset=29, end_lineno=174, end_col_offset=33), lineno=174, col_offset=0, end_lineno=182, end_col_offset=30), AnnAssign(target=Name(id='deterministic_uuid', ctx=Store(), lineno=185, col_offset=0, end_lineno=185, end_col_offset=18), annotation=Subscript(value=Name(id='Callable', ctx=Load(), lineno=185, col_offset=20, end_lineno=185, end_col_offset=28), slice=Tuple(elts=[List(ctx=Load(), lineno=185, col_offset=29, end_lineno=185, end_col_offset=31), Name(id='UUID', ctx=Load(), lineno=185, col_offset=33, end_lineno=185, end_col_offset=37)], ctx=Load(), lineno=185, col_offset=29, end_lineno=185, end_col_offset=37), ctx=Load(), lineno=185, col_offset=20, end_lineno=185, end_col_offset=38), value=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=185, col_offset=41, end_lineno=185, end_col_offset=47), attr='fixture', ctx=Load(), lineno=185, col_offset=41, end_lineno=185, end_col_offset=55), args=[Name(id='_deterministic_uuid', ctx=Load(), lineno=185, col_offset=56, end_lineno=185, end_col_offset=75)], lineno=185, col_offset=41, end_lineno=185, end_col_offset=76), simple=1, lineno=185, col_offset=0, end_lineno=185, end_col_offset=76), FunctionDef(name='_correlation_id_hex', args=arguments(args=[arg(arg='deterministic_uuid', annotation=Name(id='UUID', ctx=Load(), lineno=188, col_offset=44, end_lineno=188, end_col_offset=48), lineno=188, col_offset=24, end_lineno=188, end_col_offset=48)]), body=[Expr(value=Constant(value='Expose the hexadecimal correlation identifier used in tests.\n\n    Parameters\n    ----------\n    deterministic_uuid : UUID\n        UUID to convert.\n\n    Returns\n    -------\n    str\n        Hexadecimal string representation.\n    ', lineno=189, col_offset=4, end_lineno=200, end_col_offset=7), lineno=189, col_offset=4, end_lineno=200, end_col_offset=7), Return(value=Attribute(value=Name(id='deterministic_uuid', ctx=Load(), lineno=201, col_offset=11, end_lineno=201, end_col_offset=29), attr='hex', ctx=Load(), lineno=201, col_offset=11, end_lineno=201, end_col_offset=33), lineno=201, col_offset=4, end_lineno=201, end_col_offset=33)], returns=Name(id='str', ctx=Load(), lineno=188, col_offset=53, end_lineno=188, end_col_offset=56), lineno=188, col_offset=0, end_lineno=201, end_col_offset=33), AnnAssign(target=Name(id='correlation_id_hex', ctx=Store(), lineno=204, col_offset=0, end_lineno=204, end_col_offset=18), annotation=Subscript(value=Name(id='Callable', ctx=Load(), lineno=204, col_offset=20, end_lineno=204, end_col_offset=28), slice=Tuple(elts=[List(elts=[Name(id='UUID', ctx=Load(), lineno=204, col_offset=30, end_lineno=204, end_col_offset=34)], ctx=Load(), lineno=204, col_offset=29, end_lineno=204, end_col_offset=35), Name(id='str', ctx=Load(), lineno=204, col_offset=37, end_lineno=204, end_col_offset=40)], ctx=Load(), lineno=204, col_offset=29, end_lineno=204, end_col_offset=40), ctx=Load(), lineno=204, col_offset=20, end_lineno=204, end_col_offset=41), value=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=204, col_offset=44, end_lineno=204, end_col_offset=50), attr='fixture', ctx=Load(), lineno=204, col_offset=44, end_lineno=204, end_col_offset=58), args=[Name(id='_correlation_id_hex', ctx=Load(), lineno=204, col_offset=59, end_lineno=204, end_col_offset=78)], lineno=204, col_offset=44, end_lineno=204, end_col_offset=79), simple=1, lineno=204, col_offset=0, end_lineno=204, end_col_offset=79), FunctionDef(name='_deterministic_uuid_factory', args=arguments(args=[arg(arg='deterministic_uuid', annotation=Name(id='UUID', ctx=Load(), lineno=207, col_offset=52, end_lineno=207, end_col_offset=56), lineno=207, col_offset=32, end_lineno=207, end_col_offset=56)]), body=[Expr(value=Constant(value='Return a callable that mimics :func:`uuid.uuid4` deterministically.\n\n    Parameters\n    ----------\n    deterministic_uuid : UUID\n        UUID to return.\n\n    Returns\n    -------\n    Callable[[], UUID]\n        Factory function returning the deterministic UUID.\n    ', lineno=208, col_offset=4, end_lineno=219, end_col_offset=7), lineno=208, col_offset=4, end_lineno=219, end_col_offset=7), FunctionDef(name='_factory', args=arguments(), body=[Return(value=Name(id='deterministic_uuid', ctx=Load(), lineno=222, col_offset=15, end_lineno=222, end_col_offset=33), lineno=222, col_offset=8, end_lineno=222, end_col_offset=33)], returns=Name(id='UUID', ctx=Load(), lineno=221, col_offset=22, end_lineno=221, end_col_offset=26), lineno=221, col_offset=4, end_lineno=222, end_col_offset=33), Return(value=Name(id='_factory', ctx=Load(), lineno=224, col_offset=11, end_lineno=224, end_col_offset=19), lineno=224, col_offset=4, end_lineno=224, end_col_offset=19)], returns=Subscript(value=Name(id='Callable', ctx=Load(), lineno=207, col_offset=61, end_lineno=207, end_col_offset=69), slice=Tuple(elts=[List(ctx=Load(), lineno=207, col_offset=70, end_lineno=207, end_col_offset=72), Name(id='UUID', ctx=Load(), lineno=207, col_offset=74, end_lineno=207, end_col_offset=78)], ctx=Load(), lineno=207, col_offset=70, end_lineno=207, end_col_offset=78), ctx=Load(), lineno=207, col_offset=61, end_lineno=207, end_col_offset=79), lineno=207, col_offset=0, end_lineno=224, end_col_offset=19), AnnAssign(target=Name(id='deterministic_uuid_factory', ctx=Store(), lineno=227, col_offset=0, end_lineno=227, end_col_offset=26), annotation=Subscript(value=Name(id='Callable', ctx=Load(), lineno=227, col_offset=28, end_lineno=227, end_col_offset=36), slice=Tuple(elts=[List(elts=[Name(id='UUID', ctx=Load(), lineno=227, col_offset=38, end_lineno=227, end_col_offset=42)], ctx=Load(), lineno=227, col_offset=37, end_lineno=227, end_col_offset=43), Subscript(value=Name(id='Callable', ctx=Load(), lineno=227, col_offset=45, end_lineno=227, end_col_offset=53), slice=Tuple(elts=[List(ctx=Load(), lineno=227, col_offset=54, end_lineno=227, end_col_offset=56), Name(id='UUID', ctx=Load(), lineno=227, col_offset=58, end_lineno=227, end_col_offset=62)], ctx=Load(), lineno=227, col_offset=54, end_lineno=227, end_col_offset=62), ctx=Load(), lineno=227, col_offset=45, end_lineno=227, end_col_offset=63)], ctx=Load(), lineno=227, col_offset=37, end_lineno=227, end_col_offset=63), ctx=Load(), lineno=227, col_offset=28, end_lineno=227, end_col_offset=64), value=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=227, col_offset=67, end_lineno=227, end_col_offset=73), attr='fixture', ctx=Load(), lineno=227, col_offset=67, end_lineno=227, end_col_offset=81), args=[Name(id='_deterministic_uuid_factory', ctx=Load(), lineno=228, col_offset=4, end_lineno=228, end_col_offset=31)], lineno=227, col_offset=67, end_lineno=229, end_col_offset=1), simple=1, lineno=227, col_offset=0, end_lineno=229, end_col_offset=1)])
Module(body=[Expr(value=Constant(value="Checker ensuring type-only imports are guarded behind TYPE_CHECKING blocks.\n\nThis tool scans Python modules for unguarded imports used solely in type hints\nand reports violations. It helps enforce the typing gates contract across the\ncodebase, preventing regressions where heavy dependencies sneak into runtime\nexecution paths.\n\n## Design\n\n1. Parse each module's AST\n2. Identify imports (stdlib, third-party, internal)\n3. Detect TYPE_CHECKING guards and import scopes\n4. Flag imports inside TYPE_CHECKING as type-only (safe)\n5. Flag imports outside TYPE_CHECKING but used only in annotations as violations\n6. Report violations with file, line, and context\n\n## Rule: Type-only imports MUST be guarded\n\nA type-only import is one that appears only in:\n- Function/method annotations (parameters, return type)\n- Class annotations (base classes, attribute type hints)\n- Type alias definitions\n\nExamples of violations:\n\n    import numpy as np  # Used only in annotation below\n\n    def process(arr: np.ndarray) -> None:\n        pass\n\n    from fastapi import FastAPI  # Never instantiated at runtime\n\n    app: FastAPI = ...  # Used only as annotation\n\nCorrect patterns:\n\n    from typing import TYPE_CHECKING\n\n    if TYPE_CHECKING:\n        import numpy as np\n\n    def process(arr: np.ndarray) -> None:\n        pass\n\n## Usage\n\n    python -m tools.lint.check_typing_gates src/\n    python -m tools.lint.check_typing_gates --diff\n    python -m tools.lint.check_typing_gates --json src/ tools/\n    python -m tools.lint.check_typing_gates --list src/  # For codemod integration\n", lineno=1, col_offset=0, end_lineno=51, end_col_offset=3), lineno=1, col_offset=0, end_lineno=51, end_col_offset=3), ImportFrom(module='__future__', names=[alias(name='annotations', lineno=53, col_offset=23, end_lineno=53, end_col_offset=34)], level=0, lineno=53, col_offset=0, end_lineno=53, end_col_offset=34), Import(names=[alias(name='argparse', lineno=55, col_offset=7, end_lineno=55, end_col_offset=15)], lineno=55, col_offset=0, end_lineno=55, end_col_offset=15), Import(names=[alias(name='ast', lineno=56, col_offset=7, end_lineno=56, end_col_offset=10)], lineno=56, col_offset=0, end_lineno=56, end_col_offset=10), Import(names=[alias(name='json', lineno=57, col_offset=7, end_lineno=57, end_col_offset=11)], lineno=57, col_offset=0, end_lineno=57, end_col_offset=11), Import(names=[alias(name='sys', lineno=58, col_offset=7, end_lineno=58, end_col_offset=10)], lineno=58, col_offset=0, end_lineno=58, end_col_offset=10), ImportFrom(module='dataclasses', names=[alias(name='asdict', lineno=59, col_offset=24, end_lineno=59, end_col_offset=30), alias(name='dataclass', lineno=59, col_offset=32, end_lineno=59, end_col_offset=41)], level=0, lineno=59, col_offset=0, end_lineno=59, end_col_offset=41), ImportFrom(module='pathlib', names=[alias(name='Path', lineno=60, col_offset=20, end_lineno=60, end_col_offset=24)], level=0, lineno=60, col_offset=0, end_lineno=60, end_col_offset=24), ImportFrom(module='typing', names=[alias(name='TYPE_CHECKING', lineno=61, col_offset=19, end_lineno=61, end_col_offset=32), alias(name='cast', lineno=61, col_offset=34, end_lineno=61, end_col_offset=38)], level=0, lineno=61, col_offset=0, end_lineno=61, end_col_offset=38), If(test=Name(id='TYPE_CHECKING', ctx=Load(), lineno=63, col_offset=3, end_lineno=63, end_col_offset=16), body=[ImportFrom(module='collections.abc', names=[alias(name='Sequence', lineno=64, col_offset=32, end_lineno=64, end_col_offset=40)], level=0, lineno=64, col_offset=4, end_lineno=64, end_col_offset=40), ImportFrom(module='tools._shared.logging', names=[alias(name='LoggerAdapter', lineno=66, col_offset=38, end_lineno=66, end_col_offset=51)], level=0, lineno=66, col_offset=4, end_lineno=66, end_col_offset=51)], lineno=63, col_offset=0, end_lineno=66, end_col_offset=51), ImportFrom(module='tools._shared.logging', names=[alias(name='get_logger', lineno=68, col_offset=34, end_lineno=68, end_col_offset=44)], level=0, lineno=68, col_offset=0, end_lineno=68, end_col_offset=44), ClassDef(name='TypeGateViolation', body=[Expr(value=Constant(value='A type-only import that is not guarded by TYPE_CHECKING.', lineno=73, col_offset=4, end_lineno=73, end_col_offset=66), lineno=73, col_offset=4, end_lineno=73, end_col_offset=66), AnnAssign(target=Name(id='filepath', ctx=Store(), lineno=75, col_offset=4, end_lineno=75, end_col_offset=12), annotation=Name(id='str', ctx=Load(), lineno=75, col_offset=14, end_lineno=75, end_col_offset=17), simple=1, lineno=75, col_offset=4, end_lineno=75, end_col_offset=17), Expr(value=Constant(value='File path relative to cwd.', lineno=76, col_offset=4, end_lineno=76, end_col_offset=36), lineno=76, col_offset=4, end_lineno=76, end_col_offset=36), AnnAssign(target=Name(id='lineno', ctx=Store(), lineno=78, col_offset=4, end_lineno=78, end_col_offset=10), annotation=Name(id='int', ctx=Load(), lineno=78, col_offset=12, end_lineno=78, end_col_offset=15), simple=1, lineno=78, col_offset=4, end_lineno=78, end_col_offset=15), Expr(value=Constant(value='Line number of import.', lineno=79, col_offset=4, end_lineno=79, end_col_offset=32), lineno=79, col_offset=4, end_lineno=79, end_col_offset=32), AnnAssign(target=Name(id='module_name', ctx=Store(), lineno=81, col_offset=4, end_lineno=81, end_col_offset=15), annotation=Name(id='str', ctx=Load(), lineno=81, col_offset=17, end_lineno=81, end_col_offset=20), simple=1, lineno=81, col_offset=4, end_lineno=81, end_col_offset=20), Expr(value=Constant(value='Name of the imported module.', lineno=82, col_offset=4, end_lineno=82, end_col_offset=38), lineno=82, col_offset=4, end_lineno=82, end_col_offset=38), AnnAssign(target=Name(id='context', ctx=Store(), lineno=84, col_offset=4, end_lineno=84, end_col_offset=11), annotation=Name(id='str', ctx=Load(), lineno=84, col_offset=13, end_lineno=84, end_col_offset=16), simple=1, lineno=84, col_offset=4, end_lineno=84, end_col_offset=16), Expr(value=Constant(value='Brief description of violation.', lineno=85, col_offset=4, end_lineno=85, end_col_offset=41), lineno=85, col_offset=4, end_lineno=85, end_col_offset=41), AnnAssign(target=Name(id='violation_type', ctx=Store(), lineno=87, col_offset=4, end_lineno=87, end_col_offset=18), annotation=Name(id='str', ctx=Load(), lineno=87, col_offset=20, end_lineno=87, end_col_offset=23), simple=1, lineno=87, col_offset=4, end_lineno=87, end_col_offset=23), Expr(value=Constant(value="Type of violation: 'heavy_import', 'private_module', 'deprecated_shim'.", lineno=88, col_offset=4, end_lineno=88, end_col_offset=81), lineno=88, col_offset=4, end_lineno=88, end_col_offset=81), AnnAssign(target=Name(id='suggestion', ctx=Store(), lineno=90, col_offset=4, end_lineno=90, end_col_offset=14), annotation=Name(id='str', ctx=Load(), lineno=90, col_offset=16, end_lineno=90, end_col_offset=19), simple=1, lineno=90, col_offset=4, end_lineno=90, end_col_offset=19), Expr(value=Constant(value='Actionable fix guidance.', lineno=91, col_offset=4, end_lineno=91, end_col_offset=34), lineno=91, col_offset=4, end_lineno=91, end_col_offset=34)], decorator_list=[Call(func=Name(id='dataclass', ctx=Load(), lineno=71, col_offset=1, end_lineno=71, end_col_offset=10), keywords=[keyword(arg='frozen', value=Constant(value=True, lineno=71, col_offset=18, end_lineno=71, end_col_offset=22), lineno=71, col_offset=11, end_lineno=71, end_col_offset=22)], lineno=71, col_offset=1, end_lineno=71, end_col_offset=23)], lineno=72, col_offset=0, end_lineno=91, end_col_offset=34), ClassDef(name='TypeGateVisitor', bases=[Attribute(value=Name(id='ast', ctx=Load(), lineno=94, col_offset=22, end_lineno=94, end_col_offset=25), attr='NodeVisitor', ctx=Load(), lineno=94, col_offset=22, end_lineno=94, end_col_offset=37)], body=[Expr(value=Constant(value='AST visitor to detect unguarded type-only imports.\n\n    Parameters\n    ----------\n    filepath : Path\n        Path to the file being analyzed.\n    ', lineno=95, col_offset=4, end_lineno=101, end_col_offset=7), lineno=95, col_offset=4, end_lineno=101, end_col_offset=7), FunctionDef(name='__init__', args=arguments(args=[arg(arg='self', lineno=103, col_offset=17, end_lineno=103, end_col_offset=21), arg(arg='filepath', annotation=Name(id='Path', ctx=Load(), lineno=103, col_offset=33, end_lineno=103, end_col_offset=37), lineno=103, col_offset=23, end_lineno=103, end_col_offset=37)]), body=[Assign(targets=[Attribute(value=Name(id='self', ctx=Load(), lineno=104, col_offset=8, end_lineno=104, end_col_offset=12), attr='filepath', ctx=Store(), lineno=104, col_offset=8, end_lineno=104, end_col_offset=21)], value=Name(id='filepath', ctx=Load(), lineno=104, col_offset=24, end_lineno=104, end_col_offset=32), lineno=104, col_offset=8, end_lineno=104, end_col_offset=32), AnnAssign(target=Attribute(value=Name(id='self', ctx=Load(), lineno=105, col_offset=8, end_lineno=105, end_col_offset=12), attr='violations', ctx=Store(), lineno=105, col_offset=8, end_lineno=105, end_col_offset=23), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=105, col_offset=25, end_lineno=105, end_col_offset=29), slice=Name(id='TypeGateViolation', ctx=Load(), lineno=105, col_offset=30, end_lineno=105, end_col_offset=47), ctx=Load(), lineno=105, col_offset=25, end_lineno=105, end_col_offset=48), value=List(ctx=Load(), lineno=105, col_offset=51, end_lineno=105, end_col_offset=53), simple=0, lineno=105, col_offset=8, end_lineno=105, end_col_offset=53), Assign(targets=[Attribute(value=Name(id='self', ctx=Load(), lineno=106, col_offset=8, end_lineno=106, end_col_offset=12), attr='in_type_checking_block', ctx=Store(), lineno=106, col_offset=8, end_lineno=106, end_col_offset=35)], value=Constant(value=False, lineno=106, col_offset=38, end_lineno=106, end_col_offset=43), lineno=106, col_offset=8, end_lineno=106, end_col_offset=43), Assign(targets=[Attribute(value=Name(id='self', ctx=Load(), lineno=107, col_offset=8, end_lineno=107, end_col_offset=12), attr='type_checking_depth', ctx=Store(), lineno=107, col_offset=8, end_lineno=107, end_col_offset=32)], value=Constant(value=0, lineno=107, col_offset=35, end_lineno=107, end_col_offset=36), lineno=107, col_offset=8, end_lineno=107, end_col_offset=36)], returns=Constant(value=None, lineno=103, col_offset=42, end_lineno=103, end_col_offset=46), lineno=103, col_offset=4, end_lineno=107, end_col_offset=36), FunctionDef(name='visit_If', args=arguments(args=[arg(arg='self', lineno=109, col_offset=17, end_lineno=109, end_col_offset=21), arg(arg='node', annotation=Attribute(value=Name(id='ast', ctx=Load(), lineno=109, col_offset=29, end_lineno=109, end_col_offset=32), attr='If', ctx=Load(), lineno=109, col_offset=29, end_lineno=109, end_col_offset=35), lineno=109, col_offset=23, end_lineno=109, end_col_offset=35)]), body=[Expr(value=Constant(value='Track entry/exit of TYPE_CHECKING blocks.', lineno=110, col_offset=8, end_lineno=110, end_col_offset=55), lineno=110, col_offset=8, end_lineno=110, end_col_offset=55), If(test=Call(func=Attribute(value=Name(id='self', ctx=Load(), lineno=112, col_offset=11, end_lineno=112, end_col_offset=15), attr='_is_type_checking_guard', ctx=Load(), lineno=112, col_offset=11, end_lineno=112, end_col_offset=39), args=[Name(id='node', ctx=Load(), lineno=112, col_offset=40, end_lineno=112, end_col_offset=44)], lineno=112, col_offset=11, end_lineno=112, end_col_offset=45), body=[Assign(targets=[Attribute(value=Name(id='self', ctx=Load(), lineno=113, col_offset=12, end_lineno=113, end_col_offset=16), attr='in_type_checking_block', ctx=Store(), lineno=113, col_offset=12, end_lineno=113, end_col_offset=39)], value=Constant(value=True, lineno=113, col_offset=42, end_lineno=113, end_col_offset=46), lineno=113, col_offset=12, end_lineno=113, end_col_offset=46), AugAssign(target=Attribute(value=Name(id='self', ctx=Load(), lineno=114, col_offset=12, end_lineno=114, end_col_offset=16), attr='type_checking_depth', ctx=Store(), lineno=114, col_offset=12, end_lineno=114, end_col_offset=36), op=Add(), value=Constant(value=1, lineno=114, col_offset=40, end_lineno=114, end_col_offset=41), lineno=114, col_offset=12, end_lineno=114, end_col_offset=41), Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load(), lineno=115, col_offset=12, end_lineno=115, end_col_offset=16), attr='generic_visit', ctx=Load(), lineno=115, col_offset=12, end_lineno=115, end_col_offset=30), args=[Name(id='node', ctx=Load(), lineno=115, col_offset=31, end_lineno=115, end_col_offset=35)], lineno=115, col_offset=12, end_lineno=115, end_col_offset=36), lineno=115, col_offset=12, end_lineno=115, end_col_offset=36), AugAssign(target=Attribute(value=Name(id='self', ctx=Load(), lineno=116, col_offset=12, end_lineno=116, end_col_offset=16), attr='type_checking_depth', ctx=Store(), lineno=116, col_offset=12, end_lineno=116, end_col_offset=36), op=Sub(), value=Constant(value=1, lineno=116, col_offset=40, end_lineno=116, end_col_offset=41), lineno=116, col_offset=12, end_lineno=116, end_col_offset=41), Assign(targets=[Attribute(value=Name(id='self', ctx=Load(), lineno=117, col_offset=12, end_lineno=117, end_col_offset=16), attr='in_type_checking_block', ctx=Store(), lineno=117, col_offset=12, end_lineno=117, end_col_offset=39)], value=Compare(left=Attribute(value=Name(id='self', ctx=Load(), lineno=117, col_offset=42, end_lineno=117, end_col_offset=46), attr='type_checking_depth', ctx=Load(), lineno=117, col_offset=42, end_lineno=117, end_col_offset=66), ops=[Gt()], comparators=[Constant(value=0, lineno=117, col_offset=69, end_lineno=117, end_col_offset=70)], lineno=117, col_offset=42, end_lineno=117, end_col_offset=70), lineno=117, col_offset=12, end_lineno=117, end_col_offset=70)], orelse=[Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load(), lineno=119, col_offset=12, end_lineno=119, end_col_offset=16), attr='generic_visit', ctx=Load(), lineno=119, col_offset=12, end_lineno=119, end_col_offset=30), args=[Name(id='node', ctx=Load(), lineno=119, col_offset=31, end_lineno=119, end_col_offset=35)], lineno=119, col_offset=12, end_lineno=119, end_col_offset=36), lineno=119, col_offset=12, end_lineno=119, end_col_offset=36)], lineno=112, col_offset=8, end_lineno=119, end_col_offset=36)], returns=Constant(value=None, lineno=109, col_offset=40, end_lineno=109, end_col_offset=44), lineno=109, col_offset=4, end_lineno=119, end_col_offset=36), FunctionDef(name='visit_ImportFrom', args=arguments(args=[arg(arg='self', lineno=121, col_offset=25, end_lineno=121, end_col_offset=29), arg(arg='node', annotation=Attribute(value=Name(id='ast', ctx=Load(), lineno=121, col_offset=37, end_lineno=121, end_col_offset=40), attr='ImportFrom', ctx=Load(), lineno=121, col_offset=37, end_lineno=121, end_col_offset=51), lineno=121, col_offset=31, end_lineno=121, end_col_offset=51)]), body=[Expr(value=Constant(value='Record imports and their context.', lineno=122, col_offset=8, end_lineno=122, end_col_offset=47), lineno=122, col_offset=8, end_lineno=122, end_col_offset=47), If(test=Attribute(value=Name(id='self', ctx=Load(), lineno=124, col_offset=11, end_lineno=124, end_col_offset=15), attr='in_type_checking_block', ctx=Load(), lineno=124, col_offset=11, end_lineno=124, end_col_offset=38), body=[Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load(), lineno=125, col_offset=12, end_lineno=125, end_col_offset=16), attr='generic_visit', ctx=Load(), lineno=125, col_offset=12, end_lineno=125, end_col_offset=30), args=[Name(id='node', ctx=Load(), lineno=125, col_offset=31, end_lineno=125, end_col_offset=35)], lineno=125, col_offset=12, end_lineno=125, end_col_offset=36), lineno=125, col_offset=12, end_lineno=125, end_col_offset=36), Return(lineno=126, col_offset=12, end_lineno=126, end_col_offset=18)], lineno=124, col_offset=8, end_lineno=126, end_col_offset=18), If(test=Compare(left=Attribute(value=Name(id='node', ctx=Load(), lineno=128, col_offset=11, end_lineno=128, end_col_offset=15), attr='module', ctx=Load(), lineno=128, col_offset=11, end_lineno=128, end_col_offset=22), ops=[Is()], comparators=[Constant(value=None, lineno=128, col_offset=26, end_lineno=128, end_col_offset=30)], lineno=128, col_offset=11, end_lineno=128, end_col_offset=30), body=[Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load(), lineno=129, col_offset=12, end_lineno=129, end_col_offset=16), attr='generic_visit', ctx=Load(), lineno=129, col_offset=12, end_lineno=129, end_col_offset=30), args=[Name(id='node', ctx=Load(), lineno=129, col_offset=31, end_lineno=129, end_col_offset=35)], lineno=129, col_offset=12, end_lineno=129, end_col_offset=36), lineno=129, col_offset=12, end_lineno=129, end_col_offset=36), Return(lineno=130, col_offset=12, end_lineno=130, end_col_offset=18)], lineno=128, col_offset=8, end_lineno=130, end_col_offset=18), If(test=BoolOp(op=Or(), values=[Call(func=Attribute(value=Attribute(value=Name(id='node', ctx=Load(), lineno=133, col_offset=11, end_lineno=133, end_col_offset=15), attr='module', ctx=Load(), lineno=133, col_offset=11, end_lineno=133, end_col_offset=22), attr='startswith', ctx=Load(), lineno=133, col_offset=11, end_lineno=133, end_col_offset=33), args=[Constant(value='docs._types', lineno=133, col_offset=34, end_lineno=133, end_col_offset=47)], lineno=133, col_offset=11, end_lineno=133, end_col_offset=48), Call(func=Attribute(value=Attribute(value=Name(id='node', ctx=Load(), lineno=133, col_offset=52, end_lineno=133, end_col_offset=56), attr='module', ctx=Load(), lineno=133, col_offset=52, end_lineno=133, end_col_offset=63), attr='startswith', ctx=Load(), lineno=133, col_offset=52, end_lineno=133, end_col_offset=74), args=[Constant(value='docs._cache', lineno=133, col_offset=75, end_lineno=133, end_col_offset=88)], lineno=133, col_offset=52, end_lineno=133, end_col_offset=89)], lineno=133, col_offset=11, end_lineno=133, end_col_offset=89), body=[Assign(targets=[Name(id='suggestion', ctx=Store(), lineno=134, col_offset=12, end_lineno=134, end_col_offset=22)], value=Call(func=Attribute(value=Name(id='self', ctx=Load(), lineno=134, col_offset=25, end_lineno=134, end_col_offset=29), attr='_suggest_private_module_fix', ctx=Load(), lineno=134, col_offset=25, end_lineno=134, end_col_offset=57), args=[Attribute(value=Name(id='node', ctx=Load(), lineno=134, col_offset=58, end_lineno=134, end_col_offset=62), attr='module', ctx=Load(), lineno=134, col_offset=58, end_lineno=134, end_col_offset=69)], lineno=134, col_offset=25, end_lineno=134, end_col_offset=70), lineno=134, col_offset=12, end_lineno=134, end_col_offset=70), Assign(targets=[Name(id='violation', ctx=Store(), lineno=135, col_offset=12, end_lineno=135, end_col_offset=21)], value=Call(func=Name(id='TypeGateViolation', ctx=Load(), lineno=135, col_offset=24, end_lineno=135, end_col_offset=41), keywords=[keyword(arg='filepath', value=Call(func=Name(id='str', ctx=Load(), lineno=136, col_offset=25, end_lineno=136, end_col_offset=28), args=[Attribute(value=Name(id='self', ctx=Load(), lineno=136, col_offset=29, end_lineno=136, end_col_offset=33), attr='filepath', ctx=Load(), lineno=136, col_offset=29, end_lineno=136, end_col_offset=42)], lineno=136, col_offset=25, end_lineno=136, end_col_offset=43), lineno=136, col_offset=16, end_lineno=136, end_col_offset=43), keyword(arg='lineno', value=Attribute(value=Name(id='node', ctx=Load(), lineno=137, col_offset=23, end_lineno=137, end_col_offset=27), attr='lineno', ctx=Load(), lineno=137, col_offset=23, end_lineno=137, end_col_offset=34), lineno=137, col_offset=16, end_lineno=137, end_col_offset=34), keyword(arg='module_name', value=Attribute(value=Name(id='node', ctx=Load(), lineno=138, col_offset=28, end_lineno=138, end_col_offset=32), attr='module', ctx=Load(), lineno=138, col_offset=28, end_lineno=138, end_col_offset=39), lineno=138, col_offset=16, end_lineno=138, end_col_offset=39), keyword(arg='context', value=JoinedStr(values=[Constant(value='Private module import: ', lineno=139, col_offset=26, end_lineno=139, end_col_offset=49), FormattedValue(value=Attribute(value=Name(id='node', ctx=Load(), lineno=139, col_offset=50, end_lineno=139, end_col_offset=54), attr='module', ctx=Load(), lineno=139, col_offset=50, end_lineno=139, end_col_offset=61), conversion=-1, lineno=139, col_offset=49, end_lineno=139, end_col_offset=62)], lineno=139, col_offset=24, end_lineno=139, end_col_offset=63), lineno=139, col_offset=16, end_lineno=139, end_col_offset=63), keyword(arg='violation_type', value=Constant(value='private_module', lineno=140, col_offset=31, end_lineno=140, end_col_offset=47), lineno=140, col_offset=16, end_lineno=140, end_col_offset=47), keyword(arg='suggestion', value=Name(id='suggestion', ctx=Load(), lineno=141, col_offset=27, end_lineno=141, end_col_offset=37), lineno=141, col_offset=16, end_lineno=141, end_col_offset=37)], lineno=135, col_offset=24, end_lineno=142, end_col_offset=13), lineno=135, col_offset=12, end_lineno=142, end_col_offset=13), Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='self', ctx=Load(), lineno=143, col_offset=12, end_lineno=143, end_col_offset=16), attr='violations', ctx=Load(), lineno=143, col_offset=12, end_lineno=143, end_col_offset=27), attr='append', ctx=Load(), lineno=143, col_offset=12, end_lineno=143, end_col_offset=34), args=[Name(id='violation', ctx=Load(), lineno=143, col_offset=35, end_lineno=143, end_col_offset=44)], lineno=143, col_offset=12, end_lineno=143, end_col_offset=45), lineno=143, col_offset=12, end_lineno=143, end_col_offset=45), Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load(), lineno=144, col_offset=12, end_lineno=144, end_col_offset=16), attr='generic_visit', ctx=Load(), lineno=144, col_offset=12, end_lineno=144, end_col_offset=30), args=[Name(id='node', ctx=Load(), lineno=144, col_offset=31, end_lineno=144, end_col_offset=35)], lineno=144, col_offset=12, end_lineno=144, end_col_offset=36), lineno=144, col_offset=12, end_lineno=144, end_col_offset=36), Return(lineno=145, col_offset=12, end_lineno=145, end_col_offset=18)], lineno=133, col_offset=8, end_lineno=145, end_col_offset=18), If(test=Compare(left=Attribute(value=Name(id='node', ctx=Load(), lineno=148, col_offset=11, end_lineno=148, end_col_offset=15), attr='module', ctx=Load(), lineno=148, col_offset=11, end_lineno=148, end_col_offset=22), ops=[Eq()], comparators=[Constant(value='kgfoundry_common.typing', lineno=148, col_offset=26, end_lineno=148, end_col_offset=51)], lineno=148, col_offset=11, end_lineno=148, end_col_offset=51), body=[For(target=Name(id='alias', ctx=Store(), lineno=149, col_offset=16, end_lineno=149, end_col_offset=21), iter=Attribute(value=Name(id='node', ctx=Load(), lineno=149, col_offset=25, end_lineno=149, end_col_offset=29), attr='names', ctx=Load(), lineno=149, col_offset=25, end_lineno=149, end_col_offset=35), body=[If(test=Compare(left=Attribute(value=Name(id='alias', ctx=Load(), lineno=150, col_offset=19, end_lineno=150, end_col_offset=24), attr='name', ctx=Load(), lineno=150, col_offset=19, end_lineno=150, end_col_offset=29), ops=[In()], comparators=[Set(elts=[Constant(value='resolve_numpy', lineno=150, col_offset=34, end_lineno=150, end_col_offset=49), Constant(value='resolve_fastapi', lineno=150, col_offset=51, end_lineno=150, end_col_offset=68), Constant(value='resolve_faiss', lineno=150, col_offset=70, end_lineno=150, end_col_offset=85)], lineno=150, col_offset=33, end_lineno=150, end_col_offset=86)], lineno=150, col_offset=19, end_lineno=150, end_col_offset=86), body=[Assign(targets=[Name(id='suggestion', ctx=Store(), lineno=151, col_offset=20, end_lineno=151, end_col_offset=30)], value=Call(func=Attribute(value=Name(id='self', ctx=Load(), lineno=151, col_offset=33, end_lineno=151, end_col_offset=37), attr='_suggest_shim_fix', ctx=Load(), lineno=151, col_offset=33, end_lineno=151, end_col_offset=55), args=[Attribute(value=Name(id='alias', ctx=Load(), lineno=151, col_offset=56, end_lineno=151, end_col_offset=61), attr='name', ctx=Load(), lineno=151, col_offset=56, end_lineno=151, end_col_offset=66)], lineno=151, col_offset=33, end_lineno=151, end_col_offset=67), lineno=151, col_offset=20, end_lineno=151, end_col_offset=67), Assign(targets=[Name(id='violation', ctx=Store(), lineno=152, col_offset=20, end_lineno=152, end_col_offset=29)], value=Call(func=Name(id='TypeGateViolation', ctx=Load(), lineno=152, col_offset=32, end_lineno=152, end_col_offset=49), keywords=[keyword(arg='filepath', value=Call(func=Name(id='str', ctx=Load(), lineno=153, col_offset=33, end_lineno=153, end_col_offset=36), args=[Attribute(value=Name(id='self', ctx=Load(), lineno=153, col_offset=37, end_lineno=153, end_col_offset=41), attr='filepath', ctx=Load(), lineno=153, col_offset=37, end_lineno=153, end_col_offset=50)], lineno=153, col_offset=33, end_lineno=153, end_col_offset=51), lineno=153, col_offset=24, end_lineno=153, end_col_offset=51), keyword(arg='lineno', value=Attribute(value=Name(id='node', ctx=Load(), lineno=154, col_offset=31, end_lineno=154, end_col_offset=35), attr='lineno', ctx=Load(), lineno=154, col_offset=31, end_lineno=154, end_col_offset=42), lineno=154, col_offset=24, end_lineno=154, end_col_offset=42), keyword(arg='module_name', value=JoinedStr(values=[Constant(value='kgfoundry_common.typing.', lineno=155, col_offset=38, end_lineno=155, end_col_offset=62), FormattedValue(value=Attribute(value=Name(id='alias', ctx=Load(), lineno=155, col_offset=63, end_lineno=155, end_col_offset=68), attr='name', ctx=Load(), lineno=155, col_offset=63, end_lineno=155, end_col_offset=73), conversion=-1, lineno=155, col_offset=62, end_lineno=155, end_col_offset=74)], lineno=155, col_offset=36, end_lineno=155, end_col_offset=75), lineno=155, col_offset=24, end_lineno=155, end_col_offset=75), keyword(arg='context', value=JoinedStr(values=[Constant(value='Deprecated shim: ', lineno=156, col_offset=34, end_lineno=156, end_col_offset=51), FormattedValue(value=Attribute(value=Name(id='alias', ctx=Load(), lineno=156, col_offset=52, end_lineno=156, end_col_offset=57), attr='name', ctx=Load(), lineno=156, col_offset=52, end_lineno=156, end_col_offset=62), conversion=-1, lineno=156, col_offset=51, end_lineno=156, end_col_offset=63), Constant(value='()', lineno=156, col_offset=63, end_lineno=156, end_col_offset=65)], lineno=156, col_offset=32, end_lineno=156, end_col_offset=66), lineno=156, col_offset=24, end_lineno=156, end_col_offset=66), keyword(arg='violation_type', value=Constant(value='deprecated_shim', lineno=157, col_offset=39, end_lineno=157, end_col_offset=56), lineno=157, col_offset=24, end_lineno=157, end_col_offset=56), keyword(arg='suggestion', value=Name(id='suggestion', ctx=Load(), lineno=158, col_offset=35, end_lineno=158, end_col_offset=45), lineno=158, col_offset=24, end_lineno=158, end_col_offset=45)], lineno=152, col_offset=32, end_lineno=159, end_col_offset=21), lineno=152, col_offset=20, end_lineno=159, end_col_offset=21), Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='self', ctx=Load(), lineno=160, col_offset=20, end_lineno=160, end_col_offset=24), attr='violations', ctx=Load(), lineno=160, col_offset=20, end_lineno=160, end_col_offset=35), attr='append', ctx=Load(), lineno=160, col_offset=20, end_lineno=160, end_col_offset=42), args=[Name(id='violation', ctx=Load(), lineno=160, col_offset=43, end_lineno=160, end_col_offset=52)], lineno=160, col_offset=20, end_lineno=160, end_col_offset=53), lineno=160, col_offset=20, end_lineno=160, end_col_offset=53)], lineno=150, col_offset=16, end_lineno=160, end_col_offset=53)], lineno=149, col_offset=12, end_lineno=160, end_col_offset=53)], lineno=148, col_offset=8, end_lineno=160, end_col_offset=53), Assign(targets=[Name(id='heavy_modules', ctx=Store(), lineno=163, col_offset=8, end_lineno=163, end_col_offset=21)], value=Set(elts=[Constant(value='numpy', lineno=164, col_offset=12, end_lineno=164, end_col_offset=19), Constant(value='fastapi', lineno=165, col_offset=12, end_lineno=165, end_col_offset=21), Constant(value='faiss', lineno=166, col_offset=12, end_lineno=166, end_col_offset=19), Constant(value='torch', lineno=167, col_offset=12, end_lineno=167, end_col_offset=19), Constant(value='tensorflow', lineno=168, col_offset=12, end_lineno=168, end_col_offset=24), Constant(value='pandas', lineno=169, col_offset=12, end_lineno=169, end_col_offset=20), Constant(value='sklearn', lineno=170, col_offset=12, end_lineno=170, end_col_offset=21), Constant(value='pydantic', lineno=171, col_offset=12, end_lineno=171, end_col_offset=22), Constant(value='sqlalchemy', lineno=172, col_offset=12, end_lineno=172, end_col_offset=24)], lineno=163, col_offset=24, end_lineno=173, end_col_offset=9), lineno=163, col_offset=8, end_lineno=173, end_col_offset=9), Assign(targets=[Name(id='module_root', ctx=Store(), lineno=175, col_offset=8, end_lineno=175, end_col_offset=19)], value=Subscript(value=Call(func=Attribute(value=Attribute(value=Name(id='node', ctx=Load(), lineno=175, col_offset=22, end_lineno=175, end_col_offset=26), attr='module', ctx=Load(), lineno=175, col_offset=22, end_lineno=175, end_col_offset=33), attr='split', ctx=Load(), lineno=175, col_offset=22, end_lineno=175, end_col_offset=39), args=[Constant(value='.', lineno=175, col_offset=40, end_lineno=175, end_col_offset=43)], lineno=175, col_offset=22, end_lineno=175, end_col_offset=44), slice=Constant(value=0, lineno=175, col_offset=45, end_lineno=175, end_col_offset=46), ctx=Load(), lineno=175, col_offset=22, end_lineno=175, end_col_offset=47), lineno=175, col_offset=8, end_lineno=175, end_col_offset=47), If(test=Compare(left=Name(id='module_root', ctx=Load(), lineno=177, col_offset=11, end_lineno=177, end_col_offset=22), ops=[In()], comparators=[Name(id='heavy_modules', ctx=Load(), lineno=177, col_offset=26, end_lineno=177, end_col_offset=39)], lineno=177, col_offset=11, end_lineno=177, end_col_offset=39), body=[Assign(targets=[Name(id='suggestion', ctx=Store(), lineno=178, col_offset=12, end_lineno=178, end_col_offset=22)], value=Call(func=Attribute(value=Name(id='self', ctx=Load(), lineno=178, col_offset=25, end_lineno=178, end_col_offset=29), attr='_suggest_heavy_import_fix', ctx=Load(), lineno=178, col_offset=25, end_lineno=178, end_col_offset=55), args=[Attribute(value=Name(id='node', ctx=Load(), lineno=178, col_offset=56, end_lineno=178, end_col_offset=60), attr='module', ctx=Load(), lineno=178, col_offset=56, end_lineno=178, end_col_offset=67)], lineno=178, col_offset=25, end_lineno=178, end_col_offset=68), lineno=178, col_offset=12, end_lineno=178, end_col_offset=68), Assign(targets=[Name(id='context', ctx=Store(), lineno=179, col_offset=12, end_lineno=179, end_col_offset=19)], value=JoinedStr(values=[Constant(value='Potentially type-only import from ', lineno=179, col_offset=24, end_lineno=179, end_col_offset=58), FormattedValue(value=Attribute(value=Name(id='node', ctx=Load(), lineno=179, col_offset=59, end_lineno=179, end_col_offset=63), attr='module', ctx=Load(), lineno=179, col_offset=59, end_lineno=179, end_col_offset=70), conversion=-1, lineno=179, col_offset=58, end_lineno=179, end_col_offset=71)], lineno=179, col_offset=22, end_lineno=179, end_col_offset=72), lineno=179, col_offset=12, end_lineno=179, end_col_offset=72), Assign(targets=[Name(id='violation', ctx=Store(), lineno=180, col_offset=12, end_lineno=180, end_col_offset=21)], value=Call(func=Name(id='TypeGateViolation', ctx=Load(), lineno=180, col_offset=24, end_lineno=180, end_col_offset=41), keywords=[keyword(arg='filepath', value=Call(func=Name(id='str', ctx=Load(), lineno=181, col_offset=25, end_lineno=181, end_col_offset=28), args=[Attribute(value=Name(id='self', ctx=Load(), lineno=181, col_offset=29, end_lineno=181, end_col_offset=33), attr='filepath', ctx=Load(), lineno=181, col_offset=29, end_lineno=181, end_col_offset=42)], lineno=181, col_offset=25, end_lineno=181, end_col_offset=43), lineno=181, col_offset=16, end_lineno=181, end_col_offset=43), keyword(arg='lineno', value=Attribute(value=Name(id='node', ctx=Load(), lineno=182, col_offset=23, end_lineno=182, end_col_offset=27), attr='lineno', ctx=Load(), lineno=182, col_offset=23, end_lineno=182, end_col_offset=34), lineno=182, col_offset=16, end_lineno=182, end_col_offset=34), keyword(arg='module_name', value=Attribute(value=Name(id='node', ctx=Load(), lineno=183, col_offset=28, end_lineno=183, end_col_offset=32), attr='module', ctx=Load(), lineno=183, col_offset=28, end_lineno=183, end_col_offset=39), lineno=183, col_offset=16, end_lineno=183, end_col_offset=39), keyword(arg='context', value=Name(id='context', ctx=Load(), lineno=184, col_offset=24, end_lineno=184, end_col_offset=31), lineno=184, col_offset=16, end_lineno=184, end_col_offset=31), keyword(arg='violation_type', value=Constant(value='heavy_import', lineno=185, col_offset=31, end_lineno=185, end_col_offset=45), lineno=185, col_offset=16, end_lineno=185, end_col_offset=45), keyword(arg='suggestion', value=Name(id='suggestion', ctx=Load(), lineno=186, col_offset=27, end_lineno=186, end_col_offset=37), lineno=186, col_offset=16, end_lineno=186, end_col_offset=37)], lineno=180, col_offset=24, end_lineno=187, end_col_offset=13), lineno=180, col_offset=12, end_lineno=187, end_col_offset=13), Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='self', ctx=Load(), lineno=188, col_offset=12, end_lineno=188, end_col_offset=16), attr='violations', ctx=Load(), lineno=188, col_offset=12, end_lineno=188, end_col_offset=27), attr='append', ctx=Load(), lineno=188, col_offset=12, end_lineno=188, end_col_offset=34), args=[Name(id='violation', ctx=Load(), lineno=188, col_offset=35, end_lineno=188, end_col_offset=44)], lineno=188, col_offset=12, end_lineno=188, end_col_offset=45), lineno=188, col_offset=12, end_lineno=188, end_col_offset=45)], lineno=177, col_offset=8, end_lineno=188, end_col_offset=45), Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load(), lineno=190, col_offset=8, end_lineno=190, end_col_offset=12), attr='generic_visit', ctx=Load(), lineno=190, col_offset=8, end_lineno=190, end_col_offset=26), args=[Name(id='node', ctx=Load(), lineno=190, col_offset=27, end_lineno=190, end_col_offset=31)], lineno=190, col_offset=8, end_lineno=190, end_col_offset=32), lineno=190, col_offset=8, end_lineno=190, end_col_offset=32)], returns=Constant(value=None, lineno=121, col_offset=56, end_lineno=121, end_col_offset=60), lineno=121, col_offset=4, end_lineno=190, end_col_offset=32), FunctionDef(name='visit_Import', args=arguments(args=[arg(arg='self', lineno=192, col_offset=21, end_lineno=192, end_col_offset=25), arg(arg='node', annotation=Attribute(value=Name(id='ast', ctx=Load(), lineno=192, col_offset=33, end_lineno=192, end_col_offset=36), attr='Import', ctx=Load(), lineno=192, col_offset=33, end_lineno=192, end_col_offset=43), lineno=192, col_offset=27, end_lineno=192, end_col_offset=43)]), body=[Expr(value=Constant(value='Record direct imports.', lineno=193, col_offset=8, end_lineno=193, end_col_offset=36), lineno=193, col_offset=8, end_lineno=193, end_col_offset=36), If(test=Attribute(value=Name(id='self', ctx=Load(), lineno=195, col_offset=11, end_lineno=195, end_col_offset=15), attr='in_type_checking_block', ctx=Load(), lineno=195, col_offset=11, end_lineno=195, end_col_offset=38), body=[Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load(), lineno=196, col_offset=12, end_lineno=196, end_col_offset=16), attr='generic_visit', ctx=Load(), lineno=196, col_offset=12, end_lineno=196, end_col_offset=30), args=[Name(id='node', ctx=Load(), lineno=196, col_offset=31, end_lineno=196, end_col_offset=35)], lineno=196, col_offset=12, end_lineno=196, end_col_offset=36), lineno=196, col_offset=12, end_lineno=196, end_col_offset=36), Return(lineno=197, col_offset=12, end_lineno=197, end_col_offset=18)], lineno=195, col_offset=8, end_lineno=197, end_col_offset=18), Assign(targets=[Name(id='heavy_modules', ctx=Store(), lineno=199, col_offset=8, end_lineno=199, end_col_offset=21)], value=Set(elts=[Constant(value='numpy', lineno=200, col_offset=12, end_lineno=200, end_col_offset=19), Constant(value='fastapi', lineno=201, col_offset=12, end_lineno=201, end_col_offset=21), Constant(value='faiss', lineno=202, col_offset=12, end_lineno=202, end_col_offset=19), Constant(value='torch', lineno=203, col_offset=12, end_lineno=203, end_col_offset=19), Constant(value='tensorflow', lineno=204, col_offset=12, end_lineno=204, end_col_offset=24), Constant(value='pandas', lineno=205, col_offset=12, end_lineno=205, end_col_offset=20), Constant(value='sklearn', lineno=206, col_offset=12, end_lineno=206, end_col_offset=21), Constant(value='pydantic', lineno=207, col_offset=12, end_lineno=207, end_col_offset=22), Constant(value='sqlalchemy', lineno=208, col_offset=12, end_lineno=208, end_col_offset=24)], lineno=199, col_offset=24, end_lineno=209, end_col_offset=9), lineno=199, col_offset=8, end_lineno=209, end_col_offset=9), For(target=Name(id='alias', ctx=Store(), lineno=211, col_offset=12, end_lineno=211, end_col_offset=17), iter=Attribute(value=Name(id='node', ctx=Load(), lineno=211, col_offset=21, end_lineno=211, end_col_offset=25), attr='names', ctx=Load(), lineno=211, col_offset=21, end_lineno=211, end_col_offset=31), body=[Assign(targets=[Name(id='module_root', ctx=Store(), lineno=212, col_offset=12, end_lineno=212, end_col_offset=23)], value=Subscript(value=Call(func=Attribute(value=Attribute(value=Name(id='alias', ctx=Load(), lineno=212, col_offset=26, end_lineno=212, end_col_offset=31), attr='name', ctx=Load(), lineno=212, col_offset=26, end_lineno=212, end_col_offset=36), attr='split', ctx=Load(), lineno=212, col_offset=26, end_lineno=212, end_col_offset=42), args=[Constant(value='.', lineno=212, col_offset=43, end_lineno=212, end_col_offset=46)], lineno=212, col_offset=26, end_lineno=212, end_col_offset=47), slice=Constant(value=0, lineno=212, col_offset=48, end_lineno=212, end_col_offset=49), ctx=Load(), lineno=212, col_offset=26, end_lineno=212, end_col_offset=50), lineno=212, col_offset=12, end_lineno=212, end_col_offset=50), If(test=Compare(left=Name(id='module_root', ctx=Load(), lineno=213, col_offset=15, end_lineno=213, end_col_offset=26), ops=[In()], comparators=[Name(id='heavy_modules', ctx=Load(), lineno=213, col_offset=30, end_lineno=213, end_col_offset=43)], lineno=213, col_offset=15, end_lineno=213, end_col_offset=43), body=[Assign(targets=[Name(id='suggestion', ctx=Store(), lineno=214, col_offset=16, end_lineno=214, end_col_offset=26)], value=Call(func=Attribute(value=Name(id='self', ctx=Load(), lineno=214, col_offset=29, end_lineno=214, end_col_offset=33), attr='_suggest_heavy_import_fix', ctx=Load(), lineno=214, col_offset=29, end_lineno=214, end_col_offset=59), args=[Attribute(value=Name(id='alias', ctx=Load(), lineno=214, col_offset=60, end_lineno=214, end_col_offset=65), attr='name', ctx=Load(), lineno=214, col_offset=60, end_lineno=214, end_col_offset=70)], lineno=214, col_offset=29, end_lineno=214, end_col_offset=71), lineno=214, col_offset=16, end_lineno=214, end_col_offset=71), Assign(targets=[Name(id='context', ctx=Store(), lineno=215, col_offset=16, end_lineno=215, end_col_offset=23)], value=JoinedStr(values=[Constant(value='Potentially type-only import: ', lineno=215, col_offset=28, end_lineno=215, end_col_offset=58), FormattedValue(value=Attribute(value=Name(id='alias', ctx=Load(), lineno=215, col_offset=59, end_lineno=215, end_col_offset=64), attr='name', ctx=Load(), lineno=215, col_offset=59, end_lineno=215, end_col_offset=69), conversion=-1, lineno=215, col_offset=58, end_lineno=215, end_col_offset=70)], lineno=215, col_offset=26, end_lineno=215, end_col_offset=71), lineno=215, col_offset=16, end_lineno=215, end_col_offset=71), Assign(targets=[Name(id='violation', ctx=Store(), lineno=216, col_offset=16, end_lineno=216, end_col_offset=25)], value=Call(func=Name(id='TypeGateViolation', ctx=Load(), lineno=216, col_offset=28, end_lineno=216, end_col_offset=45), keywords=[keyword(arg='filepath', value=Call(func=Name(id='str', ctx=Load(), lineno=217, col_offset=29, end_lineno=217, end_col_offset=32), args=[Attribute(value=Name(id='self', ctx=Load(), lineno=217, col_offset=33, end_lineno=217, end_col_offset=37), attr='filepath', ctx=Load(), lineno=217, col_offset=33, end_lineno=217, end_col_offset=46)], lineno=217, col_offset=29, end_lineno=217, end_col_offset=47), lineno=217, col_offset=20, end_lineno=217, end_col_offset=47), keyword(arg='lineno', value=Attribute(value=Name(id='node', ctx=Load(), lineno=218, col_offset=27, end_lineno=218, end_col_offset=31), attr='lineno', ctx=Load(), lineno=218, col_offset=27, end_lineno=218, end_col_offset=38), lineno=218, col_offset=20, end_lineno=218, end_col_offset=38), keyword(arg='module_name', value=Attribute(value=Name(id='alias', ctx=Load(), lineno=219, col_offset=32, end_lineno=219, end_col_offset=37), attr='name', ctx=Load(), lineno=219, col_offset=32, end_lineno=219, end_col_offset=42), lineno=219, col_offset=20, end_lineno=219, end_col_offset=42), keyword(arg='context', value=Name(id='context', ctx=Load(), lineno=220, col_offset=28, end_lineno=220, end_col_offset=35), lineno=220, col_offset=20, end_lineno=220, end_col_offset=35), keyword(arg='violation_type', value=Constant(value='heavy_import', lineno=221, col_offset=35, end_lineno=221, end_col_offset=49), lineno=221, col_offset=20, end_lineno=221, end_col_offset=49), keyword(arg='suggestion', value=Name(id='suggestion', ctx=Load(), lineno=222, col_offset=31, end_lineno=222, end_col_offset=41), lineno=222, col_offset=20, end_lineno=222, end_col_offset=41)], lineno=216, col_offset=28, end_lineno=223, end_col_offset=17), lineno=216, col_offset=16, end_lineno=223, end_col_offset=17), Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='self', ctx=Load(), lineno=224, col_offset=16, end_lineno=224, end_col_offset=20), attr='violations', ctx=Load(), lineno=224, col_offset=16, end_lineno=224, end_col_offset=31), attr='append', ctx=Load(), lineno=224, col_offset=16, end_lineno=224, end_col_offset=38), args=[Name(id='violation', ctx=Load(), lineno=224, col_offset=39, end_lineno=224, end_col_offset=48)], lineno=224, col_offset=16, end_lineno=224, end_col_offset=49), lineno=224, col_offset=16, end_lineno=224, end_col_offset=49)], lineno=213, col_offset=12, end_lineno=224, end_col_offset=49)], lineno=211, col_offset=8, end_lineno=224, end_col_offset=49), Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load(), lineno=226, col_offset=8, end_lineno=226, end_col_offset=12), attr='generic_visit', ctx=Load(), lineno=226, col_offset=8, end_lineno=226, end_col_offset=26), args=[Name(id='node', ctx=Load(), lineno=226, col_offset=27, end_lineno=226, end_col_offset=31)], lineno=226, col_offset=8, end_lineno=226, end_col_offset=32), lineno=226, col_offset=8, end_lineno=226, end_col_offset=32)], returns=Constant(value=None, lineno=192, col_offset=48, end_lineno=192, end_col_offset=52), lineno=192, col_offset=4, end_lineno=226, end_col_offset=32), FunctionDef(name='_is_type_checking_guard', args=arguments(args=[arg(arg='node', annotation=Attribute(value=Name(id='ast', ctx=Load(), lineno=229, col_offset=38, end_lineno=229, end_col_offset=41), attr='If', ctx=Load(), lineno=229, col_offset=38, end_lineno=229, end_col_offset=44), lineno=229, col_offset=32, end_lineno=229, end_col_offset=44)]), body=[Expr(value=Constant(value='Check if an If node is a TYPE_CHECKING guard.\n\n        Parameters\n        ----------\n        node : ast.If\n            AST If node to check.\n\n        Returns\n        -------\n        bool\n            True if the node is a TYPE_CHECKING guard.\n        ', lineno=230, col_offset=8, end_lineno=241, end_col_offset=11), lineno=230, col_offset=8, end_lineno=241, end_col_offset=11), Assign(targets=[Name(id='test', ctx=Store(), lineno=243, col_offset=8, end_lineno=243, end_col_offset=12)], value=Attribute(value=Name(id='node', ctx=Load(), lineno=243, col_offset=15, end_lineno=243, end_col_offset=19), attr='test', ctx=Load(), lineno=243, col_offset=15, end_lineno=243, end_col_offset=24), lineno=243, col_offset=8, end_lineno=243, end_col_offset=24), Return(value=BoolOp(op=And(), values=[Call(func=Name(id='isinstance', ctx=Load(), lineno=244, col_offset=15, end_lineno=244, end_col_offset=25), args=[Name(id='test', ctx=Load(), lineno=244, col_offset=26, end_lineno=244, end_col_offset=30), Attribute(value=Name(id='ast', ctx=Load(), lineno=244, col_offset=32, end_lineno=244, end_col_offset=35), attr='Name', ctx=Load(), lineno=244, col_offset=32, end_lineno=244, end_col_offset=40)], lineno=244, col_offset=15, end_lineno=244, end_col_offset=41), Compare(left=Attribute(value=Name(id='test', ctx=Load(), lineno=244, col_offset=46, end_lineno=244, end_col_offset=50), attr='id', ctx=Load(), lineno=244, col_offset=46, end_lineno=244, end_col_offset=53), ops=[Eq()], comparators=[Constant(value='TYPE_CHECKING', lineno=244, col_offset=57, end_lineno=244, end_col_offset=72)], lineno=244, col_offset=46, end_lineno=244, end_col_offset=72)], lineno=244, col_offset=15, end_lineno=244, end_col_offset=72), lineno=244, col_offset=8, end_lineno=244, end_col_offset=72)], decorator_list=[Name(id='staticmethod', ctx=Load(), lineno=228, col_offset=5, end_lineno=228, end_col_offset=17)], returns=Name(id='bool', ctx=Load(), lineno=229, col_offset=49, end_lineno=229, end_col_offset=53), lineno=229, col_offset=4, end_lineno=244, end_col_offset=72), FunctionDef(name='_suggest_private_module_fix', args=arguments(args=[arg(arg='module', annotation=Name(id='str', ctx=Load(), lineno=247, col_offset=44, end_lineno=247, end_col_offset=47), lineno=247, col_offset=36, end_lineno=247, end_col_offset=47)]), body=[Expr(value=Constant(value='Generate suggestion for private module imports.\n\n        Parameters\n        ----------\n        module : str\n            Module name that was imported.\n\n        Returns\n        -------\n        str\n            Suggestion message for fixing the violation.\n        ', lineno=248, col_offset=8, end_lineno=259, end_col_offset=11), lineno=248, col_offset=8, end_lineno=259, end_col_offset=11), If(test=Call(func=Attribute(value=Name(id='module', ctx=Load(), lineno=260, col_offset=11, end_lineno=260, end_col_offset=17), attr='startswith', ctx=Load(), lineno=260, col_offset=11, end_lineno=260, end_col_offset=28), args=[Constant(value='docs._types', lineno=260, col_offset=29, end_lineno=260, end_col_offset=42)], lineno=260, col_offset=11, end_lineno=260, end_col_offset=43), body=[Return(value=Constant(value='Use public façade: from docs.types import ... (or docs.typing for type-only helpers)', lineno=261, col_offset=19, end_lineno=261, end_col_offset=106), lineno=261, col_offset=12, end_lineno=261, end_col_offset=106)], lineno=260, col_offset=8, end_lineno=261, end_col_offset=106), If(test=Call(func=Attribute(value=Name(id='module', ctx=Load(), lineno=262, col_offset=11, end_lineno=262, end_col_offset=17), attr='startswith', ctx=Load(), lineno=262, col_offset=11, end_lineno=262, end_col_offset=28), args=[Constant(value='docs._cache', lineno=262, col_offset=29, end_lineno=262, end_col_offset=42)], lineno=262, col_offset=11, end_lineno=262, end_col_offset=43), body=[Return(value=Constant(value='Use public façade: from docs.types import ... or access public cache API', lineno=263, col_offset=19, end_lineno=263, end_col_offset=94), lineno=263, col_offset=12, end_lineno=263, end_col_offset=94)], lineno=262, col_offset=8, end_lineno=263, end_col_offset=94), Return(value=Constant(value='Use public façade modules instead of private imports', lineno=264, col_offset=15, end_lineno=264, end_col_offset=70), lineno=264, col_offset=8, end_lineno=264, end_col_offset=70)], decorator_list=[Name(id='staticmethod', ctx=Load(), lineno=246, col_offset=5, end_lineno=246, end_col_offset=17)], returns=Name(id='str', ctx=Load(), lineno=247, col_offset=52, end_lineno=247, end_col_offset=55), lineno=247, col_offset=4, end_lineno=264, end_col_offset=70), FunctionDef(name='_suggest_shim_fix', args=arguments(args=[arg(arg='shim_name', annotation=Name(id='str', ctx=Load(), lineno=267, col_offset=37, end_lineno=267, end_col_offset=40), lineno=267, col_offset=26, end_lineno=267, end_col_offset=40)]), body=[Expr(value=Constant(value='Generate suggestion for deprecated shim usage.\n\n        Parameters\n        ----------\n        shim_name : str\n            Name of the deprecated shim function.\n\n        Returns\n        -------\n        str\n            Suggestion message for fixing the violation.\n        ', lineno=268, col_offset=8, end_lineno=279, end_col_offset=11), lineno=268, col_offset=8, end_lineno=279, end_col_offset=11), If(test=Compare(left=Name(id='shim_name', ctx=Load(), lineno=280, col_offset=11, end_lineno=280, end_col_offset=20), ops=[Eq()], comparators=[Constant(value='resolve_numpy', lineno=280, col_offset=24, end_lineno=280, end_col_offset=39)], lineno=280, col_offset=11, end_lineno=280, end_col_offset=39), body=[Return(value=Constant(value="Use gate_import('numpy', 'purpose') or TYPE_CHECKING guard + numpy import", lineno=281, col_offset=19, end_lineno=281, end_col_offset=94), lineno=281, col_offset=12, end_lineno=281, end_col_offset=94)], lineno=280, col_offset=8, end_lineno=281, end_col_offset=94), If(test=Compare(left=Name(id='shim_name', ctx=Load(), lineno=282, col_offset=11, end_lineno=282, end_col_offset=20), ops=[Eq()], comparators=[Constant(value='resolve_fastapi', lineno=282, col_offset=24, end_lineno=282, end_col_offset=41)], lineno=282, col_offset=11, end_lineno=282, end_col_offset=41), body=[Return(value=Constant(value="Use gate_import('fastapi', 'purpose') or TYPE_CHECKING guard + fastapi import", lineno=283, col_offset=19, end_lineno=283, end_col_offset=98), lineno=283, col_offset=12, end_lineno=283, end_col_offset=98)], lineno=282, col_offset=8, end_lineno=283, end_col_offset=98), If(test=Compare(left=Name(id='shim_name', ctx=Load(), lineno=284, col_offset=11, end_lineno=284, end_col_offset=20), ops=[Eq()], comparators=[Constant(value='resolve_faiss', lineno=284, col_offset=24, end_lineno=284, end_col_offset=39)], lineno=284, col_offset=11, end_lineno=284, end_col_offset=39), body=[Return(value=Constant(value="Use gate_import('faiss', 'purpose') or TYPE_CHECKING guard + faiss import", lineno=285, col_offset=19, end_lineno=285, end_col_offset=94), lineno=285, col_offset=12, end_lineno=285, end_col_offset=94)], lineno=284, col_offset=8, end_lineno=285, end_col_offset=94), Return(value=JoinedStr(values=[Constant(value='Deprecated shim ', lineno=286, col_offset=17, end_lineno=286, end_col_offset=33), FormattedValue(value=Name(id='shim_name', ctx=Load(), lineno=286, col_offset=34, end_lineno=286, end_col_offset=43), conversion=-1, lineno=286, col_offset=33, end_lineno=286, end_col_offset=44), Constant(value=' removed. Use gate_import() or TYPE_CHECKING guard', lineno=286, col_offset=44, end_lineno=286, end_col_offset=94)], lineno=286, col_offset=15, end_lineno=286, end_col_offset=95), lineno=286, col_offset=8, end_lineno=286, end_col_offset=95)], decorator_list=[Name(id='staticmethod', ctx=Load(), lineno=266, col_offset=5, end_lineno=266, end_col_offset=17)], returns=Name(id='str', ctx=Load(), lineno=267, col_offset=45, end_lineno=267, end_col_offset=48), lineno=267, col_offset=4, end_lineno=286, end_col_offset=95), FunctionDef(name='_suggest_heavy_import_fix', args=arguments(args=[arg(arg='module', annotation=Name(id='str', ctx=Load(), lineno=289, col_offset=42, end_lineno=289, end_col_offset=45), lineno=289, col_offset=34, end_lineno=289, end_col_offset=45)]), body=[Expr(value=Constant(value='Generate suggestion for heavy imports.\n\n        Parameters\n        ----------\n        module : str\n            Module name that was imported.\n\n        Returns\n        -------\n        str\n            Suggestion message for fixing the violation.\n        ', lineno=290, col_offset=8, end_lineno=301, end_col_offset=11), lineno=290, col_offset=8, end_lineno=301, end_col_offset=11), Assign(targets=[Name(id='module_root', ctx=Store(), lineno=302, col_offset=8, end_lineno=302, end_col_offset=19)], value=Subscript(value=Call(func=Attribute(value=Name(id='module', ctx=Load(), lineno=302, col_offset=22, end_lineno=302, end_col_offset=28), attr='split', ctx=Load(), lineno=302, col_offset=22, end_lineno=302, end_col_offset=34), args=[Constant(value='.', lineno=302, col_offset=35, end_lineno=302, end_col_offset=38)], keywords=[keyword(arg='maxsplit', value=Constant(value=1, lineno=302, col_offset=49, end_lineno=302, end_col_offset=50), lineno=302, col_offset=40, end_lineno=302, end_col_offset=50)], lineno=302, col_offset=22, end_lineno=302, end_col_offset=51), slice=Constant(value=0, lineno=302, col_offset=52, end_lineno=302, end_col_offset=53), ctx=Load(), lineno=302, col_offset=22, end_lineno=302, end_col_offset=54), lineno=302, col_offset=8, end_lineno=302, end_col_offset=54), Return(value=JoinedStr(values=[Constant(value='Guard ', lineno=304, col_offset=14, end_lineno=304, end_col_offset=20), FormattedValue(value=Name(id='module_root', ctx=Load(), lineno=304, col_offset=21, end_lineno=304, end_col_offset=32), conversion=-1, lineno=304, col_offset=20, end_lineno=304, end_col_offset=33), Constant(value=" import behind TYPE_CHECKING block, or use gate_import('", lineno=304, col_offset=33, end_lineno=305, end_col_offset=27), FormattedValue(value=Name(id='module_root', ctx=Load(), lineno=305, col_offset=28, end_lineno=305, end_col_offset=39), conversion=-1, lineno=305, col_offset=27, end_lineno=305, end_col_offset=40), Constant(value="', 'purpose') for runtime access", lineno=305, col_offset=40, end_lineno=305, end_col_offset=72)], lineno=304, col_offset=12, end_lineno=305, end_col_offset=73), lineno=303, col_offset=8, end_lineno=306, end_col_offset=9)], decorator_list=[Name(id='staticmethod', ctx=Load(), lineno=288, col_offset=5, end_lineno=288, end_col_offset=17)], returns=Name(id='str', ctx=Load(), lineno=289, col_offset=50, end_lineno=289, end_col_offset=53), lineno=289, col_offset=4, end_lineno=306, end_col_offset=9)], lineno=94, col_offset=0, end_lineno=306, end_col_offset=9), FunctionDef(name='check_file', args=arguments(args=[arg(arg='filepath', annotation=Name(id='Path', ctx=Load(), lineno=309, col_offset=25, end_lineno=309, end_col_offset=29), lineno=309, col_offset=15, end_lineno=309, end_col_offset=29), arg(arg='logger', annotation=BinOp(left=Name(id='LoggerAdapter', ctx=Load(), lineno=309, col_offset=39, end_lineno=309, end_col_offset=52), op=BitOr(), right=Constant(value=None, lineno=309, col_offset=55, end_lineno=309, end_col_offset=59), lineno=309, col_offset=39, end_lineno=309, end_col_offset=59), lineno=309, col_offset=31, end_lineno=309, end_col_offset=59)], defaults=[Constant(value=None, lineno=309, col_offset=62, end_lineno=309, end_col_offset=66)]), body=[Expr(value=Constant(value='Check a single Python file for typing gate violations.\n\n    Parameters\n    ----------\n    filepath : Path\n        File to check.\n    logger : LoggerAdapter | None, optional\n        Logger instance (default: None).\n\n    Returns\n    -------\n    list[TypeGateViolation]\n        List of violations found.\n    ', lineno=310, col_offset=4, end_lineno=323, end_col_offset=7), lineno=310, col_offset=4, end_lineno=323, end_col_offset=7), Assign(targets=[Name(id='active_logger', ctx=Store(), lineno=324, col_offset=4, end_lineno=324, end_col_offset=17)], value=BoolOp(op=Or(), values=[Name(id='logger', ctx=Load(), lineno=324, col_offset=20, end_lineno=324, end_col_offset=26), Call(func=Name(id='get_logger', ctx=Load(), lineno=324, col_offset=30, end_lineno=324, end_col_offset=40), args=[Name(id='__name__', ctx=Load(), lineno=324, col_offset=41, end_lineno=324, end_col_offset=49)], lineno=324, col_offset=30, end_lineno=324, end_col_offset=50)], lineno=324, col_offset=20, end_lineno=324, end_col_offset=50), lineno=324, col_offset=4, end_lineno=324, end_col_offset=50), Try(body=[Assign(targets=[Name(id='content', ctx=Store(), lineno=327, col_offset=8, end_lineno=327, end_col_offset=15)], value=Call(func=Attribute(value=Name(id='filepath', ctx=Load(), lineno=327, col_offset=18, end_lineno=327, end_col_offset=26), attr='read_text', ctx=Load(), lineno=327, col_offset=18, end_lineno=327, end_col_offset=36), keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=327, col_offset=46, end_lineno=327, end_col_offset=53), lineno=327, col_offset=37, end_lineno=327, end_col_offset=53)], lineno=327, col_offset=18, end_lineno=327, end_col_offset=54), lineno=327, col_offset=8, end_lineno=327, end_col_offset=54), Assign(targets=[Name(id='tree', ctx=Store(), lineno=328, col_offset=8, end_lineno=328, end_col_offset=12)], value=Call(func=Attribute(value=Name(id='ast', ctx=Load(), lineno=328, col_offset=15, end_lineno=328, end_col_offset=18), attr='parse', ctx=Load(), lineno=328, col_offset=15, end_lineno=328, end_col_offset=24), args=[Name(id='content', ctx=Load(), lineno=328, col_offset=25, end_lineno=328, end_col_offset=32)], keywords=[keyword(arg='filename', value=Call(func=Name(id='str', ctx=Load(), lineno=328, col_offset=43, end_lineno=328, end_col_offset=46), args=[Name(id='filepath', ctx=Load(), lineno=328, col_offset=47, end_lineno=328, end_col_offset=55)], lineno=328, col_offset=43, end_lineno=328, end_col_offset=56), lineno=328, col_offset=34, end_lineno=328, end_col_offset=56)], lineno=328, col_offset=15, end_lineno=328, end_col_offset=57), lineno=328, col_offset=8, end_lineno=328, end_col_offset=57), Assign(targets=[Name(id='visitor', ctx=Store(), lineno=329, col_offset=8, end_lineno=329, end_col_offset=15)], value=Call(func=Name(id='TypeGateVisitor', ctx=Load(), lineno=329, col_offset=18, end_lineno=329, end_col_offset=33), args=[Name(id='filepath', ctx=Load(), lineno=329, col_offset=34, end_lineno=329, end_col_offset=42)], lineno=329, col_offset=18, end_lineno=329, end_col_offset=43), lineno=329, col_offset=8, end_lineno=329, end_col_offset=43), Expr(value=Call(func=Attribute(value=Name(id='visitor', ctx=Load(), lineno=330, col_offset=8, end_lineno=330, end_col_offset=15), attr='visit', ctx=Load(), lineno=330, col_offset=8, end_lineno=330, end_col_offset=21), args=[Name(id='tree', ctx=Load(), lineno=330, col_offset=22, end_lineno=330, end_col_offset=26)], lineno=330, col_offset=8, end_lineno=330, end_col_offset=27), lineno=330, col_offset=8, end_lineno=330, end_col_offset=27)], handlers=[ExceptHandler(type=Name(id='SyntaxError', ctx=Load(), lineno=331, col_offset=11, end_lineno=331, end_col_offset=22), body=[Expr(value=Call(func=Attribute(value=Name(id='active_logger', ctx=Load(), lineno=332, col_offset=8, end_lineno=332, end_col_offset=21), attr='exception', ctx=Load(), lineno=332, col_offset=8, end_lineno=332, end_col_offset=31), args=[Constant(value='Syntax error in %s', lineno=332, col_offset=32, end_lineno=332, end_col_offset=52), Name(id='filepath', ctx=Load(), lineno=332, col_offset=54, end_lineno=332, end_col_offset=62)], lineno=332, col_offset=8, end_lineno=332, end_col_offset=63), lineno=332, col_offset=8, end_lineno=332, end_col_offset=63), Return(value=List(ctx=Load(), lineno=333, col_offset=15, end_lineno=333, end_col_offset=17), lineno=333, col_offset=8, end_lineno=333, end_col_offset=17)], lineno=331, col_offset=4, end_lineno=333, end_col_offset=17), ExceptHandler(type=Name(id='Exception', ctx=Load(), lineno=334, col_offset=11, end_lineno=334, end_col_offset=20), body=[Expr(value=Call(func=Attribute(value=Name(id='active_logger', ctx=Load(), lineno=335, col_offset=8, end_lineno=335, end_col_offset=21), attr='exception', ctx=Load(), lineno=335, col_offset=8, end_lineno=335, end_col_offset=31), args=[Constant(value='Error checking %s', lineno=335, col_offset=32, end_lineno=335, end_col_offset=51), Name(id='filepath', ctx=Load(), lineno=335, col_offset=53, end_lineno=335, end_col_offset=61)], lineno=335, col_offset=8, end_lineno=335, end_col_offset=62), lineno=335, col_offset=8, end_lineno=335, end_col_offset=62), Return(value=List(ctx=Load(), lineno=336, col_offset=15, end_lineno=336, end_col_offset=17), lineno=336, col_offset=8, end_lineno=336, end_col_offset=17)], lineno=334, col_offset=4, end_lineno=336, end_col_offset=17)], lineno=326, col_offset=4, end_lineno=336, end_col_offset=17), Return(value=Attribute(value=Name(id='visitor', ctx=Load(), lineno=337, col_offset=11, end_lineno=337, end_col_offset=18), attr='violations', ctx=Load(), lineno=337, col_offset=11, end_lineno=337, end_col_offset=29), lineno=337, col_offset=4, end_lineno=337, end_col_offset=29)], returns=Subscript(value=Name(id='list', ctx=Load(), lineno=309, col_offset=71, end_lineno=309, end_col_offset=75), slice=Name(id='TypeGateViolation', ctx=Load(), lineno=309, col_offset=76, end_lineno=309, end_col_offset=93), ctx=Load(), lineno=309, col_offset=71, end_lineno=309, end_col_offset=94), lineno=309, col_offset=0, end_lineno=337, end_col_offset=29), FunctionDef(name='check_directory', args=arguments(args=[arg(arg='root', annotation=Name(id='Path', ctx=Load(), lineno=341, col_offset=10, end_lineno=341, end_col_offset=14), lineno=341, col_offset=4, end_lineno=341, end_col_offset=14), arg(arg='logger', annotation=BinOp(left=Name(id='LoggerAdapter', ctx=Load(), lineno=342, col_offset=12, end_lineno=342, end_col_offset=25), op=BitOr(), right=Constant(value=None, lineno=342, col_offset=28, end_lineno=342, end_col_offset=32), lineno=342, col_offset=12, end_lineno=342, end_col_offset=32), lineno=342, col_offset=4, end_lineno=342, end_col_offset=32)], defaults=[Constant(value=None, lineno=342, col_offset=35, end_lineno=342, end_col_offset=39)]), body=[Expr(value=Constant(value='Check all Python files in a directory.\n\n    Parameters\n    ----------\n    root : Path\n        Directory to scan.\n    logger : LoggerAdapter | None, optional\n        Logger instance (default: None).\n\n    Returns\n    -------\n    list[TypeGateViolation]\n        All violations found.\n    ', lineno=344, col_offset=4, end_lineno=357, end_col_offset=7), lineno=344, col_offset=4, end_lineno=357, end_col_offset=7), Assign(targets=[Name(id='active_logger', ctx=Store(), lineno=358, col_offset=4, end_lineno=358, end_col_offset=17)], value=BoolOp(op=Or(), values=[Name(id='logger', ctx=Load(), lineno=358, col_offset=20, end_lineno=358, end_col_offset=26), Call(func=Name(id='get_logger', ctx=Load(), lineno=358, col_offset=30, end_lineno=358, end_col_offset=40), args=[Name(id='__name__', ctx=Load(), lineno=358, col_offset=41, end_lineno=358, end_col_offset=49)], lineno=358, col_offset=30, end_lineno=358, end_col_offset=50)], lineno=358, col_offset=20, end_lineno=358, end_col_offset=50), lineno=358, col_offset=4, end_lineno=358, end_col_offset=50), AnnAssign(target=Name(id='all_violations', ctx=Store(), lineno=360, col_offset=4, end_lineno=360, end_col_offset=18), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=360, col_offset=20, end_lineno=360, end_col_offset=24), slice=Name(id='TypeGateViolation', ctx=Load(), lineno=360, col_offset=25, end_lineno=360, end_col_offset=42), ctx=Load(), lineno=360, col_offset=20, end_lineno=360, end_col_offset=43), value=List(ctx=Load(), lineno=360, col_offset=46, end_lineno=360, end_col_offset=48), simple=1, lineno=360, col_offset=4, end_lineno=360, end_col_offset=48), Assign(targets=[Name(id='py_files', ctx=Store(), lineno=361, col_offset=4, end_lineno=361, end_col_offset=12)], value=Call(func=Name(id='sorted', ctx=Load(), lineno=361, col_offset=15, end_lineno=361, end_col_offset=21), args=[Call(func=Attribute(value=Name(id='root', ctx=Load(), lineno=361, col_offset=22, end_lineno=361, end_col_offset=26), attr='rglob', ctx=Load(), lineno=361, col_offset=22, end_lineno=361, end_col_offset=32), args=[Constant(value='*.py', lineno=361, col_offset=33, end_lineno=361, end_col_offset=39)], lineno=361, col_offset=22, end_lineno=361, end_col_offset=40)], lineno=361, col_offset=15, end_lineno=361, end_col_offset=41), lineno=361, col_offset=4, end_lineno=361, end_col_offset=41), For(target=Name(id='fpath', ctx=Store(), lineno=363, col_offset=8, end_lineno=363, end_col_offset=13), iter=Name(id='py_files', ctx=Load(), lineno=363, col_offset=17, end_lineno=363, end_col_offset=25), body=[If(test=Call(func=Name(id='any', ctx=Load(), lineno=365, col_offset=11, end_lineno=365, end_col_offset=14), args=[GeneratorExp(elt=Call(func=Attribute(value=Name(id='part', ctx=Load(), lineno=365, col_offset=15, end_lineno=365, end_col_offset=19), attr='startswith', ctx=Load(), lineno=365, col_offset=15, end_lineno=365, end_col_offset=30), args=[Constant(value='.', lineno=365, col_offset=31, end_lineno=365, end_col_offset=34)], lineno=365, col_offset=15, end_lineno=365, end_col_offset=35), generators=[comprehension(target=Name(id='part', ctx=Store(), lineno=365, col_offset=40, end_lineno=365, end_col_offset=44), iter=Attribute(value=Name(id='fpath', ctx=Load(), lineno=365, col_offset=48, end_lineno=365, end_col_offset=53), attr='parts', ctx=Load(), lineno=365, col_offset=48, end_lineno=365, end_col_offset=59), is_async=0)], lineno=365, col_offset=14, end_lineno=365, end_col_offset=60)], lineno=365, col_offset=11, end_lineno=365, end_col_offset=60), body=[Continue(lineno=366, col_offset=12, end_lineno=366, end_col_offset=20)], lineno=365, col_offset=8, end_lineno=366, end_col_offset=20), If(test=Compare(left=Constant(value='__pycache__', lineno=367, col_offset=11, end_lineno=367, end_col_offset=24), ops=[In()], comparators=[Attribute(value=Name(id='fpath', ctx=Load(), lineno=367, col_offset=28, end_lineno=367, end_col_offset=33), attr='parts', ctx=Load(), lineno=367, col_offset=28, end_lineno=367, end_col_offset=39)], lineno=367, col_offset=11, end_lineno=367, end_col_offset=39), body=[Continue(lineno=368, col_offset=12, end_lineno=368, end_col_offset=20)], lineno=367, col_offset=8, end_lineno=368, end_col_offset=20), Assign(targets=[Name(id='violations', ctx=Store(), lineno=370, col_offset=8, end_lineno=370, end_col_offset=18)], value=Call(func=Name(id='check_file', ctx=Load(), lineno=370, col_offset=21, end_lineno=370, end_col_offset=31), args=[Name(id='fpath', ctx=Load(), lineno=370, col_offset=32, end_lineno=370, end_col_offset=37)], keywords=[keyword(arg='logger', value=Name(id='active_logger', ctx=Load(), lineno=370, col_offset=46, end_lineno=370, end_col_offset=59), lineno=370, col_offset=39, end_lineno=370, end_col_offset=59)], lineno=370, col_offset=21, end_lineno=370, end_col_offset=60), lineno=370, col_offset=8, end_lineno=370, end_col_offset=60), Expr(value=Call(func=Attribute(value=Name(id='all_violations', ctx=Load(), lineno=371, col_offset=8, end_lineno=371, end_col_offset=22), attr='extend', ctx=Load(), lineno=371, col_offset=8, end_lineno=371, end_col_offset=29), args=[Name(id='violations', ctx=Load(), lineno=371, col_offset=30, end_lineno=371, end_col_offset=40)], lineno=371, col_offset=8, end_lineno=371, end_col_offset=41), lineno=371, col_offset=8, end_lineno=371, end_col_offset=41)], lineno=363, col_offset=4, end_lineno=371, end_col_offset=41), Return(value=Name(id='all_violations', ctx=Load(), lineno=373, col_offset=11, end_lineno=373, end_col_offset=25), lineno=373, col_offset=4, end_lineno=373, end_col_offset=25)], returns=Subscript(value=Name(id='list', ctx=Load(), lineno=343, col_offset=5, end_lineno=343, end_col_offset=9), slice=Name(id='TypeGateViolation', ctx=Load(), lineno=343, col_offset=10, end_lineno=343, end_col_offset=27), ctx=Load(), lineno=343, col_offset=5, end_lineno=343, end_col_offset=28), lineno=340, col_offset=0, end_lineno=373, end_col_offset=25), FunctionDef(name='format_violations', args=arguments(args=[arg(arg='violations', annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=377, col_offset=16, end_lineno=377, end_col_offset=20), slice=Name(id='TypeGateViolation', ctx=Load(), lineno=377, col_offset=21, end_lineno=377, end_col_offset=38), ctx=Load(), lineno=377, col_offset=16, end_lineno=377, end_col_offset=39), lineno=377, col_offset=4, end_lineno=377, end_col_offset=39)], kwonlyargs=[arg(arg='json_output', annotation=Name(id='bool', ctx=Load(), lineno=379, col_offset=17, end_lineno=379, end_col_offset=21), lineno=379, col_offset=4, end_lineno=379, end_col_offset=21), arg(arg='list_output', annotation=Name(id='bool', ctx=Load(), lineno=380, col_offset=17, end_lineno=380, end_col_offset=21), lineno=380, col_offset=4, end_lineno=380, end_col_offset=21)], kw_defaults=[Constant(value=False, lineno=379, col_offset=24, end_lineno=379, end_col_offset=29), Constant(value=False, lineno=380, col_offset=24, end_lineno=380, end_col_offset=29)]), body=[Expr(value=Constant(value='Format violations for output.\n\n    Parameters\n    ----------\n    violations : list[TypeGateViolation]\n        List of violations.\n    json_output : bool, optional\n        Output as JSON (default: False).\n    list_output : bool, optional\n        Output as flat list for codemod integration (default: False).\n\n    Returns\n    -------\n    str\n        Formatted output.\n    ', lineno=382, col_offset=4, end_lineno=397, end_col_offset=7), lineno=382, col_offset=4, end_lineno=397, end_col_offset=7), If(test=Name(id='json_output', ctx=Load(), lineno=398, col_offset=7, end_lineno=398, end_col_offset=18), body=[AnnAssign(target=Name(id='payload', ctx=Store(), lineno=399, col_offset=8, end_lineno=399, end_col_offset=15), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=399, col_offset=17, end_lineno=399, end_col_offset=21), slice=Subscript(value=Name(id='dict', ctx=Load(), lineno=399, col_offset=22, end_lineno=399, end_col_offset=26), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=399, col_offset=27, end_lineno=399, end_col_offset=30), Name(id='object', ctx=Load(), lineno=399, col_offset=32, end_lineno=399, end_col_offset=38)], ctx=Load(), lineno=399, col_offset=27, end_lineno=399, end_col_offset=38), ctx=Load(), lineno=399, col_offset=22, end_lineno=399, end_col_offset=39), ctx=Load(), lineno=399, col_offset=17, end_lineno=399, end_col_offset=40), value=ListComp(elt=Call(func=Name(id='cast', ctx=Load(), lineno=400, col_offset=12, end_lineno=400, end_col_offset=16), args=[Constant(value='dict[str, object]', lineno=400, col_offset=17, end_lineno=400, end_col_offset=36), Call(func=Name(id='asdict', ctx=Load(), lineno=400, col_offset=38, end_lineno=400, end_col_offset=44), args=[Name(id='v', ctx=Load(), lineno=400, col_offset=45, end_lineno=400, end_col_offset=46)], lineno=400, col_offset=38, end_lineno=400, end_col_offset=47)], lineno=400, col_offset=12, end_lineno=400, end_col_offset=48), generators=[comprehension(target=Name(id='v', ctx=Store(), lineno=400, col_offset=53, end_lineno=400, end_col_offset=54), iter=Name(id='violations', ctx=Load(), lineno=400, col_offset=58, end_lineno=400, end_col_offset=68), is_async=0)], lineno=399, col_offset=43, end_lineno=401, end_col_offset=9), simple=1, lineno=399, col_offset=8, end_lineno=401, end_col_offset=9), Return(value=Call(func=Attribute(value=Name(id='json', ctx=Load(), lineno=402, col_offset=15, end_lineno=402, end_col_offset=19), attr='dumps', ctx=Load(), lineno=402, col_offset=15, end_lineno=402, end_col_offset=25), args=[Name(id='payload', ctx=Load(), lineno=402, col_offset=26, end_lineno=402, end_col_offset=33)], keywords=[keyword(arg='indent', value=Constant(value=2, lineno=402, col_offset=42, end_lineno=402, end_col_offset=43), lineno=402, col_offset=35, end_lineno=402, end_col_offset=43)], lineno=402, col_offset=15, end_lineno=402, end_col_offset=44), lineno=402, col_offset=8, end_lineno=402, end_col_offset=44)], lineno=398, col_offset=4, end_lineno=402, end_col_offset=44), If(test=Name(id='list_output', ctx=Load(), lineno=404, col_offset=7, end_lineno=404, end_col_offset=18), body=[Assign(targets=[Name(id='lines', ctx=Store(), lineno=406, col_offset=8, end_lineno=406, end_col_offset=13)], value=ListComp(elt=JoinedStr(values=[FormattedValue(value=Attribute(value=Name(id='v', ctx=Load(), lineno=406, col_offset=20, end_lineno=406, end_col_offset=21), attr='filepath', ctx=Load(), lineno=406, col_offset=20, end_lineno=406, end_col_offset=30), conversion=-1, lineno=406, col_offset=19, end_lineno=406, end_col_offset=31), Constant(value=':', lineno=406, col_offset=31, end_lineno=406, end_col_offset=32), FormattedValue(value=Attribute(value=Name(id='v', ctx=Load(), lineno=406, col_offset=33, end_lineno=406, end_col_offset=34), attr='lineno', ctx=Load(), lineno=406, col_offset=33, end_lineno=406, end_col_offset=41), conversion=-1, lineno=406, col_offset=32, end_lineno=406, end_col_offset=42), Constant(value=':', lineno=406, col_offset=42, end_lineno=406, end_col_offset=43), FormattedValue(value=Attribute(value=Name(id='v', ctx=Load(), lineno=406, col_offset=44, end_lineno=406, end_col_offset=45), attr='violation_type', ctx=Load(), lineno=406, col_offset=44, end_lineno=406, end_col_offset=60), conversion=-1, lineno=406, col_offset=43, end_lineno=406, end_col_offset=61), Constant(value=':', lineno=406, col_offset=61, end_lineno=406, end_col_offset=62), FormattedValue(value=Attribute(value=Name(id='v', ctx=Load(), lineno=406, col_offset=63, end_lineno=406, end_col_offset=64), attr='module_name', ctx=Load(), lineno=406, col_offset=63, end_lineno=406, end_col_offset=76), conversion=-1, lineno=406, col_offset=62, end_lineno=406, end_col_offset=77)], lineno=406, col_offset=17, end_lineno=406, end_col_offset=78), generators=[comprehension(target=Name(id='v', ctx=Store(), lineno=406, col_offset=83, end_lineno=406, end_col_offset=84), iter=Name(id='violations', ctx=Load(), lineno=406, col_offset=88, end_lineno=406, end_col_offset=98), is_async=0)], lineno=406, col_offset=16, end_lineno=406, end_col_offset=99), lineno=406, col_offset=8, end_lineno=406, end_col_offset=99), Return(value=Call(func=Attribute(value=Constant(value='\n', lineno=407, col_offset=15, end_lineno=407, end_col_offset=19), attr='join', ctx=Load(), lineno=407, col_offset=15, end_lineno=407, end_col_offset=24), args=[Name(id='lines', ctx=Load(), lineno=407, col_offset=25, end_lineno=407, end_col_offset=30)], lineno=407, col_offset=15, end_lineno=407, end_col_offset=31), lineno=407, col_offset=8, end_lineno=407, end_col_offset=31)], lineno=404, col_offset=4, end_lineno=407, end_col_offset=31), If(test=UnaryOp(op=Not(), operand=Name(id='violations', ctx=Load(), lineno=409, col_offset=11, end_lineno=409, end_col_offset=21), lineno=409, col_offset=7, end_lineno=409, end_col_offset=21), body=[Return(value=Constant(value='✓ No typing gate violations found.', lineno=410, col_offset=15, end_lineno=410, end_col_offset=53), lineno=410, col_offset=8, end_lineno=410, end_col_offset=53)], lineno=409, col_offset=4, end_lineno=410, end_col_offset=53), Assign(targets=[Name(id='lines', ctx=Store(), lineno=413, col_offset=4, end_lineno=413, end_col_offset=9)], value=List(elts=[JoinedStr(values=[Constant(value='✗ Found ', lineno=413, col_offset=15, end_lineno=413, end_col_offset=25), FormattedValue(value=Call(func=Name(id='len', ctx=Load(), lineno=413, col_offset=26, end_lineno=413, end_col_offset=29), args=[Name(id='violations', ctx=Load(), lineno=413, col_offset=30, end_lineno=413, end_col_offset=40)], lineno=413, col_offset=26, end_lineno=413, end_col_offset=41), conversion=-1, lineno=413, col_offset=25, end_lineno=413, end_col_offset=42), Constant(value=' typing gate violation(s):\n', lineno=413, col_offset=42, end_lineno=413, end_col_offset=70)], lineno=413, col_offset=13, end_lineno=413, end_col_offset=71)], ctx=Load(), lineno=413, col_offset=12, end_lineno=413, end_col_offset=72), lineno=413, col_offset=4, end_lineno=413, end_col_offset=72), For(target=Name(id='v', ctx=Store(), lineno=414, col_offset=8, end_lineno=414, end_col_offset=9), iter=Name(id='violations', ctx=Load(), lineno=414, col_offset=13, end_lineno=414, end_col_offset=23), body=[Expr(value=Call(func=Attribute(value=Name(id='lines', ctx=Load(), lineno=415, col_offset=8, end_lineno=415, end_col_offset=13), attr='append', ctx=Load(), lineno=415, col_offset=8, end_lineno=415, end_col_offset=20), args=[JoinedStr(values=[Constant(value='  ', lineno=415, col_offset=23, end_lineno=415, end_col_offset=25), FormattedValue(value=Attribute(value=Name(id='v', ctx=Load(), lineno=415, col_offset=26, end_lineno=415, end_col_offset=27), attr='filepath', ctx=Load(), lineno=415, col_offset=26, end_lineno=415, end_col_offset=36), conversion=-1, lineno=415, col_offset=25, end_lineno=415, end_col_offset=37), Constant(value=':', lineno=415, col_offset=37, end_lineno=415, end_col_offset=38), FormattedValue(value=Attribute(value=Name(id='v', ctx=Load(), lineno=415, col_offset=39, end_lineno=415, end_col_offset=40), attr='lineno', ctx=Load(), lineno=415, col_offset=39, end_lineno=415, end_col_offset=47), conversion=-1, lineno=415, col_offset=38, end_lineno=415, end_col_offset=48), Constant(value=': ', lineno=415, col_offset=48, end_lineno=415, end_col_offset=50), FormattedValue(value=Attribute(value=Name(id='v', ctx=Load(), lineno=415, col_offset=51, end_lineno=415, end_col_offset=52), attr='module_name', ctx=Load(), lineno=415, col_offset=51, end_lineno=415, end_col_offset=64), conversion=-1, lineno=415, col_offset=50, end_lineno=415, end_col_offset=65)], lineno=415, col_offset=21, end_lineno=415, end_col_offset=66)], lineno=415, col_offset=8, end_lineno=415, end_col_offset=67), lineno=415, col_offset=8, end_lineno=415, end_col_offset=67), Expr(value=Call(func=Attribute(value=Name(id='lines', ctx=Load(), lineno=416, col_offset=8, end_lineno=416, end_col_offset=13), attr='append', ctx=Load(), lineno=416, col_offset=8, end_lineno=416, end_col_offset=20), args=[JoinedStr(values=[Constant(value='    Type: ', lineno=416, col_offset=23, end_lineno=416, end_col_offset=33), FormattedValue(value=Attribute(value=Name(id='v', ctx=Load(), lineno=416, col_offset=34, end_lineno=416, end_col_offset=35), attr='violation_type', ctx=Load(), lineno=416, col_offset=34, end_lineno=416, end_col_offset=50), conversion=-1, lineno=416, col_offset=33, end_lineno=416, end_col_offset=51)], lineno=416, col_offset=21, end_lineno=416, end_col_offset=52)], lineno=416, col_offset=8, end_lineno=416, end_col_offset=53), lineno=416, col_offset=8, end_lineno=416, end_col_offset=53), Expr(value=Call(func=Attribute(value=Name(id='lines', ctx=Load(), lineno=417, col_offset=8, end_lineno=417, end_col_offset=13), attr='append', ctx=Load(), lineno=417, col_offset=8, end_lineno=417, end_col_offset=20), args=[JoinedStr(values=[Constant(value='    Context: ', lineno=417, col_offset=23, end_lineno=417, end_col_offset=36), FormattedValue(value=Attribute(value=Name(id='v', ctx=Load(), lineno=417, col_offset=37, end_lineno=417, end_col_offset=38), attr='context', ctx=Load(), lineno=417, col_offset=37, end_lineno=417, end_col_offset=46), conversion=-1, lineno=417, col_offset=36, end_lineno=417, end_col_offset=47)], lineno=417, col_offset=21, end_lineno=417, end_col_offset=48)], lineno=417, col_offset=8, end_lineno=417, end_col_offset=49), lineno=417, col_offset=8, end_lineno=417, end_col_offset=49), Expr(value=Call(func=Attribute(value=Name(id='lines', ctx=Load(), lineno=418, col_offset=8, end_lineno=418, end_col_offset=13), attr='append', ctx=Load(), lineno=418, col_offset=8, end_lineno=418, end_col_offset=20), args=[JoinedStr(values=[Constant(value='    Fix: ', lineno=418, col_offset=23, end_lineno=418, end_col_offset=32), FormattedValue(value=Attribute(value=Name(id='v', ctx=Load(), lineno=418, col_offset=33, end_lineno=418, end_col_offset=34), attr='suggestion', ctx=Load(), lineno=418, col_offset=33, end_lineno=418, end_col_offset=45), conversion=-1, lineno=418, col_offset=32, end_lineno=418, end_col_offset=46), Constant(value='\n', lineno=418, col_offset=46, end_lineno=418, end_col_offset=48)], lineno=418, col_offset=21, end_lineno=418, end_col_offset=49)], lineno=418, col_offset=8, end_lineno=418, end_col_offset=50), lineno=418, col_offset=8, end_lineno=418, end_col_offset=50)], lineno=414, col_offset=4, end_lineno=418, end_col_offset=50), Return(value=Call(func=Attribute(value=Constant(value='\n', lineno=419, col_offset=11, end_lineno=419, end_col_offset=15), attr='join', ctx=Load(), lineno=419, col_offset=11, end_lineno=419, end_col_offset=20), args=[Name(id='lines', ctx=Load(), lineno=419, col_offset=21, end_lineno=419, end_col_offset=26)], lineno=419, col_offset=11, end_lineno=419, end_col_offset=27), lineno=419, col_offset=4, end_lineno=419, end_col_offset=27)], returns=Name(id='str', ctx=Load(), lineno=381, col_offset=5, end_lineno=381, end_col_offset=8), lineno=376, col_offset=0, end_lineno=419, end_col_offset=27), FunctionDef(name='main', args=arguments(args=[arg(arg='argv', annotation=BinOp(left=Subscript(value=Name(id='Sequence', ctx=Load(), lineno=422, col_offset=15, end_lineno=422, end_col_offset=23), slice=Name(id='str', ctx=Load(), lineno=422, col_offset=24, end_lineno=422, end_col_offset=27), ctx=Load(), lineno=422, col_offset=15, end_lineno=422, end_col_offset=28), op=BitOr(), right=Constant(value=None, lineno=422, col_offset=31, end_lineno=422, end_col_offset=35), lineno=422, col_offset=15, end_lineno=422, end_col_offset=35), lineno=422, col_offset=9, end_lineno=422, end_col_offset=35)], defaults=[Constant(value=None, lineno=422, col_offset=38, end_lineno=422, end_col_offset=42)]), body=[Expr(value=Constant(value='Check typing gates across specified directories.\n\n    Parameters\n    ----------\n    argv : Sequence[str] | None, optional\n        Command-line arguments (directories or flags).\n        Flags: --json, --diff, --list, --help\n\n    Returns\n    -------\n    int\n        Exit code (0 = no violations, 1 = violations found).\n    ', lineno=423, col_offset=4, end_lineno=435, end_col_offset=7), lineno=423, col_offset=4, end_lineno=435, end_col_offset=7), If(test=Compare(left=Name(id='argv', ctx=Load(), lineno=436, col_offset=7, end_lineno=436, end_col_offset=11), ops=[Is()], comparators=[Constant(value=None, lineno=436, col_offset=15, end_lineno=436, end_col_offset=19)], lineno=436, col_offset=7, end_lineno=436, end_col_offset=19), body=[Assign(targets=[Name(id='argv', ctx=Store(), lineno=437, col_offset=8, end_lineno=437, end_col_offset=12)], value=Subscript(value=Attribute(value=Name(id='sys', ctx=Load(), lineno=437, col_offset=15, end_lineno=437, end_col_offset=18), attr='argv', ctx=Load(), lineno=437, col_offset=15, end_lineno=437, end_col_offset=23), slice=Slice(lower=Constant(value=1, lineno=437, col_offset=24, end_lineno=437, end_col_offset=25), lineno=437, col_offset=24, end_lineno=437, end_col_offset=26), ctx=Load(), lineno=437, col_offset=15, end_lineno=437, end_col_offset=27), lineno=437, col_offset=8, end_lineno=437, end_col_offset=27)], lineno=436, col_offset=4, end_lineno=437, end_col_offset=27), Assign(targets=[Name(id='parser', ctx=Store(), lineno=439, col_offset=4, end_lineno=439, end_col_offset=10)], value=Call(func=Attribute(value=Name(id='argparse', ctx=Load(), lineno=439, col_offset=13, end_lineno=439, end_col_offset=21), attr='ArgumentParser', ctx=Load(), lineno=439, col_offset=13, end_lineno=439, end_col_offset=36), keywords=[keyword(arg='description', value=Constant(value='Check for unguarded type-only imports (typing gates).', lineno=440, col_offset=20, end_lineno=440, end_col_offset=75), lineno=440, col_offset=8, end_lineno=440, end_col_offset=75)], lineno=439, col_offset=13, end_lineno=441, end_col_offset=5), lineno=439, col_offset=4, end_lineno=441, end_col_offset=5), Expr(value=Call(func=Attribute(value=Name(id='parser', ctx=Load(), lineno=442, col_offset=4, end_lineno=442, end_col_offset=10), attr='add_argument', ctx=Load(), lineno=442, col_offset=4, end_lineno=442, end_col_offset=23), args=[Constant(value='directories', lineno=443, col_offset=8, end_lineno=443, end_col_offset=21)], keywords=[keyword(arg='nargs', value=Constant(value='*', lineno=444, col_offset=14, end_lineno=444, end_col_offset=17), lineno=444, col_offset=8, end_lineno=444, end_col_offset=17), keyword(arg='type', value=Name(id='Path', ctx=Load(), lineno=445, col_offset=13, end_lineno=445, end_col_offset=17), lineno=445, col_offset=8, end_lineno=445, end_col_offset=17), keyword(arg='help', value=Constant(value='Directories to check (default: src/)', lineno=446, col_offset=13, end_lineno=446, end_col_offset=51), lineno=446, col_offset=8, end_lineno=446, end_col_offset=51)], lineno=442, col_offset=4, end_lineno=447, end_col_offset=5), lineno=442, col_offset=4, end_lineno=447, end_col_offset=5), Expr(value=Call(func=Attribute(value=Name(id='parser', ctx=Load(), lineno=448, col_offset=4, end_lineno=448, end_col_offset=10), attr='add_argument', ctx=Load(), lineno=448, col_offset=4, end_lineno=448, end_col_offset=23), args=[Constant(value='--json', lineno=449, col_offset=8, end_lineno=449, end_col_offset=16)], keywords=[keyword(arg='action', value=Constant(value='store_true', lineno=450, col_offset=15, end_lineno=450, end_col_offset=27), lineno=450, col_offset=8, end_lineno=450, end_col_offset=27), keyword(arg='help', value=Constant(value='Output results as JSON', lineno=451, col_offset=13, end_lineno=451, end_col_offset=37), lineno=451, col_offset=8, end_lineno=451, end_col_offset=37)], lineno=448, col_offset=4, end_lineno=452, end_col_offset=5), lineno=448, col_offset=4, end_lineno=452, end_col_offset=5), Expr(value=Call(func=Attribute(value=Name(id='parser', ctx=Load(), lineno=453, col_offset=4, end_lineno=453, end_col_offset=10), attr='add_argument', ctx=Load(), lineno=453, col_offset=4, end_lineno=453, end_col_offset=23), args=[Constant(value='--diff', lineno=454, col_offset=8, end_lineno=454, end_col_offset=16)], keywords=[keyword(arg='action', value=Constant(value='store_true', lineno=455, col_offset=15, end_lineno=455, end_col_offset=27), lineno=455, col_offset=8, end_lineno=455, end_col_offset=27), keyword(arg='help', value=Constant(value='Show diff (reserved for future use)', lineno=456, col_offset=13, end_lineno=456, end_col_offset=50), lineno=456, col_offset=8, end_lineno=456, end_col_offset=50)], lineno=453, col_offset=4, end_lineno=457, end_col_offset=5), lineno=453, col_offset=4, end_lineno=457, end_col_offset=5), Expr(value=Call(func=Attribute(value=Name(id='parser', ctx=Load(), lineno=458, col_offset=4, end_lineno=458, end_col_offset=10), attr='add_argument', ctx=Load(), lineno=458, col_offset=4, end_lineno=458, end_col_offset=23), args=[Constant(value='--list', lineno=459, col_offset=8, end_lineno=459, end_col_offset=16)], keywords=[keyword(arg='action', value=Constant(value='store_true', lineno=460, col_offset=15, end_lineno=460, end_col_offset=27), lineno=460, col_offset=8, end_lineno=460, end_col_offset=27), keyword(arg='help', value=Constant(value='Output as flat list for codemod integration (filepath:lineno:type:module)', lineno=461, col_offset=13, end_lineno=461, end_col_offset=88), lineno=461, col_offset=8, end_lineno=461, end_col_offset=88)], lineno=458, col_offset=4, end_lineno=462, end_col_offset=5), lineno=458, col_offset=4, end_lineno=462, end_col_offset=5), Assign(targets=[Name(id='args', ctx=Store(), lineno=464, col_offset=4, end_lineno=464, end_col_offset=8)], value=Call(func=Attribute(value=Name(id='parser', ctx=Load(), lineno=464, col_offset=11, end_lineno=464, end_col_offset=17), attr='parse_args', ctx=Load(), lineno=464, col_offset=11, end_lineno=464, end_col_offset=28), args=[Name(id='argv', ctx=Load(), lineno=464, col_offset=29, end_lineno=464, end_col_offset=33)], lineno=464, col_offset=11, end_lineno=464, end_col_offset=34), lineno=464, col_offset=4, end_lineno=464, end_col_offset=34), Assign(targets=[Name(id='logger', ctx=Store(), lineno=465, col_offset=4, end_lineno=465, end_col_offset=10)], value=Call(func=Name(id='get_logger', ctx=Load(), lineno=465, col_offset=13, end_lineno=465, end_col_offset=23), args=[Name(id='__name__', ctx=Load(), lineno=465, col_offset=24, end_lineno=465, end_col_offset=32)], lineno=465, col_offset=13, end_lineno=465, end_col_offset=33), lineno=465, col_offset=4, end_lineno=465, end_col_offset=33), AnnAssign(target=Name(id='all_violations', ctx=Store(), lineno=467, col_offset=4, end_lineno=467, end_col_offset=18), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=467, col_offset=20, end_lineno=467, end_col_offset=24), slice=Name(id='TypeGateViolation', ctx=Load(), lineno=467, col_offset=25, end_lineno=467, end_col_offset=42), ctx=Load(), lineno=467, col_offset=20, end_lineno=467, end_col_offset=43), value=List(ctx=Load(), lineno=467, col_offset=46, end_lineno=467, end_col_offset=48), simple=1, lineno=467, col_offset=4, end_lineno=467, end_col_offset=48), Assign(targets=[Name(id='raw_directories', ctx=Store(), lineno=470, col_offset=4, end_lineno=470, end_col_offset=19)], value=Call(func=Name(id='cast', ctx=Load(), lineno=470, col_offset=22, end_lineno=470, end_col_offset=26), args=[Constant(value='Sequence[Path]', lineno=470, col_offset=27, end_lineno=470, end_col_offset=43), Call(func=Name(id='getattr', ctx=Load(), lineno=470, col_offset=45, end_lineno=470, end_col_offset=52), args=[Name(id='args', ctx=Load(), lineno=470, col_offset=53, end_lineno=470, end_col_offset=57), Constant(value='directories', lineno=470, col_offset=59, end_lineno=470, end_col_offset=72), Tuple(ctx=Load(), lineno=470, col_offset=74, end_lineno=470, end_col_offset=76)], lineno=470, col_offset=45, end_lineno=470, end_col_offset=77)], lineno=470, col_offset=22, end_lineno=470, end_col_offset=78), lineno=470, col_offset=4, end_lineno=470, end_col_offset=78), Assign(targets=[Name(id='directories', ctx=Store(), lineno=471, col_offset=4, end_lineno=471, end_col_offset=15)], value=IfExp(test=Name(id='raw_directories', ctx=Load(), lineno=471, col_offset=43, end_lineno=471, end_col_offset=58), body=Call(func=Name(id='list', ctx=Load(), lineno=471, col_offset=18, end_lineno=471, end_col_offset=22), args=[Name(id='raw_directories', ctx=Load(), lineno=471, col_offset=23, end_lineno=471, end_col_offset=38)], lineno=471, col_offset=18, end_lineno=471, end_col_offset=39), orelse=List(elts=[Call(func=Name(id='Path', ctx=Load(), lineno=471, col_offset=65, end_lineno=471, end_col_offset=69), args=[Constant(value='src', lineno=471, col_offset=70, end_lineno=471, end_col_offset=75)], lineno=471, col_offset=65, end_lineno=471, end_col_offset=76)], ctx=Load(), lineno=471, col_offset=64, end_lineno=471, end_col_offset=77), lineno=471, col_offset=18, end_lineno=471, end_col_offset=77), lineno=471, col_offset=4, end_lineno=471, end_col_offset=77), For(target=Name(id='directory', ctx=Store(), lineno=472, col_offset=8, end_lineno=472, end_col_offset=17), iter=Name(id='directories', ctx=Load(), lineno=472, col_offset=21, end_lineno=472, end_col_offset=32), body=[If(test=UnaryOp(op=Not(), operand=Call(func=Attribute(value=Name(id='directory', ctx=Load(), lineno=473, col_offset=15, end_lineno=473, end_col_offset=24), attr='exists', ctx=Load(), lineno=473, col_offset=15, end_lineno=473, end_col_offset=31), lineno=473, col_offset=15, end_lineno=473, end_col_offset=33), lineno=473, col_offset=11, end_lineno=473, end_col_offset=33), body=[Assign(targets=[Name(id='msg', ctx=Store(), lineno=474, col_offset=12, end_lineno=474, end_col_offset=15)], value=JoinedStr(values=[Constant(value='Directory not found: ', lineno=474, col_offset=20, end_lineno=474, end_col_offset=41), FormattedValue(value=Name(id='directory', ctx=Load(), lineno=474, col_offset=42, end_lineno=474, end_col_offset=51), conversion=-1, lineno=474, col_offset=41, end_lineno=474, end_col_offset=52)], lineno=474, col_offset=18, end_lineno=474, end_col_offset=53), lineno=474, col_offset=12, end_lineno=474, end_col_offset=53), Expr(value=Call(func=Attribute(value=Name(id='logger', ctx=Load(), lineno=475, col_offset=12, end_lineno=475, end_col_offset=18), attr='warning', ctx=Load(), lineno=475, col_offset=12, end_lineno=475, end_col_offset=26), args=[Name(id='msg', ctx=Load(), lineno=475, col_offset=27, end_lineno=475, end_col_offset=30)], lineno=475, col_offset=12, end_lineno=475, end_col_offset=31), lineno=475, col_offset=12, end_lineno=475, end_col_offset=31), Continue(lineno=476, col_offset=12, end_lineno=476, end_col_offset=20)], lineno=473, col_offset=8, end_lineno=476, end_col_offset=20), Assign(targets=[Name(id='violations', ctx=Store(), lineno=478, col_offset=8, end_lineno=478, end_col_offset=18)], value=Call(func=Name(id='check_directory', ctx=Load(), lineno=478, col_offset=21, end_lineno=478, end_col_offset=36), args=[Name(id='directory', ctx=Load(), lineno=478, col_offset=37, end_lineno=478, end_col_offset=46)], keywords=[keyword(arg='logger', value=Name(id='logger', ctx=Load(), lineno=478, col_offset=55, end_lineno=478, end_col_offset=61), lineno=478, col_offset=48, end_lineno=478, end_col_offset=61)], lineno=478, col_offset=21, end_lineno=478, end_col_offset=62), lineno=478, col_offset=8, end_lineno=478, end_col_offset=62), Expr(value=Call(func=Attribute(value=Name(id='all_violations', ctx=Load(), lineno=479, col_offset=8, end_lineno=479, end_col_offset=22), attr='extend', ctx=Load(), lineno=479, col_offset=8, end_lineno=479, end_col_offset=29), args=[Name(id='violations', ctx=Load(), lineno=479, col_offset=30, end_lineno=479, end_col_offset=40)], lineno=479, col_offset=8, end_lineno=479, end_col_offset=41), lineno=479, col_offset=8, end_lineno=479, end_col_offset=41)], lineno=472, col_offset=4, end_lineno=479, end_col_offset=41), AnnAssign(target=Name(id='json_attr', ctx=Store(), lineno=482, col_offset=4, end_lineno=482, end_col_offset=13), annotation=Name(id='object', ctx=Load(), lineno=482, col_offset=15, end_lineno=482, end_col_offset=21), value=Call(func=Name(id='getattr', ctx=Load(), lineno=482, col_offset=24, end_lineno=482, end_col_offset=31), args=[Name(id='args', ctx=Load(), lineno=482, col_offset=32, end_lineno=482, end_col_offset=36), Constant(value='json', lineno=482, col_offset=38, end_lineno=482, end_col_offset=44), Constant(value=False, lineno=482, col_offset=46, end_lineno=482, end_col_offset=51)], lineno=482, col_offset=24, end_lineno=482, end_col_offset=52), simple=1, lineno=482, col_offset=4, end_lineno=482, end_col_offset=52), AnnAssign(target=Name(id='list_attr', ctx=Store(), lineno=483, col_offset=4, end_lineno=483, end_col_offset=13), annotation=Name(id='object', ctx=Load(), lineno=483, col_offset=15, end_lineno=483, end_col_offset=21), value=Call(func=Name(id='getattr', ctx=Load(), lineno=483, col_offset=24, end_lineno=483, end_col_offset=31), args=[Name(id='args', ctx=Load(), lineno=483, col_offset=32, end_lineno=483, end_col_offset=36), Constant(value='list', lineno=483, col_offset=38, end_lineno=483, end_col_offset=44), Constant(value=False, lineno=483, col_offset=46, end_lineno=483, end_col_offset=51)], lineno=483, col_offset=24, end_lineno=483, end_col_offset=52), simple=1, lineno=483, col_offset=4, end_lineno=483, end_col_offset=52), Assign(targets=[Name(id='output', ctx=Store(), lineno=484, col_offset=4, end_lineno=484, end_col_offset=10)], value=Call(func=Name(id='format_violations', ctx=Load(), lineno=484, col_offset=13, end_lineno=484, end_col_offset=30), args=[Name(id='all_violations', ctx=Load(), lineno=485, col_offset=8, end_lineno=485, end_col_offset=22)], keywords=[keyword(arg='json_output', value=Call(func=Name(id='bool', ctx=Load(), lineno=486, col_offset=20, end_lineno=486, end_col_offset=24), args=[Name(id='json_attr', ctx=Load(), lineno=486, col_offset=25, end_lineno=486, end_col_offset=34)], lineno=486, col_offset=20, end_lineno=486, end_col_offset=35), lineno=486, col_offset=8, end_lineno=486, end_col_offset=35), keyword(arg='list_output', value=Call(func=Name(id='bool', ctx=Load(), lineno=487, col_offset=20, end_lineno=487, end_col_offset=24), args=[Name(id='list_attr', ctx=Load(), lineno=487, col_offset=25, end_lineno=487, end_col_offset=34)], lineno=487, col_offset=20, end_lineno=487, end_col_offset=35), lineno=487, col_offset=8, end_lineno=487, end_col_offset=35)], lineno=484, col_offset=13, end_lineno=488, end_col_offset=5), lineno=484, col_offset=4, end_lineno=488, end_col_offset=5), Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='sys', ctx=Load(), lineno=489, col_offset=4, end_lineno=489, end_col_offset=7), attr='stdout', ctx=Load(), lineno=489, col_offset=4, end_lineno=489, end_col_offset=14), attr='write', ctx=Load(), lineno=489, col_offset=4, end_lineno=489, end_col_offset=20), args=[BinOp(left=Name(id='output', ctx=Load(), lineno=489, col_offset=21, end_lineno=489, end_col_offset=27), op=Add(), right=Constant(value='\n', lineno=489, col_offset=30, end_lineno=489, end_col_offset=34), lineno=489, col_offset=21, end_lineno=489, end_col_offset=34)], lineno=489, col_offset=4, end_lineno=489, end_col_offset=35), lineno=489, col_offset=4, end_lineno=489, end_col_offset=35), Return(value=IfExp(test=Name(id='all_violations', ctx=Load(), lineno=491, col_offset=16, end_lineno=491, end_col_offset=30), body=Constant(value=1, lineno=491, col_offset=11, end_lineno=491, end_col_offset=12), orelse=Constant(value=0, lineno=491, col_offset=36, end_lineno=491, end_col_offset=37), lineno=491, col_offset=11, end_lineno=491, end_col_offset=37), lineno=491, col_offset=4, end_lineno=491, end_col_offset=37)], returns=Name(id='int', ctx=Load(), lineno=422, col_offset=47, end_lineno=422, end_col_offset=50), lineno=422, col_offset=0, end_lineno=491, end_col_offset=37), If(test=Compare(left=Name(id='__name__', ctx=Load(), lineno=494, col_offset=3, end_lineno=494, end_col_offset=11), ops=[Eq()], comparators=[Constant(value='__main__', lineno=494, col_offset=15, end_lineno=494, end_col_offset=25)], lineno=494, col_offset=3, end_lineno=494, end_col_offset=25), body=[Raise(exc=Call(func=Name(id='SystemExit', ctx=Load(), lineno=495, col_offset=10, end_lineno=495, end_col_offset=20), args=[Call(func=Name(id='main', ctx=Load(), lineno=495, col_offset=21, end_lineno=495, end_col_offset=25), lineno=495, col_offset=21, end_lineno=495, end_col_offset=27)], lineno=495, col_offset=10, end_lineno=495, end_col_offset=28), lineno=495, col_offset=4, end_lineno=495, end_col_offset=28)], lineno=494, col_offset=0, end_lineno=495, end_col_offset=28)])
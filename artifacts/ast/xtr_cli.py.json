Module(body=[Expr(value=Constant(value='Typer CLI for building, verifying, and probing XTR artifacts.', lineno=1, col_offset=0, end_lineno=1, end_col_offset=67), lineno=1, col_offset=0, end_lineno=1, end_col_offset=67), ImportFrom(module='__future__', names=[alias(name='annotations', lineno=3, col_offset=23, end_lineno=3, end_col_offset=34)], level=0, lineno=3, col_offset=0, end_lineno=3, end_col_offset=34), ImportFrom(module='typing', names=[alias(name='Annotated', lineno=5, col_offset=19, end_lineno=5, end_col_offset=28)], level=0, lineno=5, col_offset=0, end_lineno=5, end_col_offset=28), Import(names=[alias(name='typer', lineno=7, col_offset=7, end_lineno=7, end_col_offset=12)], lineno=7, col_offset=0, end_lineno=7, end_col_offset=12), ImportFrom(module='codeintel_rev.app.config_context', names=[alias(name='resolve_application_paths', lineno=9, col_offset=45, end_lineno=9, end_col_offset=70)], level=0, lineno=9, col_offset=0, end_lineno=9, end_col_offset=70), ImportFrom(module='codeintel_rev.config.settings', names=[alias(name='load_settings', lineno=10, col_offset=42, end_lineno=10, end_col_offset=55)], level=0, lineno=10, col_offset=0, end_lineno=10, end_col_offset=55), ImportFrom(module='codeintel_rev.indexing.xtr_build', names=[alias(name='build_xtr_index', lineno=11, col_offset=45, end_lineno=11, end_col_offset=60)], level=0, lineno=11, col_offset=0, end_lineno=11, end_col_offset=60), ImportFrom(module='codeintel_rev.io.xtr_manager', names=[alias(name='XTRIndex', lineno=12, col_offset=41, end_lineno=12, end_col_offset=49)], level=0, lineno=12, col_offset=0, end_lineno=12, end_col_offset=49), Assign(targets=[Name(id='app', ctx=Store(), lineno=14, col_offset=0, end_lineno=14, end_col_offset=3)], value=Call(func=Attribute(value=Name(id='typer', ctx=Load(), lineno=14, col_offset=6, end_lineno=14, end_col_offset=11), attr='Typer', ctx=Load(), lineno=14, col_offset=6, end_lineno=14, end_col_offset=17), keywords=[keyword(arg='help', value=Constant(value='XTR/WARP maintenance commands.', lineno=15, col_offset=9, end_lineno=15, end_col_offset=41), lineno=15, col_offset=4, end_lineno=15, end_col_offset=41), keyword(arg='no_args_is_help', value=Constant(value=True, lineno=16, col_offset=20, end_lineno=16, end_col_offset=24), lineno=16, col_offset=4, end_lineno=16, end_col_offset=24), keyword(arg='add_completion', value=Constant(value=False, lineno=17, col_offset=19, end_lineno=17, end_col_offset=24), lineno=17, col_offset=4, end_lineno=17, end_col_offset=24)], lineno=14, col_offset=6, end_lineno=18, end_col_offset=1), lineno=14, col_offset=0, end_lineno=18, end_col_offset=1), FunctionDef(name='build', args=arguments(), body=[Expr(value=Constant(value='Build token-level XTR artifacts from the DuckDB catalog.', lineno=23, col_offset=4, end_lineno=23, end_col_offset=66), lineno=23, col_offset=4, end_lineno=23, end_col_offset=66), Assign(targets=[Name(id='settings', ctx=Store(), lineno=24, col_offset=4, end_lineno=24, end_col_offset=12)], value=Call(func=Name(id='load_settings', ctx=Load(), lineno=24, col_offset=15, end_lineno=24, end_col_offset=28), lineno=24, col_offset=15, end_lineno=24, end_col_offset=30), lineno=24, col_offset=4, end_lineno=24, end_col_offset=30), Assign(targets=[Name(id='summary', ctx=Store(), lineno=25, col_offset=4, end_lineno=25, end_col_offset=11)], value=Call(func=Name(id='build_xtr_index', ctx=Load(), lineno=25, col_offset=14, end_lineno=25, end_col_offset=29), args=[Name(id='settings', ctx=Load(), lineno=25, col_offset=30, end_lineno=25, end_col_offset=38)], lineno=25, col_offset=14, end_lineno=25, end_col_offset=39), lineno=25, col_offset=4, end_lineno=25, end_col_offset=39), Expr(value=Call(func=Attribute(value=Name(id='typer', ctx=Load(), lineno=26, col_offset=4, end_lineno=26, end_col_offset=9), attr='echo', ctx=Load(), lineno=26, col_offset=4, end_lineno=26, end_col_offset=14), args=[JoinedStr(values=[Constant(value='XTR build complete (chunks=', lineno=27, col_offset=8, end_lineno=28, end_col_offset=18), FormattedValue(value=Attribute(value=Name(id='summary', ctx=Load(), lineno=28, col_offset=19, end_lineno=28, end_col_offset=26), attr='chunk_count', ctx=Load(), lineno=28, col_offset=19, end_lineno=28, end_col_offset=38), conversion=-1, lineno=28, col_offset=18, end_lineno=28, end_col_offset=39), Constant(value=', tokens=', lineno=28, col_offset=39, end_lineno=28, end_col_offset=48), FormattedValue(value=Attribute(value=Name(id='summary', ctx=Load(), lineno=28, col_offset=49, end_lineno=28, end_col_offset=56), attr='token_count', ctx=Load(), lineno=28, col_offset=49, end_lineno=28, end_col_offset=68), conversion=-1, lineno=28, col_offset=48, end_lineno=28, end_col_offset=69), Constant(value=', dtype=', lineno=28, col_offset=69, end_lineno=28, end_col_offset=77), FormattedValue(value=Attribute(value=Name(id='summary', ctx=Load(), lineno=28, col_offset=78, end_lineno=28, end_col_offset=85), attr='dtype', ctx=Load(), lineno=28, col_offset=78, end_lineno=28, end_col_offset=91), conversion=-1, lineno=28, col_offset=77, end_lineno=28, end_col_offset=92), Constant(value=').', lineno=28, col_offset=92, end_lineno=28, end_col_offset=94)], lineno=27, col_offset=8, end_lineno=28, end_col_offset=95)], lineno=26, col_offset=4, end_lineno=29, end_col_offset=5), lineno=26, col_offset=4, end_lineno=29, end_col_offset=5), Expr(value=Call(func=Attribute(value=Name(id='typer', ctx=Load(), lineno=30, col_offset=4, end_lineno=30, end_col_offset=9), attr='echo', ctx=Load(), lineno=30, col_offset=4, end_lineno=30, end_col_offset=14), args=[JoinedStr(values=[Constant(value=' - tokens: ', lineno=30, col_offset=17, end_lineno=30, end_col_offset=28), FormattedValue(value=Attribute(value=Name(id='summary', ctx=Load(), lineno=30, col_offset=29, end_lineno=30, end_col_offset=36), attr='token_path', ctx=Load(), lineno=30, col_offset=29, end_lineno=30, end_col_offset=47), conversion=-1, lineno=30, col_offset=28, end_lineno=30, end_col_offset=48)], lineno=30, col_offset=15, end_lineno=30, end_col_offset=49)], lineno=30, col_offset=4, end_lineno=30, end_col_offset=50), lineno=30, col_offset=4, end_lineno=30, end_col_offset=50), Expr(value=Call(func=Attribute(value=Name(id='typer', ctx=Load(), lineno=31, col_offset=4, end_lineno=31, end_col_offset=9), attr='echo', ctx=Load(), lineno=31, col_offset=4, end_lineno=31, end_col_offset=14), args=[JoinedStr(values=[Constant(value=' - metadata: ', lineno=31, col_offset=17, end_lineno=31, end_col_offset=30), FormattedValue(value=Attribute(value=Name(id='summary', ctx=Load(), lineno=31, col_offset=31, end_lineno=31, end_col_offset=38), attr='meta_path', ctx=Load(), lineno=31, col_offset=31, end_lineno=31, end_col_offset=48), conversion=-1, lineno=31, col_offset=30, end_lineno=31, end_col_offset=49)], lineno=31, col_offset=15, end_lineno=31, end_col_offset=50)], lineno=31, col_offset=4, end_lineno=31, end_col_offset=51), lineno=31, col_offset=4, end_lineno=31, end_col_offset=51)], decorator_list=[Call(func=Attribute(value=Name(id='app', ctx=Load(), lineno=21, col_offset=1, end_lineno=21, end_col_offset=4), attr='command', ctx=Load(), lineno=21, col_offset=1, end_lineno=21, end_col_offset=12), args=[Constant(value='build', lineno=21, col_offset=13, end_lineno=21, end_col_offset=20)], lineno=21, col_offset=1, end_lineno=21, end_col_offset=21)], returns=Constant(value=None, lineno=22, col_offset=15, end_lineno=22, end_col_offset=19), lineno=22, col_offset=0, end_lineno=31, end_col_offset=51), FunctionDef(name='verify', args=arguments(), body=[Expr(value=Constant(value='Verify that XTR artifacts can be opened.\n\n    Raises\n    ------\n    typer.Exit\n        If artifacts are missing or unreadable.\n    ', lineno=36, col_offset=4, end_lineno=42, end_col_offset=7), lineno=36, col_offset=4, end_lineno=42, end_col_offset=7), Assign(targets=[Name(id='settings', ctx=Store(), lineno=43, col_offset=4, end_lineno=43, end_col_offset=12)], value=Call(func=Name(id='load_settings', ctx=Load(), lineno=43, col_offset=15, end_lineno=43, end_col_offset=28), lineno=43, col_offset=15, end_lineno=43, end_col_offset=30), lineno=43, col_offset=4, end_lineno=43, end_col_offset=30), Assign(targets=[Name(id='paths', ctx=Store(), lineno=44, col_offset=4, end_lineno=44, end_col_offset=9)], value=Call(func=Name(id='resolve_application_paths', ctx=Load(), lineno=44, col_offset=12, end_lineno=44, end_col_offset=37), args=[Name(id='settings', ctx=Load(), lineno=44, col_offset=38, end_lineno=44, end_col_offset=46)], lineno=44, col_offset=12, end_lineno=44, end_col_offset=47), lineno=44, col_offset=4, end_lineno=44, end_col_offset=47), Assign(targets=[Name(id='index', ctx=Store(), lineno=45, col_offset=4, end_lineno=45, end_col_offset=9)], value=Call(func=Name(id='XTRIndex', ctx=Load(), lineno=45, col_offset=12, end_lineno=45, end_col_offset=20), args=[Attribute(value=Name(id='paths', ctx=Load(), lineno=45, col_offset=21, end_lineno=45, end_col_offset=26), attr='xtr_dir', ctx=Load(), lineno=45, col_offset=21, end_lineno=45, end_col_offset=34), Attribute(value=Name(id='settings', ctx=Load(), lineno=45, col_offset=36, end_lineno=45, end_col_offset=44), attr='xtr', ctx=Load(), lineno=45, col_offset=36, end_lineno=45, end_col_offset=48)], lineno=45, col_offset=12, end_lineno=45, end_col_offset=49), lineno=45, col_offset=4, end_lineno=45, end_col_offset=49), Expr(value=Call(func=Attribute(value=Name(id='index', ctx=Load(), lineno=46, col_offset=4, end_lineno=46, end_col_offset=9), attr='open', ctx=Load(), lineno=46, col_offset=4, end_lineno=46, end_col_offset=14), lineno=46, col_offset=4, end_lineno=46, end_col_offset=16), lineno=46, col_offset=4, end_lineno=46, end_col_offset=16), If(test=UnaryOp(op=Not(), operand=Attribute(value=Name(id='index', ctx=Load(), lineno=47, col_offset=11, end_lineno=47, end_col_offset=16), attr='ready', ctx=Load(), lineno=47, col_offset=11, end_lineno=47, end_col_offset=22), lineno=47, col_offset=7, end_lineno=47, end_col_offset=22), body=[Expr(value=Call(func=Attribute(value=Name(id='typer', ctx=Load(), lineno=48, col_offset=8, end_lineno=48, end_col_offset=13), attr='echo', ctx=Load(), lineno=48, col_offset=8, end_lineno=48, end_col_offset=18), args=[JoinedStr(values=[Constant(value='XTR artifacts missing or unreadable at ', lineno=49, col_offset=14, end_lineno=49, end_col_offset=53), FormattedValue(value=Attribute(value=Name(id='paths', ctx=Load(), lineno=49, col_offset=54, end_lineno=49, end_col_offset=59), attr='xtr_dir', ctx=Load(), lineno=49, col_offset=54, end_lineno=49, end_col_offset=67), conversion=-1, lineno=49, col_offset=53, end_lineno=49, end_col_offset=68), Constant(value='.', lineno=49, col_offset=68, end_lineno=49, end_col_offset=69)], lineno=49, col_offset=12, end_lineno=49, end_col_offset=70)], keywords=[keyword(arg='err', value=Constant(value=True, lineno=50, col_offset=16, end_lineno=50, end_col_offset=20), lineno=50, col_offset=12, end_lineno=50, end_col_offset=20)], lineno=48, col_offset=8, end_lineno=51, end_col_offset=9), lineno=48, col_offset=8, end_lineno=51, end_col_offset=9), Raise(exc=Call(func=Attribute(value=Name(id='typer', ctx=Load(), lineno=52, col_offset=14, end_lineno=52, end_col_offset=19), attr='Exit', ctx=Load(), lineno=52, col_offset=14, end_lineno=52, end_col_offset=24), keywords=[keyword(arg='code', value=Constant(value=1, lineno=52, col_offset=30, end_lineno=52, end_col_offset=31), lineno=52, col_offset=25, end_lineno=52, end_col_offset=31)], lineno=52, col_offset=14, end_lineno=52, end_col_offset=32), lineno=52, col_offset=8, end_lineno=52, end_col_offset=32)], lineno=47, col_offset=4, end_lineno=52, end_col_offset=32), Assign(targets=[Name(id='meta', ctx=Store(), lineno=53, col_offset=4, end_lineno=53, end_col_offset=8)], value=BoolOp(op=Or(), values=[Call(func=Attribute(value=Name(id='index', ctx=Load(), lineno=53, col_offset=11, end_lineno=53, end_col_offset=16), attr='metadata', ctx=Load(), lineno=53, col_offset=11, end_lineno=53, end_col_offset=25), lineno=53, col_offset=11, end_lineno=53, end_col_offset=27), Dict(lineno=53, col_offset=31, end_lineno=53, end_col_offset=33)], lineno=53, col_offset=11, end_lineno=53, end_col_offset=33), lineno=53, col_offset=4, end_lineno=53, end_col_offset=33), Expr(value=Call(func=Attribute(value=Name(id='typer', ctx=Load(), lineno=54, col_offset=4, end_lineno=54, end_col_offset=9), attr='echo', ctx=Load(), lineno=54, col_offset=4, end_lineno=54, end_col_offset=14), args=[JoinedStr(values=[Constant(value='XTR ready: chunks=', lineno=55, col_offset=8, end_lineno=56, end_col_offset=17), FormattedValue(value=Call(func=Attribute(value=Name(id='meta', ctx=Load(), lineno=56, col_offset=18, end_lineno=56, end_col_offset=22), attr='get', ctx=Load(), lineno=56, col_offset=18, end_lineno=56, end_col_offset=26), args=[Constant(value='doc_count', lineno=56, col_offset=27, end_lineno=56, end_col_offset=38)], lineno=56, col_offset=18, end_lineno=56, end_col_offset=39), conversion=-1, lineno=56, col_offset=17, end_lineno=56, end_col_offset=40), Constant(value=' tokens=', lineno=56, col_offset=40, end_lineno=56, end_col_offset=48), FormattedValue(value=Call(func=Attribute(value=Name(id='meta', ctx=Load(), lineno=56, col_offset=49, end_lineno=56, end_col_offset=53), attr='get', ctx=Load(), lineno=56, col_offset=49, end_lineno=56, end_col_offset=57), args=[Constant(value='total_tokens', lineno=56, col_offset=58, end_lineno=56, end_col_offset=72)], lineno=56, col_offset=49, end_lineno=56, end_col_offset=73), conversion=-1, lineno=56, col_offset=48, end_lineno=56, end_col_offset=74), Constant(value=' dim=', lineno=56, col_offset=74, end_lineno=56, end_col_offset=79), FormattedValue(value=Call(func=Attribute(value=Name(id='meta', ctx=Load(), lineno=56, col_offset=80, end_lineno=56, end_col_offset=84), attr='get', ctx=Load(), lineno=56, col_offset=80, end_lineno=56, end_col_offset=88), args=[Constant(value='dim', lineno=56, col_offset=89, end_lineno=56, end_col_offset=94)], lineno=56, col_offset=80, end_lineno=56, end_col_offset=95), conversion=-1, lineno=56, col_offset=79, end_lineno=56, end_col_offset=96)], lineno=55, col_offset=8, end_lineno=56, end_col_offset=97)], lineno=54, col_offset=4, end_lineno=57, end_col_offset=5), lineno=54, col_offset=4, end_lineno=57, end_col_offset=5)], decorator_list=[Call(func=Attribute(value=Name(id='app', ctx=Load(), lineno=34, col_offset=1, end_lineno=34, end_col_offset=4), attr='command', ctx=Load(), lineno=34, col_offset=1, end_lineno=34, end_col_offset=12), args=[Constant(value='verify', lineno=34, col_offset=13, end_lineno=34, end_col_offset=21)], lineno=34, col_offset=1, end_lineno=34, end_col_offset=22)], returns=Constant(value=None, lineno=35, col_offset=16, end_lineno=35, end_col_offset=20), lineno=35, col_offset=0, end_lineno=57, end_col_offset=5), FunctionDef(name='search', args=arguments(args=[arg(arg='query', annotation=Subscript(value=Name(id='Annotated', ctx=Load(), lineno=62, col_offset=11, end_lineno=62, end_col_offset=20), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=62, col_offset=21, end_lineno=62, end_col_offset=24), Call(func=Attribute(value=Name(id='typer', ctx=Load(), lineno=62, col_offset=26, end_lineno=62, end_col_offset=31), attr='Argument', ctx=Load(), lineno=62, col_offset=26, end_lineno=62, end_col_offset=40), keywords=[keyword(arg='help', value=Constant(value='Natural language query.', lineno=62, col_offset=46, end_lineno=62, end_col_offset=71), lineno=62, col_offset=41, end_lineno=62, end_col_offset=71)], lineno=62, col_offset=26, end_lineno=62, end_col_offset=72)], ctx=Load(), lineno=62, col_offset=21, end_lineno=62, end_col_offset=72), ctx=Load(), lineno=62, col_offset=11, end_lineno=62, end_col_offset=73), lineno=62, col_offset=4, end_lineno=62, end_col_offset=73), arg(arg='k', annotation=Subscript(value=Name(id='Annotated', ctx=Load(), lineno=63, col_offset=7, end_lineno=63, end_col_offset=16), slice=Tuple(elts=[Name(id='int', ctx=Load(), lineno=63, col_offset=17, end_lineno=63, end_col_offset=20), Call(func=Attribute(value=Name(id='typer', ctx=Load(), lineno=63, col_offset=22, end_lineno=63, end_col_offset=27), attr='Option', ctx=Load(), lineno=63, col_offset=22, end_lineno=63, end_col_offset=34), args=[Constant(value='--k', lineno=63, col_offset=35, end_lineno=63, end_col_offset=40), Constant(value='-k', lineno=63, col_offset=42, end_lineno=63, end_col_offset=46)], keywords=[keyword(arg='min', value=Constant(value=1, lineno=63, col_offset=52, end_lineno=63, end_col_offset=53), lineno=63, col_offset=48, end_lineno=63, end_col_offset=53), keyword(arg='help', value=Constant(value='Top-k documents to return.', lineno=63, col_offset=60, end_lineno=63, end_col_offset=88), lineno=63, col_offset=55, end_lineno=63, end_col_offset=88)], lineno=63, col_offset=22, end_lineno=63, end_col_offset=89)], ctx=Load(), lineno=63, col_offset=17, end_lineno=63, end_col_offset=89), ctx=Load(), lineno=63, col_offset=7, end_lineno=63, end_col_offset=90), lineno=63, col_offset=4, end_lineno=63, end_col_offset=90), arg(arg='candidate_ids', annotation=Subscript(value=Name(id='Annotated', ctx=Load(), lineno=64, col_offset=19, end_lineno=64, end_col_offset=28), slice=Tuple(elts=[BinOp(left=Subscript(value=Name(id='list', ctx=Load(), lineno=65, col_offset=8, end_lineno=65, end_col_offset=12), slice=Name(id='int', ctx=Load(), lineno=65, col_offset=13, end_lineno=65, end_col_offset=16), ctx=Load(), lineno=65, col_offset=8, end_lineno=65, end_col_offset=17), op=BitOr(), right=Constant(value=None, lineno=65, col_offset=20, end_lineno=65, end_col_offset=24), lineno=65, col_offset=8, end_lineno=65, end_col_offset=24), Call(func=Attribute(value=Name(id='typer', ctx=Load(), lineno=66, col_offset=8, end_lineno=66, end_col_offset=13), attr='Option', ctx=Load(), lineno=66, col_offset=8, end_lineno=66, end_col_offset=20), args=[Constant(value='--candidate-id', lineno=66, col_offset=21, end_lineno=66, end_col_offset=37), Constant(value='-c', lineno=66, col_offset=39, end_lineno=66, end_col_offset=43)], keywords=[keyword(arg='help', value=Constant(value='Optional Stage-0 candidate ids to rescore.', lineno=66, col_offset=50, end_lineno=66, end_col_offset=94), lineno=66, col_offset=45, end_lineno=66, end_col_offset=94)], lineno=66, col_offset=8, end_lineno=66, end_col_offset=95)], ctx=Load(), lineno=65, col_offset=8, end_lineno=66, end_col_offset=96), ctx=Load(), lineno=64, col_offset=19, end_lineno=67, end_col_offset=5), lineno=64, col_offset=4, end_lineno=67, end_col_offset=5), arg(arg='explain', annotation=Subscript(value=Name(id='Annotated', ctx=Load(), lineno=68, col_offset=13, end_lineno=68, end_col_offset=22), slice=Tuple(elts=[BinOp(left=Name(id='bool', ctx=Load(), lineno=68, col_offset=23, end_lineno=68, end_col_offset=27), op=BitOr(), right=Constant(value=None, lineno=68, col_offset=30, end_lineno=68, end_col_offset=34), lineno=68, col_offset=23, end_lineno=68, end_col_offset=34), Call(func=Attribute(value=Name(id='typer', ctx=Load(), lineno=68, col_offset=36, end_lineno=68, end_col_offset=41), attr='Option', ctx=Load(), lineno=68, col_offset=36, end_lineno=68, end_col_offset=48), keywords=[keyword(arg='help', value=Constant(value='Include token-level attributions.', lineno=68, col_offset=54, end_lineno=68, end_col_offset=89), lineno=68, col_offset=49, end_lineno=68, end_col_offset=89)], lineno=68, col_offset=36, end_lineno=68, end_col_offset=90)], ctx=Load(), lineno=68, col_offset=23, end_lineno=68, end_col_offset=90), ctx=Load(), lineno=68, col_offset=13, end_lineno=68, end_col_offset=91), lineno=68, col_offset=4, end_lineno=68, end_col_offset=91)], defaults=[Constant(value=5, lineno=63, col_offset=93, end_lineno=63, end_col_offset=94), Constant(value=None, lineno=67, col_offset=8, end_lineno=67, end_col_offset=12), Constant(value=None, lineno=68, col_offset=94, end_lineno=68, end_col_offset=98)]), body=[Expr(value=Constant(value='Run a quick XTR search (wide or narrow depending on candidate ids).\n\n    Extended Summary\n    ----------------\n    This CLI command performs XTR-based semantic search, supporting both wide-mode\n    (index-wide search) and narrow-mode (rescoring Stage-0 candidates) depending on\n    whether candidate_ids are provided. It loads the XTR index, executes the search,\n    and prints results to stdout. This is a utility command for testing and debugging\n    XTR search functionality outside of the main MCP server.\n\n    Parameters\n    ----------\n    query : str\n        Natural language query string to search for. Will be encoded into token\n        embeddings and used for MaxSim computation against the XTR index.\n    k : int, optional\n        Maximum number of top-k documents to return. Must be at least 1.\n        Defaults to 5.\n    candidate_ids : list[int] | None, optional\n        Optional list of Stage-0 candidate chunk IDs to rescore. If provided,\n        performs narrow-mode rescoring on these candidates only. If None, performs\n        wide-mode search across all chunks. Defaults to None.\n    explain : bool | None, optional\n        Whether to include token-level attribution information in results. If True,\n        includes explainability data showing token alignments. Defaults to None\n        (no explainability).\n\n    Raises\n    ------\n    typer.Exit\n        If XTR artifacts are missing and the command cannot run. This occurs when\n        the XTR index has not been built or is not ready for search operations.\n\n    Notes\n    -----\n    Time complexity depends on search mode: O(N * T * D) for wide-mode where N is\n    total chunks, T is tokens per chunk, D is embedding dimension; O(C * T * D) for\n    narrow-mode where C is candidate count. Space complexity O(k) for results.\n    The function performs file I/O to load the XTR index and GPU/CPU computation\n    for encoding and scoring. Not thread-safe due to index loading.\n    ', lineno=70, col_offset=4, end_lineno=110, end_col_offset=7), lineno=70, col_offset=4, end_lineno=110, end_col_offset=7), Assign(targets=[Name(id='settings', ctx=Store(), lineno=111, col_offset=4, end_lineno=111, end_col_offset=12)], value=Call(func=Name(id='load_settings', ctx=Load(), lineno=111, col_offset=15, end_lineno=111, end_col_offset=28), lineno=111, col_offset=15, end_lineno=111, end_col_offset=30), lineno=111, col_offset=4, end_lineno=111, end_col_offset=30), Assign(targets=[Name(id='paths', ctx=Store(), lineno=112, col_offset=4, end_lineno=112, end_col_offset=9)], value=Call(func=Name(id='resolve_application_paths', ctx=Load(), lineno=112, col_offset=12, end_lineno=112, end_col_offset=37), args=[Name(id='settings', ctx=Load(), lineno=112, col_offset=38, end_lineno=112, end_col_offset=46)], lineno=112, col_offset=12, end_lineno=112, end_col_offset=47), lineno=112, col_offset=4, end_lineno=112, end_col_offset=47), Assign(targets=[Name(id='index', ctx=Store(), lineno=113, col_offset=4, end_lineno=113, end_col_offset=9)], value=Call(func=Name(id='XTRIndex', ctx=Load(), lineno=113, col_offset=12, end_lineno=113, end_col_offset=20), args=[Attribute(value=Name(id='paths', ctx=Load(), lineno=113, col_offset=21, end_lineno=113, end_col_offset=26), attr='xtr_dir', ctx=Load(), lineno=113, col_offset=21, end_lineno=113, end_col_offset=34), Attribute(value=Name(id='settings', ctx=Load(), lineno=113, col_offset=36, end_lineno=113, end_col_offset=44), attr='xtr', ctx=Load(), lineno=113, col_offset=36, end_lineno=113, end_col_offset=48)], lineno=113, col_offset=12, end_lineno=113, end_col_offset=49), lineno=113, col_offset=4, end_lineno=113, end_col_offset=49), Expr(value=Call(func=Attribute(value=Name(id='index', ctx=Load(), lineno=114, col_offset=4, end_lineno=114, end_col_offset=9), attr='open', ctx=Load(), lineno=114, col_offset=4, end_lineno=114, end_col_offset=14), lineno=114, col_offset=4, end_lineno=114, end_col_offset=16), lineno=114, col_offset=4, end_lineno=114, end_col_offset=16), If(test=UnaryOp(op=Not(), operand=Attribute(value=Name(id='index', ctx=Load(), lineno=115, col_offset=11, end_lineno=115, end_col_offset=16), attr='ready', ctx=Load(), lineno=115, col_offset=11, end_lineno=115, end_col_offset=22), lineno=115, col_offset=7, end_lineno=115, end_col_offset=22), body=[Expr(value=Call(func=Attribute(value=Name(id='typer', ctx=Load(), lineno=116, col_offset=8, end_lineno=116, end_col_offset=13), attr='echo', ctx=Load(), lineno=116, col_offset=8, end_lineno=116, end_col_offset=18), args=[Constant(value='XTR artifacts not ready; run `xtr build` first.', lineno=116, col_offset=19, end_lineno=116, end_col_offset=68)], keywords=[keyword(arg='err', value=Constant(value=True, lineno=116, col_offset=74, end_lineno=116, end_col_offset=78), lineno=116, col_offset=70, end_lineno=116, end_col_offset=78)], lineno=116, col_offset=8, end_lineno=116, end_col_offset=79), lineno=116, col_offset=8, end_lineno=116, end_col_offset=79), Raise(exc=Call(func=Attribute(value=Name(id='typer', ctx=Load(), lineno=117, col_offset=14, end_lineno=117, end_col_offset=19), attr='Exit', ctx=Load(), lineno=117, col_offset=14, end_lineno=117, end_col_offset=24), keywords=[keyword(arg='code', value=Constant(value=1, lineno=117, col_offset=30, end_lineno=117, end_col_offset=31), lineno=117, col_offset=25, end_lineno=117, end_col_offset=31)], lineno=117, col_offset=14, end_lineno=117, end_col_offset=32), lineno=117, col_offset=8, end_lineno=117, end_col_offset=32)], lineno=115, col_offset=4, end_lineno=117, end_col_offset=32), Assign(targets=[Name(id='include_explain', ctx=Store(), lineno=119, col_offset=4, end_lineno=119, end_col_offset=19)], value=IfExp(test=Compare(left=Name(id='explain', ctx=Load(), lineno=119, col_offset=30, end_lineno=119, end_col_offset=37), ops=[Is()], comparators=[Constant(value=None, lineno=119, col_offset=41, end_lineno=119, end_col_offset=45)], lineno=119, col_offset=30, end_lineno=119, end_col_offset=45), body=Constant(value=True, lineno=119, col_offset=22, end_lineno=119, end_col_offset=26), orelse=Name(id='explain', ctx=Load(), lineno=119, col_offset=51, end_lineno=119, end_col_offset=58), lineno=119, col_offset=22, end_lineno=119, end_col_offset=58), lineno=119, col_offset=4, end_lineno=119, end_col_offset=58), If(test=Name(id='candidate_ids', ctx=Load(), lineno=120, col_offset=7, end_lineno=120, end_col_offset=20), body=[Assign(targets=[Name(id='hits', ctx=Store(), lineno=121, col_offset=8, end_lineno=121, end_col_offset=12)], value=Call(func=Attribute(value=Name(id='index', ctx=Load(), lineno=121, col_offset=15, end_lineno=121, end_col_offset=20), attr='rescore', ctx=Load(), lineno=121, col_offset=15, end_lineno=121, end_col_offset=28), keywords=[keyword(arg='query', value=Name(id='query', ctx=Load(), lineno=122, col_offset=18, end_lineno=122, end_col_offset=23), lineno=122, col_offset=12, end_lineno=122, end_col_offset=23), keyword(arg='candidate_chunk_ids', value=Name(id='candidate_ids', ctx=Load(), lineno=123, col_offset=32, end_lineno=123, end_col_offset=45), lineno=123, col_offset=12, end_lineno=123, end_col_offset=45), keyword(arg='explain', value=Name(id='include_explain', ctx=Load(), lineno=124, col_offset=20, end_lineno=124, end_col_offset=35), lineno=124, col_offset=12, end_lineno=124, end_col_offset=35)], lineno=121, col_offset=15, end_lineno=125, end_col_offset=9), lineno=121, col_offset=8, end_lineno=125, end_col_offset=9)], orelse=[Assign(targets=[Name(id='hits', ctx=Store(), lineno=127, col_offset=8, end_lineno=127, end_col_offset=12)], value=Call(func=Attribute(value=Name(id='index', ctx=Load(), lineno=127, col_offset=15, end_lineno=127, end_col_offset=20), attr='search', ctx=Load(), lineno=127, col_offset=15, end_lineno=127, end_col_offset=27), keywords=[keyword(arg='query', value=Name(id='query', ctx=Load(), lineno=127, col_offset=34, end_lineno=127, end_col_offset=39), lineno=127, col_offset=28, end_lineno=127, end_col_offset=39), keyword(arg='k', value=Name(id='k', ctx=Load(), lineno=127, col_offset=43, end_lineno=127, end_col_offset=44), lineno=127, col_offset=41, end_lineno=127, end_col_offset=44), keyword(arg='explain', value=Name(id='include_explain', ctx=Load(), lineno=127, col_offset=54, end_lineno=127, end_col_offset=69), lineno=127, col_offset=46, end_lineno=127, end_col_offset=69)], lineno=127, col_offset=15, end_lineno=127, end_col_offset=70), lineno=127, col_offset=8, end_lineno=127, end_col_offset=70)], lineno=120, col_offset=4, end_lineno=127, end_col_offset=70), If(test=UnaryOp(op=Not(), operand=Name(id='hits', ctx=Load(), lineno=129, col_offset=11, end_lineno=129, end_col_offset=15), lineno=129, col_offset=7, end_lineno=129, end_col_offset=15), body=[Expr(value=Call(func=Attribute(value=Name(id='typer', ctx=Load(), lineno=130, col_offset=8, end_lineno=130, end_col_offset=13), attr='echo', ctx=Load(), lineno=130, col_offset=8, end_lineno=130, end_col_offset=18), args=[Constant(value='No hits returned.', lineno=130, col_offset=19, end_lineno=130, end_col_offset=38)], lineno=130, col_offset=8, end_lineno=130, end_col_offset=39), lineno=130, col_offset=8, end_lineno=130, end_col_offset=39), Return(lineno=131, col_offset=8, end_lineno=131, end_col_offset=14)], lineno=129, col_offset=4, end_lineno=131, end_col_offset=14), Expr(value=Call(func=Attribute(value=Name(id='typer', ctx=Load(), lineno=132, col_offset=4, end_lineno=132, end_col_offset=9), attr='echo', ctx=Load(), lineno=132, col_offset=4, end_lineno=132, end_col_offset=14), args=[JoinedStr(values=[Constant(value='Top ', lineno=132, col_offset=17, end_lineno=132, end_col_offset=21), FormattedValue(value=Call(func=Name(id='min', ctx=Load(), lineno=132, col_offset=22, end_lineno=132, end_col_offset=25), args=[Name(id='k', ctx=Load(), lineno=132, col_offset=26, end_lineno=132, end_col_offset=27), Call(func=Name(id='len', ctx=Load(), lineno=132, col_offset=29, end_lineno=132, end_col_offset=32), args=[Name(id='hits', ctx=Load(), lineno=132, col_offset=33, end_lineno=132, end_col_offset=37)], lineno=132, col_offset=29, end_lineno=132, end_col_offset=38)], lineno=132, col_offset=22, end_lineno=132, end_col_offset=39), conversion=-1, lineno=132, col_offset=21, end_lineno=132, end_col_offset=40), Constant(value=' hits for query: ', lineno=132, col_offset=40, end_lineno=132, end_col_offset=57), FormattedValue(value=Name(id='query', ctx=Load(), lineno=132, col_offset=58, end_lineno=132, end_col_offset=63), conversion=114, lineno=132, col_offset=57, end_lineno=132, end_col_offset=66)], lineno=132, col_offset=15, end_lineno=132, end_col_offset=67)], lineno=132, col_offset=4, end_lineno=132, end_col_offset=68), lineno=132, col_offset=4, end_lineno=132, end_col_offset=68), For(target=Tuple(elts=[Name(id='rank', ctx=Store(), lineno=133, col_offset=8, end_lineno=133, end_col_offset=12), Tuple(elts=[Name(id='chunk_id', ctx=Store(), lineno=133, col_offset=15, end_lineno=133, end_col_offset=23), Name(id='score', ctx=Store(), lineno=133, col_offset=25, end_lineno=133, end_col_offset=30), Name(id='payload', ctx=Store(), lineno=133, col_offset=32, end_lineno=133, end_col_offset=39)], ctx=Store(), lineno=133, col_offset=14, end_lineno=133, end_col_offset=40)], ctx=Store(), lineno=133, col_offset=8, end_lineno=133, end_col_offset=40), iter=Call(func=Name(id='enumerate', ctx=Load(), lineno=133, col_offset=44, end_lineno=133, end_col_offset=53), args=[Subscript(value=Name(id='hits', ctx=Load(), lineno=133, col_offset=54, end_lineno=133, end_col_offset=58), slice=Slice(upper=Name(id='k', ctx=Load(), lineno=133, col_offset=60, end_lineno=133, end_col_offset=61), lineno=133, col_offset=59, end_lineno=133, end_col_offset=61), ctx=Load(), lineno=133, col_offset=54, end_lineno=133, end_col_offset=62)], keywords=[keyword(arg='start', value=Constant(value=1, lineno=133, col_offset=70, end_lineno=133, end_col_offset=71), lineno=133, col_offset=64, end_lineno=133, end_col_offset=71)], lineno=133, col_offset=44, end_lineno=133, end_col_offset=72), body=[Expr(value=Call(func=Attribute(value=Name(id='typer', ctx=Load(), lineno=134, col_offset=8, end_lineno=134, end_col_offset=13), attr='echo', ctx=Load(), lineno=134, col_offset=8, end_lineno=134, end_col_offset=18), args=[JoinedStr(values=[Constant(value='[', lineno=134, col_offset=21, end_lineno=134, end_col_offset=22), FormattedValue(value=Name(id='rank', ctx=Load(), lineno=134, col_offset=23, end_lineno=134, end_col_offset=27), conversion=-1, lineno=134, col_offset=22, end_lineno=134, end_col_offset=28), Constant(value='] chunk_id=', lineno=134, col_offset=28, end_lineno=134, end_col_offset=39), FormattedValue(value=Name(id='chunk_id', ctx=Load(), lineno=134, col_offset=40, end_lineno=134, end_col_offset=48), conversion=-1, lineno=134, col_offset=39, end_lineno=134, end_col_offset=49), Constant(value=' score=', lineno=134, col_offset=49, end_lineno=134, end_col_offset=56), FormattedValue(value=Name(id='score', ctx=Load(), lineno=134, col_offset=57, end_lineno=134, end_col_offset=62), conversion=-1, format_spec=JoinedStr(values=[Constant(value='.4f', lineno=134, col_offset=63, end_lineno=134, end_col_offset=66)], lineno=134, col_offset=62, end_lineno=134, end_col_offset=66), lineno=134, col_offset=56, end_lineno=134, end_col_offset=67)], lineno=134, col_offset=19, end_lineno=134, end_col_offset=68)], lineno=134, col_offset=8, end_lineno=134, end_col_offset=69), lineno=134, col_offset=8, end_lineno=134, end_col_offset=69), If(test=BoolOp(op=And(), values=[Name(id='include_explain', ctx=Load(), lineno=135, col_offset=11, end_lineno=135, end_col_offset=26), Name(id='payload', ctx=Load(), lineno=135, col_offset=31, end_lineno=135, end_col_offset=38)], lineno=135, col_offset=11, end_lineno=135, end_col_offset=38), body=[Assign(targets=[Name(id='matches', ctx=Store(), lineno=136, col_offset=12, end_lineno=136, end_col_offset=19)], value=BoolOp(op=Or(), values=[Call(func=Attribute(value=Name(id='payload', ctx=Load(), lineno=136, col_offset=22, end_lineno=136, end_col_offset=29), attr='get', ctx=Load(), lineno=136, col_offset=22, end_lineno=136, end_col_offset=33), args=[Constant(value='token_matches', lineno=136, col_offset=34, end_lineno=136, end_col_offset=49)], lineno=136, col_offset=22, end_lineno=136, end_col_offset=50), List(ctx=Load(), lineno=136, col_offset=54, end_lineno=136, end_col_offset=56)], lineno=136, col_offset=22, end_lineno=136, end_col_offset=56), lineno=136, col_offset=12, end_lineno=136, end_col_offset=56), Assign(targets=[Name(id='preview', ctx=Store(), lineno=137, col_offset=12, end_lineno=137, end_col_offset=19)], value=Call(func=Attribute(value=Constant(value=', ', lineno=137, col_offset=22, end_lineno=137, end_col_offset=26), attr='join', ctx=Load(), lineno=137, col_offset=22, end_lineno=137, end_col_offset=31), args=[GeneratorExp(elt=JoinedStr(values=[Constant(value='(q=', lineno=138, col_offset=18, end_lineno=138, end_col_offset=21), FormattedValue(value=Subscript(value=Name(id='match', ctx=Load(), lineno=138, col_offset=22, end_lineno=138, end_col_offset=27), slice=Constant(value='q_index', lineno=138, col_offset=28, end_lineno=138, end_col_offset=37), ctx=Load(), lineno=138, col_offset=22, end_lineno=138, end_col_offset=38), conversion=-1, lineno=138, col_offset=21, end_lineno=138, end_col_offset=39), Constant(value=' doc=', lineno=138, col_offset=39, end_lineno=138, end_col_offset=44), FormattedValue(value=Subscript(value=Name(id='match', ctx=Load(), lineno=138, col_offset=45, end_lineno=138, end_col_offset=50), slice=Constant(value='doc_index', lineno=138, col_offset=51, end_lineno=138, end_col_offset=62), ctx=Load(), lineno=138, col_offset=45, end_lineno=138, end_col_offset=63), conversion=-1, lineno=138, col_offset=44, end_lineno=138, end_col_offset=64), Constant(value=' sim=', lineno=138, col_offset=64, end_lineno=138, end_col_offset=69), FormattedValue(value=Subscript(value=Name(id='match', ctx=Load(), lineno=138, col_offset=70, end_lineno=138, end_col_offset=75), slice=Constant(value='similarity', lineno=138, col_offset=76, end_lineno=138, end_col_offset=88), ctx=Load(), lineno=138, col_offset=70, end_lineno=138, end_col_offset=89), conversion=-1, format_spec=JoinedStr(values=[Constant(value='.3f', lineno=138, col_offset=90, end_lineno=138, end_col_offset=93)], lineno=138, col_offset=89, end_lineno=138, end_col_offset=93), lineno=138, col_offset=69, end_lineno=138, end_col_offset=94), Constant(value=')', lineno=138, col_offset=94, end_lineno=138, end_col_offset=95)], lineno=138, col_offset=16, end_lineno=138, end_col_offset=96), generators=[comprehension(target=Name(id='match', ctx=Store(), lineno=139, col_offset=20, end_lineno=139, end_col_offset=25), iter=Name(id='matches', ctx=Load(), lineno=139, col_offset=29, end_lineno=139, end_col_offset=36), is_async=0)], lineno=137, col_offset=31, end_lineno=140, end_col_offset=13)], lineno=137, col_offset=22, end_lineno=140, end_col_offset=13), lineno=137, col_offset=12, end_lineno=140, end_col_offset=13), If(test=Name(id='preview', ctx=Load(), lineno=141, col_offset=15, end_lineno=141, end_col_offset=22), body=[Expr(value=Call(func=Attribute(value=Name(id='typer', ctx=Load(), lineno=142, col_offset=16, end_lineno=142, end_col_offset=21), attr='echo', ctx=Load(), lineno=142, col_offset=16, end_lineno=142, end_col_offset=26), args=[JoinedStr(values=[Constant(value='    tokens: ', lineno=142, col_offset=29, end_lineno=142, end_col_offset=41), FormattedValue(value=Name(id='preview', ctx=Load(), lineno=142, col_offset=42, end_lineno=142, end_col_offset=49), conversion=-1, lineno=142, col_offset=41, end_lineno=142, end_col_offset=50)], lineno=142, col_offset=27, end_lineno=142, end_col_offset=51)], lineno=142, col_offset=16, end_lineno=142, end_col_offset=52), lineno=142, col_offset=16, end_lineno=142, end_col_offset=52)], lineno=141, col_offset=12, end_lineno=142, end_col_offset=52)], lineno=135, col_offset=8, end_lineno=142, end_col_offset=52)], lineno=133, col_offset=4, end_lineno=142, end_col_offset=52)], decorator_list=[Call(func=Attribute(value=Name(id='app', ctx=Load(), lineno=60, col_offset=1, end_lineno=60, end_col_offset=4), attr='command', ctx=Load(), lineno=60, col_offset=1, end_lineno=60, end_col_offset=12), args=[Constant(value='search', lineno=60, col_offset=13, end_lineno=60, end_col_offset=21)], lineno=60, col_offset=1, end_lineno=60, end_col_offset=22)], returns=Constant(value=None, lineno=69, col_offset=5, end_lineno=69, end_col_offset=9), lineno=61, col_offset=0, end_lineno=142, end_col_offset=52), FunctionDef(name='main', args=arguments(), body=[Expr(value=Constant(value='Execute the Typer app.', lineno=146, col_offset=4, end_lineno=146, end_col_offset=32), lineno=146, col_offset=4, end_lineno=146, end_col_offset=32), Expr(value=Call(func=Name(id='app', ctx=Load(), lineno=147, col_offset=4, end_lineno=147, end_col_offset=7), lineno=147, col_offset=4, end_lineno=147, end_col_offset=9), lineno=147, col_offset=4, end_lineno=147, end_col_offset=9)], returns=Constant(value=None, lineno=145, col_offset=14, end_lineno=145, end_col_offset=18), lineno=145, col_offset=0, end_lineno=147, end_col_offset=9), If(test=Compare(left=Name(id='__name__', ctx=Load(), lineno=150, col_offset=3, end_lineno=150, end_col_offset=11), ops=[Eq()], comparators=[Constant(value='__main__', lineno=150, col_offset=15, end_lineno=150, end_col_offset=25)], lineno=150, col_offset=3, end_lineno=150, end_col_offset=25), body=[Expr(value=Call(func=Name(id='main', ctx=Load(), lineno=151, col_offset=4, end_lineno=151, end_col_offset=8), lineno=151, col_offset=4, end_lineno=151, end_col_offset=10), lineno=151, col_offset=4, end_lineno=151, end_col_offset=10)], lineno=150, col_offset=0, end_lineno=151, end_col_offset=10)])
Module(body=[Expr(value=Constant(value="Utilities for deterministic module and attribute loading in tests.\n\nThese helpers wrap :mod:`importlib` to avoid inline ``import`` statements in\ntests, satisfying Ruff's typing-gate checks while keeping imports explicit and\nfully typed. They only perform runtime imports when invoked, which preserves\nthe lazy-loading guarantees required by the fa√ßade modules documented in\n``AGENTS.md``.\n", lineno=1, col_offset=0, end_lineno=8, end_col_offset=3), lineno=1, col_offset=0, end_lineno=8, end_col_offset=3), ImportFrom(module='__future__', names=[alias(name='annotations', lineno=10, col_offset=23, end_lineno=10, end_col_offset=34)], level=0, lineno=10, col_offset=0, end_lineno=10, end_col_offset=34), ImportFrom(module='importlib', names=[alias(name='import_module', lineno=12, col_offset=22, end_lineno=12, end_col_offset=35)], level=0, lineno=12, col_offset=0, end_lineno=12, end_col_offset=35), ImportFrom(module='typing', names=[alias(name='TYPE_CHECKING', lineno=13, col_offset=19, end_lineno=13, end_col_offset=32), alias(name='TypeVar', lineno=13, col_offset=34, end_lineno=13, end_col_offset=41)], level=0, lineno=13, col_offset=0, end_lineno=13, end_col_offset=41), If(test=Name(id='TYPE_CHECKING', ctx=Load(), lineno=15, col_offset=3, end_lineno=15, end_col_offset=16), body=[ImportFrom(module='types', names=[alias(name='ModuleType', lineno=16, col_offset=22, end_lineno=16, end_col_offset=32)], level=0, lineno=16, col_offset=4, end_lineno=16, end_col_offset=32)], lineno=15, col_offset=0, end_lineno=16, end_col_offset=32), Assign(targets=[Name(id='T', ctx=Store(), lineno=18, col_offset=0, end_lineno=18, end_col_offset=1)], value=Call(func=Name(id='TypeVar', ctx=Load(), lineno=18, col_offset=4, end_lineno=18, end_col_offset=11), args=[Constant(value='T', lineno=18, col_offset=12, end_lineno=18, end_col_offset=15)], lineno=18, col_offset=4, end_lineno=18, end_col_offset=16), lineno=18, col_offset=0, end_lineno=18, end_col_offset=16), FunctionDef(name='load_module', args=arguments(args=[arg(arg='module_name', annotation=Name(id='str', ctx=Load(), lineno=21, col_offset=29, end_lineno=21, end_col_offset=32), lineno=21, col_offset=16, end_lineno=21, end_col_offset=32)]), body=[Expr(value=Constant(value='Import and return the module identified by ``module_name``.\n\n    Parameters\n    ----------\n    module_name : str\n        Dotted name of the module to import.\n\n    Returns\n    -------\n    ModuleType\n        Imported module object.\n    ', lineno=22, col_offset=4, end_lineno=33, end_col_offset=7), lineno=22, col_offset=4, end_lineno=33, end_col_offset=7), Return(value=Call(func=Name(id='import_module', ctx=Load(), lineno=34, col_offset=11, end_lineno=34, end_col_offset=24), args=[Name(id='module_name', ctx=Load(), lineno=34, col_offset=25, end_lineno=34, end_col_offset=36)], lineno=34, col_offset=11, end_lineno=34, end_col_offset=37), lineno=34, col_offset=4, end_lineno=34, end_col_offset=37)], returns=Name(id='ModuleType', ctx=Load(), lineno=21, col_offset=37, end_lineno=21, end_col_offset=47), lineno=21, col_offset=0, end_lineno=34, end_col_offset=37), FunctionDef(name='load_attribute', args=arguments(args=[arg(arg='module_name', annotation=Name(id='str', ctx=Load(), lineno=37, col_offset=32, end_lineno=37, end_col_offset=35), lineno=37, col_offset=19, end_lineno=37, end_col_offset=35), arg(arg='attribute', annotation=Name(id='str', ctx=Load(), lineno=37, col_offset=48, end_lineno=37, end_col_offset=51), lineno=37, col_offset=37, end_lineno=37, end_col_offset=51)]), body=[Expr(value=Constant(value='Load ``attribute`` from ``module_name`` and return the value.\n\n    Parameters\n    ----------\n    module_name : str\n        Dotted name of the module.\n    attribute : str\n        Attribute name to load.\n\n    Returns\n    -------\n    object\n        Attribute value.\n    ', lineno=38, col_offset=4, end_lineno=51, end_col_offset=7), lineno=38, col_offset=4, end_lineno=51, end_col_offset=7), Assign(targets=[Name(id='module', ctx=Store(), lineno=52, col_offset=4, end_lineno=52, end_col_offset=10)], value=Call(func=Name(id='load_module', ctx=Load(), lineno=52, col_offset=13, end_lineno=52, end_col_offset=24), args=[Name(id='module_name', ctx=Load(), lineno=52, col_offset=25, end_lineno=52, end_col_offset=36)], lineno=52, col_offset=13, end_lineno=52, end_col_offset=37), lineno=52, col_offset=4, end_lineno=52, end_col_offset=37), AnnAssign(target=Name(id='attr', ctx=Store(), lineno=53, col_offset=4, end_lineno=53, end_col_offset=8), annotation=Name(id='object', ctx=Load(), lineno=53, col_offset=10, end_lineno=53, end_col_offset=16), value=Call(func=Name(id='getattr', ctx=Load(), lineno=53, col_offset=19, end_lineno=53, end_col_offset=26), args=[Name(id='module', ctx=Load(), lineno=53, col_offset=27, end_lineno=53, end_col_offset=33), Name(id='attribute', ctx=Load(), lineno=53, col_offset=35, end_lineno=53, end_col_offset=44)], lineno=53, col_offset=19, end_lineno=53, end_col_offset=45), simple=1, lineno=53, col_offset=4, end_lineno=53, end_col_offset=45), Return(value=Name(id='attr', ctx=Load(), lineno=54, col_offset=11, end_lineno=54, end_col_offset=15), lineno=54, col_offset=4, end_lineno=54, end_col_offset=15)], returns=Name(id='object', ctx=Load(), lineno=37, col_offset=56, end_lineno=37, end_col_offset=62), lineno=37, col_offset=0, end_lineno=54, end_col_offset=15), FunctionDef(name='load_typed_attribute', args=arguments(args=[arg(arg='module_name', annotation=Name(id='str', ctx=Load(), lineno=57, col_offset=41, end_lineno=57, end_col_offset=44), lineno=57, col_offset=28, end_lineno=57, end_col_offset=44), arg(arg='attribute', annotation=Name(id='str', ctx=Load(), lineno=57, col_offset=57, end_lineno=57, end_col_offset=60), lineno=57, col_offset=46, end_lineno=57, end_col_offset=60), arg(arg='expected_type', annotation=Subscript(value=Name(id='type', ctx=Load(), lineno=57, col_offset=77, end_lineno=57, end_col_offset=81), slice=Name(id='T', ctx=Load(), lineno=57, col_offset=82, end_lineno=57, end_col_offset=83), ctx=Load(), lineno=57, col_offset=77, end_lineno=57, end_col_offset=84), lineno=57, col_offset=62, end_lineno=57, end_col_offset=84)]), body=[Expr(value=Constant(value='Load attribute and ensure it matches expected_type at runtime.\n\n    Parameters\n    ----------\n    module_name : str\n        Dotted name of the module.\n    attribute : str\n        Attribute name to load.\n    expected_type : type[T]\n        Expected type (checked at runtime).\n\n    Returns\n    -------\n    T\n        Attribute value typed as T.\n\n    Raises\n    ------\n    TypeError\n        If attribute does not match expected_type.\n    ', lineno=58, col_offset=4, end_lineno=78, end_col_offset=7), lineno=58, col_offset=4, end_lineno=78, end_col_offset=7), Assign(targets=[Name(id='value', ctx=Store(), lineno=79, col_offset=4, end_lineno=79, end_col_offset=9)], value=Call(func=Name(id='load_attribute', ctx=Load(), lineno=79, col_offset=12, end_lineno=79, end_col_offset=26), args=[Name(id='module_name', ctx=Load(), lineno=79, col_offset=27, end_lineno=79, end_col_offset=38), Name(id='attribute', ctx=Load(), lineno=79, col_offset=40, end_lineno=79, end_col_offset=49)], lineno=79, col_offset=12, end_lineno=79, end_col_offset=50), lineno=79, col_offset=4, end_lineno=79, end_col_offset=50), If(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=80, col_offset=7, end_lineno=80, end_col_offset=17), args=[Name(id='value', ctx=Load(), lineno=80, col_offset=18, end_lineno=80, end_col_offset=23), Name(id='expected_type', ctx=Load(), lineno=80, col_offset=25, end_lineno=80, end_col_offset=38)], lineno=80, col_offset=7, end_lineno=80, end_col_offset=39), body=[Return(value=Name(id='value', ctx=Load(), lineno=81, col_offset=15, end_lineno=81, end_col_offset=20), lineno=81, col_offset=8, end_lineno=81, end_col_offset=20)], lineno=80, col_offset=4, end_lineno=81, end_col_offset=20), Assign(targets=[Name(id='message', ctx=Store(), lineno=83, col_offset=4, end_lineno=83, end_col_offset=11)], value=JoinedStr(values=[FormattedValue(value=Name(id='module_name', ctx=Load(), lineno=83, col_offset=17, end_lineno=83, end_col_offset=28), conversion=-1, lineno=83, col_offset=16, end_lineno=83, end_col_offset=29), Constant(value='.', lineno=83, col_offset=29, end_lineno=83, end_col_offset=30), FormattedValue(value=Name(id='attribute', ctx=Load(), lineno=83, col_offset=31, end_lineno=83, end_col_offset=40), conversion=-1, lineno=83, col_offset=30, end_lineno=83, end_col_offset=41), Constant(value=' expected ', lineno=83, col_offset=41, end_lineno=83, end_col_offset=51), FormattedValue(value=Name(id='expected_type', ctx=Load(), lineno=83, col_offset=52, end_lineno=83, end_col_offset=65), conversion=114, lineno=83, col_offset=51, end_lineno=83, end_col_offset=68), Constant(value=' but received ', lineno=83, col_offset=68, end_lineno=83, end_col_offset=82), FormattedValue(value=Call(func=Name(id='type', ctx=Load(), lineno=83, col_offset=83, end_lineno=83, end_col_offset=87), args=[Name(id='value', ctx=Load(), lineno=83, col_offset=88, end_lineno=83, end_col_offset=93)], lineno=83, col_offset=83, end_lineno=83, end_col_offset=94), conversion=114, lineno=83, col_offset=82, end_lineno=83, end_col_offset=97)], lineno=83, col_offset=14, end_lineno=83, end_col_offset=98), lineno=83, col_offset=4, end_lineno=83, end_col_offset=98), Raise(exc=Call(func=Name(id='TypeError', ctx=Load(), lineno=84, col_offset=10, end_lineno=84, end_col_offset=19), args=[Name(id='message', ctx=Load(), lineno=84, col_offset=20, end_lineno=84, end_col_offset=27)], lineno=84, col_offset=10, end_lineno=84, end_col_offset=28), lineno=84, col_offset=4, end_lineno=84, end_col_offset=28)], returns=Name(id='T', ctx=Load(), lineno=57, col_offset=89, end_lineno=57, end_col_offset=90), type_params=[TypeVar(name='T', lineno=57, col_offset=25, end_lineno=57, end_col_offset=26)], lineno=57, col_offset=0, end_lineno=84, end_col_offset=28)])
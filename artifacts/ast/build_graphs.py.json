Module(body=[Expr(value=Constant(value='Overview of build graphs.\n\nThis module bundles build graphs logic for the kgfoundry stack. It groups related helpers so\ndownstream packages can import a single cohesive namespace. Refer to the functions and classes below\nfor implementation specifics.\n', lineno=1, col_offset=0, end_lineno=6, end_col_offset=3), lineno=1, col_offset=0, end_lineno=6, end_col_offset=3), ImportFrom(module='__future__', names=[alias(name='annotations', lineno=8, col_offset=23, end_lineno=8, end_col_offset=34)], level=0, lineno=8, col_offset=0, end_lineno=8, end_col_offset=34), Import(names=[alias(name='argparse', lineno=10, col_offset=7, end_lineno=10, end_col_offset=15)], lineno=10, col_offset=0, end_lineno=10, end_col_offset=15), Import(names=[alias(name='hashlib', lineno=11, col_offset=7, end_lineno=11, end_col_offset=14)], lineno=11, col_offset=0, end_lineno=11, end_col_offset=14), Import(names=[alias(name='importlib', lineno=12, col_offset=7, end_lineno=12, end_col_offset=16)], lineno=12, col_offset=0, end_lineno=12, end_col_offset=16), Import(names=[alias(name='json', lineno=13, col_offset=7, end_lineno=13, end_col_offset=11)], lineno=13, col_offset=0, end_lineno=13, end_col_offset=11), Import(names=[alias(name='logging', lineno=14, col_offset=7, end_lineno=14, end_col_offset=14)], lineno=14, col_offset=0, end_lineno=14, end_col_offset=14), Import(names=[alias(name='os', lineno=15, col_offset=7, end_lineno=15, end_col_offset=9)], lineno=15, col_offset=0, end_lineno=15, end_col_offset=9), Import(names=[alias(name='shutil', lineno=16, col_offset=7, end_lineno=16, end_col_offset=13)], lineno=16, col_offset=0, end_lineno=16, end_col_offset=13), Import(names=[alias(name='sys', lineno=17, col_offset=7, end_lineno=17, end_col_offset=10)], lineno=17, col_offset=0, end_lineno=17, end_col_offset=10), Import(names=[alias(name='tempfile', lineno=18, col_offset=7, end_lineno=18, end_col_offset=15)], lineno=18, col_offset=0, end_lineno=18, end_col_offset=15), Import(names=[alias(name='time', lineno=19, col_offset=7, end_lineno=19, end_col_offset=11)], lineno=19, col_offset=0, end_lineno=19, end_col_offset=11), Import(names=[alias(name='warnings', lineno=20, col_offset=7, end_lineno=20, end_col_offset=15)], lineno=20, col_offset=0, end_lineno=20, end_col_offset=15), ImportFrom(module='collections.abc', names=[alias(name='Mapping', lineno=21, col_offset=28, end_lineno=21, end_col_offset=35), alias(name='Sequence', lineno=21, col_offset=37, end_lineno=21, end_col_offset=45)], level=0, lineno=21, col_offset=0, end_lineno=21, end_col_offset=45), ImportFrom(module='concurrent.futures', names=[alias(name='ProcessPoolExecutor', lineno=22, col_offset=31, end_lineno=22, end_col_offset=50), alias(name='as_completed', lineno=22, col_offset=52, end_lineno=22, end_col_offset=64)], level=0, lineno=22, col_offset=0, end_lineno=22, end_col_offset=64), ImportFrom(module='dataclasses', names=[alias(name='dataclass', lineno=23, col_offset=24, end_lineno=23, end_col_offset=33)], level=0, lineno=23, col_offset=0, end_lineno=23, end_col_offset=33), ImportFrom(module='functools', names=[alias(name='partial', lineno=24, col_offset=22, end_lineno=24, end_col_offset=29)], level=0, lineno=24, col_offset=0, end_lineno=24, end_col_offset=29), ImportFrom(module='pathlib', names=[alias(name='Path', lineno=25, col_offset=20, end_lineno=25, end_col_offset=24)], level=0, lineno=25, col_offset=0, end_lineno=25, end_col_offset=24), ImportFrom(module='tempfile', names=[alias(name='NamedTemporaryFile', lineno=26, col_offset=21, end_lineno=26, end_col_offset=39)], level=0, lineno=26, col_offset=0, end_lineno=26, end_col_offset=39), ImportFrom(module='typing', names=[alias(name='TYPE_CHECKING', lineno=27, col_offset=19, end_lineno=27, end_col_offset=32), alias(name='Any', lineno=27, col_offset=34, end_lineno=27, end_col_offset=37), alias(name='cast', lineno=27, col_offset=39, end_lineno=27, end_col_offset=43)], level=0, lineno=27, col_offset=0, end_lineno=27, end_col_offset=43), ImportFrom(module='uuid', names=[alias(name='uuid4', lineno=28, col_offset=17, end_lineno=28, end_col_offset=22)], level=0, lineno=28, col_offset=0, end_lineno=28, end_col_offset=22), ImportFrom(module='kgfoundry_common.logging', names=[alias(name='setup_logging', lineno=30, col_offset=37, end_lineno=30, end_col_offset=50)], level=0, lineno=30, col_offset=0, end_lineno=30, end_col_offset=50), ImportFrom(module='tools', names=[alias(name='JsonValue', lineno=32, col_offset=4, end_lineno=32, end_col_offset=13), alias(name='ToolExecutionError', lineno=33, col_offset=4, end_lineno=33, end_col_offset=22), alias(name='ToolRunResult', lineno=34, col_offset=4, end_lineno=34, end_col_offset=17), alias(name='ValidationError', lineno=35, col_offset=4, end_lineno=35, end_col_offset=19), alias(name='get_logger', lineno=36, col_offset=4, end_lineno=36, end_col_offset=14), alias(name='resolve_path', lineno=37, col_offset=4, end_lineno=37, end_col_offset=16), alias(name='run_tool', lineno=38, col_offset=4, end_lineno=38, end_col_offset=12), alias(name='with_fields', lineno=39, col_offset=4, end_lineno=39, end_col_offset=15)], level=0, lineno=31, col_offset=0, end_lineno=40, end_col_offset=1), ImportFrom(module='tools._shared.cli', names=[alias(name='CliEnvelope', lineno=42, col_offset=4, end_lineno=42, end_col_offset=15), alias(name='CliEnvelopeBuilder', lineno=43, col_offset=4, end_lineno=43, end_col_offset=22), alias(name='CliErrorStatus', lineno=44, col_offset=4, end_lineno=44, end_col_offset=18), alias(name='CliStatus', lineno=45, col_offset=4, end_lineno=45, end_col_offset=13), alias(name='render_cli_envelope', lineno=46, col_offset=4, end_lineno=46, end_col_offset=23)], level=0, lineno=41, col_offset=0, end_lineno=47, end_col_offset=1), ImportFrom(module='tools._shared.logging', names=[alias(name='LoggerAdapter', lineno=48, col_offset=34, end_lineno=48, end_col_offset=47)], level=0, lineno=48, col_offset=0, end_lineno=48, end_col_offset=47), ImportFrom(module='tools._shared.problem_details', names=[alias(name='ProblemDetailsDict', lineno=50, col_offset=4, end_lineno=50, end_col_offset=22), alias(name='ProblemDetailsParams', lineno=51, col_offset=4, end_lineno=51, end_col_offset=24), alias(name='build_problem_details', lineno=52, col_offset=4, end_lineno=52, end_col_offset=25)], level=0, lineno=49, col_offset=0, end_lineno=53, end_col_offset=1), ImportFrom(module='tools.docs', names=[alias(name='cli_context', asname='docs_cli_context', lineno=54, col_offset=23, end_lineno=54, end_col_offset=54)], level=0, lineno=54, col_offset=0, end_lineno=54, end_col_offset=54), ImportFrom(module='tools.docs.errors', names=[alias(name='GraphBuildError', lineno=55, col_offset=30, end_lineno=55, end_col_offset=45)], level=0, lineno=55, col_offset=0, end_lineno=55, end_col_offset=45), ClassDef(name='GraphPolicyError', bases=[Name(id='GraphBuildError', ctx=Load(), lineno=58, col_offset=23, end_lineno=58, end_col_offset=38)], body=[Expr(value=Constant(value='Raised when dependency graph policy checks fail.', lineno=59, col_offset=4, end_lineno=59, end_col_offset=58), lineno=59, col_offset=4, end_lineno=59, end_col_offset=58), FunctionDef(name='__init__', args=arguments(args=[arg(arg='self', lineno=61, col_offset=17, end_lineno=61, end_col_offset=21), arg(arg='message', annotation=Name(id='str', ctx=Load(), lineno=61, col_offset=32, end_lineno=61, end_col_offset=35), lineno=61, col_offset=23, end_lineno=61, end_col_offset=35)], kwonlyargs=[arg(arg='errors', annotation=BinOp(left=Subscript(value=Name(id='Sequence', ctx=Load(), lineno=61, col_offset=48, end_lineno=61, end_col_offset=56), slice=Name(id='str', ctx=Load(), lineno=61, col_offset=57, end_lineno=61, end_col_offset=60), ctx=Load(), lineno=61, col_offset=48, end_lineno=61, end_col_offset=61), op=BitOr(), right=Constant(value=None, lineno=61, col_offset=64, end_lineno=61, end_col_offset=68), lineno=61, col_offset=48, end_lineno=61, end_col_offset=68), lineno=61, col_offset=40, end_lineno=61, end_col_offset=68)], kw_defaults=[Constant(value=None, lineno=61, col_offset=71, end_lineno=61, end_col_offset=75)]), body=[Expr(value=Call(func=Attribute(value=Call(func=Name(id='super', ctx=Load(), lineno=62, col_offset=8, end_lineno=62, end_col_offset=13), lineno=62, col_offset=8, end_lineno=62, end_col_offset=15), attr='__init__', ctx=Load(), lineno=62, col_offset=8, end_lineno=62, end_col_offset=24), args=[Name(id='message', ctx=Load(), lineno=62, col_offset=25, end_lineno=62, end_col_offset=32)], lineno=62, col_offset=8, end_lineno=62, end_col_offset=33), lineno=62, col_offset=8, end_lineno=62, end_col_offset=33), Assign(targets=[Attribute(value=Name(id='self', ctx=Load(), lineno=63, col_offset=8, end_lineno=63, end_col_offset=12), attr='errors', ctx=Store(), lineno=63, col_offset=8, end_lineno=63, end_col_offset=19)], value=Call(func=Name(id='list', ctx=Load(), lineno=63, col_offset=22, end_lineno=63, end_col_offset=26), args=[BoolOp(op=Or(), values=[Name(id='errors', ctx=Load(), lineno=63, col_offset=27, end_lineno=63, end_col_offset=33), List(ctx=Load(), lineno=63, col_offset=37, end_lineno=63, end_col_offset=39)], lineno=63, col_offset=27, end_lineno=63, end_col_offset=39)], lineno=63, col_offset=22, end_lineno=63, end_col_offset=40), lineno=63, col_offset=8, end_lineno=63, end_col_offset=40)], returns=Constant(value=None, lineno=61, col_offset=80, end_lineno=61, end_col_offset=84), lineno=61, col_offset=4, end_lineno=63, end_col_offset=40)], lineno=58, col_offset=0, end_lineno=63, end_col_offset=40), If(test=Name(id='TYPE_CHECKING', ctx=Load(), lineno=66, col_offset=3, end_lineno=66, end_col_offset=16), body=[ImportFrom(module='collections.abc', names=[alias(name='Iterator', lineno=67, col_offset=32, end_lineno=67, end_col_offset=40)], level=0, lineno=67, col_offset=4, end_lineno=67, end_col_offset=40), ImportFrom(module='types', names=[alias(name='ModuleType', lineno=68, col_offset=22, end_lineno=68, end_col_offset=32)], level=0, lineno=68, col_offset=4, end_lineno=68, end_col_offset=32), Import(names=[alias(name='networkx', asname='nx_mod', lineno=70, col_offset=11, end_lineno=70, end_col_offset=29)], lineno=70, col_offset=4, end_lineno=70, end_col_offset=29), Import(names=[alias(name='pydot', asname='pydot_mod', lineno=71, col_offset=11, end_lineno=71, end_col_offset=29)], lineno=71, col_offset=4, end_lineno=71, end_col_offset=29), Assign(targets=[Name(id='DiGraph', ctx=Store(), lineno=73, col_offset=4, end_lineno=73, end_col_offset=11)], value=Subscript(value=Attribute(value=Name(id='nx_mod', ctx=Load(), lineno=73, col_offset=14, end_lineno=73, end_col_offset=20), attr='DiGraph', ctx=Load(), lineno=73, col_offset=14, end_lineno=73, end_col_offset=28), slice=Name(id='Any', ctx=Load(), lineno=73, col_offset=29, end_lineno=73, end_col_offset=32), ctx=Load(), lineno=73, col_offset=14, end_lineno=73, end_col_offset=33), lineno=73, col_offset=4, end_lineno=73, end_col_offset=33), Assign(targets=[Name(id='PydotDot', ctx=Store(), lineno=74, col_offset=4, end_lineno=74, end_col_offset=12)], value=Attribute(value=Name(id='pydot_mod', ctx=Load(), lineno=74, col_offset=15, end_lineno=74, end_col_offset=24), attr='Dot', ctx=Load(), lineno=74, col_offset=15, end_lineno=74, end_col_offset=28), lineno=74, col_offset=4, end_lineno=74, end_col_offset=28)], orelse=[Assign(targets=[Name(id='DiGraph', ctx=Store(), lineno=76, col_offset=4, end_lineno=76, end_col_offset=11)], value=Name(id='Any', ctx=Load(), lineno=76, col_offset=14, end_lineno=76, end_col_offset=17), lineno=76, col_offset=4, end_lineno=76, end_col_offset=17), Assign(targets=[Name(id='PydotDot', ctx=Store(), lineno=77, col_offset=4, end_lineno=77, end_col_offset=12)], value=Name(id='Any', ctx=Load(), lineno=77, col_offset=15, end_lineno=77, end_col_offset=18), lineno=77, col_offset=4, end_lineno=77, end_col_offset=18)], lineno=66, col_offset=0, end_lineno=77, end_col_offset=18), Try(body=[ImportFrom(module='yaml', names=[alias(name='YAMLError', asname='_YamlError', lineno=80, col_offset=21, end_lineno=80, end_col_offset=44)], level=0, lineno=80, col_offset=4, end_lineno=80, end_col_offset=44)], handlers=[ExceptHandler(type=Tuple(elts=[Name(id='ModuleNotFoundError', ctx=Load(), lineno=81, col_offset=8, end_lineno=81, end_col_offset=27), Name(id='ImportError', ctx=Load(), lineno=81, col_offset=29, end_lineno=81, end_col_offset=40)], ctx=Load(), lineno=81, col_offset=7, end_lineno=81, end_col_offset=41), body=[Assign(targets=[Name(id='_YamlError', ctx=Store(), lineno=82, col_offset=4, end_lineno=82, end_col_offset=14)], value=Name(id='Exception', ctx=Load(), lineno=82, col_offset=17, end_lineno=82, end_col_offset=26), lineno=82, col_offset=4, end_lineno=82, end_col_offset=26)], lineno=81, col_offset=0, end_lineno=82, end_col_offset=26)], lineno=79, col_offset=0, end_lineno=82, end_col_offset=26), Assign(targets=[Name(id='YamlError', ctx=Store(), lineno=85, col_offset=0, end_lineno=85, end_col_offset=9)], value=Name(id='_YamlError', ctx=Load(), lineno=85, col_offset=12, end_lineno=85, end_col_offset=22), lineno=85, col_offset=0, end_lineno=85, end_col_offset=22), FunctionDef(name='_optional_import', args=arguments(args=[arg(arg='name', annotation=Name(id='str', ctx=Load(), lineno=88, col_offset=27, end_lineno=88, end_col_offset=30), lineno=88, col_offset=21, end_lineno=88, end_col_offset=30)]), body=[Expr(value=Constant(value='Import module if available.\n\n    Parameters\n    ----------\n    name : str\n        Module name to import.\n\n    Returns\n    -------\n    ModuleType | None\n        Imported module | None if import fails.\n    ', lineno=89, col_offset=4, end_lineno=100, end_col_offset=7), lineno=89, col_offset=4, end_lineno=100, end_col_offset=7), Try(body=[Return(value=Call(func=Attribute(value=Name(id='importlib', ctx=Load(), lineno=102, col_offset=15, end_lineno=102, end_col_offset=24), attr='import_module', ctx=Load(), lineno=102, col_offset=15, end_lineno=102, end_col_offset=38), args=[Name(id='name', ctx=Load(), lineno=102, col_offset=39, end_lineno=102, end_col_offset=43)], lineno=102, col_offset=15, end_lineno=102, end_col_offset=44), lineno=102, col_offset=8, end_lineno=102, end_col_offset=44)], handlers=[ExceptHandler(type=Name(id='ImportError', ctx=Load(), lineno=103, col_offset=11, end_lineno=103, end_col_offset=22), body=[Return(value=Constant(value=None, lineno=104, col_offset=15, end_lineno=104, end_col_offset=19), lineno=104, col_offset=8, end_lineno=104, end_col_offset=19)], lineno=103, col_offset=4, end_lineno=104, end_col_offset=19)], lineno=101, col_offset=4, end_lineno=104, end_col_offset=19)], returns=BinOp(left=Name(id='ModuleType', ctx=Load(), lineno=88, col_offset=35, end_lineno=88, end_col_offset=45), op=BitOr(), right=Constant(value=None, lineno=88, col_offset=48, end_lineno=88, end_col_offset=52), lineno=88, col_offset=35, end_lineno=88, end_col_offset=52), lineno=88, col_offset=0, end_lineno=104, end_col_offset=19), Assign(targets=[Name(id='CYCLE_LIMIT_ENV', ctx=Store(), lineno=107, col_offset=0, end_lineno=107, end_col_offset=15)], value=Constant(value='GRAPH_CYCLE_LIMIT', lineno=107, col_offset=18, end_lineno=107, end_col_offset=37), lineno=107, col_offset=0, end_lineno=107, end_col_offset=37), Assign(targets=[Name(id='CYCLE_LENGTH_ENV', ctx=Store(), lineno=108, col_offset=0, end_lineno=108, end_col_offset=16)], value=Constant(value='GRAPH_CYCLE_LEN', lineno=108, col_offset=19, end_lineno=108, end_col_offset=36), lineno=108, col_offset=0, end_lineno=108, end_col_offset=36), Assign(targets=[Name(id='EDGE_BUDGET_ENV', ctx=Store(), lineno=109, col_offset=0, end_lineno=109, end_col_offset=15)], value=Constant(value='GRAPH_EDGE_BUDGET', lineno=109, col_offset=18, end_lineno=109, end_col_offset=37), lineno=109, col_offset=0, end_lineno=109, end_col_offset=37), Assign(targets=[Name(id='DEFAULT_EDGE_BUDGET', ctx=Store(), lineno=110, col_offset=0, end_lineno=110, end_col_offset=19)], value=Constant(value=50000, lineno=110, col_offset=22, end_lineno=110, end_col_offset=28), lineno=110, col_offset=0, end_lineno=110, end_col_offset=28), Assign(targets=[Name(id='EDGE_COMPONENTS', ctx=Store(), lineno=111, col_offset=0, end_lineno=111, end_col_offset=15)], value=Constant(value=2, lineno=111, col_offset=18, end_lineno=111, end_col_offset=19), lineno=111, col_offset=0, end_lineno=111, end_col_offset=19), Assign(targets=[Name(id='SCC_SUMMARY_LIMIT', ctx=Store(), lineno=112, col_offset=0, end_lineno=112, end_col_offset=17)], value=Constant(value=10, lineno=112, col_offset=20, end_lineno=112, end_col_offset=22), lineno=112, col_offset=0, end_lineno=112, end_col_offset=22), Assign(targets=[Name(id='SCC_MEMBER_PREVIEW', ctx=Store(), lineno=113, col_offset=0, end_lineno=113, end_col_offset=18)], value=Constant(value=20, lineno=113, col_offset=21, end_lineno=113, end_col_offset=23), lineno=113, col_offset=0, end_lineno=113, end_col_offset=23), AnnAssign(target=Name(id='LAYER_PALETTE', ctx=Store(), lineno=114, col_offset=0, end_lineno=114, end_col_offset=13), annotation=Subscript(value=Name(id='dict', ctx=Load(), lineno=114, col_offset=15, end_lineno=114, end_col_offset=19), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=114, col_offset=20, end_lineno=114, end_col_offset=23), Name(id='str', ctx=Load(), lineno=114, col_offset=25, end_lineno=114, end_col_offset=28)], ctx=Load(), lineno=114, col_offset=20, end_lineno=114, end_col_offset=28), ctx=Load(), lineno=114, col_offset=15, end_lineno=114, end_col_offset=29), value=Dict(keys=[Constant(value='domain', lineno=115, col_offset=4, end_lineno=115, end_col_offset=12), Constant(value='application', lineno=116, col_offset=4, end_lineno=116, end_col_offset=17), Constant(value='interface', lineno=117, col_offset=4, end_lineno=117, end_col_offset=15), Constant(value='infra', lineno=118, col_offset=4, end_lineno=118, end_col_offset=11)], values=[Constant(value='#2f855a', lineno=115, col_offset=14, end_lineno=115, end_col_offset=23), Constant(value='#3182ce', lineno=116, col_offset=19, end_lineno=116, end_col_offset=28), Constant(value='#805ad5', lineno=117, col_offset=17, end_lineno=117, end_col_offset=26), Constant(value='#dd6b20', lineno=118, col_offset=13, end_lineno=118, end_col_offset=22)], lineno=114, col_offset=32, end_lineno=119, end_col_offset=1), simple=1, lineno=114, col_offset=0, end_lineno=119, end_col_offset=1), Assign(targets=[Name(id='DEFAULT_LAYER_COLOR', ctx=Store(), lineno=120, col_offset=0, end_lineno=120, end_col_offset=19)], value=Constant(value='#718096', lineno=120, col_offset=22, end_lineno=120, end_col_offset=31), lineno=120, col_offset=0, end_lineno=120, end_col_offset=31), Assign(targets=[Name(id='DEFAULT_EDGE_COLOR', ctx=Store(), lineno=121, col_offset=0, end_lineno=121, end_col_offset=18)], value=Constant(value='#a0aec0', lineno=121, col_offset=21, end_lineno=121, end_col_offset=30), lineno=121, col_offset=0, end_lineno=121, end_col_offset=30), Assign(targets=[Name(id='CYCLE_EDGE_COLOR', ctx=Store(), lineno=122, col_offset=0, end_lineno=122, end_col_offset=16)], value=Constant(value='#e53e3e', lineno=122, col_offset=19, end_lineno=122, end_col_offset=28), lineno=122, col_offset=0, end_lineno=122, end_col_offset=28), Assign(targets=[Name(id='EDGE_HIGHLIGHT_WIDTH', ctx=Store(), lineno=123, col_offset=0, end_lineno=123, end_col_offset=20)], value=Constant(value='2.5', lineno=123, col_offset=23, end_lineno=123, end_col_offset=28), lineno=123, col_offset=0, end_lineno=123, end_col_offset=28), Assign(targets=[Name(id='EDGE_NORMAL_WIDTH', ctx=Store(), lineno=124, col_offset=0, end_lineno=124, end_col_offset=17)], value=Constant(value='1.2', lineno=124, col_offset=20, end_lineno=124, end_col_offset=25), lineno=124, col_offset=0, end_lineno=124, end_col_offset=25), Assign(targets=[Name(id='SUBPROCESS_TIMEOUT_SECONDS', ctx=Store(), lineno=125, col_offset=0, end_lineno=125, end_col_offset=26)], value=Constant(value=240.0, lineno=125, col_offset=29, end_lineno=125, end_col_offset=34), lineno=125, col_offset=0, end_lineno=125, end_col_offset=34), Assign(targets=[Name(id='LayerConfig', ctx=Store(), lineno=127, col_offset=0, end_lineno=127, end_col_offset=11)], value=Subscript(value=Name(id='Mapping', ctx=Load(), lineno=127, col_offset=14, end_lineno=127, end_col_offset=21), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=127, col_offset=22, end_lineno=127, end_col_offset=25), Name(id='object', ctx=Load(), lineno=127, col_offset=27, end_lineno=127, end_col_offset=33)], ctx=Load(), lineno=127, col_offset=22, end_lineno=127, end_col_offset=33), ctx=Load(), lineno=127, col_offset=14, end_lineno=127, end_col_offset=34), lineno=127, col_offset=0, end_lineno=127, end_col_offset=34), Assign(targets=[Name(id='AnalysisResult', ctx=Store(), lineno=128, col_offset=0, end_lineno=128, end_col_offset=14)], value=Subscript(value=Name(id='dict', ctx=Load(), lineno=128, col_offset=17, end_lineno=128, end_col_offset=21), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=128, col_offset=22, end_lineno=128, end_col_offset=25), Name(id='object', ctx=Load(), lineno=128, col_offset=27, end_lineno=128, end_col_offset=33)], ctx=Load(), lineno=128, col_offset=22, end_lineno=128, end_col_offset=33), ctx=Load(), lineno=128, col_offset=17, end_lineno=128, end_col_offset=34), lineno=128, col_offset=0, end_lineno=128, end_col_offset=34), Assign(targets=[Name(id='CycleList', ctx=Store(), lineno=129, col_offset=0, end_lineno=129, end_col_offset=9)], value=Subscript(value=Name(id='list', ctx=Load(), lineno=129, col_offset=12, end_lineno=129, end_col_offset=16), slice=Subscript(value=Name(id='list', ctx=Load(), lineno=129, col_offset=17, end_lineno=129, end_col_offset=21), slice=Name(id='str', ctx=Load(), lineno=129, col_offset=22, end_lineno=129, end_col_offset=25), ctx=Load(), lineno=129, col_offset=17, end_lineno=129, end_col_offset=26), ctx=Load(), lineno=129, col_offset=12, end_lineno=129, end_col_offset=27), lineno=129, col_offset=0, end_lineno=129, end_col_offset=27), ClassDef(name='CacheContext', body=[Expr(value=Constant(value='Represent the cache state for a single package build.', lineno=134, col_offset=4, end_lineno=134, end_col_offset=63), lineno=134, col_offset=4, end_lineno=134, end_col_offset=63), AnnAssign(target=Name(id='used_cache', ctx=Store(), lineno=136, col_offset=4, end_lineno=136, end_col_offset=14), annotation=Name(id='bool', ctx=Load(), lineno=136, col_offset=16, end_lineno=136, end_col_offset=20), simple=1, lineno=136, col_offset=4, end_lineno=136, end_col_offset=20), AnnAssign(target=Name(id='tree_hash', ctx=Store(), lineno=137, col_offset=4, end_lineno=137, end_col_offset=13), annotation=BinOp(left=Name(id='str', ctx=Load(), lineno=137, col_offset=15, end_lineno=137, end_col_offset=18), op=BitOr(), right=Constant(value=None, lineno=137, col_offset=21, end_lineno=137, end_col_offset=25), lineno=137, col_offset=15, end_lineno=137, end_col_offset=25), simple=1, lineno=137, col_offset=4, end_lineno=137, end_col_offset=25), AnnAssign(target=Name(id='bucket', ctx=Store(), lineno=138, col_offset=4, end_lineno=138, end_col_offset=10), annotation=BinOp(left=Name(id='Path', ctx=Load(), lineno=138, col_offset=12, end_lineno=138, end_col_offset=16), op=BitOr(), right=Constant(value=None, lineno=138, col_offset=19, end_lineno=138, end_col_offset=23), lineno=138, col_offset=12, end_lineno=138, end_col_offset=23), simple=1, lineno=138, col_offset=4, end_lineno=138, end_col_offset=23)], decorator_list=[Call(func=Name(id='dataclass', ctx=Load(), lineno=132, col_offset=1, end_lineno=132, end_col_offset=10), keywords=[keyword(arg='frozen', value=Constant(value=True, lineno=132, col_offset=18, end_lineno=132, end_col_offset=22), lineno=132, col_offset=11, end_lineno=132, end_col_offset=22)], lineno=132, col_offset=1, end_lineno=132, end_col_offset=23)], lineno=133, col_offset=0, end_lineno=138, end_col_offset=23), ClassDef(name='StagePaths', body=[Expr(value=Constant(value='File system paths used while staging package graph artifacts.', lineno=143, col_offset=4, end_lineno=143, end_col_offset=71), lineno=143, col_offset=4, end_lineno=143, end_col_offset=71), AnnAssign(target=Name(id='staging_dir', ctx=Store(), lineno=145, col_offset=4, end_lineno=145, end_col_offset=15), annotation=Name(id='Path', ctx=Load(), lineno=145, col_offset=17, end_lineno=145, end_col_offset=21), simple=1, lineno=145, col_offset=4, end_lineno=145, end_col_offset=21), AnnAssign(target=Name(id='staged_imports', ctx=Store(), lineno=146, col_offset=4, end_lineno=146, end_col_offset=18), annotation=Name(id='Path', ctx=Load(), lineno=146, col_offset=20, end_lineno=146, end_col_offset=24), simple=1, lineno=146, col_offset=4, end_lineno=146, end_col_offset=24), AnnAssign(target=Name(id='staged_uml', ctx=Store(), lineno=147, col_offset=4, end_lineno=147, end_col_offset=14), annotation=Name(id='Path', ctx=Load(), lineno=147, col_offset=16, end_lineno=147, end_col_offset=20), simple=1, lineno=147, col_offset=4, end_lineno=147, end_col_offset=20), AnnAssign(target=Name(id='final_imports', ctx=Store(), lineno=148, col_offset=4, end_lineno=148, end_col_offset=17), annotation=Name(id='Path', ctx=Load(), lineno=148, col_offset=19, end_lineno=148, end_col_offset=23), simple=1, lineno=148, col_offset=4, end_lineno=148, end_col_offset=23), AnnAssign(target=Name(id='final_uml', ctx=Store(), lineno=149, col_offset=4, end_lineno=149, end_col_offset=13), annotation=Name(id='Path', ctx=Load(), lineno=149, col_offset=15, end_lineno=149, end_col_offset=19), simple=1, lineno=149, col_offset=4, end_lineno=149, end_col_offset=19)], decorator_list=[Call(func=Name(id='dataclass', ctx=Load(), lineno=141, col_offset=1, end_lineno=141, end_col_offset=10), keywords=[keyword(arg='frozen', value=Constant(value=True, lineno=141, col_offset=18, end_lineno=141, end_col_offset=22), lineno=141, col_offset=11, end_lineno=141, end_col_offset=22)], lineno=141, col_offset=1, end_lineno=141, end_col_offset=23)], lineno=142, col_offset=0, end_lineno=149, end_col_offset=19), ClassDef(name='PackageBuildConfig', body=[Expr(value=Constant(value='Configuration values required to render per-package graphs.', lineno=154, col_offset=4, end_lineno=154, end_col_offset=69), lineno=154, col_offset=4, end_lineno=154, end_col_offset=69), AnnAssign(target=Name(id='fmt', ctx=Store(), lineno=156, col_offset=4, end_lineno=156, end_col_offset=7), annotation=Name(id='str', ctx=Load(), lineno=156, col_offset=9, end_lineno=156, end_col_offset=12), simple=1, lineno=156, col_offset=4, end_lineno=156, end_col_offset=12), AnnAssign(target=Name(id='excludes', ctx=Store(), lineno=157, col_offset=4, end_lineno=157, end_col_offset=12), annotation=Subscript(value=Name(id='tuple', ctx=Load(), lineno=157, col_offset=14, end_lineno=157, end_col_offset=19), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=157, col_offset=20, end_lineno=157, end_col_offset=23), Constant(value=Ellipsis, lineno=157, col_offset=25, end_lineno=157, end_col_offset=28)], ctx=Load(), lineno=157, col_offset=20, end_lineno=157, end_col_offset=28), ctx=Load(), lineno=157, col_offset=14, end_lineno=157, end_col_offset=29), simple=1, lineno=157, col_offset=4, end_lineno=157, end_col_offset=29), AnnAssign(target=Name(id='max_bacon', ctx=Store(), lineno=158, col_offset=4, end_lineno=158, end_col_offset=13), annotation=Name(id='int', ctx=Load(), lineno=158, col_offset=15, end_lineno=158, end_col_offset=18), simple=1, lineno=158, col_offset=4, end_lineno=158, end_col_offset=18), AnnAssign(target=Name(id='cache_dir', ctx=Store(), lineno=159, col_offset=4, end_lineno=159, end_col_offset=13), annotation=Name(id='Path', ctx=Load(), lineno=159, col_offset=15, end_lineno=159, end_col_offset=19), simple=1, lineno=159, col_offset=4, end_lineno=159, end_col_offset=19), AnnAssign(target=Name(id='use_cache', ctx=Store(), lineno=160, col_offset=4, end_lineno=160, end_col_offset=13), annotation=Name(id='bool', ctx=Load(), lineno=160, col_offset=15, end_lineno=160, end_col_offset=19), simple=1, lineno=160, col_offset=4, end_lineno=160, end_col_offset=19), AnnAssign(target=Name(id='verbose', ctx=Store(), lineno=161, col_offset=4, end_lineno=161, end_col_offset=11), annotation=Name(id='bool', ctx=Load(), lineno=161, col_offset=13, end_lineno=161, end_col_offset=17), simple=1, lineno=161, col_offset=4, end_lineno=161, end_col_offset=17), FunctionDef(name='excludes_list', args=arguments(args=[arg(arg='self', lineno=163, col_offset=22, end_lineno=163, end_col_offset=26)]), body=[Expr(value=Constant(value='Return a mutable copy of the package exclusion patterns.\n\n        Returns\n        -------\n        list[str]\n            List copy of exclusion patterns.\n        ', lineno=164, col_offset=8, end_lineno=170, end_col_offset=11), lineno=164, col_offset=8, end_lineno=170, end_col_offset=11), Return(value=Call(func=Name(id='list', ctx=Load(), lineno=171, col_offset=15, end_lineno=171, end_col_offset=19), args=[Attribute(value=Name(id='self', ctx=Load(), lineno=171, col_offset=20, end_lineno=171, end_col_offset=24), attr='excludes', ctx=Load(), lineno=171, col_offset=20, end_lineno=171, end_col_offset=33)], lineno=171, col_offset=15, end_lineno=171, end_col_offset=34), lineno=171, col_offset=8, end_lineno=171, end_col_offset=34)], returns=Subscript(value=Name(id='list', ctx=Load(), lineno=163, col_offset=31, end_lineno=163, end_col_offset=35), slice=Name(id='str', ctx=Load(), lineno=163, col_offset=36, end_lineno=163, end_col_offset=39), ctx=Load(), lineno=163, col_offset=31, end_lineno=163, end_col_offset=40), lineno=163, col_offset=4, end_lineno=171, end_col_offset=34)], decorator_list=[Call(func=Name(id='dataclass', ctx=Load(), lineno=152, col_offset=1, end_lineno=152, end_col_offset=10), keywords=[keyword(arg='frozen', value=Constant(value=True, lineno=152, col_offset=18, end_lineno=152, end_col_offset=22), lineno=152, col_offset=11, end_lineno=152, end_col_offset=22)], lineno=152, col_offset=1, end_lineno=152, end_col_offset=23)], lineno=153, col_offset=0, end_lineno=171, end_col_offset=34), ClassDef(name='CycleConfig', body=[Expr(value=Constant(value='Configuration values governing cycle enumeration bounds.', lineno=176, col_offset=4, end_lineno=176, end_col_offset=66), lineno=176, col_offset=4, end_lineno=176, end_col_offset=66), AnnAssign(target=Name(id='limit', ctx=Store(), lineno=178, col_offset=4, end_lineno=178, end_col_offset=9), annotation=Name(id='int', ctx=Load(), lineno=178, col_offset=11, end_lineno=178, end_col_offset=14), simple=1, lineno=178, col_offset=4, end_lineno=178, end_col_offset=14), AnnAssign(target=Name(id='length_bound', ctx=Store(), lineno=179, col_offset=4, end_lineno=179, end_col_offset=16), annotation=Name(id='int', ctx=Load(), lineno=179, col_offset=18, end_lineno=179, end_col_offset=21), simple=1, lineno=179, col_offset=4, end_lineno=179, end_col_offset=21), AnnAssign(target=Name(id='edge_budget', ctx=Store(), lineno=180, col_offset=4, end_lineno=180, end_col_offset=15), annotation=Name(id='int', ctx=Load(), lineno=180, col_offset=17, end_lineno=180, end_col_offset=20), simple=1, lineno=180, col_offset=4, end_lineno=180, end_col_offset=20)], decorator_list=[Call(func=Name(id='dataclass', ctx=Load(), lineno=174, col_offset=1, end_lineno=174, end_col_offset=10), keywords=[keyword(arg='frozen', value=Constant(value=True, lineno=174, col_offset=18, end_lineno=174, end_col_offset=22), lineno=174, col_offset=11, end_lineno=174, end_col_offset=22)], lineno=174, col_offset=1, end_lineno=174, end_col_offset=23)], lineno=175, col_offset=0, end_lineno=180, end_col_offset=20), ClassDef(name='RunInputs', body=[Expr(value=Constant(value='Normalized configuration derived from CLI arguments.', lineno=185, col_offset=4, end_lineno=185, end_col_offset=62), lineno=185, col_offset=4, end_lineno=185, end_col_offset=62), AnnAssign(target=Name(id='packages', ctx=Store(), lineno=187, col_offset=4, end_lineno=187, end_col_offset=12), annotation=Subscript(value=Name(id='tuple', ctx=Load(), lineno=187, col_offset=14, end_lineno=187, end_col_offset=19), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=187, col_offset=20, end_lineno=187, end_col_offset=23), Constant(value=Ellipsis, lineno=187, col_offset=25, end_lineno=187, end_col_offset=28)], ctx=Load(), lineno=187, col_offset=20, end_lineno=187, end_col_offset=28), ctx=Load(), lineno=187, col_offset=14, end_lineno=187, end_col_offset=29), simple=1, lineno=187, col_offset=4, end_lineno=187, end_col_offset=29), AnnAssign(target=Name(id='excludes', ctx=Store(), lineno=188, col_offset=4, end_lineno=188, end_col_offset=12), annotation=Subscript(value=Name(id='tuple', ctx=Load(), lineno=188, col_offset=14, end_lineno=188, end_col_offset=19), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=188, col_offset=20, end_lineno=188, end_col_offset=23), Constant(value=Ellipsis, lineno=188, col_offset=25, end_lineno=188, end_col_offset=28)], ctx=Load(), lineno=188, col_offset=20, end_lineno=188, end_col_offset=28), ctx=Load(), lineno=188, col_offset=14, end_lineno=188, end_col_offset=29), simple=1, lineno=188, col_offset=4, end_lineno=188, end_col_offset=29), AnnAssign(target=Name(id='cache_dir', ctx=Store(), lineno=189, col_offset=4, end_lineno=189, end_col_offset=13), annotation=Name(id='Path', ctx=Load(), lineno=189, col_offset=15, end_lineno=189, end_col_offset=19), simple=1, lineno=189, col_offset=4, end_lineno=189, end_col_offset=19), AnnAssign(target=Name(id='use_cache', ctx=Store(), lineno=190, col_offset=4, end_lineno=190, end_col_offset=13), annotation=Name(id='bool', ctx=Load(), lineno=190, col_offset=15, end_lineno=190, end_col_offset=19), simple=1, lineno=190, col_offset=4, end_lineno=190, end_col_offset=19), AnnAssign(target=Name(id='verbose', ctx=Store(), lineno=191, col_offset=4, end_lineno=191, end_col_offset=11), annotation=Name(id='bool', ctx=Load(), lineno=191, col_offset=13, end_lineno=191, end_col_offset=17), simple=1, lineno=191, col_offset=4, end_lineno=191, end_col_offset=17), AnnAssign(target=Name(id='config', ctx=Store(), lineno=192, col_offset=4, end_lineno=192, end_col_offset=10), annotation=Name(id='PackageBuildConfig', ctx=Load(), lineno=192, col_offset=12, end_lineno=192, end_col_offset=30), simple=1, lineno=192, col_offset=4, end_lineno=192, end_col_offset=30)], decorator_list=[Call(func=Name(id='dataclass', ctx=Load(), lineno=183, col_offset=1, end_lineno=183, end_col_offset=10), keywords=[keyword(arg='frozen', value=Constant(value=True, lineno=183, col_offset=18, end_lineno=183, end_col_offset=22), lineno=183, col_offset=11, end_lineno=183, end_col_offset=22)], lineno=183, col_offset=1, end_lineno=183, end_col_offset=23)], lineno=184, col_offset=0, end_lineno=192, end_col_offset=30), AnnAssign(target=Name(id='pydot', ctx=Store(), lineno=195, col_offset=0, end_lineno=195, end_col_offset=5), annotation=BinOp(left=Name(id='ModuleType', ctx=Load(), lineno=195, col_offset=7, end_lineno=195, end_col_offset=17), op=BitOr(), right=Constant(value=None, lineno=195, col_offset=20, end_lineno=195, end_col_offset=24), lineno=195, col_offset=7, end_lineno=195, end_col_offset=24), value=Call(func=Name(id='_optional_import', ctx=Load(), lineno=195, col_offset=27, end_lineno=195, end_col_offset=43), args=[Constant(value='pydot', lineno=195, col_offset=44, end_lineno=195, end_col_offset=51)], lineno=195, col_offset=27, end_lineno=195, end_col_offset=52), simple=1, lineno=195, col_offset=0, end_lineno=195, end_col_offset=52), AnnAssign(target=Name(id='nx', ctx=Store(), lineno=196, col_offset=0, end_lineno=196, end_col_offset=2), annotation=BinOp(left=Name(id='ModuleType', ctx=Load(), lineno=196, col_offset=4, end_lineno=196, end_col_offset=14), op=BitOr(), right=Constant(value=None, lineno=196, col_offset=17, end_lineno=196, end_col_offset=21), lineno=196, col_offset=4, end_lineno=196, end_col_offset=21), value=Call(func=Name(id='_optional_import', ctx=Load(), lineno=196, col_offset=24, end_lineno=196, end_col_offset=40), args=[Constant(value='networkx', lineno=196, col_offset=41, end_lineno=196, end_col_offset=51)], lineno=196, col_offset=24, end_lineno=196, end_col_offset=52), simple=1, lineno=196, col_offset=0, end_lineno=196, end_col_offset=52), Assign(targets=[Name(id='yaml', ctx=Store(), lineno=197, col_offset=0, end_lineno=197, end_col_offset=4)], value=Call(func=Name(id='_optional_import', ctx=Load(), lineno=197, col_offset=7, end_lineno=197, end_col_offset=23), args=[Constant(value='yaml', lineno=197, col_offset=24, end_lineno=197, end_col_offset=30)], lineno=197, col_offset=7, end_lineno=197, end_col_offset=31), lineno=197, col_offset=0, end_lineno=197, end_col_offset=31), FunctionDef(name='_require_pydot', args=arguments(), body=[Expr(value=Constant(value='Return the imported :mod:`pydot` module, raising if unavailable.\n\n    Returns\n    -------\n    ModuleType\n        Imported pydot module.\n\n    Raises\n    ------\n    RuntimeError\n        If pydot module is not available.\n    ', lineno=201, col_offset=4, end_lineno=212, end_col_offset=7), lineno=201, col_offset=4, end_lineno=212, end_col_offset=7), If(test=Compare(left=Name(id='pydot', ctx=Load(), lineno=213, col_offset=7, end_lineno=213, end_col_offset=12), ops=[Is()], comparators=[Constant(value=None, lineno=213, col_offset=16, end_lineno=213, end_col_offset=20)], lineno=213, col_offset=7, end_lineno=213, end_col_offset=20), body=[Assign(targets=[Name(id='message', ctx=Store(), lineno=214, col_offset=8, end_lineno=214, end_col_offset=15)], value=Constant(value='pydot is required for graph rendering', lineno=214, col_offset=18, end_lineno=214, end_col_offset=57), lineno=214, col_offset=8, end_lineno=214, end_col_offset=57), Raise(exc=Call(func=Name(id='RuntimeError', ctx=Load(), lineno=215, col_offset=14, end_lineno=215, end_col_offset=26), args=[Name(id='message', ctx=Load(), lineno=215, col_offset=27, end_lineno=215, end_col_offset=34)], lineno=215, col_offset=14, end_lineno=215, end_col_offset=35), lineno=215, col_offset=8, end_lineno=215, end_col_offset=35)], lineno=213, col_offset=4, end_lineno=215, end_col_offset=35), Return(value=Name(id='pydot', ctx=Load(), lineno=216, col_offset=11, end_lineno=216, end_col_offset=16), lineno=216, col_offset=4, end_lineno=216, end_col_offset=16)], returns=Name(id='ModuleType', ctx=Load(), lineno=200, col_offset=24, end_lineno=200, end_col_offset=34), lineno=200, col_offset=0, end_lineno=216, end_col_offset=16), Assign(targets=[Name(id='ROOT', ctx=Store(), lineno=219, col_offset=0, end_lineno=219, end_col_offset=4)], value=Subscript(value=Attribute(value=Call(func=Attribute(value=Call(func=Name(id='Path', ctx=Load(), lineno=219, col_offset=7, end_lineno=219, end_col_offset=11), args=[Name(id='__file__', ctx=Load(), lineno=219, col_offset=12, end_lineno=219, end_col_offset=20)], lineno=219, col_offset=7, end_lineno=219, end_col_offset=21), attr='resolve', ctx=Load(), lineno=219, col_offset=7, end_lineno=219, end_col_offset=29), lineno=219, col_offset=7, end_lineno=219, end_col_offset=31), attr='parents', ctx=Load(), lineno=219, col_offset=7, end_lineno=219, end_col_offset=39), slice=Constant(value=2, lineno=219, col_offset=40, end_lineno=219, end_col_offset=41), ctx=Load(), lineno=219, col_offset=7, end_lineno=219, end_col_offset=42), lineno=219, col_offset=0, end_lineno=219, end_col_offset=42), Assign(targets=[Name(id='SRC', ctx=Store(), lineno=220, col_offset=0, end_lineno=220, end_col_offset=3)], value=BinOp(left=Name(id='ROOT', ctx=Load(), lineno=220, col_offset=6, end_lineno=220, end_col_offset=10), op=Div(), right=Constant(value='src', lineno=220, col_offset=13, end_lineno=220, end_col_offset=18), lineno=220, col_offset=6, end_lineno=220, end_col_offset=18), lineno=220, col_offset=0, end_lineno=220, end_col_offset=18), Assign(targets=[Name(id='OUT', ctx=Store(), lineno=221, col_offset=0, end_lineno=221, end_col_offset=3)], value=BinOp(left=BinOp(left=BinOp(left=Name(id='ROOT', ctx=Load(), lineno=221, col_offset=6, end_lineno=221, end_col_offset=10), op=Div(), right=Constant(value='docs', lineno=221, col_offset=13, end_lineno=221, end_col_offset=19), lineno=221, col_offset=6, end_lineno=221, end_col_offset=19), op=Div(), right=Constant(value='_build', lineno=221, col_offset=22, end_lineno=221, end_col_offset=30), lineno=221, col_offset=6, end_lineno=221, end_col_offset=30), op=Div(), right=Constant(value='graphs', lineno=221, col_offset=33, end_lineno=221, end_col_offset=41), lineno=221, col_offset=6, end_lineno=221, end_col_offset=41), lineno=221, col_offset=0, end_lineno=221, end_col_offset=41), Expr(value=Call(func=Attribute(value=Name(id='OUT', ctx=Load(), lineno=222, col_offset=0, end_lineno=222, end_col_offset=3), attr='mkdir', ctx=Load(), lineno=222, col_offset=0, end_lineno=222, end_col_offset=9), keywords=[keyword(arg='parents', value=Constant(value=True, lineno=222, col_offset=18, end_lineno=222, end_col_offset=22), lineno=222, col_offset=10, end_lineno=222, end_col_offset=22), keyword(arg='exist_ok', value=Constant(value=True, lineno=222, col_offset=33, end_lineno=222, end_col_offset=37), lineno=222, col_offset=24, end_lineno=222, end_col_offset=37)], lineno=222, col_offset=0, end_lineno=222, end_col_offset=38), lineno=222, col_offset=0, end_lineno=222, end_col_offset=38), AnnAssign(target=Name(id='SUPPORTED_FORMATS', ctx=Store(), lineno=226, col_offset=0, end_lineno=226, end_col_offset=17), annotation=Subscript(value=Name(id='tuple', ctx=Load(), lineno=226, col_offset=19, end_lineno=226, end_col_offset=24), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=226, col_offset=25, end_lineno=226, end_col_offset=28), Constant(value=Ellipsis, lineno=226, col_offset=30, end_lineno=226, end_col_offset=33)], ctx=Load(), lineno=226, col_offset=25, end_lineno=226, end_col_offset=33), ctx=Load(), lineno=226, col_offset=19, end_lineno=226, end_col_offset=34), value=Tuple(elts=[Constant(value='svg', lineno=226, col_offset=38, end_lineno=226, end_col_offset=43), Constant(value='png', lineno=226, col_offset=45, end_lineno=226, end_col_offset=50)], ctx=Load(), lineno=226, col_offset=37, end_lineno=226, end_col_offset=51), simple=1, lineno=226, col_offset=0, end_lineno=226, end_col_offset=51), Assign(targets=[Name(id='CLI_COMMAND_NAME', ctx=Store(), lineno=228, col_offset=0, end_lineno=228, end_col_offset=16)], value=Constant(value='docs-build-graphs', lineno=228, col_offset=19, end_lineno=228, end_col_offset=38), lineno=228, col_offset=0, end_lineno=228, end_col_offset=38), Assign(targets=[Name(id='CLI_DEFINITION', ctx=Store(), lineno=229, col_offset=0, end_lineno=229, end_col_offset=14)], value=Call(func=Attribute(value=Name(id='docs_cli_context', ctx=Load(), lineno=229, col_offset=17, end_lineno=229, end_col_offset=33), attr='get_cli_definition', ctx=Load(), lineno=229, col_offset=17, end_lineno=229, end_col_offset=52), args=[Name(id='CLI_COMMAND_NAME', ctx=Load(), lineno=229, col_offset=53, end_lineno=229, end_col_offset=69)], lineno=229, col_offset=17, end_lineno=229, end_col_offset=70), lineno=229, col_offset=0, end_lineno=229, end_col_offset=70), Assign(targets=[Name(id='CLI_SETTINGS', ctx=Store(), lineno=230, col_offset=0, end_lineno=230, end_col_offset=12)], value=Call(func=Attribute(value=Name(id='docs_cli_context', ctx=Load(), lineno=230, col_offset=15, end_lineno=230, end_col_offset=31), attr='get_cli_settings', ctx=Load(), lineno=230, col_offset=15, end_lineno=230, end_col_offset=48), args=[Name(id='CLI_COMMAND_NAME', ctx=Load(), lineno=230, col_offset=49, end_lineno=230, end_col_offset=65)], lineno=230, col_offset=15, end_lineno=230, end_col_offset=66), lineno=230, col_offset=0, end_lineno=230, end_col_offset=66), Assign(targets=[Name(id='CLI_OPERATION_IDS', ctx=Store(), lineno=231, col_offset=0, end_lineno=231, end_col_offset=17)], value=Call(func=Name(id='dict', ctx=Load(), lineno=231, col_offset=20, end_lineno=231, end_col_offset=24), args=[Attribute(value=Name(id='CLI_DEFINITION', ctx=Load(), lineno=231, col_offset=25, end_lineno=231, end_col_offset=39), attr='operation_ids', ctx=Load(), lineno=231, col_offset=25, end_lineno=231, end_col_offset=53)], lineno=231, col_offset=20, end_lineno=231, end_col_offset=54), lineno=231, col_offset=0, end_lineno=231, end_col_offset=54), Assign(targets=[Name(id='CLI_INTERFACE_ID', ctx=Store(), lineno=232, col_offset=0, end_lineno=232, end_col_offset=16)], value=Attribute(value=Name(id='CLI_DEFINITION', ctx=Load(), lineno=232, col_offset=19, end_lineno=232, end_col_offset=33), attr='interface_id', ctx=Load(), lineno=232, col_offset=19, end_lineno=232, end_col_offset=46), lineno=232, col_offset=0, end_lineno=232, end_col_offset=46), Assign(targets=[Name(id='CLI_COMMAND', ctx=Store(), lineno=233, col_offset=0, end_lineno=233, end_col_offset=11)], value=Attribute(value=Name(id='CLI_DEFINITION', ctx=Load(), lineno=233, col_offset=14, end_lineno=233, end_col_offset=28), attr='command', ctx=Load(), lineno=233, col_offset=14, end_lineno=233, end_col_offset=36), lineno=233, col_offset=0, end_lineno=233, end_col_offset=36), Assign(targets=[Name(id='CLI_TITLE', ctx=Store(), lineno=234, col_offset=0, end_lineno=234, end_col_offset=9)], value=Attribute(value=Name(id='CLI_DEFINITION', ctx=Load(), lineno=234, col_offset=12, end_lineno=234, end_col_offset=26), attr='title', ctx=Load(), lineno=234, col_offset=12, end_lineno=234, end_col_offset=32), lineno=234, col_offset=0, end_lineno=234, end_col_offset=32), Assign(targets=[Name(id='SUBCOMMAND_BUILD_GRAPHS', ctx=Store(), lineno=235, col_offset=0, end_lineno=235, end_col_offset=23)], value=Constant(value='build', lineno=235, col_offset=26, end_lineno=235, end_col_offset=33), lineno=235, col_offset=0, end_lineno=235, end_col_offset=33), Assign(targets=[Name(id='CLI_OPERATION_ID', ctx=Store(), lineno=236, col_offset=0, end_lineno=236, end_col_offset=16)], value=Subscript(value=Name(id='CLI_OPERATION_IDS', ctx=Load(), lineno=236, col_offset=19, end_lineno=236, end_col_offset=36), slice=Name(id='SUBCOMMAND_BUILD_GRAPHS', ctx=Load(), lineno=236, col_offset=37, end_lineno=236, end_col_offset=60), ctx=Load(), lineno=236, col_offset=19, end_lineno=236, end_col_offset=61), lineno=236, col_offset=0, end_lineno=236, end_col_offset=61), Assign(targets=[Name(id='CLI_PROBLEM_TYPE', ctx=Store(), lineno=237, col_offset=0, end_lineno=237, end_col_offset=16)], value=Constant(value='https://kgfoundry.dev/problems/docs/build-graphs', lineno=237, col_offset=19, end_lineno=237, end_col_offset=69), lineno=237, col_offset=0, end_lineno=237, end_col_offset=69), Assign(targets=[Name(id='CLI_ENVELOPE_DIR', ctx=Store(), lineno=238, col_offset=0, end_lineno=238, end_col_offset=16)], value=BinOp(left=BinOp(left=BinOp(left=Attribute(value=Name(id='docs_cli_context', ctx=Load(), lineno=238, col_offset=19, end_lineno=238, end_col_offset=35), attr='REPO_ROOT', ctx=Load(), lineno=238, col_offset=19, end_lineno=238, end_col_offset=45), op=Div(), right=Constant(value='site', lineno=238, col_offset=48, end_lineno=238, end_col_offset=54), lineno=238, col_offset=19, end_lineno=238, end_col_offset=54), op=Div(), right=Constant(value='_build', lineno=238, col_offset=57, end_lineno=238, end_col_offset=65), lineno=238, col_offset=19, end_lineno=238, end_col_offset=65), op=Div(), right=Constant(value='cli', lineno=238, col_offset=68, end_lineno=238, end_col_offset=73), lineno=238, col_offset=19, end_lineno=238, end_col_offset=73), lineno=238, col_offset=0, end_lineno=238, end_col_offset=73), FunctionDef(name='__getattr__', args=arguments(args=[arg(arg='name', annotation=Name(id='str', ctx=Load(), lineno=241, col_offset=22, end_lineno=241, end_col_offset=25), lineno=241, col_offset=16, end_lineno=241, end_col_offset=25)]), body=[If(test=Compare(left=Name(id='name', ctx=Load(), lineno=242, col_offset=7, end_lineno=242, end_col_offset=11), ops=[Eq()], comparators=[Constant(value='CLI_CONFIG', lineno=242, col_offset=15, end_lineno=242, end_col_offset=27)], lineno=242, col_offset=7, end_lineno=242, end_col_offset=27), body=[Assign(targets=[Name(id='context_module', ctx=Store(), lineno=243, col_offset=8, end_lineno=243, end_col_offset=22)], value=Call(func=Attribute(value=Name(id='importlib', ctx=Load(), lineno=243, col_offset=25, end_lineno=243, end_col_offset=34), attr='import_module', ctx=Load(), lineno=243, col_offset=25, end_lineno=243, end_col_offset=48), args=[Constant(value='docs._scripts.cli_context', lineno=243, col_offset=49, end_lineno=243, end_col_offset=76)], lineno=243, col_offset=25, end_lineno=243, end_col_offset=77), lineno=243, col_offset=8, end_lineno=243, end_col_offset=77), Return(value=Call(func=Attribute(value=Name(id='context_module', ctx=Load(), lineno=244, col_offset=15, end_lineno=244, end_col_offset=29), attr='get_cli_config', ctx=Load(), lineno=244, col_offset=15, end_lineno=244, end_col_offset=44), args=[Name(id='CLI_COMMAND_NAME', ctx=Load(), lineno=244, col_offset=45, end_lineno=244, end_col_offset=61)], lineno=244, col_offset=15, end_lineno=244, end_col_offset=62), lineno=244, col_offset=8, end_lineno=244, end_col_offset=62)], lineno=242, col_offset=4, end_lineno=244, end_col_offset=62), Assign(targets=[Name(id='message', ctx=Store(), lineno=245, col_offset=4, end_lineno=245, end_col_offset=11)], value=JoinedStr(values=[Constant(value="module 'tools.docs.build_graphs' has no attribute ", lineno=245, col_offset=16, end_lineno=245, end_col_offset=66), FormattedValue(value=Name(id='name', ctx=Load(), lineno=245, col_offset=67, end_lineno=245, end_col_offset=71), conversion=114, lineno=245, col_offset=66, end_lineno=245, end_col_offset=74)], lineno=245, col_offset=14, end_lineno=245, end_col_offset=75), lineno=245, col_offset=4, end_lineno=245, end_col_offset=75), Raise(exc=Call(func=Name(id='AttributeError', ctx=Load(), lineno=246, col_offset=10, end_lineno=246, end_col_offset=24), args=[Name(id='message', ctx=Load(), lineno=246, col_offset=25, end_lineno=246, end_col_offset=32)], lineno=246, col_offset=10, end_lineno=246, end_col_offset=33), lineno=246, col_offset=4, end_lineno=246, end_col_offset=33)], returns=Name(id='object', ctx=Load(), lineno=241, col_offset=30, end_lineno=241, end_col_offset=36), lineno=241, col_offset=0, end_lineno=246, end_col_offset=33), FunctionDef(name='_prepare_run_inputs', args=arguments(args=[arg(arg='args', annotation=Attribute(value=Name(id='argparse', ctx=Load(), lineno=249, col_offset=30, end_lineno=249, end_col_offset=38), attr='Namespace', ctx=Load(), lineno=249, col_offset=30, end_lineno=249, end_col_offset=48), lineno=249, col_offset=24, end_lineno=249, end_col_offset=48)]), body=[Assign(targets=[Name(id='packages', ctx=Store(), lineno=250, col_offset=4, end_lineno=250, end_col_offset=12)], value=Call(func=Name(id='tuple', ctx=Load(), lineno=250, col_offset=15, end_lineno=250, end_col_offset=20), args=[Call(func=Name(id='_resolve_packages', ctx=Load(), lineno=250, col_offset=21, end_lineno=250, end_col_offset=38), args=[Name(id='args', ctx=Load(), lineno=250, col_offset=39, end_lineno=250, end_col_offset=43)], lineno=250, col_offset=21, end_lineno=250, end_col_offset=44)], lineno=250, col_offset=15, end_lineno=250, end_col_offset=45), lineno=250, col_offset=4, end_lineno=250, end_col_offset=45), Assign(targets=[Name(id='excludes', ctx=Store(), lineno=251, col_offset=4, end_lineno=251, end_col_offset=12)], value=Call(func=Name(id='tuple', ctx=Load(), lineno=251, col_offset=15, end_lineno=251, end_col_offset=20), args=[BoolOp(op=Or(), values=[Attribute(value=Name(id='args', ctx=Load(), lineno=251, col_offset=21, end_lineno=251, end_col_offset=25), attr='exclude', ctx=Load(), lineno=251, col_offset=21, end_lineno=251, end_col_offset=33), List(elts=[Constant(value='tests/.*', lineno=251, col_offset=38, end_lineno=251, end_col_offset=48), Constant(value='site/.*', lineno=251, col_offset=50, end_lineno=251, end_col_offset=59)], ctx=Load(), lineno=251, col_offset=37, end_lineno=251, end_col_offset=60)], lineno=251, col_offset=21, end_lineno=251, end_col_offset=60)], lineno=251, col_offset=15, end_lineno=251, end_col_offset=61), lineno=251, col_offset=4, end_lineno=251, end_col_offset=61), Assign(targets=[Tuple(elts=[Name(id='cache_dir', ctx=Store(), lineno=252, col_offset=4, end_lineno=252, end_col_offset=13), Name(id='use_cache', ctx=Store(), lineno=252, col_offset=15, end_lineno=252, end_col_offset=24)], ctx=Store(), lineno=252, col_offset=4, end_lineno=252, end_col_offset=24)], value=Call(func=Name(id='_prepare_cache', ctx=Load(), lineno=252, col_offset=27, end_lineno=252, end_col_offset=41), args=[Name(id='args', ctx=Load(), lineno=252, col_offset=42, end_lineno=252, end_col_offset=46)], lineno=252, col_offset=27, end_lineno=252, end_col_offset=47), lineno=252, col_offset=4, end_lineno=252, end_col_offset=47), Expr(value=Call(func=Name(id='_log_configuration', ctx=Load(), lineno=253, col_offset=4, end_lineno=253, end_col_offset=22), keywords=[keyword(arg='verbose', value=Attribute(value=Name(id='args', ctx=Load(), lineno=254, col_offset=16, end_lineno=254, end_col_offset=20), attr='verbose', ctx=Load(), lineno=254, col_offset=16, end_lineno=254, end_col_offset=28), lineno=254, col_offset=8, end_lineno=254, end_col_offset=28), keyword(arg='packages', value=Name(id='packages', ctx=Load(), lineno=255, col_offset=17, end_lineno=255, end_col_offset=25), lineno=255, col_offset=8, end_lineno=255, end_col_offset=25), keyword(arg='cache_dir', value=Name(id='cache_dir', ctx=Load(), lineno=256, col_offset=18, end_lineno=256, end_col_offset=27), lineno=256, col_offset=8, end_lineno=256, end_col_offset=27), keyword(arg='use_cache', value=Name(id='use_cache', ctx=Load(), lineno=257, col_offset=18, end_lineno=257, end_col_offset=27), lineno=257, col_offset=8, end_lineno=257, end_col_offset=27)], lineno=253, col_offset=4, end_lineno=258, end_col_offset=5), lineno=253, col_offset=4, end_lineno=258, end_col_offset=5), Assign(targets=[Name(id='config', ctx=Store(), lineno=259, col_offset=4, end_lineno=259, end_col_offset=10)], value=Call(func=Name(id='PackageBuildConfig', ctx=Load(), lineno=259, col_offset=13, end_lineno=259, end_col_offset=31), keywords=[keyword(arg='fmt', value=Attribute(value=Name(id='args', ctx=Load(), lineno=260, col_offset=12, end_lineno=260, end_col_offset=16), attr='format', ctx=Load(), lineno=260, col_offset=12, end_lineno=260, end_col_offset=23), lineno=260, col_offset=8, end_lineno=260, end_col_offset=23), keyword(arg='excludes', value=Name(id='excludes', ctx=Load(), lineno=261, col_offset=17, end_lineno=261, end_col_offset=25), lineno=261, col_offset=8, end_lineno=261, end_col_offset=25), keyword(arg='max_bacon', value=Attribute(value=Name(id='args', ctx=Load(), lineno=262, col_offset=18, end_lineno=262, end_col_offset=22), attr='max_bacon', ctx=Load(), lineno=262, col_offset=18, end_lineno=262, end_col_offset=32), lineno=262, col_offset=8, end_lineno=262, end_col_offset=32), keyword(arg='cache_dir', value=Name(id='cache_dir', ctx=Load(), lineno=263, col_offset=18, end_lineno=263, end_col_offset=27), lineno=263, col_offset=8, end_lineno=263, end_col_offset=27), keyword(arg='use_cache', value=Name(id='use_cache', ctx=Load(), lineno=264, col_offset=18, end_lineno=264, end_col_offset=27), lineno=264, col_offset=8, end_lineno=264, end_col_offset=27), keyword(arg='verbose', value=Attribute(value=Name(id='args', ctx=Load(), lineno=265, col_offset=16, end_lineno=265, end_col_offset=20), attr='verbose', ctx=Load(), lineno=265, col_offset=16, end_lineno=265, end_col_offset=28), lineno=265, col_offset=8, end_lineno=265, end_col_offset=28)], lineno=259, col_offset=13, end_lineno=266, end_col_offset=5), lineno=259, col_offset=4, end_lineno=266, end_col_offset=5), Return(value=Call(func=Name(id='RunInputs', ctx=Load(), lineno=267, col_offset=11, end_lineno=267, end_col_offset=20), keywords=[keyword(arg='packages', value=Name(id='packages', ctx=Load(), lineno=268, col_offset=17, end_lineno=268, end_col_offset=25), lineno=268, col_offset=8, end_lineno=268, end_col_offset=25), keyword(arg='excludes', value=Name(id='excludes', ctx=Load(), lineno=269, col_offset=17, end_lineno=269, end_col_offset=25), lineno=269, col_offset=8, end_lineno=269, end_col_offset=25), keyword(arg='cache_dir', value=Name(id='cache_dir', ctx=Load(), lineno=270, col_offset=18, end_lineno=270, end_col_offset=27), lineno=270, col_offset=8, end_lineno=270, end_col_offset=27), keyword(arg='use_cache', value=Name(id='use_cache', ctx=Load(), lineno=271, col_offset=18, end_lineno=271, end_col_offset=27), lineno=271, col_offset=8, end_lineno=271, end_col_offset=27), keyword(arg='verbose', value=Attribute(value=Name(id='args', ctx=Load(), lineno=272, col_offset=16, end_lineno=272, end_col_offset=20), attr='verbose', ctx=Load(), lineno=272, col_offset=16, end_lineno=272, end_col_offset=28), lineno=272, col_offset=8, end_lineno=272, end_col_offset=28), keyword(arg='config', value=Name(id='config', ctx=Load(), lineno=273, col_offset=15, end_lineno=273, end_col_offset=21), lineno=273, col_offset=8, end_lineno=273, end_col_offset=21)], lineno=267, col_offset=11, end_lineno=274, end_col_offset=5), lineno=267, col_offset=4, end_lineno=274, end_col_offset=5)], returns=Name(id='RunInputs', ctx=Load(), lineno=249, col_offset=53, end_lineno=249, end_col_offset=62), lineno=249, col_offset=0, end_lineno=274, end_col_offset=5), Expr(value=Call(func=Attribute(value=Name(id='warnings', ctx=Load(), lineno=277, col_offset=0, end_lineno=277, end_col_offset=8), attr='filterwarnings', ctx=Load(), lineno=277, col_offset=0, end_lineno=277, end_col_offset=23), args=[Constant(value='ignore', lineno=278, col_offset=4, end_lineno=278, end_col_offset=12)], keywords=[keyword(arg='category', value=Name(id='SyntaxWarning', ctx=Load(), lineno=279, col_offset=13, end_lineno=279, end_col_offset=26), lineno=279, col_offset=4, end_lineno=279, end_col_offset=26), keyword(arg='module', value=Constant(value='pyserini\\.trectools\\._base', lineno=280, col_offset=11, end_lineno=280, end_col_offset=40), lineno=280, col_offset=4, end_lineno=280, end_col_offset=40)], lineno=277, col_offset=0, end_lineno=281, end_col_offset=1), lineno=277, col_offset=0, end_lineno=281, end_col_offset=1), Assign(targets=[Name(id='_PYTHONWARNINGS', ctx=Store(), lineno=283, col_offset=0, end_lineno=283, end_col_offset=15)], value=Constant(value='PYTHONWARNINGS', lineno=283, col_offset=18, end_lineno=283, end_col_offset=34), lineno=283, col_offset=0, end_lineno=283, end_col_offset=34), Assign(targets=[Name(id='_PYSERINI_WARNING', ctx=Store(), lineno=284, col_offset=0, end_lineno=284, end_col_offset=17)], value=Constant(value='ignore::SyntaxWarning:pyserini.trectools._base', lineno=284, col_offset=20, end_lineno=284, end_col_offset=68), lineno=284, col_offset=0, end_lineno=284, end_col_offset=68), If(test=Call(func=Attribute(value=Attribute(value=Name(id='os', ctx=Load(), lineno=287, col_offset=3, end_lineno=287, end_col_offset=5), attr='environ', ctx=Load(), lineno=287, col_offset=3, end_lineno=287, end_col_offset=13), attr='get', ctx=Load(), lineno=287, col_offset=3, end_lineno=287, end_col_offset=17), args=[Name(id='_PYTHONWARNINGS', ctx=Load(), lineno=287, col_offset=18, end_lineno=287, end_col_offset=33)], lineno=287, col_offset=3, end_lineno=287, end_col_offset=34), body=[Assign(targets=[Subscript(value=Attribute(value=Name(id='os', ctx=Load(), lineno=288, col_offset=4, end_lineno=288, end_col_offset=6), attr='environ', ctx=Load(), lineno=288, col_offset=4, end_lineno=288, end_col_offset=14), slice=Name(id='_PYTHONWARNINGS', ctx=Load(), lineno=288, col_offset=15, end_lineno=288, end_col_offset=30), ctx=Store(), lineno=288, col_offset=4, end_lineno=288, end_col_offset=31)], value=Call(func=Attribute(value=Constant(value=',', lineno=288, col_offset=34, end_lineno=288, end_col_offset=37), attr='join', ctx=Load(), lineno=288, col_offset=34, end_lineno=288, end_col_offset=42), args=[List(elts=[Subscript(value=Attribute(value=Name(id='os', ctx=Load(), lineno=289, col_offset=9, end_lineno=289, end_col_offset=11), attr='environ', ctx=Load(), lineno=289, col_offset=9, end_lineno=289, end_col_offset=19), slice=Name(id='_PYTHONWARNINGS', ctx=Load(), lineno=289, col_offset=20, end_lineno=289, end_col_offset=35), ctx=Load(), lineno=289, col_offset=9, end_lineno=289, end_col_offset=36), Name(id='_PYSERINI_WARNING', ctx=Load(), lineno=289, col_offset=38, end_lineno=289, end_col_offset=55)], ctx=Load(), lineno=289, col_offset=8, end_lineno=289, end_col_offset=56)], lineno=288, col_offset=34, end_lineno=290, end_col_offset=5), lineno=288, col_offset=4, end_lineno=290, end_col_offset=5)], orelse=[Assign(targets=[Subscript(value=Attribute(value=Name(id='os', ctx=Load(), lineno=292, col_offset=4, end_lineno=292, end_col_offset=6), attr='environ', ctx=Load(), lineno=292, col_offset=4, end_lineno=292, end_col_offset=14), slice=Name(id='_PYTHONWARNINGS', ctx=Load(), lineno=292, col_offset=15, end_lineno=292, end_col_offset=30), ctx=Store(), lineno=292, col_offset=4, end_lineno=292, end_col_offset=31)], value=Name(id='_PYSERINI_WARNING', ctx=Load(), lineno=292, col_offset=34, end_lineno=292, end_col_offset=51), lineno=292, col_offset=4, end_lineno=292, end_col_offset=51)], lineno=287, col_offset=0, end_lineno=292, end_col_offset=51), FunctionDef(name='_coerce_json_value', args=arguments(args=[arg(arg='value', annotation=Name(id='object', ctx=Load(), lineno=295, col_offset=30, end_lineno=295, end_col_offset=36), lineno=295, col_offset=23, end_lineno=295, end_col_offset=36)]), body=[If(test=BoolOp(op=Or(), values=[Compare(left=Name(id='value', ctx=Load(), lineno=296, col_offset=7, end_lineno=296, end_col_offset=12), ops=[Is()], comparators=[Constant(value=None, lineno=296, col_offset=16, end_lineno=296, end_col_offset=20)], lineno=296, col_offset=7, end_lineno=296, end_col_offset=20), Call(func=Name(id='isinstance', ctx=Load(), lineno=296, col_offset=24, end_lineno=296, end_col_offset=34), args=[Name(id='value', ctx=Load(), lineno=296, col_offset=35, end_lineno=296, end_col_offset=40), Tuple(elts=[Name(id='str', ctx=Load(), lineno=296, col_offset=43, end_lineno=296, end_col_offset=46), Name(id='int', ctx=Load(), lineno=296, col_offset=48, end_lineno=296, end_col_offset=51), Name(id='float', ctx=Load(), lineno=296, col_offset=53, end_lineno=296, end_col_offset=58), Name(id='bool', ctx=Load(), lineno=296, col_offset=60, end_lineno=296, end_col_offset=64)], ctx=Load(), lineno=296, col_offset=42, end_lineno=296, end_col_offset=65)], lineno=296, col_offset=24, end_lineno=296, end_col_offset=66)], lineno=296, col_offset=7, end_lineno=296, end_col_offset=66), body=[Return(value=Name(id='value', ctx=Load(), lineno=297, col_offset=15, end_lineno=297, end_col_offset=20), lineno=297, col_offset=8, end_lineno=297, end_col_offset=20)], lineno=296, col_offset=4, end_lineno=297, end_col_offset=20), If(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=298, col_offset=7, end_lineno=298, end_col_offset=17), args=[Name(id='value', ctx=Load(), lineno=298, col_offset=18, end_lineno=298, end_col_offset=23), Name(id='Path', ctx=Load(), lineno=298, col_offset=25, end_lineno=298, end_col_offset=29)], lineno=298, col_offset=7, end_lineno=298, end_col_offset=30), body=[Return(value=Call(func=Name(id='str', ctx=Load(), lineno=299, col_offset=15, end_lineno=299, end_col_offset=18), args=[Name(id='value', ctx=Load(), lineno=299, col_offset=19, end_lineno=299, end_col_offset=24)], lineno=299, col_offset=15, end_lineno=299, end_col_offset=25), lineno=299, col_offset=8, end_lineno=299, end_col_offset=25)], lineno=298, col_offset=4, end_lineno=299, end_col_offset=25), If(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=300, col_offset=7, end_lineno=300, end_col_offset=17), args=[Name(id='value', ctx=Load(), lineno=300, col_offset=18, end_lineno=300, end_col_offset=23), Tuple(elts=[Name(id='list', ctx=Load(), lineno=300, col_offset=26, end_lineno=300, end_col_offset=30), Name(id='tuple', ctx=Load(), lineno=300, col_offset=32, end_lineno=300, end_col_offset=37)], ctx=Load(), lineno=300, col_offset=25, end_lineno=300, end_col_offset=38)], lineno=300, col_offset=7, end_lineno=300, end_col_offset=39), body=[Return(value=ListComp(elt=Call(func=Name(id='_coerce_json_value', ctx=Load(), lineno=301, col_offset=16, end_lineno=301, end_col_offset=34), args=[Name(id='item', ctx=Load(), lineno=301, col_offset=35, end_lineno=301, end_col_offset=39)], lineno=301, col_offset=16, end_lineno=301, end_col_offset=40), generators=[comprehension(target=Name(id='item', ctx=Store(), lineno=301, col_offset=45, end_lineno=301, end_col_offset=49), iter=Name(id='value', ctx=Load(), lineno=301, col_offset=53, end_lineno=301, end_col_offset=58), is_async=0)], lineno=301, col_offset=15, end_lineno=301, end_col_offset=59), lineno=301, col_offset=8, end_lineno=301, end_col_offset=59)], lineno=300, col_offset=4, end_lineno=301, end_col_offset=59), If(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=302, col_offset=7, end_lineno=302, end_col_offset=17), args=[Name(id='value', ctx=Load(), lineno=302, col_offset=18, end_lineno=302, end_col_offset=23), Name(id='set', ctx=Load(), lineno=302, col_offset=25, end_lineno=302, end_col_offset=28)], lineno=302, col_offset=7, end_lineno=302, end_col_offset=29), body=[Return(value=ListComp(elt=Call(func=Name(id='_coerce_json_value', ctx=Load(), lineno=303, col_offset=16, end_lineno=303, end_col_offset=34), args=[Name(id='item', ctx=Load(), lineno=303, col_offset=35, end_lineno=303, end_col_offset=39)], lineno=303, col_offset=16, end_lineno=303, end_col_offset=40), generators=[comprehension(target=Name(id='item', ctx=Store(), lineno=303, col_offset=45, end_lineno=303, end_col_offset=49), iter=Name(id='value', ctx=Load(), lineno=303, col_offset=53, end_lineno=303, end_col_offset=58), is_async=0)], lineno=303, col_offset=15, end_lineno=303, end_col_offset=59), lineno=303, col_offset=8, end_lineno=303, end_col_offset=59)], lineno=302, col_offset=4, end_lineno=303, end_col_offset=59), If(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=304, col_offset=7, end_lineno=304, end_col_offset=17), args=[Name(id='value', ctx=Load(), lineno=304, col_offset=18, end_lineno=304, end_col_offset=23), Name(id='Mapping', ctx=Load(), lineno=304, col_offset=25, end_lineno=304, end_col_offset=32)], lineno=304, col_offset=7, end_lineno=304, end_col_offset=33), body=[Return(value=DictComp(key=Call(func=Name(id='str', ctx=Load(), lineno=305, col_offset=16, end_lineno=305, end_col_offset=19), args=[Name(id='key', ctx=Load(), lineno=305, col_offset=20, end_lineno=305, end_col_offset=23)], lineno=305, col_offset=16, end_lineno=305, end_col_offset=24), value=Call(func=Name(id='_coerce_json_value', ctx=Load(), lineno=305, col_offset=26, end_lineno=305, end_col_offset=44), args=[Name(id='val', ctx=Load(), lineno=305, col_offset=45, end_lineno=305, end_col_offset=48)], lineno=305, col_offset=26, end_lineno=305, end_col_offset=49), generators=[comprehension(target=Tuple(elts=[Name(id='key', ctx=Store(), lineno=305, col_offset=54, end_lineno=305, end_col_offset=57), Name(id='val', ctx=Store(), lineno=305, col_offset=59, end_lineno=305, end_col_offset=62)], ctx=Store(), lineno=305, col_offset=54, end_lineno=305, end_col_offset=62), iter=Call(func=Attribute(value=Name(id='value', ctx=Load(), lineno=305, col_offset=66, end_lineno=305, end_col_offset=71), attr='items', ctx=Load(), lineno=305, col_offset=66, end_lineno=305, end_col_offset=77), lineno=305, col_offset=66, end_lineno=305, end_col_offset=79), is_async=0)], lineno=305, col_offset=15, end_lineno=305, end_col_offset=80), lineno=305, col_offset=8, end_lineno=305, end_col_offset=80)], lineno=304, col_offset=4, end_lineno=305, end_col_offset=80), Return(value=Call(func=Name(id='str', ctx=Load(), lineno=306, col_offset=11, end_lineno=306, end_col_offset=14), args=[Name(id='value', ctx=Load(), lineno=306, col_offset=15, end_lineno=306, end_col_offset=20)], lineno=306, col_offset=11, end_lineno=306, end_col_offset=21), lineno=306, col_offset=4, end_lineno=306, end_col_offset=21)], returns=Name(id='JsonValue', ctx=Load(), lineno=295, col_offset=41, end_lineno=295, end_col_offset=50), lineno=295, col_offset=0, end_lineno=306, end_col_offset=21), FunctionDef(name='_prepare_extensions', args=arguments(args=[arg(arg='values', annotation=BinOp(left=Subscript(value=Name(id='Mapping', ctx=Load(), lineno=310, col_offset=12, end_lineno=310, end_col_offset=19), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=310, col_offset=20, end_lineno=310, end_col_offset=23), Name(id='object', ctx=Load(), lineno=310, col_offset=25, end_lineno=310, end_col_offset=31)], ctx=Load(), lineno=310, col_offset=20, end_lineno=310, end_col_offset=31), ctx=Load(), lineno=310, col_offset=12, end_lineno=310, end_col_offset=32), op=BitOr(), right=Constant(value=None, lineno=310, col_offset=35, end_lineno=310, end_col_offset=39), lineno=310, col_offset=12, end_lineno=310, end_col_offset=39), lineno=310, col_offset=4, end_lineno=310, end_col_offset=39)], defaults=[Constant(value=None, lineno=310, col_offset=42, end_lineno=310, end_col_offset=46)]), body=[If(test=UnaryOp(op=Not(), operand=Name(id='values', ctx=Load(), lineno=312, col_offset=11, end_lineno=312, end_col_offset=17), lineno=312, col_offset=7, end_lineno=312, end_col_offset=17), body=[Return(value=Dict(lineno=313, col_offset=15, end_lineno=313, end_col_offset=17), lineno=313, col_offset=8, end_lineno=313, end_col_offset=17)], lineno=312, col_offset=4, end_lineno=313, end_col_offset=17), Return(value=DictComp(key=Call(func=Name(id='str', ctx=Load(), lineno=314, col_offset=12, end_lineno=314, end_col_offset=15), args=[Name(id='key', ctx=Load(), lineno=314, col_offset=16, end_lineno=314, end_col_offset=19)], lineno=314, col_offset=12, end_lineno=314, end_col_offset=20), value=Call(func=Name(id='_coerce_json_value', ctx=Load(), lineno=314, col_offset=22, end_lineno=314, end_col_offset=40), args=[Name(id='val', ctx=Load(), lineno=314, col_offset=41, end_lineno=314, end_col_offset=44)], lineno=314, col_offset=22, end_lineno=314, end_col_offset=45), generators=[comprehension(target=Tuple(elts=[Name(id='key', ctx=Store(), lineno=314, col_offset=50, end_lineno=314, end_col_offset=53), Name(id='val', ctx=Store(), lineno=314, col_offset=55, end_lineno=314, end_col_offset=58)], ctx=Store(), lineno=314, col_offset=50, end_lineno=314, end_col_offset=58), iter=Call(func=Attribute(value=Name(id='values', ctx=Load(), lineno=314, col_offset=62, end_lineno=314, end_col_offset=68), attr='items', ctx=Load(), lineno=314, col_offset=62, end_lineno=314, end_col_offset=74), lineno=314, col_offset=62, end_lineno=314, end_col_offset=76), is_async=0)], lineno=314, col_offset=11, end_lineno=314, end_col_offset=77), lineno=314, col_offset=4, end_lineno=314, end_col_offset=77)], returns=Subscript(value=Name(id='dict', ctx=Load(), lineno=311, col_offset=5, end_lineno=311, end_col_offset=9), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=311, col_offset=10, end_lineno=311, end_col_offset=13), Name(id='JsonValue', ctx=Load(), lineno=311, col_offset=15, end_lineno=311, end_col_offset=24)], ctx=Load(), lineno=311, col_offset=10, end_lineno=311, end_col_offset=24), ctx=Load(), lineno=311, col_offset=5, end_lineno=311, end_col_offset=25), lineno=309, col_offset=0, end_lineno=314, end_col_offset=77), ClassDef(name='_CommandContext', body=[AnnAssign(target=Name(id='args', ctx=Store(), lineno=319, col_offset=4, end_lineno=319, end_col_offset=8), annotation=Attribute(value=Name(id='argparse', ctx=Load(), lineno=319, col_offset=10, end_lineno=319, end_col_offset=18), attr='Namespace', ctx=Load(), lineno=319, col_offset=10, end_lineno=319, end_col_offset=28), simple=1, lineno=319, col_offset=4, end_lineno=319, end_col_offset=28), AnnAssign(target=Name(id='correlation_id', ctx=Store(), lineno=320, col_offset=4, end_lineno=320, end_col_offset=18), annotation=Name(id='str', ctx=Load(), lineno=320, col_offset=20, end_lineno=320, end_col_offset=23), simple=1, lineno=320, col_offset=4, end_lineno=320, end_col_offset=23), AnnAssign(target=Name(id='logger', ctx=Store(), lineno=321, col_offset=4, end_lineno=321, end_col_offset=10), annotation=Name(id='LoggerAdapter', ctx=Load(), lineno=321, col_offset=12, end_lineno=321, end_col_offset=25), simple=1, lineno=321, col_offset=4, end_lineno=321, end_col_offset=25), AnnAssign(target=Name(id='builder', ctx=Store(), lineno=322, col_offset=4, end_lineno=322, end_col_offset=11), annotation=Name(id='CliEnvelopeBuilder', ctx=Load(), lineno=322, col_offset=13, end_lineno=322, end_col_offset=31), simple=1, lineno=322, col_offset=4, end_lineno=322, end_col_offset=31), AnnAssign(target=Name(id='start', ctx=Store(), lineno=323, col_offset=4, end_lineno=323, end_col_offset=9), annotation=Name(id='float', ctx=Load(), lineno=323, col_offset=11, end_lineno=323, end_col_offset=16), simple=1, lineno=323, col_offset=4, end_lineno=323, end_col_offset=16), FunctionDef(name='elapsed', args=arguments(args=[arg(arg='self', lineno=325, col_offset=16, end_lineno=325, end_col_offset=20)]), body=[Return(value=BinOp(left=Call(func=Attribute(value=Name(id='time', ctx=Load(), lineno=326, col_offset=15, end_lineno=326, end_col_offset=19), attr='monotonic', ctx=Load(), lineno=326, col_offset=15, end_lineno=326, end_col_offset=29), lineno=326, col_offset=15, end_lineno=326, end_col_offset=31), op=Sub(), right=Attribute(value=Name(id='self', ctx=Load(), lineno=326, col_offset=34, end_lineno=326, end_col_offset=38), attr='start', ctx=Load(), lineno=326, col_offset=34, end_lineno=326, end_col_offset=44), lineno=326, col_offset=15, end_lineno=326, end_col_offset=44), lineno=326, col_offset=8, end_lineno=326, end_col_offset=44)], returns=Name(id='float', ctx=Load(), lineno=325, col_offset=25, end_lineno=325, end_col_offset=30), lineno=325, col_offset=4, end_lineno=326, end_col_offset=44), FunctionDef(name='extensions', args=arguments(args=[arg(arg='self', lineno=328, col_offset=19, end_lineno=328, end_col_offset=23), arg(arg='extras', annotation=BinOp(left=Subscript(value=Name(id='Mapping', ctx=Load(), lineno=328, col_offset=33, end_lineno=328, end_col_offset=40), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=328, col_offset=41, end_lineno=328, end_col_offset=44), Name(id='object', ctx=Load(), lineno=328, col_offset=46, end_lineno=328, end_col_offset=52)], ctx=Load(), lineno=328, col_offset=41, end_lineno=328, end_col_offset=52), ctx=Load(), lineno=328, col_offset=33, end_lineno=328, end_col_offset=53), op=BitOr(), right=Constant(value=None, lineno=328, col_offset=56, end_lineno=328, end_col_offset=60), lineno=328, col_offset=33, end_lineno=328, end_col_offset=60), lineno=328, col_offset=25, end_lineno=328, end_col_offset=60)], defaults=[Constant(value=None, lineno=328, col_offset=63, end_lineno=328, end_col_offset=67)]), body=[AnnAssign(target=Name(id='payload', ctx=Store(), lineno=329, col_offset=8, end_lineno=329, end_col_offset=15), annotation=Subscript(value=Name(id='dict', ctx=Load(), lineno=329, col_offset=17, end_lineno=329, end_col_offset=21), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=329, col_offset=22, end_lineno=329, end_col_offset=25), Name(id='JsonValue', ctx=Load(), lineno=329, col_offset=27, end_lineno=329, end_col_offset=36)], ctx=Load(), lineno=329, col_offset=22, end_lineno=329, end_col_offset=36), ctx=Load(), lineno=329, col_offset=17, end_lineno=329, end_col_offset=37), value=Dict(keys=[Constant(value='operation_id', lineno=330, col_offset=12, end_lineno=330, end_col_offset=26), Constant(value='correlation_id', lineno=331, col_offset=12, end_lineno=331, end_col_offset=28)], values=[Name(id='CLI_OPERATION_ID', ctx=Load(), lineno=330, col_offset=28, end_lineno=330, end_col_offset=44), Attribute(value=Name(id='self', ctx=Load(), lineno=331, col_offset=30, end_lineno=331, end_col_offset=34), attr='correlation_id', ctx=Load(), lineno=331, col_offset=30, end_lineno=331, end_col_offset=49)], lineno=329, col_offset=40, end_lineno=332, end_col_offset=9), simple=1, lineno=329, col_offset=8, end_lineno=332, end_col_offset=9), If(test=Name(id='extras', ctx=Load(), lineno=333, col_offset=11, end_lineno=333, end_col_offset=17), body=[Expr(value=Call(func=Attribute(value=Name(id='payload', ctx=Load(), lineno=334, col_offset=12, end_lineno=334, end_col_offset=19), attr='update', ctx=Load(), lineno=334, col_offset=12, end_lineno=334, end_col_offset=26), args=[Call(func=Name(id='_prepare_extensions', ctx=Load(), lineno=334, col_offset=27, end_lineno=334, end_col_offset=46), args=[Name(id='extras', ctx=Load(), lineno=334, col_offset=47, end_lineno=334, end_col_offset=53)], lineno=334, col_offset=27, end_lineno=334, end_col_offset=54)], lineno=334, col_offset=12, end_lineno=334, end_col_offset=55), lineno=334, col_offset=12, end_lineno=334, end_col_offset=55)], lineno=333, col_offset=8, end_lineno=334, end_col_offset=55), Return(value=Name(id='payload', ctx=Load(), lineno=335, col_offset=15, end_lineno=335, end_col_offset=22), lineno=335, col_offset=8, end_lineno=335, end_col_offset=22)], returns=Subscript(value=Name(id='dict', ctx=Load(), lineno=328, col_offset=72, end_lineno=328, end_col_offset=76), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=328, col_offset=77, end_lineno=328, end_col_offset=80), Name(id='JsonValue', ctx=Load(), lineno=328, col_offset=82, end_lineno=328, end_col_offset=91)], ctx=Load(), lineno=328, col_offset=77, end_lineno=328, end_col_offset=91), ctx=Load(), lineno=328, col_offset=72, end_lineno=328, end_col_offset=92), lineno=328, col_offset=4, end_lineno=335, end_col_offset=22)], decorator_list=[Call(func=Name(id='dataclass', ctx=Load(), lineno=317, col_offset=1, end_lineno=317, end_col_offset=10), keywords=[keyword(arg='slots', value=Constant(value=True, lineno=317, col_offset=17, end_lineno=317, end_col_offset=21), lineno=317, col_offset=11, end_lineno=317, end_col_offset=21), keyword(arg='frozen', value=Constant(value=True, lineno=317, col_offset=30, end_lineno=317, end_col_offset=34), lineno=317, col_offset=23, end_lineno=317, end_col_offset=34)], lineno=317, col_offset=1, end_lineno=317, end_col_offset=35)], lineno=318, col_offset=0, end_lineno=335, end_col_offset=22), FunctionDef(name='_envelope_path', args=arguments(args=[arg(arg='subcommand', annotation=Name(id='str', ctx=Load(), lineno=338, col_offset=31, end_lineno=338, end_col_offset=34), lineno=338, col_offset=19, end_lineno=338, end_col_offset=34)]), body=[Assign(targets=[Name(id='safe_subcommand', ctx=Store(), lineno=339, col_offset=4, end_lineno=339, end_col_offset=19)], value=BoolOp(op=Or(), values=[Name(id='subcommand', ctx=Load(), lineno=339, col_offset=22, end_lineno=339, end_col_offset=32), Constant(value='root', lineno=339, col_offset=36, end_lineno=339, end_col_offset=42)], lineno=339, col_offset=22, end_lineno=339, end_col_offset=42), lineno=339, col_offset=4, end_lineno=339, end_col_offset=42), Assign(targets=[Name(id='filename', ctx=Store(), lineno=340, col_offset=4, end_lineno=340, end_col_offset=12)], value=JoinedStr(values=[FormattedValue(value=Attribute(value=Name(id='CLI_SETTINGS', ctx=Load(), lineno=340, col_offset=18, end_lineno=340, end_col_offset=30), attr='bin_name', ctx=Load(), lineno=340, col_offset=18, end_lineno=340, end_col_offset=39), conversion=-1, lineno=340, col_offset=17, end_lineno=340, end_col_offset=40), Constant(value='-', lineno=340, col_offset=40, end_lineno=340, end_col_offset=41), FormattedValue(value=Name(id='CLI_COMMAND', ctx=Load(), lineno=340, col_offset=42, end_lineno=340, end_col_offset=53), conversion=-1, lineno=340, col_offset=41, end_lineno=340, end_col_offset=54), Constant(value='-', lineno=340, col_offset=54, end_lineno=340, end_col_offset=55), FormattedValue(value=Name(id='safe_subcommand', ctx=Load(), lineno=340, col_offset=56, end_lineno=340, end_col_offset=71), conversion=-1, lineno=340, col_offset=55, end_lineno=340, end_col_offset=72), Constant(value='.json', lineno=340, col_offset=72, end_lineno=340, end_col_offset=77)], lineno=340, col_offset=15, end_lineno=340, end_col_offset=78), lineno=340, col_offset=4, end_lineno=340, end_col_offset=78), Return(value=BinOp(left=Name(id='CLI_ENVELOPE_DIR', ctx=Load(), lineno=341, col_offset=11, end_lineno=341, end_col_offset=27), op=Div(), right=Name(id='filename', ctx=Load(), lineno=341, col_offset=30, end_lineno=341, end_col_offset=38), lineno=341, col_offset=11, end_lineno=341, end_col_offset=38), lineno=341, col_offset=4, end_lineno=341, end_col_offset=38)], returns=Name(id='Path', ctx=Load(), lineno=338, col_offset=39, end_lineno=338, end_col_offset=43), lineno=338, col_offset=0, end_lineno=341, end_col_offset=38), FunctionDef(name='_emit_envelope', args=arguments(args=[arg(arg='envelope', annotation=Name(id='CliEnvelope', ctx=Load(), lineno=344, col_offset=29, end_lineno=344, end_col_offset=40), lineno=344, col_offset=19, end_lineno=344, end_col_offset=40)], kwonlyargs=[arg(arg='logger', annotation=Name(id='LoggerAdapter', ctx=Load(), lineno=344, col_offset=53, end_lineno=344, end_col_offset=66), lineno=344, col_offset=45, end_lineno=344, end_col_offset=66), arg(arg='subcommand', annotation=Name(id='str', ctx=Load(), lineno=344, col_offset=80, end_lineno=344, end_col_offset=83), lineno=344, col_offset=68, end_lineno=344, end_col_offset=83)], kw_defaults=[None, None]), body=[Assign(targets=[Name(id='path', ctx=Store(), lineno=345, col_offset=4, end_lineno=345, end_col_offset=8)], value=Call(func=Name(id='_envelope_path', ctx=Load(), lineno=345, col_offset=11, end_lineno=345, end_col_offset=25), args=[Name(id='subcommand', ctx=Load(), lineno=345, col_offset=26, end_lineno=345, end_col_offset=36)], lineno=345, col_offset=11, end_lineno=345, end_col_offset=37), lineno=345, col_offset=4, end_lineno=345, end_col_offset=37), Expr(value=Call(func=Attribute(value=Name(id='CLI_ENVELOPE_DIR', ctx=Load(), lineno=346, col_offset=4, end_lineno=346, end_col_offset=20), attr='mkdir', ctx=Load(), lineno=346, col_offset=4, end_lineno=346, end_col_offset=26), keywords=[keyword(arg='parents', value=Constant(value=True, lineno=346, col_offset=35, end_lineno=346, end_col_offset=39), lineno=346, col_offset=27, end_lineno=346, end_col_offset=39), keyword(arg='exist_ok', value=Constant(value=True, lineno=346, col_offset=50, end_lineno=346, end_col_offset=54), lineno=346, col_offset=41, end_lineno=346, end_col_offset=54)], lineno=346, col_offset=4, end_lineno=346, end_col_offset=55), lineno=346, col_offset=4, end_lineno=346, end_col_offset=55), Assign(targets=[Name(id='rendered', ctx=Store(), lineno=347, col_offset=4, end_lineno=347, end_col_offset=12)], value=Call(func=Name(id='render_cli_envelope', ctx=Load(), lineno=347, col_offset=15, end_lineno=347, end_col_offset=34), args=[Name(id='envelope', ctx=Load(), lineno=347, col_offset=35, end_lineno=347, end_col_offset=43)], lineno=347, col_offset=15, end_lineno=347, end_col_offset=44), lineno=347, col_offset=4, end_lineno=347, end_col_offset=44), Expr(value=Call(func=Attribute(value=Name(id='path', ctx=Load(), lineno=348, col_offset=4, end_lineno=348, end_col_offset=8), attr='write_text', ctx=Load(), lineno=348, col_offset=4, end_lineno=348, end_col_offset=19), args=[BinOp(left=Name(id='rendered', ctx=Load(), lineno=348, col_offset=20, end_lineno=348, end_col_offset=28), op=Add(), right=Constant(value='\n', lineno=348, col_offset=31, end_lineno=348, end_col_offset=35), lineno=348, col_offset=20, end_lineno=348, end_col_offset=35)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=348, col_offset=46, end_lineno=348, end_col_offset=53), lineno=348, col_offset=37, end_lineno=348, end_col_offset=53)], lineno=348, col_offset=4, end_lineno=348, end_col_offset=54), lineno=348, col_offset=4, end_lineno=348, end_col_offset=54), Expr(value=Call(func=Attribute(value=Name(id='logger', ctx=Load(), lineno=349, col_offset=4, end_lineno=349, end_col_offset=10), attr='debug', ctx=Load(), lineno=349, col_offset=4, end_lineno=349, end_col_offset=16), args=[Constant(value='CLI envelope written', lineno=350, col_offset=8, end_lineno=350, end_col_offset=30)], keywords=[keyword(arg='extra', value=Dict(keys=[Constant(value='status', lineno=351, col_offset=15, end_lineno=351, end_col_offset=23), Constant(value='cli_envelope', lineno=351, col_offset=42, end_lineno=351, end_col_offset=56)], values=[Attribute(value=Name(id='envelope', ctx=Load(), lineno=351, col_offset=25, end_lineno=351, end_col_offset=33), attr='status', ctx=Load(), lineno=351, col_offset=25, end_lineno=351, end_col_offset=40), Call(func=Name(id='str', ctx=Load(), lineno=351, col_offset=58, end_lineno=351, end_col_offset=61), args=[Name(id='path', ctx=Load(), lineno=351, col_offset=62, end_lineno=351, end_col_offset=66)], lineno=351, col_offset=58, end_lineno=351, end_col_offset=67)], lineno=351, col_offset=14, end_lineno=351, end_col_offset=68), lineno=351, col_offset=8, end_lineno=351, end_col_offset=68)], lineno=349, col_offset=4, end_lineno=352, end_col_offset=5), lineno=349, col_offset=4, end_lineno=352, end_col_offset=5), Return(value=Name(id='path', ctx=Load(), lineno=353, col_offset=11, end_lineno=353, end_col_offset=15), lineno=353, col_offset=4, end_lineno=353, end_col_offset=15)], returns=Name(id='Path', ctx=Load(), lineno=344, col_offset=88, end_lineno=344, end_col_offset=92), lineno=344, col_offset=0, end_lineno=353, end_col_offset=15), FunctionDef(name='_run_status_from_error', args=arguments(args=[arg(arg='error_status', annotation=Name(id='CliErrorStatus', ctx=Load(), lineno=356, col_offset=41, end_lineno=356, end_col_offset=55), lineno=356, col_offset=27, end_lineno=356, end_col_offset=55)]), body=[Return(value=Call(func=Name(id='cast', ctx=Load(), lineno=357, col_offset=11, end_lineno=357, end_col_offset=15), args=[Constant(value='CliStatus', lineno=358, col_offset=8, end_lineno=358, end_col_offset=19), IfExp(test=Compare(left=Name(id='error_status', ctx=Load(), lineno=359, col_offset=24, end_lineno=359, end_col_offset=36), ops=[In()], comparators=[Set(elts=[Constant(value='config', lineno=359, col_offset=41, end_lineno=359, end_col_offset=49), Constant(value='violation', lineno=359, col_offset=51, end_lineno=359, end_col_offset=62)], lineno=359, col_offset=40, end_lineno=359, end_col_offset=63)], lineno=359, col_offset=24, end_lineno=359, end_col_offset=63), body=Name(id='error_status', ctx=Load(), lineno=359, col_offset=8, end_lineno=359, end_col_offset=20), orelse=Constant(value='error', lineno=359, col_offset=69, end_lineno=359, end_col_offset=76), lineno=359, col_offset=8, end_lineno=359, end_col_offset=76)], lineno=357, col_offset=11, end_lineno=360, end_col_offset=5), lineno=357, col_offset=4, end_lineno=360, end_col_offset=5)], returns=Name(id='CliStatus', ctx=Load(), lineno=356, col_offset=60, end_lineno=356, end_col_offset=69), lineno=356, col_offset=0, end_lineno=360, end_col_offset=5), FunctionDef(name='_build_problem', args=arguments(args=[arg(arg='context', annotation=Name(id='_CommandContext', ctx=Load(), lineno=364, col_offset=13, end_lineno=364, end_col_offset=28), lineno=364, col_offset=4, end_lineno=364, end_col_offset=28)], kwonlyargs=[arg(arg='detail', annotation=Name(id='str', ctx=Load(), lineno=366, col_offset=12, end_lineno=366, end_col_offset=15), lineno=366, col_offset=4, end_lineno=366, end_col_offset=15), arg(arg='status', annotation=Name(id='int', ctx=Load(), lineno=367, col_offset=12, end_lineno=367, end_col_offset=15), lineno=367, col_offset=4, end_lineno=367, end_col_offset=15), arg(arg='extras', annotation=BinOp(left=Subscript(value=Name(id='Mapping', ctx=Load(), lineno=368, col_offset=12, end_lineno=368, end_col_offset=19), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=368, col_offset=20, end_lineno=368, end_col_offset=23), Name(id='object', ctx=Load(), lineno=368, col_offset=25, end_lineno=368, end_col_offset=31)], ctx=Load(), lineno=368, col_offset=20, end_lineno=368, end_col_offset=31), ctx=Load(), lineno=368, col_offset=12, end_lineno=368, end_col_offset=32), op=BitOr(), right=Constant(value=None, lineno=368, col_offset=35, end_lineno=368, end_col_offset=39), lineno=368, col_offset=12, end_lineno=368, end_col_offset=39), lineno=368, col_offset=4, end_lineno=368, end_col_offset=39)], kw_defaults=[None, None, Constant(value=None, lineno=368, col_offset=42, end_lineno=368, end_col_offset=46)]), body=[Return(value=Call(func=Name(id='build_problem_details', ctx=Load(), lineno=370, col_offset=11, end_lineno=370, end_col_offset=32), args=[Call(func=Name(id='ProblemDetailsParams', ctx=Load(), lineno=371, col_offset=8, end_lineno=371, end_col_offset=28), keywords=[keyword(arg='type', value=Name(id='CLI_PROBLEM_TYPE', ctx=Load(), lineno=372, col_offset=17, end_lineno=372, end_col_offset=33), lineno=372, col_offset=12, end_lineno=372, end_col_offset=33), keyword(arg='title', value=JoinedStr(values=[FormattedValue(value=Name(id='CLI_TITLE', ctx=Load(), lineno=373, col_offset=21, end_lineno=373, end_col_offset=30), conversion=-1, lineno=373, col_offset=20, end_lineno=373, end_col_offset=31), Constant(value=' command failed', lineno=373, col_offset=31, end_lineno=373, end_col_offset=46)], lineno=373, col_offset=18, end_lineno=373, end_col_offset=47), lineno=373, col_offset=12, end_lineno=373, end_col_offset=47), keyword(arg='status', value=Name(id='status', ctx=Load(), lineno=374, col_offset=19, end_lineno=374, end_col_offset=25), lineno=374, col_offset=12, end_lineno=374, end_col_offset=25), keyword(arg='detail', value=Name(id='detail', ctx=Load(), lineno=375, col_offset=19, end_lineno=375, end_col_offset=25), lineno=375, col_offset=12, end_lineno=375, end_col_offset=25), keyword(arg='instance', value=JoinedStr(values=[Constant(value='urn:cli:', lineno=376, col_offset=23, end_lineno=376, end_col_offset=31), FormattedValue(value=Name(id='CLI_INTERFACE_ID', ctx=Load(), lineno=376, col_offset=32, end_lineno=376, end_col_offset=48), conversion=-1, lineno=376, col_offset=31, end_lineno=376, end_col_offset=49), Constant(value=':', lineno=376, col_offset=49, end_lineno=376, end_col_offset=50), FormattedValue(value=Name(id='SUBCOMMAND_BUILD_GRAPHS', ctx=Load(), lineno=376, col_offset=51, end_lineno=376, end_col_offset=74), conversion=-1, lineno=376, col_offset=50, end_lineno=376, end_col_offset=75)], lineno=376, col_offset=21, end_lineno=376, end_col_offset=76), lineno=376, col_offset=12, end_lineno=376, end_col_offset=76), keyword(arg='extensions', value=Call(func=Attribute(value=Name(id='context', ctx=Load(), lineno=377, col_offset=23, end_lineno=377, end_col_offset=30), attr='extensions', ctx=Load(), lineno=377, col_offset=23, end_lineno=377, end_col_offset=41), args=[Name(id='extras', ctx=Load(), lineno=377, col_offset=42, end_lineno=377, end_col_offset=48)], lineno=377, col_offset=23, end_lineno=377, end_col_offset=49), lineno=377, col_offset=12, end_lineno=377, end_col_offset=49)], lineno=371, col_offset=8, end_lineno=378, end_col_offset=9)], lineno=370, col_offset=11, end_lineno=379, end_col_offset=5), lineno=370, col_offset=4, end_lineno=379, end_col_offset=5)], returns=Name(id='ProblemDetailsDict', ctx=Load(), lineno=369, col_offset=5, end_lineno=369, end_col_offset=23), lineno=363, col_offset=0, end_lineno=379, end_col_offset=5), ClassDef(name='_FailureOptions', body=[AnnAssign(target=Name(id='extras', ctx=Store(), lineno=384, col_offset=4, end_lineno=384, end_col_offset=10), annotation=BinOp(left=Subscript(value=Name(id='Mapping', ctx=Load(), lineno=384, col_offset=12, end_lineno=384, end_col_offset=19), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=384, col_offset=20, end_lineno=384, end_col_offset=23), Name(id='object', ctx=Load(), lineno=384, col_offset=25, end_lineno=384, end_col_offset=31)], ctx=Load(), lineno=384, col_offset=20, end_lineno=384, end_col_offset=31), ctx=Load(), lineno=384, col_offset=12, end_lineno=384, end_col_offset=32), op=BitOr(), right=Constant(value=None, lineno=384, col_offset=35, end_lineno=384, end_col_offset=39), lineno=384, col_offset=12, end_lineno=384, end_col_offset=39), value=Constant(value=None, lineno=384, col_offset=42, end_lineno=384, end_col_offset=46), simple=1, lineno=384, col_offset=4, end_lineno=384, end_col_offset=46), AnnAssign(target=Name(id='exc', ctx=Store(), lineno=385, col_offset=4, end_lineno=385, end_col_offset=7), annotation=BinOp(left=Name(id='BaseException', ctx=Load(), lineno=385, col_offset=9, end_lineno=385, end_col_offset=22), op=BitOr(), right=Constant(value=None, lineno=385, col_offset=25, end_lineno=385, end_col_offset=29), lineno=385, col_offset=9, end_lineno=385, end_col_offset=29), value=Constant(value=None, lineno=385, col_offset=32, end_lineno=385, end_col_offset=36), simple=1, lineno=385, col_offset=4, end_lineno=385, end_col_offset=36)], decorator_list=[Call(func=Name(id='dataclass', ctx=Load(), lineno=382, col_offset=1, end_lineno=382, end_col_offset=10), keywords=[keyword(arg='slots', value=Constant(value=True, lineno=382, col_offset=17, end_lineno=382, end_col_offset=21), lineno=382, col_offset=11, end_lineno=382, end_col_offset=21), keyword(arg='frozen', value=Constant(value=True, lineno=382, col_offset=30, end_lineno=382, end_col_offset=34), lineno=382, col_offset=23, end_lineno=382, end_col_offset=34)], lineno=382, col_offset=1, end_lineno=382, end_col_offset=35)], lineno=383, col_offset=0, end_lineno=385, end_col_offset=36), FunctionDef(name='_record_failure', args=arguments(args=[arg(arg='context', annotation=Name(id='_CommandContext', ctx=Load(), lineno=389, col_offset=13, end_lineno=389, end_col_offset=28), lineno=389, col_offset=4, end_lineno=389, end_col_offset=28)], kwonlyargs=[arg(arg='detail', annotation=Name(id='str', ctx=Load(), lineno=391, col_offset=12, end_lineno=391, end_col_offset=15), lineno=391, col_offset=4, end_lineno=391, end_col_offset=15), arg(arg='status', annotation=Name(id='int', ctx=Load(), lineno=392, col_offset=12, end_lineno=392, end_col_offset=15), lineno=392, col_offset=4, end_lineno=392, end_col_offset=15), arg(arg='error_status', annotation=Name(id='CliErrorStatus', ctx=Load(), lineno=393, col_offset=18, end_lineno=393, end_col_offset=32), lineno=393, col_offset=4, end_lineno=393, end_col_offset=32), arg(arg='options', annotation=BinOp(left=Name(id='_FailureOptions', ctx=Load(), lineno=394, col_offset=13, end_lineno=394, end_col_offset=28), op=BitOr(), right=Constant(value=None, lineno=394, col_offset=31, end_lineno=394, end_col_offset=35), lineno=394, col_offset=13, end_lineno=394, end_col_offset=35), lineno=394, col_offset=4, end_lineno=394, end_col_offset=35)], kw_defaults=[None, None, None, Constant(value=None, lineno=394, col_offset=38, end_lineno=394, end_col_offset=42)]), body=[Assign(targets=[Name(id='failure_extras', ctx=Store(), lineno=396, col_offset=4, end_lineno=396, end_col_offset=18)], value=IfExp(test=Name(id='options', ctx=Load(), lineno=396, col_offset=39, end_lineno=396, end_col_offset=46), body=Attribute(value=Name(id='options', ctx=Load(), lineno=396, col_offset=21, end_lineno=396, end_col_offset=28), attr='extras', ctx=Load(), lineno=396, col_offset=21, end_lineno=396, end_col_offset=35), orelse=Constant(value=None, lineno=396, col_offset=52, end_lineno=396, end_col_offset=56), lineno=396, col_offset=21, end_lineno=396, end_col_offset=56), lineno=396, col_offset=4, end_lineno=396, end_col_offset=56), Assign(targets=[Name(id='exc', ctx=Store(), lineno=397, col_offset=4, end_lineno=397, end_col_offset=7)], value=IfExp(test=Name(id='options', ctx=Load(), lineno=397, col_offset=25, end_lineno=397, end_col_offset=32), body=Attribute(value=Name(id='options', ctx=Load(), lineno=397, col_offset=10, end_lineno=397, end_col_offset=17), attr='exc', ctx=Load(), lineno=397, col_offset=10, end_lineno=397, end_col_offset=21), orelse=Constant(value=None, lineno=397, col_offset=38, end_lineno=397, end_col_offset=42), lineno=397, col_offset=10, end_lineno=397, end_col_offset=42), lineno=397, col_offset=4, end_lineno=397, end_col_offset=42), Assign(targets=[Name(id='problem', ctx=Store(), lineno=398, col_offset=4, end_lineno=398, end_col_offset=11)], value=Call(func=Name(id='_build_problem', ctx=Load(), lineno=398, col_offset=14, end_lineno=398, end_col_offset=28), args=[Name(id='context', ctx=Load(), lineno=398, col_offset=29, end_lineno=398, end_col_offset=36)], keywords=[keyword(arg='detail', value=Name(id='detail', ctx=Load(), lineno=398, col_offset=45, end_lineno=398, end_col_offset=51), lineno=398, col_offset=38, end_lineno=398, end_col_offset=51), keyword(arg='status', value=Name(id='status', ctx=Load(), lineno=398, col_offset=60, end_lineno=398, end_col_offset=66), lineno=398, col_offset=53, end_lineno=398, end_col_offset=66), keyword(arg='extras', value=Name(id='failure_extras', ctx=Load(), lineno=398, col_offset=75, end_lineno=398, end_col_offset=89), lineno=398, col_offset=68, end_lineno=398, end_col_offset=89)], lineno=398, col_offset=14, end_lineno=398, end_col_offset=90), lineno=398, col_offset=4, end_lineno=398, end_col_offset=90), Assign(targets=[Name(id='builder', ctx=Store(), lineno=399, col_offset=4, end_lineno=399, end_col_offset=11)], value=Call(func=Attribute(value=Name(id='CliEnvelopeBuilder', ctx=Load(), lineno=399, col_offset=14, end_lineno=399, end_col_offset=32), attr='create', ctx=Load(), lineno=399, col_offset=14, end_lineno=399, end_col_offset=39), keywords=[keyword(arg='command', value=Name(id='CLI_COMMAND', ctx=Load(), lineno=400, col_offset=16, end_lineno=400, end_col_offset=27), lineno=400, col_offset=8, end_lineno=400, end_col_offset=27), keyword(arg='status', value=Call(func=Name(id='_run_status_from_error', ctx=Load(), lineno=401, col_offset=15, end_lineno=401, end_col_offset=37), args=[Name(id='error_status', ctx=Load(), lineno=401, col_offset=38, end_lineno=401, end_col_offset=50)], lineno=401, col_offset=15, end_lineno=401, end_col_offset=51), lineno=401, col_offset=8, end_lineno=401, end_col_offset=51), keyword(arg='subcommand', value=Name(id='SUBCOMMAND_BUILD_GRAPHS', ctx=Load(), lineno=402, col_offset=19, end_lineno=402, end_col_offset=42), lineno=402, col_offset=8, end_lineno=402, end_col_offset=42)], lineno=399, col_offset=14, end_lineno=403, end_col_offset=5), lineno=399, col_offset=4, end_lineno=403, end_col_offset=5), Assign(targets=[Name(id='builder', ctx=Store(), lineno=404, col_offset=4, end_lineno=404, end_col_offset=11)], value=Call(func=Attribute(value=Name(id='builder', ctx=Load(), lineno=404, col_offset=14, end_lineno=404, end_col_offset=21), attr='add_error', ctx=Load(), lineno=404, col_offset=14, end_lineno=404, end_col_offset=31), keywords=[keyword(arg='status', value=Name(id='error_status', ctx=Load(), lineno=404, col_offset=39, end_lineno=404, end_col_offset=51), lineno=404, col_offset=32, end_lineno=404, end_col_offset=51), keyword(arg='message', value=Name(id='detail', ctx=Load(), lineno=404, col_offset=61, end_lineno=404, end_col_offset=67), lineno=404, col_offset=53, end_lineno=404, end_col_offset=67), keyword(arg='problem', value=Name(id='problem', ctx=Load(), lineno=404, col_offset=77, end_lineno=404, end_col_offset=84), lineno=404, col_offset=69, end_lineno=404, end_col_offset=84)], lineno=404, col_offset=14, end_lineno=404, end_col_offset=85), lineno=404, col_offset=4, end_lineno=404, end_col_offset=85), Assign(targets=[Name(id='builder', ctx=Store(), lineno=405, col_offset=4, end_lineno=405, end_col_offset=11)], value=Call(func=Attribute(value=Name(id='builder', ctx=Load(), lineno=405, col_offset=14, end_lineno=405, end_col_offset=21), attr='set_problem', ctx=Load(), lineno=405, col_offset=14, end_lineno=405, end_col_offset=33), args=[Name(id='problem', ctx=Load(), lineno=405, col_offset=34, end_lineno=405, end_col_offset=41)], lineno=405, col_offset=14, end_lineno=405, end_col_offset=42), lineno=405, col_offset=4, end_lineno=405, end_col_offset=42), Assign(targets=[Name(id='envelope', ctx=Store(), lineno=406, col_offset=4, end_lineno=406, end_col_offset=12)], value=Call(func=Attribute(value=Name(id='builder', ctx=Load(), lineno=406, col_offset=15, end_lineno=406, end_col_offset=22), attr='finish', ctx=Load(), lineno=406, col_offset=15, end_lineno=406, end_col_offset=29), keywords=[keyword(arg='duration_seconds', value=Call(func=Attribute(value=Name(id='context', ctx=Load(), lineno=406, col_offset=47, end_lineno=406, end_col_offset=54), attr='elapsed', ctx=Load(), lineno=406, col_offset=47, end_lineno=406, end_col_offset=62), lineno=406, col_offset=47, end_lineno=406, end_col_offset=64), lineno=406, col_offset=30, end_lineno=406, end_col_offset=64)], lineno=406, col_offset=15, end_lineno=406, end_col_offset=65), lineno=406, col_offset=4, end_lineno=406, end_col_offset=65), Assign(targets=[Name(id='path', ctx=Store(), lineno=407, col_offset=4, end_lineno=407, end_col_offset=8)], value=Call(func=Name(id='_emit_envelope', ctx=Load(), lineno=407, col_offset=11, end_lineno=407, end_col_offset=25), args=[Name(id='envelope', ctx=Load(), lineno=407, col_offset=26, end_lineno=407, end_col_offset=34)], keywords=[keyword(arg='logger', value=Attribute(value=Name(id='context', ctx=Load(), lineno=407, col_offset=43, end_lineno=407, end_col_offset=50), attr='logger', ctx=Load(), lineno=407, col_offset=43, end_lineno=407, end_col_offset=57), lineno=407, col_offset=36, end_lineno=407, end_col_offset=57), keyword(arg='subcommand', value=Name(id='SUBCOMMAND_BUILD_GRAPHS', ctx=Load(), lineno=407, col_offset=70, end_lineno=407, end_col_offset=93), lineno=407, col_offset=59, end_lineno=407, end_col_offset=93)], lineno=407, col_offset=11, end_lineno=407, end_col_offset=94), lineno=407, col_offset=4, end_lineno=407, end_col_offset=94), AnnAssign(target=Name(id='log_extra', ctx=Store(), lineno=408, col_offset=4, end_lineno=408, end_col_offset=13), annotation=Subscript(value=Name(id='dict', ctx=Load(), lineno=408, col_offset=15, end_lineno=408, end_col_offset=19), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=408, col_offset=20, end_lineno=408, end_col_offset=23), Name(id='JsonValue', ctx=Load(), lineno=408, col_offset=25, end_lineno=408, end_col_offset=34)], ctx=Load(), lineno=408, col_offset=20, end_lineno=408, end_col_offset=34), ctx=Load(), lineno=408, col_offset=15, end_lineno=408, end_col_offset=35), value=Dict(keys=[Constant(value='status', lineno=409, col_offset=8, end_lineno=409, end_col_offset=16), Constant(value='cli_envelope', lineno=410, col_offset=8, end_lineno=410, end_col_offset=22), Constant(value='duration_seconds', lineno=411, col_offset=8, end_lineno=411, end_col_offset=26)], values=[Attribute(value=Name(id='envelope', ctx=Load(), lineno=409, col_offset=18, end_lineno=409, end_col_offset=26), attr='status', ctx=Load(), lineno=409, col_offset=18, end_lineno=409, end_col_offset=33), Call(func=Name(id='str', ctx=Load(), lineno=410, col_offset=24, end_lineno=410, end_col_offset=27), args=[Name(id='path', ctx=Load(), lineno=410, col_offset=28, end_lineno=410, end_col_offset=32)], lineno=410, col_offset=24, end_lineno=410, end_col_offset=33), Attribute(value=Name(id='envelope', ctx=Load(), lineno=411, col_offset=28, end_lineno=411, end_col_offset=36), attr='duration_seconds', ctx=Load(), lineno=411, col_offset=28, end_lineno=411, end_col_offset=53)], lineno=408, col_offset=38, end_lineno=412, end_col_offset=5), simple=1, lineno=408, col_offset=4, end_lineno=412, end_col_offset=5), If(test=Name(id='failure_extras', ctx=Load(), lineno=413, col_offset=7, end_lineno=413, end_col_offset=21), body=[Expr(value=Call(func=Attribute(value=Name(id='log_extra', ctx=Load(), lineno=414, col_offset=8, end_lineno=414, end_col_offset=17), attr='update', ctx=Load(), lineno=414, col_offset=8, end_lineno=414, end_col_offset=24), args=[Call(func=Attribute(value=Name(id='context', ctx=Load(), lineno=414, col_offset=25, end_lineno=414, end_col_offset=32), attr='extensions', ctx=Load(), lineno=414, col_offset=25, end_lineno=414, end_col_offset=43), args=[Name(id='failure_extras', ctx=Load(), lineno=414, col_offset=44, end_lineno=414, end_col_offset=58)], lineno=414, col_offset=25, end_lineno=414, end_col_offset=59)], lineno=414, col_offset=8, end_lineno=414, end_col_offset=60), lineno=414, col_offset=8, end_lineno=414, end_col_offset=60)], lineno=413, col_offset=4, end_lineno=414, end_col_offset=60), Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='context', ctx=Load(), lineno=415, col_offset=4, end_lineno=415, end_col_offset=11), attr='logger', ctx=Load(), lineno=415, col_offset=4, end_lineno=415, end_col_offset=18), attr='error', ctx=Load(), lineno=415, col_offset=4, end_lineno=415, end_col_offset=24), args=[Constant(value='Command failed', lineno=415, col_offset=25, end_lineno=415, end_col_offset=41)], keywords=[keyword(arg='extra', value=Name(id='log_extra', ctx=Load(), lineno=415, col_offset=49, end_lineno=415, end_col_offset=58), lineno=415, col_offset=43, end_lineno=415, end_col_offset=58), keyword(arg='exc_info', value=Name(id='exc', ctx=Load(), lineno=415, col_offset=69, end_lineno=415, end_col_offset=72), lineno=415, col_offset=60, end_lineno=415, end_col_offset=72)], lineno=415, col_offset=4, end_lineno=415, end_col_offset=73), lineno=415, col_offset=4, end_lineno=415, end_col_offset=73), Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='sys', ctx=Load(), lineno=416, col_offset=4, end_lineno=416, end_col_offset=7), attr='stderr', ctx=Load(), lineno=416, col_offset=4, end_lineno=416, end_col_offset=14), attr='write', ctx=Load(), lineno=416, col_offset=4, end_lineno=416, end_col_offset=20), args=[BinOp(left=Name(id='detail', ctx=Load(), lineno=416, col_offset=21, end_lineno=416, end_col_offset=27), op=Add(), right=Constant(value='\n', lineno=416, col_offset=30, end_lineno=416, end_col_offset=34), lineno=416, col_offset=21, end_lineno=416, end_col_offset=34)], lineno=416, col_offset=4, end_lineno=416, end_col_offset=35), lineno=416, col_offset=4, end_lineno=416, end_col_offset=35), Return(value=IfExp(test=Compare(left=Name(id='error_status', ctx=Load(), lineno=417, col_offset=16, end_lineno=417, end_col_offset=28), ops=[In()], comparators=[Set(elts=[Constant(value='config', lineno=417, col_offset=33, end_lineno=417, end_col_offset=41), Constant(value='violation', lineno=417, col_offset=43, end_lineno=417, end_col_offset=54)], lineno=417, col_offset=32, end_lineno=417, end_col_offset=55)], lineno=417, col_offset=16, end_lineno=417, end_col_offset=55), body=Constant(value=2, lineno=417, col_offset=11, end_lineno=417, end_col_offset=12), orelse=Constant(value=1, lineno=417, col_offset=61, end_lineno=417, end_col_offset=62), lineno=417, col_offset=11, end_lineno=417, end_col_offset=62), lineno=417, col_offset=4, end_lineno=417, end_col_offset=62)], returns=Name(id='int', ctx=Load(), lineno=395, col_offset=5, end_lineno=395, end_col_offset=8), lineno=388, col_offset=0, end_lineno=417, end_col_offset=62), FunctionDef(name='_finish_success', args=arguments(args=[arg(arg='context', annotation=Name(id='_CommandContext', ctx=Load(), lineno=420, col_offset=29, end_lineno=420, end_col_offset=44), lineno=420, col_offset=20, end_lineno=420, end_col_offset=44), arg(arg='summary', annotation=Subscript(value=Name(id='Mapping', ctx=Load(), lineno=420, col_offset=55, end_lineno=420, end_col_offset=62), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=420, col_offset=63, end_lineno=420, end_col_offset=66), Name(id='object', ctx=Load(), lineno=420, col_offset=68, end_lineno=420, end_col_offset=74)], ctx=Load(), lineno=420, col_offset=63, end_lineno=420, end_col_offset=74), ctx=Load(), lineno=420, col_offset=55, end_lineno=420, end_col_offset=75), lineno=420, col_offset=46, end_lineno=420, end_col_offset=75)]), body=[Assign(targets=[Name(id='builder', ctx=Store(), lineno=421, col_offset=4, end_lineno=421, end_col_offset=11)], value=Attribute(value=Name(id='context', ctx=Load(), lineno=421, col_offset=14, end_lineno=421, end_col_offset=21), attr='builder', ctx=Load(), lineno=421, col_offset=14, end_lineno=421, end_col_offset=29), lineno=421, col_offset=4, end_lineno=421, end_col_offset=29), Assign(targets=[Name(id='builder', ctx=Store(), lineno=422, col_offset=4, end_lineno=422, end_col_offset=11)], value=Call(func=Attribute(value=Name(id='builder', ctx=Load(), lineno=422, col_offset=14, end_lineno=422, end_col_offset=21), attr='add_file', ctx=Load(), lineno=422, col_offset=14, end_lineno=422, end_col_offset=30), keywords=[keyword(arg='path', value=Call(func=Name(id='str', ctx=Load(), lineno=423, col_offset=13, end_lineno=423, end_col_offset=16), args=[Name(id='OUT', ctx=Load(), lineno=423, col_offset=17, end_lineno=423, end_col_offset=20)], lineno=423, col_offset=13, end_lineno=423, end_col_offset=21), lineno=423, col_offset=8, end_lineno=423, end_col_offset=21), keyword(arg='status', value=Constant(value='success', lineno=424, col_offset=15, end_lineno=424, end_col_offset=24), lineno=424, col_offset=8, end_lineno=424, end_col_offset=24), keyword(arg='message', value=Constant(value='Documentation dependency graphs generated', lineno=425, col_offset=16, end_lineno=425, end_col_offset=59), lineno=425, col_offset=8, end_lineno=425, end_col_offset=59)], lineno=422, col_offset=14, end_lineno=426, end_col_offset=5), lineno=422, col_offset=4, end_lineno=426, end_col_offset=5), Assign(targets=[Name(id='builder', ctx=Store(), lineno=427, col_offset=4, end_lineno=427, end_col_offset=11)], value=Call(func=Attribute(value=Name(id='builder', ctx=Load(), lineno=427, col_offset=14, end_lineno=427, end_col_offset=21), attr='add_file', ctx=Load(), lineno=427, col_offset=14, end_lineno=427, end_col_offset=30), keywords=[keyword(arg='path', value=Call(func=Name(id='str', ctx=Load(), lineno=428, col_offset=13, end_lineno=428, end_col_offset=16), args=[BinOp(left=Name(id='OUT', ctx=Load(), lineno=428, col_offset=17, end_lineno=428, end_col_offset=20), op=Div(), right=Constant(value='graph_meta.json', lineno=428, col_offset=23, end_lineno=428, end_col_offset=40), lineno=428, col_offset=17, end_lineno=428, end_col_offset=40)], lineno=428, col_offset=13, end_lineno=428, end_col_offset=41), lineno=428, col_offset=8, end_lineno=428, end_col_offset=41), keyword(arg='status', value=Constant(value='success', lineno=429, col_offset=15, end_lineno=429, end_col_offset=24), lineno=429, col_offset=8, end_lineno=429, end_col_offset=24), keyword(arg='message', value=Constant(value='Global graph metadata summary', lineno=430, col_offset=16, end_lineno=430, end_col_offset=47), lineno=430, col_offset=8, end_lineno=430, end_col_offset=47)], lineno=427, col_offset=14, end_lineno=431, end_col_offset=5), lineno=427, col_offset=4, end_lineno=431, end_col_offset=5), Assign(targets=[Name(id='builder', ctx=Store(), lineno=432, col_offset=4, end_lineno=432, end_col_offset=11)], value=Call(func=Attribute(value=Name(id='builder', ctx=Load(), lineno=432, col_offset=14, end_lineno=432, end_col_offset=21), attr='add_file', ctx=Load(), lineno=432, col_offset=14, end_lineno=432, end_col_offset=30), keywords=[keyword(arg='path', value=Call(func=Name(id='str', ctx=Load(), lineno=433, col_offset=13, end_lineno=433, end_col_offset=16), args=[BinOp(left=Name(id='OUT', ctx=Load(), lineno=433, col_offset=17, end_lineno=433, end_col_offset=20), op=Div(), right=JoinedStr(values=[Constant(value='subsystems.', lineno=433, col_offset=25, end_lineno=433, end_col_offset=36), FormattedValue(value=Attribute(value=Attribute(value=Name(id='context', ctx=Load(), lineno=433, col_offset=37, end_lineno=433, end_col_offset=44), attr='args', ctx=Load(), lineno=433, col_offset=37, end_lineno=433, end_col_offset=49), attr='format', ctx=Load(), lineno=433, col_offset=37, end_lineno=433, end_col_offset=56), conversion=-1, lineno=433, col_offset=36, end_lineno=433, end_col_offset=57)], lineno=433, col_offset=23, end_lineno=433, end_col_offset=58), lineno=433, col_offset=17, end_lineno=433, end_col_offset=58)], lineno=433, col_offset=13, end_lineno=433, end_col_offset=59), lineno=433, col_offset=8, end_lineno=433, end_col_offset=59), keyword(arg='status', value=Constant(value='success', lineno=434, col_offset=15, end_lineno=434, end_col_offset=24), lineno=434, col_offset=8, end_lineno=434, end_col_offset=24), keyword(arg='message', value=Constant(value='Subsystem dependency graph', lineno=435, col_offset=16, end_lineno=435, end_col_offset=44), lineno=435, col_offset=8, end_lineno=435, end_col_offset=44)], lineno=432, col_offset=14, end_lineno=436, end_col_offset=5), lineno=432, col_offset=4, end_lineno=436, end_col_offset=5), Assign(targets=[Name(id='envelope', ctx=Store(), lineno=437, col_offset=4, end_lineno=437, end_col_offset=12)], value=Call(func=Attribute(value=Name(id='builder', ctx=Load(), lineno=437, col_offset=15, end_lineno=437, end_col_offset=22), attr='finish', ctx=Load(), lineno=437, col_offset=15, end_lineno=437, end_col_offset=29), keywords=[keyword(arg='duration_seconds', value=Call(func=Attribute(value=Name(id='context', ctx=Load(), lineno=437, col_offset=47, end_lineno=437, end_col_offset=54), attr='elapsed', ctx=Load(), lineno=437, col_offset=47, end_lineno=437, end_col_offset=62), lineno=437, col_offset=47, end_lineno=437, end_col_offset=64), lineno=437, col_offset=30, end_lineno=437, end_col_offset=64)], lineno=437, col_offset=15, end_lineno=437, end_col_offset=65), lineno=437, col_offset=4, end_lineno=437, end_col_offset=65), Assign(targets=[Name(id='path', ctx=Store(), lineno=438, col_offset=4, end_lineno=438, end_col_offset=8)], value=Call(func=Name(id='_emit_envelope', ctx=Load(), lineno=438, col_offset=11, end_lineno=438, end_col_offset=25), args=[Name(id='envelope', ctx=Load(), lineno=438, col_offset=26, end_lineno=438, end_col_offset=34)], keywords=[keyword(arg='logger', value=Attribute(value=Name(id='context', ctx=Load(), lineno=438, col_offset=43, end_lineno=438, end_col_offset=50), attr='logger', ctx=Load(), lineno=438, col_offset=43, end_lineno=438, end_col_offset=57), lineno=438, col_offset=36, end_lineno=438, end_col_offset=57), keyword(arg='subcommand', value=Name(id='SUBCOMMAND_BUILD_GRAPHS', ctx=Load(), lineno=438, col_offset=70, end_lineno=438, end_col_offset=93), lineno=438, col_offset=59, end_lineno=438, end_col_offset=93)], lineno=438, col_offset=11, end_lineno=438, end_col_offset=94), lineno=438, col_offset=4, end_lineno=438, end_col_offset=94), AnnAssign(target=Name(id='log_extra', ctx=Store(), lineno=439, col_offset=4, end_lineno=439, end_col_offset=13), annotation=Subscript(value=Name(id='dict', ctx=Load(), lineno=439, col_offset=15, end_lineno=439, end_col_offset=19), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=439, col_offset=20, end_lineno=439, end_col_offset=23), Name(id='JsonValue', ctx=Load(), lineno=439, col_offset=25, end_lineno=439, end_col_offset=34)], ctx=Load(), lineno=439, col_offset=20, end_lineno=439, end_col_offset=34), ctx=Load(), lineno=439, col_offset=15, end_lineno=439, end_col_offset=35), value=Dict(keys=[Constant(value='status', lineno=440, col_offset=8, end_lineno=440, end_col_offset=16), Constant(value='cli_envelope', lineno=441, col_offset=8, end_lineno=441, end_col_offset=22), Constant(value='duration_seconds', lineno=442, col_offset=8, end_lineno=442, end_col_offset=26)], values=[Attribute(value=Name(id='envelope', ctx=Load(), lineno=440, col_offset=18, end_lineno=440, end_col_offset=26), attr='status', ctx=Load(), lineno=440, col_offset=18, end_lineno=440, end_col_offset=33), Call(func=Name(id='str', ctx=Load(), lineno=441, col_offset=24, end_lineno=441, end_col_offset=27), args=[Name(id='path', ctx=Load(), lineno=441, col_offset=28, end_lineno=441, end_col_offset=32)], lineno=441, col_offset=24, end_lineno=441, end_col_offset=33), Attribute(value=Name(id='envelope', ctx=Load(), lineno=442, col_offset=28, end_lineno=442, end_col_offset=36), attr='duration_seconds', ctx=Load(), lineno=442, col_offset=28, end_lineno=442, end_col_offset=53)], lineno=439, col_offset=38, end_lineno=443, end_col_offset=5), simple=1, lineno=439, col_offset=4, end_lineno=443, end_col_offset=5), Expr(value=Call(func=Attribute(value=Name(id='log_extra', ctx=Load(), lineno=444, col_offset=4, end_lineno=444, end_col_offset=13), attr='update', ctx=Load(), lineno=444, col_offset=4, end_lineno=444, end_col_offset=20), args=[Call(func=Name(id='_prepare_extensions', ctx=Load(), lineno=444, col_offset=21, end_lineno=444, end_col_offset=40), args=[Name(id='summary', ctx=Load(), lineno=444, col_offset=41, end_lineno=444, end_col_offset=48)], lineno=444, col_offset=21, end_lineno=444, end_col_offset=49)], lineno=444, col_offset=4, end_lineno=444, end_col_offset=50), lineno=444, col_offset=4, end_lineno=444, end_col_offset=50), Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='context', ctx=Load(), lineno=445, col_offset=4, end_lineno=445, end_col_offset=11), attr='logger', ctx=Load(), lineno=445, col_offset=4, end_lineno=445, end_col_offset=18), attr='info', ctx=Load(), lineno=445, col_offset=4, end_lineno=445, end_col_offset=23), args=[Constant(value='Command completed', lineno=445, col_offset=24, end_lineno=445, end_col_offset=43)], keywords=[keyword(arg='extra', value=Name(id='log_extra', ctx=Load(), lineno=445, col_offset=51, end_lineno=445, end_col_offset=60), lineno=445, col_offset=45, end_lineno=445, end_col_offset=60)], lineno=445, col_offset=4, end_lineno=445, end_col_offset=61), lineno=445, col_offset=4, end_lineno=445, end_col_offset=61), Return(value=Constant(value=0, lineno=446, col_offset=11, end_lineno=446, end_col_offset=12), lineno=446, col_offset=4, end_lineno=446, end_col_offset=12)], returns=Name(id='int', ctx=Load(), lineno=420, col_offset=80, end_lineno=420, end_col_offset=83), lineno=420, col_offset=0, end_lineno=446, end_col_offset=12), FunctionDef(name='_start_command', args=arguments(args=[arg(arg='args', annotation=Attribute(value=Name(id='argparse', ctx=Load(), lineno=449, col_offset=25, end_lineno=449, end_col_offset=33), attr='Namespace', ctx=Load(), lineno=449, col_offset=25, end_lineno=449, end_col_offset=43), lineno=449, col_offset=19, end_lineno=449, end_col_offset=43)]), body=[Assign(targets=[Name(id='correlation_id', ctx=Store(), lineno=450, col_offset=4, end_lineno=450, end_col_offset=18)], value=Attribute(value=Call(func=Name(id='uuid4', ctx=Load(), lineno=450, col_offset=21, end_lineno=450, end_col_offset=26), lineno=450, col_offset=21, end_lineno=450, end_col_offset=28), attr='hex', ctx=Load(), lineno=450, col_offset=21, end_lineno=450, end_col_offset=32), lineno=450, col_offset=4, end_lineno=450, end_col_offset=32), Assign(targets=[Name(id='logger', ctx=Store(), lineno=451, col_offset=4, end_lineno=451, end_col_offset=10)], value=Call(func=Name(id='with_fields', ctx=Load(), lineno=451, col_offset=13, end_lineno=451, end_col_offset=24), args=[Name(id='LOGGER', ctx=Load(), lineno=452, col_offset=8, end_lineno=452, end_col_offset=14)], keywords=[keyword(arg='command', value=Name(id='CLI_COMMAND', ctx=Load(), lineno=453, col_offset=16, end_lineno=453, end_col_offset=27), lineno=453, col_offset=8, end_lineno=453, end_col_offset=27), keyword(arg='subcommand', value=Name(id='SUBCOMMAND_BUILD_GRAPHS', ctx=Load(), lineno=454, col_offset=19, end_lineno=454, end_col_offset=42), lineno=454, col_offset=8, end_lineno=454, end_col_offset=42), keyword(arg='correlation_id', value=Name(id='correlation_id', ctx=Load(), lineno=455, col_offset=23, end_lineno=455, end_col_offset=37), lineno=455, col_offset=8, end_lineno=455, end_col_offset=37), keyword(arg='format', value=Attribute(value=Name(id='args', ctx=Load(), lineno=456, col_offset=15, end_lineno=456, end_col_offset=19), attr='format', ctx=Load(), lineno=456, col_offset=15, end_lineno=456, end_col_offset=26), lineno=456, col_offset=8, end_lineno=456, end_col_offset=26), keyword(arg='packages', value=Attribute(value=Name(id='args', ctx=Load(), lineno=457, col_offset=17, end_lineno=457, end_col_offset=21), attr='packages', ctx=Load(), lineno=457, col_offset=17, end_lineno=457, end_col_offset=30), lineno=457, col_offset=8, end_lineno=457, end_col_offset=30), keyword(arg='max_workers', value=Attribute(value=Name(id='args', ctx=Load(), lineno=458, col_offset=20, end_lineno=458, end_col_offset=24), attr='max_workers', ctx=Load(), lineno=458, col_offset=20, end_lineno=458, end_col_offset=36), lineno=458, col_offset=8, end_lineno=458, end_col_offset=36)], lineno=451, col_offset=13, end_lineno=459, end_col_offset=5), lineno=451, col_offset=4, end_lineno=459, end_col_offset=5), Expr(value=Call(func=Attribute(value=Name(id='logger', ctx=Load(), lineno=460, col_offset=4, end_lineno=460, end_col_offset=10), attr='info', ctx=Load(), lineno=460, col_offset=4, end_lineno=460, end_col_offset=15), args=[Constant(value='Command started', lineno=460, col_offset=16, end_lineno=460, end_col_offset=33)], keywords=[keyword(arg='extra', value=Dict(keys=[Constant(value='status', lineno=460, col_offset=42, end_lineno=460, end_col_offset=50)], values=[Constant(value='start', lineno=460, col_offset=52, end_lineno=460, end_col_offset=59)], lineno=460, col_offset=41, end_lineno=460, end_col_offset=60), lineno=460, col_offset=35, end_lineno=460, end_col_offset=60)], lineno=460, col_offset=4, end_lineno=460, end_col_offset=61), lineno=460, col_offset=4, end_lineno=460, end_col_offset=61), Assign(targets=[Name(id='builder', ctx=Store(), lineno=461, col_offset=4, end_lineno=461, end_col_offset=11)], value=Call(func=Attribute(value=Name(id='CliEnvelopeBuilder', ctx=Load(), lineno=461, col_offset=14, end_lineno=461, end_col_offset=32), attr='create', ctx=Load(), lineno=461, col_offset=14, end_lineno=461, end_col_offset=39), keywords=[keyword(arg='command', value=Name(id='CLI_COMMAND', ctx=Load(), lineno=462, col_offset=16, end_lineno=462, end_col_offset=27), lineno=462, col_offset=8, end_lineno=462, end_col_offset=27), keyword(arg='status', value=Call(func=Name(id='cast', ctx=Load(), lineno=463, col_offset=15, end_lineno=463, end_col_offset=19), args=[Constant(value='CliStatus', lineno=463, col_offset=20, end_lineno=463, end_col_offset=31), Constant(value='success', lineno=463, col_offset=33, end_lineno=463, end_col_offset=42)], lineno=463, col_offset=15, end_lineno=463, end_col_offset=43), lineno=463, col_offset=8, end_lineno=463, end_col_offset=43), keyword(arg='subcommand', value=Name(id='SUBCOMMAND_BUILD_GRAPHS', ctx=Load(), lineno=464, col_offset=19, end_lineno=464, end_col_offset=42), lineno=464, col_offset=8, end_lineno=464, end_col_offset=42)], lineno=461, col_offset=14, end_lineno=465, end_col_offset=5), lineno=461, col_offset=4, end_lineno=465, end_col_offset=5), Return(value=Call(func=Name(id='_CommandContext', ctx=Load(), lineno=466, col_offset=11, end_lineno=466, end_col_offset=26), keywords=[keyword(arg='args', value=Name(id='args', ctx=Load(), lineno=467, col_offset=13, end_lineno=467, end_col_offset=17), lineno=467, col_offset=8, end_lineno=467, end_col_offset=17), keyword(arg='correlation_id', value=Name(id='correlation_id', ctx=Load(), lineno=468, col_offset=23, end_lineno=468, end_col_offset=37), lineno=468, col_offset=8, end_lineno=468, end_col_offset=37), keyword(arg='logger', value=Name(id='logger', ctx=Load(), lineno=469, col_offset=15, end_lineno=469, end_col_offset=21), lineno=469, col_offset=8, end_lineno=469, end_col_offset=21), keyword(arg='builder', value=Name(id='builder', ctx=Load(), lineno=470, col_offset=16, end_lineno=470, end_col_offset=23), lineno=470, col_offset=8, end_lineno=470, end_col_offset=23), keyword(arg='start', value=Call(func=Attribute(value=Name(id='time', ctx=Load(), lineno=471, col_offset=14, end_lineno=471, end_col_offset=18), attr='monotonic', ctx=Load(), lineno=471, col_offset=14, end_lineno=471, end_col_offset=28), lineno=471, col_offset=14, end_lineno=471, end_col_offset=30), lineno=471, col_offset=8, end_lineno=471, end_col_offset=30)], lineno=466, col_offset=11, end_lineno=472, end_col_offset=5), lineno=466, col_offset=4, end_lineno=472, end_col_offset=5)], returns=Name(id='_CommandContext', ctx=Load(), lineno=449, col_offset=48, end_lineno=449, end_col_offset=63), lineno=449, col_offset=0, end_lineno=472, end_col_offset=5), Assign(targets=[Name(id='LAYER_FILE', ctx=Store(), lineno=476, col_offset=0, end_lineno=476, end_col_offset=10)], value=BinOp(left=BinOp(left=BinOp(left=Name(id='ROOT', ctx=Load(), lineno=476, col_offset=13, end_lineno=476, end_col_offset=17), op=Div(), right=Constant(value='docs', lineno=476, col_offset=20, end_lineno=476, end_col_offset=26), lineno=476, col_offset=13, end_lineno=476, end_col_offset=26), op=Div(), right=Constant(value='policies', lineno=476, col_offset=29, end_lineno=476, end_col_offset=39), lineno=476, col_offset=13, end_lineno=476, end_col_offset=39), op=Div(), right=Constant(value='layers.yml', lineno=476, col_offset=42, end_lineno=476, end_col_offset=54), lineno=476, col_offset=13, end_lineno=476, end_col_offset=54), lineno=476, col_offset=0, end_lineno=476, end_col_offset=54), Assign(targets=[Name(id='ALLOW_FILE', ctx=Store(), lineno=477, col_offset=0, end_lineno=477, end_col_offset=10)], value=BinOp(left=BinOp(left=BinOp(left=Name(id='ROOT', ctx=Load(), lineno=477, col_offset=13, end_lineno=477, end_col_offset=17), op=Div(), right=Constant(value='docs', lineno=477, col_offset=20, end_lineno=477, end_col_offset=26), lineno=477, col_offset=13, end_lineno=477, end_col_offset=26), op=Div(), right=Constant(value='policies', lineno=477, col_offset=29, end_lineno=477, end_col_offset=39), lineno=477, col_offset=13, end_lineno=477, end_col_offset=39), op=Div(), right=Constant(value='graph_allowlist.json', lineno=477, col_offset=42, end_lineno=477, end_col_offset=64), lineno=477, col_offset=13, end_lineno=477, end_col_offset=64), lineno=477, col_offset=0, end_lineno=477, end_col_offset=64), FunctionDef(name='parse_args', args=arguments(args=[arg(arg='argv', annotation=BinOp(left=Subscript(value=Name(id='Sequence', ctx=Load(), lineno=484, col_offset=21, end_lineno=484, end_col_offset=29), slice=Name(id='str', ctx=Load(), lineno=484, col_offset=30, end_lineno=484, end_col_offset=33), ctx=Load(), lineno=484, col_offset=21, end_lineno=484, end_col_offset=34), op=BitOr(), right=Constant(value=None, lineno=484, col_offset=37, end_lineno=484, end_col_offset=41), lineno=484, col_offset=21, end_lineno=484, end_col_offset=41), lineno=484, col_offset=15, end_lineno=484, end_col_offset=41)], defaults=[Constant(value=None, lineno=484, col_offset=44, end_lineno=484, end_col_offset=48)]), body=[Expr(value=Constant(value='Compute parse args.\n\n    Carry out the parse args operation for the surrounding component. Generated documentation highlights how this helper collaborates with neighbouring utilities. Callers rely on the routine to remain stable across releases.\n\n    Parameters\n    ----------\n    argv : Sequence[str] | None, optional\n        Command-line arguments to parse. When ``None``, uses ``sys.argv``.\n\n    Returns\n    -------\n    argparse.Namespace\n        Description of return value.\n\n    Examples\n    --------\n    >>> from tools.docs.build_graphs import parse_args\n    >>> result = parse_args()\n    >>> result  # doctest: +ELLIPSIS\n    ', lineno=485, col_offset=4, end_lineno=504, end_col_offset=7), lineno=485, col_offset=4, end_lineno=504, end_col_offset=7), Assign(targets=[Name(id='p', ctx=Store(), lineno=505, col_offset=4, end_lineno=505, end_col_offset=5)], value=Call(func=Attribute(value=Name(id='argparse', ctx=Load(), lineno=505, col_offset=8, end_lineno=505, end_col_offset=16), attr='ArgumentParser', ctx=Load(), lineno=505, col_offset=8, end_lineno=505, end_col_offset=31), keywords=[keyword(arg='description', value=Constant(value='Build per-package and cross-subsystem graphs with policy checks.', lineno=506, col_offset=20, end_lineno=506, end_col_offset=86), lineno=506, col_offset=8, end_lineno=506, end_col_offset=86)], lineno=505, col_offset=8, end_lineno=507, end_col_offset=5), lineno=505, col_offset=4, end_lineno=507, end_col_offset=5), Expr(value=Call(func=Attribute(value=Name(id='p', ctx=Load(), lineno=508, col_offset=4, end_lineno=508, end_col_offset=5), attr='add_argument', ctx=Load(), lineno=508, col_offset=4, end_lineno=508, end_col_offset=18), args=[Constant(value='--packages', lineno=509, col_offset=8, end_lineno=509, end_col_offset=20)], keywords=[keyword(arg='default', value=Call(func=Attribute(value=Name(id='os', ctx=Load(), lineno=510, col_offset=16, end_lineno=510, end_col_offset=18), attr='getenv', ctx=Load(), lineno=510, col_offset=16, end_lineno=510, end_col_offset=25), args=[Constant(value='DOCS_PKG', lineno=510, col_offset=26, end_lineno=510, end_col_offset=36), Constant(value='', lineno=510, col_offset=38, end_lineno=510, end_col_offset=40)], lineno=510, col_offset=16, end_lineno=510, end_col_offset=41), lineno=510, col_offset=8, end_lineno=510, end_col_offset=41), keyword(arg='help', value=Constant(value='Comma-separated top-level packages (default: auto-detect under src/)', lineno=511, col_offset=13, end_lineno=511, end_col_offset=83), lineno=511, col_offset=8, end_lineno=511, end_col_offset=83)], lineno=508, col_offset=4, end_lineno=512, end_col_offset=5), lineno=508, col_offset=4, end_lineno=512, end_col_offset=5), Expr(value=Call(func=Attribute(value=Name(id='p', ctx=Load(), lineno=513, col_offset=4, end_lineno=513, end_col_offset=5), attr='add_argument', ctx=Load(), lineno=513, col_offset=4, end_lineno=513, end_col_offset=18), args=[Constant(value='--format', lineno=514, col_offset=8, end_lineno=514, end_col_offset=18)], keywords=[keyword(arg='default', value=Call(func=Attribute(value=Name(id='os', ctx=Load(), lineno=515, col_offset=16, end_lineno=515, end_col_offset=18), attr='getenv', ctx=Load(), lineno=515, col_offset=16, end_lineno=515, end_col_offset=25), args=[Constant(value='GRAPH_FORMAT', lineno=515, col_offset=26, end_lineno=515, end_col_offset=40), Constant(value='svg', lineno=515, col_offset=42, end_lineno=515, end_col_offset=47)], lineno=515, col_offset=16, end_lineno=515, end_col_offset=48), lineno=515, col_offset=8, end_lineno=515, end_col_offset=48), keyword(arg='choices', value=Call(func=Name(id='list', ctx=Load(), lineno=516, col_offset=16, end_lineno=516, end_col_offset=20), args=[Name(id='SUPPORTED_FORMATS', ctx=Load(), lineno=516, col_offset=21, end_lineno=516, end_col_offset=38)], lineno=516, col_offset=16, end_lineno=516, end_col_offset=39), lineno=516, col_offset=8, end_lineno=516, end_col_offset=39), keyword(arg='help', value=Constant(value='Image format for rendered graphs (svg or png)', lineno=517, col_offset=13, end_lineno=517, end_col_offset=60), lineno=517, col_offset=8, end_lineno=517, end_col_offset=60)], lineno=513, col_offset=4, end_lineno=518, end_col_offset=5), lineno=513, col_offset=4, end_lineno=518, end_col_offset=5), Expr(value=Call(func=Attribute(value=Name(id='p', ctx=Load(), lineno=519, col_offset=4, end_lineno=519, end_col_offset=5), attr='add_argument', ctx=Load(), lineno=519, col_offset=4, end_lineno=519, end_col_offset=18), args=[Constant(value='--max-bacon', lineno=520, col_offset=8, end_lineno=520, end_col_offset=21)], keywords=[keyword(arg='type', value=Name(id='int', ctx=Load(), lineno=521, col_offset=13, end_lineno=521, end_col_offset=16), lineno=521, col_offset=8, end_lineno=521, end_col_offset=16), keyword(arg='default', value=Call(func=Name(id='int', ctx=Load(), lineno=522, col_offset=16, end_lineno=522, end_col_offset=19), args=[Call(func=Attribute(value=Name(id='os', ctx=Load(), lineno=522, col_offset=20, end_lineno=522, end_col_offset=22), attr='getenv', ctx=Load(), lineno=522, col_offset=20, end_lineno=522, end_col_offset=29), args=[Constant(value='GRAPH_MAX_BACON', lineno=522, col_offset=30, end_lineno=522, end_col_offset=47), Constant(value='4', lineno=522, col_offset=49, end_lineno=522, end_col_offset=52)], lineno=522, col_offset=20, end_lineno=522, end_col_offset=53)], lineno=522, col_offset=16, end_lineno=522, end_col_offset=54), lineno=522, col_offset=8, end_lineno=522, end_col_offset=54), keyword(arg='help', value=Constant(value='pydeps --max-bacon (default: 4)', lineno=523, col_offset=13, end_lineno=523, end_col_offset=46), lineno=523, col_offset=8, end_lineno=523, end_col_offset=46)], lineno=519, col_offset=4, end_lineno=524, end_col_offset=5), lineno=519, col_offset=4, end_lineno=524, end_col_offset=5), Expr(value=Call(func=Attribute(value=Name(id='p', ctx=Load(), lineno=525, col_offset=4, end_lineno=525, end_col_offset=5), attr='add_argument', ctx=Load(), lineno=525, col_offset=4, end_lineno=525, end_col_offset=18), args=[Constant(value='--exclude', lineno=526, col_offset=8, end_lineno=526, end_col_offset=19)], keywords=[keyword(arg='action', value=Constant(value='append', lineno=527, col_offset=15, end_lineno=527, end_col_offset=23), lineno=527, col_offset=8, end_lineno=527, end_col_offset=23), keyword(arg='default', value=Constant(value=None, lineno=528, col_offset=16, end_lineno=528, end_col_offset=20), lineno=528, col_offset=8, end_lineno=528, end_col_offset=20), keyword(arg='help', value=Constant(value='Regex/pattern to exclude in pydeps (repeatable)', lineno=529, col_offset=13, end_lineno=529, end_col_offset=62), lineno=529, col_offset=8, end_lineno=529, end_col_offset=62)], lineno=525, col_offset=4, end_lineno=530, end_col_offset=5), lineno=525, col_offset=4, end_lineno=530, end_col_offset=5), Expr(value=Call(func=Attribute(value=Name(id='p', ctx=Load(), lineno=531, col_offset=4, end_lineno=531, end_col_offset=5), attr='add_argument', ctx=Load(), lineno=531, col_offset=4, end_lineno=531, end_col_offset=18), args=[Constant(value='--layers', lineno=532, col_offset=8, end_lineno=532, end_col_offset=18)], keywords=[keyword(arg='default', value=Call(func=Name(id='str', ctx=Load(), lineno=533, col_offset=16, end_lineno=533, end_col_offset=19), args=[Name(id='LAYER_FILE', ctx=Load(), lineno=533, col_offset=20, end_lineno=533, end_col_offset=30)], lineno=533, col_offset=16, end_lineno=533, end_col_offset=31), lineno=533, col_offset=8, end_lineno=533, end_col_offset=31), keyword(arg='help', value=Constant(value='Path to layers.yml (layer names & package mapping)', lineno=534, col_offset=13, end_lineno=534, end_col_offset=65), lineno=534, col_offset=8, end_lineno=534, end_col_offset=65)], lineno=531, col_offset=4, end_lineno=535, end_col_offset=5), lineno=531, col_offset=4, end_lineno=535, end_col_offset=5), Expr(value=Call(func=Attribute(value=Name(id='p', ctx=Load(), lineno=536, col_offset=4, end_lineno=536, end_col_offset=5), attr='add_argument', ctx=Load(), lineno=536, col_offset=4, end_lineno=536, end_col_offset=18), args=[Constant(value='--allowlist', lineno=537, col_offset=8, end_lineno=537, end_col_offset=21)], keywords=[keyword(arg='default', value=Call(func=Name(id='str', ctx=Load(), lineno=538, col_offset=16, end_lineno=538, end_col_offset=19), args=[Name(id='ALLOW_FILE', ctx=Load(), lineno=538, col_offset=20, end_lineno=538, end_col_offset=30)], lineno=538, col_offset=16, end_lineno=538, end_col_offset=31), lineno=538, col_offset=8, end_lineno=538, end_col_offset=31), keyword(arg='help', value=Constant(value='Path to graph allowlist (cycles/edges)', lineno=539, col_offset=13, end_lineno=539, end_col_offset=53), lineno=539, col_offset=8, end_lineno=539, end_col_offset=53)], lineno=536, col_offset=4, end_lineno=540, end_col_offset=5), lineno=536, col_offset=4, end_lineno=540, end_col_offset=5), Expr(value=Call(func=Attribute(value=Name(id='p', ctx=Load(), lineno=541, col_offset=4, end_lineno=541, end_col_offset=5), attr='add_argument', ctx=Load(), lineno=541, col_offset=4, end_lineno=541, end_col_offset=18), args=[Constant(value='--fail-on-cycles', lineno=542, col_offset=8, end_lineno=542, end_col_offset=26)], keywords=[keyword(arg='action', value=Constant(value='store_true', lineno=543, col_offset=15, end_lineno=543, end_col_offset=27), lineno=543, col_offset=8, end_lineno=543, end_col_offset=27), keyword(arg='default', value=Compare(left=Call(func=Attribute(value=Name(id='os', ctx=Load(), lineno=544, col_offset=16, end_lineno=544, end_col_offset=18), attr='getenv', ctx=Load(), lineno=544, col_offset=16, end_lineno=544, end_col_offset=25), args=[Constant(value='GRAPH_FAIL_ON_CYCLES', lineno=544, col_offset=26, end_lineno=544, end_col_offset=48), Constant(value='1', lineno=544, col_offset=50, end_lineno=544, end_col_offset=53)], lineno=544, col_offset=16, end_lineno=544, end_col_offset=54), ops=[Eq()], comparators=[Constant(value='1', lineno=544, col_offset=58, end_lineno=544, end_col_offset=61)], lineno=544, col_offset=16, end_lineno=544, end_col_offset=61), lineno=544, col_offset=8, end_lineno=544, end_col_offset=61), keyword(arg='help', value=Constant(value='Fail when new cycles (not allowlisted) are found (default: on)', lineno=545, col_offset=13, end_lineno=545, end_col_offset=77), lineno=545, col_offset=8, end_lineno=545, end_col_offset=77)], lineno=541, col_offset=4, end_lineno=546, end_col_offset=5), lineno=541, col_offset=4, end_lineno=546, end_col_offset=5), Expr(value=Call(func=Attribute(value=Name(id='p', ctx=Load(), lineno=547, col_offset=4, end_lineno=547, end_col_offset=5), attr='add_argument', ctx=Load(), lineno=547, col_offset=4, end_lineno=547, end_col_offset=18), args=[Constant(value='--fail-on-layer-violations', lineno=548, col_offset=8, end_lineno=548, end_col_offset=36)], keywords=[keyword(arg='action', value=Constant(value='store_true', lineno=549, col_offset=15, end_lineno=549, end_col_offset=27), lineno=549, col_offset=8, end_lineno=549, end_col_offset=27), keyword(arg='default', value=Compare(left=Call(func=Attribute(value=Name(id='os', ctx=Load(), lineno=550, col_offset=16, end_lineno=550, end_col_offset=18), attr='getenv', ctx=Load(), lineno=550, col_offset=16, end_lineno=550, end_col_offset=25), args=[Constant(value='GRAPH_FAIL_ON_LAYER', lineno=550, col_offset=26, end_lineno=550, end_col_offset=47), Constant(value='1', lineno=550, col_offset=49, end_lineno=550, end_col_offset=52)], lineno=550, col_offset=16, end_lineno=550, end_col_offset=53), ops=[Eq()], comparators=[Constant(value='1', lineno=550, col_offset=57, end_lineno=550, end_col_offset=60)], lineno=550, col_offset=16, end_lineno=550, end_col_offset=60), lineno=550, col_offset=8, end_lineno=550, end_col_offset=60), keyword(arg='help', value=Constant(value='Fail on forbidden cross-layer edges (default: on)', lineno=551, col_offset=13, end_lineno=551, end_col_offset=64), lineno=551, col_offset=8, end_lineno=551, end_col_offset=64)], lineno=547, col_offset=4, end_lineno=552, end_col_offset=5), lineno=547, col_offset=4, end_lineno=552, end_col_offset=5), Expr(value=Call(func=Attribute(value=Name(id='p', ctx=Load(), lineno=554, col_offset=4, end_lineno=554, end_col_offset=5), attr='add_argument', ctx=Load(), lineno=554, col_offset=4, end_lineno=554, end_col_offset=18), args=[Constant(value='--max-workers', lineno=555, col_offset=8, end_lineno=555, end_col_offset=23)], keywords=[keyword(arg='type', value=Name(id='int', ctx=Load(), lineno=556, col_offset=13, end_lineno=556, end_col_offset=16), lineno=556, col_offset=8, end_lineno=556, end_col_offset=16), keyword(arg='default', value=Call(func=Name(id='int', ctx=Load(), lineno=557, col_offset=16, end_lineno=557, end_col_offset=19), args=[Call(func=Attribute(value=Name(id='os', ctx=Load(), lineno=557, col_offset=20, end_lineno=557, end_col_offset=22), attr='getenv', ctx=Load(), lineno=557, col_offset=20, end_lineno=557, end_col_offset=29), args=[Constant(value='GRAPH_MAX_WORKERS', lineno=557, col_offset=30, end_lineno=557, end_col_offset=49), Constant(value='0', lineno=557, col_offset=51, end_lineno=557, end_col_offset=54)], lineno=557, col_offset=20, end_lineno=557, end_col_offset=55)], lineno=557, col_offset=16, end_lineno=557, end_col_offset=56), lineno=557, col_offset=8, end_lineno=557, end_col_offset=56), keyword(arg='help', value=Constant(value='Maximum parallel workers for per-package builds (default: CPU count)', lineno=558, col_offset=13, end_lineno=558, end_col_offset=83), lineno=558, col_offset=8, end_lineno=558, end_col_offset=83)], lineno=554, col_offset=4, end_lineno=559, end_col_offset=5), lineno=554, col_offset=4, end_lineno=559, end_col_offset=5), Expr(value=Call(func=Attribute(value=Name(id='p', ctx=Load(), lineno=560, col_offset=4, end_lineno=560, end_col_offset=5), attr='add_argument', ctx=Load(), lineno=560, col_offset=4, end_lineno=560, end_col_offset=18), args=[Constant(value='--cache-dir', lineno=561, col_offset=8, end_lineno=561, end_col_offset=21)], keywords=[keyword(arg='default', value=Call(func=Attribute(value=Name(id='os', ctx=Load(), lineno=562, col_offset=16, end_lineno=562, end_col_offset=18), attr='getenv', ctx=Load(), lineno=562, col_offset=16, end_lineno=562, end_col_offset=25), args=[Constant(value='GRAPH_CACHE_DIR', lineno=562, col_offset=26, end_lineno=562, end_col_offset=43), Call(func=Name(id='str', ctx=Load(), lineno=562, col_offset=45, end_lineno=562, end_col_offset=48), args=[BinOp(left=BinOp(left=Name(id='ROOT', ctx=Load(), lineno=562, col_offset=49, end_lineno=562, end_col_offset=53), op=Div(), right=Constant(value='.cache', lineno=562, col_offset=56, end_lineno=562, end_col_offset=64), lineno=562, col_offset=49, end_lineno=562, end_col_offset=64), op=Div(), right=Constant(value='graphs', lineno=562, col_offset=67, end_lineno=562, end_col_offset=75), lineno=562, col_offset=49, end_lineno=562, end_col_offset=75)], lineno=562, col_offset=45, end_lineno=562, end_col_offset=76)], lineno=562, col_offset=16, end_lineno=562, end_col_offset=77), lineno=562, col_offset=8, end_lineno=562, end_col_offset=77), keyword(arg='help', value=Constant(value='Directory for per-package graph cache', lineno=563, col_offset=13, end_lineno=563, end_col_offset=52), lineno=563, col_offset=8, end_lineno=563, end_col_offset=52)], lineno=560, col_offset=4, end_lineno=564, end_col_offset=5), lineno=560, col_offset=4, end_lineno=564, end_col_offset=5), Expr(value=Call(func=Attribute(value=Name(id='p', ctx=Load(), lineno=565, col_offset=4, end_lineno=565, end_col_offset=5), attr='add_argument', ctx=Load(), lineno=565, col_offset=4, end_lineno=565, end_col_offset=18), args=[Constant(value='--no-cache', lineno=566, col_offset=8, end_lineno=566, end_col_offset=20)], keywords=[keyword(arg='action', value=Constant(value='store_true', lineno=567, col_offset=15, end_lineno=567, end_col_offset=27), lineno=567, col_offset=8, end_lineno=567, end_col_offset=27), keyword(arg='help', value=Constant(value='Disable cache (always rebuild per-package graphs)', lineno=568, col_offset=13, end_lineno=568, end_col_offset=64), lineno=568, col_offset=8, end_lineno=568, end_col_offset=64)], lineno=565, col_offset=4, end_lineno=569, end_col_offset=5), lineno=565, col_offset=4, end_lineno=569, end_col_offset=5), Expr(value=Call(func=Attribute(value=Name(id='p', ctx=Load(), lineno=570, col_offset=4, end_lineno=570, end_col_offset=5), attr='add_argument', ctx=Load(), lineno=570, col_offset=4, end_lineno=570, end_col_offset=18), args=[Constant(value='--verbose', lineno=570, col_offset=19, end_lineno=570, end_col_offset=30)], keywords=[keyword(arg='action', value=Constant(value='store_true', lineno=570, col_offset=39, end_lineno=570, end_col_offset=51), lineno=570, col_offset=32, end_lineno=570, end_col_offset=51), keyword(arg='help', value=Constant(value='Verbose logging', lineno=570, col_offset=58, end_lineno=570, end_col_offset=75), lineno=570, col_offset=53, end_lineno=570, end_col_offset=75)], lineno=570, col_offset=4, end_lineno=570, end_col_offset=76), lineno=570, col_offset=4, end_lineno=570, end_col_offset=76), Return(value=Call(func=Attribute(value=Name(id='p', ctx=Load(), lineno=571, col_offset=11, end_lineno=571, end_col_offset=12), attr='parse_args', ctx=Load(), lineno=571, col_offset=11, end_lineno=571, end_col_offset=23), args=[Name(id='argv', ctx=Load(), lineno=571, col_offset=24, end_lineno=571, end_col_offset=28)], lineno=571, col_offset=11, end_lineno=571, end_col_offset=29), lineno=571, col_offset=4, end_lineno=571, end_col_offset=29)], returns=Attribute(value=Name(id='argparse', ctx=Load(), lineno=484, col_offset=53, end_lineno=484, end_col_offset=61), attr='Namespace', ctx=Load(), lineno=484, col_offset=53, end_lineno=484, end_col_offset=71), lineno=484, col_offset=0, end_lineno=571, end_col_offset=29), Assign(targets=[Name(id='LOGGER', ctx=Store(), lineno=579, col_offset=0, end_lineno=579, end_col_offset=6)], value=Call(func=Name(id='get_logger', ctx=Load(), lineno=579, col_offset=9, end_lineno=579, end_col_offset=19), args=[Name(id='__name__', ctx=Load(), lineno=579, col_offset=20, end_lineno=579, end_col_offset=28)], lineno=579, col_offset=9, end_lineno=579, end_col_offset=29), lineno=579, col_offset=0, end_lineno=579, end_col_offset=29), FunctionDef(name='sh', args=arguments(args=[arg(arg='cmd', annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=583, col_offset=9, end_lineno=583, end_col_offset=13), slice=Name(id='str', ctx=Load(), lineno=583, col_offset=14, end_lineno=583, end_col_offset=17), ctx=Load(), lineno=583, col_offset=9, end_lineno=583, end_col_offset=18), lineno=583, col_offset=4, end_lineno=583, end_col_offset=18)], kwonlyargs=[arg(arg='cwd', annotation=BinOp(left=Name(id='Path', ctx=Load(), lineno=585, col_offset=9, end_lineno=585, end_col_offset=13), op=BitOr(), right=Constant(value=None, lineno=585, col_offset=16, end_lineno=585, end_col_offset=20), lineno=585, col_offset=9, end_lineno=585, end_col_offset=20), lineno=585, col_offset=4, end_lineno=585, end_col_offset=20), arg(arg='check', annotation=Name(id='bool', ctx=Load(), lineno=586, col_offset=11, end_lineno=586, end_col_offset=15), lineno=586, col_offset=4, end_lineno=586, end_col_offset=15), arg(arg='timeout', annotation=Name(id='float', ctx=Load(), lineno=587, col_offset=13, end_lineno=587, end_col_offset=18), lineno=587, col_offset=4, end_lineno=587, end_col_offset=18)], kw_defaults=[Constant(value=None, lineno=585, col_offset=23, end_lineno=585, end_col_offset=27), Constant(value=True, lineno=586, col_offset=18, end_lineno=586, end_col_offset=22), Name(id='SUBPROCESS_TIMEOUT_SECONDS', ctx=Load(), lineno=587, col_offset=21, end_lineno=587, end_col_offset=47)]), body=[Expr(value=Constant(value='Run a subprocess command using secure run_tool wrapper.\n\n    Parameters\n    ----------\n    cmd : list[str]\n        Command to execute.\n    cwd : Path | None, optional\n        Working directory for the command. Keyword-only argument.\n    check : bool, optional\n        If True, raise on non-zero exit code. Keyword-only argument.\n    timeout : float, optional\n        Timeout in seconds (default 30.0 for graphviz commands). Keyword-only argument.\n\n    Returns\n    -------\n    ToolRunResult\n        Completed process result.\n\n    Raises\n    ------\n    GraphBuildError\n        If command fails and check is True.\n    ', lineno=589, col_offset=4, end_lineno=611, end_col_offset=7), lineno=589, col_offset=4, end_lineno=611, end_col_offset=7), Assign(targets=[Name(id='log_adapter', ctx=Store(), lineno=612, col_offset=4, end_lineno=612, end_col_offset=15)], value=Call(func=Name(id='with_fields', ctx=Load(), lineno=612, col_offset=18, end_lineno=612, end_col_offset=29), args=[Name(id='LOGGER', ctx=Load(), lineno=612, col_offset=30, end_lineno=612, end_col_offset=36)], keywords=[keyword(arg='command', value=Name(id='cmd', ctx=Load(), lineno=612, col_offset=46, end_lineno=612, end_col_offset=49), lineno=612, col_offset=38, end_lineno=612, end_col_offset=49), keyword(arg='cwd', value=IfExp(test=Name(id='cwd', ctx=Load(), lineno=612, col_offset=67, end_lineno=612, end_col_offset=70), body=Call(func=Name(id='str', ctx=Load(), lineno=612, col_offset=55, end_lineno=612, end_col_offset=58), args=[Name(id='cwd', ctx=Load(), lineno=612, col_offset=59, end_lineno=612, end_col_offset=62)], lineno=612, col_offset=55, end_lineno=612, end_col_offset=63), orelse=Constant(value=None, lineno=612, col_offset=76, end_lineno=612, end_col_offset=80), lineno=612, col_offset=55, end_lineno=612, end_col_offset=80), lineno=612, col_offset=51, end_lineno=612, end_col_offset=80)], lineno=612, col_offset=18, end_lineno=612, end_col_offset=81), lineno=612, col_offset=4, end_lineno=612, end_col_offset=81), Try(body=[Assign(targets=[Name(id='result', ctx=Store(), lineno=614, col_offset=8, end_lineno=614, end_col_offset=14)], value=Call(func=Name(id='run_tool', ctx=Load(), lineno=614, col_offset=17, end_lineno=614, end_col_offset=25), args=[Name(id='cmd', ctx=Load(), lineno=614, col_offset=26, end_lineno=614, end_col_offset=29)], keywords=[keyword(arg='timeout', value=Name(id='timeout', ctx=Load(), lineno=614, col_offset=39, end_lineno=614, end_col_offset=46), lineno=614, col_offset=31, end_lineno=614, end_col_offset=46), keyword(arg='cwd', value=Name(id='cwd', ctx=Load(), lineno=614, col_offset=52, end_lineno=614, end_col_offset=55), lineno=614, col_offset=48, end_lineno=614, end_col_offset=55)], lineno=614, col_offset=17, end_lineno=614, end_col_offset=56), lineno=614, col_offset=8, end_lineno=614, end_col_offset=56)], handlers=[ExceptHandler(type=Name(id='ToolExecutionError', ctx=Load(), lineno=615, col_offset=11, end_lineno=615, end_col_offset=29), name='exc', body=[If(test=Name(id='check', ctx=Load(), lineno=616, col_offset=11, end_lineno=616, end_col_offset=16), body=[Expr(value=Call(func=Attribute(value=Name(id='log_adapter', ctx=Load(), lineno=617, col_offset=12, end_lineno=617, end_col_offset=23), attr='exception', ctx=Load(), lineno=617, col_offset=12, end_lineno=617, end_col_offset=33), args=[Constant(value='Subprocess command failed', lineno=617, col_offset=34, end_lineno=617, end_col_offset=61)], lineno=617, col_offset=12, end_lineno=617, end_col_offset=62), lineno=617, col_offset=12, end_lineno=617, end_col_offset=62), Assign(targets=[Name(id='message', ctx=Store(), lineno=618, col_offset=12, end_lineno=618, end_col_offset=19)], value=JoinedStr(values=[Constant(value="Command '", lineno=618, col_offset=24, end_lineno=618, end_col_offset=33), FormattedValue(value=Subscript(value=Name(id='cmd', ctx=Load(), lineno=618, col_offset=34, end_lineno=618, end_col_offset=37), slice=Constant(value=0, lineno=618, col_offset=38, end_lineno=618, end_col_offset=39), ctx=Load(), lineno=618, col_offset=34, end_lineno=618, end_col_offset=40), conversion=-1, lineno=618, col_offset=33, end_lineno=618, end_col_offset=41), Constant(value="' failed", lineno=618, col_offset=41, end_lineno=618, end_col_offset=49)], lineno=618, col_offset=22, end_lineno=618, end_col_offset=50), lineno=618, col_offset=12, end_lineno=618, end_col_offset=50), Raise(exc=Call(func=Name(id='GraphBuildError', ctx=Load(), lineno=619, col_offset=18, end_lineno=619, end_col_offset=33), args=[Name(id='message', ctx=Load(), lineno=619, col_offset=34, end_lineno=619, end_col_offset=41)], lineno=619, col_offset=18, end_lineno=619, end_col_offset=42), cause=Name(id='exc', ctx=Load(), lineno=619, col_offset=48, end_lineno=619, end_col_offset=51), lineno=619, col_offset=12, end_lineno=619, end_col_offset=51)], lineno=616, col_offset=8, end_lineno=619, end_col_offset=51), Return(value=Call(func=Name(id='ToolRunResult', ctx=Load(), lineno=621, col_offset=15, end_lineno=621, end_col_offset=28), keywords=[keyword(arg='command', value=Call(func=Name(id='tuple', ctx=Load(), lineno=622, col_offset=20, end_lineno=622, end_col_offset=25), args=[Name(id='cmd', ctx=Load(), lineno=622, col_offset=26, end_lineno=622, end_col_offset=29)], lineno=622, col_offset=20, end_lineno=622, end_col_offset=30), lineno=622, col_offset=12, end_lineno=622, end_col_offset=30), keyword(arg='returncode', value=Constant(value=1, lineno=623, col_offset=23, end_lineno=623, end_col_offset=24), lineno=623, col_offset=12, end_lineno=623, end_col_offset=24), keyword(arg='stdout', value=Constant(value='', lineno=624, col_offset=19, end_lineno=624, end_col_offset=21), lineno=624, col_offset=12, end_lineno=624, end_col_offset=21), keyword(arg='stderr', value=Call(func=Name(id='str', ctx=Load(), lineno=625, col_offset=19, end_lineno=625, end_col_offset=22), args=[Name(id='exc', ctx=Load(), lineno=625, col_offset=23, end_lineno=625, end_col_offset=26)], lineno=625, col_offset=19, end_lineno=625, end_col_offset=27), lineno=625, col_offset=12, end_lineno=625, end_col_offset=27), keyword(arg='duration_seconds', value=Constant(value=0.0, lineno=626, col_offset=29, end_lineno=626, end_col_offset=32), lineno=626, col_offset=12, end_lineno=626, end_col_offset=32), keyword(arg='timed_out', value=Constant(value=False, lineno=627, col_offset=22, end_lineno=627, end_col_offset=27), lineno=627, col_offset=12, end_lineno=627, end_col_offset=27)], lineno=621, col_offset=15, end_lineno=628, end_col_offset=9), lineno=621, col_offset=8, end_lineno=628, end_col_offset=9)], lineno=615, col_offset=4, end_lineno=628, end_col_offset=9)], lineno=613, col_offset=4, end_lineno=628, end_col_offset=9), If(test=BoolOp(op=And(), values=[Name(id='check', ctx=Load(), lineno=629, col_offset=7, end_lineno=629, end_col_offset=12), Compare(left=Attribute(value=Name(id='result', ctx=Load(), lineno=629, col_offset=17, end_lineno=629, end_col_offset=23), attr='returncode', ctx=Load(), lineno=629, col_offset=17, end_lineno=629, end_col_offset=34), ops=[NotEq()], comparators=[Constant(value=0, lineno=629, col_offset=38, end_lineno=629, end_col_offset=39)], lineno=629, col_offset=17, end_lineno=629, end_col_offset=39)], lineno=629, col_offset=7, end_lineno=629, end_col_offset=39), body=[Expr(value=Call(func=Attribute(value=Name(id='log_adapter', ctx=Load(), lineno=630, col_offset=8, end_lineno=630, end_col_offset=19), attr='error', ctx=Load(), lineno=630, col_offset=8, end_lineno=630, end_col_offset=25), args=[Constant(value='Command returned non-zero exit code: %s', lineno=630, col_offset=26, end_lineno=630, end_col_offset=67), Attribute(value=Name(id='result', ctx=Load(), lineno=630, col_offset=69, end_lineno=630, end_col_offset=75), attr='returncode', ctx=Load(), lineno=630, col_offset=69, end_lineno=630, end_col_offset=86)], lineno=630, col_offset=8, end_lineno=630, end_col_offset=87), lineno=630, col_offset=8, end_lineno=630, end_col_offset=87), Assign(targets=[Name(id='message', ctx=Store(), lineno=631, col_offset=8, end_lineno=631, end_col_offset=15)], value=JoinedStr(values=[Constant(value="Command '", lineno=631, col_offset=20, end_lineno=631, end_col_offset=29), FormattedValue(value=Subscript(value=Name(id='cmd', ctx=Load(), lineno=631, col_offset=30, end_lineno=631, end_col_offset=33), slice=Constant(value=0, lineno=631, col_offset=34, end_lineno=631, end_col_offset=35), ctx=Load(), lineno=631, col_offset=30, end_lineno=631, end_col_offset=36), conversion=-1, lineno=631, col_offset=29, end_lineno=631, end_col_offset=37), Constant(value="' returned exit code ", lineno=631, col_offset=37, end_lineno=631, end_col_offset=58), FormattedValue(value=Attribute(value=Name(id='result', ctx=Load(), lineno=631, col_offset=59, end_lineno=631, end_col_offset=65), attr='returncode', ctx=Load(), lineno=631, col_offset=59, end_lineno=631, end_col_offset=76), conversion=-1, lineno=631, col_offset=58, end_lineno=631, end_col_offset=77)], lineno=631, col_offset=18, end_lineno=631, end_col_offset=78), lineno=631, col_offset=8, end_lineno=631, end_col_offset=78), Raise(exc=Call(func=Name(id='GraphBuildError', ctx=Load(), lineno=632, col_offset=14, end_lineno=632, end_col_offset=29), args=[Name(id='message', ctx=Load(), lineno=632, col_offset=30, end_lineno=632, end_col_offset=37)], lineno=632, col_offset=14, end_lineno=632, end_col_offset=38), lineno=632, col_offset=8, end_lineno=632, end_col_offset=38)], lineno=629, col_offset=4, end_lineno=632, end_col_offset=38), Return(value=Name(id='result', ctx=Load(), lineno=633, col_offset=11, end_lineno=633, end_col_offset=17), lineno=633, col_offset=4, end_lineno=633, end_col_offset=17)], returns=Name(id='ToolRunResult', ctx=Load(), lineno=588, col_offset=5, end_lineno=588, end_col_offset=18), lineno=582, col_offset=0, end_lineno=633, end_col_offset=17), FunctionDef(name='ensure_bin', args=arguments(args=[arg(arg='name', annotation=Name(id='str', ctx=Load(), lineno=636, col_offset=21, end_lineno=636, end_col_offset=24), lineno=636, col_offset=15, end_lineno=636, end_col_offset=24)]), body=[Expr(value=Constant(value='Ensure executable is available on PATH.\n\n    Parameters\n    ----------\n    name : str\n        Executable name to check.\n\n    Raises\n    ------\n    GraphBuildError\n        If executable is not found.\n    ', lineno=637, col_offset=4, end_lineno=648, end_col_offset=7), lineno=637, col_offset=4, end_lineno=648, end_col_offset=7), If(test=UnaryOp(op=Not(), operand=Call(func=Attribute(value=Name(id='shutil', ctx=Load(), lineno=649, col_offset=11, end_lineno=649, end_col_offset=17), attr='which', ctx=Load(), lineno=649, col_offset=11, end_lineno=649, end_col_offset=23), args=[Name(id='name', ctx=Load(), lineno=649, col_offset=24, end_lineno=649, end_col_offset=28)], lineno=649, col_offset=11, end_lineno=649, end_col_offset=29), lineno=649, col_offset=7, end_lineno=649, end_col_offset=29), body=[Assign(targets=[Name(id='logger', ctx=Store(), lineno=650, col_offset=8, end_lineno=650, end_col_offset=14)], value=Call(func=Name(id='get_logger', ctx=Load(), lineno=650, col_offset=17, end_lineno=650, end_col_offset=27), args=[Name(id='__name__', ctx=Load(), lineno=650, col_offset=28, end_lineno=650, end_col_offset=36)], lineno=650, col_offset=17, end_lineno=650, end_col_offset=37), lineno=650, col_offset=8, end_lineno=650, end_col_offset=37), Expr(value=Call(func=Attribute(value=Name(id='logger', ctx=Load(), lineno=651, col_offset=8, end_lineno=651, end_col_offset=14), attr='error', ctx=Load(), lineno=651, col_offset=8, end_lineno=651, end_col_offset=20), args=[Constant(value='Missing required executable on PATH: %s', lineno=651, col_offset=21, end_lineno=651, end_col_offset=62), Name(id='name', ctx=Load(), lineno=651, col_offset=64, end_lineno=651, end_col_offset=68)], lineno=651, col_offset=8, end_lineno=651, end_col_offset=69), lineno=651, col_offset=8, end_lineno=651, end_col_offset=69), Assign(targets=[Name(id='message', ctx=Store(), lineno=652, col_offset=8, end_lineno=652, end_col_offset=15)], value=JoinedStr(values=[Constant(value='Missing required executable on PATH: ', lineno=652, col_offset=20, end_lineno=652, end_col_offset=57), FormattedValue(value=Name(id='name', ctx=Load(), lineno=652, col_offset=58, end_lineno=652, end_col_offset=62), conversion=-1, lineno=652, col_offset=57, end_lineno=652, end_col_offset=63)], lineno=652, col_offset=18, end_lineno=652, end_col_offset=64), lineno=652, col_offset=8, end_lineno=652, end_col_offset=64), Raise(exc=Call(func=Name(id='GraphBuildError', ctx=Load(), lineno=653, col_offset=14, end_lineno=653, end_col_offset=29), args=[Name(id='message', ctx=Load(), lineno=653, col_offset=30, end_lineno=653, end_col_offset=37)], lineno=653, col_offset=14, end_lineno=653, end_col_offset=38), lineno=653, col_offset=8, end_lineno=653, end_col_offset=38)], lineno=649, col_offset=4, end_lineno=653, end_col_offset=38)], returns=Constant(value=None, lineno=636, col_offset=29, end_lineno=636, end_col_offset=33), lineno=636, col_offset=0, end_lineno=653, end_col_offset=38), FunctionDef(name='find_top_packages', args=arguments(), body=[Expr(value=Constant(value='Compute find top packages.\n\n    Carry out the find top packages operation for the surrounding component. Generated documentation highlights how this helper collaborates with neighbouring utilities. Callers rely on the routine to remain stable across releases.\n\n    Returns\n    -------\n    list[str]\n        Description of return value.\n\n    Examples\n    --------\n    >>> from tools.docs.build_graphs import find_top_packages\n    >>> result = find_top_packages()\n    >>> result  # doctest: +ELLIPSIS\n    ', lineno=657, col_offset=4, end_lineno=671, end_col_offset=7), lineno=657, col_offset=4, end_lineno=671, end_col_offset=7), If(test=UnaryOp(op=Not(), operand=Call(func=Attribute(value=Name(id='SRC', ctx=Load(), lineno=673, col_offset=11, end_lineno=673, end_col_offset=14), attr='exists', ctx=Load(), lineno=673, col_offset=11, end_lineno=673, end_col_offset=21), lineno=673, col_offset=11, end_lineno=673, end_col_offset=23), lineno=673, col_offset=7, end_lineno=673, end_col_offset=23), body=[Return(value=List(ctx=Load(), lineno=674, col_offset=15, end_lineno=674, end_col_offset=17), lineno=674, col_offset=8, end_lineno=674, end_col_offset=17)], lineno=673, col_offset=4, end_lineno=674, end_col_offset=17), Return(value=Call(func=Name(id='sorted', ctx=Load(), lineno=675, col_offset=11, end_lineno=675, end_col_offset=17), args=[GeneratorExp(elt=Attribute(value=Name(id='child', ctx=Load(), lineno=676, col_offset=8, end_lineno=676, end_col_offset=13), attr='name', ctx=Load(), lineno=676, col_offset=8, end_lineno=676, end_col_offset=18), generators=[comprehension(target=Name(id='child', ctx=Store(), lineno=676, col_offset=23, end_lineno=676, end_col_offset=28), iter=Call(func=Attribute(value=Name(id='SRC', ctx=Load(), lineno=676, col_offset=32, end_lineno=676, end_col_offset=35), attr='iterdir', ctx=Load(), lineno=676, col_offset=32, end_lineno=676, end_col_offset=43), lineno=676, col_offset=32, end_lineno=676, end_col_offset=45), ifs=[BoolOp(op=And(), values=[Call(func=Attribute(value=Name(id='child', ctx=Load(), lineno=676, col_offset=49, end_lineno=676, end_col_offset=54), attr='is_dir', ctx=Load(), lineno=676, col_offset=49, end_lineno=676, end_col_offset=61), lineno=676, col_offset=49, end_lineno=676, end_col_offset=63), Call(func=Attribute(value=BinOp(left=Name(id='child', ctx=Load(), lineno=676, col_offset=69, end_lineno=676, end_col_offset=74), op=Div(), right=Constant(value='__init__.py', lineno=676, col_offset=77, end_lineno=676, end_col_offset=90), lineno=676, col_offset=69, end_lineno=676, end_col_offset=90), attr='exists', ctx=Load(), lineno=676, col_offset=68, end_lineno=676, end_col_offset=98), lineno=676, col_offset=68, end_lineno=676, end_col_offset=100)], lineno=676, col_offset=49, end_lineno=676, end_col_offset=100)], is_async=0)], lineno=675, col_offset=17, end_lineno=677, end_col_offset=5)], lineno=675, col_offset=11, end_lineno=677, end_col_offset=5), lineno=675, col_offset=4, end_lineno=677, end_col_offset=5)], returns=Subscript(value=Name(id='list', ctx=Load(), lineno=656, col_offset=27, end_lineno=656, end_col_offset=31), slice=Name(id='str', ctx=Load(), lineno=656, col_offset=32, end_lineno=656, end_col_offset=35), ctx=Load(), lineno=656, col_offset=27, end_lineno=656, end_col_offset=36), lineno=656, col_offset=0, end_lineno=677, end_col_offset=5), FunctionDef(name='_rel', args=arguments(args=[arg(arg='p', annotation=Name(id='Path', ctx=Load(), lineno=680, col_offset=12, end_lineno=680, end_col_offset=16), lineno=680, col_offset=9, end_lineno=680, end_col_offset=16)]), body=[Expr(value=Constant(value='Return ``p`` relative to the repository root when possible.\n\n    Parameters\n    ----------\n    p : Path\n        Path to convert.\n\n    Returns\n    -------\n    str\n        Relative path string, or absolute path if not relative to root.\n    ', lineno=681, col_offset=4, end_lineno=692, end_col_offset=7), lineno=681, col_offset=4, end_lineno=692, end_col_offset=7), Try(body=[Return(value=Call(func=Name(id='str', ctx=Load(), lineno=694, col_offset=15, end_lineno=694, end_col_offset=18), args=[Call(func=Attribute(value=Name(id='p', ctx=Load(), lineno=694, col_offset=19, end_lineno=694, end_col_offset=20), attr='relative_to', ctx=Load(), lineno=694, col_offset=19, end_lineno=694, end_col_offset=32), args=[Name(id='ROOT', ctx=Load(), lineno=694, col_offset=33, end_lineno=694, end_col_offset=37)], lineno=694, col_offset=19, end_lineno=694, end_col_offset=38)], lineno=694, col_offset=15, end_lineno=694, end_col_offset=39), lineno=694, col_offset=8, end_lineno=694, end_col_offset=39)], handlers=[ExceptHandler(type=Name(id='ValueError', ctx=Load(), lineno=695, col_offset=11, end_lineno=695, end_col_offset=21), body=[Return(value=Call(func=Name(id='str', ctx=Load(), lineno=696, col_offset=15, end_lineno=696, end_col_offset=18), args=[Name(id='p', ctx=Load(), lineno=696, col_offset=19, end_lineno=696, end_col_offset=20)], lineno=696, col_offset=15, end_lineno=696, end_col_offset=21), lineno=696, col_offset=8, end_lineno=696, end_col_offset=21)], lineno=695, col_offset=4, end_lineno=696, end_col_offset=21)], lineno=693, col_offset=4, end_lineno=696, end_col_offset=21)], returns=Name(id='str', ctx=Load(), lineno=680, col_offset=21, end_lineno=680, end_col_offset=24), lineno=680, col_offset=0, end_lineno=696, end_col_offset=21), FunctionDef(name='build_pydeps_for_package', args=arguments(args=[arg(arg='pkg', annotation=Name(id='str', ctx=Load(), lineno=705, col_offset=9, end_lineno=705, end_col_offset=12), lineno=705, col_offset=4, end_lineno=705, end_col_offset=12), arg(arg='out_svg', annotation=Name(id='Path', ctx=Load(), lineno=705, col_offset=23, end_lineno=705, end_col_offset=27), lineno=705, col_offset=14, end_lineno=705, end_col_offset=27), arg(arg='excludes', annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=705, col_offset=39, end_lineno=705, end_col_offset=43), slice=Name(id='str', ctx=Load(), lineno=705, col_offset=44, end_lineno=705, end_col_offset=47), ctx=Load(), lineno=705, col_offset=39, end_lineno=705, end_col_offset=48), lineno=705, col_offset=29, end_lineno=705, end_col_offset=48), arg(arg='max_bacon', annotation=Name(id='int', ctx=Load(), lineno=705, col_offset=61, end_lineno=705, end_col_offset=64), lineno=705, col_offset=50, end_lineno=705, end_col_offset=64), arg(arg='fmt', annotation=Name(id='str', ctx=Load(), lineno=705, col_offset=71, end_lineno=705, end_col_offset=74), lineno=705, col_offset=66, end_lineno=705, end_col_offset=74)]), body=[Expr(value=Constant(value='Compute build pydeps for package.\n\n    Carry out the build pydeps for package operation for the surrounding component. Generated documentation highlights how this helper collaborates with neighbouring utilities. Callers rely on the routine to remain stable across releases.\n\n    Parameters\n    ----------\n    pkg : str\n        Description for ``pkg``.\n    out_svg : Path\n        Description for ``out_svg``.\n    excludes : list[str]\n        Description for ``excludes``.\n    max_bacon : int\n        Description for ``max_bacon``.\n    fmt : str\n        Description for ``fmt``.\n\n    Examples\n    --------\n    >>> from tools.docs.build_graphs import build_pydeps_for_package\n    >>> build_pydeps_for_package(..., ..., ..., ..., ...)  # doctest: +ELLIPSIS\n    ', lineno=707, col_offset=4, end_lineno=728, end_col_offset=7), lineno=707, col_offset=4, end_lineno=728, end_col_offset=7), With(items=[withitem(context_expr=Call(func=Name(id='NamedTemporaryFile', ctx=Load(), lineno=729, col_offset=9, end_lineno=729, end_col_offset=27), keywords=[keyword(arg='suffix', value=Constant(value='.dot', lineno=729, col_offset=35, end_lineno=729, end_col_offset=41), lineno=729, col_offset=28, end_lineno=729, end_col_offset=41), keyword(arg='delete', value=Constant(value=False, lineno=729, col_offset=50, end_lineno=729, end_col_offset=55), lineno=729, col_offset=43, end_lineno=729, end_col_offset=55)], lineno=729, col_offset=9, end_lineno=729, end_col_offset=56), optional_vars=Name(id='dot_file', ctx=Store(), lineno=729, col_offset=60, end_lineno=729, end_col_offset=68))], body=[Assign(targets=[Name(id='dot_target', ctx=Store(), lineno=730, col_offset=8, end_lineno=730, end_col_offset=18)], value=Call(func=Name(id='Path', ctx=Load(), lineno=730, col_offset=21, end_lineno=730, end_col_offset=25), args=[Attribute(value=Name(id='dot_file', ctx=Load(), lineno=730, col_offset=26, end_lineno=730, end_col_offset=34), attr='name', ctx=Load(), lineno=730, col_offset=26, end_lineno=730, end_col_offset=39)], lineno=730, col_offset=21, end_lineno=730, end_col_offset=40), lineno=730, col_offset=8, end_lineno=730, end_col_offset=40)], lineno=729, col_offset=4, end_lineno=730, end_col_offset=40), Assign(targets=[Name(id='cmd', ctx=Store(), lineno=731, col_offset=4, end_lineno=731, end_col_offset=7)], value=List(elts=[Attribute(value=Name(id='sys', ctx=Load(), lineno=732, col_offset=8, end_lineno=732, end_col_offset=11), attr='executable', ctx=Load(), lineno=732, col_offset=8, end_lineno=732, end_col_offset=22), Constant(value='-m', lineno=733, col_offset=8, end_lineno=733, end_col_offset=12), Constant(value='pydeps', lineno=734, col_offset=8, end_lineno=734, end_col_offset=16), JoinedStr(values=[Constant(value='src/', lineno=735, col_offset=10, end_lineno=735, end_col_offset=14), FormattedValue(value=Name(id='pkg', ctx=Load(), lineno=735, col_offset=15, end_lineno=735, end_col_offset=18), conversion=-1, lineno=735, col_offset=14, end_lineno=735, end_col_offset=19)], lineno=735, col_offset=8, end_lineno=735, end_col_offset=20), Constant(value='--noshow', lineno=736, col_offset=8, end_lineno=736, end_col_offset=18), Constant(value='--show-dot', lineno=737, col_offset=8, end_lineno=737, end_col_offset=20), Constant(value='--dot-output', lineno=738, col_offset=8, end_lineno=738, end_col_offset=22), Call(func=Name(id='str', ctx=Load(), lineno=739, col_offset=8, end_lineno=739, end_col_offset=11), args=[Name(id='dot_target', ctx=Load(), lineno=739, col_offset=12, end_lineno=739, end_col_offset=22)], lineno=739, col_offset=8, end_lineno=739, end_col_offset=23), Constant(value='--max-bacon', lineno=740, col_offset=8, end_lineno=740, end_col_offset=21), Call(func=Name(id='str', ctx=Load(), lineno=741, col_offset=8, end_lineno=741, end_col_offset=11), args=[Name(id='max_bacon', ctx=Load(), lineno=741, col_offset=12, end_lineno=741, end_col_offset=21)], lineno=741, col_offset=8, end_lineno=741, end_col_offset=22), Constant(value='-T', lineno=742, col_offset=8, end_lineno=742, end_col_offset=12), Constant(value='dot', lineno=743, col_offset=8, end_lineno=743, end_col_offset=13), Constant(value='--no-output', lineno=744, col_offset=8, end_lineno=744, end_col_offset=21)], ctx=Load(), lineno=731, col_offset=10, end_lineno=745, end_col_offset=5), lineno=731, col_offset=4, end_lineno=745, end_col_offset=5), For(target=Name(id='pat', ctx=Store(), lineno=746, col_offset=8, end_lineno=746, end_col_offset=11), iter=Name(id='excludes', ctx=Load(), lineno=746, col_offset=15, end_lineno=746, end_col_offset=23), body=[AugAssign(target=Name(id='cmd', ctx=Store(), lineno=747, col_offset=8, end_lineno=747, end_col_offset=11), op=Add(), value=List(elts=[Constant(value='-x', lineno=747, col_offset=16, end_lineno=747, end_col_offset=20), Name(id='pat', ctx=Load(), lineno=747, col_offset=22, end_lineno=747, end_col_offset=25)], ctx=Load(), lineno=747, col_offset=15, end_lineno=747, end_col_offset=26), lineno=747, col_offset=8, end_lineno=747, end_col_offset=26)], lineno=746, col_offset=4, end_lineno=747, end_col_offset=26), Expr(value=Call(func=Name(id='sh', ctx=Load(), lineno=748, col_offset=4, end_lineno=748, end_col_offset=6), args=[Name(id='cmd', ctx=Load(), lineno=748, col_offset=7, end_lineno=748, end_col_offset=10)], keywords=[keyword(arg='cwd', value=Name(id='ROOT', ctx=Load(), lineno=748, col_offset=16, end_lineno=748, end_col_offset=20), lineno=748, col_offset=12, end_lineno=748, end_col_offset=20)], lineno=748, col_offset=4, end_lineno=748, end_col_offset=21), lineno=748, col_offset=4, end_lineno=748, end_col_offset=21), Try(body=[Assign(targets=[Name(id='fallback_dot', ctx=Store(), lineno=750, col_offset=8, end_lineno=750, end_col_offset=20)], value=BinOp(left=Name(id='ROOT', ctx=Load(), lineno=750, col_offset=23, end_lineno=750, end_col_offset=27), op=Div(), right=JoinedStr(values=[Constant(value='src_', lineno=750, col_offset=32, end_lineno=750, end_col_offset=36), FormattedValue(value=Name(id='pkg', ctx=Load(), lineno=750, col_offset=37, end_lineno=750, end_col_offset=40), conversion=-1, lineno=750, col_offset=36, end_lineno=750, end_col_offset=41), Constant(value='.dot', lineno=750, col_offset=41, end_lineno=750, end_col_offset=45)], lineno=750, col_offset=30, end_lineno=750, end_col_offset=46), lineno=750, col_offset=23, end_lineno=750, end_col_offset=46), lineno=750, col_offset=8, end_lineno=750, end_col_offset=46), If(test=BoolOp(op=And(), values=[UnaryOp(op=Not(), operand=Call(func=Attribute(value=Name(id='dot_target', ctx=Load(), lineno=751, col_offset=15, end_lineno=751, end_col_offset=25), attr='exists', ctx=Load(), lineno=751, col_offset=15, end_lineno=751, end_col_offset=32), lineno=751, col_offset=15, end_lineno=751, end_col_offset=34), lineno=751, col_offset=11, end_lineno=751, end_col_offset=34), Call(func=Attribute(value=Name(id='fallback_dot', ctx=Load(), lineno=751, col_offset=39, end_lineno=751, end_col_offset=51), attr='exists', ctx=Load(), lineno=751, col_offset=39, end_lineno=751, end_col_offset=58), lineno=751, col_offset=39, end_lineno=751, end_col_offset=60)], lineno=751, col_offset=11, end_lineno=751, end_col_offset=60), body=[Expr(value=Call(func=Attribute(value=Name(id='fallback_dot', ctx=Load(), lineno=752, col_offset=12, end_lineno=752, end_col_offset=24), attr='replace', ctx=Load(), lineno=752, col_offset=12, end_lineno=752, end_col_offset=32), args=[Name(id='dot_target', ctx=Load(), lineno=752, col_offset=33, end_lineno=752, end_col_offset=43)], lineno=752, col_offset=12, end_lineno=752, end_col_offset=44), lineno=752, col_offset=12, end_lineno=752, end_col_offset=44)], lineno=751, col_offset=8, end_lineno=752, end_col_offset=44), For(target=Name(id='leftover', ctx=Store(), lineno=753, col_offset=12, end_lineno=753, end_col_offset=20), iter=Call(func=Attribute(value=Name(id='ROOT', ctx=Load(), lineno=753, col_offset=24, end_lineno=753, end_col_offset=28), attr='glob', ctx=Load(), lineno=753, col_offset=24, end_lineno=753, end_col_offset=33), args=[JoinedStr(values=[Constant(value='src_', lineno=753, col_offset=36, end_lineno=753, end_col_offset=40), FormattedValue(value=Name(id='pkg', ctx=Load(), lineno=753, col_offset=41, end_lineno=753, end_col_offset=44), conversion=-1, lineno=753, col_offset=40, end_lineno=753, end_col_offset=45), Constant(value='*.dot', lineno=753, col_offset=45, end_lineno=753, end_col_offset=50)], lineno=753, col_offset=34, end_lineno=753, end_col_offset=51)], lineno=753, col_offset=24, end_lineno=753, end_col_offset=52), body=[If(test=Call(func=Attribute(value=Name(id='leftover', ctx=Load(), lineno=754, col_offset=15, end_lineno=754, end_col_offset=23), attr='exists', ctx=Load(), lineno=754, col_offset=15, end_lineno=754, end_col_offset=30), lineno=754, col_offset=15, end_lineno=754, end_col_offset=32), body=[Expr(value=Call(func=Attribute(value=Name(id='leftover', ctx=Load(), lineno=755, col_offset=16, end_lineno=755, end_col_offset=24), attr='unlink', ctx=Load(), lineno=755, col_offset=16, end_lineno=755, end_col_offset=31), lineno=755, col_offset=16, end_lineno=755, end_col_offset=33), lineno=755, col_offset=16, end_lineno=755, end_col_offset=33)], lineno=754, col_offset=12, end_lineno=755, end_col_offset=33)], lineno=753, col_offset=8, end_lineno=755, end_col_offset=33), Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='out_svg', ctx=Load(), lineno=757, col_offset=8, end_lineno=757, end_col_offset=15), attr='parent', ctx=Load(), lineno=757, col_offset=8, end_lineno=757, end_col_offset=22), attr='mkdir', ctx=Load(), lineno=757, col_offset=8, end_lineno=757, end_col_offset=28), keywords=[keyword(arg='parents', value=Constant(value=True, lineno=757, col_offset=37, end_lineno=757, end_col_offset=41), lineno=757, col_offset=29, end_lineno=757, end_col_offset=41), keyword(arg='exist_ok', value=Constant(value=True, lineno=757, col_offset=52, end_lineno=757, end_col_offset=56), lineno=757, col_offset=43, end_lineno=757, end_col_offset=56)], lineno=757, col_offset=8, end_lineno=757, end_col_offset=57), lineno=757, col_offset=8, end_lineno=757, end_col_offset=57), With(items=[withitem(context_expr=Call(func=Name(id='NamedTemporaryFile', ctx=Load(), lineno=758, col_offset=13, end_lineno=758, end_col_offset=31), keywords=[keyword(arg='suffix', value=Attribute(value=Name(id='out_svg', ctx=Load(), lineno=758, col_offset=39, end_lineno=758, end_col_offset=46), attr='suffix', ctx=Load(), lineno=758, col_offset=39, end_lineno=758, end_col_offset=53), lineno=758, col_offset=32, end_lineno=758, end_col_offset=53), keyword(arg='delete', value=Constant(value=False, lineno=758, col_offset=62, end_lineno=758, end_col_offset=67), lineno=758, col_offset=55, end_lineno=758, end_col_offset=67)], lineno=758, col_offset=13, end_lineno=758, end_col_offset=68), optional_vars=Name(id='tmp', ctx=Store(), lineno=758, col_offset=72, end_lineno=758, end_col_offset=75))], body=[Assign(targets=[Name(id='temp_output', ctx=Store(), lineno=759, col_offset=12, end_lineno=759, end_col_offset=23)], value=Call(func=Name(id='Path', ctx=Load(), lineno=759, col_offset=26, end_lineno=759, end_col_offset=30), args=[Attribute(value=Name(id='tmp', ctx=Load(), lineno=759, col_offset=31, end_lineno=759, end_col_offset=34), attr='name', ctx=Load(), lineno=759, col_offset=31, end_lineno=759, end_col_offset=39)], lineno=759, col_offset=26, end_lineno=759, end_col_offset=40), lineno=759, col_offset=12, end_lineno=759, end_col_offset=40)], lineno=758, col_offset=8, end_lineno=759, end_col_offset=40), Try(body=[Expr(value=Call(func=Name(id='sh', ctx=Load(), lineno=761, col_offset=12, end_lineno=761, end_col_offset=14), args=[List(elts=[Constant(value='dot', lineno=761, col_offset=16, end_lineno=761, end_col_offset=21), JoinedStr(values=[Constant(value='-T', lineno=761, col_offset=25, end_lineno=761, end_col_offset=27), FormattedValue(value=Name(id='fmt', ctx=Load(), lineno=761, col_offset=28, end_lineno=761, end_col_offset=31), conversion=-1, lineno=761, col_offset=27, end_lineno=761, end_col_offset=32)], lineno=761, col_offset=23, end_lineno=761, end_col_offset=33), Call(func=Name(id='str', ctx=Load(), lineno=761, col_offset=35, end_lineno=761, end_col_offset=38), args=[Name(id='dot_target', ctx=Load(), lineno=761, col_offset=39, end_lineno=761, end_col_offset=49)], lineno=761, col_offset=35, end_lineno=761, end_col_offset=50), Constant(value='-o', lineno=761, col_offset=52, end_lineno=761, end_col_offset=56), Call(func=Name(id='str', ctx=Load(), lineno=761, col_offset=58, end_lineno=761, end_col_offset=61), args=[Name(id='temp_output', ctx=Load(), lineno=761, col_offset=62, end_lineno=761, end_col_offset=73)], lineno=761, col_offset=58, end_lineno=761, end_col_offset=74)], ctx=Load(), lineno=761, col_offset=15, end_lineno=761, end_col_offset=75)], keywords=[keyword(arg='cwd', value=Name(id='ROOT', ctx=Load(), lineno=761, col_offset=81, end_lineno=761, end_col_offset=85), lineno=761, col_offset=77, end_lineno=761, end_col_offset=85)], lineno=761, col_offset=12, end_lineno=761, end_col_offset=86), lineno=761, col_offset=12, end_lineno=761, end_col_offset=86), Expr(value=Call(func=Attribute(value=Name(id='temp_output', ctx=Load(), lineno=762, col_offset=12, end_lineno=762, end_col_offset=23), attr='replace', ctx=Load(), lineno=762, col_offset=12, end_lineno=762, end_col_offset=31), args=[Name(id='out_svg', ctx=Load(), lineno=762, col_offset=32, end_lineno=762, end_col_offset=39)], lineno=762, col_offset=12, end_lineno=762, end_col_offset=40), lineno=762, col_offset=12, end_lineno=762, end_col_offset=40)], finalbody=[Expr(value=Call(func=Attribute(value=Name(id='temp_output', ctx=Load(), lineno=764, col_offset=12, end_lineno=764, end_col_offset=23), attr='unlink', ctx=Load(), lineno=764, col_offset=12, end_lineno=764, end_col_offset=30), keywords=[keyword(arg='missing_ok', value=Constant(value=True, lineno=764, col_offset=42, end_lineno=764, end_col_offset=46), lineno=764, col_offset=31, end_lineno=764, end_col_offset=46)], lineno=764, col_offset=12, end_lineno=764, end_col_offset=47), lineno=764, col_offset=12, end_lineno=764, end_col_offset=47)], lineno=760, col_offset=8, end_lineno=764, end_col_offset=47)], finalbody=[Expr(value=Call(func=Attribute(value=Name(id='dot_target', ctx=Load(), lineno=766, col_offset=8, end_lineno=766, end_col_offset=18), attr='unlink', ctx=Load(), lineno=766, col_offset=8, end_lineno=766, end_col_offset=25), keywords=[keyword(arg='missing_ok', value=Constant(value=True, lineno=766, col_offset=37, end_lineno=766, end_col_offset=41), lineno=766, col_offset=26, end_lineno=766, end_col_offset=41)], lineno=766, col_offset=8, end_lineno=766, end_col_offset=42), lineno=766, col_offset=8, end_lineno=766, end_col_offset=42)], lineno=749, col_offset=4, end_lineno=766, end_col_offset=42)], returns=Constant(value=None, lineno=706, col_offset=5, end_lineno=706, end_col_offset=9), lineno=704, col_offset=0, end_lineno=766, end_col_offset=42), FunctionDef(name='build_pyreverse_for_package', args=arguments(args=[arg(arg='pkg', annotation=Name(id='str', ctx=Load(), lineno=769, col_offset=37, end_lineno=769, end_col_offset=40), lineno=769, col_offset=32, end_lineno=769, end_col_offset=40), arg(arg='out_dir', annotation=Name(id='Path', ctx=Load(), lineno=769, col_offset=51, end_lineno=769, end_col_offset=55), lineno=769, col_offset=42, end_lineno=769, end_col_offset=55), arg(arg='fmt', annotation=Name(id='str', ctx=Load(), lineno=769, col_offset=62, end_lineno=769, end_col_offset=65), lineno=769, col_offset=57, end_lineno=769, end_col_offset=65)]), body=[Expr(value=Constant(value='Compute build pyreverse for package.\n\n    Carry out the build pyreverse for package operation for the surrounding component. Generated documentation highlights how this helper collaborates with neighbouring utilities. Callers rely on the routine to remain stable across releases.\n\n    Parameters\n    ----------\n    pkg : str\n        Description for ``pkg``.\n    out_dir : Path\n        Description for ``out_dir``.\n    fmt : str\n        Description for ``fmt``.\n\n    Examples\n    --------\n    >>> from tools.docs.build_graphs import build_pyreverse_for_package\n    >>> build_pyreverse_for_package(..., ..., ...)  # doctest: +ELLIPSIS\n    ', lineno=770, col_offset=4, end_lineno=787, end_col_offset=7), lineno=770, col_offset=4, end_lineno=787, end_col_offset=7), Expr(value=Call(func=Attribute(value=Name(id='out_dir', ctx=Load(), lineno=789, col_offset=4, end_lineno=789, end_col_offset=11), attr='mkdir', ctx=Load(), lineno=789, col_offset=4, end_lineno=789, end_col_offset=17), keywords=[keyword(arg='parents', value=Constant(value=True, lineno=789, col_offset=26, end_lineno=789, end_col_offset=30), lineno=789, col_offset=18, end_lineno=789, end_col_offset=30), keyword(arg='exist_ok', value=Constant(value=True, lineno=789, col_offset=41, end_lineno=789, end_col_offset=45), lineno=789, col_offset=32, end_lineno=789, end_col_offset=45)], lineno=789, col_offset=4, end_lineno=789, end_col_offset=46), lineno=789, col_offset=4, end_lineno=789, end_col_offset=46), Expr(value=Call(func=Name(id='sh', ctx=Load(), lineno=790, col_offset=4, end_lineno=790, end_col_offset=6), args=[List(elts=[Constant(value='pyreverse', lineno=792, col_offset=12, end_lineno=792, end_col_offset=23), JoinedStr(values=[Constant(value='src/', lineno=793, col_offset=14, end_lineno=793, end_col_offset=18), FormattedValue(value=Name(id='pkg', ctx=Load(), lineno=793, col_offset=19, end_lineno=793, end_col_offset=22), conversion=-1, lineno=793, col_offset=18, end_lineno=793, end_col_offset=23)], lineno=793, col_offset=12, end_lineno=793, end_col_offset=24), Constant(value='-o', lineno=794, col_offset=12, end_lineno=794, end_col_offset=16), Constant(value='dot', lineno=795, col_offset=12, end_lineno=795, end_col_offset=17), Constant(value='-p', lineno=796, col_offset=12, end_lineno=796, end_col_offset=16), Name(id='pkg', ctx=Load(), lineno=797, col_offset=12, end_lineno=797, end_col_offset=15), Constant(value='-d', lineno=798, col_offset=12, end_lineno=798, end_col_offset=16), Call(func=Name(id='str', ctx=Load(), lineno=799, col_offset=12, end_lineno=799, end_col_offset=15), args=[Name(id='out_dir', ctx=Load(), lineno=799, col_offset=16, end_lineno=799, end_col_offset=23)], lineno=799, col_offset=12, end_lineno=799, end_col_offset=24)], ctx=Load(), lineno=791, col_offset=8, end_lineno=800, end_col_offset=9)], keywords=[keyword(arg='cwd', value=Name(id='ROOT', ctx=Load(), lineno=801, col_offset=12, end_lineno=801, end_col_offset=16), lineno=801, col_offset=8, end_lineno=801, end_col_offset=16)], lineno=790, col_offset=4, end_lineno=802, end_col_offset=5), lineno=790, col_offset=4, end_lineno=802, end_col_offset=5), Assign(targets=[Name(id='classes_dot', ctx=Store(), lineno=804, col_offset=4, end_lineno=804, end_col_offset=15)], value=BinOp(left=Name(id='out_dir', ctx=Load(), lineno=804, col_offset=18, end_lineno=804, end_col_offset=25), op=Div(), right=JoinedStr(values=[Constant(value='classes_', lineno=804, col_offset=30, end_lineno=804, end_col_offset=38), FormattedValue(value=Name(id='pkg', ctx=Load(), lineno=804, col_offset=39, end_lineno=804, end_col_offset=42), conversion=-1, lineno=804, col_offset=38, end_lineno=804, end_col_offset=43), Constant(value='.dot', lineno=804, col_offset=43, end_lineno=804, end_col_offset=47)], lineno=804, col_offset=28, end_lineno=804, end_col_offset=48), lineno=804, col_offset=18, end_lineno=804, end_col_offset=48), lineno=804, col_offset=4, end_lineno=804, end_col_offset=48), Assign(targets=[Name(id='packages_dot', ctx=Store(), lineno=805, col_offset=4, end_lineno=805, end_col_offset=16)], value=BinOp(left=Name(id='out_dir', ctx=Load(), lineno=805, col_offset=19, end_lineno=805, end_col_offset=26), op=Div(), right=JoinedStr(values=[Constant(value='packages_', lineno=805, col_offset=31, end_lineno=805, end_col_offset=40), FormattedValue(value=Name(id='pkg', ctx=Load(), lineno=805, col_offset=41, end_lineno=805, end_col_offset=44), conversion=-1, lineno=805, col_offset=40, end_lineno=805, end_col_offset=45), Constant(value='.dot', lineno=805, col_offset=45, end_lineno=805, end_col_offset=49)], lineno=805, col_offset=29, end_lineno=805, end_col_offset=50), lineno=805, col_offset=19, end_lineno=805, end_col_offset=50), lineno=805, col_offset=4, end_lineno=805, end_col_offset=50), Assign(targets=[Name(id='output_path', ctx=Store(), lineno=806, col_offset=4, end_lineno=806, end_col_offset=15)], value=BinOp(left=Name(id='out_dir', ctx=Load(), lineno=806, col_offset=18, end_lineno=806, end_col_offset=25), op=Div(), right=JoinedStr(values=[FormattedValue(value=Name(id='pkg', ctx=Load(), lineno=806, col_offset=31, end_lineno=806, end_col_offset=34), conversion=-1, lineno=806, col_offset=30, end_lineno=806, end_col_offset=35), Constant(value='-uml.', lineno=806, col_offset=35, end_lineno=806, end_col_offset=40), FormattedValue(value=Name(id='fmt', ctx=Load(), lineno=806, col_offset=41, end_lineno=806, end_col_offset=44), conversion=-1, lineno=806, col_offset=40, end_lineno=806, end_col_offset=45)], lineno=806, col_offset=28, end_lineno=806, end_col_offset=46), lineno=806, col_offset=18, end_lineno=806, end_col_offset=46), lineno=806, col_offset=4, end_lineno=806, end_col_offset=46), If(test=Call(func=Attribute(value=Name(id='classes_dot', ctx=Load(), lineno=807, col_offset=7, end_lineno=807, end_col_offset=18), attr='exists', ctx=Load(), lineno=807, col_offset=7, end_lineno=807, end_col_offset=25), lineno=807, col_offset=7, end_lineno=807, end_col_offset=27), body=[Expr(value=Call(func=Name(id='sh', ctx=Load(), lineno=808, col_offset=8, end_lineno=808, end_col_offset=10), args=[List(elts=[Constant(value='dot', lineno=808, col_offset=12, end_lineno=808, end_col_offset=17), JoinedStr(values=[Constant(value='-T', lineno=808, col_offset=21, end_lineno=808, end_col_offset=23), FormattedValue(value=Name(id='fmt', ctx=Load(), lineno=808, col_offset=24, end_lineno=808, end_col_offset=27), conversion=-1, lineno=808, col_offset=23, end_lineno=808, end_col_offset=28)], lineno=808, col_offset=19, end_lineno=808, end_col_offset=29), Call(func=Name(id='str', ctx=Load(), lineno=808, col_offset=31, end_lineno=808, end_col_offset=34), args=[Name(id='classes_dot', ctx=Load(), lineno=808, col_offset=35, end_lineno=808, end_col_offset=46)], lineno=808, col_offset=31, end_lineno=808, end_col_offset=47), Constant(value='-o', lineno=808, col_offset=49, end_lineno=808, end_col_offset=53), Call(func=Name(id='str', ctx=Load(), lineno=808, col_offset=55, end_lineno=808, end_col_offset=58), args=[Name(id='output_path', ctx=Load(), lineno=808, col_offset=59, end_lineno=808, end_col_offset=70)], lineno=808, col_offset=55, end_lineno=808, end_col_offset=71)], ctx=Load(), lineno=808, col_offset=11, end_lineno=808, end_col_offset=72)], keywords=[keyword(arg='cwd', value=Name(id='ROOT', ctx=Load(), lineno=808, col_offset=78, end_lineno=808, end_col_offset=82), lineno=808, col_offset=74, end_lineno=808, end_col_offset=82)], lineno=808, col_offset=8, end_lineno=808, end_col_offset=83), lineno=808, col_offset=8, end_lineno=808, end_col_offset=83)], lineno=807, col_offset=4, end_lineno=808, end_col_offset=83), For(target=Name(id='dot_path', ctx=Store(), lineno=811, col_offset=8, end_lineno=811, end_col_offset=16), iter=Tuple(elts=[Name(id='classes_dot', ctx=Load(), lineno=811, col_offset=21, end_lineno=811, end_col_offset=32), Name(id='packages_dot', ctx=Load(), lineno=811, col_offset=34, end_lineno=811, end_col_offset=46)], ctx=Load(), lineno=811, col_offset=20, end_lineno=811, end_col_offset=47), body=[If(test=Call(func=Attribute(value=Name(id='dot_path', ctx=Load(), lineno=812, col_offset=11, end_lineno=812, end_col_offset=19), attr='exists', ctx=Load(), lineno=812, col_offset=11, end_lineno=812, end_col_offset=26), lineno=812, col_offset=11, end_lineno=812, end_col_offset=28), body=[Expr(value=Call(func=Attribute(value=Name(id='dot_path', ctx=Load(), lineno=813, col_offset=12, end_lineno=813, end_col_offset=20), attr='unlink', ctx=Load(), lineno=813, col_offset=12, end_lineno=813, end_col_offset=27), lineno=813, col_offset=12, end_lineno=813, end_col_offset=29), lineno=813, col_offset=12, end_lineno=813, end_col_offset=29)], lineno=812, col_offset=8, end_lineno=813, end_col_offset=29)], lineno=811, col_offset=4, end_lineno=813, end_col_offset=29), For(target=Name(id='root_dot', ctx=Store(), lineno=815, col_offset=8, end_lineno=815, end_col_offset=16), iter=Tuple(elts=[BinOp(left=Name(id='ROOT', ctx=Load(), lineno=816, col_offset=8, end_lineno=816, end_col_offset=12), op=Div(), right=JoinedStr(values=[Constant(value='classes_', lineno=816, col_offset=17, end_lineno=816, end_col_offset=25), FormattedValue(value=Name(id='pkg', ctx=Load(), lineno=816, col_offset=26, end_lineno=816, end_col_offset=29), conversion=-1, lineno=816, col_offset=25, end_lineno=816, end_col_offset=30), Constant(value='.dot', lineno=816, col_offset=30, end_lineno=816, end_col_offset=34)], lineno=816, col_offset=15, end_lineno=816, end_col_offset=35), lineno=816, col_offset=8, end_lineno=816, end_col_offset=35), BinOp(left=Name(id='ROOT', ctx=Load(), lineno=817, col_offset=8, end_lineno=817, end_col_offset=12), op=Div(), right=JoinedStr(values=[Constant(value='packages_', lineno=817, col_offset=17, end_lineno=817, end_col_offset=26), FormattedValue(value=Name(id='pkg', ctx=Load(), lineno=817, col_offset=27, end_lineno=817, end_col_offset=30), conversion=-1, lineno=817, col_offset=26, end_lineno=817, end_col_offset=31), Constant(value='.dot', lineno=817, col_offset=31, end_lineno=817, end_col_offset=35)], lineno=817, col_offset=15, end_lineno=817, end_col_offset=36), lineno=817, col_offset=8, end_lineno=817, end_col_offset=36)], ctx=Load(), lineno=815, col_offset=20, end_lineno=818, end_col_offset=5), body=[If(test=Call(func=Attribute(value=Name(id='root_dot', ctx=Load(), lineno=819, col_offset=11, end_lineno=819, end_col_offset=19), attr='exists', ctx=Load(), lineno=819, col_offset=11, end_lineno=819, end_col_offset=26), lineno=819, col_offset=11, end_lineno=819, end_col_offset=28), body=[Expr(value=Call(func=Attribute(value=Name(id='root_dot', ctx=Load(), lineno=820, col_offset=12, end_lineno=820, end_col_offset=20), attr='unlink', ctx=Load(), lineno=820, col_offset=12, end_lineno=820, end_col_offset=27), lineno=820, col_offset=12, end_lineno=820, end_col_offset=29), lineno=820, col_offset=12, end_lineno=820, end_col_offset=29)], lineno=819, col_offset=8, end_lineno=820, end_col_offset=29)], lineno=815, col_offset=4, end_lineno=820, end_col_offset=29)], returns=Constant(value=None, lineno=769, col_offset=70, end_lineno=769, end_col_offset=74), lineno=769, col_offset=0, end_lineno=820, end_col_offset=29), FunctionDef(name='_pkg_of', args=arguments(args=[arg(arg='dotted', annotation=Name(id='str', ctx=Load(), lineno=828, col_offset=20, end_lineno=828, end_col_offset=23), lineno=828, col_offset=12, end_lineno=828, end_col_offset=23)]), body=[Expr(value=Constant(value='Return the top-level package segment from a dotted module path.\n\n    Parameters\n    ----------\n    dotted : str\n        Dotted module path.\n\n    Returns\n    -------\n    str\n        Top-level package name.\n    ', lineno=829, col_offset=4, end_lineno=840, end_col_offset=7), lineno=829, col_offset=4, end_lineno=840, end_col_offset=7), Assign(targets=[Tuple(elts=[Name(id='head', ctx=Store(), lineno=841, col_offset=4, end_lineno=841, end_col_offset=8), Starred(value=Name(id='_rest', ctx=Store(), lineno=841, col_offset=11, end_lineno=841, end_col_offset=16), ctx=Store(), lineno=841, col_offset=10, end_lineno=841, end_col_offset=16)], ctx=Store(), lineno=841, col_offset=4, end_lineno=841, end_col_offset=16)], value=Call(func=Attribute(value=Name(id='dotted', ctx=Load(), lineno=841, col_offset=19, end_lineno=841, end_col_offset=25), attr='split', ctx=Load(), lineno=841, col_offset=19, end_lineno=841, end_col_offset=31), args=[Constant(value='.', lineno=841, col_offset=32, end_lineno=841, end_col_offset=35), Constant(value=1, lineno=841, col_offset=37, end_lineno=841, end_col_offset=38)], lineno=841, col_offset=19, end_lineno=841, end_col_offset=39), lineno=841, col_offset=4, end_lineno=841, end_col_offset=39), If(test=BoolOp(op=And(), values=[Compare(left=Name(id='head', ctx=Load(), lineno=842, col_offset=7, end_lineno=842, end_col_offset=11), ops=[Eq()], comparators=[Constant(value='src', lineno=842, col_offset=15, end_lineno=842, end_col_offset=20)], lineno=842, col_offset=7, end_lineno=842, end_col_offset=20), Compare(left=Constant(value='.', lineno=842, col_offset=25, end_lineno=842, end_col_offset=28), ops=[In()], comparators=[Name(id='dotted', ctx=Load(), lineno=842, col_offset=32, end_lineno=842, end_col_offset=38)], lineno=842, col_offset=25, end_lineno=842, end_col_offset=38)], lineno=842, col_offset=7, end_lineno=842, end_col_offset=38), body=[Return(value=Subscript(value=Call(func=Attribute(value=Name(id='dotted', ctx=Load(), lineno=843, col_offset=15, end_lineno=843, end_col_offset=21), attr='split', ctx=Load(), lineno=843, col_offset=15, end_lineno=843, end_col_offset=27), args=[Constant(value='.', lineno=843, col_offset=28, end_lineno=843, end_col_offset=31), Constant(value=2, lineno=843, col_offset=33, end_lineno=843, end_col_offset=34)], lineno=843, col_offset=15, end_lineno=843, end_col_offset=35), slice=Constant(value=1, lineno=843, col_offset=36, end_lineno=843, end_col_offset=37), ctx=Load(), lineno=843, col_offset=15, end_lineno=843, end_col_offset=38), lineno=843, col_offset=8, end_lineno=843, end_col_offset=38)], lineno=842, col_offset=4, end_lineno=843, end_col_offset=38), Return(value=Name(id='head', ctx=Load(), lineno=844, col_offset=11, end_lineno=844, end_col_offset=15), lineno=844, col_offset=4, end_lineno=844, end_col_offset=15)], returns=Name(id='str', ctx=Load(), lineno=828, col_offset=28, end_lineno=828, end_col_offset=31), lineno=828, col_offset=0, end_lineno=844, end_col_offset=15), FunctionDef(name='_module_label', args=arguments(args=[arg(arg='node', annotation=Name(id='object', ctx=Load(), lineno=847, col_offset=24, end_lineno=847, end_col_offset=30), lineno=847, col_offset=18, end_lineno=847, end_col_offset=30), arg(arg='data', annotation=Subscript(value=Name(id='Mapping', ctx=Load(), lineno=847, col_offset=38, end_lineno=847, end_col_offset=45), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=847, col_offset=46, end_lineno=847, end_col_offset=49), Name(id='object', ctx=Load(), lineno=847, col_offset=51, end_lineno=847, end_col_offset=57)], ctx=Load(), lineno=847, col_offset=46, end_lineno=847, end_col_offset=57), ctx=Load(), lineno=847, col_offset=38, end_lineno=847, end_col_offset=58), lineno=847, col_offset=32, end_lineno=847, end_col_offset=58)]), body=[Expr(value=Constant(value='Normalize the label associated with a pydeps node.\n\n    Parameters\n    ----------\n    node : object\n        Graph node.\n    data : Mapping[str, object]\n        Node data dictionary.\n\n    Returns\n    -------\n    str\n        Normalized label string.\n    ', lineno=848, col_offset=4, end_lineno=861, end_col_offset=7), lineno=848, col_offset=4, end_lineno=861, end_col_offset=7), Assign(targets=[Name(id='label', ctx=Store(), lineno=862, col_offset=4, end_lineno=862, end_col_offset=9)], value=Call(func=Attribute(value=Name(id='data', ctx=Load(), lineno=862, col_offset=12, end_lineno=862, end_col_offset=16), attr='get', ctx=Load(), lineno=862, col_offset=12, end_lineno=862, end_col_offset=20), args=[Constant(value='label', lineno=862, col_offset=21, end_lineno=862, end_col_offset=28)], lineno=862, col_offset=12, end_lineno=862, end_col_offset=29), lineno=862, col_offset=4, end_lineno=862, end_col_offset=29), If(test=Compare(left=Name(id='label', ctx=Load(), lineno=863, col_offset=7, end_lineno=863, end_col_offset=12), ops=[Is()], comparators=[Constant(value=None, lineno=863, col_offset=16, end_lineno=863, end_col_offset=20)], lineno=863, col_offset=7, end_lineno=863, end_col_offset=20), body=[Return(value=Call(func=Name(id='str', ctx=Load(), lineno=864, col_offset=15, end_lineno=864, end_col_offset=18), args=[Name(id='node', ctx=Load(), lineno=864, col_offset=19, end_lineno=864, end_col_offset=23)], lineno=864, col_offset=15, end_lineno=864, end_col_offset=24), lineno=864, col_offset=8, end_lineno=864, end_col_offset=24)], lineno=863, col_offset=4, end_lineno=864, end_col_offset=24), Assign(targets=[Name(id='raw', ctx=Store(), lineno=865, col_offset=4, end_lineno=865, end_col_offset=7)], value=Call(func=Attribute(value=Call(func=Name(id='str', ctx=Load(), lineno=865, col_offset=10, end_lineno=865, end_col_offset=13), args=[Name(id='label', ctx=Load(), lineno=865, col_offset=14, end_lineno=865, end_col_offset=19)], lineno=865, col_offset=10, end_lineno=865, end_col_offset=20), attr='strip', ctx=Load(), lineno=865, col_offset=10, end_lineno=865, end_col_offset=26), args=[Constant(value='"', lineno=865, col_offset=27, end_lineno=865, end_col_offset=30)], lineno=865, col_offset=10, end_lineno=865, end_col_offset=31), lineno=865, col_offset=4, end_lineno=865, end_col_offset=31), Assign(targets=[Name(id='normalized', ctx=Store(), lineno=866, col_offset=4, end_lineno=866, end_col_offset=14)], value=Call(func=Attribute(value=Call(func=Attribute(value=Call(func=Attribute(value=Name(id='raw', ctx=Load(), lineno=866, col_offset=17, end_lineno=866, end_col_offset=20), attr='replace', ctx=Load(), lineno=866, col_offset=17, end_lineno=866, end_col_offset=28), args=[Constant(value='\\n', lineno=866, col_offset=29, end_lineno=866, end_col_offset=34), Constant(value='\n', lineno=866, col_offset=36, end_lineno=866, end_col_offset=40)], lineno=866, col_offset=17, end_lineno=866, end_col_offset=41), attr='replace', ctx=Load(), lineno=866, col_offset=17, end_lineno=866, end_col_offset=49), args=[Constant(value='\\.', lineno=866, col_offset=50, end_lineno=866, end_col_offset=55), Constant(value='.', lineno=866, col_offset=57, end_lineno=866, end_col_offset=60)], lineno=866, col_offset=17, end_lineno=866, end_col_offset=61), attr='replace', ctx=Load(), lineno=866, col_offset=17, end_lineno=866, end_col_offset=69), args=[Constant(value='\\\\', lineno=866, col_offset=70, end_lineno=866, end_col_offset=75), Constant(value='\\', lineno=866, col_offset=77, end_lineno=866, end_col_offset=81)], lineno=866, col_offset=17, end_lineno=866, end_col_offset=82), lineno=866, col_offset=4, end_lineno=866, end_col_offset=82), Return(value=Call(func=Attribute(value=Name(id='normalized', ctx=Load(), lineno=867, col_offset=11, end_lineno=867, end_col_offset=21), attr='replace', ctx=Load(), lineno=867, col_offset=11, end_lineno=867, end_col_offset=29), args=[Constant(value='\n', lineno=867, col_offset=30, end_lineno=867, end_col_offset=34), Constant(value='', lineno=867, col_offset=36, end_lineno=867, end_col_offset=38)], lineno=867, col_offset=11, end_lineno=867, end_col_offset=39), lineno=867, col_offset=4, end_lineno=867, end_col_offset=39)], returns=Name(id='str', ctx=Load(), lineno=847, col_offset=63, end_lineno=847, end_col_offset=66), lineno=847, col_offset=0, end_lineno=867, end_col_offset=39), FunctionDef(name='_coerce_sequence', args=arguments(args=[arg(arg='value', annotation=Name(id='object', ctx=Load(), lineno=870, col_offset=28, end_lineno=870, end_col_offset=34), lineno=870, col_offset=21, end_lineno=870, end_col_offset=34)]), body=[Expr(value=Constant(value='Coerce sequence.\n\n    Parameters\n    ----------\n    value : object\n        Value to coerce.\n\n    Returns\n    -------\n    list[str]\n        List of string items if value is a sequence, otherwise empty list.\n    ', lineno=871, col_offset=4, end_lineno=882, end_col_offset=7), lineno=871, col_offset=4, end_lineno=882, end_col_offset=7), If(test=BoolOp(op=And(), values=[Call(func=Name(id='isinstance', ctx=Load(), lineno=883, col_offset=7, end_lineno=883, end_col_offset=17), args=[Name(id='value', ctx=Load(), lineno=883, col_offset=18, end_lineno=883, end_col_offset=23), Name(id='Sequence', ctx=Load(), lineno=883, col_offset=25, end_lineno=883, end_col_offset=33)], lineno=883, col_offset=7, end_lineno=883, end_col_offset=34), UnaryOp(op=Not(), operand=Call(func=Name(id='isinstance', ctx=Load(), lineno=883, col_offset=43, end_lineno=883, end_col_offset=53), args=[Name(id='value', ctx=Load(), lineno=883, col_offset=54, end_lineno=883, end_col_offset=59), Tuple(elts=[Name(id='str', ctx=Load(), lineno=883, col_offset=62, end_lineno=883, end_col_offset=65), Name(id='bytes', ctx=Load(), lineno=883, col_offset=67, end_lineno=883, end_col_offset=72)], ctx=Load(), lineno=883, col_offset=61, end_lineno=883, end_col_offset=73)], lineno=883, col_offset=43, end_lineno=883, end_col_offset=74), lineno=883, col_offset=39, end_lineno=883, end_col_offset=74)], lineno=883, col_offset=7, end_lineno=883, end_col_offset=74), body=[Return(value=ListComp(elt=Call(func=Name(id='str', ctx=Load(), lineno=884, col_offset=16, end_lineno=884, end_col_offset=19), args=[Name(id='item', ctx=Load(), lineno=884, col_offset=20, end_lineno=884, end_col_offset=24)], lineno=884, col_offset=16, end_lineno=884, end_col_offset=25), generators=[comprehension(target=Name(id='item', ctx=Store(), lineno=884, col_offset=30, end_lineno=884, end_col_offset=34), iter=Name(id='value', ctx=Load(), lineno=884, col_offset=38, end_lineno=884, end_col_offset=43), is_async=0)], lineno=884, col_offset=15, end_lineno=884, end_col_offset=44), lineno=884, col_offset=8, end_lineno=884, end_col_offset=44)], lineno=883, col_offset=4, end_lineno=884, end_col_offset=44), Return(value=List(ctx=Load(), lineno=885, col_offset=11, end_lineno=885, end_col_offset=13), lineno=885, col_offset=4, end_lineno=885, end_col_offset=13)], returns=Subscript(value=Name(id='list', ctx=Load(), lineno=870, col_offset=39, end_lineno=870, end_col_offset=43), slice=Name(id='str', ctx=Load(), lineno=870, col_offset=44, end_lineno=870, end_col_offset=47), ctx=Load(), lineno=870, col_offset=39, end_lineno=870, end_col_offset=48), lineno=870, col_offset=0, end_lineno=885, end_col_offset=13), FunctionDef(name='_coerce_mapping', args=arguments(args=[arg(arg='value', annotation=Name(id='object', ctx=Load(), lineno=888, col_offset=27, end_lineno=888, end_col_offset=33), lineno=888, col_offset=20, end_lineno=888, end_col_offset=33)]), body=[Expr(value=Constant(value='Coerce mapping.\n\n    Parameters\n    ----------\n    value : object\n        Value to coerce.\n\n    Returns\n    -------\n    dict[str, str]\n        Dictionary mapping if value is a mapping, otherwise empty dict.\n    ', lineno=889, col_offset=4, end_lineno=900, end_col_offset=7), lineno=889, col_offset=4, end_lineno=900, end_col_offset=7), If(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=901, col_offset=7, end_lineno=901, end_col_offset=17), args=[Name(id='value', ctx=Load(), lineno=901, col_offset=18, end_lineno=901, end_col_offset=23), Name(id='Mapping', ctx=Load(), lineno=901, col_offset=25, end_lineno=901, end_col_offset=32)], lineno=901, col_offset=7, end_lineno=901, end_col_offset=33), body=[Return(value=DictComp(key=Call(func=Name(id='str', ctx=Load(), lineno=902, col_offset=16, end_lineno=902, end_col_offset=19), args=[Name(id='key', ctx=Load(), lineno=902, col_offset=20, end_lineno=902, end_col_offset=23)], lineno=902, col_offset=16, end_lineno=902, end_col_offset=24), value=Call(func=Name(id='str', ctx=Load(), lineno=902, col_offset=26, end_lineno=902, end_col_offset=29), args=[Name(id='val', ctx=Load(), lineno=902, col_offset=30, end_lineno=902, end_col_offset=33)], lineno=902, col_offset=26, end_lineno=902, end_col_offset=34), generators=[comprehension(target=Tuple(elts=[Name(id='key', ctx=Store(), lineno=902, col_offset=39, end_lineno=902, end_col_offset=42), Name(id='val', ctx=Store(), lineno=902, col_offset=44, end_lineno=902, end_col_offset=47)], ctx=Store(), lineno=902, col_offset=39, end_lineno=902, end_col_offset=47), iter=Call(func=Attribute(value=Name(id='value', ctx=Load(), lineno=902, col_offset=51, end_lineno=902, end_col_offset=56), attr='items', ctx=Load(), lineno=902, col_offset=51, end_lineno=902, end_col_offset=62), lineno=902, col_offset=51, end_lineno=902, end_col_offset=64), is_async=0)], lineno=902, col_offset=15, end_lineno=902, end_col_offset=65), lineno=902, col_offset=8, end_lineno=902, end_col_offset=65)], lineno=901, col_offset=4, end_lineno=902, end_col_offset=65), Return(value=Dict(lineno=903, col_offset=11, end_lineno=903, end_col_offset=13), lineno=903, col_offset=4, end_lineno=903, end_col_offset=13)], returns=Subscript(value=Name(id='dict', ctx=Load(), lineno=888, col_offset=38, end_lineno=888, end_col_offset=42), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=888, col_offset=43, end_lineno=888, end_col_offset=46), Name(id='str', ctx=Load(), lineno=888, col_offset=48, end_lineno=888, end_col_offset=51)], ctx=Load(), lineno=888, col_offset=43, end_lineno=888, end_col_offset=51), ctx=Load(), lineno=888, col_offset=38, end_lineno=888, end_col_offset=52), lineno=888, col_offset=0, end_lineno=903, end_col_offset=13), FunctionDef(name='_allow_outward_rule', args=arguments(args=[arg(arg='layers', annotation=Name(id='LayerConfig', ctx=Load(), lineno=906, col_offset=32, end_lineno=906, end_col_offset=43), lineno=906, col_offset=24, end_lineno=906, end_col_offset=43)]), body=[Expr(value=Constant(value='Allow outward rule.\n\n    Parameters\n    ----------\n    layers : LayerConfig\n        Layer configuration.\n\n    Returns\n    -------\n    bool\n        True if outward edges are allowed, False otherwise.\n    ', lineno=907, col_offset=4, end_lineno=918, end_col_offset=7), lineno=907, col_offset=4, end_lineno=918, end_col_offset=7), Assign(targets=[Name(id='rules', ctx=Store(), lineno=919, col_offset=4, end_lineno=919, end_col_offset=9)], value=Call(func=Attribute(value=Name(id='layers', ctx=Load(), lineno=919, col_offset=12, end_lineno=919, end_col_offset=18), attr='get', ctx=Load(), lineno=919, col_offset=12, end_lineno=919, end_col_offset=22), args=[Constant(value='rules', lineno=919, col_offset=23, end_lineno=919, end_col_offset=30)], lineno=919, col_offset=12, end_lineno=919, end_col_offset=31), lineno=919, col_offset=4, end_lineno=919, end_col_offset=31), If(test=UnaryOp(op=Not(), operand=Call(func=Name(id='isinstance', ctx=Load(), lineno=920, col_offset=11, end_lineno=920, end_col_offset=21), args=[Name(id='rules', ctx=Load(), lineno=920, col_offset=22, end_lineno=920, end_col_offset=27), Name(id='Mapping', ctx=Load(), lineno=920, col_offset=29, end_lineno=920, end_col_offset=36)], lineno=920, col_offset=11, end_lineno=920, end_col_offset=37), lineno=920, col_offset=7, end_lineno=920, end_col_offset=37), body=[Return(value=Constant(value=False, lineno=921, col_offset=15, end_lineno=921, end_col_offset=20), lineno=921, col_offset=8, end_lineno=921, end_col_offset=20)], lineno=920, col_offset=4, end_lineno=921, end_col_offset=20), Return(value=Call(func=Name(id='bool', ctx=Load(), lineno=922, col_offset=11, end_lineno=922, end_col_offset=15), args=[Call(func=Attribute(value=Name(id='rules', ctx=Load(), lineno=922, col_offset=16, end_lineno=922, end_col_offset=21), attr='get', ctx=Load(), lineno=922, col_offset=16, end_lineno=922, end_col_offset=25), args=[Constant(value='allow_outward', lineno=922, col_offset=26, end_lineno=922, end_col_offset=41), Constant(value=False, lineno=922, col_offset=43, end_lineno=922, end_col_offset=48)], lineno=922, col_offset=16, end_lineno=922, end_col_offset=49)], lineno=922, col_offset=11, end_lineno=922, end_col_offset=50), lineno=922, col_offset=4, end_lineno=922, end_col_offset=50)], returns=Name(id='bool', ctx=Load(), lineno=906, col_offset=48, end_lineno=906, end_col_offset=52), lineno=906, col_offset=0, end_lineno=922, end_col_offset=50), FunctionDef(name='_env_int', args=arguments(args=[arg(arg='name', annotation=Name(id='str', ctx=Load(), lineno=925, col_offset=19, end_lineno=925, end_col_offset=22), lineno=925, col_offset=13, end_lineno=925, end_col_offset=22), arg(arg='default', annotation=Name(id='int', ctx=Load(), lineno=925, col_offset=33, end_lineno=925, end_col_offset=36), lineno=925, col_offset=24, end_lineno=925, end_col_offset=36)]), body=[Expr(value=Constant(value='Env int.\n\n    Parameters\n    ----------\n    name : str\n        Environment variable name.\n    default : int\n        Default value if variable is missing or invalid.\n\n    Returns\n    -------\n    int\n        Integer value from environment or default.\n    ', lineno=926, col_offset=4, end_lineno=939, end_col_offset=7), lineno=926, col_offset=4, end_lineno=939, end_col_offset=7), Assign(targets=[Name(id='value', ctx=Store(), lineno=940, col_offset=4, end_lineno=940, end_col_offset=9)], value=Call(func=Attribute(value=Name(id='os', ctx=Load(), lineno=940, col_offset=12, end_lineno=940, end_col_offset=14), attr='getenv', ctx=Load(), lineno=940, col_offset=12, end_lineno=940, end_col_offset=21), args=[Name(id='name', ctx=Load(), lineno=940, col_offset=22, end_lineno=940, end_col_offset=26)], lineno=940, col_offset=12, end_lineno=940, end_col_offset=27), lineno=940, col_offset=4, end_lineno=940, end_col_offset=27), If(test=Compare(left=Name(id='value', ctx=Load(), lineno=941, col_offset=7, end_lineno=941, end_col_offset=12), ops=[Is()], comparators=[Constant(value=None, lineno=941, col_offset=16, end_lineno=941, end_col_offset=20)], lineno=941, col_offset=7, end_lineno=941, end_col_offset=20), body=[Return(value=Name(id='default', ctx=Load(), lineno=942, col_offset=15, end_lineno=942, end_col_offset=22), lineno=942, col_offset=8, end_lineno=942, end_col_offset=22)], lineno=941, col_offset=4, end_lineno=942, end_col_offset=22), Try(body=[Return(value=Call(func=Name(id='int', ctx=Load(), lineno=944, col_offset=15, end_lineno=944, end_col_offset=18), args=[Name(id='value', ctx=Load(), lineno=944, col_offset=19, end_lineno=944, end_col_offset=24)], lineno=944, col_offset=15, end_lineno=944, end_col_offset=25), lineno=944, col_offset=8, end_lineno=944, end_col_offset=25)], handlers=[ExceptHandler(type=Name(id='ValueError', ctx=Load(), lineno=945, col_offset=11, end_lineno=945, end_col_offset=21), body=[Return(value=Name(id='default', ctx=Load(), lineno=946, col_offset=15, end_lineno=946, end_col_offset=22), lineno=946, col_offset=8, end_lineno=946, end_col_offset=22)], lineno=945, col_offset=4, end_lineno=946, end_col_offset=22)], lineno=943, col_offset=4, end_lineno=946, end_col_offset=22)], returns=Name(id='int', ctx=Load(), lineno=925, col_offset=41, end_lineno=925, end_col_offset=44), lineno=925, col_offset=0, end_lineno=946, end_col_offset=22), FunctionDef(name='_cycle_config', args=arguments(), body=[Expr(value=Constant(value='Return cycle enumeration configuration derived from the environment.\n\n    Returns\n    -------\n    CycleConfig\n        Cycle configuration with limits and budget from environment.\n    ', lineno=950, col_offset=4, end_lineno=956, end_col_offset=7), lineno=950, col_offset=4, end_lineno=956, end_col_offset=7), Return(value=Call(func=Name(id='CycleConfig', ctx=Load(), lineno=957, col_offset=11, end_lineno=957, end_col_offset=22), keywords=[keyword(arg='limit', value=Call(func=Name(id='_env_int', ctx=Load(), lineno=958, col_offset=14, end_lineno=958, end_col_offset=22), args=[Name(id='CYCLE_LIMIT_ENV', ctx=Load(), lineno=958, col_offset=23, end_lineno=958, end_col_offset=38), Constant(value=0, lineno=958, col_offset=40, end_lineno=958, end_col_offset=41)], lineno=958, col_offset=14, end_lineno=958, end_col_offset=42), lineno=958, col_offset=8, end_lineno=958, end_col_offset=42), keyword(arg='length_bound', value=Call(func=Name(id='_env_int', ctx=Load(), lineno=959, col_offset=21, end_lineno=959, end_col_offset=29), args=[Name(id='CYCLE_LENGTH_ENV', ctx=Load(), lineno=959, col_offset=30, end_lineno=959, end_col_offset=46), Constant(value=0, lineno=959, col_offset=48, end_lineno=959, end_col_offset=49)], lineno=959, col_offset=21, end_lineno=959, end_col_offset=50), lineno=959, col_offset=8, end_lineno=959, end_col_offset=50), keyword(arg='edge_budget', value=Call(func=Name(id='_env_int', ctx=Load(), lineno=960, col_offset=20, end_lineno=960, end_col_offset=28), args=[Name(id='EDGE_BUDGET_ENV', ctx=Load(), lineno=960, col_offset=29, end_lineno=960, end_col_offset=44), Name(id='DEFAULT_EDGE_BUDGET', ctx=Load(), lineno=960, col_offset=46, end_lineno=960, end_col_offset=65)], lineno=960, col_offset=20, end_lineno=960, end_col_offset=66), lineno=960, col_offset=8, end_lineno=960, end_col_offset=66)], lineno=957, col_offset=11, end_lineno=961, end_col_offset=5), lineno=957, col_offset=4, end_lineno=961, end_col_offset=5)], returns=Name(id='CycleConfig', ctx=Load(), lineno=949, col_offset=23, end_lineno=949, end_col_offset=34), lineno=949, col_offset=0, end_lineno=961, end_col_offset=5), FunctionDef(name='_centrality_threshold', args=arguments(args=[arg(arg='centrality', annotation=Subscript(value=Name(id='Mapping', ctx=Load(), lineno=964, col_offset=38, end_lineno=964, end_col_offset=45), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=964, col_offset=46, end_lineno=964, end_col_offset=49), Name(id='float', ctx=Load(), lineno=964, col_offset=51, end_lineno=964, end_col_offset=56)], ctx=Load(), lineno=964, col_offset=46, end_lineno=964, end_col_offset=56), ctx=Load(), lineno=964, col_offset=38, end_lineno=964, end_col_offset=57), lineno=964, col_offset=26, end_lineno=964, end_col_offset=57), arg(arg='fraction', annotation=Name(id='float', ctx=Load(), lineno=964, col_offset=69, end_lineno=964, end_col_offset=74), lineno=964, col_offset=59, end_lineno=964, end_col_offset=74)]), body=[Expr(value=Constant(value='Return the value at ``fraction`` of the sorted centrality scores.\n\n    Parameters\n    ----------\n    centrality : Mapping[str, float]\n        Centrality scores mapping.\n    fraction : float\n        Fraction of sorted values (0-1).\n\n    Returns\n    -------\n    float\n        Threshold value at the specified fraction.\n    ', lineno=965, col_offset=4, end_lineno=978, end_col_offset=7), lineno=965, col_offset=4, end_lineno=978, end_col_offset=7), Assign(targets=[Name(id='values', ctx=Store(), lineno=979, col_offset=4, end_lineno=979, end_col_offset=10)], value=Call(func=Name(id='sorted', ctx=Load(), lineno=979, col_offset=13, end_lineno=979, end_col_offset=19), args=[Call(func=Attribute(value=Name(id='centrality', ctx=Load(), lineno=979, col_offset=20, end_lineno=979, end_col_offset=30), attr='values', ctx=Load(), lineno=979, col_offset=20, end_lineno=979, end_col_offset=37), lineno=979, col_offset=20, end_lineno=979, end_col_offset=39)], lineno=979, col_offset=13, end_lineno=979, end_col_offset=40), lineno=979, col_offset=4, end_lineno=979, end_col_offset=40), If(test=UnaryOp(op=Not(), operand=Name(id='values', ctx=Load(), lineno=980, col_offset=11, end_lineno=980, end_col_offset=17), lineno=980, col_offset=7, end_lineno=980, end_col_offset=17), body=[Return(value=Constant(value=0.0, lineno=981, col_offset=15, end_lineno=981, end_col_offset=18), lineno=981, col_offset=8, end_lineno=981, end_col_offset=18)], lineno=980, col_offset=4, end_lineno=981, end_col_offset=18), Assign(targets=[Name(id='index', ctx=Store(), lineno=982, col_offset=4, end_lineno=982, end_col_offset=9)], value=Call(func=Name(id='min', ctx=Load(), lineno=982, col_offset=12, end_lineno=982, end_col_offset=15), args=[BinOp(left=Call(func=Name(id='len', ctx=Load(), lineno=982, col_offset=16, end_lineno=982, end_col_offset=19), args=[Name(id='values', ctx=Load(), lineno=982, col_offset=20, end_lineno=982, end_col_offset=26)], lineno=982, col_offset=16, end_lineno=982, end_col_offset=27), op=Sub(), right=Constant(value=1, lineno=982, col_offset=30, end_lineno=982, end_col_offset=31), lineno=982, col_offset=16, end_lineno=982, end_col_offset=31), Call(func=Name(id='int', ctx=Load(), lineno=982, col_offset=33, end_lineno=982, end_col_offset=36), args=[BinOp(left=Name(id='fraction', ctx=Load(), lineno=982, col_offset=37, end_lineno=982, end_col_offset=45), op=Mult(), right=Call(func=Name(id='len', ctx=Load(), lineno=982, col_offset=48, end_lineno=982, end_col_offset=51), args=[Name(id='values', ctx=Load(), lineno=982, col_offset=52, end_lineno=982, end_col_offset=58)], lineno=982, col_offset=48, end_lineno=982, end_col_offset=59), lineno=982, col_offset=37, end_lineno=982, end_col_offset=59)], lineno=982, col_offset=33, end_lineno=982, end_col_offset=60)], lineno=982, col_offset=12, end_lineno=982, end_col_offset=61), lineno=982, col_offset=4, end_lineno=982, end_col_offset=61), Return(value=Subscript(value=Name(id='values', ctx=Load(), lineno=983, col_offset=11, end_lineno=983, end_col_offset=17), slice=Name(id='index', ctx=Load(), lineno=983, col_offset=18, end_lineno=983, end_col_offset=23), ctx=Load(), lineno=983, col_offset=11, end_lineno=983, end_col_offset=24), lineno=983, col_offset=4, end_lineno=983, end_col_offset=24)], returns=Name(id='float', ctx=Load(), lineno=964, col_offset=79, end_lineno=964, end_col_offset=84), lineno=964, col_offset=0, end_lineno=983, end_col_offset=24), FunctionDef(name='_extract_cycle_edges', args=arguments(args=[arg(arg='cycles', annotation=Name(id='CycleList', ctx=Load(), lineno=986, col_offset=33, end_lineno=986, end_col_offset=42), lineno=986, col_offset=25, end_lineno=986, end_col_offset=42)]), body=[Expr(value=Constant(value='Return directed edges participating in enumerated cycles.\n\n    Parameters\n    ----------\n    cycles : CycleList\n        List of cycle node lists.\n\n    Returns\n    -------\n    set[tuple[str, str]]\n        Set of (source, target) edge tuples.\n    ', lineno=987, col_offset=4, end_lineno=998, end_col_offset=7), lineno=987, col_offset=4, end_lineno=998, end_col_offset=7), AnnAssign(target=Name(id='edges', ctx=Store(), lineno=999, col_offset=4, end_lineno=999, end_col_offset=9), annotation=Subscript(value=Name(id='set', ctx=Load(), lineno=999, col_offset=11, end_lineno=999, end_col_offset=14), slice=Subscript(value=Name(id='tuple', ctx=Load(), lineno=999, col_offset=15, end_lineno=999, end_col_offset=20), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=999, col_offset=21, end_lineno=999, end_col_offset=24), Name(id='str', ctx=Load(), lineno=999, col_offset=26, end_lineno=999, end_col_offset=29)], ctx=Load(), lineno=999, col_offset=21, end_lineno=999, end_col_offset=29), ctx=Load(), lineno=999, col_offset=15, end_lineno=999, end_col_offset=30), ctx=Load(), lineno=999, col_offset=11, end_lineno=999, end_col_offset=31), value=Call(func=Name(id='set', ctx=Load(), lineno=999, col_offset=34, end_lineno=999, end_col_offset=37), lineno=999, col_offset=34, end_lineno=999, end_col_offset=39), simple=1, lineno=999, col_offset=4, end_lineno=999, end_col_offset=39), For(target=Name(id='cycle', ctx=Store(), lineno=1000, col_offset=8, end_lineno=1000, end_col_offset=13), iter=Name(id='cycles', ctx=Load(), lineno=1000, col_offset=17, end_lineno=1000, end_col_offset=23), body=[For(target=Tuple(elts=[Name(id='idx', ctx=Store(), lineno=1001, col_offset=12, end_lineno=1001, end_col_offset=15), Name(id='node', ctx=Store(), lineno=1001, col_offset=17, end_lineno=1001, end_col_offset=21)], ctx=Store(), lineno=1001, col_offset=12, end_lineno=1001, end_col_offset=21), iter=Call(func=Name(id='enumerate', ctx=Load(), lineno=1001, col_offset=25, end_lineno=1001, end_col_offset=34), args=[Name(id='cycle', ctx=Load(), lineno=1001, col_offset=35, end_lineno=1001, end_col_offset=40)], lineno=1001, col_offset=25, end_lineno=1001, end_col_offset=41), body=[Assign(targets=[Name(id='next_node', ctx=Store(), lineno=1002, col_offset=12, end_lineno=1002, end_col_offset=21)], value=Subscript(value=Name(id='cycle', ctx=Load(), lineno=1002, col_offset=24, end_lineno=1002, end_col_offset=29), slice=BinOp(left=BinOp(left=Name(id='idx', ctx=Load(), lineno=1002, col_offset=31, end_lineno=1002, end_col_offset=34), op=Add(), right=Constant(value=1, lineno=1002, col_offset=37, end_lineno=1002, end_col_offset=38), lineno=1002, col_offset=31, end_lineno=1002, end_col_offset=38), op=Mod(), right=Call(func=Name(id='len', ctx=Load(), lineno=1002, col_offset=42, end_lineno=1002, end_col_offset=45), args=[Name(id='cycle', ctx=Load(), lineno=1002, col_offset=46, end_lineno=1002, end_col_offset=51)], lineno=1002, col_offset=42, end_lineno=1002, end_col_offset=52), lineno=1002, col_offset=30, end_lineno=1002, end_col_offset=52), ctx=Load(), lineno=1002, col_offset=24, end_lineno=1002, end_col_offset=53), lineno=1002, col_offset=12, end_lineno=1002, end_col_offset=53), Expr(value=Call(func=Attribute(value=Name(id='edges', ctx=Load(), lineno=1003, col_offset=12, end_lineno=1003, end_col_offset=17), attr='add', ctx=Load(), lineno=1003, col_offset=12, end_lineno=1003, end_col_offset=21), args=[Tuple(elts=[Name(id='node', ctx=Load(), lineno=1003, col_offset=23, end_lineno=1003, end_col_offset=27), Name(id='next_node', ctx=Load(), lineno=1003, col_offset=29, end_lineno=1003, end_col_offset=38)], ctx=Load(), lineno=1003, col_offset=22, end_lineno=1003, end_col_offset=39)], lineno=1003, col_offset=12, end_lineno=1003, end_col_offset=40), lineno=1003, col_offset=12, end_lineno=1003, end_col_offset=40)], lineno=1001, col_offset=8, end_lineno=1003, end_col_offset=40)], lineno=1000, col_offset=4, end_lineno=1003, end_col_offset=40), Return(value=Name(id='edges', ctx=Load(), lineno=1004, col_offset=11, end_lineno=1004, end_col_offset=16), lineno=1004, col_offset=4, end_lineno=1004, end_col_offset=16)], returns=Subscript(value=Name(id='set', ctx=Load(), lineno=986, col_offset=47, end_lineno=986, end_col_offset=50), slice=Subscript(value=Name(id='tuple', ctx=Load(), lineno=986, col_offset=51, end_lineno=986, end_col_offset=56), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=986, col_offset=57, end_lineno=986, end_col_offset=60), Name(id='str', ctx=Load(), lineno=986, col_offset=62, end_lineno=986, end_col_offset=65)], ctx=Load(), lineno=986, col_offset=57, end_lineno=986, end_col_offset=65), ctx=Load(), lineno=986, col_offset=51, end_lineno=986, end_col_offset=66), ctx=Load(), lineno=986, col_offset=47, end_lineno=986, end_col_offset=67), lineno=986, col_offset=0, end_lineno=1004, end_col_offset=16), FunctionDef(name='_add_graph_nodes', args=arguments(args=[arg(arg='dot_graph', annotation=Name(id='PydotDot', ctx=Load(), lineno=1008, col_offset=15, end_lineno=1008, end_col_offset=23), lineno=1008, col_offset=4, end_lineno=1008, end_col_offset=23), arg(arg='graph', annotation=Name(id='DiGraph', ctx=Load(), lineno=1009, col_offset=11, end_lineno=1009, end_col_offset=18), lineno=1009, col_offset=4, end_lineno=1009, end_col_offset=18), arg(arg='pkg2layer', annotation=Subscript(value=Name(id='Mapping', ctx=Load(), lineno=1010, col_offset=15, end_lineno=1010, end_col_offset=22), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=1010, col_offset=23, end_lineno=1010, end_col_offset=26), Name(id='str', ctx=Load(), lineno=1010, col_offset=28, end_lineno=1010, end_col_offset=31)], ctx=Load(), lineno=1010, col_offset=23, end_lineno=1010, end_col_offset=31), ctx=Load(), lineno=1010, col_offset=15, end_lineno=1010, end_col_offset=32), lineno=1010, col_offset=4, end_lineno=1010, end_col_offset=32), arg(arg='centrality', annotation=Subscript(value=Name(id='Mapping', ctx=Load(), lineno=1011, col_offset=16, end_lineno=1011, end_col_offset=23), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=1011, col_offset=24, end_lineno=1011, end_col_offset=27), Name(id='float', ctx=Load(), lineno=1011, col_offset=29, end_lineno=1011, end_col_offset=34)], ctx=Load(), lineno=1011, col_offset=24, end_lineno=1011, end_col_offset=34), ctx=Load(), lineno=1011, col_offset=16, end_lineno=1011, end_col_offset=35), lineno=1011, col_offset=4, end_lineno=1011, end_col_offset=35), arg(arg='threshold', annotation=Name(id='float', ctx=Load(), lineno=1012, col_offset=15, end_lineno=1012, end_col_offset=20), lineno=1012, col_offset=4, end_lineno=1012, end_col_offset=20)]), body=[Expr(value=Constant(value='Populate ``dot_graph`` with styled nodes extracted from ``graph``.', lineno=1014, col_offset=4, end_lineno=1014, end_col_offset=76), lineno=1014, col_offset=4, end_lineno=1014, end_col_offset=76), Assign(targets=[Name(id='pydot_module', ctx=Store(), lineno=1015, col_offset=4, end_lineno=1015, end_col_offset=16)], value=Call(func=Name(id='_require_pydot', ctx=Load(), lineno=1015, col_offset=19, end_lineno=1015, end_col_offset=33), lineno=1015, col_offset=19, end_lineno=1015, end_col_offset=35), lineno=1015, col_offset=4, end_lineno=1015, end_col_offset=35), For(target=Name(id='node', ctx=Store(), lineno=1016, col_offset=8, end_lineno=1016, end_col_offset=12), iter=Call(func=Name(id='sorted', ctx=Load(), lineno=1016, col_offset=16, end_lineno=1016, end_col_offset=22), args=[Call(func=Attribute(value=Name(id='graph', ctx=Load(), lineno=1016, col_offset=23, end_lineno=1016, end_col_offset=28), attr='nodes', ctx=Load(), lineno=1016, col_offset=23, end_lineno=1016, end_col_offset=34), lineno=1016, col_offset=23, end_lineno=1016, end_col_offset=36)], lineno=1016, col_offset=16, end_lineno=1016, end_col_offset=37), body=[Assign(targets=[Name(id='layer', ctx=Store(), lineno=1017, col_offset=8, end_lineno=1017, end_col_offset=13)], value=Call(func=Attribute(value=Name(id='pkg2layer', ctx=Load(), lineno=1017, col_offset=16, end_lineno=1017, end_col_offset=25), attr='get', ctx=Load(), lineno=1017, col_offset=16, end_lineno=1017, end_col_offset=29), args=[Name(id='node', ctx=Load(), lineno=1017, col_offset=30, end_lineno=1017, end_col_offset=34), Constant(value='unknown', lineno=1017, col_offset=36, end_lineno=1017, end_col_offset=45)], lineno=1017, col_offset=16, end_lineno=1017, end_col_offset=46), lineno=1017, col_offset=8, end_lineno=1017, end_col_offset=46), Assign(targets=[Name(id='color', ctx=Store(), lineno=1018, col_offset=8, end_lineno=1018, end_col_offset=13)], value=Call(func=Attribute(value=Name(id='LAYER_PALETTE', ctx=Load(), lineno=1018, col_offset=16, end_lineno=1018, end_col_offset=29), attr='get', ctx=Load(), lineno=1018, col_offset=16, end_lineno=1018, end_col_offset=33), args=[Name(id='layer', ctx=Load(), lineno=1018, col_offset=34, end_lineno=1018, end_col_offset=39), Name(id='DEFAULT_LAYER_COLOR', ctx=Load(), lineno=1018, col_offset=41, end_lineno=1018, end_col_offset=60)], lineno=1018, col_offset=16, end_lineno=1018, end_col_offset=61), lineno=1018, col_offset=8, end_lineno=1018, end_col_offset=61), Assign(targets=[Name(id='penwidth', ctx=Store(), lineno=1019, col_offset=8, end_lineno=1019, end_col_offset=16)], value=IfExp(test=Compare(left=Call(func=Attribute(value=Name(id='centrality', ctx=Load(), lineno=1020, col_offset=36, end_lineno=1020, end_col_offset=46), attr='get', ctx=Load(), lineno=1020, col_offset=36, end_lineno=1020, end_col_offset=50), args=[Name(id='node', ctx=Load(), lineno=1020, col_offset=51, end_lineno=1020, end_col_offset=55), Constant(value=0.0, lineno=1020, col_offset=57, end_lineno=1020, end_col_offset=60)], lineno=1020, col_offset=36, end_lineno=1020, end_col_offset=61), ops=[GtE()], comparators=[Name(id='threshold', ctx=Load(), lineno=1020, col_offset=65, end_lineno=1020, end_col_offset=74)], lineno=1020, col_offset=36, end_lineno=1020, end_col_offset=74), body=Name(id='EDGE_HIGHLIGHT_WIDTH', ctx=Load(), lineno=1020, col_offset=12, end_lineno=1020, end_col_offset=32), orelse=Name(id='EDGE_NORMAL_WIDTH', ctx=Load(), lineno=1020, col_offset=80, end_lineno=1020, end_col_offset=97), lineno=1020, col_offset=12, end_lineno=1020, end_col_offset=97), lineno=1019, col_offset=8, end_lineno=1021, end_col_offset=9), Expr(value=Call(func=Attribute(value=Name(id='dot_graph', ctx=Load(), lineno=1022, col_offset=8, end_lineno=1022, end_col_offset=17), attr='add_node', ctx=Load(), lineno=1022, col_offset=8, end_lineno=1022, end_col_offset=26), args=[Call(func=Attribute(value=Name(id='pydot_module', ctx=Load(), lineno=1023, col_offset=12, end_lineno=1023, end_col_offset=24), attr='Node', ctx=Load(), lineno=1023, col_offset=12, end_lineno=1023, end_col_offset=29), args=[Name(id='node', ctx=Load(), lineno=1024, col_offset=16, end_lineno=1024, end_col_offset=20)], keywords=[keyword(arg='color', value=Name(id='color', ctx=Load(), lineno=1025, col_offset=22, end_lineno=1025, end_col_offset=27), lineno=1025, col_offset=16, end_lineno=1025, end_col_offset=27), keyword(arg='penwidth', value=Name(id='penwidth', ctx=Load(), lineno=1026, col_offset=25, end_lineno=1026, end_col_offset=33), lineno=1026, col_offset=16, end_lineno=1026, end_col_offset=33), keyword(arg='style', value=Constant(value='bold', lineno=1027, col_offset=22, end_lineno=1027, end_col_offset=28), lineno=1027, col_offset=16, end_lineno=1027, end_col_offset=28), keyword(arg='fontcolor', value=Constant(value='#1a202c', lineno=1028, col_offset=26, end_lineno=1028, end_col_offset=35), lineno=1028, col_offset=16, end_lineno=1028, end_col_offset=35)], lineno=1023, col_offset=12, end_lineno=1029, end_col_offset=13)], lineno=1022, col_offset=8, end_lineno=1030, end_col_offset=9), lineno=1022, col_offset=8, end_lineno=1030, end_col_offset=9)], lineno=1016, col_offset=4, end_lineno=1030, end_col_offset=9)], returns=Constant(value=None, lineno=1013, col_offset=5, end_lineno=1013, end_col_offset=9), lineno=1007, col_offset=0, end_lineno=1030, end_col_offset=9), FunctionDef(name='_add_graph_edges', args=arguments(args=[arg(arg='dot_graph', annotation=Name(id='PydotDot', ctx=Load(), lineno=1034, col_offset=15, end_lineno=1034, end_col_offset=23), lineno=1034, col_offset=4, end_lineno=1034, end_col_offset=23), arg(arg='graph', annotation=Name(id='DiGraph', ctx=Load(), lineno=1035, col_offset=11, end_lineno=1035, end_col_offset=18), lineno=1035, col_offset=4, end_lineno=1035, end_col_offset=18), arg(arg='pkg2layer', annotation=Subscript(value=Name(id='Mapping', ctx=Load(), lineno=1036, col_offset=15, end_lineno=1036, end_col_offset=22), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=1036, col_offset=23, end_lineno=1036, end_col_offset=26), Name(id='str', ctx=Load(), lineno=1036, col_offset=28, end_lineno=1036, end_col_offset=31)], ctx=Load(), lineno=1036, col_offset=23, end_lineno=1036, end_col_offset=31), ctx=Load(), lineno=1036, col_offset=15, end_lineno=1036, end_col_offset=32), lineno=1036, col_offset=4, end_lineno=1036, end_col_offset=32), arg(arg='cycle_edges', annotation=Subscript(value=Name(id='set', ctx=Load(), lineno=1037, col_offset=17, end_lineno=1037, end_col_offset=20), slice=Subscript(value=Name(id='tuple', ctx=Load(), lineno=1037, col_offset=21, end_lineno=1037, end_col_offset=26), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=1037, col_offset=27, end_lineno=1037, end_col_offset=30), Name(id='str', ctx=Load(), lineno=1037, col_offset=32, end_lineno=1037, end_col_offset=35)], ctx=Load(), lineno=1037, col_offset=27, end_lineno=1037, end_col_offset=35), ctx=Load(), lineno=1037, col_offset=21, end_lineno=1037, end_col_offset=36), ctx=Load(), lineno=1037, col_offset=17, end_lineno=1037, end_col_offset=37), lineno=1037, col_offset=4, end_lineno=1037, end_col_offset=37)]), body=[Expr(value=Constant(value='Populate ``dot_graph`` with styled edges extracted from ``graph``.', lineno=1039, col_offset=4, end_lineno=1039, end_col_offset=76), lineno=1039, col_offset=4, end_lineno=1039, end_col_offset=76), Assign(targets=[Name(id='pydot_module', ctx=Store(), lineno=1040, col_offset=4, end_lineno=1040, end_col_offset=16)], value=Call(func=Name(id='_require_pydot', ctx=Load(), lineno=1040, col_offset=19, end_lineno=1040, end_col_offset=33), lineno=1040, col_offset=19, end_lineno=1040, end_col_offset=35), lineno=1040, col_offset=4, end_lineno=1040, end_col_offset=35), For(target=Tuple(elts=[Name(id='src', ctx=Store(), lineno=1041, col_offset=8, end_lineno=1041, end_col_offset=11), Name(id='dst', ctx=Store(), lineno=1041, col_offset=13, end_lineno=1041, end_col_offset=16), Name(id='_', ctx=Store(), lineno=1041, col_offset=18, end_lineno=1041, end_col_offset=19)], ctx=Store(), lineno=1041, col_offset=8, end_lineno=1041, end_col_offset=19), iter=Call(func=Attribute(value=Name(id='graph', ctx=Load(), lineno=1041, col_offset=23, end_lineno=1041, end_col_offset=28), attr='edges', ctx=Load(), lineno=1041, col_offset=23, end_lineno=1041, end_col_offset=34), keywords=[keyword(arg='data', value=Constant(value=True, lineno=1041, col_offset=40, end_lineno=1041, end_col_offset=44), lineno=1041, col_offset=35, end_lineno=1041, end_col_offset=44)], lineno=1041, col_offset=23, end_lineno=1041, end_col_offset=45), body=[Assign(targets=[Name(id='layer_u', ctx=Store(), lineno=1042, col_offset=8, end_lineno=1042, end_col_offset=15)], value=Call(func=Attribute(value=Name(id='pkg2layer', ctx=Load(), lineno=1042, col_offset=18, end_lineno=1042, end_col_offset=27), attr='get', ctx=Load(), lineno=1042, col_offset=18, end_lineno=1042, end_col_offset=31), args=[Name(id='src', ctx=Load(), lineno=1042, col_offset=32, end_lineno=1042, end_col_offset=35), Constant(value='unknown', lineno=1042, col_offset=37, end_lineno=1042, end_col_offset=46)], lineno=1042, col_offset=18, end_lineno=1042, end_col_offset=47), lineno=1042, col_offset=8, end_lineno=1042, end_col_offset=47), Assign(targets=[Name(id='layer_v', ctx=Store(), lineno=1043, col_offset=8, end_lineno=1043, end_col_offset=15)], value=Call(func=Attribute(value=Name(id='pkg2layer', ctx=Load(), lineno=1043, col_offset=18, end_lineno=1043, end_col_offset=27), attr='get', ctx=Load(), lineno=1043, col_offset=18, end_lineno=1043, end_col_offset=31), args=[Name(id='dst', ctx=Load(), lineno=1043, col_offset=32, end_lineno=1043, end_col_offset=35), Constant(value='unknown', lineno=1043, col_offset=37, end_lineno=1043, end_col_offset=46)], lineno=1043, col_offset=18, end_lineno=1043, end_col_offset=47), lineno=1043, col_offset=8, end_lineno=1043, end_col_offset=47), Assign(targets=[Name(id='in_cycle', ctx=Store(), lineno=1044, col_offset=8, end_lineno=1044, end_col_offset=16)], value=Compare(left=Tuple(elts=[Name(id='src', ctx=Load(), lineno=1044, col_offset=20, end_lineno=1044, end_col_offset=23), Name(id='dst', ctx=Load(), lineno=1044, col_offset=25, end_lineno=1044, end_col_offset=28)], ctx=Load(), lineno=1044, col_offset=19, end_lineno=1044, end_col_offset=29), ops=[In()], comparators=[Name(id='cycle_edges', ctx=Load(), lineno=1044, col_offset=33, end_lineno=1044, end_col_offset=44)], lineno=1044, col_offset=19, end_lineno=1044, end_col_offset=44), lineno=1044, col_offset=8, end_lineno=1044, end_col_offset=44), Assign(targets=[Name(id='edge_color', ctx=Store(), lineno=1045, col_offset=8, end_lineno=1045, end_col_offset=18)], value=IfExp(test=Name(id='in_cycle', ctx=Load(), lineno=1045, col_offset=41, end_lineno=1045, end_col_offset=49), body=Name(id='CYCLE_EDGE_COLOR', ctx=Load(), lineno=1045, col_offset=21, end_lineno=1045, end_col_offset=37), orelse=Name(id='DEFAULT_EDGE_COLOR', ctx=Load(), lineno=1045, col_offset=55, end_lineno=1045, end_col_offset=73), lineno=1045, col_offset=21, end_lineno=1045, end_col_offset=73), lineno=1045, col_offset=8, end_lineno=1045, end_col_offset=73), Assign(targets=[Name(id='penwidth', ctx=Store(), lineno=1046, col_offset=8, end_lineno=1046, end_col_offset=16)], value=IfExp(test=Name(id='in_cycle', ctx=Load(), lineno=1046, col_offset=43, end_lineno=1046, end_col_offset=51), body=Name(id='EDGE_HIGHLIGHT_WIDTH', ctx=Load(), lineno=1046, col_offset=19, end_lineno=1046, end_col_offset=39), orelse=Name(id='EDGE_NORMAL_WIDTH', ctx=Load(), lineno=1046, col_offset=57, end_lineno=1046, end_col_offset=74), lineno=1046, col_offset=19, end_lineno=1046, end_col_offset=74), lineno=1046, col_offset=8, end_lineno=1046, end_col_offset=74), Assign(targets=[Name(id='label', ctx=Store(), lineno=1047, col_offset=8, end_lineno=1047, end_col_offset=13)], value=IfExp(test=Compare(left=Name(id='layer_u', ctx=Load(), lineno=1047, col_offset=44, end_lineno=1047, end_col_offset=51), ops=[NotEq()], comparators=[Name(id='layer_v', ctx=Load(), lineno=1047, col_offset=55, end_lineno=1047, end_col_offset=62)], lineno=1047, col_offset=44, end_lineno=1047, end_col_offset=62), body=JoinedStr(values=[FormattedValue(value=Name(id='layer_u', ctx=Load(), lineno=1047, col_offset=19, end_lineno=1047, end_col_offset=26), conversion=-1, lineno=1047, col_offset=18, end_lineno=1047, end_col_offset=27), Constant(value='', lineno=1047, col_offset=27, end_lineno=1047, end_col_offset=30), FormattedValue(value=Name(id='layer_v', ctx=Load(), lineno=1047, col_offset=31, end_lineno=1047, end_col_offset=38), conversion=-1, lineno=1047, col_offset=30, end_lineno=1047, end_col_offset=39)], lineno=1047, col_offset=16, end_lineno=1047, end_col_offset=40), orelse=Constant(value='', lineno=1047, col_offset=68, end_lineno=1047, end_col_offset=70), lineno=1047, col_offset=16, end_lineno=1047, end_col_offset=70), lineno=1047, col_offset=8, end_lineno=1047, end_col_offset=70), Expr(value=Call(func=Attribute(value=Name(id='dot_graph', ctx=Load(), lineno=1048, col_offset=8, end_lineno=1048, end_col_offset=17), attr='add_edge', ctx=Load(), lineno=1048, col_offset=8, end_lineno=1048, end_col_offset=26), args=[Call(func=Attribute(value=Name(id='pydot_module', ctx=Load(), lineno=1049, col_offset=12, end_lineno=1049, end_col_offset=24), attr='Edge', ctx=Load(), lineno=1049, col_offset=12, end_lineno=1049, end_col_offset=29), args=[Name(id='src', ctx=Load(), lineno=1050, col_offset=16, end_lineno=1050, end_col_offset=19), Name(id='dst', ctx=Load(), lineno=1050, col_offset=21, end_lineno=1050, end_col_offset=24)], keywords=[keyword(arg='color', value=Name(id='edge_color', ctx=Load(), lineno=1050, col_offset=32, end_lineno=1050, end_col_offset=42), lineno=1050, col_offset=26, end_lineno=1050, end_col_offset=42), keyword(arg='penwidth', value=Name(id='penwidth', ctx=Load(), lineno=1050, col_offset=53, end_lineno=1050, end_col_offset=61), lineno=1050, col_offset=44, end_lineno=1050, end_col_offset=61), keyword(arg='fontsize', value=Constant(value='8', lineno=1050, col_offset=72, end_lineno=1050, end_col_offset=75), lineno=1050, col_offset=63, end_lineno=1050, end_col_offset=75), keyword(arg='label', value=Name(id='label', ctx=Load(), lineno=1050, col_offset=83, end_lineno=1050, end_col_offset=88), lineno=1050, col_offset=77, end_lineno=1050, end_col_offset=88)], lineno=1049, col_offset=12, end_lineno=1051, end_col_offset=13)], lineno=1048, col_offset=8, end_lineno=1052, end_col_offset=9), lineno=1048, col_offset=8, end_lineno=1052, end_col_offset=9)], lineno=1041, col_offset=4, end_lineno=1052, end_col_offset=9)], returns=Constant(value=None, lineno=1038, col_offset=5, end_lineno=1038, end_col_offset=9), lineno=1033, col_offset=0, end_lineno=1052, end_col_offset=9), FunctionDef(name='_rank_map', args=arguments(args=[arg(arg='order', annotation=Subscript(value=Name(id='Sequence', ctx=Load(), lineno=1055, col_offset=21, end_lineno=1055, end_col_offset=29), slice=Name(id='str', ctx=Load(), lineno=1055, col_offset=30, end_lineno=1055, end_col_offset=33), ctx=Load(), lineno=1055, col_offset=21, end_lineno=1055, end_col_offset=34), lineno=1055, col_offset=14, end_lineno=1055, end_col_offset=34)]), body=[Expr(value=Constant(value='Rank map.\n\n    Parameters\n    ----------\n    order : Sequence[str]\n        Layer names in order.\n\n    Returns\n    -------\n    dict[str, int]\n        Mapping of layer name to rank (0-indexed).\n    ', lineno=1056, col_offset=4, end_lineno=1067, end_col_offset=7), lineno=1056, col_offset=4, end_lineno=1067, end_col_offset=7), Return(value=DictComp(key=Name(id='name', ctx=Load(), lineno=1068, col_offset=12, end_lineno=1068, end_col_offset=16), value=Name(id='idx', ctx=Load(), lineno=1068, col_offset=18, end_lineno=1068, end_col_offset=21), generators=[comprehension(target=Tuple(elts=[Name(id='idx', ctx=Store(), lineno=1068, col_offset=26, end_lineno=1068, end_col_offset=29), Name(id='name', ctx=Store(), lineno=1068, col_offset=31, end_lineno=1068, end_col_offset=35)], ctx=Store(), lineno=1068, col_offset=26, end_lineno=1068, end_col_offset=35), iter=Call(func=Name(id='enumerate', ctx=Load(), lineno=1068, col_offset=39, end_lineno=1068, end_col_offset=48), args=[Name(id='order', ctx=Load(), lineno=1068, col_offset=49, end_lineno=1068, end_col_offset=54)], lineno=1068, col_offset=39, end_lineno=1068, end_col_offset=55), is_async=0)], lineno=1068, col_offset=11, end_lineno=1068, end_col_offset=56), lineno=1068, col_offset=4, end_lineno=1068, end_col_offset=56)], returns=Subscript(value=Name(id='dict', ctx=Load(), lineno=1055, col_offset=39, end_lineno=1055, end_col_offset=43), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=1055, col_offset=44, end_lineno=1055, end_col_offset=47), Name(id='int', ctx=Load(), lineno=1055, col_offset=49, end_lineno=1055, end_col_offset=52)], ctx=Load(), lineno=1055, col_offset=44, end_lineno=1055, end_col_offset=52), ctx=Load(), lineno=1055, col_offset=39, end_lineno=1055, end_col_offset=53), lineno=1055, col_offset=0, end_lineno=1068, end_col_offset=56), FunctionDef(name='_prune_outward_edges', args=arguments(args=[arg(arg='graph', annotation=Name(id='DiGraph', ctx=Load(), lineno=1072, col_offset=11, end_lineno=1072, end_col_offset=18), lineno=1072, col_offset=4, end_lineno=1072, end_col_offset=18), arg(arg='pkg2layer', annotation=Subscript(value=Name(id='Mapping', ctx=Load(), lineno=1073, col_offset=15, end_lineno=1073, end_col_offset=22), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=1073, col_offset=23, end_lineno=1073, end_col_offset=26), Name(id='str', ctx=Load(), lineno=1073, col_offset=28, end_lineno=1073, end_col_offset=31)], ctx=Load(), lineno=1073, col_offset=23, end_lineno=1073, end_col_offset=31), ctx=Load(), lineno=1073, col_offset=15, end_lineno=1073, end_col_offset=32), lineno=1073, col_offset=4, end_lineno=1073, end_col_offset=32), arg(arg='layer_rank', annotation=Subscript(value=Name(id='Mapping', ctx=Load(), lineno=1074, col_offset=16, end_lineno=1074, end_col_offset=23), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=1074, col_offset=24, end_lineno=1074, end_col_offset=27), Name(id='int', ctx=Load(), lineno=1074, col_offset=29, end_lineno=1074, end_col_offset=32)], ctx=Load(), lineno=1074, col_offset=24, end_lineno=1074, end_col_offset=32), ctx=Load(), lineno=1074, col_offset=16, end_lineno=1074, end_col_offset=33), lineno=1074, col_offset=4, end_lineno=1074, end_col_offset=33)], kwonlyargs=[arg(arg='allow_outward', annotation=Name(id='bool', ctx=Load(), lineno=1076, col_offset=19, end_lineno=1076, end_col_offset=23), lineno=1076, col_offset=4, end_lineno=1076, end_col_offset=23)], kw_defaults=[None]), body=[Expr(value=Constant(value='Prune outward edges.\n\n    Parameters\n    ----------\n    graph : DiGraph\n        Graph to prune.\n    pkg2layer : Mapping[str, str]\n        Package to layer mapping.\n    layer_rank : Mapping[str, int]\n        Layer rank mapping.\n    allow_outward : bool\n        Whether to allow outward edges.\n\n    Returns\n    -------\n    DiGraph\n        Pruned graph.\n    ', lineno=1078, col_offset=4, end_lineno=1095, end_col_offset=7), lineno=1078, col_offset=4, end_lineno=1095, end_col_offset=7), If(test=Name(id='allow_outward', ctx=Load(), lineno=1096, col_offset=7, end_lineno=1096, end_col_offset=20), body=[Return(value=Call(func=Attribute(value=Name(id='graph', ctx=Load(), lineno=1097, col_offset=15, end_lineno=1097, end_col_offset=20), attr='copy', ctx=Load(), lineno=1097, col_offset=15, end_lineno=1097, end_col_offset=25), lineno=1097, col_offset=15, end_lineno=1097, end_col_offset=27), lineno=1097, col_offset=8, end_lineno=1097, end_col_offset=27)], lineno=1096, col_offset=4, end_lineno=1097, end_col_offset=27), Assign(targets=[Name(id='pruned', ctx=Store(), lineno=1098, col_offset=4, end_lineno=1098, end_col_offset=10)], value=Call(func=Attribute(value=Name(id='graph', ctx=Load(), lineno=1098, col_offset=13, end_lineno=1098, end_col_offset=18), attr='copy', ctx=Load(), lineno=1098, col_offset=13, end_lineno=1098, end_col_offset=23), lineno=1098, col_offset=13, end_lineno=1098, end_col_offset=25), lineno=1098, col_offset=4, end_lineno=1098, end_col_offset=25), Assign(targets=[Name(id='edges_to_remove', ctx=Store(), lineno=1099, col_offset=4, end_lineno=1099, end_col_offset=19)], value=List(ctx=Load(), lineno=1099, col_offset=22, end_lineno=1099, end_col_offset=24), lineno=1099, col_offset=4, end_lineno=1099, end_col_offset=24), For(target=Tuple(elts=[Name(id='src', ctx=Store(), lineno=1100, col_offset=8, end_lineno=1100, end_col_offset=11), Name(id='dst', ctx=Store(), lineno=1100, col_offset=13, end_lineno=1100, end_col_offset=16)], ctx=Store(), lineno=1100, col_offset=8, end_lineno=1100, end_col_offset=16), iter=Call(func=Attribute(value=Name(id='graph', ctx=Load(), lineno=1100, col_offset=20, end_lineno=1100, end_col_offset=25), attr='edges', ctx=Load(), lineno=1100, col_offset=20, end_lineno=1100, end_col_offset=31), lineno=1100, col_offset=20, end_lineno=1100, end_col_offset=33), body=[Assign(targets=[Name(id='src_layer', ctx=Store(), lineno=1101, col_offset=8, end_lineno=1101, end_col_offset=17)], value=Call(func=Attribute(value=Name(id='pkg2layer', ctx=Load(), lineno=1101, col_offset=20, end_lineno=1101, end_col_offset=29), attr='get', ctx=Load(), lineno=1101, col_offset=20, end_lineno=1101, end_col_offset=33), args=[Name(id='src', ctx=Load(), lineno=1101, col_offset=34, end_lineno=1101, end_col_offset=37)], lineno=1101, col_offset=20, end_lineno=1101, end_col_offset=38), lineno=1101, col_offset=8, end_lineno=1101, end_col_offset=38), Assign(targets=[Name(id='dst_layer', ctx=Store(), lineno=1102, col_offset=8, end_lineno=1102, end_col_offset=17)], value=Call(func=Attribute(value=Name(id='pkg2layer', ctx=Load(), lineno=1102, col_offset=20, end_lineno=1102, end_col_offset=29), attr='get', ctx=Load(), lineno=1102, col_offset=20, end_lineno=1102, end_col_offset=33), args=[Name(id='dst', ctx=Load(), lineno=1102, col_offset=34, end_lineno=1102, end_col_offset=37)], lineno=1102, col_offset=20, end_lineno=1102, end_col_offset=38), lineno=1102, col_offset=8, end_lineno=1102, end_col_offset=38), If(test=BoolOp(op=And(), values=[Compare(left=Name(id='src_layer', ctx=Load(), lineno=1104, col_offset=12, end_lineno=1104, end_col_offset=21), ops=[IsNot()], comparators=[Constant(value=None, lineno=1104, col_offset=29, end_lineno=1104, end_col_offset=33)], lineno=1104, col_offset=12, end_lineno=1104, end_col_offset=33), Compare(left=Name(id='dst_layer', ctx=Load(), lineno=1105, col_offset=16, end_lineno=1105, end_col_offset=25), ops=[IsNot()], comparators=[Constant(value=None, lineno=1105, col_offset=33, end_lineno=1105, end_col_offset=37)], lineno=1105, col_offset=16, end_lineno=1105, end_col_offset=37), Compare(left=Name(id='src_layer', ctx=Load(), lineno=1106, col_offset=16, end_lineno=1106, end_col_offset=25), ops=[In()], comparators=[Name(id='layer_rank', ctx=Load(), lineno=1106, col_offset=29, end_lineno=1106, end_col_offset=39)], lineno=1106, col_offset=16, end_lineno=1106, end_col_offset=39), Compare(left=Name(id='dst_layer', ctx=Load(), lineno=1107, col_offset=16, end_lineno=1107, end_col_offset=25), ops=[In()], comparators=[Name(id='layer_rank', ctx=Load(), lineno=1107, col_offset=29, end_lineno=1107, end_col_offset=39)], lineno=1107, col_offset=16, end_lineno=1107, end_col_offset=39), Compare(left=Subscript(value=Name(id='layer_rank', ctx=Load(), lineno=1108, col_offset=16, end_lineno=1108, end_col_offset=26), slice=Name(id='dst_layer', ctx=Load(), lineno=1108, col_offset=27, end_lineno=1108, end_col_offset=36), ctx=Load(), lineno=1108, col_offset=16, end_lineno=1108, end_col_offset=37), ops=[Gt()], comparators=[Subscript(value=Name(id='layer_rank', ctx=Load(), lineno=1108, col_offset=40, end_lineno=1108, end_col_offset=50), slice=Name(id='src_layer', ctx=Load(), lineno=1108, col_offset=51, end_lineno=1108, end_col_offset=60), ctx=Load(), lineno=1108, col_offset=40, end_lineno=1108, end_col_offset=61)], lineno=1108, col_offset=16, end_lineno=1108, end_col_offset=61)], lineno=1104, col_offset=12, end_lineno=1108, end_col_offset=61), body=[Expr(value=Call(func=Attribute(value=Name(id='edges_to_remove', ctx=Load(), lineno=1110, col_offset=12, end_lineno=1110, end_col_offset=27), attr='append', ctx=Load(), lineno=1110, col_offset=12, end_lineno=1110, end_col_offset=34), args=[Tuple(elts=[Name(id='src', ctx=Load(), lineno=1110, col_offset=36, end_lineno=1110, end_col_offset=39), Name(id='dst', ctx=Load(), lineno=1110, col_offset=41, end_lineno=1110, end_col_offset=44)], ctx=Load(), lineno=1110, col_offset=35, end_lineno=1110, end_col_offset=45)], lineno=1110, col_offset=12, end_lineno=1110, end_col_offset=46), lineno=1110, col_offset=12, end_lineno=1110, end_col_offset=46)], lineno=1103, col_offset=8, end_lineno=1110, end_col_offset=46)], lineno=1100, col_offset=4, end_lineno=1110, end_col_offset=46), If(test=Name(id='edges_to_remove', ctx=Load(), lineno=1111, col_offset=7, end_lineno=1111, end_col_offset=22), body=[Expr(value=Call(func=Attribute(value=Name(id='pruned', ctx=Load(), lineno=1112, col_offset=8, end_lineno=1112, end_col_offset=14), attr='remove_edges_from', ctx=Load(), lineno=1112, col_offset=8, end_lineno=1112, end_col_offset=32), args=[Name(id='edges_to_remove', ctx=Load(), lineno=1112, col_offset=33, end_lineno=1112, end_col_offset=48)], lineno=1112, col_offset=8, end_lineno=1112, end_col_offset=49), lineno=1112, col_offset=8, end_lineno=1112, end_col_offset=49)], lineno=1111, col_offset=4, end_lineno=1112, end_col_offset=49), Return(value=Name(id='pruned', ctx=Load(), lineno=1113, col_offset=11, end_lineno=1113, end_col_offset=17), lineno=1113, col_offset=4, end_lineno=1113, end_col_offset=17)], returns=Name(id='DiGraph', ctx=Load(), lineno=1077, col_offset=5, end_lineno=1077, end_col_offset=12), lineno=1071, col_offset=0, end_lineno=1113, end_col_offset=17), FunctionDef(name='_cycle_generator', args=arguments(args=[arg(arg='graph', annotation=Name(id='DiGraph', ctx=Load(), lineno=1116, col_offset=28, end_lineno=1116, end_col_offset=35), lineno=1116, col_offset=21, end_lineno=1116, end_col_offset=35), arg(arg='length_bound', annotation=Name(id='int', ctx=Load(), lineno=1116, col_offset=51, end_lineno=1116, end_col_offset=54), lineno=1116, col_offset=37, end_lineno=1116, end_col_offset=54)]), body=[Expr(value=Constant(value='Cycle generator.\n\n    Parameters\n    ----------\n    graph : DiGraph\n        Graph to enumerate cycles in.\n    length_bound : int\n        Maximum cycle length (0 for no bound).\n\n    Returns\n    -------\n    Iterator[list[str]]\n        Iterator over cycle node lists.\n    ', lineno=1117, col_offset=4, end_lineno=1130, end_col_offset=7), lineno=1117, col_offset=4, end_lineno=1130, end_col_offset=7), If(test=Compare(left=Name(id='nx', ctx=Load(), lineno=1131, col_offset=7, end_lineno=1131, end_col_offset=9), ops=[Is()], comparators=[Constant(value=None, lineno=1131, col_offset=13, end_lineno=1131, end_col_offset=17)], lineno=1131, col_offset=7, end_lineno=1131, end_col_offset=17), body=[Return(value=Call(func=Name(id='iter', ctx=Load(), lineno=1132, col_offset=15, end_lineno=1132, end_col_offset=19), args=[Tuple(ctx=Load(), lineno=1132, col_offset=20, end_lineno=1132, end_col_offset=22)], lineno=1132, col_offset=15, end_lineno=1132, end_col_offset=23), lineno=1132, col_offset=8, end_lineno=1132, end_col_offset=23)], lineno=1131, col_offset=4, end_lineno=1132, end_col_offset=23), If(test=Compare(left=Name(id='length_bound', ctx=Load(), lineno=1133, col_offset=7, end_lineno=1133, end_col_offset=19), ops=[Gt()], comparators=[Constant(value=0, lineno=1133, col_offset=22, end_lineno=1133, end_col_offset=23)], lineno=1133, col_offset=7, end_lineno=1133, end_col_offset=23), body=[Try(body=[Return(value=Call(func=Name(id='cast', ctx=Load(), lineno=1135, col_offset=19, end_lineno=1135, end_col_offset=23), args=[Constant(value='Iterator[list[str]]', lineno=1136, col_offset=16, end_lineno=1136, end_col_offset=37), Call(func=Attribute(value=Name(id='nx', ctx=Load(), lineno=1137, col_offset=16, end_lineno=1137, end_col_offset=18), attr='simple_cycles', ctx=Load(), lineno=1137, col_offset=16, end_lineno=1137, end_col_offset=32), args=[Name(id='graph', ctx=Load(), lineno=1137, col_offset=33, end_lineno=1137, end_col_offset=38)], keywords=[keyword(arg='length_bound', value=Name(id='length_bound', ctx=Load(), lineno=1137, col_offset=53, end_lineno=1137, end_col_offset=65), lineno=1137, col_offset=40, end_lineno=1137, end_col_offset=65)], lineno=1137, col_offset=16, end_lineno=1137, end_col_offset=66)], lineno=1135, col_offset=19, end_lineno=1138, end_col_offset=13), lineno=1135, col_offset=12, end_lineno=1138, end_col_offset=13)], handlers=[ExceptHandler(type=Name(id='TypeError', ctx=Load(), lineno=1139, col_offset=15, end_lineno=1139, end_col_offset=24), body=[Pass(lineno=1140, col_offset=12, end_lineno=1140, end_col_offset=16)], lineno=1139, col_offset=8, end_lineno=1140, end_col_offset=16)], lineno=1134, col_offset=8, end_lineno=1140, end_col_offset=16)], lineno=1133, col_offset=4, end_lineno=1140, end_col_offset=16), Return(value=Call(func=Name(id='cast', ctx=Load(), lineno=1141, col_offset=11, end_lineno=1141, end_col_offset=15), args=[Constant(value='Iterator[list[str]]', lineno=1141, col_offset=16, end_lineno=1141, end_col_offset=37), Call(func=Attribute(value=Name(id='nx', ctx=Load(), lineno=1141, col_offset=39, end_lineno=1141, end_col_offset=41), attr='simple_cycles', ctx=Load(), lineno=1141, col_offset=39, end_lineno=1141, end_col_offset=55), args=[Name(id='graph', ctx=Load(), lineno=1141, col_offset=56, end_lineno=1141, end_col_offset=61)], lineno=1141, col_offset=39, end_lineno=1141, end_col_offset=62)], lineno=1141, col_offset=11, end_lineno=1141, end_col_offset=63), lineno=1141, col_offset=4, end_lineno=1141, end_col_offset=63)], returns=Subscript(value=Name(id='Iterator', ctx=Load(), lineno=1116, col_offset=59, end_lineno=1116, end_col_offset=67), slice=Subscript(value=Name(id='list', ctx=Load(), lineno=1116, col_offset=68, end_lineno=1116, end_col_offset=72), slice=Name(id='str', ctx=Load(), lineno=1116, col_offset=73, end_lineno=1116, end_col_offset=76), ctx=Load(), lineno=1116, col_offset=68, end_lineno=1116, end_col_offset=77), ctx=Load(), lineno=1116, col_offset=59, end_lineno=1116, end_col_offset=78), lineno=1116, col_offset=0, end_lineno=1141, end_col_offset=63), FunctionDef(name='_enumerate_cycles', args=arguments(args=[arg(arg='pruned_graph', annotation=Name(id='DiGraph', ctx=Load(), lineno=1145, col_offset=18, end_lineno=1145, end_col_offset=25), lineno=1145, col_offset=4, end_lineno=1145, end_col_offset=25), arg(arg='cycle_limit', annotation=Name(id='int', ctx=Load(), lineno=1146, col_offset=17, end_lineno=1146, end_col_offset=20), lineno=1146, col_offset=4, end_lineno=1146, end_col_offset=20), arg(arg='length_bound', annotation=Name(id='int', ctx=Load(), lineno=1147, col_offset=18, end_lineno=1147, end_col_offset=21), lineno=1147, col_offset=4, end_lineno=1147, end_col_offset=21), arg(arg='edge_budget', annotation=Name(id='int', ctx=Load(), lineno=1148, col_offset=17, end_lineno=1148, end_col_offset=20), lineno=1148, col_offset=4, end_lineno=1148, end_col_offset=20), arg(arg='scc_graph', annotation=Name(id='DiGraph', ctx=Load(), lineno=1149, col_offset=15, end_lineno=1149, end_col_offset=22), lineno=1149, col_offset=4, end_lineno=1149, end_col_offset=22)]), body=[Expr(value=Constant(value='Enumerate cycles.\n\n    Parameters\n    ----------\n    pruned_graph : DiGraph\n        Pruned graph to enumerate cycles in.\n    cycle_limit : int\n        Maximum number of cycles to enumerate (0 for unlimited).\n    length_bound : int\n        Maximum cycle length (0 for no bound).\n    edge_budget : int\n        Maximum edges before skipping enumeration.\n    scc_graph : DiGraph\n        Strongly connected components graph.\n\n    Returns\n    -------\n    tuple[CycleList, bool, list[dict[str, object]]]\n        (cycles, skipped, scc_summary) tuple.\n    ', lineno=1151, col_offset=4, end_lineno=1170, end_col_offset=7), lineno=1151, col_offset=4, end_lineno=1170, end_col_offset=7), Assign(targets=[Name(id='generator', ctx=Store(), lineno=1171, col_offset=4, end_lineno=1171, end_col_offset=13)], value=Call(func=Name(id='_cycle_generator', ctx=Load(), lineno=1171, col_offset=16, end_lineno=1171, end_col_offset=32), args=[Name(id='pruned_graph', ctx=Load(), lineno=1171, col_offset=33, end_lineno=1171, end_col_offset=45), Name(id='length_bound', ctx=Load(), lineno=1171, col_offset=47, end_lineno=1171, end_col_offset=59)], lineno=1171, col_offset=16, end_lineno=1171, end_col_offset=60), lineno=1171, col_offset=4, end_lineno=1171, end_col_offset=60), If(test=Compare(left=Name(id='cycle_limit', ctx=Load(), lineno=1172, col_offset=7, end_lineno=1172, end_col_offset=18), ops=[Gt()], comparators=[Constant(value=0, lineno=1172, col_offset=21, end_lineno=1172, end_col_offset=22)], lineno=1172, col_offset=7, end_lineno=1172, end_col_offset=22), body=[AnnAssign(target=Name(id='cycles', ctx=Store(), lineno=1173, col_offset=8, end_lineno=1173, end_col_offset=14), annotation=Name(id='CycleList', ctx=Load(), lineno=1173, col_offset=16, end_lineno=1173, end_col_offset=25), value=List(ctx=Load(), lineno=1173, col_offset=28, end_lineno=1173, end_col_offset=30), simple=1, lineno=1173, col_offset=8, end_lineno=1173, end_col_offset=30), For(target=Tuple(elts=[Name(id='idx', ctx=Store(), lineno=1174, col_offset=12, end_lineno=1174, end_col_offset=15), Name(id='cycle', ctx=Store(), lineno=1174, col_offset=17, end_lineno=1174, end_col_offset=22)], ctx=Store(), lineno=1174, col_offset=12, end_lineno=1174, end_col_offset=22), iter=Call(func=Name(id='enumerate', ctx=Load(), lineno=1174, col_offset=26, end_lineno=1174, end_col_offset=35), args=[Name(id='generator', ctx=Load(), lineno=1174, col_offset=36, end_lineno=1174, end_col_offset=45), Constant(value=1, lineno=1174, col_offset=47, end_lineno=1174, end_col_offset=48)], lineno=1174, col_offset=26, end_lineno=1174, end_col_offset=49), body=[Expr(value=Call(func=Attribute(value=Name(id='cycles', ctx=Load(), lineno=1175, col_offset=12, end_lineno=1175, end_col_offset=18), attr='append', ctx=Load(), lineno=1175, col_offset=12, end_lineno=1175, end_col_offset=25), args=[Name(id='cycle', ctx=Load(), lineno=1175, col_offset=26, end_lineno=1175, end_col_offset=31)], lineno=1175, col_offset=12, end_lineno=1175, end_col_offset=32), lineno=1175, col_offset=12, end_lineno=1175, end_col_offset=32), If(test=Compare(left=Name(id='idx', ctx=Load(), lineno=1176, col_offset=15, end_lineno=1176, end_col_offset=18), ops=[GtE()], comparators=[Name(id='cycle_limit', ctx=Load(), lineno=1176, col_offset=22, end_lineno=1176, end_col_offset=33)], lineno=1176, col_offset=15, end_lineno=1176, end_col_offset=33), body=[Break(lineno=1177, col_offset=16, end_lineno=1177, end_col_offset=21)], lineno=1176, col_offset=12, end_lineno=1177, end_col_offset=21)], lineno=1174, col_offset=8, end_lineno=1177, end_col_offset=21), Return(value=Tuple(elts=[Name(id='cycles', ctx=Load(), lineno=1178, col_offset=15, end_lineno=1178, end_col_offset=21), Constant(value=False, lineno=1178, col_offset=23, end_lineno=1178, end_col_offset=28), List(ctx=Load(), lineno=1178, col_offset=30, end_lineno=1178, end_col_offset=32)], ctx=Load(), lineno=1178, col_offset=15, end_lineno=1178, end_col_offset=32), lineno=1178, col_offset=8, end_lineno=1178, end_col_offset=32)], lineno=1172, col_offset=4, end_lineno=1178, end_col_offset=32), If(test=Compare(left=Call(func=Attribute(value=Name(id='pruned_graph', ctx=Load(), lineno=1180, col_offset=7, end_lineno=1180, end_col_offset=19), attr='number_of_edges', ctx=Load(), lineno=1180, col_offset=7, end_lineno=1180, end_col_offset=35), lineno=1180, col_offset=7, end_lineno=1180, end_col_offset=37), ops=[Gt()], comparators=[Name(id='edge_budget', ctx=Load(), lineno=1180, col_offset=40, end_lineno=1180, end_col_offset=51)], lineno=1180, col_offset=7, end_lineno=1180, end_col_offset=51), body=[If(test=Compare(left=Name(id='nx', ctx=Load(), lineno=1181, col_offset=11, end_lineno=1181, end_col_offset=13), ops=[Is()], comparators=[Constant(value=None, lineno=1181, col_offset=17, end_lineno=1181, end_col_offset=21)], lineno=1181, col_offset=11, end_lineno=1181, end_col_offset=21), body=[Return(value=Tuple(elts=[List(ctx=Load(), lineno=1183, col_offset=16, end_lineno=1183, end_col_offset=18), Constant(value=True, lineno=1184, col_offset=16, end_lineno=1184, end_col_offset=20), List(elts=[Dict(keys=[Constant(value='members', lineno=1187, col_offset=24, end_lineno=1187, end_col_offset=33), Constant(value='size', lineno=1188, col_offset=24, end_lineno=1188, end_col_offset=30), Constant(value='truncated', lineno=1189, col_offset=24, end_lineno=1189, end_col_offset=35), Constant(value='has_cycle', lineno=1190, col_offset=24, end_lineno=1190, end_col_offset=35)], values=[List(ctx=Load(), lineno=1187, col_offset=35, end_lineno=1187, end_col_offset=37), Constant(value=0, lineno=1188, col_offset=32, end_lineno=1188, end_col_offset=33), Constant(value=False, lineno=1189, col_offset=37, end_lineno=1189, end_col_offset=42), Constant(value=False, lineno=1190, col_offset=37, end_lineno=1190, end_col_offset=42)], lineno=1186, col_offset=20, end_lineno=1191, end_col_offset=21)], ctx=Load(), lineno=1185, col_offset=16, end_lineno=1192, end_col_offset=17)], ctx=Load(), lineno=1182, col_offset=19, end_lineno=1193, end_col_offset=13), lineno=1182, col_offset=12, end_lineno=1193, end_col_offset=13)], lineno=1181, col_offset=8, end_lineno=1193, end_col_offset=13), Assign(targets=[Name(id='components', ctx=Store(), lineno=1194, col_offset=8, end_lineno=1194, end_col_offset=18)], value=Call(func=Name(id='sorted', ctx=Load(), lineno=1194, col_offset=21, end_lineno=1194, end_col_offset=27), args=[GeneratorExp(elt=Call(func=Name(id='sorted', ctx=Load(), lineno=1195, col_offset=13, end_lineno=1195, end_col_offset=19), args=[Name(id='component', ctx=Load(), lineno=1195, col_offset=20, end_lineno=1195, end_col_offset=29)], lineno=1195, col_offset=13, end_lineno=1195, end_col_offset=30), generators=[comprehension(target=Name(id='component', ctx=Store(), lineno=1195, col_offset=35, end_lineno=1195, end_col_offset=44), iter=Call(func=Attribute(value=Name(id='nx', ctx=Load(), lineno=1195, col_offset=48, end_lineno=1195, end_col_offset=50), attr='strongly_connected_components', ctx=Load(), lineno=1195, col_offset=48, end_lineno=1195, end_col_offset=80), args=[Name(id='scc_graph', ctx=Load(), lineno=1195, col_offset=81, end_lineno=1195, end_col_offset=90)], lineno=1195, col_offset=48, end_lineno=1195, end_col_offset=91), is_async=0)], lineno=1195, col_offset=12, end_lineno=1195, end_col_offset=92)], keywords=[keyword(arg='key', value=Name(id='len', ctx=Load(), lineno=1196, col_offset=16, end_lineno=1196, end_col_offset=19), lineno=1196, col_offset=12, end_lineno=1196, end_col_offset=19), keyword(arg='reverse', value=Constant(value=True, lineno=1197, col_offset=20, end_lineno=1197, end_col_offset=24), lineno=1197, col_offset=12, end_lineno=1197, end_col_offset=24)], lineno=1194, col_offset=21, end_lineno=1198, end_col_offset=9), lineno=1194, col_offset=8, end_lineno=1198, end_col_offset=9), AnnAssign(target=Name(id='summary', ctx=Store(), lineno=1199, col_offset=8, end_lineno=1199, end_col_offset=15), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=1199, col_offset=17, end_lineno=1199, end_col_offset=21), slice=Subscript(value=Name(id='dict', ctx=Load(), lineno=1199, col_offset=22, end_lineno=1199, end_col_offset=26), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=1199, col_offset=27, end_lineno=1199, end_col_offset=30), Name(id='object', ctx=Load(), lineno=1199, col_offset=32, end_lineno=1199, end_col_offset=38)], ctx=Load(), lineno=1199, col_offset=27, end_lineno=1199, end_col_offset=38), ctx=Load(), lineno=1199, col_offset=22, end_lineno=1199, end_col_offset=39), ctx=Load(), lineno=1199, col_offset=17, end_lineno=1199, end_col_offset=40), value=List(ctx=Load(), lineno=1199, col_offset=43, end_lineno=1199, end_col_offset=45), simple=1, lineno=1199, col_offset=8, end_lineno=1199, end_col_offset=45), For(target=Name(id='members', ctx=Store(), lineno=1200, col_offset=12, end_lineno=1200, end_col_offset=19), iter=Subscript(value=Name(id='components', ctx=Load(), lineno=1200, col_offset=23, end_lineno=1200, end_col_offset=33), slice=Slice(upper=Name(id='SCC_SUMMARY_LIMIT', ctx=Load(), lineno=1200, col_offset=35, end_lineno=1200, end_col_offset=52), lineno=1200, col_offset=34, end_lineno=1200, end_col_offset=52), ctx=Load(), lineno=1200, col_offset=23, end_lineno=1200, end_col_offset=53), body=[Assign(targets=[Name(id='truncated', ctx=Store(), lineno=1201, col_offset=12, end_lineno=1201, end_col_offset=21)], value=Compare(left=Call(func=Name(id='len', ctx=Load(), lineno=1201, col_offset=24, end_lineno=1201, end_col_offset=27), args=[Name(id='members', ctx=Load(), lineno=1201, col_offset=28, end_lineno=1201, end_col_offset=35)], lineno=1201, col_offset=24, end_lineno=1201, end_col_offset=36), ops=[Gt()], comparators=[Name(id='SCC_MEMBER_PREVIEW', ctx=Load(), lineno=1201, col_offset=39, end_lineno=1201, end_col_offset=57)], lineno=1201, col_offset=24, end_lineno=1201, end_col_offset=57), lineno=1201, col_offset=12, end_lineno=1201, end_col_offset=57), Assign(targets=[Name(id='preview', ctx=Store(), lineno=1202, col_offset=12, end_lineno=1202, end_col_offset=19)], value=IfExp(test=UnaryOp(op=Not(), operand=Name(id='truncated', ctx=Load(), lineno=1202, col_offset=37, end_lineno=1202, end_col_offset=46), lineno=1202, col_offset=33, end_lineno=1202, end_col_offset=46), body=Name(id='members', ctx=Load(), lineno=1202, col_offset=22, end_lineno=1202, end_col_offset=29), orelse=List(elts=[Starred(value=Subscript(value=Name(id='members', ctx=Load(), lineno=1202, col_offset=54, end_lineno=1202, end_col_offset=61), slice=Slice(upper=Name(id='SCC_MEMBER_PREVIEW', ctx=Load(), lineno=1202, col_offset=63, end_lineno=1202, end_col_offset=81), lineno=1202, col_offset=62, end_lineno=1202, end_col_offset=81), ctx=Load(), lineno=1202, col_offset=54, end_lineno=1202, end_col_offset=82), ctx=Load(), lineno=1202, col_offset=53, end_lineno=1202, end_col_offset=82), Constant(value='...', lineno=1202, col_offset=84, end_lineno=1202, end_col_offset=89)], ctx=Load(), lineno=1202, col_offset=52, end_lineno=1202, end_col_offset=90), lineno=1202, col_offset=22, end_lineno=1202, end_col_offset=90), lineno=1202, col_offset=12, end_lineno=1202, end_col_offset=90), Expr(value=Call(func=Attribute(value=Name(id='summary', ctx=Load(), lineno=1203, col_offset=12, end_lineno=1203, end_col_offset=19), attr='append', ctx=Load(), lineno=1203, col_offset=12, end_lineno=1203, end_col_offset=26), args=[Dict(keys=[Constant(value='members', lineno=1205, col_offset=20, end_lineno=1205, end_col_offset=29), Constant(value='size', lineno=1206, col_offset=20, end_lineno=1206, end_col_offset=26), Constant(value='truncated', lineno=1207, col_offset=20, end_lineno=1207, end_col_offset=31), Constant(value='has_cycle', lineno=1208, col_offset=20, end_lineno=1208, end_col_offset=31)], values=[Name(id='preview', ctx=Load(), lineno=1205, col_offset=31, end_lineno=1205, end_col_offset=38), Call(func=Name(id='len', ctx=Load(), lineno=1206, col_offset=28, end_lineno=1206, end_col_offset=31), args=[Name(id='members', ctx=Load(), lineno=1206, col_offset=32, end_lineno=1206, end_col_offset=39)], lineno=1206, col_offset=28, end_lineno=1206, end_col_offset=40), Name(id='truncated', ctx=Load(), lineno=1207, col_offset=33, end_lineno=1207, end_col_offset=42), Compare(left=Call(func=Name(id='len', ctx=Load(), lineno=1208, col_offset=33, end_lineno=1208, end_col_offset=36), args=[Name(id='members', ctx=Load(), lineno=1208, col_offset=37, end_lineno=1208, end_col_offset=44)], lineno=1208, col_offset=33, end_lineno=1208, end_col_offset=45), ops=[Gt()], comparators=[Constant(value=1, lineno=1208, col_offset=48, end_lineno=1208, end_col_offset=49)], lineno=1208, col_offset=33, end_lineno=1208, end_col_offset=49)], lineno=1204, col_offset=16, end_lineno=1209, end_col_offset=17)], lineno=1203, col_offset=12, end_lineno=1210, end_col_offset=13), lineno=1203, col_offset=12, end_lineno=1210, end_col_offset=13)], lineno=1200, col_offset=8, end_lineno=1210, end_col_offset=13), If(test=UnaryOp(op=Not(), operand=Name(id='summary', ctx=Load(), lineno=1211, col_offset=15, end_lineno=1211, end_col_offset=22), lineno=1211, col_offset=11, end_lineno=1211, end_col_offset=22), body=[Expr(value=Call(func=Attribute(value=Name(id='summary', ctx=Load(), lineno=1212, col_offset=12, end_lineno=1212, end_col_offset=19), attr='append', ctx=Load(), lineno=1212, col_offset=12, end_lineno=1212, end_col_offset=26), args=[Dict(keys=[Constant(value='members', lineno=1214, col_offset=20, end_lineno=1214, end_col_offset=29), Constant(value='size', lineno=1215, col_offset=20, end_lineno=1215, end_col_offset=26), Constant(value='truncated', lineno=1216, col_offset=20, end_lineno=1216, end_col_offset=31), Constant(value='has_cycle', lineno=1217, col_offset=20, end_lineno=1217, end_col_offset=31)], values=[List(ctx=Load(), lineno=1214, col_offset=31, end_lineno=1214, end_col_offset=33), Constant(value=0, lineno=1215, col_offset=28, end_lineno=1215, end_col_offset=29), Constant(value=False, lineno=1216, col_offset=33, end_lineno=1216, end_col_offset=38), Constant(value=False, lineno=1217, col_offset=33, end_lineno=1217, end_col_offset=38)], lineno=1213, col_offset=16, end_lineno=1218, end_col_offset=17)], lineno=1212, col_offset=12, end_lineno=1219, end_col_offset=13), lineno=1212, col_offset=12, end_lineno=1219, end_col_offset=13)], lineno=1211, col_offset=8, end_lineno=1219, end_col_offset=13), Return(value=Tuple(elts=[List(ctx=Load(), lineno=1220, col_offset=15, end_lineno=1220, end_col_offset=17), Constant(value=True, lineno=1220, col_offset=19, end_lineno=1220, end_col_offset=23), Name(id='summary', ctx=Load(), lineno=1220, col_offset=25, end_lineno=1220, end_col_offset=32)], ctx=Load(), lineno=1220, col_offset=15, end_lineno=1220, end_col_offset=32), lineno=1220, col_offset=8, end_lineno=1220, end_col_offset=32)], lineno=1180, col_offset=4, end_lineno=1220, end_col_offset=32), Return(value=Tuple(elts=[Call(func=Name(id='list', ctx=Load(), lineno=1222, col_offset=11, end_lineno=1222, end_col_offset=15), args=[Name(id='generator', ctx=Load(), lineno=1222, col_offset=16, end_lineno=1222, end_col_offset=25)], lineno=1222, col_offset=11, end_lineno=1222, end_col_offset=26), Constant(value=False, lineno=1222, col_offset=28, end_lineno=1222, end_col_offset=33), List(ctx=Load(), lineno=1222, col_offset=35, end_lineno=1222, end_col_offset=37)], ctx=Load(), lineno=1222, col_offset=11, end_lineno=1222, end_col_offset=37), lineno=1222, col_offset=4, end_lineno=1222, end_col_offset=37)], returns=Subscript(value=Name(id='tuple', ctx=Load(), lineno=1150, col_offset=5, end_lineno=1150, end_col_offset=10), slice=Tuple(elts=[Name(id='CycleList', ctx=Load(), lineno=1150, col_offset=11, end_lineno=1150, end_col_offset=20), Name(id='bool', ctx=Load(), lineno=1150, col_offset=22, end_lineno=1150, end_col_offset=26), Subscript(value=Name(id='list', ctx=Load(), lineno=1150, col_offset=28, end_lineno=1150, end_col_offset=32), slice=Subscript(value=Name(id='dict', ctx=Load(), lineno=1150, col_offset=33, end_lineno=1150, end_col_offset=37), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=1150, col_offset=38, end_lineno=1150, end_col_offset=41), Name(id='object', ctx=Load(), lineno=1150, col_offset=43, end_lineno=1150, end_col_offset=49)], ctx=Load(), lineno=1150, col_offset=38, end_lineno=1150, end_col_offset=49), ctx=Load(), lineno=1150, col_offset=33, end_lineno=1150, end_col_offset=50), ctx=Load(), lineno=1150, col_offset=28, end_lineno=1150, end_col_offset=51)], ctx=Load(), lineno=1150, col_offset=11, end_lineno=1150, end_col_offset=51), ctx=Load(), lineno=1150, col_offset=5, end_lineno=1150, end_col_offset=52), lineno=1144, col_offset=0, end_lineno=1222, end_col_offset=37), FunctionDef(name='_collect_layer_violations', args=arguments(args=[arg(arg='graph', annotation=Name(id='DiGraph', ctx=Load(), lineno=1226, col_offset=11, end_lineno=1226, end_col_offset=18), lineno=1226, col_offset=4, end_lineno=1226, end_col_offset=18), arg(arg='layer_rank', annotation=Subscript(value=Name(id='Mapping', ctx=Load(), lineno=1227, col_offset=16, end_lineno=1227, end_col_offset=23), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=1227, col_offset=24, end_lineno=1227, end_col_offset=27), Name(id='int', ctx=Load(), lineno=1227, col_offset=29, end_lineno=1227, end_col_offset=32)], ctx=Load(), lineno=1227, col_offset=24, end_lineno=1227, end_col_offset=32), ctx=Load(), lineno=1227, col_offset=16, end_lineno=1227, end_col_offset=33), lineno=1227, col_offset=4, end_lineno=1227, end_col_offset=33), arg(arg='pkg2layer', annotation=Subscript(value=Name(id='Mapping', ctx=Load(), lineno=1228, col_offset=15, end_lineno=1228, end_col_offset=22), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=1228, col_offset=23, end_lineno=1228, end_col_offset=26), Name(id='str', ctx=Load(), lineno=1228, col_offset=28, end_lineno=1228, end_col_offset=31)], ctx=Load(), lineno=1228, col_offset=23, end_lineno=1228, end_col_offset=31), ctx=Load(), lineno=1228, col_offset=15, end_lineno=1228, end_col_offset=32), lineno=1228, col_offset=4, end_lineno=1228, end_col_offset=32)], kwonlyargs=[arg(arg='allow_outward', annotation=Name(id='bool', ctx=Load(), lineno=1230, col_offset=19, end_lineno=1230, end_col_offset=23), lineno=1230, col_offset=4, end_lineno=1230, end_col_offset=23)], kw_defaults=[None]), body=[Expr(value=Constant(value='Collect layer violations.\n\n    Parameters\n    ----------\n    graph : DiGraph\n        Graph to check.\n    layer_rank : Mapping[str, int]\n        Layer rank mapping.\n    pkg2layer : Mapping[str, str]\n        Package to layer mapping.\n    allow_outward : bool\n        Whether to allow outward edges.\n\n    Returns\n    -------\n    CycleList\n        List of violation records.\n    ', lineno=1232, col_offset=4, end_lineno=1249, end_col_offset=7), lineno=1232, col_offset=4, end_lineno=1249, end_col_offset=7), If(test=Name(id='allow_outward', ctx=Load(), lineno=1250, col_offset=7, end_lineno=1250, end_col_offset=20), body=[Return(value=List(ctx=Load(), lineno=1251, col_offset=15, end_lineno=1251, end_col_offset=17), lineno=1251, col_offset=8, end_lineno=1251, end_col_offset=17)], lineno=1250, col_offset=4, end_lineno=1251, end_col_offset=17), AnnAssign(target=Name(id='violations', ctx=Store(), lineno=1252, col_offset=4, end_lineno=1252, end_col_offset=14), annotation=Name(id='CycleList', ctx=Load(), lineno=1252, col_offset=16, end_lineno=1252, end_col_offset=25), value=List(ctx=Load(), lineno=1252, col_offset=28, end_lineno=1252, end_col_offset=30), simple=1, lineno=1252, col_offset=4, end_lineno=1252, end_col_offset=30), For(target=Tuple(elts=[Name(id='src', ctx=Store(), lineno=1253, col_offset=8, end_lineno=1253, end_col_offset=11), Name(id='dst', ctx=Store(), lineno=1253, col_offset=13, end_lineno=1253, end_col_offset=16)], ctx=Store(), lineno=1253, col_offset=8, end_lineno=1253, end_col_offset=16), iter=Call(func=Attribute(value=Name(id='graph', ctx=Load(), lineno=1253, col_offset=20, end_lineno=1253, end_col_offset=25), attr='edges', ctx=Load(), lineno=1253, col_offset=20, end_lineno=1253, end_col_offset=31), lineno=1253, col_offset=20, end_lineno=1253, end_col_offset=33), body=[Assign(targets=[Name(id='src_layer', ctx=Store(), lineno=1254, col_offset=8, end_lineno=1254, end_col_offset=17)], value=Call(func=Attribute(value=Name(id='pkg2layer', ctx=Load(), lineno=1254, col_offset=20, end_lineno=1254, end_col_offset=29), attr='get', ctx=Load(), lineno=1254, col_offset=20, end_lineno=1254, end_col_offset=33), args=[Name(id='src', ctx=Load(), lineno=1254, col_offset=34, end_lineno=1254, end_col_offset=37)], lineno=1254, col_offset=20, end_lineno=1254, end_col_offset=38), lineno=1254, col_offset=8, end_lineno=1254, end_col_offset=38), Assign(targets=[Name(id='dst_layer', ctx=Store(), lineno=1255, col_offset=8, end_lineno=1255, end_col_offset=17)], value=Call(func=Attribute(value=Name(id='pkg2layer', ctx=Load(), lineno=1255, col_offset=20, end_lineno=1255, end_col_offset=29), attr='get', ctx=Load(), lineno=1255, col_offset=20, end_lineno=1255, end_col_offset=33), args=[Name(id='dst', ctx=Load(), lineno=1255, col_offset=34, end_lineno=1255, end_col_offset=37)], lineno=1255, col_offset=20, end_lineno=1255, end_col_offset=38), lineno=1255, col_offset=8, end_lineno=1255, end_col_offset=38), If(test=BoolOp(op=And(), values=[Compare(left=Name(id='src_layer', ctx=Load(), lineno=1257, col_offset=12, end_lineno=1257, end_col_offset=21), ops=[IsNot()], comparators=[Constant(value=None, lineno=1257, col_offset=29, end_lineno=1257, end_col_offset=33)], lineno=1257, col_offset=12, end_lineno=1257, end_col_offset=33), Compare(left=Name(id='dst_layer', ctx=Load(), lineno=1258, col_offset=16, end_lineno=1258, end_col_offset=25), ops=[IsNot()], comparators=[Constant(value=None, lineno=1258, col_offset=33, end_lineno=1258, end_col_offset=37)], lineno=1258, col_offset=16, end_lineno=1258, end_col_offset=37), Compare(left=Name(id='src_layer', ctx=Load(), lineno=1259, col_offset=16, end_lineno=1259, end_col_offset=25), ops=[In()], comparators=[Name(id='layer_rank', ctx=Load(), lineno=1259, col_offset=29, end_lineno=1259, end_col_offset=39)], lineno=1259, col_offset=16, end_lineno=1259, end_col_offset=39), Compare(left=Name(id='dst_layer', ctx=Load(), lineno=1260, col_offset=16, end_lineno=1260, end_col_offset=25), ops=[In()], comparators=[Name(id='layer_rank', ctx=Load(), lineno=1260, col_offset=29, end_lineno=1260, end_col_offset=39)], lineno=1260, col_offset=16, end_lineno=1260, end_col_offset=39), Compare(left=Subscript(value=Name(id='layer_rank', ctx=Load(), lineno=1261, col_offset=16, end_lineno=1261, end_col_offset=26), slice=Name(id='dst_layer', ctx=Load(), lineno=1261, col_offset=27, end_lineno=1261, end_col_offset=36), ctx=Load(), lineno=1261, col_offset=16, end_lineno=1261, end_col_offset=37), ops=[Gt()], comparators=[Subscript(value=Name(id='layer_rank', ctx=Load(), lineno=1261, col_offset=40, end_lineno=1261, end_col_offset=50), slice=Name(id='src_layer', ctx=Load(), lineno=1261, col_offset=51, end_lineno=1261, end_col_offset=60), ctx=Load(), lineno=1261, col_offset=40, end_lineno=1261, end_col_offset=61)], lineno=1261, col_offset=16, end_lineno=1261, end_col_offset=61)], lineno=1257, col_offset=12, end_lineno=1261, end_col_offset=61), body=[Expr(value=Call(func=Attribute(value=Name(id='violations', ctx=Load(), lineno=1263, col_offset=12, end_lineno=1263, end_col_offset=22), attr='append', ctx=Load(), lineno=1263, col_offset=12, end_lineno=1263, end_col_offset=29), args=[List(elts=[Name(id='src_layer', ctx=Load(), lineno=1263, col_offset=31, end_lineno=1263, end_col_offset=40), Name(id='dst_layer', ctx=Load(), lineno=1263, col_offset=42, end_lineno=1263, end_col_offset=51), JoinedStr(values=[Constant(value='edge:', lineno=1263, col_offset=55, end_lineno=1263, end_col_offset=60), FormattedValue(value=Name(id='src', ctx=Load(), lineno=1263, col_offset=61, end_lineno=1263, end_col_offset=64), conversion=-1, lineno=1263, col_offset=60, end_lineno=1263, end_col_offset=65), Constant(value='->', lineno=1263, col_offset=65, end_lineno=1263, end_col_offset=67), FormattedValue(value=Name(id='dst', ctx=Load(), lineno=1263, col_offset=68, end_lineno=1263, end_col_offset=71), conversion=-1, lineno=1263, col_offset=67, end_lineno=1263, end_col_offset=72)], lineno=1263, col_offset=53, end_lineno=1263, end_col_offset=73)], ctx=Load(), lineno=1263, col_offset=30, end_lineno=1263, end_col_offset=74)], lineno=1263, col_offset=12, end_lineno=1263, end_col_offset=75), lineno=1263, col_offset=12, end_lineno=1263, end_col_offset=75)], lineno=1256, col_offset=8, end_lineno=1263, end_col_offset=75)], lineno=1253, col_offset=4, end_lineno=1263, end_col_offset=75), Return(value=Name(id='violations', ctx=Load(), lineno=1264, col_offset=11, end_lineno=1264, end_col_offset=21), lineno=1264, col_offset=4, end_lineno=1264, end_col_offset=21)], returns=Name(id='CycleList', ctx=Load(), lineno=1231, col_offset=5, end_lineno=1231, end_col_offset=14), lineno=1225, col_offset=0, end_lineno=1264, end_col_offset=21), FunctionDef(name='_degree_centrality', args=arguments(args=[arg(arg='graph', annotation=Name(id='DiGraph', ctx=Load(), lineno=1267, col_offset=30, end_lineno=1267, end_col_offset=37), lineno=1267, col_offset=23, end_lineno=1267, end_col_offset=37)]), body=[Expr(value=Constant(value='Degree centrality.\n\n    Parameters\n    ----------\n    graph : DiGraph\n        Graph to compute centrality for.\n\n    Returns\n    -------\n    dict[str, float]\n        Node to centrality score mapping (empty if networkx unavailable or graph empty).\n    ', lineno=1268, col_offset=4, end_lineno=1279, end_col_offset=7), lineno=1268, col_offset=4, end_lineno=1279, end_col_offset=7), If(test=BoolOp(op=Or(), values=[Compare(left=Name(id='nx', ctx=Load(), lineno=1280, col_offset=7, end_lineno=1280, end_col_offset=9), ops=[Is()], comparators=[Constant(value=None, lineno=1280, col_offset=13, end_lineno=1280, end_col_offset=17)], lineno=1280, col_offset=7, end_lineno=1280, end_col_offset=17), Compare(left=Call(func=Attribute(value=Name(id='graph', ctx=Load(), lineno=1280, col_offset=21, end_lineno=1280, end_col_offset=26), attr='number_of_nodes', ctx=Load(), lineno=1280, col_offset=21, end_lineno=1280, end_col_offset=42), lineno=1280, col_offset=21, end_lineno=1280, end_col_offset=44), ops=[Eq()], comparators=[Constant(value=0, lineno=1280, col_offset=48, end_lineno=1280, end_col_offset=49)], lineno=1280, col_offset=21, end_lineno=1280, end_col_offset=49)], lineno=1280, col_offset=7, end_lineno=1280, end_col_offset=49), body=[Return(value=Dict(lineno=1281, col_offset=15, end_lineno=1281, end_col_offset=17), lineno=1281, col_offset=8, end_lineno=1281, end_col_offset=17)], lineno=1280, col_offset=4, end_lineno=1281, end_col_offset=17), Return(value=Call(func=Name(id='cast', ctx=Load(), lineno=1282, col_offset=11, end_lineno=1282, end_col_offset=15), args=[Constant(value='dict[str, float]', lineno=1282, col_offset=16, end_lineno=1282, end_col_offset=34), Call(func=Attribute(value=Name(id='nx', ctx=Load(), lineno=1282, col_offset=36, end_lineno=1282, end_col_offset=38), attr='degree_centrality', ctx=Load(), lineno=1282, col_offset=36, end_lineno=1282, end_col_offset=56), args=[Name(id='graph', ctx=Load(), lineno=1282, col_offset=57, end_lineno=1282, end_col_offset=62)], lineno=1282, col_offset=36, end_lineno=1282, end_col_offset=63)], lineno=1282, col_offset=11, end_lineno=1282, end_col_offset=64), lineno=1282, col_offset=4, end_lineno=1282, end_col_offset=64)], returns=Subscript(value=Name(id='dict', ctx=Load(), lineno=1267, col_offset=42, end_lineno=1267, end_col_offset=46), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=1267, col_offset=47, end_lineno=1267, end_col_offset=50), Name(id='float', ctx=Load(), lineno=1267, col_offset=52, end_lineno=1267, end_col_offset=57)], ctx=Load(), lineno=1267, col_offset=47, end_lineno=1267, end_col_offset=57), ctx=Load(), lineno=1267, col_offset=42, end_lineno=1267, end_col_offset=58), lineno=1267, col_offset=0, end_lineno=1282, end_col_offset=64), FunctionDef(name='_sequence_of_sequences', args=arguments(args=[arg(arg='value', annotation=Name(id='object', ctx=Load(), lineno=1285, col_offset=34, end_lineno=1285, end_col_offset=40), lineno=1285, col_offset=27, end_lineno=1285, end_col_offset=40)]), body=[Expr(value=Constant(value='Sequence of sequences.\n\n    Parameters\n    ----------\n    value : object\n        Value to coerce.\n\n    Returns\n    -------\n    list[list[str]]\n        List of string lists (empty if value is not a sequence of sequences).\n    ', lineno=1286, col_offset=4, end_lineno=1297, end_col_offset=7), lineno=1286, col_offset=4, end_lineno=1297, end_col_offset=7), If(test=BoolOp(op=Or(), values=[UnaryOp(op=Not(), operand=Call(func=Name(id='isinstance', ctx=Load(), lineno=1298, col_offset=11, end_lineno=1298, end_col_offset=21), args=[Name(id='value', ctx=Load(), lineno=1298, col_offset=22, end_lineno=1298, end_col_offset=27), Name(id='Sequence', ctx=Load(), lineno=1298, col_offset=29, end_lineno=1298, end_col_offset=37)], lineno=1298, col_offset=11, end_lineno=1298, end_col_offset=38), lineno=1298, col_offset=7, end_lineno=1298, end_col_offset=38), Call(func=Name(id='isinstance', ctx=Load(), lineno=1298, col_offset=42, end_lineno=1298, end_col_offset=52), args=[Name(id='value', ctx=Load(), lineno=1298, col_offset=53, end_lineno=1298, end_col_offset=58), Tuple(elts=[Name(id='str', ctx=Load(), lineno=1298, col_offset=61, end_lineno=1298, end_col_offset=64), Name(id='bytes', ctx=Load(), lineno=1298, col_offset=66, end_lineno=1298, end_col_offset=71)], ctx=Load(), lineno=1298, col_offset=60, end_lineno=1298, end_col_offset=72)], lineno=1298, col_offset=42, end_lineno=1298, end_col_offset=73)], lineno=1298, col_offset=7, end_lineno=1298, end_col_offset=73), body=[Return(value=List(ctx=Load(), lineno=1299, col_offset=15, end_lineno=1299, end_col_offset=17), lineno=1299, col_offset=8, end_lineno=1299, end_col_offset=17)], lineno=1298, col_offset=4, end_lineno=1299, end_col_offset=17), Return(value=ListComp(elt=ListComp(elt=Call(func=Name(id='str', ctx=Load(), lineno=1301, col_offset=9, end_lineno=1301, end_col_offset=12), args=[Name(id='item', ctx=Load(), lineno=1301, col_offset=13, end_lineno=1301, end_col_offset=17)], lineno=1301, col_offset=9, end_lineno=1301, end_col_offset=18), generators=[comprehension(target=Name(id='item', ctx=Store(), lineno=1301, col_offset=23, end_lineno=1301, end_col_offset=27), iter=Name(id='entry', ctx=Load(), lineno=1301, col_offset=31, end_lineno=1301, end_col_offset=36), is_async=0)], lineno=1301, col_offset=8, end_lineno=1301, end_col_offset=37), generators=[comprehension(target=Name(id='entry', ctx=Store(), lineno=1302, col_offset=12, end_lineno=1302, end_col_offset=17), iter=Name(id='value', ctx=Load(), lineno=1302, col_offset=21, end_lineno=1302, end_col_offset=26), ifs=[BoolOp(op=And(), values=[Call(func=Name(id='isinstance', ctx=Load(), lineno=1303, col_offset=11, end_lineno=1303, end_col_offset=21), args=[Name(id='entry', ctx=Load(), lineno=1303, col_offset=22, end_lineno=1303, end_col_offset=27), Name(id='Sequence', ctx=Load(), lineno=1303, col_offset=29, end_lineno=1303, end_col_offset=37)], lineno=1303, col_offset=11, end_lineno=1303, end_col_offset=38), UnaryOp(op=Not(), operand=Call(func=Name(id='isinstance', ctx=Load(), lineno=1303, col_offset=47, end_lineno=1303, end_col_offset=57), args=[Name(id='entry', ctx=Load(), lineno=1303, col_offset=58, end_lineno=1303, end_col_offset=63), Tuple(elts=[Name(id='str', ctx=Load(), lineno=1303, col_offset=66, end_lineno=1303, end_col_offset=69), Name(id='bytes', ctx=Load(), lineno=1303, col_offset=71, end_lineno=1303, end_col_offset=76)], ctx=Load(), lineno=1303, col_offset=65, end_lineno=1303, end_col_offset=77)], lineno=1303, col_offset=47, end_lineno=1303, end_col_offset=78), lineno=1303, col_offset=43, end_lineno=1303, end_col_offset=78)], lineno=1303, col_offset=11, end_lineno=1303, end_col_offset=78)], is_async=0)], lineno=1300, col_offset=11, end_lineno=1304, end_col_offset=5), lineno=1300, col_offset=4, end_lineno=1304, end_col_offset=5)], returns=Subscript(value=Name(id='list', ctx=Load(), lineno=1285, col_offset=45, end_lineno=1285, end_col_offset=49), slice=Subscript(value=Name(id='list', ctx=Load(), lineno=1285, col_offset=50, end_lineno=1285, end_col_offset=54), slice=Name(id='str', ctx=Load(), lineno=1285, col_offset=55, end_lineno=1285, end_col_offset=58), ctx=Load(), lineno=1285, col_offset=50, end_lineno=1285, end_col_offset=59), ctx=Load(), lineno=1285, col_offset=45, end_lineno=1285, end_col_offset=60), lineno=1285, col_offset=0, end_lineno=1304, end_col_offset=5), FunctionDef(name='_edge_from_violation', args=arguments(args=[arg(arg='record', annotation=Subscript(value=Name(id='Sequence', ctx=Load(), lineno=1307, col_offset=33, end_lineno=1307, end_col_offset=41), slice=Name(id='str', ctx=Load(), lineno=1307, col_offset=42, end_lineno=1307, end_col_offset=45), ctx=Load(), lineno=1307, col_offset=33, end_lineno=1307, end_col_offset=46), lineno=1307, col_offset=25, end_lineno=1307, end_col_offset=46)]), body=[Expr(value=Constant(value='Edge from violation.\n\n    Parameters\n    ----------\n    record : Sequence[str]\n        Violation record.\n\n    Returns\n    -------\n    tuple[str, str] | None\n        (source, target) edge tuple if parseable, otherwise None.\n    ', lineno=1308, col_offset=4, end_lineno=1319, end_col_offset=7), lineno=1308, col_offset=4, end_lineno=1319, end_col_offset=7), If(test=UnaryOp(op=Not(), operand=Name(id='record', ctx=Load(), lineno=1320, col_offset=11, end_lineno=1320, end_col_offset=17), lineno=1320, col_offset=7, end_lineno=1320, end_col_offset=17), body=[Return(value=Constant(value=None, lineno=1321, col_offset=15, end_lineno=1321, end_col_offset=19), lineno=1321, col_offset=8, end_lineno=1321, end_col_offset=19)], lineno=1320, col_offset=4, end_lineno=1321, end_col_offset=19), Assign(targets=[Name(id='edge_marker', ctx=Store(), lineno=1322, col_offset=4, end_lineno=1322, end_col_offset=15)], value=Subscript(value=Call(func=Attribute(value=Subscript(value=Name(id='record', ctx=Load(), lineno=1322, col_offset=18, end_lineno=1322, end_col_offset=24), slice=UnaryOp(op=USub(), operand=Constant(value=1, lineno=1322, col_offset=26, end_lineno=1322, end_col_offset=27), lineno=1322, col_offset=25, end_lineno=1322, end_col_offset=27), ctx=Load(), lineno=1322, col_offset=18, end_lineno=1322, end_col_offset=28), attr='split', ctx=Load(), lineno=1322, col_offset=18, end_lineno=1322, end_col_offset=34), args=[Constant(value='edge:', lineno=1322, col_offset=35, end_lineno=1322, end_col_offset=42)], lineno=1322, col_offset=18, end_lineno=1322, end_col_offset=43), slice=UnaryOp(op=USub(), operand=Constant(value=1, lineno=1322, col_offset=45, end_lineno=1322, end_col_offset=46), lineno=1322, col_offset=44, end_lineno=1322, end_col_offset=46), ctx=Load(), lineno=1322, col_offset=18, end_lineno=1322, end_col_offset=47), lineno=1322, col_offset=4, end_lineno=1322, end_col_offset=47), Assign(targets=[Name(id='parts', ctx=Store(), lineno=1323, col_offset=4, end_lineno=1323, end_col_offset=9)], value=Call(func=Attribute(value=Name(id='edge_marker', ctx=Load(), lineno=1323, col_offset=12, end_lineno=1323, end_col_offset=23), attr='split', ctx=Load(), lineno=1323, col_offset=12, end_lineno=1323, end_col_offset=29), args=[Constant(value='->', lineno=1323, col_offset=30, end_lineno=1323, end_col_offset=34)], lineno=1323, col_offset=12, end_lineno=1323, end_col_offset=35), lineno=1323, col_offset=4, end_lineno=1323, end_col_offset=35), If(test=Compare(left=Call(func=Name(id='len', ctx=Load(), lineno=1324, col_offset=7, end_lineno=1324, end_col_offset=10), args=[Name(id='parts', ctx=Load(), lineno=1324, col_offset=11, end_lineno=1324, end_col_offset=16)], lineno=1324, col_offset=7, end_lineno=1324, end_col_offset=17), ops=[NotEq()], comparators=[Name(id='EDGE_COMPONENTS', ctx=Load(), lineno=1324, col_offset=21, end_lineno=1324, end_col_offset=36)], lineno=1324, col_offset=7, end_lineno=1324, end_col_offset=36), body=[Return(value=Constant(value=None, lineno=1325, col_offset=15, end_lineno=1325, end_col_offset=19), lineno=1325, col_offset=8, end_lineno=1325, end_col_offset=19)], lineno=1324, col_offset=4, end_lineno=1325, end_col_offset=19), Return(value=Tuple(elts=[Subscript(value=Name(id='parts', ctx=Load(), lineno=1326, col_offset=11, end_lineno=1326, end_col_offset=16), slice=Constant(value=0, lineno=1326, col_offset=17, end_lineno=1326, end_col_offset=18), ctx=Load(), lineno=1326, col_offset=11, end_lineno=1326, end_col_offset=19), Subscript(value=Name(id='parts', ctx=Load(), lineno=1326, col_offset=21, end_lineno=1326, end_col_offset=26), slice=Constant(value=1, lineno=1326, col_offset=27, end_lineno=1326, end_col_offset=28), ctx=Load(), lineno=1326, col_offset=21, end_lineno=1326, end_col_offset=29)], ctx=Load(), lineno=1326, col_offset=11, end_lineno=1326, end_col_offset=29), lineno=1326, col_offset=4, end_lineno=1326, end_col_offset=29)], returns=BinOp(left=Subscript(value=Name(id='tuple', ctx=Load(), lineno=1307, col_offset=51, end_lineno=1307, end_col_offset=56), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=1307, col_offset=57, end_lineno=1307, end_col_offset=60), Name(id='str', ctx=Load(), lineno=1307, col_offset=62, end_lineno=1307, end_col_offset=65)], ctx=Load(), lineno=1307, col_offset=57, end_lineno=1307, end_col_offset=65), ctx=Load(), lineno=1307, col_offset=51, end_lineno=1307, end_col_offset=66), op=BitOr(), right=Constant(value=None, lineno=1307, col_offset=69, end_lineno=1307, end_col_offset=73), lineno=1307, col_offset=51, end_lineno=1307, end_col_offset=73), lineno=1307, col_offset=0, end_lineno=1326, end_col_offset=29), FunctionDef(name='build_global_pydeps', args=arguments(args=[arg(arg='dot_out', annotation=Name(id='Path', ctx=Load(), lineno=1329, col_offset=33, end_lineno=1329, end_col_offset=37), lineno=1329, col_offset=24, end_lineno=1329, end_col_offset=37), arg(arg='excludes', annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=1329, col_offset=49, end_lineno=1329, end_col_offset=53), slice=Name(id='str', ctx=Load(), lineno=1329, col_offset=54, end_lineno=1329, end_col_offset=57), ctx=Load(), lineno=1329, col_offset=49, end_lineno=1329, end_col_offset=58), lineno=1329, col_offset=39, end_lineno=1329, end_col_offset=58), arg(arg='max_bacon', annotation=Name(id='int', ctx=Load(), lineno=1329, col_offset=71, end_lineno=1329, end_col_offset=74), lineno=1329, col_offset=60, end_lineno=1329, end_col_offset=74)]), body=[Expr(value=Constant(value='Compute build global pydeps.\n\n    Carry out the build global pydeps operation for the surrounding component. Generated documentation highlights how this helper collaborates with neighbouring utilities. Callers rely on the routine to remain stable across releases.\n\n    Parameters\n    ----------\n    dot_out : Path\n        Description for ``dot_out``.\n    excludes : list[str]\n        Description for ``excludes``.\n    max_bacon : int\n        Description for ``max_bacon``.\n\n    Examples\n    --------\n    >>> from tools.docs.build_graphs import build_global_pydeps\n    >>> build_global_pydeps(..., ..., ...)  # doctest: +ELLIPSIS\n    ', lineno=1330, col_offset=4, end_lineno=1347, end_col_offset=7), lineno=1330, col_offset=4, end_lineno=1347, end_col_offset=7), Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='dot_out', ctx=Load(), lineno=1348, col_offset=4, end_lineno=1348, end_col_offset=11), attr='parent', ctx=Load(), lineno=1348, col_offset=4, end_lineno=1348, end_col_offset=18), attr='mkdir', ctx=Load(), lineno=1348, col_offset=4, end_lineno=1348, end_col_offset=24), keywords=[keyword(arg='parents', value=Constant(value=True, lineno=1348, col_offset=33, end_lineno=1348, end_col_offset=37), lineno=1348, col_offset=25, end_lineno=1348, end_col_offset=37), keyword(arg='exist_ok', value=Constant(value=True, lineno=1348, col_offset=48, end_lineno=1348, end_col_offset=52), lineno=1348, col_offset=39, end_lineno=1348, end_col_offset=52)], lineno=1348, col_offset=4, end_lineno=1348, end_col_offset=53), lineno=1348, col_offset=4, end_lineno=1348, end_col_offset=53), Assign(targets=[Name(id='dot_target', ctx=Store(), lineno=1349, col_offset=4, end_lineno=1349, end_col_offset=14)], value=IfExp(test=Call(func=Attribute(value=Name(id='dot_out', ctx=Load(), lineno=1349, col_offset=28, end_lineno=1349, end_col_offset=35), attr='is_absolute', ctx=Load(), lineno=1349, col_offset=28, end_lineno=1349, end_col_offset=47), lineno=1349, col_offset=28, end_lineno=1349, end_col_offset=49), body=Name(id='dot_out', ctx=Load(), lineno=1349, col_offset=17, end_lineno=1349, end_col_offset=24), orelse=Call(func=Attribute(value=Name(id='dot_out', ctx=Load(), lineno=1349, col_offset=55, end_lineno=1349, end_col_offset=62), attr='resolve', ctx=Load(), lineno=1349, col_offset=55, end_lineno=1349, end_col_offset=70), lineno=1349, col_offset=55, end_lineno=1349, end_col_offset=72), lineno=1349, col_offset=17, end_lineno=1349, end_col_offset=72), lineno=1349, col_offset=4, end_lineno=1349, end_col_offset=72), Assign(targets=[Name(id='cmd', ctx=Store(), lineno=1351, col_offset=4, end_lineno=1351, end_col_offset=7)], value=List(elts=[Attribute(value=Name(id='sys', ctx=Load(), lineno=1352, col_offset=8, end_lineno=1352, end_col_offset=11), attr='executable', ctx=Load(), lineno=1352, col_offset=8, end_lineno=1352, end_col_offset=22), Constant(value='-m', lineno=1353, col_offset=8, end_lineno=1353, end_col_offset=12), Constant(value='pydeps', lineno=1354, col_offset=8, end_lineno=1354, end_col_offset=16), Constant(value='src', lineno=1355, col_offset=8, end_lineno=1355, end_col_offset=13), Constant(value='--noshow', lineno=1356, col_offset=8, end_lineno=1356, end_col_offset=18), Constant(value='--show-dot', lineno=1357, col_offset=8, end_lineno=1357, end_col_offset=20), Constant(value='--dot-output', lineno=1358, col_offset=8, end_lineno=1358, end_col_offset=22), Call(func=Name(id='str', ctx=Load(), lineno=1359, col_offset=8, end_lineno=1359, end_col_offset=11), args=[Name(id='dot_target', ctx=Load(), lineno=1359, col_offset=12, end_lineno=1359, end_col_offset=22)], lineno=1359, col_offset=8, end_lineno=1359, end_col_offset=23), Constant(value='--max-bacon', lineno=1360, col_offset=8, end_lineno=1360, end_col_offset=21), Call(func=Name(id='str', ctx=Load(), lineno=1361, col_offset=8, end_lineno=1361, end_col_offset=11), args=[Name(id='max_bacon', ctx=Load(), lineno=1361, col_offset=12, end_lineno=1361, end_col_offset=21)], lineno=1361, col_offset=8, end_lineno=1361, end_col_offset=22), Constant(value='-T', lineno=1362, col_offset=8, end_lineno=1362, end_col_offset=12), Constant(value='dot', lineno=1363, col_offset=8, end_lineno=1363, end_col_offset=13), Constant(value='--no-output', lineno=1364, col_offset=8, end_lineno=1364, end_col_offset=21)], ctx=Load(), lineno=1351, col_offset=10, end_lineno=1365, end_col_offset=5), lineno=1351, col_offset=4, end_lineno=1365, end_col_offset=5), Assign(targets=[Name(id='noise', ctx=Store(), lineno=1367, col_offset=4, end_lineno=1367, end_col_offset=9)], value=Call(func=Attribute(value=Name(id='os', ctx=Load(), lineno=1367, col_offset=12, end_lineno=1367, end_col_offset=14), attr='getenv', ctx=Load(), lineno=1367, col_offset=12, end_lineno=1367, end_col_offset=21), args=[Constant(value='GRAPH_NOISE_LEVEL', lineno=1367, col_offset=22, end_lineno=1367, end_col_offset=41)], lineno=1367, col_offset=12, end_lineno=1367, end_col_offset=42), lineno=1367, col_offset=4, end_lineno=1367, end_col_offset=42), If(test=Name(id='noise', ctx=Load(), lineno=1368, col_offset=7, end_lineno=1368, end_col_offset=12), body=[AugAssign(target=Name(id='cmd', ctx=Store(), lineno=1369, col_offset=8, end_lineno=1369, end_col_offset=11), op=Add(), value=List(elts=[Constant(value='--noise-level', lineno=1369, col_offset=16, end_lineno=1369, end_col_offset=31), Name(id='noise', ctx=Load(), lineno=1369, col_offset=33, end_lineno=1369, end_col_offset=38)], ctx=Load(), lineno=1369, col_offset=15, end_lineno=1369, end_col_offset=39), lineno=1369, col_offset=8, end_lineno=1369, end_col_offset=39)], lineno=1368, col_offset=4, end_lineno=1369, end_col_offset=39), Assign(targets=[Name(id='mdepth', ctx=Store(), lineno=1370, col_offset=4, end_lineno=1370, end_col_offset=10)], value=Call(func=Attribute(value=Name(id='os', ctx=Load(), lineno=1370, col_offset=13, end_lineno=1370, end_col_offset=15), attr='getenv', ctx=Load(), lineno=1370, col_offset=13, end_lineno=1370, end_col_offset=22), args=[Constant(value='GRAPH_MAX_MODULE_DEPTH', lineno=1370, col_offset=23, end_lineno=1370, end_col_offset=47)], lineno=1370, col_offset=13, end_lineno=1370, end_col_offset=48), lineno=1370, col_offset=4, end_lineno=1370, end_col_offset=48), If(test=Name(id='mdepth', ctx=Load(), lineno=1371, col_offset=7, end_lineno=1371, end_col_offset=13), body=[AugAssign(target=Name(id='cmd', ctx=Store(), lineno=1372, col_offset=8, end_lineno=1372, end_col_offset=11), op=Add(), value=List(elts=[Constant(value='--max-module-depth', lineno=1372, col_offset=16, end_lineno=1372, end_col_offset=36), Name(id='mdepth', ctx=Load(), lineno=1372, col_offset=38, end_lineno=1372, end_col_offset=44)], ctx=Load(), lineno=1372, col_offset=15, end_lineno=1372, end_col_offset=45), lineno=1372, col_offset=8, end_lineno=1372, end_col_offset=45)], lineno=1371, col_offset=4, end_lineno=1372, end_col_offset=45), For(target=Name(id='pat', ctx=Store(), lineno=1373, col_offset=8, end_lineno=1373, end_col_offset=11), iter=Name(id='excludes', ctx=Load(), lineno=1373, col_offset=15, end_lineno=1373, end_col_offset=23), body=[AugAssign(target=Name(id='cmd', ctx=Store(), lineno=1374, col_offset=8, end_lineno=1374, end_col_offset=11), op=Add(), value=List(elts=[Constant(value='-x', lineno=1374, col_offset=16, end_lineno=1374, end_col_offset=20), Name(id='pat', ctx=Load(), lineno=1374, col_offset=22, end_lineno=1374, end_col_offset=25)], ctx=Load(), lineno=1374, col_offset=15, end_lineno=1374, end_col_offset=26), lineno=1374, col_offset=8, end_lineno=1374, end_col_offset=26)], lineno=1373, col_offset=4, end_lineno=1374, end_col_offset=26), Expr(value=Call(func=Name(id='sh', ctx=Load(), lineno=1375, col_offset=4, end_lineno=1375, end_col_offset=6), args=[Name(id='cmd', ctx=Load(), lineno=1375, col_offset=7, end_lineno=1375, end_col_offset=10)], keywords=[keyword(arg='cwd', value=Name(id='ROOT', ctx=Load(), lineno=1375, col_offset=16, end_lineno=1375, end_col_offset=20), lineno=1375, col_offset=12, end_lineno=1375, end_col_offset=20)], lineno=1375, col_offset=4, end_lineno=1375, end_col_offset=21), lineno=1375, col_offset=4, end_lineno=1375, end_col_offset=21), Assign(targets=[Name(id='fallback_dot', ctx=Store(), lineno=1379, col_offset=4, end_lineno=1379, end_col_offset=16)], value=BinOp(left=Name(id='ROOT', ctx=Load(), lineno=1379, col_offset=19, end_lineno=1379, end_col_offset=23), op=Div(), right=Constant(value='src.dot', lineno=1379, col_offset=26, end_lineno=1379, end_col_offset=35), lineno=1379, col_offset=19, end_lineno=1379, end_col_offset=35), lineno=1379, col_offset=4, end_lineno=1379, end_col_offset=35), If(test=BoolOp(op=And(), values=[UnaryOp(op=Not(), operand=Call(func=Attribute(value=Name(id='dot_target', ctx=Load(), lineno=1380, col_offset=11, end_lineno=1380, end_col_offset=21), attr='exists', ctx=Load(), lineno=1380, col_offset=11, end_lineno=1380, end_col_offset=28), lineno=1380, col_offset=11, end_lineno=1380, end_col_offset=30), lineno=1380, col_offset=7, end_lineno=1380, end_col_offset=30), Call(func=Attribute(value=Name(id='fallback_dot', ctx=Load(), lineno=1380, col_offset=35, end_lineno=1380, end_col_offset=47), attr='exists', ctx=Load(), lineno=1380, col_offset=35, end_lineno=1380, end_col_offset=54), lineno=1380, col_offset=35, end_lineno=1380, end_col_offset=56)], lineno=1380, col_offset=7, end_lineno=1380, end_col_offset=56), body=[Expr(value=Call(func=Attribute(value=Name(id='fallback_dot', ctx=Load(), lineno=1381, col_offset=8, end_lineno=1381, end_col_offset=20), attr='replace', ctx=Load(), lineno=1381, col_offset=8, end_lineno=1381, end_col_offset=28), args=[Name(id='dot_target', ctx=Load(), lineno=1381, col_offset=29, end_lineno=1381, end_col_offset=39)], lineno=1381, col_offset=8, end_lineno=1381, end_col_offset=40), lineno=1381, col_offset=8, end_lineno=1381, end_col_offset=40)], lineno=1380, col_offset=4, end_lineno=1381, end_col_offset=40), For(target=Name(id='leftover', ctx=Store(), lineno=1382, col_offset=8, end_lineno=1382, end_col_offset=16), iter=Call(func=Attribute(value=Name(id='ROOT', ctx=Load(), lineno=1382, col_offset=20, end_lineno=1382, end_col_offset=24), attr='glob', ctx=Load(), lineno=1382, col_offset=20, end_lineno=1382, end_col_offset=29), args=[Constant(value='src*.dot', lineno=1382, col_offset=30, end_lineno=1382, end_col_offset=40)], lineno=1382, col_offset=20, end_lineno=1382, end_col_offset=41), body=[If(test=Call(func=Attribute(value=Name(id='leftover', ctx=Load(), lineno=1383, col_offset=11, end_lineno=1383, end_col_offset=19), attr='exists', ctx=Load(), lineno=1383, col_offset=11, end_lineno=1383, end_col_offset=26), lineno=1383, col_offset=11, end_lineno=1383, end_col_offset=28), body=[Expr(value=Call(func=Attribute(value=Name(id='leftover', ctx=Load(), lineno=1384, col_offset=12, end_lineno=1384, end_col_offset=20), attr='unlink', ctx=Load(), lineno=1384, col_offset=12, end_lineno=1384, end_col_offset=27), lineno=1384, col_offset=12, end_lineno=1384, end_col_offset=29), lineno=1384, col_offset=12, end_lineno=1384, end_col_offset=29)], lineno=1383, col_offset=8, end_lineno=1384, end_col_offset=29)], lineno=1382, col_offset=4, end_lineno=1384, end_col_offset=29)], returns=Constant(value=None, lineno=1329, col_offset=79, end_lineno=1329, end_col_offset=83), lineno=1329, col_offset=0, end_lineno=1384, end_col_offset=29), FunctionDef(name='collapse_to_packages', args=arguments(args=[arg(arg='dot_path', annotation=Name(id='Path', ctx=Load(), lineno=1387, col_offset=35, end_lineno=1387, end_col_offset=39), lineno=1387, col_offset=25, end_lineno=1387, end_col_offset=39)]), body=[Expr(value=Constant(value='Load a pydeps graph and collapse modules into package-level edges.\n\n    Parameters\n    ----------\n    dot_path : Path\n        Path to DOT file.\n\n    Returns\n    -------\n    DiGraph\n        Collapsed graph with package-level nodes and weighted edges.\n\n    Raises\n    ------\n    RuntimeError\n        If networkx or pydot are not available.\n    ', lineno=1388, col_offset=4, end_lineno=1404, end_col_offset=7), lineno=1388, col_offset=4, end_lineno=1404, end_col_offset=7), If(test=BoolOp(op=Or(), values=[Compare(left=Name(id='nx', ctx=Load(), lineno=1405, col_offset=7, end_lineno=1405, end_col_offset=9), ops=[Is()], comparators=[Constant(value=None, lineno=1405, col_offset=13, end_lineno=1405, end_col_offset=17)], lineno=1405, col_offset=7, end_lineno=1405, end_col_offset=17), Compare(left=Name(id='pydot', ctx=Load(), lineno=1405, col_offset=21, end_lineno=1405, end_col_offset=26), ops=[Is()], comparators=[Constant(value=None, lineno=1405, col_offset=30, end_lineno=1405, end_col_offset=34)], lineno=1405, col_offset=21, end_lineno=1405, end_col_offset=34)], lineno=1405, col_offset=7, end_lineno=1405, end_col_offset=34), body=[Assign(targets=[Name(id='message', ctx=Store(), lineno=1406, col_offset=8, end_lineno=1406, end_col_offset=15)], value=Constant(value='networkx and pydot are required to collapse graphs', lineno=1406, col_offset=18, end_lineno=1406, end_col_offset=70), lineno=1406, col_offset=8, end_lineno=1406, end_col_offset=70), Raise(exc=Call(func=Name(id='RuntimeError', ctx=Load(), lineno=1407, col_offset=14, end_lineno=1407, end_col_offset=26), args=[Name(id='message', ctx=Load(), lineno=1407, col_offset=27, end_lineno=1407, end_col_offset=34)], lineno=1407, col_offset=14, end_lineno=1407, end_col_offset=35), lineno=1407, col_offset=8, end_lineno=1407, end_col_offset=35)], lineno=1405, col_offset=4, end_lineno=1407, end_col_offset=35), Assign(targets=[Name(id='graphs', ctx=Store(), lineno=1409, col_offset=4, end_lineno=1409, end_col_offset=10)], value=Call(func=Attribute(value=Name(id='pydot', ctx=Load(), lineno=1409, col_offset=13, end_lineno=1409, end_col_offset=18), attr='graph_from_dot_file', ctx=Load(), lineno=1409, col_offset=13, end_lineno=1409, end_col_offset=38), args=[Call(func=Name(id='str', ctx=Load(), lineno=1409, col_offset=39, end_lineno=1409, end_col_offset=42), args=[Name(id='dot_path', ctx=Load(), lineno=1409, col_offset=43, end_lineno=1409, end_col_offset=51)], lineno=1409, col_offset=39, end_lineno=1409, end_col_offset=52)], lineno=1409, col_offset=13, end_lineno=1409, end_col_offset=53), lineno=1409, col_offset=4, end_lineno=1409, end_col_offset=53), Assign(targets=[Name(id='pd_obj', ctx=Store(), lineno=1410, col_offset=4, end_lineno=1410, end_col_offset=10)], value=IfExp(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=1410, col_offset=26, end_lineno=1410, end_col_offset=36), args=[Name(id='graphs', ctx=Load(), lineno=1410, col_offset=37, end_lineno=1410, end_col_offset=43), Name(id='list', ctx=Load(), lineno=1410, col_offset=45, end_lineno=1410, end_col_offset=49)], lineno=1410, col_offset=26, end_lineno=1410, end_col_offset=50), body=Subscript(value=Name(id='graphs', ctx=Load(), lineno=1410, col_offset=13, end_lineno=1410, end_col_offset=19), slice=Constant(value=0, lineno=1410, col_offset=20, end_lineno=1410, end_col_offset=21), ctx=Load(), lineno=1410, col_offset=13, end_lineno=1410, end_col_offset=22), orelse=Name(id='graphs', ctx=Load(), lineno=1410, col_offset=56, end_lineno=1410, end_col_offset=62), lineno=1410, col_offset=13, end_lineno=1410, end_col_offset=62), lineno=1410, col_offset=4, end_lineno=1410, end_col_offset=62), Assign(targets=[Name(id='pd_graph', ctx=Store(), lineno=1411, col_offset=4, end_lineno=1411, end_col_offset=12)], value=Call(func=Name(id='cast', ctx=Load(), lineno=1411, col_offset=15, end_lineno=1411, end_col_offset=19), args=[Constant(value='PydotDot', lineno=1411, col_offset=20, end_lineno=1411, end_col_offset=30), Name(id='pd_obj', ctx=Load(), lineno=1411, col_offset=32, end_lineno=1411, end_col_offset=38)], lineno=1411, col_offset=15, end_lineno=1411, end_col_offset=39), lineno=1411, col_offset=4, end_lineno=1411, end_col_offset=39), Assign(targets=[Name(id='directed', ctx=Store(), lineno=1412, col_offset=4, end_lineno=1412, end_col_offset=12)], value=Call(func=Name(id='cast', ctx=Load(), lineno=1412, col_offset=15, end_lineno=1412, end_col_offset=19), args=[Constant(value='DiGraph', lineno=1412, col_offset=20, end_lineno=1412, end_col_offset=29), Call(func=Attribute(value=Call(func=Attribute(value=Attribute(value=Attribute(value=Name(id='nx', ctx=Load(), lineno=1412, col_offset=31, end_lineno=1412, end_col_offset=33), attr='drawing', ctx=Load(), lineno=1412, col_offset=31, end_lineno=1412, end_col_offset=41), attr='nx_pydot', ctx=Load(), lineno=1412, col_offset=31, end_lineno=1412, end_col_offset=50), attr='from_pydot', ctx=Load(), lineno=1412, col_offset=31, end_lineno=1412, end_col_offset=61), args=[Name(id='pd_graph', ctx=Load(), lineno=1412, col_offset=62, end_lineno=1412, end_col_offset=70)], lineno=1412, col_offset=31, end_lineno=1412, end_col_offset=71), attr='to_directed', ctx=Load(), lineno=1412, col_offset=31, end_lineno=1412, end_col_offset=83), lineno=1412, col_offset=31, end_lineno=1412, end_col_offset=85)], lineno=1412, col_offset=15, end_lineno=1412, end_col_offset=86), lineno=1412, col_offset=4, end_lineno=1412, end_col_offset=86), AnnAssign(target=Name(id='collapsed', ctx=Store(), lineno=1413, col_offset=4, end_lineno=1413, end_col_offset=13), annotation=Name(id='DiGraph', ctx=Load(), lineno=1413, col_offset=15, end_lineno=1413, end_col_offset=22), value=Call(func=Name(id='cast', ctx=Load(), lineno=1413, col_offset=25, end_lineno=1413, end_col_offset=29), args=[Constant(value='DiGraph', lineno=1413, col_offset=30, end_lineno=1413, end_col_offset=39), Call(func=Attribute(value=Name(id='nx', ctx=Load(), lineno=1413, col_offset=41, end_lineno=1413, end_col_offset=43), attr='DiGraph', ctx=Load(), lineno=1413, col_offset=41, end_lineno=1413, end_col_offset=51), lineno=1413, col_offset=41, end_lineno=1413, end_col_offset=53)], lineno=1413, col_offset=25, end_lineno=1413, end_col_offset=54), simple=1, lineno=1413, col_offset=4, end_lineno=1413, end_col_offset=54), Assign(targets=[Name(id='module_names', ctx=Store(), lineno=1415, col_offset=4, end_lineno=1415, end_col_offset=16)], value=DictComp(key=Name(id='node', ctx=Load(), lineno=1415, col_offset=20, end_lineno=1415, end_col_offset=24), value=Call(func=Name(id='_module_label', ctx=Load(), lineno=1415, col_offset=26, end_lineno=1415, end_col_offset=39), args=[Name(id='node', ctx=Load(), lineno=1415, col_offset=40, end_lineno=1415, end_col_offset=44), Name(id='data', ctx=Load(), lineno=1415, col_offset=46, end_lineno=1415, end_col_offset=50)], lineno=1415, col_offset=26, end_lineno=1415, end_col_offset=51), generators=[comprehension(target=Tuple(elts=[Name(id='node', ctx=Store(), lineno=1415, col_offset=56, end_lineno=1415, end_col_offset=60), Name(id='data', ctx=Store(), lineno=1415, col_offset=62, end_lineno=1415, end_col_offset=66)], ctx=Store(), lineno=1415, col_offset=56, end_lineno=1415, end_col_offset=66), iter=Call(func=Attribute(value=Name(id='directed', ctx=Load(), lineno=1415, col_offset=70, end_lineno=1415, end_col_offset=78), attr='nodes', ctx=Load(), lineno=1415, col_offset=70, end_lineno=1415, end_col_offset=84), keywords=[keyword(arg='data', value=Constant(value=True, lineno=1415, col_offset=90, end_lineno=1415, end_col_offset=94), lineno=1415, col_offset=85, end_lineno=1415, end_col_offset=94)], lineno=1415, col_offset=70, end_lineno=1415, end_col_offset=95), is_async=0)], lineno=1415, col_offset=19, end_lineno=1415, end_col_offset=96), lineno=1415, col_offset=4, end_lineno=1415, end_col_offset=96), Assign(targets=[Name(id='package_nodes', ctx=Store(), lineno=1417, col_offset=4, end_lineno=1417, end_col_offset=17)], value=SetComp(elt=Call(func=Name(id='_pkg_of', ctx=Load(), lineno=1417, col_offset=21, end_lineno=1417, end_col_offset=28), args=[Name(id='name', ctx=Load(), lineno=1417, col_offset=29, end_lineno=1417, end_col_offset=33)], lineno=1417, col_offset=21, end_lineno=1417, end_col_offset=34), generators=[comprehension(target=Name(id='name', ctx=Store(), lineno=1417, col_offset=39, end_lineno=1417, end_col_offset=43), iter=Call(func=Attribute(value=Name(id='module_names', ctx=Load(), lineno=1417, col_offset=47, end_lineno=1417, end_col_offset=59), attr='values', ctx=Load(), lineno=1417, col_offset=47, end_lineno=1417, end_col_offset=66), lineno=1417, col_offset=47, end_lineno=1417, end_col_offset=68), is_async=0)], lineno=1417, col_offset=20, end_lineno=1417, end_col_offset=69), lineno=1417, col_offset=4, end_lineno=1417, end_col_offset=69), Expr(value=Call(func=Attribute(value=Name(id='collapsed', ctx=Load(), lineno=1418, col_offset=4, end_lineno=1418, end_col_offset=13), attr='add_nodes_from', ctx=Load(), lineno=1418, col_offset=4, end_lineno=1418, end_col_offset=28), args=[Call(func=Name(id='sorted', ctx=Load(), lineno=1418, col_offset=29, end_lineno=1418, end_col_offset=35), args=[Name(id='package_nodes', ctx=Load(), lineno=1418, col_offset=36, end_lineno=1418, end_col_offset=49)], lineno=1418, col_offset=29, end_lineno=1418, end_col_offset=50)], lineno=1418, col_offset=4, end_lineno=1418, end_col_offset=51), lineno=1418, col_offset=4, end_lineno=1418, end_col_offset=51), For(target=Tuple(elts=[Name(id='source', ctx=Store(), lineno=1420, col_offset=8, end_lineno=1420, end_col_offset=14), Name(id='target', ctx=Store(), lineno=1420, col_offset=16, end_lineno=1420, end_col_offset=22)], ctx=Store(), lineno=1420, col_offset=8, end_lineno=1420, end_col_offset=22), iter=Call(func=Attribute(value=Name(id='directed', ctx=Load(), lineno=1420, col_offset=26, end_lineno=1420, end_col_offset=34), attr='edges', ctx=Load(), lineno=1420, col_offset=26, end_lineno=1420, end_col_offset=40), lineno=1420, col_offset=26, end_lineno=1420, end_col_offset=42), body=[Assign(targets=[Name(id='pkg_src', ctx=Store(), lineno=1421, col_offset=8, end_lineno=1421, end_col_offset=15)], value=Call(func=Name(id='_pkg_of', ctx=Load(), lineno=1421, col_offset=18, end_lineno=1421, end_col_offset=25), args=[Call(func=Attribute(value=Name(id='module_names', ctx=Load(), lineno=1421, col_offset=26, end_lineno=1421, end_col_offset=38), attr='get', ctx=Load(), lineno=1421, col_offset=26, end_lineno=1421, end_col_offset=42), args=[Name(id='source', ctx=Load(), lineno=1421, col_offset=43, end_lineno=1421, end_col_offset=49), Call(func=Name(id='str', ctx=Load(), lineno=1421, col_offset=51, end_lineno=1421, end_col_offset=54), args=[Name(id='source', ctx=Load(), lineno=1421, col_offset=55, end_lineno=1421, end_col_offset=61)], lineno=1421, col_offset=51, end_lineno=1421, end_col_offset=62)], lineno=1421, col_offset=26, end_lineno=1421, end_col_offset=63)], lineno=1421, col_offset=18, end_lineno=1421, end_col_offset=64), lineno=1421, col_offset=8, end_lineno=1421, end_col_offset=64), Assign(targets=[Name(id='pkg_dst', ctx=Store(), lineno=1422, col_offset=8, end_lineno=1422, end_col_offset=15)], value=Call(func=Name(id='_pkg_of', ctx=Load(), lineno=1422, col_offset=18, end_lineno=1422, end_col_offset=25), args=[Call(func=Attribute(value=Name(id='module_names', ctx=Load(), lineno=1422, col_offset=26, end_lineno=1422, end_col_offset=38), attr='get', ctx=Load(), lineno=1422, col_offset=26, end_lineno=1422, end_col_offset=42), args=[Name(id='target', ctx=Load(), lineno=1422, col_offset=43, end_lineno=1422, end_col_offset=49), Call(func=Name(id='str', ctx=Load(), lineno=1422, col_offset=51, end_lineno=1422, end_col_offset=54), args=[Name(id='target', ctx=Load(), lineno=1422, col_offset=55, end_lineno=1422, end_col_offset=61)], lineno=1422, col_offset=51, end_lineno=1422, end_col_offset=62)], lineno=1422, col_offset=26, end_lineno=1422, end_col_offset=63)], lineno=1422, col_offset=18, end_lineno=1422, end_col_offset=64), lineno=1422, col_offset=8, end_lineno=1422, end_col_offset=64), If(test=Compare(left=Name(id='pkg_src', ctx=Load(), lineno=1423, col_offset=11, end_lineno=1423, end_col_offset=18), ops=[Eq()], comparators=[Name(id='pkg_dst', ctx=Load(), lineno=1423, col_offset=22, end_lineno=1423, end_col_offset=29)], lineno=1423, col_offset=11, end_lineno=1423, end_col_offset=29), body=[Continue(lineno=1424, col_offset=12, end_lineno=1424, end_col_offset=20)], lineno=1423, col_offset=8, end_lineno=1424, end_col_offset=20), Assign(targets=[Name(id='raw_weight', ctx=Store(), lineno=1425, col_offset=8, end_lineno=1425, end_col_offset=18)], value=Call(func=Attribute(value=Call(func=Attribute(value=Name(id='collapsed', ctx=Load(), lineno=1425, col_offset=21, end_lineno=1425, end_col_offset=30), attr='get_edge_data', ctx=Load(), lineno=1425, col_offset=21, end_lineno=1425, end_col_offset=44), args=[Name(id='pkg_src', ctx=Load(), lineno=1425, col_offset=45, end_lineno=1425, end_col_offset=52), Name(id='pkg_dst', ctx=Load(), lineno=1425, col_offset=54, end_lineno=1425, end_col_offset=61), Dict(lineno=1425, col_offset=63, end_lineno=1425, end_col_offset=65)], lineno=1425, col_offset=21, end_lineno=1425, end_col_offset=66), attr='get', ctx=Load(), lineno=1425, col_offset=21, end_lineno=1425, end_col_offset=70), args=[Constant(value='weight', lineno=1425, col_offset=71, end_lineno=1425, end_col_offset=79), Constant(value=0, lineno=1425, col_offset=81, end_lineno=1425, end_col_offset=82)], lineno=1425, col_offset=21, end_lineno=1425, end_col_offset=83), lineno=1425, col_offset=8, end_lineno=1425, end_col_offset=83), Assign(targets=[Name(id='existing_weight', ctx=Store(), lineno=1426, col_offset=8, end_lineno=1426, end_col_offset=23)], value=IfExp(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=1426, col_offset=45, end_lineno=1426, end_col_offset=55), args=[Name(id='raw_weight', ctx=Load(), lineno=1426, col_offset=56, end_lineno=1426, end_col_offset=66), Tuple(elts=[Name(id='int', ctx=Load(), lineno=1426, col_offset=69, end_lineno=1426, end_col_offset=72), Name(id='float', ctx=Load(), lineno=1426, col_offset=74, end_lineno=1426, end_col_offset=79)], ctx=Load(), lineno=1426, col_offset=68, end_lineno=1426, end_col_offset=80)], lineno=1426, col_offset=45, end_lineno=1426, end_col_offset=81), body=Call(func=Name(id='int', ctx=Load(), lineno=1426, col_offset=26, end_lineno=1426, end_col_offset=29), args=[Name(id='raw_weight', ctx=Load(), lineno=1426, col_offset=30, end_lineno=1426, end_col_offset=40)], lineno=1426, col_offset=26, end_lineno=1426, end_col_offset=41), orelse=Constant(value=0, lineno=1426, col_offset=87, end_lineno=1426, end_col_offset=88), lineno=1426, col_offset=26, end_lineno=1426, end_col_offset=88), lineno=1426, col_offset=8, end_lineno=1426, end_col_offset=88), Assign(targets=[Name(id='weight', ctx=Store(), lineno=1427, col_offset=8, end_lineno=1427, end_col_offset=14)], value=BinOp(left=Name(id='existing_weight', ctx=Load(), lineno=1427, col_offset=17, end_lineno=1427, end_col_offset=32), op=Add(), right=Constant(value=1, lineno=1427, col_offset=35, end_lineno=1427, end_col_offset=36), lineno=1427, col_offset=17, end_lineno=1427, end_col_offset=36), lineno=1427, col_offset=8, end_lineno=1427, end_col_offset=36), Expr(value=Call(func=Attribute(value=Name(id='collapsed', ctx=Load(), lineno=1428, col_offset=8, end_lineno=1428, end_col_offset=17), attr='add_edge', ctx=Load(), lineno=1428, col_offset=8, end_lineno=1428, end_col_offset=26), args=[Name(id='pkg_src', ctx=Load(), lineno=1428, col_offset=27, end_lineno=1428, end_col_offset=34), Name(id='pkg_dst', ctx=Load(), lineno=1428, col_offset=36, end_lineno=1428, end_col_offset=43)], keywords=[keyword(arg='weight', value=Name(id='weight', ctx=Load(), lineno=1428, col_offset=52, end_lineno=1428, end_col_offset=58), lineno=1428, col_offset=45, end_lineno=1428, end_col_offset=58)], lineno=1428, col_offset=8, end_lineno=1428, end_col_offset=59), lineno=1428, col_offset=8, end_lineno=1428, end_col_offset=59)], lineno=1420, col_offset=4, end_lineno=1428, end_col_offset=59), Return(value=Name(id='collapsed', ctx=Load(), lineno=1429, col_offset=11, end_lineno=1429, end_col_offset=20), lineno=1429, col_offset=4, end_lineno=1429, end_col_offset=20)], returns=Name(id='DiGraph', ctx=Load(), lineno=1387, col_offset=44, end_lineno=1387, end_col_offset=51), lineno=1387, col_offset=0, end_lineno=1429, end_col_offset=20), FunctionDef(name='analyze_graph', args=arguments(args=[arg(arg='graph', annotation=Name(id='DiGraph', ctx=Load(), lineno=1432, col_offset=25, end_lineno=1432, end_col_offset=32), lineno=1432, col_offset=18, end_lineno=1432, end_col_offset=32), arg(arg='layers', annotation=Name(id='LayerConfig', ctx=Load(), lineno=1432, col_offset=42, end_lineno=1432, end_col_offset=53), lineno=1432, col_offset=34, end_lineno=1432, end_col_offset=53)]), body=[Expr(value=Constant(value='Analyse a collapsed dependency graph and surface policy signals.\n\n    Parameters\n    ----------\n    graph : DiGraph\n        Collapsed package dependency graph.\n    layers : LayerConfig\n        Layer configuration mapping.\n\n    Returns\n    -------\n    AnalysisResult\n        Dictionary with cycle analysis, SCC summary, and policy signals.\n\n    Raises\n    ------\n    RuntimeError\n        If networkx is not available.\n    ', lineno=1433, col_offset=4, end_lineno=1451, end_col_offset=7), lineno=1433, col_offset=4, end_lineno=1451, end_col_offset=7), If(test=Compare(left=Name(id='nx', ctx=Load(), lineno=1452, col_offset=7, end_lineno=1452, end_col_offset=9), ops=[Is()], comparators=[Constant(value=None, lineno=1452, col_offset=13, end_lineno=1452, end_col_offset=17)], lineno=1452, col_offset=7, end_lineno=1452, end_col_offset=17), body=[Assign(targets=[Name(id='message', ctx=Store(), lineno=1453, col_offset=8, end_lineno=1453, end_col_offset=15)], value=Constant(value='networkx is required for graph analysis', lineno=1453, col_offset=18, end_lineno=1453, end_col_offset=59), lineno=1453, col_offset=8, end_lineno=1453, end_col_offset=59), Raise(exc=Call(func=Name(id='RuntimeError', ctx=Load(), lineno=1454, col_offset=14, end_lineno=1454, end_col_offset=26), args=[Name(id='message', ctx=Load(), lineno=1454, col_offset=27, end_lineno=1454, end_col_offset=34)], lineno=1454, col_offset=14, end_lineno=1454, end_col_offset=35), lineno=1454, col_offset=8, end_lineno=1454, end_col_offset=35)], lineno=1452, col_offset=4, end_lineno=1454, end_col_offset=35), Assign(targets=[Name(id='order', ctx=Store(), lineno=1456, col_offset=4, end_lineno=1456, end_col_offset=9)], value=Call(func=Name(id='_coerce_sequence', ctx=Load(), lineno=1456, col_offset=12, end_lineno=1456, end_col_offset=28), args=[Call(func=Attribute(value=Name(id='layers', ctx=Load(), lineno=1456, col_offset=29, end_lineno=1456, end_col_offset=35), attr='get', ctx=Load(), lineno=1456, col_offset=29, end_lineno=1456, end_col_offset=39), args=[Constant(value='order', lineno=1456, col_offset=40, end_lineno=1456, end_col_offset=47)], lineno=1456, col_offset=29, end_lineno=1456, end_col_offset=48)], lineno=1456, col_offset=12, end_lineno=1456, end_col_offset=49), lineno=1456, col_offset=4, end_lineno=1456, end_col_offset=49), Assign(targets=[Name(id='pkg2layer', ctx=Store(), lineno=1457, col_offset=4, end_lineno=1457, end_col_offset=13)], value=Call(func=Name(id='_coerce_mapping', ctx=Load(), lineno=1457, col_offset=16, end_lineno=1457, end_col_offset=31), args=[Call(func=Attribute(value=Name(id='layers', ctx=Load(), lineno=1457, col_offset=32, end_lineno=1457, end_col_offset=38), attr='get', ctx=Load(), lineno=1457, col_offset=32, end_lineno=1457, end_col_offset=42), args=[Constant(value='packages', lineno=1457, col_offset=43, end_lineno=1457, end_col_offset=53)], lineno=1457, col_offset=32, end_lineno=1457, end_col_offset=54)], lineno=1457, col_offset=16, end_lineno=1457, end_col_offset=55), lineno=1457, col_offset=4, end_lineno=1457, end_col_offset=55), Assign(targets=[Name(id='allow_outward', ctx=Store(), lineno=1458, col_offset=4, end_lineno=1458, end_col_offset=17)], value=Call(func=Name(id='_allow_outward_rule', ctx=Load(), lineno=1458, col_offset=20, end_lineno=1458, end_col_offset=39), args=[Name(id='layers', ctx=Load(), lineno=1458, col_offset=40, end_lineno=1458, end_col_offset=46)], lineno=1458, col_offset=20, end_lineno=1458, end_col_offset=47), lineno=1458, col_offset=4, end_lineno=1458, end_col_offset=47), Assign(targets=[Name(id='rank', ctx=Store(), lineno=1459, col_offset=4, end_lineno=1459, end_col_offset=8)], value=Call(func=Name(id='_rank_map', ctx=Load(), lineno=1459, col_offset=11, end_lineno=1459, end_col_offset=20), args=[Name(id='order', ctx=Load(), lineno=1459, col_offset=21, end_lineno=1459, end_col_offset=26)], lineno=1459, col_offset=11, end_lineno=1459, end_col_offset=27), lineno=1459, col_offset=4, end_lineno=1459, end_col_offset=27), Assign(targets=[Name(id='pruned', ctx=Store(), lineno=1461, col_offset=4, end_lineno=1461, end_col_offset=10)], value=Call(func=Name(id='_prune_outward_edges', ctx=Load(), lineno=1461, col_offset=13, end_lineno=1461, end_col_offset=33), args=[Name(id='graph', ctx=Load(), lineno=1461, col_offset=34, end_lineno=1461, end_col_offset=39), Name(id='pkg2layer', ctx=Load(), lineno=1461, col_offset=41, end_lineno=1461, end_col_offset=50), Name(id='rank', ctx=Load(), lineno=1461, col_offset=52, end_lineno=1461, end_col_offset=56)], keywords=[keyword(arg='allow_outward', value=Name(id='allow_outward', ctx=Load(), lineno=1461, col_offset=72, end_lineno=1461, end_col_offset=85), lineno=1461, col_offset=58, end_lineno=1461, end_col_offset=85)], lineno=1461, col_offset=13, end_lineno=1461, end_col_offset=86), lineno=1461, col_offset=4, end_lineno=1461, end_col_offset=86), Assign(targets=[Name(id='cycle_config', ctx=Store(), lineno=1462, col_offset=4, end_lineno=1462, end_col_offset=16)], value=Call(func=Name(id='_cycle_config', ctx=Load(), lineno=1462, col_offset=19, end_lineno=1462, end_col_offset=32), lineno=1462, col_offset=19, end_lineno=1462, end_col_offset=34), lineno=1462, col_offset=4, end_lineno=1462, end_col_offset=34), Assign(targets=[Tuple(elts=[Name(id='cycles', ctx=Store(), lineno=1464, col_offset=4, end_lineno=1464, end_col_offset=10), Name(id='skipped', ctx=Store(), lineno=1464, col_offset=12, end_lineno=1464, end_col_offset=19), Name(id='scc_summary', ctx=Store(), lineno=1464, col_offset=21, end_lineno=1464, end_col_offset=32)], ctx=Store(), lineno=1464, col_offset=4, end_lineno=1464, end_col_offset=32)], value=Call(func=Name(id='_enumerate_cycles', ctx=Load(), lineno=1464, col_offset=35, end_lineno=1464, end_col_offset=52), args=[Name(id='pruned', ctx=Load(), lineno=1465, col_offset=8, end_lineno=1465, end_col_offset=14), Attribute(value=Name(id='cycle_config', ctx=Load(), lineno=1466, col_offset=8, end_lineno=1466, end_col_offset=20), attr='limit', ctx=Load(), lineno=1466, col_offset=8, end_lineno=1466, end_col_offset=26), Attribute(value=Name(id='cycle_config', ctx=Load(), lineno=1467, col_offset=8, end_lineno=1467, end_col_offset=20), attr='length_bound', ctx=Load(), lineno=1467, col_offset=8, end_lineno=1467, end_col_offset=33), Attribute(value=Name(id='cycle_config', ctx=Load(), lineno=1468, col_offset=8, end_lineno=1468, end_col_offset=20), attr='edge_budget', ctx=Load(), lineno=1468, col_offset=8, end_lineno=1468, end_col_offset=32), Name(id='graph', ctx=Load(), lineno=1469, col_offset=8, end_lineno=1469, end_col_offset=13)], lineno=1464, col_offset=35, end_lineno=1470, end_col_offset=5), lineno=1464, col_offset=4, end_lineno=1470, end_col_offset=5), If(test=Name(id='skipped', ctx=Load(), lineno=1472, col_offset=7, end_lineno=1472, end_col_offset=14), body=[Assign(targets=[Name(id='centrality', ctx=Store(), lineno=1473, col_offset=8, end_lineno=1473, end_col_offset=18)], value=Call(func=Name(id='_degree_centrality', ctx=Load(), lineno=1473, col_offset=21, end_lineno=1473, end_col_offset=39), args=[Name(id='pruned', ctx=Load(), lineno=1473, col_offset=40, end_lineno=1473, end_col_offset=46)], lineno=1473, col_offset=21, end_lineno=1473, end_col_offset=47), lineno=1473, col_offset=8, end_lineno=1473, end_col_offset=47), AnnAssign(target=Name(id='violations', ctx=Store(), lineno=1474, col_offset=8, end_lineno=1474, end_col_offset=18), annotation=Name(id='CycleList', ctx=Load(), lineno=1474, col_offset=20, end_lineno=1474, end_col_offset=29), value=List(ctx=Load(), lineno=1474, col_offset=32, end_lineno=1474, end_col_offset=34), simple=1, lineno=1474, col_offset=8, end_lineno=1474, end_col_offset=34)], orelse=[Assign(targets=[Name(id='centrality', ctx=Store(), lineno=1476, col_offset=8, end_lineno=1476, end_col_offset=18)], value=Call(func=Name(id='_degree_centrality', ctx=Load(), lineno=1476, col_offset=21, end_lineno=1476, end_col_offset=39), args=[Name(id='graph', ctx=Load(), lineno=1476, col_offset=40, end_lineno=1476, end_col_offset=45)], lineno=1476, col_offset=21, end_lineno=1476, end_col_offset=46), lineno=1476, col_offset=8, end_lineno=1476, end_col_offset=46), Assign(targets=[Name(id='violations', ctx=Store(), lineno=1477, col_offset=8, end_lineno=1477, end_col_offset=18)], value=Call(func=Name(id='_collect_layer_violations', ctx=Load(), lineno=1477, col_offset=21, end_lineno=1477, end_col_offset=46), args=[Name(id='graph', ctx=Load(), lineno=1478, col_offset=12, end_lineno=1478, end_col_offset=17), Name(id='rank', ctx=Load(), lineno=1479, col_offset=12, end_lineno=1479, end_col_offset=16), Name(id='pkg2layer', ctx=Load(), lineno=1480, col_offset=12, end_lineno=1480, end_col_offset=21)], keywords=[keyword(arg='allow_outward', value=Name(id='allow_outward', ctx=Load(), lineno=1481, col_offset=26, end_lineno=1481, end_col_offset=39), lineno=1481, col_offset=12, end_lineno=1481, end_col_offset=39)], lineno=1477, col_offset=21, end_lineno=1482, end_col_offset=9), lineno=1477, col_offset=8, end_lineno=1482, end_col_offset=9)], lineno=1472, col_offset=4, end_lineno=1482, end_col_offset=9), AnnAssign(target=Name(id='result', ctx=Store(), lineno=1484, col_offset=4, end_lineno=1484, end_col_offset=10), annotation=Name(id='AnalysisResult', ctx=Load(), lineno=1484, col_offset=12, end_lineno=1484, end_col_offset=26), value=Dict(keys=[Constant(value='cycles', lineno=1485, col_offset=8, end_lineno=1485, end_col_offset=16), Constant(value='centrality', lineno=1486, col_offset=8, end_lineno=1486, end_col_offset=20), Constant(value='layer_violations', lineno=1487, col_offset=8, end_lineno=1487, end_col_offset=26), Constant(value='cycle_enumeration_skipped', lineno=1488, col_offset=8, end_lineno=1488, end_col_offset=35)], values=[Name(id='cycles', ctx=Load(), lineno=1485, col_offset=18, end_lineno=1485, end_col_offset=24), Name(id='centrality', ctx=Load(), lineno=1486, col_offset=22, end_lineno=1486, end_col_offset=32), Name(id='violations', ctx=Load(), lineno=1487, col_offset=28, end_lineno=1487, end_col_offset=38), Name(id='skipped', ctx=Load(), lineno=1488, col_offset=37, end_lineno=1488, end_col_offset=44)], lineno=1484, col_offset=29, end_lineno=1489, end_col_offset=5), simple=1, lineno=1484, col_offset=4, end_lineno=1489, end_col_offset=5), If(test=Name(id='scc_summary', ctx=Load(), lineno=1490, col_offset=7, end_lineno=1490, end_col_offset=18), body=[Assign(targets=[Subscript(value=Name(id='result', ctx=Load(), lineno=1491, col_offset=8, end_lineno=1491, end_col_offset=14), slice=Constant(value='scc_summary', lineno=1491, col_offset=15, end_lineno=1491, end_col_offset=28), ctx=Store(), lineno=1491, col_offset=8, end_lineno=1491, end_col_offset=29)], value=Name(id='scc_summary', ctx=Load(), lineno=1491, col_offset=32, end_lineno=1491, end_col_offset=43), lineno=1491, col_offset=8, end_lineno=1491, end_col_offset=43)], lineno=1490, col_offset=4, end_lineno=1491, end_col_offset=43), Return(value=Name(id='result', ctx=Load(), lineno=1492, col_offset=11, end_lineno=1492, end_col_offset=17), lineno=1492, col_offset=4, end_lineno=1492, end_col_offset=17)], returns=Name(id='AnalysisResult', ctx=Load(), lineno=1432, col_offset=58, end_lineno=1432, end_col_offset=72), lineno=1432, col_offset=0, end_lineno=1492, end_col_offset=17), FunctionDef(name='style_and_render', args=arguments(args=[arg(arg='graph', annotation=Name(id='DiGraph', ctx=Load(), lineno=1496, col_offset=11, end_lineno=1496, end_col_offset=18), lineno=1496, col_offset=4, end_lineno=1496, end_col_offset=18), arg(arg='layers', annotation=Name(id='LayerConfig', ctx=Load(), lineno=1497, col_offset=12, end_lineno=1497, end_col_offset=23), lineno=1497, col_offset=4, end_lineno=1497, end_col_offset=23), arg(arg='analysis', annotation=Subscript(value=Name(id='Mapping', ctx=Load(), lineno=1498, col_offset=14, end_lineno=1498, end_col_offset=21), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=1498, col_offset=22, end_lineno=1498, end_col_offset=25), Name(id='object', ctx=Load(), lineno=1498, col_offset=27, end_lineno=1498, end_col_offset=33)], ctx=Load(), lineno=1498, col_offset=22, end_lineno=1498, end_col_offset=33), ctx=Load(), lineno=1498, col_offset=14, end_lineno=1498, end_col_offset=34), lineno=1498, col_offset=4, end_lineno=1498, end_col_offset=34), arg(arg='out_svg', annotation=Name(id='Path', ctx=Load(), lineno=1499, col_offset=13, end_lineno=1499, end_col_offset=17), lineno=1499, col_offset=4, end_lineno=1499, end_col_offset=17), arg(arg='fmt', annotation=Name(id='str', ctx=Load(), lineno=1500, col_offset=9, end_lineno=1500, end_col_offset=12), lineno=1500, col_offset=4, end_lineno=1500, end_col_offset=12)], defaults=[Constant(value='svg', lineno=1500, col_offset=15, end_lineno=1500, end_col_offset=20)]), body=[Expr(value=Constant(value='Render the collapsed graph with styling derived from analysis metadata.\n\n    Parameters\n    ----------\n    graph : DiGraph\n        Directed dependency graph collapsed to packages.\n    layers : LayerConfig\n        Layer configuration describing allowed dependencies.\n    analysis : Mapping[str, object]\n        Precomputed metrics produced by :func:`analyze_graph`.\n    out_svg : Path\n        Destination path for the rendered image.\n    fmt : str, optional\n        Rendering format (``"svg"`` or ``"png"``) (default: "svg").\n    ', lineno=1502, col_offset=4, end_lineno=1516, end_col_offset=7), lineno=1502, col_offset=4, end_lineno=1516, end_col_offset=7), Assign(targets=[Name(id='pydot_module', ctx=Store(), lineno=1517, col_offset=4, end_lineno=1517, end_col_offset=16)], value=Call(func=Name(id='_require_pydot', ctx=Load(), lineno=1517, col_offset=19, end_lineno=1517, end_col_offset=33), lineno=1517, col_offset=19, end_lineno=1517, end_col_offset=35), lineno=1517, col_offset=4, end_lineno=1517, end_col_offset=35), Assign(targets=[Name(id='pkg2layer', ctx=Store(), lineno=1518, col_offset=4, end_lineno=1518, end_col_offset=13)], value=Call(func=Name(id='_coerce_mapping', ctx=Load(), lineno=1518, col_offset=16, end_lineno=1518, end_col_offset=31), args=[Call(func=Attribute(value=Name(id='layers', ctx=Load(), lineno=1518, col_offset=32, end_lineno=1518, end_col_offset=38), attr='get', ctx=Load(), lineno=1518, col_offset=32, end_lineno=1518, end_col_offset=42), args=[Constant(value='packages', lineno=1518, col_offset=43, end_lineno=1518, end_col_offset=53)], lineno=1518, col_offset=32, end_lineno=1518, end_col_offset=54)], lineno=1518, col_offset=16, end_lineno=1518, end_col_offset=55), lineno=1518, col_offset=4, end_lineno=1518, end_col_offset=55), Assign(targets=[Name(id='centrality', ctx=Store(), lineno=1519, col_offset=4, end_lineno=1519, end_col_offset=14)], value=Call(func=Name(id='cast', ctx=Load(), lineno=1519, col_offset=17, end_lineno=1519, end_col_offset=21), args=[Constant(value='dict[str, float]', lineno=1519, col_offset=22, end_lineno=1519, end_col_offset=40), Call(func=Attribute(value=Name(id='analysis', ctx=Load(), lineno=1519, col_offset=42, end_lineno=1519, end_col_offset=50), attr='get', ctx=Load(), lineno=1519, col_offset=42, end_lineno=1519, end_col_offset=54), args=[Constant(value='centrality', lineno=1519, col_offset=55, end_lineno=1519, end_col_offset=67), Dict(lineno=1519, col_offset=69, end_lineno=1519, end_col_offset=71)], lineno=1519, col_offset=42, end_lineno=1519, end_col_offset=72)], lineno=1519, col_offset=17, end_lineno=1519, end_col_offset=73), lineno=1519, col_offset=4, end_lineno=1519, end_col_offset=73), Assign(targets=[Name(id='threshold', ctx=Store(), lineno=1520, col_offset=4, end_lineno=1520, end_col_offset=13)], value=Call(func=Name(id='_centrality_threshold', ctx=Load(), lineno=1520, col_offset=16, end_lineno=1520, end_col_offset=37), args=[Name(id='centrality', ctx=Load(), lineno=1520, col_offset=38, end_lineno=1520, end_col_offset=48), Constant(value=0.8, lineno=1520, col_offset=50, end_lineno=1520, end_col_offset=54)], lineno=1520, col_offset=16, end_lineno=1520, end_col_offset=55), lineno=1520, col_offset=4, end_lineno=1520, end_col_offset=55), Assign(targets=[Name(id='cycle_edges', ctx=Store(), lineno=1521, col_offset=4, end_lineno=1521, end_col_offset=15)], value=Call(func=Name(id='_extract_cycle_edges', ctx=Load(), lineno=1521, col_offset=18, end_lineno=1521, end_col_offset=38), args=[Call(func=Name(id='cast', ctx=Load(), lineno=1521, col_offset=39, end_lineno=1521, end_col_offset=43), args=[Constant(value='CycleList', lineno=1521, col_offset=44, end_lineno=1521, end_col_offset=55), Call(func=Attribute(value=Name(id='analysis', ctx=Load(), lineno=1521, col_offset=57, end_lineno=1521, end_col_offset=65), attr='get', ctx=Load(), lineno=1521, col_offset=57, end_lineno=1521, end_col_offset=69), args=[Constant(value='cycles', lineno=1521, col_offset=70, end_lineno=1521, end_col_offset=78), List(ctx=Load(), lineno=1521, col_offset=80, end_lineno=1521, end_col_offset=82)], lineno=1521, col_offset=57, end_lineno=1521, end_col_offset=83)], lineno=1521, col_offset=39, end_lineno=1521, end_col_offset=84)], lineno=1521, col_offset=18, end_lineno=1521, end_col_offset=85), lineno=1521, col_offset=4, end_lineno=1521, end_col_offset=85), AnnAssign(target=Name(id='dot_graph', ctx=Store(), lineno=1523, col_offset=4, end_lineno=1523, end_col_offset=13), annotation=Name(id='PydotDot', ctx=Load(), lineno=1523, col_offset=15, end_lineno=1523, end_col_offset=23), value=Call(func=Attribute(value=Name(id='pydot_module', ctx=Load(), lineno=1523, col_offset=26, end_lineno=1523, end_col_offset=38), attr='Dot', ctx=Load(), lineno=1523, col_offset=26, end_lineno=1523, end_col_offset=42), keywords=[keyword(arg='graph_type', value=Constant(value='digraph', lineno=1523, col_offset=54, end_lineno=1523, end_col_offset=63), lineno=1523, col_offset=43, end_lineno=1523, end_col_offset=63), keyword(arg='rankdir', value=Constant(value='LR', lineno=1523, col_offset=73, end_lineno=1523, end_col_offset=77), lineno=1523, col_offset=65, end_lineno=1523, end_col_offset=77)], lineno=1523, col_offset=26, end_lineno=1523, end_col_offset=78), simple=1, lineno=1523, col_offset=4, end_lineno=1523, end_col_offset=78), Expr(value=Call(func=Name(id='_add_graph_nodes', ctx=Load(), lineno=1524, col_offset=4, end_lineno=1524, end_col_offset=20), args=[Name(id='dot_graph', ctx=Load(), lineno=1524, col_offset=21, end_lineno=1524, end_col_offset=30), Name(id='graph', ctx=Load(), lineno=1524, col_offset=32, end_lineno=1524, end_col_offset=37), Name(id='pkg2layer', ctx=Load(), lineno=1524, col_offset=39, end_lineno=1524, end_col_offset=48), Name(id='centrality', ctx=Load(), lineno=1524, col_offset=50, end_lineno=1524, end_col_offset=60), Name(id='threshold', ctx=Load(), lineno=1524, col_offset=62, end_lineno=1524, end_col_offset=71)], lineno=1524, col_offset=4, end_lineno=1524, end_col_offset=72), lineno=1524, col_offset=4, end_lineno=1524, end_col_offset=72), Expr(value=Call(func=Name(id='_add_graph_edges', ctx=Load(), lineno=1525, col_offset=4, end_lineno=1525, end_col_offset=20), args=[Name(id='dot_graph', ctx=Load(), lineno=1525, col_offset=21, end_lineno=1525, end_col_offset=30), Name(id='graph', ctx=Load(), lineno=1525, col_offset=32, end_lineno=1525, end_col_offset=37), Name(id='pkg2layer', ctx=Load(), lineno=1525, col_offset=39, end_lineno=1525, end_col_offset=48), Name(id='cycle_edges', ctx=Load(), lineno=1525, col_offset=50, end_lineno=1525, end_col_offset=61)], lineno=1525, col_offset=4, end_lineno=1525, end_col_offset=62), lineno=1525, col_offset=4, end_lineno=1525, end_col_offset=62), Assign(targets=[Name(id='renderer', ctx=Store(), lineno=1527, col_offset=4, end_lineno=1527, end_col_offset=12)], value=Call(func=Name(id='cast', ctx=Load(), lineno=1527, col_offset=15, end_lineno=1527, end_col_offset=19), args=[Constant(value='Any', lineno=1527, col_offset=20, end_lineno=1527, end_col_offset=25), Name(id='dot_graph', ctx=Load(), lineno=1527, col_offset=27, end_lineno=1527, end_col_offset=36)], lineno=1527, col_offset=15, end_lineno=1527, end_col_offset=37), lineno=1527, col_offset=4, end_lineno=1527, end_col_offset=37), Assign(targets=[Name(id='payload', ctx=Store(), lineno=1528, col_offset=4, end_lineno=1528, end_col_offset=11)], value=IfExp(test=Compare(left=Name(id='fmt', ctx=Load(), lineno=1528, col_offset=39, end_lineno=1528, end_col_offset=42), ops=[Eq()], comparators=[Constant(value='svg', lineno=1528, col_offset=46, end_lineno=1528, end_col_offset=51)], lineno=1528, col_offset=39, end_lineno=1528, end_col_offset=51), body=Call(func=Attribute(value=Name(id='renderer', ctx=Load(), lineno=1528, col_offset=14, end_lineno=1528, end_col_offset=22), attr='create_svg', ctx=Load(), lineno=1528, col_offset=14, end_lineno=1528, end_col_offset=33), lineno=1528, col_offset=14, end_lineno=1528, end_col_offset=35), orelse=Call(func=Attribute(value=Name(id='renderer', ctx=Load(), lineno=1528, col_offset=57, end_lineno=1528, end_col_offset=65), attr='create_png', ctx=Load(), lineno=1528, col_offset=57, end_lineno=1528, end_col_offset=76), lineno=1528, col_offset=57, end_lineno=1528, end_col_offset=78), lineno=1528, col_offset=14, end_lineno=1528, end_col_offset=78), lineno=1528, col_offset=4, end_lineno=1528, end_col_offset=78), Expr(value=Call(func=Attribute(value=Name(id='out_svg', ctx=Load(), lineno=1529, col_offset=4, end_lineno=1529, end_col_offset=11), attr='write_bytes', ctx=Load(), lineno=1529, col_offset=4, end_lineno=1529, end_col_offset=23), args=[Name(id='payload', ctx=Load(), lineno=1529, col_offset=24, end_lineno=1529, end_col_offset=31)], lineno=1529, col_offset=4, end_lineno=1529, end_col_offset=32), lineno=1529, col_offset=4, end_lineno=1529, end_col_offset=32)], returns=Constant(value=None, lineno=1501, col_offset=5, end_lineno=1501, end_col_offset=9), lineno=1495, col_offset=0, end_lineno=1529, end_col_offset=32), FunctionDef(name='write_meta', args=arguments(args=[arg(arg='meta', annotation=Subscript(value=Name(id='Mapping', ctx=Load(), lineno=1532, col_offset=21, end_lineno=1532, end_col_offset=28), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=1532, col_offset=29, end_lineno=1532, end_col_offset=32), Name(id='object', ctx=Load(), lineno=1532, col_offset=34, end_lineno=1532, end_col_offset=40)], ctx=Load(), lineno=1532, col_offset=29, end_lineno=1532, end_col_offset=40), ctx=Load(), lineno=1532, col_offset=21, end_lineno=1532, end_col_offset=41), lineno=1532, col_offset=15, end_lineno=1532, end_col_offset=41), arg(arg='out_json', annotation=Name(id='Path', ctx=Load(), lineno=1532, col_offset=53, end_lineno=1532, end_col_offset=57), lineno=1532, col_offset=43, end_lineno=1532, end_col_offset=57)]), body=[Expr(value=Constant(value='Compute write meta.\n\n    Carry out the write meta operation for the surrounding component. Generated documentation highlights how this helper collaborates with neighbouring utilities. Callers rely on the routine to remain stable across releases.\n\n    Parameters\n    ----------\n    meta : Mapping[str, object]\n        Description for ``meta``.\n    out_json : Path\n        Description for ``out_json``.\n\n    Examples\n    --------\n    >>> from tools.docs.build_graphs import write_meta\n    >>> write_meta(..., ...)  # doctest: +ELLIPSIS\n    ', lineno=1533, col_offset=4, end_lineno=1548, end_col_offset=7), lineno=1533, col_offset=4, end_lineno=1548, end_col_offset=7), Expr(value=Call(func=Attribute(value=Name(id='out_json', ctx=Load(), lineno=1549, col_offset=4, end_lineno=1549, end_col_offset=12), attr='write_text', ctx=Load(), lineno=1549, col_offset=4, end_lineno=1549, end_col_offset=23), args=[Call(func=Attribute(value=Name(id='json', ctx=Load(), lineno=1549, col_offset=24, end_lineno=1549, end_col_offset=28), attr='dumps', ctx=Load(), lineno=1549, col_offset=24, end_lineno=1549, end_col_offset=34), args=[Call(func=Name(id='dict', ctx=Load(), lineno=1549, col_offset=35, end_lineno=1549, end_col_offset=39), args=[Name(id='meta', ctx=Load(), lineno=1549, col_offset=40, end_lineno=1549, end_col_offset=44)], lineno=1549, col_offset=35, end_lineno=1549, end_col_offset=45)], keywords=[keyword(arg='indent', value=Constant(value=2, lineno=1549, col_offset=54, end_lineno=1549, end_col_offset=55), lineno=1549, col_offset=47, end_lineno=1549, end_col_offset=55)], lineno=1549, col_offset=24, end_lineno=1549, end_col_offset=56)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=1549, col_offset=67, end_lineno=1549, end_col_offset=74), lineno=1549, col_offset=58, end_lineno=1549, end_col_offset=74)], lineno=1549, col_offset=4, end_lineno=1549, end_col_offset=75), lineno=1549, col_offset=4, end_lineno=1549, end_col_offset=75)], returns=Constant(value=None, lineno=1532, col_offset=62, end_lineno=1532, end_col_offset=66), lineno=1532, col_offset=0, end_lineno=1549, end_col_offset=75), FunctionDef(name='enforce_policy', args=arguments(args=[arg(arg='analysis', annotation=Subscript(value=Name(id='Mapping', ctx=Load(), lineno=1553, col_offset=14, end_lineno=1553, end_col_offset=21), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=1553, col_offset=22, end_lineno=1553, end_col_offset=25), Name(id='object', ctx=Load(), lineno=1553, col_offset=27, end_lineno=1553, end_col_offset=33)], ctx=Load(), lineno=1553, col_offset=22, end_lineno=1553, end_col_offset=33), ctx=Load(), lineno=1553, col_offset=14, end_lineno=1553, end_col_offset=34), lineno=1553, col_offset=4, end_lineno=1553, end_col_offset=34), arg(arg='allow', annotation=Subscript(value=Name(id='Mapping', ctx=Load(), lineno=1554, col_offset=11, end_lineno=1554, end_col_offset=18), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=1554, col_offset=19, end_lineno=1554, end_col_offset=22), Name(id='object', ctx=Load(), lineno=1554, col_offset=24, end_lineno=1554, end_col_offset=30)], ctx=Load(), lineno=1554, col_offset=19, end_lineno=1554, end_col_offset=30), ctx=Load(), lineno=1554, col_offset=11, end_lineno=1554, end_col_offset=31), lineno=1554, col_offset=4, end_lineno=1554, end_col_offset=31)], kwonlyargs=[arg(arg='fail_cycles', annotation=Name(id='bool', ctx=Load(), lineno=1556, col_offset=17, end_lineno=1556, end_col_offset=21), lineno=1556, col_offset=4, end_lineno=1556, end_col_offset=21), arg(arg='fail_layers', annotation=Name(id='bool', ctx=Load(), lineno=1557, col_offset=17, end_lineno=1557, end_col_offset=21), lineno=1557, col_offset=4, end_lineno=1557, end_col_offset=21)], kw_defaults=[None, None]), body=[Expr(value=Constant(value='Compute enforce policy.\n\n    Carry out the enforce policy operation for the surrounding component. Generated documentation highlights how this helper collaborates with neighbouring utilities. Callers rely on the routine to remain stable across releases.\n\n    Parameters\n    ----------\n    analysis : Mapping[str, object]\n        Description for ``analysis``.\n    allow : Mapping[str, object]\n        Description for ``allow``.\n    fail_cycles : bool, optional\n        Description for ``fail_cycles``. Keyword-only argument.\n    fail_layers : bool, optional\n        Description for ``fail_layers``. Keyword-only argument.\n\n    Raises\n    ------\n    GraphPolicyError\n        Raised when policy violations are detected.\n    ', lineno=1559, col_offset=4, end_lineno=1578, end_col_offset=7), lineno=1559, col_offset=4, end_lineno=1578, end_col_offset=7), Assign(targets=[Name(id='allowed_cycle_set', ctx=Store(), lineno=1579, col_offset=4, end_lineno=1579, end_col_offset=21)], value=SetComp(elt=Call(func=Name(id='tuple', ctx=Load(), lineno=1579, col_offset=25, end_lineno=1579, end_col_offset=30), args=[Name(id='cycle', ctx=Load(), lineno=1579, col_offset=31, end_lineno=1579, end_col_offset=36)], lineno=1579, col_offset=25, end_lineno=1579, end_col_offset=37), generators=[comprehension(target=Name(id='cycle', ctx=Store(), lineno=1579, col_offset=42, end_lineno=1579, end_col_offset=47), iter=Call(func=Name(id='_sequence_of_sequences', ctx=Load(), lineno=1579, col_offset=51, end_lineno=1579, end_col_offset=73), args=[Call(func=Attribute(value=Name(id='allow', ctx=Load(), lineno=1579, col_offset=74, end_lineno=1579, end_col_offset=79), attr='get', ctx=Load(), lineno=1579, col_offset=74, end_lineno=1579, end_col_offset=83), args=[Constant(value='cycles', lineno=1579, col_offset=84, end_lineno=1579, end_col_offset=92)], lineno=1579, col_offset=74, end_lineno=1579, end_col_offset=93)], lineno=1579, col_offset=51, end_lineno=1579, end_col_offset=94), is_async=0)], lineno=1579, col_offset=24, end_lineno=1579, end_col_offset=95), lineno=1579, col_offset=4, end_lineno=1579, end_col_offset=95), Assign(targets=[Name(id='allowed_edge_set', ctx=Store(), lineno=1580, col_offset=4, end_lineno=1580, end_col_offset=20)], value=SetComp(elt=Call(func=Name(id='tuple', ctx=Load(), lineno=1581, col_offset=8, end_lineno=1581, end_col_offset=13), args=[Name(id='edge', ctx=Load(), lineno=1581, col_offset=14, end_lineno=1581, end_col_offset=18)], lineno=1581, col_offset=8, end_lineno=1581, end_col_offset=19), generators=[comprehension(target=Name(id='edge', ctx=Store(), lineno=1582, col_offset=12, end_lineno=1582, end_col_offset=16), iter=Call(func=Name(id='_sequence_of_sequences', ctx=Load(), lineno=1582, col_offset=20, end_lineno=1582, end_col_offset=42), args=[Call(func=Attribute(value=Name(id='allow', ctx=Load(), lineno=1582, col_offset=43, end_lineno=1582, end_col_offset=48), attr='get', ctx=Load(), lineno=1582, col_offset=43, end_lineno=1582, end_col_offset=52), args=[Constant(value='edges', lineno=1582, col_offset=53, end_lineno=1582, end_col_offset=60)], lineno=1582, col_offset=43, end_lineno=1582, end_col_offset=61)], lineno=1582, col_offset=20, end_lineno=1582, end_col_offset=62), ifs=[Compare(left=Call(func=Name(id='len', ctx=Load(), lineno=1583, col_offset=11, end_lineno=1583, end_col_offset=14), args=[Name(id='edge', ctx=Load(), lineno=1583, col_offset=15, end_lineno=1583, end_col_offset=19)], lineno=1583, col_offset=11, end_lineno=1583, end_col_offset=20), ops=[Eq()], comparators=[Name(id='EDGE_COMPONENTS', ctx=Load(), lineno=1583, col_offset=24, end_lineno=1583, end_col_offset=39)], lineno=1583, col_offset=11, end_lineno=1583, end_col_offset=39)], is_async=0)], lineno=1580, col_offset=23, end_lineno=1584, end_col_offset=5), lineno=1580, col_offset=4, end_lineno=1584, end_col_offset=5), Assign(targets=[Name(id='cycles', ctx=Store(), lineno=1586, col_offset=4, end_lineno=1586, end_col_offset=10)], value=Call(func=Name(id='cast', ctx=Load(), lineno=1586, col_offset=13, end_lineno=1586, end_col_offset=17), args=[Constant(value='CycleList', lineno=1586, col_offset=18, end_lineno=1586, end_col_offset=29), Call(func=Attribute(value=Name(id='analysis', ctx=Load(), lineno=1586, col_offset=31, end_lineno=1586, end_col_offset=39), attr='get', ctx=Load(), lineno=1586, col_offset=31, end_lineno=1586, end_col_offset=43), args=[Constant(value='cycles', lineno=1586, col_offset=44, end_lineno=1586, end_col_offset=52), List(ctx=Load(), lineno=1586, col_offset=54, end_lineno=1586, end_col_offset=56)], lineno=1586, col_offset=31, end_lineno=1586, end_col_offset=57)], lineno=1586, col_offset=13, end_lineno=1586, end_col_offset=58), lineno=1586, col_offset=4, end_lineno=1586, end_col_offset=58), Assign(targets=[Name(id='violations', ctx=Store(), lineno=1587, col_offset=4, end_lineno=1587, end_col_offset=14)], value=Call(func=Name(id='cast', ctx=Load(), lineno=1587, col_offset=17, end_lineno=1587, end_col_offset=21), args=[Constant(value='CycleList', lineno=1587, col_offset=22, end_lineno=1587, end_col_offset=33), Call(func=Attribute(value=Name(id='analysis', ctx=Load(), lineno=1587, col_offset=35, end_lineno=1587, end_col_offset=43), attr='get', ctx=Load(), lineno=1587, col_offset=35, end_lineno=1587, end_col_offset=47), args=[Constant(value='layer_violations', lineno=1587, col_offset=48, end_lineno=1587, end_col_offset=66), List(ctx=Load(), lineno=1587, col_offset=68, end_lineno=1587, end_col_offset=70)], lineno=1587, col_offset=35, end_lineno=1587, end_col_offset=71)], lineno=1587, col_offset=17, end_lineno=1587, end_col_offset=72), lineno=1587, col_offset=4, end_lineno=1587, end_col_offset=72), Assign(targets=[Name(id='new_cycles', ctx=Store(), lineno=1589, col_offset=4, end_lineno=1589, end_col_offset=14)], value=ListComp(elt=Name(id='cycle', ctx=Load(), lineno=1589, col_offset=18, end_lineno=1589, end_col_offset=23), generators=[comprehension(target=Name(id='cycle', ctx=Store(), lineno=1589, col_offset=28, end_lineno=1589, end_col_offset=33), iter=Name(id='cycles', ctx=Load(), lineno=1589, col_offset=37, end_lineno=1589, end_col_offset=43), ifs=[Compare(left=Call(func=Name(id='tuple', ctx=Load(), lineno=1589, col_offset=47, end_lineno=1589, end_col_offset=52), args=[Name(id='cycle', ctx=Load(), lineno=1589, col_offset=53, end_lineno=1589, end_col_offset=58)], lineno=1589, col_offset=47, end_lineno=1589, end_col_offset=59), ops=[NotIn()], comparators=[Name(id='allowed_cycle_set', ctx=Load(), lineno=1589, col_offset=67, end_lineno=1589, end_col_offset=84)], lineno=1589, col_offset=47, end_lineno=1589, end_col_offset=84)], is_async=0)], lineno=1589, col_offset=17, end_lineno=1589, end_col_offset=85), lineno=1589, col_offset=4, end_lineno=1589, end_col_offset=85), Assign(targets=[Name(id='new_violations', ctx=Store(), lineno=1590, col_offset=4, end_lineno=1590, end_col_offset=18)], value=ListComp(elt=Name(id='record', ctx=Load(), lineno=1591, col_offset=8, end_lineno=1591, end_col_offset=14), generators=[comprehension(target=Name(id='record', ctx=Store(), lineno=1592, col_offset=12, end_lineno=1592, end_col_offset=18), iter=Name(id='violations', ctx=Load(), lineno=1592, col_offset=22, end_lineno=1592, end_col_offset=32), ifs=[BoolOp(op=And(), values=[Compare(left=NamedExpr(target=Name(id='edge', ctx=Store(), lineno=1593, col_offset=12, end_lineno=1593, end_col_offset=16), value=Call(func=Name(id='_edge_from_violation', ctx=Load(), lineno=1593, col_offset=20, end_lineno=1593, end_col_offset=40), args=[Name(id='record', ctx=Load(), lineno=1593, col_offset=41, end_lineno=1593, end_col_offset=47)], lineno=1593, col_offset=20, end_lineno=1593, end_col_offset=48), lineno=1593, col_offset=12, end_lineno=1593, end_col_offset=48), ops=[IsNot()], comparators=[Constant(value=None, lineno=1593, col_offset=57, end_lineno=1593, end_col_offset=61)], lineno=1593, col_offset=11, end_lineno=1593, end_col_offset=61), Compare(left=Name(id='edge', ctx=Load(), lineno=1593, col_offset=66, end_lineno=1593, end_col_offset=70), ops=[NotIn()], comparators=[Name(id='allowed_edge_set', ctx=Load(), lineno=1593, col_offset=78, end_lineno=1593, end_col_offset=94)], lineno=1593, col_offset=66, end_lineno=1593, end_col_offset=94)], lineno=1593, col_offset=11, end_lineno=1593, end_col_offset=94)], is_async=0)], lineno=1590, col_offset=21, end_lineno=1594, end_col_offset=5), lineno=1590, col_offset=4, end_lineno=1594, end_col_offset=5), Assign(targets=[Name(id='errs', ctx=Store(), lineno=1596, col_offset=4, end_lineno=1596, end_col_offset=8)], value=List(ctx=Load(), lineno=1596, col_offset=11, end_lineno=1596, end_col_offset=13), lineno=1596, col_offset=4, end_lineno=1596, end_col_offset=13), If(test=BoolOp(op=And(), values=[Name(id='fail_cycles', ctx=Load(), lineno=1597, col_offset=7, end_lineno=1597, end_col_offset=18), Name(id='new_cycles', ctx=Load(), lineno=1597, col_offset=23, end_lineno=1597, end_col_offset=33)], lineno=1597, col_offset=7, end_lineno=1597, end_col_offset=33), body=[Expr(value=Call(func=Attribute(value=Name(id='errs', ctx=Load(), lineno=1598, col_offset=8, end_lineno=1598, end_col_offset=12), attr='append', ctx=Load(), lineno=1598, col_offset=8, end_lineno=1598, end_col_offset=19), args=[JoinedStr(values=[FormattedValue(value=Call(func=Name(id='len', ctx=Load(), lineno=1598, col_offset=23, end_lineno=1598, end_col_offset=26), args=[Name(id='new_cycles', ctx=Load(), lineno=1598, col_offset=27, end_lineno=1598, end_col_offset=37)], lineno=1598, col_offset=23, end_lineno=1598, end_col_offset=38), conversion=-1, lineno=1598, col_offset=22, end_lineno=1598, end_col_offset=39), Constant(value=' cycle(s) not allowlisted', lineno=1598, col_offset=39, end_lineno=1598, end_col_offset=64)], lineno=1598, col_offset=20, end_lineno=1598, end_col_offset=65)], lineno=1598, col_offset=8, end_lineno=1598, end_col_offset=66), lineno=1598, col_offset=8, end_lineno=1598, end_col_offset=66)], lineno=1597, col_offset=4, end_lineno=1598, end_col_offset=66), If(test=BoolOp(op=And(), values=[Name(id='fail_layers', ctx=Load(), lineno=1599, col_offset=7, end_lineno=1599, end_col_offset=18), Name(id='new_violations', ctx=Load(), lineno=1599, col_offset=23, end_lineno=1599, end_col_offset=37)], lineno=1599, col_offset=7, end_lineno=1599, end_col_offset=37), body=[Expr(value=Call(func=Attribute(value=Name(id='errs', ctx=Load(), lineno=1600, col_offset=8, end_lineno=1600, end_col_offset=12), attr='append', ctx=Load(), lineno=1600, col_offset=8, end_lineno=1600, end_col_offset=19), args=[JoinedStr(values=[FormattedValue(value=Call(func=Name(id='len', ctx=Load(), lineno=1600, col_offset=23, end_lineno=1600, end_col_offset=26), args=[Name(id='new_violations', ctx=Load(), lineno=1600, col_offset=27, end_lineno=1600, end_col_offset=41)], lineno=1600, col_offset=23, end_lineno=1600, end_col_offset=42), conversion=-1, lineno=1600, col_offset=22, end_lineno=1600, end_col_offset=43), Constant(value=' layer violation edge(s) not allowlisted', lineno=1600, col_offset=43, end_lineno=1600, end_col_offset=83)], lineno=1600, col_offset=20, end_lineno=1600, end_col_offset=84)], lineno=1600, col_offset=8, end_lineno=1600, end_col_offset=85), lineno=1600, col_offset=8, end_lineno=1600, end_col_offset=85)], lineno=1599, col_offset=4, end_lineno=1600, end_col_offset=85), If(test=Name(id='errs', ctx=Load(), lineno=1601, col_offset=7, end_lineno=1601, end_col_offset=11), body=[Assign(targets=[Name(id='message', ctx=Store(), lineno=1602, col_offset=8, end_lineno=1602, end_col_offset=15)], value=Constant(value='Policy violations detected', lineno=1602, col_offset=18, end_lineno=1602, end_col_offset=46), lineno=1602, col_offset=8, end_lineno=1602, end_col_offset=46), Raise(exc=Call(func=Name(id='GraphPolicyError', ctx=Load(), lineno=1603, col_offset=14, end_lineno=1603, end_col_offset=30), args=[Name(id='message', ctx=Load(), lineno=1603, col_offset=31, end_lineno=1603, end_col_offset=38)], keywords=[keyword(arg='errors', value=Name(id='errs', ctx=Load(), lineno=1603, col_offset=47, end_lineno=1603, end_col_offset=51), lineno=1603, col_offset=40, end_lineno=1603, end_col_offset=51)], lineno=1603, col_offset=14, end_lineno=1603, end_col_offset=52), lineno=1603, col_offset=8, end_lineno=1603, end_col_offset=52)], lineno=1601, col_offset=4, end_lineno=1603, end_col_offset=52)], returns=Constant(value=None, lineno=1558, col_offset=5, end_lineno=1558, end_col_offset=9), lineno=1552, col_offset=0, end_lineno=1603, end_col_offset=52), FunctionDef(name='package_snapshot_digest', args=arguments(args=[arg(arg='pkg', annotation=Name(id='str', ctx=Load(), lineno=1611, col_offset=33, end_lineno=1611, end_col_offset=36), lineno=1611, col_offset=28, end_lineno=1611, end_col_offset=36)]), body=[Expr(value=Constant(value='Return a deterministic digest representing the package contents.\n\n    Parameters\n    ----------\n    pkg : str\n        Package name relative to ``src/``.\n\n    Returns\n    -------\n    str\n        Hex digest that changes only when tracked sources change.\n\n    Notes\n    -----\n    The digest intentionally ignores Git metadata, file mtimes, and transient artifacts such as\n    ``__pycache__`` or ``*.pyc`` to remain stable across environment rebuilds and history rewrites.\n    ', lineno=1612, col_offset=4, end_lineno=1628, end_col_offset=7), lineno=1612, col_offset=4, end_lineno=1628, end_col_offset=7), Assign(targets=[Name(id='h', ctx=Store(), lineno=1629, col_offset=4, end_lineno=1629, end_col_offset=5)], value=Call(func=Attribute(value=Name(id='hashlib', ctx=Load(), lineno=1629, col_offset=8, end_lineno=1629, end_col_offset=15), attr='sha256', ctx=Load(), lineno=1629, col_offset=8, end_lineno=1629, end_col_offset=22), lineno=1629, col_offset=8, end_lineno=1629, end_col_offset=24), lineno=1629, col_offset=4, end_lineno=1629, end_col_offset=24), Assign(targets=[Name(id='path', ctx=Store(), lineno=1630, col_offset=4, end_lineno=1630, end_col_offset=8)], value=BinOp(left=Name(id='SRC', ctx=Load(), lineno=1630, col_offset=11, end_lineno=1630, end_col_offset=14), op=Div(), right=Name(id='pkg', ctx=Load(), lineno=1630, col_offset=17, end_lineno=1630, end_col_offset=20), lineno=1630, col_offset=11, end_lineno=1630, end_col_offset=20), lineno=1630, col_offset=4, end_lineno=1630, end_col_offset=20), If(test=UnaryOp(op=Not(), operand=Call(func=Attribute(value=Name(id='path', ctx=Load(), lineno=1631, col_offset=11, end_lineno=1631, end_col_offset=15), attr='exists', ctx=Load(), lineno=1631, col_offset=11, end_lineno=1631, end_col_offset=22), lineno=1631, col_offset=11, end_lineno=1631, end_col_offset=24), lineno=1631, col_offset=7, end_lineno=1631, end_col_offset=24), body=[Return(value=Constant(value='EMPTY', lineno=1632, col_offset=15, end_lineno=1632, end_col_offset=22), lineno=1632, col_offset=8, end_lineno=1632, end_col_offset=22)], lineno=1631, col_offset=4, end_lineno=1632, end_col_offset=22), Assign(targets=[Name(id='skip_names', ctx=Store(), lineno=1634, col_offset=4, end_lineno=1634, end_col_offset=14)], value=Set(elts=[Constant(value='__pycache__', lineno=1634, col_offset=18, end_lineno=1634, end_col_offset=31), Constant(value='.DS_Store', lineno=1634, col_offset=33, end_lineno=1634, end_col_offset=44)], lineno=1634, col_offset=17, end_lineno=1634, end_col_offset=45), lineno=1634, col_offset=4, end_lineno=1634, end_col_offset=45), Assign(targets=[Name(id='skip_suffixes', ctx=Store(), lineno=1635, col_offset=4, end_lineno=1635, end_col_offset=17)], value=Set(elts=[Constant(value='.pyc', lineno=1635, col_offset=21, end_lineno=1635, end_col_offset=27), Constant(value='.pyo', lineno=1635, col_offset=29, end_lineno=1635, end_col_offset=35), Constant(value='.pyd', lineno=1635, col_offset=37, end_lineno=1635, end_col_offset=43)], lineno=1635, col_offset=20, end_lineno=1635, end_col_offset=44), lineno=1635, col_offset=4, end_lineno=1635, end_col_offset=44), For(target=Name(id='entry', ctx=Store(), lineno=1637, col_offset=8, end_lineno=1637, end_col_offset=13), iter=Call(func=Name(id='sorted', ctx=Load(), lineno=1637, col_offset=17, end_lineno=1637, end_col_offset=23), args=[Call(func=Attribute(value=Name(id='path', ctx=Load(), lineno=1637, col_offset=24, end_lineno=1637, end_col_offset=28), attr='rglob', ctx=Load(), lineno=1637, col_offset=24, end_lineno=1637, end_col_offset=34), args=[Constant(value='*', lineno=1637, col_offset=35, end_lineno=1637, end_col_offset=38)], lineno=1637, col_offset=24, end_lineno=1637, end_col_offset=39)], lineno=1637, col_offset=17, end_lineno=1637, end_col_offset=40), body=[Assign(targets=[Name(id='name', ctx=Store(), lineno=1638, col_offset=8, end_lineno=1638, end_col_offset=12)], value=Attribute(value=Name(id='entry', ctx=Load(), lineno=1638, col_offset=15, end_lineno=1638, end_col_offset=20), attr='name', ctx=Load(), lineno=1638, col_offset=15, end_lineno=1638, end_col_offset=25), lineno=1638, col_offset=8, end_lineno=1638, end_col_offset=25), If(test=BoolOp(op=Or(), values=[Compare(left=Name(id='name', ctx=Load(), lineno=1639, col_offset=11, end_lineno=1639, end_col_offset=15), ops=[In()], comparators=[Name(id='skip_names', ctx=Load(), lineno=1639, col_offset=19, end_lineno=1639, end_col_offset=29)], lineno=1639, col_offset=11, end_lineno=1639, end_col_offset=29), Compare(left=Attribute(value=Name(id='entry', ctx=Load(), lineno=1639, col_offset=33, end_lineno=1639, end_col_offset=38), attr='suffix', ctx=Load(), lineno=1639, col_offset=33, end_lineno=1639, end_col_offset=45), ops=[In()], comparators=[Name(id='skip_suffixes', ctx=Load(), lineno=1639, col_offset=49, end_lineno=1639, end_col_offset=62)], lineno=1639, col_offset=33, end_lineno=1639, end_col_offset=62)], lineno=1639, col_offset=11, end_lineno=1639, end_col_offset=62), body=[Continue(lineno=1640, col_offset=12, end_lineno=1640, end_col_offset=20)], lineno=1639, col_offset=8, end_lineno=1640, end_col_offset=20), If(test=UnaryOp(op=Not(), operand=Call(func=Attribute(value=Name(id='entry', ctx=Load(), lineno=1641, col_offset=15, end_lineno=1641, end_col_offset=20), attr='is_file', ctx=Load(), lineno=1641, col_offset=15, end_lineno=1641, end_col_offset=28), lineno=1641, col_offset=15, end_lineno=1641, end_col_offset=30), lineno=1641, col_offset=11, end_lineno=1641, end_col_offset=30), body=[Continue(lineno=1642, col_offset=12, end_lineno=1642, end_col_offset=20)], lineno=1641, col_offset=8, end_lineno=1642, end_col_offset=20), Assign(targets=[Name(id='rel', ctx=Store(), lineno=1644, col_offset=8, end_lineno=1644, end_col_offset=11)], value=Call(func=Attribute(value=Name(id='entry', ctx=Load(), lineno=1644, col_offset=14, end_lineno=1644, end_col_offset=19), attr='relative_to', ctx=Load(), lineno=1644, col_offset=14, end_lineno=1644, end_col_offset=31), args=[Name(id='ROOT', ctx=Load(), lineno=1644, col_offset=32, end_lineno=1644, end_col_offset=36)], lineno=1644, col_offset=14, end_lineno=1644, end_col_offset=37), lineno=1644, col_offset=8, end_lineno=1644, end_col_offset=37), Expr(value=Call(func=Attribute(value=Name(id='h', ctx=Load(), lineno=1645, col_offset=8, end_lineno=1645, end_col_offset=9), attr='update', ctx=Load(), lineno=1645, col_offset=8, end_lineno=1645, end_col_offset=16), args=[Call(func=Attribute(value=Call(func=Name(id='str', ctx=Load(), lineno=1645, col_offset=17, end_lineno=1645, end_col_offset=20), args=[Name(id='rel', ctx=Load(), lineno=1645, col_offset=21, end_lineno=1645, end_col_offset=24)], lineno=1645, col_offset=17, end_lineno=1645, end_col_offset=25), attr='encode', ctx=Load(), lineno=1645, col_offset=17, end_lineno=1645, end_col_offset=32), args=[Constant(value='utf-8', lineno=1645, col_offset=33, end_lineno=1645, end_col_offset=40)], lineno=1645, col_offset=17, end_lineno=1645, end_col_offset=41)], lineno=1645, col_offset=8, end_lineno=1645, end_col_offset=42), lineno=1645, col_offset=8, end_lineno=1645, end_col_offset=42), Try(body=[With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='entry', ctx=Load(), lineno=1648, col_offset=17, end_lineno=1648, end_col_offset=22), attr='open', ctx=Load(), lineno=1648, col_offset=17, end_lineno=1648, end_col_offset=27), args=[Constant(value='rb', lineno=1648, col_offset=28, end_lineno=1648, end_col_offset=32)], lineno=1648, col_offset=17, end_lineno=1648, end_col_offset=33), optional_vars=Name(id='fh', ctx=Store(), lineno=1648, col_offset=37, end_lineno=1648, end_col_offset=39))], body=[Assign(targets=[Name(id='read_chunk', ctx=Store(), lineno=1649, col_offset=16, end_lineno=1649, end_col_offset=26)], value=Call(func=Name(id='partial', ctx=Load(), lineno=1649, col_offset=29, end_lineno=1649, end_col_offset=36), args=[Attribute(value=Name(id='fh', ctx=Load(), lineno=1649, col_offset=37, end_lineno=1649, end_col_offset=39), attr='read', ctx=Load(), lineno=1649, col_offset=37, end_lineno=1649, end_col_offset=44), Constant(value=8192, lineno=1649, col_offset=46, end_lineno=1649, end_col_offset=50)], lineno=1649, col_offset=29, end_lineno=1649, end_col_offset=51), lineno=1649, col_offset=16, end_lineno=1649, end_col_offset=51), For(target=Name(id='chunk', ctx=Store(), lineno=1650, col_offset=20, end_lineno=1650, end_col_offset=25), iter=Call(func=Name(id='iter', ctx=Load(), lineno=1650, col_offset=29, end_lineno=1650, end_col_offset=33), args=[Name(id='read_chunk', ctx=Load(), lineno=1650, col_offset=34, end_lineno=1650, end_col_offset=44), Constant(value=b'', lineno=1650, col_offset=46, end_lineno=1650, end_col_offset=49)], lineno=1650, col_offset=29, end_lineno=1650, end_col_offset=50), body=[Expr(value=Call(func=Attribute(value=Name(id='h', ctx=Load(), lineno=1651, col_offset=20, end_lineno=1651, end_col_offset=21), attr='update', ctx=Load(), lineno=1651, col_offset=20, end_lineno=1651, end_col_offset=28), args=[Name(id='chunk', ctx=Load(), lineno=1651, col_offset=29, end_lineno=1651, end_col_offset=34)], lineno=1651, col_offset=20, end_lineno=1651, end_col_offset=35), lineno=1651, col_offset=20, end_lineno=1651, end_col_offset=35)], lineno=1650, col_offset=16, end_lineno=1651, end_col_offset=35)], lineno=1648, col_offset=12, end_lineno=1651, end_col_offset=35)], handlers=[ExceptHandler(type=Name(id='OSError', ctx=Load(), lineno=1652, col_offset=15, end_lineno=1652, end_col_offset=22), body=[Continue(lineno=1654, col_offset=12, end_lineno=1654, end_col_offset=20)], lineno=1652, col_offset=8, end_lineno=1654, end_col_offset=20)], lineno=1647, col_offset=8, end_lineno=1654, end_col_offset=20)], lineno=1637, col_offset=4, end_lineno=1654, end_col_offset=20), Return(value=BoolOp(op=Or(), values=[Call(func=Attribute(value=Name(id='h', ctx=Load(), lineno=1655, col_offset=11, end_lineno=1655, end_col_offset=12), attr='hexdigest', ctx=Load(), lineno=1655, col_offset=11, end_lineno=1655, end_col_offset=22), lineno=1655, col_offset=11, end_lineno=1655, end_col_offset=24), Constant(value='EMPTY', lineno=1655, col_offset=28, end_lineno=1655, end_col_offset=35)], lineno=1655, col_offset=11, end_lineno=1655, end_col_offset=35), lineno=1655, col_offset=4, end_lineno=1655, end_col_offset=35)], returns=Name(id='str', ctx=Load(), lineno=1611, col_offset=41, end_lineno=1611, end_col_offset=44), lineno=1611, col_offset=0, end_lineno=1655, end_col_offset=35), FunctionDef(name='last_tree_commit', args=arguments(args=[arg(arg='pkg', annotation=Name(id='str', ctx=Load(), lineno=1658, col_offset=26, end_lineno=1658, end_col_offset=29), lineno=1658, col_offset=21, end_lineno=1658, end_col_offset=29)]), body=[Expr(value=Constant(value='Return the content-based cache key for ``pkg``.\n\n    Parameters\n    ----------\n    pkg : str\n        Package name.\n\n    Returns\n    -------\n    str\n        Tree hash for the package.\n    ', lineno=1659, col_offset=4, end_lineno=1670, end_col_offset=7), lineno=1659, col_offset=4, end_lineno=1670, end_col_offset=7), Return(value=Call(func=Name(id='package_snapshot_digest', ctx=Load(), lineno=1671, col_offset=11, end_lineno=1671, end_col_offset=34), args=[Name(id='pkg', ctx=Load(), lineno=1671, col_offset=35, end_lineno=1671, end_col_offset=38)], lineno=1671, col_offset=11, end_lineno=1671, end_col_offset=39), lineno=1671, col_offset=4, end_lineno=1671, end_col_offset=39)], returns=Name(id='str', ctx=Load(), lineno=1658, col_offset=34, end_lineno=1658, end_col_offset=37), lineno=1658, col_offset=0, end_lineno=1671, end_col_offset=39), FunctionDef(name='cache_bucket', args=arguments(args=[arg(arg='cache_dir', annotation=Name(id='Path', ctx=Load(), lineno=1674, col_offset=28, end_lineno=1674, end_col_offset=32), lineno=1674, col_offset=17, end_lineno=1674, end_col_offset=32), arg(arg='pkg', annotation=Name(id='str', ctx=Load(), lineno=1674, col_offset=39, end_lineno=1674, end_col_offset=42), lineno=1674, col_offset=34, end_lineno=1674, end_col_offset=42), arg(arg='tree_hash', annotation=Name(id='str', ctx=Load(), lineno=1674, col_offset=55, end_lineno=1674, end_col_offset=58), lineno=1674, col_offset=44, end_lineno=1674, end_col_offset=58)]), body=[Expr(value=Constant(value='Compute cache bucket.\n\n    Carry out the cache bucket operation for the surrounding component. Generated documentation highlights how this helper collaborates with neighbouring utilities. Callers rely on the routine to remain stable across releases.\n\n    Parameters\n    ----------\n    cache_dir : Path\n        Description for ``cache_dir``.\n    pkg : str\n        Description for ``pkg``.\n    tree_hash : str\n        Description for ``tree_hash``.\n\n    Returns\n    -------\n    Path\n        Description of return value.\n\n    Examples\n    --------\n    >>> from tools.docs.build_graphs import cache_bucket\n    >>> result = cache_bucket(..., ..., ...)\n    >>> result  # doctest: +ELLIPSIS\n    ', lineno=1675, col_offset=4, end_lineno=1698, end_col_offset=7), lineno=1675, col_offset=4, end_lineno=1698, end_col_offset=7), Return(value=BinOp(left=BinOp(left=Name(id='cache_dir', ctx=Load(), lineno=1699, col_offset=11, end_lineno=1699, end_col_offset=20), op=Div(), right=Name(id='pkg', ctx=Load(), lineno=1699, col_offset=23, end_lineno=1699, end_col_offset=26), lineno=1699, col_offset=11, end_lineno=1699, end_col_offset=26), op=Div(), right=Name(id='tree_hash', ctx=Load(), lineno=1699, col_offset=29, end_lineno=1699, end_col_offset=38), lineno=1699, col_offset=11, end_lineno=1699, end_col_offset=38), lineno=1699, col_offset=4, end_lineno=1699, end_col_offset=38)], returns=Name(id='Path', ctx=Load(), lineno=1674, col_offset=63, end_lineno=1674, end_col_offset=67), lineno=1674, col_offset=0, end_lineno=1699, end_col_offset=38), FunctionDef(name='_final_output_paths', args=arguments(args=[arg(arg='pkg', annotation=Name(id='str', ctx=Load(), lineno=1702, col_offset=29, end_lineno=1702, end_col_offset=32), lineno=1702, col_offset=24, end_lineno=1702, end_col_offset=32), arg(arg='fmt', annotation=Name(id='str', ctx=Load(), lineno=1702, col_offset=39, end_lineno=1702, end_col_offset=42), lineno=1702, col_offset=34, end_lineno=1702, end_col_offset=42)]), body=[Expr(value=Constant(value='Return final output paths.\n\n    Parameters\n    ----------\n    pkg : str\n        Package name.\n    fmt : str\n        Output format.\n\n    Returns\n    -------\n    tuple[Path, Path]\n        (imports_path, uml_path) tuple.\n    ', lineno=1703, col_offset=4, end_lineno=1716, end_col_offset=7), lineno=1703, col_offset=4, end_lineno=1716, end_col_offset=7), Return(value=Tuple(elts=[BinOp(left=Name(id='OUT', ctx=Load(), lineno=1717, col_offset=11, end_lineno=1717, end_col_offset=14), op=Div(), right=JoinedStr(values=[FormattedValue(value=Name(id='pkg', ctx=Load(), lineno=1717, col_offset=20, end_lineno=1717, end_col_offset=23), conversion=-1, lineno=1717, col_offset=19, end_lineno=1717, end_col_offset=24), Constant(value='-imports.', lineno=1717, col_offset=24, end_lineno=1717, end_col_offset=33), FormattedValue(value=Name(id='fmt', ctx=Load(), lineno=1717, col_offset=34, end_lineno=1717, end_col_offset=37), conversion=-1, lineno=1717, col_offset=33, end_lineno=1717, end_col_offset=38)], lineno=1717, col_offset=17, end_lineno=1717, end_col_offset=39), lineno=1717, col_offset=11, end_lineno=1717, end_col_offset=39), BinOp(left=Name(id='OUT', ctx=Load(), lineno=1717, col_offset=41, end_lineno=1717, end_col_offset=44), op=Div(), right=JoinedStr(values=[FormattedValue(value=Name(id='pkg', ctx=Load(), lineno=1717, col_offset=50, end_lineno=1717, end_col_offset=53), conversion=-1, lineno=1717, col_offset=49, end_lineno=1717, end_col_offset=54), Constant(value='-uml.', lineno=1717, col_offset=54, end_lineno=1717, end_col_offset=59), FormattedValue(value=Name(id='fmt', ctx=Load(), lineno=1717, col_offset=60, end_lineno=1717, end_col_offset=63), conversion=-1, lineno=1717, col_offset=59, end_lineno=1717, end_col_offset=64)], lineno=1717, col_offset=47, end_lineno=1717, end_col_offset=65), lineno=1717, col_offset=41, end_lineno=1717, end_col_offset=65)], ctx=Load(), lineno=1717, col_offset=11, end_lineno=1717, end_col_offset=65), lineno=1717, col_offset=4, end_lineno=1717, end_col_offset=65)], returns=Subscript(value=Name(id='tuple', ctx=Load(), lineno=1702, col_offset=47, end_lineno=1702, end_col_offset=52), slice=Tuple(elts=[Name(id='Path', ctx=Load(), lineno=1702, col_offset=53, end_lineno=1702, end_col_offset=57), Name(id='Path', ctx=Load(), lineno=1702, col_offset=59, end_lineno=1702, end_col_offset=63)], ctx=Load(), lineno=1702, col_offset=53, end_lineno=1702, end_col_offset=63), ctx=Load(), lineno=1702, col_offset=47, end_lineno=1702, end_col_offset=64), lineno=1702, col_offset=0, end_lineno=1717, end_col_offset=65), FunctionDef(name='_maybe_restore_from_cache', args=arguments(args=[arg(arg='pkg', annotation=Name(id='str', ctx=Load(), lineno=1721, col_offset=9, end_lineno=1721, end_col_offset=12), lineno=1721, col_offset=4, end_lineno=1721, end_col_offset=12), arg(arg='fmt', annotation=Name(id='str', ctx=Load(), lineno=1722, col_offset=9, end_lineno=1722, end_col_offset=12), lineno=1722, col_offset=4, end_lineno=1722, end_col_offset=12), arg(arg='cache_dir', annotation=Name(id='Path', ctx=Load(), lineno=1723, col_offset=15, end_lineno=1723, end_col_offset=19), lineno=1723, col_offset=4, end_lineno=1723, end_col_offset=19)], kwonlyargs=[arg(arg='use_cache', annotation=Name(id='bool', ctx=Load(), lineno=1725, col_offset=15, end_lineno=1725, end_col_offset=19), lineno=1725, col_offset=4, end_lineno=1725, end_col_offset=19), arg(arg='verbose', annotation=Name(id='bool', ctx=Load(), lineno=1726, col_offset=13, end_lineno=1726, end_col_offset=17), lineno=1726, col_offset=4, end_lineno=1726, end_col_offset=17)], kw_defaults=[None, None]), body=[Expr(value=Constant(value='Maybe restore from cache.\n\n    Parameters\n    ----------\n    pkg : str\n        Package name.\n    fmt : str\n        Output format.\n    cache_dir : Path\n        Cache directory.\n    use_cache : bool\n        Whether to use cache.\n    verbose : bool\n        Verbose logging flag.\n\n    Returns\n    -------\n    CacheContext\n        Cache context with usage status.\n    ', lineno=1728, col_offset=4, end_lineno=1747, end_col_offset=7), lineno=1728, col_offset=4, end_lineno=1747, end_col_offset=7), Assign(targets=[Tuple(elts=[Name(id='imports_out', ctx=Store(), lineno=1748, col_offset=4, end_lineno=1748, end_col_offset=15), Name(id='uml_out', ctx=Store(), lineno=1748, col_offset=17, end_lineno=1748, end_col_offset=24)], ctx=Store(), lineno=1748, col_offset=4, end_lineno=1748, end_col_offset=24)], value=Call(func=Name(id='_final_output_paths', ctx=Load(), lineno=1748, col_offset=27, end_lineno=1748, end_col_offset=46), args=[Name(id='pkg', ctx=Load(), lineno=1748, col_offset=47, end_lineno=1748, end_col_offset=50), Name(id='fmt', ctx=Load(), lineno=1748, col_offset=52, end_lineno=1748, end_col_offset=55)], lineno=1748, col_offset=27, end_lineno=1748, end_col_offset=56), lineno=1748, col_offset=4, end_lineno=1748, end_col_offset=56), If(test=UnaryOp(op=Not(), operand=Name(id='use_cache', ctx=Load(), lineno=1749, col_offset=11, end_lineno=1749, end_col_offset=20), lineno=1749, col_offset=7, end_lineno=1749, end_col_offset=20), body=[Return(value=Call(func=Name(id='CacheContext', ctx=Load(), lineno=1750, col_offset=15, end_lineno=1750, end_col_offset=27), keywords=[keyword(arg='used_cache', value=Constant(value=False, lineno=1750, col_offset=39, end_lineno=1750, end_col_offset=44), lineno=1750, col_offset=28, end_lineno=1750, end_col_offset=44), keyword(arg='tree_hash', value=Constant(value=None, lineno=1750, col_offset=56, end_lineno=1750, end_col_offset=60), lineno=1750, col_offset=46, end_lineno=1750, end_col_offset=60), keyword(arg='bucket', value=Constant(value=None, lineno=1750, col_offset=69, end_lineno=1750, end_col_offset=73), lineno=1750, col_offset=62, end_lineno=1750, end_col_offset=73)], lineno=1750, col_offset=15, end_lineno=1750, end_col_offset=74), lineno=1750, col_offset=8, end_lineno=1750, end_col_offset=74)], lineno=1749, col_offset=4, end_lineno=1750, end_col_offset=74), Assign(targets=[Name(id='tree_hash', ctx=Store(), lineno=1752, col_offset=4, end_lineno=1752, end_col_offset=13)], value=Call(func=Name(id='last_tree_commit', ctx=Load(), lineno=1752, col_offset=16, end_lineno=1752, end_col_offset=32), args=[Name(id='pkg', ctx=Load(), lineno=1752, col_offset=33, end_lineno=1752, end_col_offset=36)], lineno=1752, col_offset=16, end_lineno=1752, end_col_offset=37), lineno=1752, col_offset=4, end_lineno=1752, end_col_offset=37), Assign(targets=[Name(id='bucket', ctx=Store(), lineno=1753, col_offset=4, end_lineno=1753, end_col_offset=10)], value=Call(func=Name(id='cache_bucket', ctx=Load(), lineno=1753, col_offset=13, end_lineno=1753, end_col_offset=25), args=[Name(id='cache_dir', ctx=Load(), lineno=1753, col_offset=26, end_lineno=1753, end_col_offset=35), Name(id='pkg', ctx=Load(), lineno=1753, col_offset=37, end_lineno=1753, end_col_offset=40), Name(id='tree_hash', ctx=Load(), lineno=1753, col_offset=42, end_lineno=1753, end_col_offset=51)], lineno=1753, col_offset=13, end_lineno=1753, end_col_offset=52), lineno=1753, col_offset=4, end_lineno=1753, end_col_offset=52), Assign(targets=[Name(id='cache_imports', ctx=Store(), lineno=1754, col_offset=4, end_lineno=1754, end_col_offset=17)], value=BinOp(left=Name(id='bucket', ctx=Load(), lineno=1754, col_offset=20, end_lineno=1754, end_col_offset=26), op=Div(), right=Attribute(value=Name(id='imports_out', ctx=Load(), lineno=1754, col_offset=29, end_lineno=1754, end_col_offset=40), attr='name', ctx=Load(), lineno=1754, col_offset=29, end_lineno=1754, end_col_offset=45), lineno=1754, col_offset=20, end_lineno=1754, end_col_offset=45), lineno=1754, col_offset=4, end_lineno=1754, end_col_offset=45), Assign(targets=[Name(id='cache_uml', ctx=Store(), lineno=1755, col_offset=4, end_lineno=1755, end_col_offset=13)], value=BinOp(left=Name(id='bucket', ctx=Load(), lineno=1755, col_offset=16, end_lineno=1755, end_col_offset=22), op=Div(), right=Attribute(value=Name(id='uml_out', ctx=Load(), lineno=1755, col_offset=25, end_lineno=1755, end_col_offset=32), attr='name', ctx=Load(), lineno=1755, col_offset=25, end_lineno=1755, end_col_offset=37), lineno=1755, col_offset=16, end_lineno=1755, end_col_offset=37), lineno=1755, col_offset=4, end_lineno=1755, end_col_offset=37), If(test=BoolOp(op=And(), values=[Call(func=Attribute(value=Name(id='cache_imports', ctx=Load(), lineno=1756, col_offset=7, end_lineno=1756, end_col_offset=20), attr='exists', ctx=Load(), lineno=1756, col_offset=7, end_lineno=1756, end_col_offset=27), lineno=1756, col_offset=7, end_lineno=1756, end_col_offset=29), Call(func=Attribute(value=Name(id='cache_uml', ctx=Load(), lineno=1756, col_offset=34, end_lineno=1756, end_col_offset=43), attr='exists', ctx=Load(), lineno=1756, col_offset=34, end_lineno=1756, end_col_offset=50), lineno=1756, col_offset=34, end_lineno=1756, end_col_offset=52)], lineno=1756, col_offset=7, end_lineno=1756, end_col_offset=52), body=[Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='imports_out', ctx=Load(), lineno=1757, col_offset=8, end_lineno=1757, end_col_offset=19), attr='parent', ctx=Load(), lineno=1757, col_offset=8, end_lineno=1757, end_col_offset=26), attr='mkdir', ctx=Load(), lineno=1757, col_offset=8, end_lineno=1757, end_col_offset=32), keywords=[keyword(arg='parents', value=Constant(value=True, lineno=1757, col_offset=41, end_lineno=1757, end_col_offset=45), lineno=1757, col_offset=33, end_lineno=1757, end_col_offset=45), keyword(arg='exist_ok', value=Constant(value=True, lineno=1757, col_offset=56, end_lineno=1757, end_col_offset=60), lineno=1757, col_offset=47, end_lineno=1757, end_col_offset=60)], lineno=1757, col_offset=8, end_lineno=1757, end_col_offset=61), lineno=1757, col_offset=8, end_lineno=1757, end_col_offset=61), Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='uml_out', ctx=Load(), lineno=1758, col_offset=8, end_lineno=1758, end_col_offset=15), attr='parent', ctx=Load(), lineno=1758, col_offset=8, end_lineno=1758, end_col_offset=22), attr='mkdir', ctx=Load(), lineno=1758, col_offset=8, end_lineno=1758, end_col_offset=28), keywords=[keyword(arg='parents', value=Constant(value=True, lineno=1758, col_offset=37, end_lineno=1758, end_col_offset=41), lineno=1758, col_offset=29, end_lineno=1758, end_col_offset=41), keyword(arg='exist_ok', value=Constant(value=True, lineno=1758, col_offset=52, end_lineno=1758, end_col_offset=56), lineno=1758, col_offset=43, end_lineno=1758, end_col_offset=56)], lineno=1758, col_offset=8, end_lineno=1758, end_col_offset=57), lineno=1758, col_offset=8, end_lineno=1758, end_col_offset=57), Expr(value=Call(func=Attribute(value=Name(id='shutil', ctx=Load(), lineno=1759, col_offset=8, end_lineno=1759, end_col_offset=14), attr='copy2', ctx=Load(), lineno=1759, col_offset=8, end_lineno=1759, end_col_offset=20), args=[Name(id='cache_imports', ctx=Load(), lineno=1759, col_offset=21, end_lineno=1759, end_col_offset=34), Name(id='imports_out', ctx=Load(), lineno=1759, col_offset=36, end_lineno=1759, end_col_offset=47)], lineno=1759, col_offset=8, end_lineno=1759, end_col_offset=48), lineno=1759, col_offset=8, end_lineno=1759, end_col_offset=48), Expr(value=Call(func=Attribute(value=Name(id='shutil', ctx=Load(), lineno=1760, col_offset=8, end_lineno=1760, end_col_offset=14), attr='copy2', ctx=Load(), lineno=1760, col_offset=8, end_lineno=1760, end_col_offset=20), args=[Name(id='cache_uml', ctx=Load(), lineno=1760, col_offset=21, end_lineno=1760, end_col_offset=30), Name(id='uml_out', ctx=Load(), lineno=1760, col_offset=32, end_lineno=1760, end_col_offset=39)], lineno=1760, col_offset=8, end_lineno=1760, end_col_offset=40), lineno=1760, col_offset=8, end_lineno=1760, end_col_offset=40), If(test=Name(id='verbose', ctx=Load(), lineno=1761, col_offset=11, end_lineno=1761, end_col_offset=18), body=[Assign(targets=[Name(id='snippet', ctx=Store(), lineno=1762, col_offset=12, end_lineno=1762, end_col_offset=19)], value=Subscript(value=Name(id='tree_hash', ctx=Load(), lineno=1762, col_offset=22, end_lineno=1762, end_col_offset=31), slice=Slice(upper=Constant(value=7, lineno=1762, col_offset=33, end_lineno=1762, end_col_offset=34), lineno=1762, col_offset=32, end_lineno=1762, end_col_offset=34), ctx=Load(), lineno=1762, col_offset=22, end_lineno=1762, end_col_offset=35), lineno=1762, col_offset=12, end_lineno=1762, end_col_offset=35), Expr(value=Call(func=Attribute(value=Name(id='LOGGER', ctx=Load(), lineno=1763, col_offset=12, end_lineno=1763, end_col_offset=18), attr='info', ctx=Load(), lineno=1763, col_offset=12, end_lineno=1763, end_col_offset=23), args=[Constant(value='Cache hit: %s@%s', lineno=1763, col_offset=24, end_lineno=1763, end_col_offset=42), Name(id='pkg', ctx=Load(), lineno=1763, col_offset=44, end_lineno=1763, end_col_offset=47), Name(id='snippet', ctx=Load(), lineno=1763, col_offset=49, end_lineno=1763, end_col_offset=56)], lineno=1763, col_offset=12, end_lineno=1763, end_col_offset=57), lineno=1763, col_offset=12, end_lineno=1763, end_col_offset=57)], lineno=1761, col_offset=8, end_lineno=1763, end_col_offset=57), Return(value=Call(func=Name(id='CacheContext', ctx=Load(), lineno=1764, col_offset=15, end_lineno=1764, end_col_offset=27), keywords=[keyword(arg='used_cache', value=Constant(value=True, lineno=1764, col_offset=39, end_lineno=1764, end_col_offset=43), lineno=1764, col_offset=28, end_lineno=1764, end_col_offset=43), keyword(arg='tree_hash', value=Name(id='tree_hash', ctx=Load(), lineno=1764, col_offset=55, end_lineno=1764, end_col_offset=64), lineno=1764, col_offset=45, end_lineno=1764, end_col_offset=64), keyword(arg='bucket', value=Name(id='bucket', ctx=Load(), lineno=1764, col_offset=73, end_lineno=1764, end_col_offset=79), lineno=1764, col_offset=66, end_lineno=1764, end_col_offset=79)], lineno=1764, col_offset=15, end_lineno=1764, end_col_offset=80), lineno=1764, col_offset=8, end_lineno=1764, end_col_offset=80)], lineno=1756, col_offset=4, end_lineno=1764, end_col_offset=80), Return(value=Call(func=Name(id='CacheContext', ctx=Load(), lineno=1766, col_offset=11, end_lineno=1766, end_col_offset=23), keywords=[keyword(arg='used_cache', value=Constant(value=False, lineno=1766, col_offset=35, end_lineno=1766, end_col_offset=40), lineno=1766, col_offset=24, end_lineno=1766, end_col_offset=40), keyword(arg='tree_hash', value=Name(id='tree_hash', ctx=Load(), lineno=1766, col_offset=52, end_lineno=1766, end_col_offset=61), lineno=1766, col_offset=42, end_lineno=1766, end_col_offset=61), keyword(arg='bucket', value=Name(id='bucket', ctx=Load(), lineno=1766, col_offset=70, end_lineno=1766, end_col_offset=76), lineno=1766, col_offset=63, end_lineno=1766, end_col_offset=76)], lineno=1766, col_offset=11, end_lineno=1766, end_col_offset=77), lineno=1766, col_offset=4, end_lineno=1766, end_col_offset=77)], returns=Name(id='CacheContext', ctx=Load(), lineno=1727, col_offset=5, end_lineno=1727, end_col_offset=17), lineno=1720, col_offset=0, end_lineno=1766, end_col_offset=77), FunctionDef(name='_prepare_staging', args=arguments(args=[arg(arg='pkg', annotation=Name(id='str', ctx=Load(), lineno=1769, col_offset=26, end_lineno=1769, end_col_offset=29), lineno=1769, col_offset=21, end_lineno=1769, end_col_offset=29), arg(arg='fmt', annotation=Name(id='str', ctx=Load(), lineno=1769, col_offset=36, end_lineno=1769, end_col_offset=39), lineno=1769, col_offset=31, end_lineno=1769, end_col_offset=39)]), body=[Expr(value=Constant(value='Prepare staging.\n\n    Parameters\n    ----------\n    pkg : str\n        Package name.\n    fmt : str\n        Output format.\n\n    Returns\n    -------\n    StagePaths\n        Staging paths configuration.\n    ', lineno=1770, col_offset=4, end_lineno=1783, end_col_offset=7), lineno=1770, col_offset=4, end_lineno=1783, end_col_offset=7), Assign(targets=[Tuple(elts=[Name(id='imports_out', ctx=Store(), lineno=1784, col_offset=4, end_lineno=1784, end_col_offset=15), Name(id='uml_out', ctx=Store(), lineno=1784, col_offset=17, end_lineno=1784, end_col_offset=24)], ctx=Store(), lineno=1784, col_offset=4, end_lineno=1784, end_col_offset=24)], value=Call(func=Name(id='_final_output_paths', ctx=Load(), lineno=1784, col_offset=27, end_lineno=1784, end_col_offset=46), args=[Name(id='pkg', ctx=Load(), lineno=1784, col_offset=47, end_lineno=1784, end_col_offset=50), Name(id='fmt', ctx=Load(), lineno=1784, col_offset=52, end_lineno=1784, end_col_offset=55)], lineno=1784, col_offset=27, end_lineno=1784, end_col_offset=56), lineno=1784, col_offset=4, end_lineno=1784, end_col_offset=56), Assign(targets=[Name(id='staging_dir', ctx=Store(), lineno=1785, col_offset=4, end_lineno=1785, end_col_offset=15)], value=Call(func=Name(id='Path', ctx=Load(), lineno=1785, col_offset=18, end_lineno=1785, end_col_offset=22), args=[Call(func=Attribute(value=Name(id='tempfile', ctx=Load(), lineno=1785, col_offset=23, end_lineno=1785, end_col_offset=31), attr='mkdtemp', ctx=Load(), lineno=1785, col_offset=23, end_lineno=1785, end_col_offset=39), keywords=[keyword(arg='prefix', value=JoinedStr(values=[FormattedValue(value=Name(id='pkg', ctx=Load(), lineno=1785, col_offset=50, end_lineno=1785, end_col_offset=53), conversion=-1, lineno=1785, col_offset=49, end_lineno=1785, end_col_offset=54), Constant(value='-', lineno=1785, col_offset=54, end_lineno=1785, end_col_offset=55)], lineno=1785, col_offset=47, end_lineno=1785, end_col_offset=56), lineno=1785, col_offset=40, end_lineno=1785, end_col_offset=56)], lineno=1785, col_offset=23, end_lineno=1785, end_col_offset=57)], lineno=1785, col_offset=18, end_lineno=1785, end_col_offset=58), lineno=1785, col_offset=4, end_lineno=1785, end_col_offset=58), Return(value=Call(func=Name(id='StagePaths', ctx=Load(), lineno=1786, col_offset=11, end_lineno=1786, end_col_offset=21), keywords=[keyword(arg='staging_dir', value=Name(id='staging_dir', ctx=Load(), lineno=1787, col_offset=20, end_lineno=1787, end_col_offset=31), lineno=1787, col_offset=8, end_lineno=1787, end_col_offset=31), keyword(arg='staged_imports', value=BinOp(left=Name(id='staging_dir', ctx=Load(), lineno=1788, col_offset=23, end_lineno=1788, end_col_offset=34), op=Div(), right=Attribute(value=Name(id='imports_out', ctx=Load(), lineno=1788, col_offset=37, end_lineno=1788, end_col_offset=48), attr='name', ctx=Load(), lineno=1788, col_offset=37, end_lineno=1788, end_col_offset=53), lineno=1788, col_offset=23, end_lineno=1788, end_col_offset=53), lineno=1788, col_offset=8, end_lineno=1788, end_col_offset=53), keyword(arg='staged_uml', value=BinOp(left=Name(id='staging_dir', ctx=Load(), lineno=1789, col_offset=19, end_lineno=1789, end_col_offset=30), op=Div(), right=Attribute(value=Name(id='uml_out', ctx=Load(), lineno=1789, col_offset=33, end_lineno=1789, end_col_offset=40), attr='name', ctx=Load(), lineno=1789, col_offset=33, end_lineno=1789, end_col_offset=45), lineno=1789, col_offset=19, end_lineno=1789, end_col_offset=45), lineno=1789, col_offset=8, end_lineno=1789, end_col_offset=45), keyword(arg='final_imports', value=Name(id='imports_out', ctx=Load(), lineno=1790, col_offset=22, end_lineno=1790, end_col_offset=33), lineno=1790, col_offset=8, end_lineno=1790, end_col_offset=33), keyword(arg='final_uml', value=Name(id='uml_out', ctx=Load(), lineno=1791, col_offset=18, end_lineno=1791, end_col_offset=25), lineno=1791, col_offset=8, end_lineno=1791, end_col_offset=25)], lineno=1786, col_offset=11, end_lineno=1792, end_col_offset=5), lineno=1786, col_offset=4, end_lineno=1792, end_col_offset=5)], returns=Name(id='StagePaths', ctx=Load(), lineno=1769, col_offset=44, end_lineno=1769, end_col_offset=54), lineno=1769, col_offset=0, end_lineno=1792, end_col_offset=5), FunctionDef(name='_build_artifacts', args=arguments(args=[arg(arg='pkg', annotation=Name(id='str', ctx=Load(), lineno=1796, col_offset=9, end_lineno=1796, end_col_offset=12), lineno=1796, col_offset=4, end_lineno=1796, end_col_offset=12), arg(arg='fmt', annotation=Name(id='str', ctx=Load(), lineno=1797, col_offset=9, end_lineno=1797, end_col_offset=12), lineno=1797, col_offset=4, end_lineno=1797, end_col_offset=12), arg(arg='excludes', annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=1798, col_offset=14, end_lineno=1798, end_col_offset=18), slice=Name(id='str', ctx=Load(), lineno=1798, col_offset=19, end_lineno=1798, end_col_offset=22), ctx=Load(), lineno=1798, col_offset=14, end_lineno=1798, end_col_offset=23), lineno=1798, col_offset=4, end_lineno=1798, end_col_offset=23), arg(arg='max_bacon', annotation=Name(id='int', ctx=Load(), lineno=1799, col_offset=15, end_lineno=1799, end_col_offset=18), lineno=1799, col_offset=4, end_lineno=1799, end_col_offset=18), arg(arg='stage', annotation=Name(id='StagePaths', ctx=Load(), lineno=1800, col_offset=11, end_lineno=1800, end_col_offset=21), lineno=1800, col_offset=4, end_lineno=1800, end_col_offset=21)]), body=[Expr(value=Constant(value='Build artifacts.\n\n    Parameters\n    ----------\n    pkg : str\n        Package name.\n    fmt : str\n        Output format.\n    excludes : list[str]\n        Exclusion patterns.\n    max_bacon : int\n        Maximum bacon number.\n    stage : StagePaths\n        Staging paths.\n\n    Returns\n    -------\n    tuple[bool, bool]\n        (pydeps_ok, pyrev_ok) success flags.\n    ', lineno=1802, col_offset=4, end_lineno=1821, end_col_offset=7), lineno=1802, col_offset=4, end_lineno=1821, end_col_offset=7), Assign(targets=[Name(id='pydeps_ok', ctx=Store(), lineno=1822, col_offset=4, end_lineno=1822, end_col_offset=13)], value=Constant(value=True, lineno=1822, col_offset=16, end_lineno=1822, end_col_offset=20), lineno=1822, col_offset=4, end_lineno=1822, end_col_offset=20), Try(body=[Expr(value=Call(func=Name(id='build_pydeps_for_package', ctx=Load(), lineno=1824, col_offset=8, end_lineno=1824, end_col_offset=32), args=[Name(id='pkg', ctx=Load(), lineno=1824, col_offset=33, end_lineno=1824, end_col_offset=36), Attribute(value=Name(id='stage', ctx=Load(), lineno=1824, col_offset=38, end_lineno=1824, end_col_offset=43), attr='staged_imports', ctx=Load(), lineno=1824, col_offset=38, end_lineno=1824, end_col_offset=58), Name(id='excludes', ctx=Load(), lineno=1824, col_offset=60, end_lineno=1824, end_col_offset=68), Name(id='max_bacon', ctx=Load(), lineno=1824, col_offset=70, end_lineno=1824, end_col_offset=79), Name(id='fmt', ctx=Load(), lineno=1824, col_offset=81, end_lineno=1824, end_col_offset=84)], lineno=1824, col_offset=8, end_lineno=1824, end_col_offset=85), lineno=1824, col_offset=8, end_lineno=1824, end_col_offset=85)], handlers=[ExceptHandler(type=Tuple(elts=[Name(id='GraphBuildError', ctx=Load(), lineno=1825, col_offset=12, end_lineno=1825, end_col_offset=27), Name(id='RuntimeError', ctx=Load(), lineno=1825, col_offset=29, end_lineno=1825, end_col_offset=41), Name(id='OSError', ctx=Load(), lineno=1825, col_offset=43, end_lineno=1825, end_col_offset=50)], ctx=Load(), lineno=1825, col_offset=11, end_lineno=1825, end_col_offset=51), name='exc', body=[Expr(value=Call(func=Attribute(value=Name(id='LOGGER', ctx=Load(), lineno=1826, col_offset=8, end_lineno=1826, end_col_offset=14), attr='warning', ctx=Load(), lineno=1826, col_offset=8, end_lineno=1826, end_col_offset=22), args=[Constant(value='pydeps build failed for %s: %s', lineno=1826, col_offset=23, end_lineno=1826, end_col_offset=55), Name(id='pkg', ctx=Load(), lineno=1826, col_offset=57, end_lineno=1826, end_col_offset=60), Name(id='exc', ctx=Load(), lineno=1826, col_offset=62, end_lineno=1826, end_col_offset=65)], lineno=1826, col_offset=8, end_lineno=1826, end_col_offset=66), lineno=1826, col_offset=8, end_lineno=1826, end_col_offset=66), Assign(targets=[Name(id='pydeps_ok', ctx=Store(), lineno=1827, col_offset=8, end_lineno=1827, end_col_offset=17)], value=Constant(value=False, lineno=1827, col_offset=20, end_lineno=1827, end_col_offset=25), lineno=1827, col_offset=8, end_lineno=1827, end_col_offset=25)], lineno=1825, col_offset=4, end_lineno=1827, end_col_offset=25)], lineno=1823, col_offset=4, end_lineno=1827, end_col_offset=25), Assign(targets=[Name(id='pyrev_ok', ctx=Store(), lineno=1829, col_offset=4, end_lineno=1829, end_col_offset=12)], value=Constant(value=True, lineno=1829, col_offset=15, end_lineno=1829, end_col_offset=19), lineno=1829, col_offset=4, end_lineno=1829, end_col_offset=19), Try(body=[Expr(value=Call(func=Name(id='build_pyreverse_for_package', ctx=Load(), lineno=1831, col_offset=8, end_lineno=1831, end_col_offset=35), args=[Name(id='pkg', ctx=Load(), lineno=1831, col_offset=36, end_lineno=1831, end_col_offset=39), Attribute(value=Name(id='stage', ctx=Load(), lineno=1831, col_offset=41, end_lineno=1831, end_col_offset=46), attr='staging_dir', ctx=Load(), lineno=1831, col_offset=41, end_lineno=1831, end_col_offset=58), Name(id='fmt', ctx=Load(), lineno=1831, col_offset=60, end_lineno=1831, end_col_offset=63)], lineno=1831, col_offset=8, end_lineno=1831, end_col_offset=64), lineno=1831, col_offset=8, end_lineno=1831, end_col_offset=64)], handlers=[ExceptHandler(type=Tuple(elts=[Name(id='GraphBuildError', ctx=Load(), lineno=1832, col_offset=12, end_lineno=1832, end_col_offset=27), Name(id='RuntimeError', ctx=Load(), lineno=1832, col_offset=29, end_lineno=1832, end_col_offset=41), Name(id='OSError', ctx=Load(), lineno=1832, col_offset=43, end_lineno=1832, end_col_offset=50)], ctx=Load(), lineno=1832, col_offset=11, end_lineno=1832, end_col_offset=51), name='exc', body=[Expr(value=Call(func=Attribute(value=Name(id='LOGGER', ctx=Load(), lineno=1833, col_offset=8, end_lineno=1833, end_col_offset=14), attr='warning', ctx=Load(), lineno=1833, col_offset=8, end_lineno=1833, end_col_offset=22), args=[Constant(value='pyreverse build failed for %s: %s', lineno=1833, col_offset=23, end_lineno=1833, end_col_offset=58), Name(id='pkg', ctx=Load(), lineno=1833, col_offset=60, end_lineno=1833, end_col_offset=63), Name(id='exc', ctx=Load(), lineno=1833, col_offset=65, end_lineno=1833, end_col_offset=68)], lineno=1833, col_offset=8, end_lineno=1833, end_col_offset=69), lineno=1833, col_offset=8, end_lineno=1833, end_col_offset=69), Assign(targets=[Name(id='pyrev_ok', ctx=Store(), lineno=1834, col_offset=8, end_lineno=1834, end_col_offset=16)], value=Constant(value=False, lineno=1834, col_offset=19, end_lineno=1834, end_col_offset=24), lineno=1834, col_offset=8, end_lineno=1834, end_col_offset=24)], lineno=1832, col_offset=4, end_lineno=1834, end_col_offset=24)], lineno=1830, col_offset=4, end_lineno=1834, end_col_offset=24), Return(value=Tuple(elts=[Name(id='pydeps_ok', ctx=Load(), lineno=1836, col_offset=11, end_lineno=1836, end_col_offset=20), Name(id='pyrev_ok', ctx=Load(), lineno=1836, col_offset=22, end_lineno=1836, end_col_offset=30)], ctx=Load(), lineno=1836, col_offset=11, end_lineno=1836, end_col_offset=30), lineno=1836, col_offset=4, end_lineno=1836, end_col_offset=30)], returns=Subscript(value=Name(id='tuple', ctx=Load(), lineno=1801, col_offset=5, end_lineno=1801, end_col_offset=10), slice=Tuple(elts=[Name(id='bool', ctx=Load(), lineno=1801, col_offset=11, end_lineno=1801, end_col_offset=15), Name(id='bool', ctx=Load(), lineno=1801, col_offset=17, end_lineno=1801, end_col_offset=21)], ctx=Load(), lineno=1801, col_offset=11, end_lineno=1801, end_col_offset=21), ctx=Load(), lineno=1801, col_offset=5, end_lineno=1801, end_col_offset=22), lineno=1795, col_offset=0, end_lineno=1836, end_col_offset=30), FunctionDef(name='_promote_outputs', args=arguments(args=[arg(arg='stage', annotation=Name(id='StagePaths', ctx=Load(), lineno=1839, col_offset=28, end_lineno=1839, end_col_offset=38), lineno=1839, col_offset=21, end_lineno=1839, end_col_offset=38)]), body=[Expr(value=Constant(value='Promote outputs.\n\n    Parameters\n    ----------\n    stage : StagePaths\n        Staging paths.\n\n    Returns\n    -------\n    bool\n        True if promotion succeeded, False otherwise.\n    ', lineno=1840, col_offset=4, end_lineno=1851, end_col_offset=7), lineno=1840, col_offset=4, end_lineno=1851, end_col_offset=7), Expr(value=Call(func=Attribute(value=Attribute(value=Attribute(value=Name(id='stage', ctx=Load(), lineno=1852, col_offset=4, end_lineno=1852, end_col_offset=9), attr='final_imports', ctx=Load(), lineno=1852, col_offset=4, end_lineno=1852, end_col_offset=23), attr='parent', ctx=Load(), lineno=1852, col_offset=4, end_lineno=1852, end_col_offset=30), attr='mkdir', ctx=Load(), lineno=1852, col_offset=4, end_lineno=1852, end_col_offset=36), keywords=[keyword(arg='parents', value=Constant(value=True, lineno=1852, col_offset=45, end_lineno=1852, end_col_offset=49), lineno=1852, col_offset=37, end_lineno=1852, end_col_offset=49), keyword(arg='exist_ok', value=Constant(value=True, lineno=1852, col_offset=60, end_lineno=1852, end_col_offset=64), lineno=1852, col_offset=51, end_lineno=1852, end_col_offset=64)], lineno=1852, col_offset=4, end_lineno=1852, end_col_offset=65), lineno=1852, col_offset=4, end_lineno=1852, end_col_offset=65), Expr(value=Call(func=Attribute(value=Attribute(value=Attribute(value=Name(id='stage', ctx=Load(), lineno=1853, col_offset=4, end_lineno=1853, end_col_offset=9), attr='final_uml', ctx=Load(), lineno=1853, col_offset=4, end_lineno=1853, end_col_offset=19), attr='parent', ctx=Load(), lineno=1853, col_offset=4, end_lineno=1853, end_col_offset=26), attr='mkdir', ctx=Load(), lineno=1853, col_offset=4, end_lineno=1853, end_col_offset=32), keywords=[keyword(arg='parents', value=Constant(value=True, lineno=1853, col_offset=41, end_lineno=1853, end_col_offset=45), lineno=1853, col_offset=33, end_lineno=1853, end_col_offset=45), keyword(arg='exist_ok', value=Constant(value=True, lineno=1853, col_offset=56, end_lineno=1853, end_col_offset=60), lineno=1853, col_offset=47, end_lineno=1853, end_col_offset=60)], lineno=1853, col_offset=4, end_lineno=1853, end_col_offset=61), lineno=1853, col_offset=4, end_lineno=1853, end_col_offset=61), Try(body=[Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='stage', ctx=Load(), lineno=1855, col_offset=8, end_lineno=1855, end_col_offset=13), attr='staged_imports', ctx=Load(), lineno=1855, col_offset=8, end_lineno=1855, end_col_offset=28), attr='replace', ctx=Load(), lineno=1855, col_offset=8, end_lineno=1855, end_col_offset=36), args=[Attribute(value=Name(id='stage', ctx=Load(), lineno=1855, col_offset=37, end_lineno=1855, end_col_offset=42), attr='final_imports', ctx=Load(), lineno=1855, col_offset=37, end_lineno=1855, end_col_offset=56)], lineno=1855, col_offset=8, end_lineno=1855, end_col_offset=57), lineno=1855, col_offset=8, end_lineno=1855, end_col_offset=57), Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='stage', ctx=Load(), lineno=1856, col_offset=8, end_lineno=1856, end_col_offset=13), attr='staged_uml', ctx=Load(), lineno=1856, col_offset=8, end_lineno=1856, end_col_offset=24), attr='replace', ctx=Load(), lineno=1856, col_offset=8, end_lineno=1856, end_col_offset=32), args=[Attribute(value=Name(id='stage', ctx=Load(), lineno=1856, col_offset=33, end_lineno=1856, end_col_offset=38), attr='final_uml', ctx=Load(), lineno=1856, col_offset=33, end_lineno=1856, end_col_offset=48)], lineno=1856, col_offset=8, end_lineno=1856, end_col_offset=49), lineno=1856, col_offset=8, end_lineno=1856, end_col_offset=49)], handlers=[ExceptHandler(type=Tuple(elts=[Name(id='OSError', ctx=Load(), lineno=1857, col_offset=12, end_lineno=1857, end_col_offset=19), Attribute(value=Name(id='shutil', ctx=Load(), lineno=1857, col_offset=21, end_lineno=1857, end_col_offset=27), attr='Error', ctx=Load(), lineno=1857, col_offset=21, end_lineno=1857, end_col_offset=33)], ctx=Load(), lineno=1857, col_offset=11, end_lineno=1857, end_col_offset=34), name='exc', body=[Expr(value=Call(func=Attribute(value=Name(id='LOGGER', ctx=Load(), lineno=1858, col_offset=8, end_lineno=1858, end_col_offset=14), attr='warning', ctx=Load(), lineno=1858, col_offset=8, end_lineno=1858, end_col_offset=22), args=[Constant(value='Failed to promote outputs: %s', lineno=1858, col_offset=23, end_lineno=1858, end_col_offset=54), Name(id='exc', ctx=Load(), lineno=1858, col_offset=56, end_lineno=1858, end_col_offset=59)], lineno=1858, col_offset=8, end_lineno=1858, end_col_offset=60), lineno=1858, col_offset=8, end_lineno=1858, end_col_offset=60), Return(value=Constant(value=False, lineno=1859, col_offset=15, end_lineno=1859, end_col_offset=20), lineno=1859, col_offset=8, end_lineno=1859, end_col_offset=20)], lineno=1857, col_offset=4, end_lineno=1859, end_col_offset=20)], lineno=1854, col_offset=4, end_lineno=1859, end_col_offset=20), Return(value=Constant(value=True, lineno=1860, col_offset=11, end_lineno=1860, end_col_offset=15), lineno=1860, col_offset=4, end_lineno=1860, end_col_offset=15)], returns=Name(id='bool', ctx=Load(), lineno=1839, col_offset=43, end_lineno=1839, end_col_offset=47), lineno=1839, col_offset=0, end_lineno=1860, end_col_offset=15), FunctionDef(name='_update_cache', args=arguments(args=[arg(arg='pkg', annotation=Name(id='str', ctx=Load(), lineno=1864, col_offset=9, end_lineno=1864, end_col_offset=12), lineno=1864, col_offset=4, end_lineno=1864, end_col_offset=12), arg(arg='cache_ctx', annotation=Name(id='CacheContext', ctx=Load(), lineno=1865, col_offset=15, end_lineno=1865, end_col_offset=27), lineno=1865, col_offset=4, end_lineno=1865, end_col_offset=27), arg(arg='stage', annotation=Name(id='StagePaths', ctx=Load(), lineno=1866, col_offset=11, end_lineno=1866, end_col_offset=21), lineno=1866, col_offset=4, end_lineno=1866, end_col_offset=21)], kwonlyargs=[arg(arg='verbose', annotation=Name(id='bool', ctx=Load(), lineno=1868, col_offset=13, end_lineno=1868, end_col_offset=17), lineno=1868, col_offset=4, end_lineno=1868, end_col_offset=17)], kw_defaults=[None]), body=[Expr(value=Constant(value='Update cache.\n\n    Parameters\n    ----------\n    pkg : str\n        Package name.\n    cache_ctx : CacheContext\n        Cache context.\n    stage : StagePaths\n        Staging paths.\n    verbose : bool\n        Verbose logging flag.\n    ', lineno=1870, col_offset=4, end_lineno=1882, end_col_offset=7), lineno=1870, col_offset=4, end_lineno=1882, end_col_offset=7), If(test=BoolOp(op=Or(), values=[Compare(left=Attribute(value=Name(id='cache_ctx', ctx=Load(), lineno=1883, col_offset=7, end_lineno=1883, end_col_offset=16), attr='bucket', ctx=Load(), lineno=1883, col_offset=7, end_lineno=1883, end_col_offset=23), ops=[Is()], comparators=[Constant(value=None, lineno=1883, col_offset=27, end_lineno=1883, end_col_offset=31)], lineno=1883, col_offset=7, end_lineno=1883, end_col_offset=31), Compare(left=Attribute(value=Name(id='cache_ctx', ctx=Load(), lineno=1883, col_offset=35, end_lineno=1883, end_col_offset=44), attr='tree_hash', ctx=Load(), lineno=1883, col_offset=35, end_lineno=1883, end_col_offset=54), ops=[Is()], comparators=[Constant(value=None, lineno=1883, col_offset=58, end_lineno=1883, end_col_offset=62)], lineno=1883, col_offset=35, end_lineno=1883, end_col_offset=62)], lineno=1883, col_offset=7, end_lineno=1883, end_col_offset=62), body=[Return(lineno=1884, col_offset=8, end_lineno=1884, end_col_offset=14)], lineno=1883, col_offset=4, end_lineno=1884, end_col_offset=14), Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='cache_ctx', ctx=Load(), lineno=1885, col_offset=4, end_lineno=1885, end_col_offset=13), attr='bucket', ctx=Load(), lineno=1885, col_offset=4, end_lineno=1885, end_col_offset=20), attr='mkdir', ctx=Load(), lineno=1885, col_offset=4, end_lineno=1885, end_col_offset=26), keywords=[keyword(arg='parents', value=Constant(value=True, lineno=1885, col_offset=35, end_lineno=1885, end_col_offset=39), lineno=1885, col_offset=27, end_lineno=1885, end_col_offset=39), keyword(arg='exist_ok', value=Constant(value=True, lineno=1885, col_offset=50, end_lineno=1885, end_col_offset=54), lineno=1885, col_offset=41, end_lineno=1885, end_col_offset=54)], lineno=1885, col_offset=4, end_lineno=1885, end_col_offset=55), lineno=1885, col_offset=4, end_lineno=1885, end_col_offset=55), Try(body=[Expr(value=Call(func=Attribute(value=Name(id='shutil', ctx=Load(), lineno=1887, col_offset=8, end_lineno=1887, end_col_offset=14), attr='copy2', ctx=Load(), lineno=1887, col_offset=8, end_lineno=1887, end_col_offset=20), args=[Attribute(value=Name(id='stage', ctx=Load(), lineno=1887, col_offset=21, end_lineno=1887, end_col_offset=26), attr='final_imports', ctx=Load(), lineno=1887, col_offset=21, end_lineno=1887, end_col_offset=40), BinOp(left=Attribute(value=Name(id='cache_ctx', ctx=Load(), lineno=1887, col_offset=42, end_lineno=1887, end_col_offset=51), attr='bucket', ctx=Load(), lineno=1887, col_offset=42, end_lineno=1887, end_col_offset=58), op=Div(), right=Attribute(value=Attribute(value=Name(id='stage', ctx=Load(), lineno=1887, col_offset=61, end_lineno=1887, end_col_offset=66), attr='final_imports', ctx=Load(), lineno=1887, col_offset=61, end_lineno=1887, end_col_offset=80), attr='name', ctx=Load(), lineno=1887, col_offset=61, end_lineno=1887, end_col_offset=85), lineno=1887, col_offset=42, end_lineno=1887, end_col_offset=85)], lineno=1887, col_offset=8, end_lineno=1887, end_col_offset=86), lineno=1887, col_offset=8, end_lineno=1887, end_col_offset=86), Expr(value=Call(func=Attribute(value=Name(id='shutil', ctx=Load(), lineno=1888, col_offset=8, end_lineno=1888, end_col_offset=14), attr='copy2', ctx=Load(), lineno=1888, col_offset=8, end_lineno=1888, end_col_offset=20), args=[Attribute(value=Name(id='stage', ctx=Load(), lineno=1888, col_offset=21, end_lineno=1888, end_col_offset=26), attr='final_uml', ctx=Load(), lineno=1888, col_offset=21, end_lineno=1888, end_col_offset=36), BinOp(left=Attribute(value=Name(id='cache_ctx', ctx=Load(), lineno=1888, col_offset=38, end_lineno=1888, end_col_offset=47), attr='bucket', ctx=Load(), lineno=1888, col_offset=38, end_lineno=1888, end_col_offset=54), op=Div(), right=Attribute(value=Attribute(value=Name(id='stage', ctx=Load(), lineno=1888, col_offset=57, end_lineno=1888, end_col_offset=62), attr='final_uml', ctx=Load(), lineno=1888, col_offset=57, end_lineno=1888, end_col_offset=72), attr='name', ctx=Load(), lineno=1888, col_offset=57, end_lineno=1888, end_col_offset=77), lineno=1888, col_offset=38, end_lineno=1888, end_col_offset=77)], lineno=1888, col_offset=8, end_lineno=1888, end_col_offset=78), lineno=1888, col_offset=8, end_lineno=1888, end_col_offset=78)], handlers=[ExceptHandler(type=Tuple(elts=[Name(id='OSError', ctx=Load(), lineno=1889, col_offset=12, end_lineno=1889, end_col_offset=19), Attribute(value=Name(id='shutil', ctx=Load(), lineno=1889, col_offset=21, end_lineno=1889, end_col_offset=27), attr='Error', ctx=Load(), lineno=1889, col_offset=21, end_lineno=1889, end_col_offset=33)], ctx=Load(), lineno=1889, col_offset=11, end_lineno=1889, end_col_offset=34), name='exc', body=[If(test=Name(id='verbose', ctx=Load(), lineno=1890, col_offset=11, end_lineno=1890, end_col_offset=18), body=[Assign(targets=[Name(id='snippet', ctx=Store(), lineno=1891, col_offset=12, end_lineno=1891, end_col_offset=19)], value=Subscript(value=Attribute(value=Name(id='cache_ctx', ctx=Load(), lineno=1891, col_offset=22, end_lineno=1891, end_col_offset=31), attr='tree_hash', ctx=Load(), lineno=1891, col_offset=22, end_lineno=1891, end_col_offset=41), slice=Slice(upper=Constant(value=7, lineno=1891, col_offset=43, end_lineno=1891, end_col_offset=44), lineno=1891, col_offset=42, end_lineno=1891, end_col_offset=44), ctx=Load(), lineno=1891, col_offset=22, end_lineno=1891, end_col_offset=45), lineno=1891, col_offset=12, end_lineno=1891, end_col_offset=45), Expr(value=Call(func=Attribute(value=Name(id='LOGGER', ctx=Load(), lineno=1892, col_offset=12, end_lineno=1892, end_col_offset=18), attr='warning', ctx=Load(), lineno=1892, col_offset=12, end_lineno=1892, end_col_offset=26), args=[Constant(value='Failed to update cache for %s@%s: %s', lineno=1892, col_offset=27, end_lineno=1892, end_col_offset=65), Name(id='pkg', ctx=Load(), lineno=1892, col_offset=67, end_lineno=1892, end_col_offset=70), Name(id='snippet', ctx=Load(), lineno=1892, col_offset=72, end_lineno=1892, end_col_offset=79), Name(id='exc', ctx=Load(), lineno=1892, col_offset=81, end_lineno=1892, end_col_offset=84)], lineno=1892, col_offset=12, end_lineno=1892, end_col_offset=85), lineno=1892, col_offset=12, end_lineno=1892, end_col_offset=85)], lineno=1890, col_offset=8, end_lineno=1892, end_col_offset=85), Return(lineno=1893, col_offset=8, end_lineno=1893, end_col_offset=14)], lineno=1889, col_offset=4, end_lineno=1893, end_col_offset=14)], lineno=1886, col_offset=4, end_lineno=1893, end_col_offset=14), If(test=Name(id='verbose', ctx=Load(), lineno=1894, col_offset=7, end_lineno=1894, end_col_offset=14), body=[Assign(targets=[Name(id='snippet', ctx=Store(), lineno=1895, col_offset=8, end_lineno=1895, end_col_offset=15)], value=Subscript(value=Attribute(value=Name(id='cache_ctx', ctx=Load(), lineno=1895, col_offset=18, end_lineno=1895, end_col_offset=27), attr='tree_hash', ctx=Load(), lineno=1895, col_offset=18, end_lineno=1895, end_col_offset=37), slice=Slice(upper=Constant(value=7, lineno=1895, col_offset=39, end_lineno=1895, end_col_offset=40), lineno=1895, col_offset=38, end_lineno=1895, end_col_offset=40), ctx=Load(), lineno=1895, col_offset=18, end_lineno=1895, end_col_offset=41), lineno=1895, col_offset=8, end_lineno=1895, end_col_offset=41), Expr(value=Call(func=Attribute(value=Name(id='LOGGER', ctx=Load(), lineno=1896, col_offset=8, end_lineno=1896, end_col_offset=14), attr='info', ctx=Load(), lineno=1896, col_offset=8, end_lineno=1896, end_col_offset=19), args=[Constant(value='Cached: %s@%s', lineno=1896, col_offset=20, end_lineno=1896, end_col_offset=35), Name(id='pkg', ctx=Load(), lineno=1896, col_offset=37, end_lineno=1896, end_col_offset=40), Name(id='snippet', ctx=Load(), lineno=1896, col_offset=42, end_lineno=1896, end_col_offset=49)], lineno=1896, col_offset=8, end_lineno=1896, end_col_offset=50), lineno=1896, col_offset=8, end_lineno=1896, end_col_offset=50)], lineno=1894, col_offset=4, end_lineno=1896, end_col_offset=50)], returns=Constant(value=None, lineno=1869, col_offset=5, end_lineno=1869, end_col_offset=9), lineno=1863, col_offset=0, end_lineno=1896, end_col_offset=50), FunctionDef(name='build_one_package', args=arguments(args=[arg(arg='pkg', annotation=Name(id='str', ctx=Load(), lineno=1899, col_offset=27, end_lineno=1899, end_col_offset=30), lineno=1899, col_offset=22, end_lineno=1899, end_col_offset=30), arg(arg='config', annotation=Name(id='PackageBuildConfig', ctx=Load(), lineno=1899, col_offset=40, end_lineno=1899, end_col_offset=58), lineno=1899, col_offset=32, end_lineno=1899, end_col_offset=58)]), body=[Expr(value=Constant(value='Compute build one package.\n\n    Carry out the build one package operation for the surrounding component. Generated documentation highlights how this helper collaborates with neighbouring utilities. Callers rely on the routine to remain stable across releases.\n\n    Parameters\n    ----------\n    pkg : str\n        Package name to render.\n    config : PackageBuildConfig\n        Rendering configuration and cache preferences.\n\n    Returns\n    -------\n    tuple[str, bool, bool, bool]\n        ``(pkg, used_cache, pydeps_ok, pyreverse_ok)`` summarising build results.\n\n    Examples\n    --------\n    >>> from pathlib import Path\n    >>> from tools.docs.build_graphs import PackageBuildConfig, build_one_package\n    >>> cfg = PackageBuildConfig("svg", tuple(), 4, Path("/tmp/cache"), False, False)\n    >>> result = build_one_package("demo_pkg", cfg)\n    >>> isinstance(result, tuple)\n    True\n    ', lineno=1900, col_offset=4, end_lineno=1924, end_col_offset=7), lineno=1900, col_offset=4, end_lineno=1924, end_col_offset=7), Assign(targets=[Name(id='cache_ctx', ctx=Store(), lineno=1925, col_offset=4, end_lineno=1925, end_col_offset=13)], value=Call(func=Name(id='_maybe_restore_from_cache', ctx=Load(), lineno=1925, col_offset=16, end_lineno=1925, end_col_offset=41), args=[Name(id='pkg', ctx=Load(), lineno=1926, col_offset=8, end_lineno=1926, end_col_offset=11), Attribute(value=Name(id='config', ctx=Load(), lineno=1927, col_offset=8, end_lineno=1927, end_col_offset=14), attr='fmt', ctx=Load(), lineno=1927, col_offset=8, end_lineno=1927, end_col_offset=18), Attribute(value=Name(id='config', ctx=Load(), lineno=1928, col_offset=8, end_lineno=1928, end_col_offset=14), attr='cache_dir', ctx=Load(), lineno=1928, col_offset=8, end_lineno=1928, end_col_offset=24)], keywords=[keyword(arg='use_cache', value=Attribute(value=Name(id='config', ctx=Load(), lineno=1929, col_offset=18, end_lineno=1929, end_col_offset=24), attr='use_cache', ctx=Load(), lineno=1929, col_offset=18, end_lineno=1929, end_col_offset=34), lineno=1929, col_offset=8, end_lineno=1929, end_col_offset=34), keyword(arg='verbose', value=Attribute(value=Name(id='config', ctx=Load(), lineno=1930, col_offset=16, end_lineno=1930, end_col_offset=22), attr='verbose', ctx=Load(), lineno=1930, col_offset=16, end_lineno=1930, end_col_offset=30), lineno=1930, col_offset=8, end_lineno=1930, end_col_offset=30)], lineno=1925, col_offset=16, end_lineno=1931, end_col_offset=5), lineno=1925, col_offset=4, end_lineno=1931, end_col_offset=5), If(test=Attribute(value=Name(id='cache_ctx', ctx=Load(), lineno=1932, col_offset=7, end_lineno=1932, end_col_offset=16), attr='used_cache', ctx=Load(), lineno=1932, col_offset=7, end_lineno=1932, end_col_offset=27), body=[Return(value=Tuple(elts=[Name(id='pkg', ctx=Load(), lineno=1933, col_offset=16, end_lineno=1933, end_col_offset=19), Constant(value=True, lineno=1933, col_offset=21, end_lineno=1933, end_col_offset=25), Constant(value=True, lineno=1933, col_offset=27, end_lineno=1933, end_col_offset=31), Constant(value=True, lineno=1933, col_offset=33, end_lineno=1933, end_col_offset=37)], ctx=Load(), lineno=1933, col_offset=15, end_lineno=1933, end_col_offset=38), lineno=1933, col_offset=8, end_lineno=1933, end_col_offset=38)], lineno=1932, col_offset=4, end_lineno=1933, end_col_offset=38), Assign(targets=[Name(id='stage', ctx=Store(), lineno=1935, col_offset=4, end_lineno=1935, end_col_offset=9)], value=Call(func=Name(id='_prepare_staging', ctx=Load(), lineno=1935, col_offset=12, end_lineno=1935, end_col_offset=28), args=[Name(id='pkg', ctx=Load(), lineno=1935, col_offset=29, end_lineno=1935, end_col_offset=32), Attribute(value=Name(id='config', ctx=Load(), lineno=1935, col_offset=34, end_lineno=1935, end_col_offset=40), attr='fmt', ctx=Load(), lineno=1935, col_offset=34, end_lineno=1935, end_col_offset=44)], lineno=1935, col_offset=12, end_lineno=1935, end_col_offset=45), lineno=1935, col_offset=4, end_lineno=1935, end_col_offset=45), Assign(targets=[Tuple(elts=[Name(id='pydeps_ok', ctx=Store(), lineno=1936, col_offset=4, end_lineno=1936, end_col_offset=13), Name(id='pyrev_ok', ctx=Store(), lineno=1936, col_offset=15, end_lineno=1936, end_col_offset=23)], ctx=Store(), lineno=1936, col_offset=4, end_lineno=1936, end_col_offset=23)], value=Call(func=Name(id='_build_artifacts', ctx=Load(), lineno=1936, col_offset=26, end_lineno=1936, end_col_offset=42), args=[Name(id='pkg', ctx=Load(), lineno=1937, col_offset=8, end_lineno=1937, end_col_offset=11), Attribute(value=Name(id='config', ctx=Load(), lineno=1938, col_offset=8, end_lineno=1938, end_col_offset=14), attr='fmt', ctx=Load(), lineno=1938, col_offset=8, end_lineno=1938, end_col_offset=18), Call(func=Attribute(value=Name(id='config', ctx=Load(), lineno=1939, col_offset=8, end_lineno=1939, end_col_offset=14), attr='excludes_list', ctx=Load(), lineno=1939, col_offset=8, end_lineno=1939, end_col_offset=28), lineno=1939, col_offset=8, end_lineno=1939, end_col_offset=30), Attribute(value=Name(id='config', ctx=Load(), lineno=1940, col_offset=8, end_lineno=1940, end_col_offset=14), attr='max_bacon', ctx=Load(), lineno=1940, col_offset=8, end_lineno=1940, end_col_offset=24), Name(id='stage', ctx=Load(), lineno=1941, col_offset=8, end_lineno=1941, end_col_offset=13)], lineno=1936, col_offset=26, end_lineno=1942, end_col_offset=5), lineno=1936, col_offset=4, end_lineno=1942, end_col_offset=5), If(test=BoolOp(op=And(), values=[Name(id='pydeps_ok', ctx=Load(), lineno=1944, col_offset=7, end_lineno=1944, end_col_offset=16), Name(id='pyrev_ok', ctx=Load(), lineno=1944, col_offset=21, end_lineno=1944, end_col_offset=29)], lineno=1944, col_offset=7, end_lineno=1944, end_col_offset=29), body=[Assign(targets=[Name(id='promoted', ctx=Store(), lineno=1945, col_offset=8, end_lineno=1945, end_col_offset=16)], value=Call(func=Name(id='_promote_outputs', ctx=Load(), lineno=1945, col_offset=19, end_lineno=1945, end_col_offset=35), args=[Name(id='stage', ctx=Load(), lineno=1945, col_offset=36, end_lineno=1945, end_col_offset=41)], lineno=1945, col_offset=19, end_lineno=1945, end_col_offset=42), lineno=1945, col_offset=8, end_lineno=1945, end_col_offset=42), If(test=UnaryOp(op=Not(), operand=Name(id='promoted', ctx=Load(), lineno=1946, col_offset=15, end_lineno=1946, end_col_offset=23), lineno=1946, col_offset=11, end_lineno=1946, end_col_offset=23), body=[Assign(targets=[Name(id='pydeps_ok', ctx=Store(), lineno=1947, col_offset=12, end_lineno=1947, end_col_offset=21)], value=Constant(value=False, lineno=1947, col_offset=24, end_lineno=1947, end_col_offset=29), lineno=1947, col_offset=12, end_lineno=1947, end_col_offset=29), Assign(targets=[Name(id='pyrev_ok', ctx=Store(), lineno=1948, col_offset=12, end_lineno=1948, end_col_offset=20)], value=Constant(value=False, lineno=1948, col_offset=23, end_lineno=1948, end_col_offset=28), lineno=1948, col_offset=12, end_lineno=1948, end_col_offset=28)], lineno=1946, col_offset=8, end_lineno=1948, end_col_offset=28)], orelse=[Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='stage', ctx=Load(), lineno=1950, col_offset=8, end_lineno=1950, end_col_offset=13), attr='staged_imports', ctx=Load(), lineno=1950, col_offset=8, end_lineno=1950, end_col_offset=28), attr='unlink', ctx=Load(), lineno=1950, col_offset=8, end_lineno=1950, end_col_offset=35), keywords=[keyword(arg='missing_ok', value=Constant(value=True, lineno=1950, col_offset=47, end_lineno=1950, end_col_offset=51), lineno=1950, col_offset=36, end_lineno=1950, end_col_offset=51)], lineno=1950, col_offset=8, end_lineno=1950, end_col_offset=52), lineno=1950, col_offset=8, end_lineno=1950, end_col_offset=52), Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='stage', ctx=Load(), lineno=1951, col_offset=8, end_lineno=1951, end_col_offset=13), attr='staged_uml', ctx=Load(), lineno=1951, col_offset=8, end_lineno=1951, end_col_offset=24), attr='unlink', ctx=Load(), lineno=1951, col_offset=8, end_lineno=1951, end_col_offset=31), keywords=[keyword(arg='missing_ok', value=Constant(value=True, lineno=1951, col_offset=43, end_lineno=1951, end_col_offset=47), lineno=1951, col_offset=32, end_lineno=1951, end_col_offset=47)], lineno=1951, col_offset=8, end_lineno=1951, end_col_offset=48), lineno=1951, col_offset=8, end_lineno=1951, end_col_offset=48)], lineno=1944, col_offset=4, end_lineno=1951, end_col_offset=48), Expr(value=Call(func=Attribute(value=Name(id='shutil', ctx=Load(), lineno=1953, col_offset=4, end_lineno=1953, end_col_offset=10), attr='rmtree', ctx=Load(), lineno=1953, col_offset=4, end_lineno=1953, end_col_offset=17), args=[Attribute(value=Name(id='stage', ctx=Load(), lineno=1953, col_offset=18, end_lineno=1953, end_col_offset=23), attr='staging_dir', ctx=Load(), lineno=1953, col_offset=18, end_lineno=1953, end_col_offset=35)], keywords=[keyword(arg='ignore_errors', value=Constant(value=True, lineno=1953, col_offset=51, end_lineno=1953, end_col_offset=55), lineno=1953, col_offset=37, end_lineno=1953, end_col_offset=55)], lineno=1953, col_offset=4, end_lineno=1953, end_col_offset=56), lineno=1953, col_offset=4, end_lineno=1953, end_col_offset=56), If(test=BoolOp(op=And(), values=[Attribute(value=Name(id='config', ctx=Load(), lineno=1955, col_offset=7, end_lineno=1955, end_col_offset=13), attr='use_cache', ctx=Load(), lineno=1955, col_offset=7, end_lineno=1955, end_col_offset=23), Name(id='pydeps_ok', ctx=Load(), lineno=1955, col_offset=28, end_lineno=1955, end_col_offset=37), Name(id='pyrev_ok', ctx=Load(), lineno=1955, col_offset=42, end_lineno=1955, end_col_offset=50), UnaryOp(op=Not(), operand=Attribute(value=Name(id='cache_ctx', ctx=Load(), lineno=1955, col_offset=59, end_lineno=1955, end_col_offset=68), attr='used_cache', ctx=Load(), lineno=1955, col_offset=59, end_lineno=1955, end_col_offset=79), lineno=1955, col_offset=55, end_lineno=1955, end_col_offset=79)], lineno=1955, col_offset=7, end_lineno=1955, end_col_offset=79), body=[Expr(value=Call(func=Name(id='_update_cache', ctx=Load(), lineno=1956, col_offset=8, end_lineno=1956, end_col_offset=21), args=[Name(id='pkg', ctx=Load(), lineno=1956, col_offset=22, end_lineno=1956, end_col_offset=25), Name(id='cache_ctx', ctx=Load(), lineno=1956, col_offset=27, end_lineno=1956, end_col_offset=36), Name(id='stage', ctx=Load(), lineno=1956, col_offset=38, end_lineno=1956, end_col_offset=43)], keywords=[keyword(arg='verbose', value=Attribute(value=Name(id='config', ctx=Load(), lineno=1956, col_offset=53, end_lineno=1956, end_col_offset=59), attr='verbose', ctx=Load(), lineno=1956, col_offset=53, end_lineno=1956, end_col_offset=67), lineno=1956, col_offset=45, end_lineno=1956, end_col_offset=67)], lineno=1956, col_offset=8, end_lineno=1956, end_col_offset=68), lineno=1956, col_offset=8, end_lineno=1956, end_col_offset=68)], lineno=1955, col_offset=4, end_lineno=1956, end_col_offset=68), Return(value=Tuple(elts=[Name(id='pkg', ctx=Load(), lineno=1958, col_offset=12, end_lineno=1958, end_col_offset=15), Attribute(value=Name(id='cache_ctx', ctx=Load(), lineno=1958, col_offset=17, end_lineno=1958, end_col_offset=26), attr='used_cache', ctx=Load(), lineno=1958, col_offset=17, end_lineno=1958, end_col_offset=37), Name(id='pydeps_ok', ctx=Load(), lineno=1958, col_offset=39, end_lineno=1958, end_col_offset=48), Name(id='pyrev_ok', ctx=Load(), lineno=1958, col_offset=50, end_lineno=1958, end_col_offset=58)], ctx=Load(), lineno=1958, col_offset=11, end_lineno=1958, end_col_offset=59), lineno=1958, col_offset=4, end_lineno=1958, end_col_offset=59)], returns=Subscript(value=Name(id='tuple', ctx=Load(), lineno=1899, col_offset=63, end_lineno=1899, end_col_offset=68), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=1899, col_offset=69, end_lineno=1899, end_col_offset=72), Name(id='bool', ctx=Load(), lineno=1899, col_offset=74, end_lineno=1899, end_col_offset=78), Name(id='bool', ctx=Load(), lineno=1899, col_offset=80, end_lineno=1899, end_col_offset=84), Name(id='bool', ctx=Load(), lineno=1899, col_offset=86, end_lineno=1899, end_col_offset=90)], ctx=Load(), lineno=1899, col_offset=69, end_lineno=1899, end_col_offset=90), ctx=Load(), lineno=1899, col_offset=63, end_lineno=1899, end_col_offset=91), lineno=1899, col_offset=0, end_lineno=1958, end_col_offset=59), FunctionDef(name='_validate_runtime_dependencies', args=arguments(), body=[Expr(value=Constant(value='Validate runtime dependencies.\n\n    Raises\n    ------\n    ValidationError\n        Raised when required dependencies are missing.\n    ', lineno=1962, col_offset=4, end_lineno=1968, end_col_offset=7), lineno=1962, col_offset=4, end_lineno=1968, end_col_offset=7), Assign(targets=[Name(id='missing', ctx=Store(), lineno=1969, col_offset=4, end_lineno=1969, end_col_offset=11)], value=List(ctx=Load(), lineno=1969, col_offset=14, end_lineno=1969, end_col_offset=16), lineno=1969, col_offset=4, end_lineno=1969, end_col_offset=16), If(test=Compare(left=Name(id='pydot', ctx=Load(), lineno=1970, col_offset=7, end_lineno=1970, end_col_offset=12), ops=[Is()], comparators=[Constant(value=None, lineno=1970, col_offset=16, end_lineno=1970, end_col_offset=20)], lineno=1970, col_offset=7, end_lineno=1970, end_col_offset=20), body=[Expr(value=Call(func=Attribute(value=Name(id='missing', ctx=Load(), lineno=1971, col_offset=8, end_lineno=1971, end_col_offset=15), attr='append', ctx=Load(), lineno=1971, col_offset=8, end_lineno=1971, end_col_offset=22), args=[Constant(value='pydot', lineno=1971, col_offset=23, end_lineno=1971, end_col_offset=30)], lineno=1971, col_offset=8, end_lineno=1971, end_col_offset=31), lineno=1971, col_offset=8, end_lineno=1971, end_col_offset=31)], lineno=1970, col_offset=4, end_lineno=1971, end_col_offset=31), If(test=Compare(left=Name(id='nx', ctx=Load(), lineno=1972, col_offset=7, end_lineno=1972, end_col_offset=9), ops=[Is()], comparators=[Constant(value=None, lineno=1972, col_offset=13, end_lineno=1972, end_col_offset=17)], lineno=1972, col_offset=7, end_lineno=1972, end_col_offset=17), body=[Expr(value=Call(func=Attribute(value=Name(id='missing', ctx=Load(), lineno=1973, col_offset=8, end_lineno=1973, end_col_offset=15), attr='append', ctx=Load(), lineno=1973, col_offset=8, end_lineno=1973, end_col_offset=22), args=[Constant(value='networkx', lineno=1973, col_offset=23, end_lineno=1973, end_col_offset=33)], lineno=1973, col_offset=8, end_lineno=1973, end_col_offset=34), lineno=1973, col_offset=8, end_lineno=1973, end_col_offset=34)], lineno=1972, col_offset=4, end_lineno=1973, end_col_offset=34), If(test=Compare(left=Name(id='yaml', ctx=Load(), lineno=1974, col_offset=7, end_lineno=1974, end_col_offset=11), ops=[Is()], comparators=[Constant(value=None, lineno=1974, col_offset=15, end_lineno=1974, end_col_offset=19)], lineno=1974, col_offset=7, end_lineno=1974, end_col_offset=19), body=[Expr(value=Call(func=Attribute(value=Name(id='missing', ctx=Load(), lineno=1975, col_offset=8, end_lineno=1975, end_col_offset=15), attr='append', ctx=Load(), lineno=1975, col_offset=8, end_lineno=1975, end_col_offset=22), args=[Constant(value='pyyaml', lineno=1975, col_offset=23, end_lineno=1975, end_col_offset=31)], lineno=1975, col_offset=8, end_lineno=1975, end_col_offset=32), lineno=1975, col_offset=8, end_lineno=1975, end_col_offset=32)], lineno=1974, col_offset=4, end_lineno=1975, end_col_offset=32), If(test=Name(id='missing', ctx=Load(), lineno=1976, col_offset=7, end_lineno=1976, end_col_offset=14), body=[Assign(targets=[Name(id='message', ctx=Store(), lineno=1977, col_offset=8, end_lineno=1977, end_col_offset=15)], value=BinOp(left=BinOp(left=Constant(value='Missing Python packages: ', lineno=1978, col_offset=12, end_lineno=1978, end_col_offset=39), op=Add(), right=Call(func=Attribute(value=Constant(value=', ', lineno=1979, col_offset=14, end_lineno=1979, end_col_offset=18), attr='join', ctx=Load(), lineno=1979, col_offset=14, end_lineno=1979, end_col_offset=23), args=[Name(id='missing', ctx=Load(), lineno=1979, col_offset=24, end_lineno=1979, end_col_offset=31)], lineno=1979, col_offset=14, end_lineno=1979, end_col_offset=32), lineno=1978, col_offset=12, end_lineno=1979, end_col_offset=32), op=Add(), right=Constant(value='. Install them in the docs environment.', lineno=1980, col_offset=14, end_lineno=1980, end_col_offset=55), lineno=1978, col_offset=12, end_lineno=1980, end_col_offset=55), lineno=1977, col_offset=8, end_lineno=1981, end_col_offset=9), Raise(exc=Call(func=Name(id='ValidationError', ctx=Load(), lineno=1982, col_offset=14, end_lineno=1982, end_col_offset=29), args=[Name(id='message', ctx=Load(), lineno=1982, col_offset=30, end_lineno=1982, end_col_offset=37)], lineno=1982, col_offset=14, end_lineno=1982, end_col_offset=38), lineno=1982, col_offset=8, end_lineno=1982, end_col_offset=38)], lineno=1976, col_offset=4, end_lineno=1982, end_col_offset=38), If(test=UnaryOp(op=Not(), operand=Call(func=Attribute(value=Name(id='shutil', ctx=Load(), lineno=1984, col_offset=11, end_lineno=1984, end_col_offset=17), attr='which', ctx=Load(), lineno=1984, col_offset=11, end_lineno=1984, end_col_offset=23), args=[Constant(value='dot', lineno=1984, col_offset=24, end_lineno=1984, end_col_offset=29)], lineno=1984, col_offset=11, end_lineno=1984, end_col_offset=30), lineno=1984, col_offset=7, end_lineno=1984, end_col_offset=30), body=[Assign(targets=[Name(id='message', ctx=Store(), lineno=1985, col_offset=8, end_lineno=1985, end_col_offset=15)], value=Constant(value="graphviz 'dot' not found on PATH. Install graphviz.", lineno=1985, col_offset=18, end_lineno=1985, end_col_offset=71), lineno=1985, col_offset=8, end_lineno=1985, end_col_offset=71), Raise(exc=Call(func=Name(id='ValidationError', ctx=Load(), lineno=1986, col_offset=14, end_lineno=1986, end_col_offset=29), args=[Name(id='message', ctx=Load(), lineno=1986, col_offset=30, end_lineno=1986, end_col_offset=37)], lineno=1986, col_offset=14, end_lineno=1986, end_col_offset=38), lineno=1986, col_offset=8, end_lineno=1986, end_col_offset=38)], lineno=1984, col_offset=4, end_lineno=1986, end_col_offset=38), Expr(value=Call(func=Name(id='ensure_bin', ctx=Load(), lineno=1988, col_offset=4, end_lineno=1988, end_col_offset=14), args=[Constant(value='pydeps', lineno=1988, col_offset=15, end_lineno=1988, end_col_offset=23)], lineno=1988, col_offset=4, end_lineno=1988, end_col_offset=24), lineno=1988, col_offset=4, end_lineno=1988, end_col_offset=24), Expr(value=Call(func=Name(id='ensure_bin', ctx=Load(), lineno=1989, col_offset=4, end_lineno=1989, end_col_offset=14), args=[Constant(value='pyreverse', lineno=1989, col_offset=15, end_lineno=1989, end_col_offset=26)], lineno=1989, col_offset=4, end_lineno=1989, end_col_offset=27), lineno=1989, col_offset=4, end_lineno=1989, end_col_offset=27)], returns=Constant(value=None, lineno=1961, col_offset=40, end_lineno=1961, end_col_offset=44), lineno=1961, col_offset=0, end_lineno=1989, end_col_offset=27), FunctionDef(name='_resolve_packages', args=arguments(args=[arg(arg='args', annotation=Attribute(value=Name(id='argparse', ctx=Load(), lineno=1992, col_offset=28, end_lineno=1992, end_col_offset=36), attr='Namespace', ctx=Load(), lineno=1992, col_offset=28, end_lineno=1992, end_col_offset=46), lineno=1992, col_offset=22, end_lineno=1992, end_col_offset=46)]), body=[Expr(value=Constant(value='Resolve packages.\n\n    Parameters\n    ----------\n    args : argparse.Namespace\n        Parsed arguments.\n\n    Returns\n    -------\n    list[str]\n        List of package names.\n    ', lineno=1993, col_offset=4, end_lineno=2004, end_col_offset=7), lineno=1993, col_offset=4, end_lineno=2004, end_col_offset=7), If(test=Attribute(value=Name(id='args', ctx=Load(), lineno=2005, col_offset=7, end_lineno=2005, end_col_offset=11), attr='packages', ctx=Load(), lineno=2005, col_offset=7, end_lineno=2005, end_col_offset=20), body=[Return(value=ListComp(elt=Call(func=Attribute(value=Name(id='s', ctx=Load(), lineno=2006, col_offset=16, end_lineno=2006, end_col_offset=17), attr='strip', ctx=Load(), lineno=2006, col_offset=16, end_lineno=2006, end_col_offset=23), lineno=2006, col_offset=16, end_lineno=2006, end_col_offset=25), generators=[comprehension(target=Name(id='s', ctx=Store(), lineno=2006, col_offset=30, end_lineno=2006, end_col_offset=31), iter=Call(func=Attribute(value=Attribute(value=Name(id='args', ctx=Load(), lineno=2006, col_offset=35, end_lineno=2006, end_col_offset=39), attr='packages', ctx=Load(), lineno=2006, col_offset=35, end_lineno=2006, end_col_offset=48), attr='split', ctx=Load(), lineno=2006, col_offset=35, end_lineno=2006, end_col_offset=54), args=[Constant(value=',', lineno=2006, col_offset=55, end_lineno=2006, end_col_offset=58)], lineno=2006, col_offset=35, end_lineno=2006, end_col_offset=59), ifs=[Call(func=Attribute(value=Name(id='s', ctx=Load(), lineno=2006, col_offset=63, end_lineno=2006, end_col_offset=64), attr='strip', ctx=Load(), lineno=2006, col_offset=63, end_lineno=2006, end_col_offset=70), lineno=2006, col_offset=63, end_lineno=2006, end_col_offset=72)], is_async=0)], lineno=2006, col_offset=15, end_lineno=2006, end_col_offset=73), lineno=2006, col_offset=8, end_lineno=2006, end_col_offset=73)], lineno=2005, col_offset=4, end_lineno=2006, end_col_offset=73), Return(value=Call(func=Name(id='find_top_packages', ctx=Load(), lineno=2007, col_offset=11, end_lineno=2007, end_col_offset=28), lineno=2007, col_offset=11, end_lineno=2007, end_col_offset=30), lineno=2007, col_offset=4, end_lineno=2007, end_col_offset=30)], returns=Subscript(value=Name(id='list', ctx=Load(), lineno=1992, col_offset=51, end_lineno=1992, end_col_offset=55), slice=Name(id='str', ctx=Load(), lineno=1992, col_offset=56, end_lineno=1992, end_col_offset=59), ctx=Load(), lineno=1992, col_offset=51, end_lineno=1992, end_col_offset=60), lineno=1992, col_offset=0, end_lineno=2007, end_col_offset=30), FunctionDef(name='_prepare_cache', args=arguments(args=[arg(arg='args', annotation=Attribute(value=Name(id='argparse', ctx=Load(), lineno=2010, col_offset=25, end_lineno=2010, end_col_offset=33), attr='Namespace', ctx=Load(), lineno=2010, col_offset=25, end_lineno=2010, end_col_offset=43), lineno=2010, col_offset=19, end_lineno=2010, end_col_offset=43)]), body=[Expr(value=Constant(value='Prepare cache.\n\n    Parameters\n    ----------\n    args : argparse.Namespace\n        Parsed arguments.\n\n    Returns\n    -------\n    tuple[Path, bool]\n        (cache_dir, use_cache) tuple.\n\n    Raises\n    ------\n    ValidationError\n        If cache directory exists but is not a directory.\n    ', lineno=2011, col_offset=4, end_lineno=2027, end_col_offset=7), lineno=2011, col_offset=4, end_lineno=2027, end_col_offset=7), Assign(targets=[Name(id='cache_dir', ctx=Store(), lineno=2028, col_offset=4, end_lineno=2028, end_col_offset=13)], value=Call(func=Name(id='resolve_path', ctx=Load(), lineno=2028, col_offset=16, end_lineno=2028, end_col_offset=28), args=[Attribute(value=Name(id='args', ctx=Load(), lineno=2028, col_offset=29, end_lineno=2028, end_col_offset=33), attr='cache_dir', ctx=Load(), lineno=2028, col_offset=29, end_lineno=2028, end_col_offset=43)], keywords=[keyword(arg='strict', value=Constant(value=False, lineno=2028, col_offset=52, end_lineno=2028, end_col_offset=57), lineno=2028, col_offset=45, end_lineno=2028, end_col_offset=57)], lineno=2028, col_offset=16, end_lineno=2028, end_col_offset=58), lineno=2028, col_offset=4, end_lineno=2028, end_col_offset=58), If(test=BoolOp(op=And(), values=[Call(func=Attribute(value=Name(id='cache_dir', ctx=Load(), lineno=2029, col_offset=7, end_lineno=2029, end_col_offset=16), attr='exists', ctx=Load(), lineno=2029, col_offset=7, end_lineno=2029, end_col_offset=23), lineno=2029, col_offset=7, end_lineno=2029, end_col_offset=25), UnaryOp(op=Not(), operand=Call(func=Attribute(value=Name(id='cache_dir', ctx=Load(), lineno=2029, col_offset=34, end_lineno=2029, end_col_offset=43), attr='is_dir', ctx=Load(), lineno=2029, col_offset=34, end_lineno=2029, end_col_offset=50), lineno=2029, col_offset=34, end_lineno=2029, end_col_offset=52), lineno=2029, col_offset=30, end_lineno=2029, end_col_offset=52)], lineno=2029, col_offset=7, end_lineno=2029, end_col_offset=52), body=[Assign(targets=[Name(id='message', ctx=Store(), lineno=2030, col_offset=8, end_lineno=2030, end_col_offset=15)], value=JoinedStr(values=[Constant(value="Cache directory '", lineno=2030, col_offset=20, end_lineno=2030, end_col_offset=37), FormattedValue(value=Name(id='cache_dir', ctx=Load(), lineno=2030, col_offset=38, end_lineno=2030, end_col_offset=47), conversion=-1, lineno=2030, col_offset=37, end_lineno=2030, end_col_offset=48), Constant(value="' must be a directory", lineno=2030, col_offset=48, end_lineno=2030, end_col_offset=69)], lineno=2030, col_offset=18, end_lineno=2030, end_col_offset=70), lineno=2030, col_offset=8, end_lineno=2030, end_col_offset=70), Raise(exc=Call(func=Name(id='ValidationError', ctx=Load(), lineno=2031, col_offset=14, end_lineno=2031, end_col_offset=29), args=[Name(id='message', ctx=Load(), lineno=2031, col_offset=30, end_lineno=2031, end_col_offset=37)], lineno=2031, col_offset=14, end_lineno=2031, end_col_offset=38), lineno=2031, col_offset=8, end_lineno=2031, end_col_offset=38)], lineno=2029, col_offset=4, end_lineno=2031, end_col_offset=38), Expr(value=Call(func=Attribute(value=Name(id='cache_dir', ctx=Load(), lineno=2032, col_offset=4, end_lineno=2032, end_col_offset=13), attr='mkdir', ctx=Load(), lineno=2032, col_offset=4, end_lineno=2032, end_col_offset=19), keywords=[keyword(arg='parents', value=Constant(value=True, lineno=2032, col_offset=28, end_lineno=2032, end_col_offset=32), lineno=2032, col_offset=20, end_lineno=2032, end_col_offset=32), keyword(arg='exist_ok', value=Constant(value=True, lineno=2032, col_offset=43, end_lineno=2032, end_col_offset=47), lineno=2032, col_offset=34, end_lineno=2032, end_col_offset=47)], lineno=2032, col_offset=4, end_lineno=2032, end_col_offset=48), lineno=2032, col_offset=4, end_lineno=2032, end_col_offset=48), Return(value=Tuple(elts=[Name(id='cache_dir', ctx=Load(), lineno=2033, col_offset=11, end_lineno=2033, end_col_offset=20), UnaryOp(op=Not(), operand=Attribute(value=Name(id='args', ctx=Load(), lineno=2033, col_offset=26, end_lineno=2033, end_col_offset=30), attr='no_cache', ctx=Load(), lineno=2033, col_offset=26, end_lineno=2033, end_col_offset=39), lineno=2033, col_offset=22, end_lineno=2033, end_col_offset=39)], ctx=Load(), lineno=2033, col_offset=11, end_lineno=2033, end_col_offset=39), lineno=2033, col_offset=4, end_lineno=2033, end_col_offset=39)], returns=Subscript(value=Name(id='tuple', ctx=Load(), lineno=2010, col_offset=48, end_lineno=2010, end_col_offset=53), slice=Tuple(elts=[Name(id='Path', ctx=Load(), lineno=2010, col_offset=54, end_lineno=2010, end_col_offset=58), Name(id='bool', ctx=Load(), lineno=2010, col_offset=60, end_lineno=2010, end_col_offset=64)], ctx=Load(), lineno=2010, col_offset=54, end_lineno=2010, end_col_offset=64), ctx=Load(), lineno=2010, col_offset=48, end_lineno=2010, end_col_offset=65), lineno=2010, col_offset=0, end_lineno=2033, end_col_offset=39), FunctionDef(name='_log_configuration', args=arguments(kwonlyargs=[arg(arg='verbose', annotation=Name(id='bool', ctx=Load(), lineno=2038, col_offset=13, end_lineno=2038, end_col_offset=17), lineno=2038, col_offset=4, end_lineno=2038, end_col_offset=17), arg(arg='packages', annotation=Subscript(value=Name(id='Sequence', ctx=Load(), lineno=2039, col_offset=14, end_lineno=2039, end_col_offset=22), slice=Name(id='str', ctx=Load(), lineno=2039, col_offset=23, end_lineno=2039, end_col_offset=26), ctx=Load(), lineno=2039, col_offset=14, end_lineno=2039, end_col_offset=27), lineno=2039, col_offset=4, end_lineno=2039, end_col_offset=27), arg(arg='cache_dir', annotation=Name(id='Path', ctx=Load(), lineno=2040, col_offset=15, end_lineno=2040, end_col_offset=19), lineno=2040, col_offset=4, end_lineno=2040, end_col_offset=19), arg(arg='use_cache', annotation=Name(id='bool', ctx=Load(), lineno=2041, col_offset=15, end_lineno=2041, end_col_offset=19), lineno=2041, col_offset=4, end_lineno=2041, end_col_offset=19)], kw_defaults=[None, None, None, None]), body=[Expr(value=Constant(value='Log configuration.\n\n    Parameters\n    ----------\n    verbose : bool\n        Enable verbose logging.\n    packages : Sequence[str]\n        Package names.\n    cache_dir : Path\n        Cache directory path.\n    use_cache : bool\n        Whether to use cache.\n    ', lineno=2043, col_offset=4, end_lineno=2055, end_col_offset=7), lineno=2043, col_offset=4, end_lineno=2055, end_col_offset=7), If(test=UnaryOp(op=Not(), operand=Name(id='verbose', ctx=Load(), lineno=2056, col_offset=11, end_lineno=2056, end_col_offset=18), lineno=2056, col_offset=7, end_lineno=2056, end_col_offset=18), body=[Return(lineno=2057, col_offset=8, end_lineno=2057, end_col_offset=14)], lineno=2056, col_offset=4, end_lineno=2057, end_col_offset=14), Expr(value=Call(func=Attribute(value=Name(id='LOGGER', ctx=Load(), lineno=2058, col_offset=4, end_lineno=2058, end_col_offset=10), attr='info', ctx=Load(), lineno=2058, col_offset=4, end_lineno=2058, end_col_offset=15), args=[Constant(value='packages=%s', lineno=2058, col_offset=16, end_lineno=2058, end_col_offset=29), Call(func=Name(id='list', ctx=Load(), lineno=2058, col_offset=31, end_lineno=2058, end_col_offset=35), args=[Name(id='packages', ctx=Load(), lineno=2058, col_offset=36, end_lineno=2058, end_col_offset=44)], lineno=2058, col_offset=31, end_lineno=2058, end_col_offset=45)], lineno=2058, col_offset=4, end_lineno=2058, end_col_offset=46), lineno=2058, col_offset=4, end_lineno=2058, end_col_offset=46), Expr(value=Call(func=Attribute(value=Name(id='LOGGER', ctx=Load(), lineno=2059, col_offset=4, end_lineno=2059, end_col_offset=10), attr='info', ctx=Load(), lineno=2059, col_offset=4, end_lineno=2059, end_col_offset=15), args=[Constant(value='cache_dir=%s use_cache=%s', lineno=2059, col_offset=16, end_lineno=2059, end_col_offset=43), Name(id='cache_dir', ctx=Load(), lineno=2059, col_offset=45, end_lineno=2059, end_col_offset=54), Name(id='use_cache', ctx=Load(), lineno=2059, col_offset=56, end_lineno=2059, end_col_offset=65)], lineno=2059, col_offset=4, end_lineno=2059, end_col_offset=66), lineno=2059, col_offset=4, end_lineno=2059, end_col_offset=66)], returns=Constant(value=None, lineno=2042, col_offset=5, end_lineno=2042, end_col_offset=9), lineno=2036, col_offset=0, end_lineno=2059, end_col_offset=66), FunctionDef(name='_build_per_package_graphs', args=arguments(args=[arg(arg='packages', annotation=Subscript(value=Name(id='Sequence', ctx=Load(), lineno=2063, col_offset=14, end_lineno=2063, end_col_offset=22), slice=Name(id='str', ctx=Load(), lineno=2063, col_offset=23, end_lineno=2063, end_col_offset=26), ctx=Load(), lineno=2063, col_offset=14, end_lineno=2063, end_col_offset=27), lineno=2063, col_offset=4, end_lineno=2063, end_col_offset=27), arg(arg='config', annotation=Name(id='PackageBuildConfig', ctx=Load(), lineno=2064, col_offset=12, end_lineno=2064, end_col_offset=30), lineno=2064, col_offset=4, end_lineno=2064, end_col_offset=30), arg(arg='max_workers', annotation=BinOp(left=Name(id='int', ctx=Load(), lineno=2065, col_offset=17, end_lineno=2065, end_col_offset=20), op=BitOr(), right=Constant(value=None, lineno=2065, col_offset=23, end_lineno=2065, end_col_offset=27), lineno=2065, col_offset=17, end_lineno=2065, end_col_offset=27), lineno=2065, col_offset=4, end_lineno=2065, end_col_offset=27)]), body=[Expr(value=Constant(value='Build per package graphs.\n\n    Parameters\n    ----------\n    packages : Sequence[str]\n        Package names to build.\n    config : PackageBuildConfig\n        Build configuration.\n    max_workers : int | None\n        Maximum worker processes.\n\n    Returns\n    -------\n    list[tuple[str, bool, bool, bool]]\n        List of (pkg, used_cache, pydeps_ok, pyrev_ok) tuples.\n    ', lineno=2067, col_offset=4, end_lineno=2082, end_col_offset=7), lineno=2067, col_offset=4, end_lineno=2082, end_col_offset=7), Assign(targets=[Name(id='worker_count', ctx=Store(), lineno=2083, col_offset=4, end_lineno=2083, end_col_offset=16)], value=BoolOp(op=Or(), values=[Name(id='max_workers', ctx=Load(), lineno=2083, col_offset=19, end_lineno=2083, end_col_offset=30), Call(func=Attribute(value=Name(id='os', ctx=Load(), lineno=2083, col_offset=34, end_lineno=2083, end_col_offset=36), attr='cpu_count', ctx=Load(), lineno=2083, col_offset=34, end_lineno=2083, end_col_offset=46), lineno=2083, col_offset=34, end_lineno=2083, end_col_offset=48), Constant(value=1, lineno=2083, col_offset=52, end_lineno=2083, end_col_offset=53)], lineno=2083, col_offset=19, end_lineno=2083, end_col_offset=53), lineno=2083, col_offset=4, end_lineno=2083, end_col_offset=53), AnnAssign(target=Name(id='results', ctx=Store(), lineno=2084, col_offset=4, end_lineno=2084, end_col_offset=11), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=2084, col_offset=13, end_lineno=2084, end_col_offset=17), slice=Subscript(value=Name(id='tuple', ctx=Load(), lineno=2084, col_offset=18, end_lineno=2084, end_col_offset=23), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=2084, col_offset=24, end_lineno=2084, end_col_offset=27), Name(id='bool', ctx=Load(), lineno=2084, col_offset=29, end_lineno=2084, end_col_offset=33), Name(id='bool', ctx=Load(), lineno=2084, col_offset=35, end_lineno=2084, end_col_offset=39), Name(id='bool', ctx=Load(), lineno=2084, col_offset=41, end_lineno=2084, end_col_offset=45)], ctx=Load(), lineno=2084, col_offset=24, end_lineno=2084, end_col_offset=45), ctx=Load(), lineno=2084, col_offset=18, end_lineno=2084, end_col_offset=46), ctx=Load(), lineno=2084, col_offset=13, end_lineno=2084, end_col_offset=47), value=List(ctx=Load(), lineno=2084, col_offset=50, end_lineno=2084, end_col_offset=52), simple=1, lineno=2084, col_offset=4, end_lineno=2084, end_col_offset=52), With(items=[withitem(context_expr=Call(func=Name(id='ProcessPoolExecutor', ctx=Load(), lineno=2085, col_offset=9, end_lineno=2085, end_col_offset=28), keywords=[keyword(arg='max_workers', value=Name(id='worker_count', ctx=Load(), lineno=2085, col_offset=41, end_lineno=2085, end_col_offset=53), lineno=2085, col_offset=29, end_lineno=2085, end_col_offset=53)], lineno=2085, col_offset=9, end_lineno=2085, end_col_offset=54), optional_vars=Name(id='executor', ctx=Store(), lineno=2085, col_offset=58, end_lineno=2085, end_col_offset=66))], body=[Assign(targets=[Name(id='futures', ctx=Store(), lineno=2086, col_offset=8, end_lineno=2086, end_col_offset=15)], value=ListComp(elt=Call(func=Attribute(value=Name(id='executor', ctx=Load(), lineno=2087, col_offset=12, end_lineno=2087, end_col_offset=20), attr='submit', ctx=Load(), lineno=2087, col_offset=12, end_lineno=2087, end_col_offset=27), args=[Name(id='build_one_package', ctx=Load(), lineno=2088, col_offset=16, end_lineno=2088, end_col_offset=33), Name(id='pkg', ctx=Load(), lineno=2089, col_offset=16, end_lineno=2089, end_col_offset=19), Name(id='config', ctx=Load(), lineno=2090, col_offset=16, end_lineno=2090, end_col_offset=22)], lineno=2087, col_offset=12, end_lineno=2091, end_col_offset=13), generators=[comprehension(target=Name(id='pkg', ctx=Store(), lineno=2092, col_offset=16, end_lineno=2092, end_col_offset=19), iter=Name(id='packages', ctx=Load(), lineno=2092, col_offset=23, end_lineno=2092, end_col_offset=31), is_async=0)], lineno=2086, col_offset=18, end_lineno=2093, end_col_offset=9), lineno=2086, col_offset=8, end_lineno=2093, end_col_offset=9), For(target=Name(id='future', ctx=Store(), lineno=2094, col_offset=12, end_lineno=2094, end_col_offset=18), iter=Call(func=Name(id='as_completed', ctx=Load(), lineno=2094, col_offset=22, end_lineno=2094, end_col_offset=34), args=[Name(id='futures', ctx=Load(), lineno=2094, col_offset=35, end_lineno=2094, end_col_offset=42)], lineno=2094, col_offset=22, end_lineno=2094, end_col_offset=43), body=[Assign(targets=[Tuple(elts=[Name(id='pkg', ctx=Store(), lineno=2095, col_offset=12, end_lineno=2095, end_col_offset=15), Name(id='used_cache', ctx=Store(), lineno=2095, col_offset=17, end_lineno=2095, end_col_offset=27), Name(id='pydeps_ok', ctx=Store(), lineno=2095, col_offset=29, end_lineno=2095, end_col_offset=38), Name(id='pyrev_ok', ctx=Store(), lineno=2095, col_offset=40, end_lineno=2095, end_col_offset=48)], ctx=Store(), lineno=2095, col_offset=12, end_lineno=2095, end_col_offset=48)], value=Call(func=Attribute(value=Name(id='future', ctx=Load(), lineno=2095, col_offset=51, end_lineno=2095, end_col_offset=57), attr='result', ctx=Load(), lineno=2095, col_offset=51, end_lineno=2095, end_col_offset=64), lineno=2095, col_offset=51, end_lineno=2095, end_col_offset=66), lineno=2095, col_offset=12, end_lineno=2095, end_col_offset=66), Expr(value=Call(func=Attribute(value=Name(id='results', ctx=Load(), lineno=2096, col_offset=12, end_lineno=2096, end_col_offset=19), attr='append', ctx=Load(), lineno=2096, col_offset=12, end_lineno=2096, end_col_offset=26), args=[Tuple(elts=[Name(id='pkg', ctx=Load(), lineno=2096, col_offset=28, end_lineno=2096, end_col_offset=31), Name(id='used_cache', ctx=Load(), lineno=2096, col_offset=33, end_lineno=2096, end_col_offset=43), Name(id='pydeps_ok', ctx=Load(), lineno=2096, col_offset=45, end_lineno=2096, end_col_offset=54), Name(id='pyrev_ok', ctx=Load(), lineno=2096, col_offset=56, end_lineno=2096, end_col_offset=64)], ctx=Load(), lineno=2096, col_offset=27, end_lineno=2096, end_col_offset=65)], lineno=2096, col_offset=12, end_lineno=2096, end_col_offset=66), lineno=2096, col_offset=12, end_lineno=2096, end_col_offset=66), If(test=Attribute(value=Name(id='config', ctx=Load(), lineno=2097, col_offset=15, end_lineno=2097, end_col_offset=21), attr='verbose', ctx=Load(), lineno=2097, col_offset=15, end_lineno=2097, end_col_offset=29), body=[Assign(targets=[Name(id='source', ctx=Store(), lineno=2098, col_offset=16, end_lineno=2098, end_col_offset=22)], value=IfExp(test=Name(id='used_cache', ctx=Load(), lineno=2098, col_offset=36, end_lineno=2098, end_col_offset=46), body=Constant(value='cache', lineno=2098, col_offset=25, end_lineno=2098, end_col_offset=32), orelse=Constant(value='built', lineno=2098, col_offset=52, end_lineno=2098, end_col_offset=59), lineno=2098, col_offset=25, end_lineno=2098, end_col_offset=59), lineno=2098, col_offset=16, end_lineno=2098, end_col_offset=59), Assign(targets=[Name(id='status', ctx=Store(), lineno=2099, col_offset=16, end_lineno=2099, end_col_offset=22)], value=JoinedStr(values=[Constant(value='pydeps=', lineno=2099, col_offset=27, end_lineno=2099, end_col_offset=34), FormattedValue(value=IfExp(test=Name(id='pydeps_ok', ctx=Load(), lineno=2099, col_offset=43, end_lineno=2099, end_col_offset=52), body=Constant(value='ok', lineno=2099, col_offset=35, end_lineno=2099, end_col_offset=39), orelse=Constant(value='FAIL', lineno=2099, col_offset=58, end_lineno=2099, end_col_offset=64), lineno=2099, col_offset=35, end_lineno=2099, end_col_offset=64), conversion=-1, lineno=2099, col_offset=34, end_lineno=2099, end_col_offset=65), Constant(value='; pyreverse=', lineno=2099, col_offset=65, end_lineno=2099, end_col_offset=77), FormattedValue(value=IfExp(test=Name(id='pyrev_ok', ctx=Load(), lineno=2099, col_offset=86, end_lineno=2099, end_col_offset=94), body=Constant(value='ok', lineno=2099, col_offset=78, end_lineno=2099, end_col_offset=82), orelse=Constant(value='FAIL', lineno=2099, col_offset=100, end_lineno=2099, end_col_offset=106), lineno=2099, col_offset=78, end_lineno=2099, end_col_offset=106), conversion=-1, lineno=2099, col_offset=77, end_lineno=2099, end_col_offset=107)], lineno=2099, col_offset=25, end_lineno=2099, end_col_offset=108), lineno=2099, col_offset=16, end_lineno=2099, end_col_offset=108), Expr(value=Call(func=Attribute(value=Name(id='LOGGER', ctx=Load(), lineno=2100, col_offset=16, end_lineno=2100, end_col_offset=22), attr='info', ctx=Load(), lineno=2100, col_offset=16, end_lineno=2100, end_col_offset=27), args=[Constant(value='%s: %s; %s', lineno=2100, col_offset=28, end_lineno=2100, end_col_offset=40), Name(id='pkg', ctx=Load(), lineno=2100, col_offset=42, end_lineno=2100, end_col_offset=45), Name(id='source', ctx=Load(), lineno=2100, col_offset=47, end_lineno=2100, end_col_offset=53), Name(id='status', ctx=Load(), lineno=2100, col_offset=55, end_lineno=2100, end_col_offset=61)], lineno=2100, col_offset=16, end_lineno=2100, end_col_offset=62), lineno=2100, col_offset=16, end_lineno=2100, end_col_offset=62)], lineno=2097, col_offset=12, end_lineno=2100, end_col_offset=62)], lineno=2094, col_offset=8, end_lineno=2100, end_col_offset=62)], lineno=2085, col_offset=4, end_lineno=2100, end_col_offset=62), Return(value=Name(id='results', ctx=Load(), lineno=2101, col_offset=11, end_lineno=2101, end_col_offset=18), lineno=2101, col_offset=4, end_lineno=2101, end_col_offset=18)], returns=Subscript(value=Name(id='list', ctx=Load(), lineno=2066, col_offset=5, end_lineno=2066, end_col_offset=9), slice=Subscript(value=Name(id='tuple', ctx=Load(), lineno=2066, col_offset=10, end_lineno=2066, end_col_offset=15), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=2066, col_offset=16, end_lineno=2066, end_col_offset=19), Name(id='bool', ctx=Load(), lineno=2066, col_offset=21, end_lineno=2066, end_col_offset=25), Name(id='bool', ctx=Load(), lineno=2066, col_offset=27, end_lineno=2066, end_col_offset=31), Name(id='bool', ctx=Load(), lineno=2066, col_offset=33, end_lineno=2066, end_col_offset=37)], ctx=Load(), lineno=2066, col_offset=16, end_lineno=2066, end_col_offset=37), ctx=Load(), lineno=2066, col_offset=10, end_lineno=2066, end_col_offset=38), ctx=Load(), lineno=2066, col_offset=5, end_lineno=2066, end_col_offset=39), lineno=2062, col_offset=0, end_lineno=2101, end_col_offset=18), FunctionDef(name='_report_package_failures', args=arguments(args=[arg(arg='results', annotation=Subscript(value=Name(id='Sequence', ctx=Load(), lineno=2104, col_offset=38, end_lineno=2104, end_col_offset=46), slice=Subscript(value=Name(id='tuple', ctx=Load(), lineno=2104, col_offset=47, end_lineno=2104, end_col_offset=52), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=2104, col_offset=53, end_lineno=2104, end_col_offset=56), Name(id='bool', ctx=Load(), lineno=2104, col_offset=58, end_lineno=2104, end_col_offset=62), Name(id='bool', ctx=Load(), lineno=2104, col_offset=64, end_lineno=2104, end_col_offset=68), Name(id='bool', ctx=Load(), lineno=2104, col_offset=70, end_lineno=2104, end_col_offset=74)], ctx=Load(), lineno=2104, col_offset=53, end_lineno=2104, end_col_offset=74), ctx=Load(), lineno=2104, col_offset=47, end_lineno=2104, end_col_offset=75), ctx=Load(), lineno=2104, col_offset=38, end_lineno=2104, end_col_offset=76), lineno=2104, col_offset=29, end_lineno=2104, end_col_offset=76)]), body=[Expr(value=Constant(value='Report package failures.\n\n    Parameters\n    ----------\n    results : Sequence[tuple[str, bool, bool, bool]]\n        Build results tuples.\n\n    Raises\n    ------\n    GraphPolicyError\n        Raised when any per-package build fails.\n    ', lineno=2105, col_offset=4, end_lineno=2116, end_col_offset=7), lineno=2105, col_offset=4, end_lineno=2116, end_col_offset=7), Assign(targets=[Name(id='failed', ctx=Store(), lineno=2117, col_offset=4, end_lineno=2117, end_col_offset=10)], value=ListComp(elt=Tuple(elts=[Name(id='pkg', ctx=Load(), lineno=2117, col_offset=15, end_lineno=2117, end_col_offset=18), Name(id='ok1', ctx=Load(), lineno=2117, col_offset=20, end_lineno=2117, end_col_offset=23), Name(id='ok2', ctx=Load(), lineno=2117, col_offset=25, end_lineno=2117, end_col_offset=28)], ctx=Load(), lineno=2117, col_offset=14, end_lineno=2117, end_col_offset=29), generators=[comprehension(target=Tuple(elts=[Name(id='pkg', ctx=Store(), lineno=2117, col_offset=34, end_lineno=2117, end_col_offset=37), Name(id='_', ctx=Store(), lineno=2117, col_offset=39, end_lineno=2117, end_col_offset=40), Name(id='ok1', ctx=Store(), lineno=2117, col_offset=42, end_lineno=2117, end_col_offset=45), Name(id='ok2', ctx=Store(), lineno=2117, col_offset=47, end_lineno=2117, end_col_offset=50)], ctx=Store(), lineno=2117, col_offset=34, end_lineno=2117, end_col_offset=50), iter=Name(id='results', ctx=Load(), lineno=2117, col_offset=54, end_lineno=2117, end_col_offset=61), ifs=[UnaryOp(op=Not(), operand=BoolOp(op=And(), values=[Name(id='ok1', ctx=Load(), lineno=2117, col_offset=70, end_lineno=2117, end_col_offset=73), Name(id='ok2', ctx=Load(), lineno=2117, col_offset=78, end_lineno=2117, end_col_offset=81)], lineno=2117, col_offset=70, end_lineno=2117, end_col_offset=81), lineno=2117, col_offset=65, end_lineno=2117, end_col_offset=82)], is_async=0)], lineno=2117, col_offset=13, end_lineno=2117, end_col_offset=83), lineno=2117, col_offset=4, end_lineno=2117, end_col_offset=83), If(test=UnaryOp(op=Not(), operand=Name(id='failed', ctx=Load(), lineno=2118, col_offset=11, end_lineno=2118, end_col_offset=17), lineno=2118, col_offset=7, end_lineno=2118, end_col_offset=17), body=[Return(lineno=2119, col_offset=8, end_lineno=2119, end_col_offset=14)], lineno=2118, col_offset=4, end_lineno=2119, end_col_offset=14), AnnAssign(target=Name(id='errors', ctx=Store(), lineno=2120, col_offset=4, end_lineno=2120, end_col_offset=10), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=2120, col_offset=12, end_lineno=2120, end_col_offset=16), slice=Name(id='str', ctx=Load(), lineno=2120, col_offset=17, end_lineno=2120, end_col_offset=20), ctx=Load(), lineno=2120, col_offset=12, end_lineno=2120, end_col_offset=21), value=List(ctx=Load(), lineno=2120, col_offset=24, end_lineno=2120, end_col_offset=26), simple=1, lineno=2120, col_offset=4, end_lineno=2120, end_col_offset=26), For(target=Tuple(elts=[Name(id='pkg', ctx=Store(), lineno=2121, col_offset=8, end_lineno=2121, end_col_offset=11), Name(id='pydeps_ok', ctx=Store(), lineno=2121, col_offset=13, end_lineno=2121, end_col_offset=22), Name(id='pyrev_ok', ctx=Store(), lineno=2121, col_offset=24, end_lineno=2121, end_col_offset=32)], ctx=Store(), lineno=2121, col_offset=8, end_lineno=2121, end_col_offset=32), iter=Name(id='failed', ctx=Load(), lineno=2121, col_offset=36, end_lineno=2121, end_col_offset=42), body=[AnnAssign(target=Name(id='parts', ctx=Store(), lineno=2122, col_offset=8, end_lineno=2122, end_col_offset=13), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=2122, col_offset=15, end_lineno=2122, end_col_offset=19), slice=Name(id='str', ctx=Load(), lineno=2122, col_offset=20, end_lineno=2122, end_col_offset=23), ctx=Load(), lineno=2122, col_offset=15, end_lineno=2122, end_col_offset=24), value=List(ctx=Load(), lineno=2122, col_offset=27, end_lineno=2122, end_col_offset=29), simple=1, lineno=2122, col_offset=8, end_lineno=2122, end_col_offset=29), If(test=UnaryOp(op=Not(), operand=Name(id='pydeps_ok', ctx=Load(), lineno=2123, col_offset=15, end_lineno=2123, end_col_offset=24), lineno=2123, col_offset=11, end_lineno=2123, end_col_offset=24), body=[Expr(value=Call(func=Attribute(value=Name(id='parts', ctx=Load(), lineno=2124, col_offset=12, end_lineno=2124, end_col_offset=17), attr='append', ctx=Load(), lineno=2124, col_offset=12, end_lineno=2124, end_col_offset=24), args=[Constant(value='pydeps', lineno=2124, col_offset=25, end_lineno=2124, end_col_offset=33)], lineno=2124, col_offset=12, end_lineno=2124, end_col_offset=34), lineno=2124, col_offset=12, end_lineno=2124, end_col_offset=34)], lineno=2123, col_offset=8, end_lineno=2124, end_col_offset=34), If(test=UnaryOp(op=Not(), operand=Name(id='pyrev_ok', ctx=Load(), lineno=2125, col_offset=15, end_lineno=2125, end_col_offset=23), lineno=2125, col_offset=11, end_lineno=2125, end_col_offset=23), body=[Expr(value=Call(func=Attribute(value=Name(id='parts', ctx=Load(), lineno=2126, col_offset=12, end_lineno=2126, end_col_offset=17), attr='append', ctx=Load(), lineno=2126, col_offset=12, end_lineno=2126, end_col_offset=24), args=[Constant(value='pyreverse', lineno=2126, col_offset=25, end_lineno=2126, end_col_offset=36)], lineno=2126, col_offset=12, end_lineno=2126, end_col_offset=37), lineno=2126, col_offset=12, end_lineno=2126, end_col_offset=37)], lineno=2125, col_offset=8, end_lineno=2126, end_col_offset=37), Expr(value=Call(func=Attribute(value=Name(id='errors', ctx=Load(), lineno=2127, col_offset=8, end_lineno=2127, end_col_offset=14), attr='append', ctx=Load(), lineno=2127, col_offset=8, end_lineno=2127, end_col_offset=21), args=[JoinedStr(values=[FormattedValue(value=Name(id='pkg', ctx=Load(), lineno=2127, col_offset=25, end_lineno=2127, end_col_offset=28), conversion=-1, lineno=2127, col_offset=24, end_lineno=2127, end_col_offset=29), Constant(value=': ', lineno=2127, col_offset=29, end_lineno=2127, end_col_offset=31), FormattedValue(value=Call(func=Attribute(value=Constant(value=', ', lineno=2127, col_offset=32, end_lineno=2127, end_col_offset=36), attr='join', ctx=Load(), lineno=2127, col_offset=32, end_lineno=2127, end_col_offset=41), args=[Name(id='parts', ctx=Load(), lineno=2127, col_offset=42, end_lineno=2127, end_col_offset=47)], lineno=2127, col_offset=32, end_lineno=2127, end_col_offset=48), conversion=-1, lineno=2127, col_offset=31, end_lineno=2127, end_col_offset=49), Constant(value=' failed', lineno=2127, col_offset=49, end_lineno=2127, end_col_offset=56)], lineno=2127, col_offset=22, end_lineno=2127, end_col_offset=57)], lineno=2127, col_offset=8, end_lineno=2127, end_col_offset=58), lineno=2127, col_offset=8, end_lineno=2127, end_col_offset=58)], lineno=2121, col_offset=4, end_lineno=2127, end_col_offset=58), Assign(targets=[Name(id='message', ctx=Store(), lineno=2128, col_offset=4, end_lineno=2128, end_col_offset=11)], value=Constant(value='Per-package graph build failures detected', lineno=2128, col_offset=14, end_lineno=2128, end_col_offset=57), lineno=2128, col_offset=4, end_lineno=2128, end_col_offset=57), Raise(exc=Call(func=Name(id='GraphPolicyError', ctx=Load(), lineno=2129, col_offset=10, end_lineno=2129, end_col_offset=26), args=[Name(id='message', ctx=Load(), lineno=2129, col_offset=27, end_lineno=2129, end_col_offset=34)], keywords=[keyword(arg='errors', value=Name(id='errors', ctx=Load(), lineno=2129, col_offset=43, end_lineno=2129, end_col_offset=49), lineno=2129, col_offset=36, end_lineno=2129, end_col_offset=49)], lineno=2129, col_offset=10, end_lineno=2129, end_col_offset=50), lineno=2129, col_offset=4, end_lineno=2129, end_col_offset=50)], returns=Constant(value=None, lineno=2104, col_offset=81, end_lineno=2104, end_col_offset=85), lineno=2104, col_offset=0, end_lineno=2129, end_col_offset=50), FunctionDef(name='_build_global_graph', args=arguments(args=[arg(arg='_fmt', annotation=Name(id='str', ctx=Load(), lineno=2132, col_offset=30, end_lineno=2132, end_col_offset=33), lineno=2132, col_offset=24, end_lineno=2132, end_col_offset=33), arg(arg='excludes', annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=2132, col_offset=45, end_lineno=2132, end_col_offset=49), slice=Name(id='str', ctx=Load(), lineno=2132, col_offset=50, end_lineno=2132, end_col_offset=53), ctx=Load(), lineno=2132, col_offset=45, end_lineno=2132, end_col_offset=54), lineno=2132, col_offset=35, end_lineno=2132, end_col_offset=54), arg(arg='max_bacon', annotation=Name(id='int', ctx=Load(), lineno=2132, col_offset=67, end_lineno=2132, end_col_offset=70), lineno=2132, col_offset=56, end_lineno=2132, end_col_offset=70)]), body=[Expr(value=Constant(value='Build global graph.\n\n    Parameters\n    ----------\n    _fmt : str\n        Format (unused).\n    excludes : list[str]\n        Exclusion patterns.\n    max_bacon : int\n        Maximum bacon number.\n\n    Returns\n    -------\n    DiGraph\n        Collapsed global dependency graph.\n    ', lineno=2133, col_offset=4, end_lineno=2148, end_col_offset=7), lineno=2133, col_offset=4, end_lineno=2148, end_col_offset=7), Assign(targets=[Name(id='dot_path', ctx=Store(), lineno=2149, col_offset=4, end_lineno=2149, end_col_offset=12)], value=BinOp(left=Name(id='OUT', ctx=Load(), lineno=2149, col_offset=15, end_lineno=2149, end_col_offset=18), op=Div(), right=Constant(value='subsystems.dot', lineno=2149, col_offset=21, end_lineno=2149, end_col_offset=37), lineno=2149, col_offset=15, end_lineno=2149, end_col_offset=37), lineno=2149, col_offset=4, end_lineno=2149, end_col_offset=37), Expr(value=Call(func=Name(id='build_global_pydeps', ctx=Load(), lineno=2150, col_offset=4, end_lineno=2150, end_col_offset=23), args=[Name(id='dot_path', ctx=Load(), lineno=2150, col_offset=24, end_lineno=2150, end_col_offset=32), Name(id='excludes', ctx=Load(), lineno=2150, col_offset=34, end_lineno=2150, end_col_offset=42), Name(id='max_bacon', ctx=Load(), lineno=2150, col_offset=44, end_lineno=2150, end_col_offset=53)], lineno=2150, col_offset=4, end_lineno=2150, end_col_offset=54), lineno=2150, col_offset=4, end_lineno=2150, end_col_offset=54), Try(body=[Return(value=Call(func=Name(id='collapse_to_packages', ctx=Load(), lineno=2152, col_offset=15, end_lineno=2152, end_col_offset=35), args=[Name(id='dot_path', ctx=Load(), lineno=2152, col_offset=36, end_lineno=2152, end_col_offset=44)], lineno=2152, col_offset=15, end_lineno=2152, end_col_offset=45), lineno=2152, col_offset=8, end_lineno=2152, end_col_offset=45)], finalbody=[If(test=Call(func=Attribute(value=Name(id='dot_path', ctx=Load(), lineno=2154, col_offset=11, end_lineno=2154, end_col_offset=19), attr='exists', ctx=Load(), lineno=2154, col_offset=11, end_lineno=2154, end_col_offset=26), lineno=2154, col_offset=11, end_lineno=2154, end_col_offset=28), body=[Expr(value=Call(func=Attribute(value=Name(id='dot_path', ctx=Load(), lineno=2155, col_offset=12, end_lineno=2155, end_col_offset=20), attr='unlink', ctx=Load(), lineno=2155, col_offset=12, end_lineno=2155, end_col_offset=27), lineno=2155, col_offset=12, end_lineno=2155, end_col_offset=29), lineno=2155, col_offset=12, end_lineno=2155, end_col_offset=29)], lineno=2154, col_offset=8, end_lineno=2155, end_col_offset=29)], lineno=2151, col_offset=4, end_lineno=2155, end_col_offset=29)], returns=Name(id='DiGraph', ctx=Load(), lineno=2132, col_offset=75, end_lineno=2132, end_col_offset=82), lineno=2132, col_offset=0, end_lineno=2155, end_col_offset=29), FunctionDef(name='_load_layers_config', args=arguments(args=[arg(arg='path', annotation=Name(id='str', ctx=Load(), lineno=2158, col_offset=30, end_lineno=2158, end_col_offset=33), lineno=2158, col_offset=24, end_lineno=2158, end_col_offset=33)]), body=[Expr(value=Constant(value='Load layers config.\n\n    Parameters\n    ----------\n    path : str\n        Config file path.\n\n    Returns\n    -------\n    LayerConfig\n        Layer configuration mapping.\n\n    Raises\n    ------\n    ValidationError\n        If config file is invalid or missing.\n    ', lineno=2159, col_offset=4, end_lineno=2175, end_col_offset=7), lineno=2159, col_offset=4, end_lineno=2175, end_col_offset=7), Assign(targets=[Name(id='file_path', ctx=Store(), lineno=2176, col_offset=4, end_lineno=2176, end_col_offset=13)], value=Call(func=Name(id='resolve_path', ctx=Load(), lineno=2176, col_offset=16, end_lineno=2176, end_col_offset=28), args=[Name(id='path', ctx=Load(), lineno=2176, col_offset=29, end_lineno=2176, end_col_offset=33)], keywords=[keyword(arg='strict', value=Constant(value=False, lineno=2176, col_offset=42, end_lineno=2176, end_col_offset=47), lineno=2176, col_offset=35, end_lineno=2176, end_col_offset=47)], lineno=2176, col_offset=16, end_lineno=2176, end_col_offset=48), lineno=2176, col_offset=4, end_lineno=2176, end_col_offset=48), If(test=Compare(left=Name(id='yaml', ctx=Load(), lineno=2177, col_offset=7, end_lineno=2177, end_col_offset=11), ops=[Is()], comparators=[Constant(value=None, lineno=2177, col_offset=15, end_lineno=2177, end_col_offset=19)], lineno=2177, col_offset=7, end_lineno=2177, end_col_offset=19), body=[Return(value=Dict(keys=[Constant(value='order', lineno=2178, col_offset=16, end_lineno=2178, end_col_offset=23), Constant(value='packages', lineno=2178, col_offset=29, end_lineno=2178, end_col_offset=39), Constant(value='rules', lineno=2178, col_offset=45, end_lineno=2178, end_col_offset=52)], values=[List(ctx=Load(), lineno=2178, col_offset=25, end_lineno=2178, end_col_offset=27), Dict(lineno=2178, col_offset=41, end_lineno=2178, end_col_offset=43), Dict(lineno=2178, col_offset=54, end_lineno=2178, end_col_offset=56)], lineno=2178, col_offset=15, end_lineno=2178, end_col_offset=57), lineno=2178, col_offset=8, end_lineno=2178, end_col_offset=57)], lineno=2177, col_offset=4, end_lineno=2178, end_col_offset=57), If(test=UnaryOp(op=Not(), operand=Call(func=Attribute(value=Name(id='file_path', ctx=Load(), lineno=2179, col_offset=11, end_lineno=2179, end_col_offset=20), attr='exists', ctx=Load(), lineno=2179, col_offset=11, end_lineno=2179, end_col_offset=27), lineno=2179, col_offset=11, end_lineno=2179, end_col_offset=29), lineno=2179, col_offset=7, end_lineno=2179, end_col_offset=29), body=[Assign(targets=[Name(id='message', ctx=Store(), lineno=2180, col_offset=8, end_lineno=2180, end_col_offset=15)], value=JoinedStr(values=[Constant(value="Layers config '", lineno=2180, col_offset=20, end_lineno=2180, end_col_offset=35), FormattedValue(value=Name(id='file_path', ctx=Load(), lineno=2180, col_offset=36, end_lineno=2180, end_col_offset=45), conversion=-1, lineno=2180, col_offset=35, end_lineno=2180, end_col_offset=46), Constant(value="' does not exist", lineno=2180, col_offset=46, end_lineno=2180, end_col_offset=62)], lineno=2180, col_offset=18, end_lineno=2180, end_col_offset=63), lineno=2180, col_offset=8, end_lineno=2180, end_col_offset=63), Raise(exc=Call(func=Name(id='ValidationError', ctx=Load(), lineno=2181, col_offset=14, end_lineno=2181, end_col_offset=29), args=[Name(id='message', ctx=Load(), lineno=2181, col_offset=30, end_lineno=2181, end_col_offset=37)], lineno=2181, col_offset=14, end_lineno=2181, end_col_offset=38), lineno=2181, col_offset=8, end_lineno=2181, end_col_offset=38)], lineno=2179, col_offset=4, end_lineno=2181, end_col_offset=38), If(test=UnaryOp(op=Not(), operand=Call(func=Attribute(value=Name(id='file_path', ctx=Load(), lineno=2182, col_offset=11, end_lineno=2182, end_col_offset=20), attr='is_file', ctx=Load(), lineno=2182, col_offset=11, end_lineno=2182, end_col_offset=28), lineno=2182, col_offset=11, end_lineno=2182, end_col_offset=30), lineno=2182, col_offset=7, end_lineno=2182, end_col_offset=30), body=[Assign(targets=[Name(id='message', ctx=Store(), lineno=2183, col_offset=8, end_lineno=2183, end_col_offset=15)], value=JoinedStr(values=[Constant(value="Layers config '", lineno=2183, col_offset=20, end_lineno=2183, end_col_offset=35), FormattedValue(value=Name(id='file_path', ctx=Load(), lineno=2183, col_offset=36, end_lineno=2183, end_col_offset=45), conversion=-1, lineno=2183, col_offset=35, end_lineno=2183, end_col_offset=46), Constant(value="' must be a file", lineno=2183, col_offset=46, end_lineno=2183, end_col_offset=62)], lineno=2183, col_offset=18, end_lineno=2183, end_col_offset=63), lineno=2183, col_offset=8, end_lineno=2183, end_col_offset=63), Raise(exc=Call(func=Name(id='ValidationError', ctx=Load(), lineno=2184, col_offset=14, end_lineno=2184, end_col_offset=29), args=[Name(id='message', ctx=Load(), lineno=2184, col_offset=30, end_lineno=2184, end_col_offset=37)], lineno=2184, col_offset=14, end_lineno=2184, end_col_offset=38), lineno=2184, col_offset=8, end_lineno=2184, end_col_offset=38)], lineno=2182, col_offset=4, end_lineno=2184, end_col_offset=38), Try(body=[Assign(targets=[Name(id='data', ctx=Store(), lineno=2186, col_offset=8, end_lineno=2186, end_col_offset=12)], value=Call(func=Attribute(value=Name(id='yaml', ctx=Load(), lineno=2186, col_offset=15, end_lineno=2186, end_col_offset=19), attr='safe_load', ctx=Load(), lineno=2186, col_offset=15, end_lineno=2186, end_col_offset=29), args=[Call(func=Attribute(value=Name(id='file_path', ctx=Load(), lineno=2186, col_offset=30, end_lineno=2186, end_col_offset=39), attr='read_text', ctx=Load(), lineno=2186, col_offset=30, end_lineno=2186, end_col_offset=49), keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=2186, col_offset=59, end_lineno=2186, end_col_offset=66), lineno=2186, col_offset=50, end_lineno=2186, end_col_offset=66)], lineno=2186, col_offset=30, end_lineno=2186, end_col_offset=67)], lineno=2186, col_offset=15, end_lineno=2186, end_col_offset=68), lineno=2186, col_offset=8, end_lineno=2186, end_col_offset=68)], handlers=[ExceptHandler(type=Name(id='YamlError', ctx=Load(), lineno=2187, col_offset=11, end_lineno=2187, end_col_offset=20), name='exc', body=[Assign(targets=[Name(id='message', ctx=Store(), lineno=2188, col_offset=8, end_lineno=2188, end_col_offset=15)], value=JoinedStr(values=[Constant(value="Layers config '", lineno=2188, col_offset=20, end_lineno=2188, end_col_offset=35), FormattedValue(value=Name(id='file_path', ctx=Load(), lineno=2188, col_offset=36, end_lineno=2188, end_col_offset=45), conversion=-1, lineno=2188, col_offset=35, end_lineno=2188, end_col_offset=46), Constant(value="' is not valid YAML", lineno=2188, col_offset=46, end_lineno=2188, end_col_offset=65)], lineno=2188, col_offset=18, end_lineno=2188, end_col_offset=66), lineno=2188, col_offset=8, end_lineno=2188, end_col_offset=66), Raise(exc=Call(func=Name(id='ValidationError', ctx=Load(), lineno=2189, col_offset=14, end_lineno=2189, end_col_offset=29), args=[Name(id='message', ctx=Load(), lineno=2189, col_offset=30, end_lineno=2189, end_col_offset=37)], lineno=2189, col_offset=14, end_lineno=2189, end_col_offset=38), cause=Name(id='exc', ctx=Load(), lineno=2189, col_offset=44, end_lineno=2189, end_col_offset=47), lineno=2189, col_offset=8, end_lineno=2189, end_col_offset=47)], lineno=2187, col_offset=4, end_lineno=2189, end_col_offset=47)], lineno=2185, col_offset=4, end_lineno=2189, end_col_offset=47), If(test=UnaryOp(op=Not(), operand=Call(func=Name(id='isinstance', ctx=Load(), lineno=2190, col_offset=11, end_lineno=2190, end_col_offset=21), args=[Name(id='data', ctx=Load(), lineno=2190, col_offset=22, end_lineno=2190, end_col_offset=26), Name(id='Mapping', ctx=Load(), lineno=2190, col_offset=28, end_lineno=2190, end_col_offset=35)], lineno=2190, col_offset=11, end_lineno=2190, end_col_offset=36), lineno=2190, col_offset=7, end_lineno=2190, end_col_offset=36), body=[Assign(targets=[Name(id='message', ctx=Store(), lineno=2191, col_offset=8, end_lineno=2191, end_col_offset=15)], value=JoinedStr(values=[Constant(value="Layers config '", lineno=2191, col_offset=20, end_lineno=2191, end_col_offset=35), FormattedValue(value=Name(id='file_path', ctx=Load(), lineno=2191, col_offset=36, end_lineno=2191, end_col_offset=45), conversion=-1, lineno=2191, col_offset=35, end_lineno=2191, end_col_offset=46), Constant(value="' must contain a mapping", lineno=2191, col_offset=46, end_lineno=2191, end_col_offset=70)], lineno=2191, col_offset=18, end_lineno=2191, end_col_offset=71), lineno=2191, col_offset=8, end_lineno=2191, end_col_offset=71), Raise(exc=Call(func=Name(id='ValidationError', ctx=Load(), lineno=2192, col_offset=14, end_lineno=2192, end_col_offset=29), args=[Name(id='message', ctx=Load(), lineno=2192, col_offset=30, end_lineno=2192, end_col_offset=37)], lineno=2192, col_offset=14, end_lineno=2192, end_col_offset=38), lineno=2192, col_offset=8, end_lineno=2192, end_col_offset=38)], lineno=2190, col_offset=4, end_lineno=2192, end_col_offset=38), Return(value=Call(func=Name(id='cast', ctx=Load(), lineno=2193, col_offset=11, end_lineno=2193, end_col_offset=15), args=[Constant(value='LayerConfig', lineno=2193, col_offset=16, end_lineno=2193, end_col_offset=29), Name(id='data', ctx=Load(), lineno=2193, col_offset=31, end_lineno=2193, end_col_offset=35)], lineno=2193, col_offset=11, end_lineno=2193, end_col_offset=36), lineno=2193, col_offset=4, end_lineno=2193, end_col_offset=36)], returns=Name(id='LayerConfig', ctx=Load(), lineno=2158, col_offset=38, end_lineno=2158, end_col_offset=49), lineno=2158, col_offset=0, end_lineno=2193, end_col_offset=36), FunctionDef(name='_load_allowlist', args=arguments(args=[arg(arg='path', annotation=Name(id='str', ctx=Load(), lineno=2196, col_offset=26, end_lineno=2196, end_col_offset=29), lineno=2196, col_offset=20, end_lineno=2196, end_col_offset=29)]), body=[Expr(value=Constant(value='Load allowlist.\n\n    Parameters\n    ----------\n    path : str\n        Allowlist file path.\n\n    Returns\n    -------\n    dict[str, object]\n        Allowlist dictionary (empty if file missing).\n\n    Raises\n    ------\n    ValidationError\n        If allowlist file is invalid.\n    ', lineno=2197, col_offset=4, end_lineno=2213, end_col_offset=7), lineno=2197, col_offset=4, end_lineno=2213, end_col_offset=7), Assign(targets=[Name(id='file_path', ctx=Store(), lineno=2214, col_offset=4, end_lineno=2214, end_col_offset=13)], value=Call(func=Name(id='resolve_path', ctx=Load(), lineno=2214, col_offset=16, end_lineno=2214, end_col_offset=28), args=[Name(id='path', ctx=Load(), lineno=2214, col_offset=29, end_lineno=2214, end_col_offset=33)], keywords=[keyword(arg='strict', value=Constant(value=False, lineno=2214, col_offset=42, end_lineno=2214, end_col_offset=47), lineno=2214, col_offset=35, end_lineno=2214, end_col_offset=47)], lineno=2214, col_offset=16, end_lineno=2214, end_col_offset=48), lineno=2214, col_offset=4, end_lineno=2214, end_col_offset=48), If(test=UnaryOp(op=Not(), operand=Call(func=Attribute(value=Name(id='file_path', ctx=Load(), lineno=2215, col_offset=11, end_lineno=2215, end_col_offset=20), attr='exists', ctx=Load(), lineno=2215, col_offset=11, end_lineno=2215, end_col_offset=27), lineno=2215, col_offset=11, end_lineno=2215, end_col_offset=29), lineno=2215, col_offset=7, end_lineno=2215, end_col_offset=29), body=[Expr(value=Call(func=Attribute(value=Name(id='LOGGER', ctx=Load(), lineno=2216, col_offset=8, end_lineno=2216, end_col_offset=14), attr='warning', ctx=Load(), lineno=2216, col_offset=8, end_lineno=2216, end_col_offset=22), args=[Constant(value="Allowlist '%s' does not exist; continuing with empty allowlist", lineno=2216, col_offset=23, end_lineno=2216, end_col_offset=87), Name(id='file_path', ctx=Load(), lineno=2216, col_offset=89, end_lineno=2216, end_col_offset=98)], lineno=2216, col_offset=8, end_lineno=2216, end_col_offset=99), lineno=2216, col_offset=8, end_lineno=2216, end_col_offset=99), Return(value=Dict(lineno=2217, col_offset=15, end_lineno=2217, end_col_offset=17), lineno=2217, col_offset=8, end_lineno=2217, end_col_offset=17)], lineno=2215, col_offset=4, end_lineno=2217, end_col_offset=17), If(test=UnaryOp(op=Not(), operand=Call(func=Attribute(value=Name(id='file_path', ctx=Load(), lineno=2218, col_offset=11, end_lineno=2218, end_col_offset=20), attr='is_file', ctx=Load(), lineno=2218, col_offset=11, end_lineno=2218, end_col_offset=28), lineno=2218, col_offset=11, end_lineno=2218, end_col_offset=30), lineno=2218, col_offset=7, end_lineno=2218, end_col_offset=30), body=[Assign(targets=[Name(id='message', ctx=Store(), lineno=2219, col_offset=8, end_lineno=2219, end_col_offset=15)], value=JoinedStr(values=[Constant(value="Allowlist '", lineno=2219, col_offset=20, end_lineno=2219, end_col_offset=31), FormattedValue(value=Name(id='file_path', ctx=Load(), lineno=2219, col_offset=32, end_lineno=2219, end_col_offset=41), conversion=-1, lineno=2219, col_offset=31, end_lineno=2219, end_col_offset=42), Constant(value="' must be a file", lineno=2219, col_offset=42, end_lineno=2219, end_col_offset=58)], lineno=2219, col_offset=18, end_lineno=2219, end_col_offset=59), lineno=2219, col_offset=8, end_lineno=2219, end_col_offset=59), Raise(exc=Call(func=Name(id='ValidationError', ctx=Load(), lineno=2220, col_offset=14, end_lineno=2220, end_col_offset=29), args=[Name(id='message', ctx=Load(), lineno=2220, col_offset=30, end_lineno=2220, end_col_offset=37)], lineno=2220, col_offset=14, end_lineno=2220, end_col_offset=38), lineno=2220, col_offset=8, end_lineno=2220, end_col_offset=38)], lineno=2218, col_offset=4, end_lineno=2220, end_col_offset=38), Try(body=[Assign(targets=[Name(id='data', ctx=Store(), lineno=2222, col_offset=8, end_lineno=2222, end_col_offset=12)], value=Call(func=Attribute(value=Name(id='json', ctx=Load(), lineno=2222, col_offset=15, end_lineno=2222, end_col_offset=19), attr='loads', ctx=Load(), lineno=2222, col_offset=15, end_lineno=2222, end_col_offset=25), args=[Call(func=Attribute(value=Name(id='file_path', ctx=Load(), lineno=2222, col_offset=26, end_lineno=2222, end_col_offset=35), attr='read_text', ctx=Load(), lineno=2222, col_offset=26, end_lineno=2222, end_col_offset=45), keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=2222, col_offset=55, end_lineno=2222, end_col_offset=62), lineno=2222, col_offset=46, end_lineno=2222, end_col_offset=62)], lineno=2222, col_offset=26, end_lineno=2222, end_col_offset=63)], lineno=2222, col_offset=15, end_lineno=2222, end_col_offset=64), lineno=2222, col_offset=8, end_lineno=2222, end_col_offset=64)], handlers=[ExceptHandler(type=Attribute(value=Name(id='json', ctx=Load(), lineno=2223, col_offset=11, end_lineno=2223, end_col_offset=15), attr='JSONDecodeError', ctx=Load(), lineno=2223, col_offset=11, end_lineno=2223, end_col_offset=31), name='exc', body=[Assign(targets=[Name(id='message', ctx=Store(), lineno=2224, col_offset=8, end_lineno=2224, end_col_offset=15)], value=JoinedStr(values=[Constant(value="Allowlist '", lineno=2224, col_offset=20, end_lineno=2224, end_col_offset=31), FormattedValue(value=Name(id='file_path', ctx=Load(), lineno=2224, col_offset=32, end_lineno=2224, end_col_offset=41), conversion=-1, lineno=2224, col_offset=31, end_lineno=2224, end_col_offset=42), Constant(value="' is not valid JSON", lineno=2224, col_offset=42, end_lineno=2224, end_col_offset=61)], lineno=2224, col_offset=18, end_lineno=2224, end_col_offset=62), lineno=2224, col_offset=8, end_lineno=2224, end_col_offset=62), Raise(exc=Call(func=Name(id='ValidationError', ctx=Load(), lineno=2225, col_offset=14, end_lineno=2225, end_col_offset=29), args=[Name(id='message', ctx=Load(), lineno=2225, col_offset=30, end_lineno=2225, end_col_offset=37)], lineno=2225, col_offset=14, end_lineno=2225, end_col_offset=38), cause=Name(id='exc', ctx=Load(), lineno=2225, col_offset=44, end_lineno=2225, end_col_offset=47), lineno=2225, col_offset=8, end_lineno=2225, end_col_offset=47)], lineno=2223, col_offset=4, end_lineno=2225, end_col_offset=47)], lineno=2221, col_offset=4, end_lineno=2225, end_col_offset=47), If(test=UnaryOp(op=Not(), operand=Call(func=Name(id='isinstance', ctx=Load(), lineno=2226, col_offset=11, end_lineno=2226, end_col_offset=21), args=[Name(id='data', ctx=Load(), lineno=2226, col_offset=22, end_lineno=2226, end_col_offset=26), Name(id='dict', ctx=Load(), lineno=2226, col_offset=28, end_lineno=2226, end_col_offset=32)], lineno=2226, col_offset=11, end_lineno=2226, end_col_offset=33), lineno=2226, col_offset=7, end_lineno=2226, end_col_offset=33), body=[Assign(targets=[Name(id='message', ctx=Store(), lineno=2227, col_offset=8, end_lineno=2227, end_col_offset=15)], value=JoinedStr(values=[Constant(value="Allowlist '", lineno=2227, col_offset=20, end_lineno=2227, end_col_offset=31), FormattedValue(value=Name(id='file_path', ctx=Load(), lineno=2227, col_offset=32, end_lineno=2227, end_col_offset=41), conversion=-1, lineno=2227, col_offset=31, end_lineno=2227, end_col_offset=42), Constant(value="' must contain a JSON object", lineno=2227, col_offset=42, end_lineno=2227, end_col_offset=70)], lineno=2227, col_offset=18, end_lineno=2227, end_col_offset=71), lineno=2227, col_offset=8, end_lineno=2227, end_col_offset=71), Raise(exc=Call(func=Name(id='ValidationError', ctx=Load(), lineno=2228, col_offset=14, end_lineno=2228, end_col_offset=29), args=[Name(id='message', ctx=Load(), lineno=2228, col_offset=30, end_lineno=2228, end_col_offset=37)], lineno=2228, col_offset=14, end_lineno=2228, end_col_offset=38), lineno=2228, col_offset=8, end_lineno=2228, end_col_offset=38)], lineno=2226, col_offset=4, end_lineno=2228, end_col_offset=38), Return(value=Name(id='data', ctx=Load(), lineno=2229, col_offset=11, end_lineno=2229, end_col_offset=15), lineno=2229, col_offset=4, end_lineno=2229, end_col_offset=15)], returns=Subscript(value=Name(id='dict', ctx=Load(), lineno=2196, col_offset=34, end_lineno=2196, end_col_offset=38), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=2196, col_offset=39, end_lineno=2196, end_col_offset=42), Name(id='object', ctx=Load(), lineno=2196, col_offset=44, end_lineno=2196, end_col_offset=50)], ctx=Load(), lineno=2196, col_offset=39, end_lineno=2196, end_col_offset=50), ctx=Load(), lineno=2196, col_offset=34, end_lineno=2196, end_col_offset=51), lineno=2196, col_offset=0, end_lineno=2229, end_col_offset=15), FunctionDef(name='_render_summary_markdown', args=arguments(args=[arg(arg='meta', annotation=Subscript(value=Name(id='Mapping', ctx=Load(), lineno=2232, col_offset=35, end_lineno=2232, end_col_offset=42), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=2232, col_offset=43, end_lineno=2232, end_col_offset=46), Name(id='object', ctx=Load(), lineno=2232, col_offset=48, end_lineno=2232, end_col_offset=54)], ctx=Load(), lineno=2232, col_offset=43, end_lineno=2232, end_col_offset=54), ctx=Load(), lineno=2232, col_offset=35, end_lineno=2232, end_col_offset=55), lineno=2232, col_offset=29, end_lineno=2232, end_col_offset=55)]), body=[Expr(value=Constant(value='Render summary markdown.\n\n    Parameters\n    ----------\n    meta : Mapping[str, object]\n        Analysis metadata.\n\n    Returns\n    -------\n    str\n        Markdown summary string.\n    ', lineno=2233, col_offset=4, end_lineno=2244, end_col_offset=7), lineno=2233, col_offset=4, end_lineno=2244, end_col_offset=7), Assign(targets=[Name(id='lines', ctx=Store(), lineno=2245, col_offset=4, end_lineno=2245, end_col_offset=9)], value=List(elts=[Constant(value='# Subsystem Graph Metadata', lineno=2245, col_offset=13, end_lineno=2245, end_col_offset=41), Constant(value='', lineno=2245, col_offset=43, end_lineno=2245, end_col_offset=45)], ctx=Load(), lineno=2245, col_offset=12, end_lineno=2245, end_col_offset=46), lineno=2245, col_offset=4, end_lineno=2245, end_col_offset=46), Assign(targets=[Name(id='skipped', ctx=Store(), lineno=2246, col_offset=4, end_lineno=2246, end_col_offset=11)], value=Call(func=Name(id='bool', ctx=Load(), lineno=2246, col_offset=14, end_lineno=2246, end_col_offset=18), args=[Call(func=Attribute(value=Name(id='meta', ctx=Load(), lineno=2246, col_offset=19, end_lineno=2246, end_col_offset=23), attr='get', ctx=Load(), lineno=2246, col_offset=19, end_lineno=2246, end_col_offset=27), args=[Constant(value='cycle_enumeration_skipped', lineno=2246, col_offset=28, end_lineno=2246, end_col_offset=55)], lineno=2246, col_offset=19, end_lineno=2246, end_col_offset=56)], lineno=2246, col_offset=14, end_lineno=2246, end_col_offset=57), lineno=2246, col_offset=4, end_lineno=2246, end_col_offset=57), Expr(value=Call(func=Attribute(value=Name(id='lines', ctx=Load(), lineno=2247, col_offset=4, end_lineno=2247, end_col_offset=9), attr='append', ctx=Load(), lineno=2247, col_offset=4, end_lineno=2247, end_col_offset=16), args=[IfExp(test=Name(id='skipped', ctx=Load(), lineno=2248, col_offset=46, end_lineno=2248, end_col_offset=53), body=Constant(value='*Cycle enumeration skipped:* Yes', lineno=2248, col_offset=8, end_lineno=2248, end_col_offset=42), orelse=Constant(value='*Cycle enumeration skipped:* No', lineno=2248, col_offset=59, end_lineno=2248, end_col_offset=92), lineno=2248, col_offset=8, end_lineno=2248, end_col_offset=92)], lineno=2247, col_offset=4, end_lineno=2249, end_col_offset=5), lineno=2247, col_offset=4, end_lineno=2249, end_col_offset=5), Assign(targets=[Name(id='scc_summary', ctx=Store(), lineno=2250, col_offset=4, end_lineno=2250, end_col_offset=15)], value=Call(func=Attribute(value=Name(id='meta', ctx=Load(), lineno=2250, col_offset=18, end_lineno=2250, end_col_offset=22), attr='get', ctx=Load(), lineno=2250, col_offset=18, end_lineno=2250, end_col_offset=26), args=[Constant(value='scc_summary', lineno=2250, col_offset=27, end_lineno=2250, end_col_offset=40)], lineno=2250, col_offset=18, end_lineno=2250, end_col_offset=41), lineno=2250, col_offset=4, end_lineno=2250, end_col_offset=41), If(test=BoolOp(op=And(), values=[Call(func=Name(id='isinstance', ctx=Load(), lineno=2251, col_offset=7, end_lineno=2251, end_col_offset=17), args=[Name(id='scc_summary', ctx=Load(), lineno=2251, col_offset=18, end_lineno=2251, end_col_offset=29), Name(id='Sequence', ctx=Load(), lineno=2251, col_offset=31, end_lineno=2251, end_col_offset=39)], lineno=2251, col_offset=7, end_lineno=2251, end_col_offset=40), Name(id='scc_summary', ctx=Load(), lineno=2251, col_offset=45, end_lineno=2251, end_col_offset=56)], lineno=2251, col_offset=7, end_lineno=2251, end_col_offset=56), body=[Expr(value=Call(func=Attribute(value=Name(id='lines', ctx=Load(), lineno=2252, col_offset=8, end_lineno=2252, end_col_offset=13), attr='append', ctx=Load(), lineno=2252, col_offset=8, end_lineno=2252, end_col_offset=20), args=[Constant(value='', lineno=2252, col_offset=21, end_lineno=2252, end_col_offset=23)], lineno=2252, col_offset=8, end_lineno=2252, end_col_offset=24), lineno=2252, col_offset=8, end_lineno=2252, end_col_offset=24), Expr(value=Call(func=Attribute(value=Name(id='lines', ctx=Load(), lineno=2253, col_offset=8, end_lineno=2253, end_col_offset=13), attr='append', ctx=Load(), lineno=2253, col_offset=8, end_lineno=2253, end_col_offset=20), args=[Constant(value='The fallback strongly connected components are:', lineno=2253, col_offset=21, end_lineno=2253, end_col_offset=70)], lineno=2253, col_offset=8, end_lineno=2253, end_col_offset=71), lineno=2253, col_offset=8, end_lineno=2253, end_col_offset=71), For(target=Name(id='entry', ctx=Store(), lineno=2254, col_offset=12, end_lineno=2254, end_col_offset=17), iter=Name(id='scc_summary', ctx=Load(), lineno=2254, col_offset=21, end_lineno=2254, end_col_offset=32), body=[If(test=UnaryOp(op=Not(), operand=Call(func=Name(id='isinstance', ctx=Load(), lineno=2255, col_offset=19, end_lineno=2255, end_col_offset=29), args=[Name(id='entry', ctx=Load(), lineno=2255, col_offset=30, end_lineno=2255, end_col_offset=35), Name(id='Mapping', ctx=Load(), lineno=2255, col_offset=37, end_lineno=2255, end_col_offset=44)], lineno=2255, col_offset=19, end_lineno=2255, end_col_offset=45), lineno=2255, col_offset=15, end_lineno=2255, end_col_offset=45), body=[Continue(lineno=2256, col_offset=16, end_lineno=2256, end_col_offset=24)], lineno=2255, col_offset=12, end_lineno=2256, end_col_offset=24), Assign(targets=[Name(id='members', ctx=Store(), lineno=2257, col_offset=12, end_lineno=2257, end_col_offset=19)], value=Call(func=Attribute(value=Name(id='entry', ctx=Load(), lineno=2257, col_offset=22, end_lineno=2257, end_col_offset=27), attr='get', ctx=Load(), lineno=2257, col_offset=22, end_lineno=2257, end_col_offset=31), args=[Constant(value='members', lineno=2257, col_offset=32, end_lineno=2257, end_col_offset=41)], lineno=2257, col_offset=22, end_lineno=2257, end_col_offset=42), lineno=2257, col_offset=12, end_lineno=2257, end_col_offset=42), If(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=2258, col_offset=15, end_lineno=2258, end_col_offset=25), args=[Name(id='members', ctx=Load(), lineno=2258, col_offset=26, end_lineno=2258, end_col_offset=33), Name(id='Sequence', ctx=Load(), lineno=2258, col_offset=35, end_lineno=2258, end_col_offset=43)], lineno=2258, col_offset=15, end_lineno=2258, end_col_offset=44), body=[Assign(targets=[Name(id='pretty', ctx=Store(), lineno=2259, col_offset=16, end_lineno=2259, end_col_offset=22)], value=Call(func=Attribute(value=Constant(value=', ', lineno=2259, col_offset=25, end_lineno=2259, end_col_offset=29), attr='join', ctx=Load(), lineno=2259, col_offset=25, end_lineno=2259, end_col_offset=34), args=[Call(func=Name(id='sorted', ctx=Load(), lineno=2259, col_offset=35, end_lineno=2259, end_col_offset=41), args=[GeneratorExp(elt=Call(func=Name(id='str', ctx=Load(), lineno=2259, col_offset=42, end_lineno=2259, end_col_offset=45), args=[Name(id='m', ctx=Load(), lineno=2259, col_offset=46, end_lineno=2259, end_col_offset=47)], lineno=2259, col_offset=42, end_lineno=2259, end_col_offset=48), generators=[comprehension(target=Name(id='m', ctx=Store(), lineno=2259, col_offset=53, end_lineno=2259, end_col_offset=54), iter=Name(id='members', ctx=Load(), lineno=2259, col_offset=58, end_lineno=2259, end_col_offset=65), is_async=0)], lineno=2259, col_offset=41, end_lineno=2259, end_col_offset=66)], lineno=2259, col_offset=35, end_lineno=2259, end_col_offset=66)], lineno=2259, col_offset=25, end_lineno=2259, end_col_offset=67), lineno=2259, col_offset=16, end_lineno=2259, end_col_offset=67), Expr(value=Call(func=Attribute(value=Name(id='lines', ctx=Load(), lineno=2260, col_offset=16, end_lineno=2260, end_col_offset=21), attr='append', ctx=Load(), lineno=2260, col_offset=16, end_lineno=2260, end_col_offset=28), args=[JoinedStr(values=[Constant(value='- size ', lineno=2260, col_offset=31, end_lineno=2260, end_col_offset=38), FormattedValue(value=Call(func=Attribute(value=Name(id='entry', ctx=Load(), lineno=2260, col_offset=39, end_lineno=2260, end_col_offset=44), attr='get', ctx=Load(), lineno=2260, col_offset=39, end_lineno=2260, end_col_offset=48), args=[Constant(value='size', lineno=2260, col_offset=49, end_lineno=2260, end_col_offset=55), Constant(value='?', lineno=2260, col_offset=57, end_lineno=2260, end_col_offset=60)], lineno=2260, col_offset=39, end_lineno=2260, end_col_offset=61), conversion=-1, lineno=2260, col_offset=38, end_lineno=2260, end_col_offset=62), Constant(value=': ', lineno=2260, col_offset=62, end_lineno=2260, end_col_offset=64), FormattedValue(value=Name(id='pretty', ctx=Load(), lineno=2260, col_offset=65, end_lineno=2260, end_col_offset=71), conversion=-1, lineno=2260, col_offset=64, end_lineno=2260, end_col_offset=72)], lineno=2260, col_offset=29, end_lineno=2260, end_col_offset=73)], lineno=2260, col_offset=16, end_lineno=2260, end_col_offset=74), lineno=2260, col_offset=16, end_lineno=2260, end_col_offset=74)], lineno=2258, col_offset=12, end_lineno=2260, end_col_offset=74)], lineno=2254, col_offset=8, end_lineno=2260, end_col_offset=74)], orelse=[Expr(value=Call(func=Attribute(value=Name(id='lines', ctx=Load(), lineno=2262, col_offset=8, end_lineno=2262, end_col_offset=13), attr='append', ctx=Load(), lineno=2262, col_offset=8, end_lineno=2262, end_col_offset=20), args=[Constant(value='', lineno=2262, col_offset=21, end_lineno=2262, end_col_offset=23)], lineno=2262, col_offset=8, end_lineno=2262, end_col_offset=24), lineno=2262, col_offset=8, end_lineno=2262, end_col_offset=24), Expr(value=Call(func=Attribute(value=Name(id='lines', ctx=Load(), lineno=2263, col_offset=8, end_lineno=2263, end_col_offset=13), attr='append', ctx=Load(), lineno=2263, col_offset=8, end_lineno=2263, end_col_offset=20), args=[Constant(value='Cycle enumeration completed normally.', lineno=2263, col_offset=21, end_lineno=2263, end_col_offset=60)], lineno=2263, col_offset=8, end_lineno=2263, end_col_offset=61), lineno=2263, col_offset=8, end_lineno=2263, end_col_offset=61)], lineno=2251, col_offset=4, end_lineno=2263, end_col_offset=61), Return(value=BinOp(left=Call(func=Attribute(value=Constant(value='\n', lineno=2264, col_offset=11, end_lineno=2264, end_col_offset=15), attr='join', ctx=Load(), lineno=2264, col_offset=11, end_lineno=2264, end_col_offset=20), args=[Name(id='lines', ctx=Load(), lineno=2264, col_offset=21, end_lineno=2264, end_col_offset=26)], lineno=2264, col_offset=11, end_lineno=2264, end_col_offset=27), op=Add(), right=Constant(value='\n', lineno=2264, col_offset=30, end_lineno=2264, end_col_offset=34), lineno=2264, col_offset=11, end_lineno=2264, end_col_offset=34), lineno=2264, col_offset=4, end_lineno=2264, end_col_offset=34)], returns=Name(id='str', ctx=Load(), lineno=2232, col_offset=60, end_lineno=2232, end_col_offset=63), lineno=2232, col_offset=0, end_lineno=2264, end_col_offset=34), FunctionDef(name='_write_global_artifacts', args=arguments(args=[arg(arg='graph', annotation=Name(id='DiGraph', ctx=Load(), lineno=2268, col_offset=11, end_lineno=2268, end_col_offset=18), lineno=2268, col_offset=4, end_lineno=2268, end_col_offset=18), arg(arg='layers', annotation=Name(id='LayerConfig', ctx=Load(), lineno=2269, col_offset=12, end_lineno=2269, end_col_offset=23), lineno=2269, col_offset=4, end_lineno=2269, end_col_offset=23), arg(arg='fmt', annotation=Name(id='str', ctx=Load(), lineno=2270, col_offset=9, end_lineno=2270, end_col_offset=12), lineno=2270, col_offset=4, end_lineno=2270, end_col_offset=12), arg(arg='analysis', annotation=Name(id='AnalysisResult', ctx=Load(), lineno=2271, col_offset=14, end_lineno=2271, end_col_offset=28), lineno=2271, col_offset=4, end_lineno=2271, end_col_offset=28)]), body=[Expr(value=Constant(value='Write global artifacts.\n\n    Parameters\n    ----------\n    graph : DiGraph\n        Collapsed graph.\n    layers : LayerConfig\n        Layer configuration.\n    fmt : str\n        Output format.\n    analysis : AnalysisResult\n        Analysis results.\n    ', lineno=2273, col_offset=4, end_lineno=2285, end_col_offset=7), lineno=2273, col_offset=4, end_lineno=2285, end_col_offset=7), Expr(value=Call(func=Name(id='style_and_render', ctx=Load(), lineno=2286, col_offset=4, end_lineno=2286, end_col_offset=20), args=[Name(id='graph', ctx=Load(), lineno=2286, col_offset=21, end_lineno=2286, end_col_offset=26), Name(id='layers', ctx=Load(), lineno=2286, col_offset=28, end_lineno=2286, end_col_offset=34), Name(id='analysis', ctx=Load(), lineno=2286, col_offset=36, end_lineno=2286, end_col_offset=44), BinOp(left=Name(id='OUT', ctx=Load(), lineno=2286, col_offset=46, end_lineno=2286, end_col_offset=49), op=Div(), right=JoinedStr(values=[Constant(value='subsystems.', lineno=2286, col_offset=54, end_lineno=2286, end_col_offset=65), FormattedValue(value=Name(id='fmt', ctx=Load(), lineno=2286, col_offset=66, end_lineno=2286, end_col_offset=69), conversion=-1, lineno=2286, col_offset=65, end_lineno=2286, end_col_offset=70)], lineno=2286, col_offset=52, end_lineno=2286, end_col_offset=71), lineno=2286, col_offset=46, end_lineno=2286, end_col_offset=71)], keywords=[keyword(arg='fmt', value=Name(id='fmt', ctx=Load(), lineno=2286, col_offset=77, end_lineno=2286, end_col_offset=80), lineno=2286, col_offset=73, end_lineno=2286, end_col_offset=80)], lineno=2286, col_offset=4, end_lineno=2286, end_col_offset=81), lineno=2286, col_offset=4, end_lineno=2286, end_col_offset=81), AnnAssign(target=Name(id='meta', ctx=Store(), lineno=2287, col_offset=4, end_lineno=2287, end_col_offset=8), annotation=Name(id='AnalysisResult', ctx=Load(), lineno=2287, col_offset=10, end_lineno=2287, end_col_offset=24), value=Dict(keys=[Constant(value='packages', lineno=2288, col_offset=8, end_lineno=2288, end_col_offset=18), Constant(value='cycles', lineno=2289, col_offset=8, end_lineno=2289, end_col_offset=16), Constant(value='centrality', lineno=2290, col_offset=8, end_lineno=2290, end_col_offset=20), Constant(value='layer_violations', lineno=2291, col_offset=8, end_lineno=2291, end_col_offset=26), Constant(value='cycle_enumeration_skipped', lineno=2292, col_offset=8, end_lineno=2292, end_col_offset=35), Constant(value='generated_at', lineno=2293, col_offset=8, end_lineno=2293, end_col_offset=22)], values=[Call(func=Name(id='sorted', ctx=Load(), lineno=2288, col_offset=20, end_lineno=2288, end_col_offset=26), args=[GeneratorExp(elt=Call(func=Name(id='str', ctx=Load(), lineno=2288, col_offset=27, end_lineno=2288, end_col_offset=30), args=[Name(id='node', ctx=Load(), lineno=2288, col_offset=31, end_lineno=2288, end_col_offset=35)], lineno=2288, col_offset=27, end_lineno=2288, end_col_offset=36), generators=[comprehension(target=Name(id='node', ctx=Store(), lineno=2288, col_offset=41, end_lineno=2288, end_col_offset=45), iter=Call(func=Attribute(value=Name(id='graph', ctx=Load(), lineno=2288, col_offset=49, end_lineno=2288, end_col_offset=54), attr='nodes', ctx=Load(), lineno=2288, col_offset=49, end_lineno=2288, end_col_offset=60), lineno=2288, col_offset=49, end_lineno=2288, end_col_offset=62), is_async=0)], lineno=2288, col_offset=26, end_lineno=2288, end_col_offset=63)], lineno=2288, col_offset=20, end_lineno=2288, end_col_offset=63), Call(func=Attribute(value=Name(id='analysis', ctx=Load(), lineno=2289, col_offset=18, end_lineno=2289, end_col_offset=26), attr='get', ctx=Load(), lineno=2289, col_offset=18, end_lineno=2289, end_col_offset=30), args=[Constant(value='cycles', lineno=2289, col_offset=31, end_lineno=2289, end_col_offset=39), List(ctx=Load(), lineno=2289, col_offset=41, end_lineno=2289, end_col_offset=43)], lineno=2289, col_offset=18, end_lineno=2289, end_col_offset=44), Call(func=Attribute(value=Name(id='analysis', ctx=Load(), lineno=2290, col_offset=22, end_lineno=2290, end_col_offset=30), attr='get', ctx=Load(), lineno=2290, col_offset=22, end_lineno=2290, end_col_offset=34), args=[Constant(value='centrality', lineno=2290, col_offset=35, end_lineno=2290, end_col_offset=47), Dict(lineno=2290, col_offset=49, end_lineno=2290, end_col_offset=51)], lineno=2290, col_offset=22, end_lineno=2290, end_col_offset=52), Call(func=Attribute(value=Name(id='analysis', ctx=Load(), lineno=2291, col_offset=28, end_lineno=2291, end_col_offset=36), attr='get', ctx=Load(), lineno=2291, col_offset=28, end_lineno=2291, end_col_offset=40), args=[Constant(value='layer_violations', lineno=2291, col_offset=41, end_lineno=2291, end_col_offset=59), List(ctx=Load(), lineno=2291, col_offset=61, end_lineno=2291, end_col_offset=63)], lineno=2291, col_offset=28, end_lineno=2291, end_col_offset=64), Call(func=Attribute(value=Name(id='analysis', ctx=Load(), lineno=2292, col_offset=37, end_lineno=2292, end_col_offset=45), attr='get', ctx=Load(), lineno=2292, col_offset=37, end_lineno=2292, end_col_offset=49), args=[Constant(value='cycle_enumeration_skipped', lineno=2292, col_offset=50, end_lineno=2292, end_col_offset=77), Constant(value=False, lineno=2292, col_offset=79, end_lineno=2292, end_col_offset=84)], lineno=2292, col_offset=37, end_lineno=2292, end_col_offset=85), Call(func=Attribute(value=Name(id='time', ctx=Load(), lineno=2293, col_offset=24, end_lineno=2293, end_col_offset=28), attr='strftime', ctx=Load(), lineno=2293, col_offset=24, end_lineno=2293, end_col_offset=37), args=[Constant(value='%Y-%m-%dT%H:%M:%SZ', lineno=2293, col_offset=38, end_lineno=2293, end_col_offset=58), Call(func=Attribute(value=Name(id='time', ctx=Load(), lineno=2293, col_offset=60, end_lineno=2293, end_col_offset=64), attr='gmtime', ctx=Load(), lineno=2293, col_offset=60, end_lineno=2293, end_col_offset=71), lineno=2293, col_offset=60, end_lineno=2293, end_col_offset=73)], lineno=2293, col_offset=24, end_lineno=2293, end_col_offset=74)], lineno=2287, col_offset=27, end_lineno=2294, end_col_offset=5), simple=1, lineno=2287, col_offset=4, end_lineno=2294, end_col_offset=5), If(test=Call(func=Attribute(value=Name(id='analysis', ctx=Load(), lineno=2295, col_offset=7, end_lineno=2295, end_col_offset=15), attr='get', ctx=Load(), lineno=2295, col_offset=7, end_lineno=2295, end_col_offset=19), args=[Constant(value='scc_summary', lineno=2295, col_offset=20, end_lineno=2295, end_col_offset=33)], lineno=2295, col_offset=7, end_lineno=2295, end_col_offset=34), body=[Assign(targets=[Subscript(value=Name(id='meta', ctx=Load(), lineno=2296, col_offset=8, end_lineno=2296, end_col_offset=12), slice=Constant(value='scc_summary', lineno=2296, col_offset=13, end_lineno=2296, end_col_offset=26), ctx=Store(), lineno=2296, col_offset=8, end_lineno=2296, end_col_offset=27)], value=Subscript(value=Name(id='analysis', ctx=Load(), lineno=2296, col_offset=30, end_lineno=2296, end_col_offset=38), slice=Constant(value='scc_summary', lineno=2296, col_offset=39, end_lineno=2296, end_col_offset=52), ctx=Load(), lineno=2296, col_offset=30, end_lineno=2296, end_col_offset=53), lineno=2296, col_offset=8, end_lineno=2296, end_col_offset=53)], lineno=2295, col_offset=4, end_lineno=2296, end_col_offset=53), Expr(value=Call(func=Name(id='write_meta', ctx=Load(), lineno=2297, col_offset=4, end_lineno=2297, end_col_offset=14), args=[Name(id='meta', ctx=Load(), lineno=2297, col_offset=15, end_lineno=2297, end_col_offset=19), BinOp(left=Name(id='OUT', ctx=Load(), lineno=2297, col_offset=21, end_lineno=2297, end_col_offset=24), op=Div(), right=Constant(value='graph_meta.json', lineno=2297, col_offset=27, end_lineno=2297, end_col_offset=44), lineno=2297, col_offset=21, end_lineno=2297, end_col_offset=44)], lineno=2297, col_offset=4, end_lineno=2297, end_col_offset=45), lineno=2297, col_offset=4, end_lineno=2297, end_col_offset=45), Expr(value=Call(func=Attribute(value=BinOp(left=Name(id='OUT', ctx=Load(), lineno=2298, col_offset=5, end_lineno=2298, end_col_offset=8), op=Div(), right=Constant(value='subsystems_meta.md', lineno=2298, col_offset=11, end_lineno=2298, end_col_offset=31), lineno=2298, col_offset=5, end_lineno=2298, end_col_offset=31), attr='write_text', ctx=Load(), lineno=2298, col_offset=4, end_lineno=2298, end_col_offset=43), args=[Call(func=Name(id='_render_summary_markdown', ctx=Load(), lineno=2298, col_offset=44, end_lineno=2298, end_col_offset=68), args=[Name(id='meta', ctx=Load(), lineno=2298, col_offset=69, end_lineno=2298, end_col_offset=73)], lineno=2298, col_offset=44, end_lineno=2298, end_col_offset=74)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=2298, col_offset=85, end_lineno=2298, end_col_offset=92), lineno=2298, col_offset=76, end_lineno=2298, end_col_offset=92)], lineno=2298, col_offset=4, end_lineno=2298, end_col_offset=93), lineno=2298, col_offset=4, end_lineno=2298, end_col_offset=93)], returns=Constant(value=None, lineno=2272, col_offset=5, end_lineno=2272, end_col_offset=9), lineno=2267, col_offset=0, end_lineno=2298, end_col_offset=93), FunctionDef(name='_log_run_summary', args=arguments(kwonlyargs=[arg(arg='use_cache', annotation=Name(id='bool', ctx=Load(), lineno=2303, col_offset=15, end_lineno=2303, end_col_offset=19), lineno=2303, col_offset=4, end_lineno=2303, end_col_offset=19), arg(arg='cache_dir', annotation=Name(id='Path', ctx=Load(), lineno=2304, col_offset=15, end_lineno=2304, end_col_offset=19), lineno=2304, col_offset=4, end_lineno=2304, end_col_offset=19), arg(arg='results', annotation=Subscript(value=Name(id='Sequence', ctx=Load(), lineno=2305, col_offset=13, end_lineno=2305, end_col_offset=21), slice=Subscript(value=Name(id='tuple', ctx=Load(), lineno=2305, col_offset=22, end_lineno=2305, end_col_offset=27), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=2305, col_offset=28, end_lineno=2305, end_col_offset=31), Name(id='bool', ctx=Load(), lineno=2305, col_offset=33, end_lineno=2305, end_col_offset=37), Name(id='bool', ctx=Load(), lineno=2305, col_offset=39, end_lineno=2305, end_col_offset=43), Name(id='bool', ctx=Load(), lineno=2305, col_offset=45, end_lineno=2305, end_col_offset=49)], ctx=Load(), lineno=2305, col_offset=28, end_lineno=2305, end_col_offset=49), ctx=Load(), lineno=2305, col_offset=22, end_lineno=2305, end_col_offset=50), ctx=Load(), lineno=2305, col_offset=13, end_lineno=2305, end_col_offset=51), lineno=2305, col_offset=4, end_lineno=2305, end_col_offset=51), arg(arg='duration_s', annotation=Name(id='float', ctx=Load(), lineno=2306, col_offset=16, end_lineno=2306, end_col_offset=21), lineno=2306, col_offset=4, end_lineno=2306, end_col_offset=21), arg(arg='verbose', annotation=Name(id='bool', ctx=Load(), lineno=2307, col_offset=13, end_lineno=2307, end_col_offset=17), lineno=2307, col_offset=4, end_lineno=2307, end_col_offset=17)], kw_defaults=[None, None, None, None, None]), body=[Assign(targets=[Name(id='built', ctx=Store(), lineno=2309, col_offset=4, end_lineno=2309, end_col_offset=9)], value=Call(func=Name(id='sum', ctx=Load(), lineno=2309, col_offset=12, end_lineno=2309, end_col_offset=15), args=[GeneratorExp(elt=Constant(value=1, lineno=2309, col_offset=16, end_lineno=2309, end_col_offset=17), generators=[comprehension(target=Tuple(elts=[Name(id='_', ctx=Store(), lineno=2309, col_offset=22, end_lineno=2309, end_col_offset=23), Name(id='used_cache', ctx=Store(), lineno=2309, col_offset=25, end_lineno=2309, end_col_offset=35), Name(id='_', ctx=Store(), lineno=2309, col_offset=37, end_lineno=2309, end_col_offset=38), Name(id='_', ctx=Store(), lineno=2309, col_offset=40, end_lineno=2309, end_col_offset=41)], ctx=Store(), lineno=2309, col_offset=22, end_lineno=2309, end_col_offset=41), iter=Name(id='results', ctx=Load(), lineno=2309, col_offset=45, end_lineno=2309, end_col_offset=52), ifs=[UnaryOp(op=Not(), operand=Name(id='used_cache', ctx=Load(), lineno=2309, col_offset=60, end_lineno=2309, end_col_offset=70), lineno=2309, col_offset=56, end_lineno=2309, end_col_offset=70)], is_async=0)], lineno=2309, col_offset=15, end_lineno=2309, end_col_offset=71)], lineno=2309, col_offset=12, end_lineno=2309, end_col_offset=71), lineno=2309, col_offset=4, end_lineno=2309, end_col_offset=71), Assign(targets=[Name(id='cached', ctx=Store(), lineno=2310, col_offset=4, end_lineno=2310, end_col_offset=10)], value=Call(func=Name(id='sum', ctx=Load(), lineno=2310, col_offset=13, end_lineno=2310, end_col_offset=16), args=[GeneratorExp(elt=Constant(value=1, lineno=2310, col_offset=17, end_lineno=2310, end_col_offset=18), generators=[comprehension(target=Tuple(elts=[Name(id='_', ctx=Store(), lineno=2310, col_offset=23, end_lineno=2310, end_col_offset=24), Name(id='used_cache', ctx=Store(), lineno=2310, col_offset=26, end_lineno=2310, end_col_offset=36), Name(id='_', ctx=Store(), lineno=2310, col_offset=38, end_lineno=2310, end_col_offset=39), Name(id='_', ctx=Store(), lineno=2310, col_offset=41, end_lineno=2310, end_col_offset=42)], ctx=Store(), lineno=2310, col_offset=23, end_lineno=2310, end_col_offset=42), iter=Name(id='results', ctx=Load(), lineno=2310, col_offset=46, end_lineno=2310, end_col_offset=53), ifs=[Name(id='used_cache', ctx=Load(), lineno=2310, col_offset=57, end_lineno=2310, end_col_offset=67)], is_async=0)], lineno=2310, col_offset=16, end_lineno=2310, end_col_offset=68)], lineno=2310, col_offset=13, end_lineno=2310, end_col_offset=68), lineno=2310, col_offset=4, end_lineno=2310, end_col_offset=68), If(test=Name(id='use_cache', ctx=Load(), lineno=2311, col_offset=7, end_lineno=2311, end_col_offset=16), body=[Expr(value=Call(func=Attribute(value=Name(id='LOGGER', ctx=Load(), lineno=2312, col_offset=8, end_lineno=2312, end_col_offset=14), attr='info', ctx=Load(), lineno=2312, col_offset=8, end_lineno=2312, end_col_offset=19), args=[Constant(value='cache summary: per-package built=%d cached=%d; cache_dir=%s', lineno=2313, col_offset=12, end_lineno=2313, end_col_offset=73), Name(id='built', ctx=Load(), lineno=2314, col_offset=12, end_lineno=2314, end_col_offset=17), Name(id='cached', ctx=Load(), lineno=2315, col_offset=12, end_lineno=2315, end_col_offset=18), Name(id='cache_dir', ctx=Load(), lineno=2316, col_offset=12, end_lineno=2316, end_col_offset=21)], lineno=2312, col_offset=8, end_lineno=2317, end_col_offset=9), lineno=2312, col_offset=8, end_lineno=2317, end_col_offset=9)], lineno=2311, col_offset=4, end_lineno=2317, end_col_offset=9), If(test=Name(id='verbose', ctx=Load(), lineno=2318, col_offset=7, end_lineno=2318, end_col_offset=14), body=[Expr(value=Call(func=Attribute(value=Name(id='LOGGER', ctx=Load(), lineno=2319, col_offset=8, end_lineno=2319, end_col_offset=14), attr='info', ctx=Load(), lineno=2319, col_offset=8, end_lineno=2319, end_col_offset=19), args=[Constant(value='done in %.2fs; outputs in %s', lineno=2319, col_offset=20, end_lineno=2319, end_col_offset=50), Name(id='duration_s', ctx=Load(), lineno=2319, col_offset=52, end_lineno=2319, end_col_offset=62), Name(id='OUT', ctx=Load(), lineno=2319, col_offset=64, end_lineno=2319, end_col_offset=67)], lineno=2319, col_offset=8, end_lineno=2319, end_col_offset=68), lineno=2319, col_offset=8, end_lineno=2319, end_col_offset=68)], lineno=2318, col_offset=4, end_lineno=2319, end_col_offset=68)], returns=Constant(value=None, lineno=2308, col_offset=5, end_lineno=2308, end_col_offset=9), lineno=2301, col_offset=0, end_lineno=2319, end_col_offset=68), FunctionDef(name='_finalize_run', args=arguments(args=[arg(arg='inputs', annotation=Name(id='RunInputs', ctx=Load(), lineno=2323, col_offset=12, end_lineno=2323, end_col_offset=21), lineno=2323, col_offset=4, end_lineno=2323, end_col_offset=21), arg(arg='results', annotation=Subscript(value=Name(id='Sequence', ctx=Load(), lineno=2324, col_offset=13, end_lineno=2324, end_col_offset=21), slice=Subscript(value=Name(id='tuple', ctx=Load(), lineno=2324, col_offset=22, end_lineno=2324, end_col_offset=27), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=2324, col_offset=28, end_lineno=2324, end_col_offset=31), Name(id='bool', ctx=Load(), lineno=2324, col_offset=33, end_lineno=2324, end_col_offset=37), Name(id='bool', ctx=Load(), lineno=2324, col_offset=39, end_lineno=2324, end_col_offset=43), Name(id='bool', ctx=Load(), lineno=2324, col_offset=45, end_lineno=2324, end_col_offset=49)], ctx=Load(), lineno=2324, col_offset=28, end_lineno=2324, end_col_offset=49), ctx=Load(), lineno=2324, col_offset=22, end_lineno=2324, end_col_offset=50), ctx=Load(), lineno=2324, col_offset=13, end_lineno=2324, end_col_offset=51), lineno=2324, col_offset=4, end_lineno=2324, end_col_offset=51), arg(arg='duration_s', annotation=Name(id='float', ctx=Load(), lineno=2325, col_offset=16, end_lineno=2325, end_col_offset=21), lineno=2325, col_offset=4, end_lineno=2325, end_col_offset=21), arg(arg='analysis', annotation=Subscript(value=Name(id='Mapping', ctx=Load(), lineno=2326, col_offset=14, end_lineno=2326, end_col_offset=21), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=2326, col_offset=22, end_lineno=2326, end_col_offset=25), Name(id='object', ctx=Load(), lineno=2326, col_offset=27, end_lineno=2326, end_col_offset=33)], ctx=Load(), lineno=2326, col_offset=22, end_lineno=2326, end_col_offset=33), ctx=Load(), lineno=2326, col_offset=14, end_lineno=2326, end_col_offset=34), lineno=2326, col_offset=4, end_lineno=2326, end_col_offset=34)]), body=[Expr(value=Call(func=Name(id='_log_run_summary', ctx=Load(), lineno=2328, col_offset=4, end_lineno=2328, end_col_offset=20), keywords=[keyword(arg='use_cache', value=Attribute(value=Name(id='inputs', ctx=Load(), lineno=2329, col_offset=18, end_lineno=2329, end_col_offset=24), attr='use_cache', ctx=Load(), lineno=2329, col_offset=18, end_lineno=2329, end_col_offset=34), lineno=2329, col_offset=8, end_lineno=2329, end_col_offset=34), keyword(arg='cache_dir', value=Attribute(value=Name(id='inputs', ctx=Load(), lineno=2330, col_offset=18, end_lineno=2330, end_col_offset=24), attr='cache_dir', ctx=Load(), lineno=2330, col_offset=18, end_lineno=2330, end_col_offset=34), lineno=2330, col_offset=8, end_lineno=2330, end_col_offset=34), keyword(arg='results', value=Name(id='results', ctx=Load(), lineno=2331, col_offset=16, end_lineno=2331, end_col_offset=23), lineno=2331, col_offset=8, end_lineno=2331, end_col_offset=23), keyword(arg='duration_s', value=Name(id='duration_s', ctx=Load(), lineno=2332, col_offset=19, end_lineno=2332, end_col_offset=29), lineno=2332, col_offset=8, end_lineno=2332, end_col_offset=29), keyword(arg='verbose', value=Attribute(value=Name(id='inputs', ctx=Load(), lineno=2333, col_offset=16, end_lineno=2333, end_col_offset=22), attr='verbose', ctx=Load(), lineno=2333, col_offset=16, end_lineno=2333, end_col_offset=30), lineno=2333, col_offset=8, end_lineno=2333, end_col_offset=30)], lineno=2328, col_offset=4, end_lineno=2334, end_col_offset=5), lineno=2328, col_offset=4, end_lineno=2334, end_col_offset=5), Assign(targets=[Name(id='cached', ctx=Store(), lineno=2336, col_offset=4, end_lineno=2336, end_col_offset=10)], value=Call(func=Name(id='sum', ctx=Load(), lineno=2336, col_offset=13, end_lineno=2336, end_col_offset=16), args=[GeneratorExp(elt=Constant(value=1, lineno=2336, col_offset=17, end_lineno=2336, end_col_offset=18), generators=[comprehension(target=Tuple(elts=[Name(id='_', ctx=Store(), lineno=2336, col_offset=23, end_lineno=2336, end_col_offset=24), Name(id='used_cache', ctx=Store(), lineno=2336, col_offset=26, end_lineno=2336, end_col_offset=36), Name(id='_', ctx=Store(), lineno=2336, col_offset=38, end_lineno=2336, end_col_offset=39), Name(id='_', ctx=Store(), lineno=2336, col_offset=41, end_lineno=2336, end_col_offset=42)], ctx=Store(), lineno=2336, col_offset=23, end_lineno=2336, end_col_offset=42), iter=Name(id='results', ctx=Load(), lineno=2336, col_offset=46, end_lineno=2336, end_col_offset=53), ifs=[Name(id='used_cache', ctx=Load(), lineno=2336, col_offset=57, end_lineno=2336, end_col_offset=67)], is_async=0)], lineno=2336, col_offset=16, end_lineno=2336, end_col_offset=68)], lineno=2336, col_offset=13, end_lineno=2336, end_col_offset=68), lineno=2336, col_offset=4, end_lineno=2336, end_col_offset=68), Assign(targets=[Name(id='built', ctx=Store(), lineno=2337, col_offset=4, end_lineno=2337, end_col_offset=9)], value=Call(func=Name(id='sum', ctx=Load(), lineno=2337, col_offset=12, end_lineno=2337, end_col_offset=15), args=[GeneratorExp(elt=Constant(value=1, lineno=2337, col_offset=16, end_lineno=2337, end_col_offset=17), generators=[comprehension(target=Tuple(elts=[Name(id='_', ctx=Store(), lineno=2337, col_offset=22, end_lineno=2337, end_col_offset=23), Name(id='used_cache', ctx=Store(), lineno=2337, col_offset=25, end_lineno=2337, end_col_offset=35), Name(id='_', ctx=Store(), lineno=2337, col_offset=37, end_lineno=2337, end_col_offset=38), Name(id='_', ctx=Store(), lineno=2337, col_offset=40, end_lineno=2337, end_col_offset=41)], ctx=Store(), lineno=2337, col_offset=22, end_lineno=2337, end_col_offset=41), iter=Name(id='results', ctx=Load(), lineno=2337, col_offset=45, end_lineno=2337, end_col_offset=52), ifs=[UnaryOp(op=Not(), operand=Name(id='used_cache', ctx=Load(), lineno=2337, col_offset=60, end_lineno=2337, end_col_offset=70), lineno=2337, col_offset=56, end_lineno=2337, end_col_offset=70)], is_async=0)], lineno=2337, col_offset=15, end_lineno=2337, end_col_offset=71)], lineno=2337, col_offset=12, end_lineno=2337, end_col_offset=71), lineno=2337, col_offset=4, end_lineno=2337, end_col_offset=71), Return(value=Dict(keys=[Constant(value='packageCount', lineno=2340, col_offset=8, end_lineno=2340, end_col_offset=22), Constant(value='cachedPackages', lineno=2341, col_offset=8, end_lineno=2341, end_col_offset=24), Constant(value='builtPackages', lineno=2342, col_offset=8, end_lineno=2342, end_col_offset=23), Constant(value='useCache', lineno=2343, col_offset=8, end_lineno=2343, end_col_offset=18), Constant(value='cacheDir', lineno=2344, col_offset=8, end_lineno=2344, end_col_offset=18), Constant(value='durationSeconds', lineno=2345, col_offset=8, end_lineno=2345, end_col_offset=25), Constant(value='cycleEnumerationSkipped', lineno=2346, col_offset=8, end_lineno=2346, end_col_offset=33)], values=[Call(func=Name(id='len', ctx=Load(), lineno=2340, col_offset=24, end_lineno=2340, end_col_offset=27), args=[Attribute(value=Name(id='inputs', ctx=Load(), lineno=2340, col_offset=28, end_lineno=2340, end_col_offset=34), attr='packages', ctx=Load(), lineno=2340, col_offset=28, end_lineno=2340, end_col_offset=43)], lineno=2340, col_offset=24, end_lineno=2340, end_col_offset=44), Name(id='cached', ctx=Load(), lineno=2341, col_offset=26, end_lineno=2341, end_col_offset=32), Name(id='built', ctx=Load(), lineno=2342, col_offset=25, end_lineno=2342, end_col_offset=30), Attribute(value=Name(id='inputs', ctx=Load(), lineno=2343, col_offset=20, end_lineno=2343, end_col_offset=26), attr='use_cache', ctx=Load(), lineno=2343, col_offset=20, end_lineno=2343, end_col_offset=36), Call(func=Name(id='str', ctx=Load(), lineno=2344, col_offset=20, end_lineno=2344, end_col_offset=23), args=[Attribute(value=Name(id='inputs', ctx=Load(), lineno=2344, col_offset=24, end_lineno=2344, end_col_offset=30), attr='cache_dir', ctx=Load(), lineno=2344, col_offset=24, end_lineno=2344, end_col_offset=40)], lineno=2344, col_offset=20, end_lineno=2344, end_col_offset=41), Name(id='duration_s', ctx=Load(), lineno=2345, col_offset=27, end_lineno=2345, end_col_offset=37), Call(func=Name(id='bool', ctx=Load(), lineno=2346, col_offset=35, end_lineno=2346, end_col_offset=39), args=[Call(func=Attribute(value=Name(id='analysis', ctx=Load(), lineno=2346, col_offset=40, end_lineno=2346, end_col_offset=48), attr='get', ctx=Load(), lineno=2346, col_offset=40, end_lineno=2346, end_col_offset=52), args=[Constant(value='cycle_enumeration_skipped', lineno=2346, col_offset=53, end_lineno=2346, end_col_offset=80), Constant(value=False, lineno=2346, col_offset=82, end_lineno=2346, end_col_offset=87)], lineno=2346, col_offset=40, end_lineno=2346, end_col_offset=88)], lineno=2346, col_offset=35, end_lineno=2346, end_col_offset=89)], lineno=2339, col_offset=11, end_lineno=2347, end_col_offset=5), lineno=2339, col_offset=4, end_lineno=2347, end_col_offset=5)], returns=Subscript(value=Name(id='dict', ctx=Load(), lineno=2327, col_offset=5, end_lineno=2327, end_col_offset=9), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=2327, col_offset=10, end_lineno=2327, end_col_offset=13), Name(id='object', ctx=Load(), lineno=2327, col_offset=15, end_lineno=2327, end_col_offset=21)], ctx=Load(), lineno=2327, col_offset=10, end_lineno=2327, end_col_offset=21), ctx=Load(), lineno=2327, col_offset=5, end_lineno=2327, end_col_offset=22), lineno=2322, col_offset=0, end_lineno=2347, end_col_offset=5), FunctionDef(name='_execute', args=arguments(args=[arg(arg='context', annotation=Name(id='_CommandContext', ctx=Load(), lineno=2350, col_offset=22, end_lineno=2350, end_col_offset=37), lineno=2350, col_offset=13, end_lineno=2350, end_col_offset=37)]), body=[Expr(value=Constant(value='Execute the graph build workflow and return summary metadata.\n\n    Parameters\n    ----------\n    context : _CommandContext\n        CLI command context containing parsed arguments and logging state.\n\n    Returns\n    -------\n    dict[str, object]\n        Summary metadata describing the run (packages processed, cache usage, duration).\n\n    Notes\n    -----\n    Exceptions raised by dependency validation, graph construction, or policy enforcement\n    propagate to the caller.\n\n    Raises\n    ------\n    GraphBuildError\n        Raised when global graph construction fails unexpectedly.\n    GraphPolicyError\n        Raised when graph policy violations are detected during analysis.\n    ValidationError\n        Raised when configuration validation fails (layers config, allowlist, etc.).\n    ', lineno=2351, col_offset=4, end_lineno=2376, end_col_offset=7), lineno=2351, col_offset=4, end_lineno=2376, end_col_offset=7), Assign(targets=[Name(id='args', ctx=Store(), lineno=2377, col_offset=4, end_lineno=2377, end_col_offset=8)], value=Attribute(value=Name(id='context', ctx=Load(), lineno=2377, col_offset=11, end_lineno=2377, end_col_offset=18), attr='args', ctx=Load(), lineno=2377, col_offset=11, end_lineno=2377, end_col_offset=23), lineno=2377, col_offset=4, end_lineno=2377, end_col_offset=23), Expr(value=Call(func=Name(id='_validate_runtime_dependencies', ctx=Load(), lineno=2378, col_offset=4, end_lineno=2378, end_col_offset=34), lineno=2378, col_offset=4, end_lineno=2378, end_col_offset=36), lineno=2378, col_offset=4, end_lineno=2378, end_col_offset=36), Assign(targets=[Name(id='inputs', ctx=Store(), lineno=2380, col_offset=4, end_lineno=2380, end_col_offset=10)], value=Call(func=Name(id='_prepare_run_inputs', ctx=Load(), lineno=2380, col_offset=13, end_lineno=2380, end_col_offset=32), args=[Name(id='args', ctx=Load(), lineno=2380, col_offset=33, end_lineno=2380, end_col_offset=37)], lineno=2380, col_offset=13, end_lineno=2380, end_col_offset=38), lineno=2380, col_offset=4, end_lineno=2380, end_col_offset=38), Assign(targets=[Name(id='build_start', ctx=Store(), lineno=2381, col_offset=4, end_lineno=2381, end_col_offset=15)], value=Call(func=Attribute(value=Name(id='time', ctx=Load(), lineno=2381, col_offset=18, end_lineno=2381, end_col_offset=22), attr='monotonic', ctx=Load(), lineno=2381, col_offset=18, end_lineno=2381, end_col_offset=32), lineno=2381, col_offset=18, end_lineno=2381, end_col_offset=34), lineno=2381, col_offset=4, end_lineno=2381, end_col_offset=34), Try(body=[Assign(targets=[Name(id='results', ctx=Store(), lineno=2384, col_offset=8, end_lineno=2384, end_col_offset=15)], value=Call(func=Name(id='_build_per_package_graphs', ctx=Load(), lineno=2384, col_offset=18, end_lineno=2384, end_col_offset=43), args=[Attribute(value=Name(id='inputs', ctx=Load(), lineno=2384, col_offset=44, end_lineno=2384, end_col_offset=50), attr='packages', ctx=Load(), lineno=2384, col_offset=44, end_lineno=2384, end_col_offset=59), Attribute(value=Name(id='inputs', ctx=Load(), lineno=2384, col_offset=61, end_lineno=2384, end_col_offset=67), attr='config', ctx=Load(), lineno=2384, col_offset=61, end_lineno=2384, end_col_offset=74), Attribute(value=Name(id='args', ctx=Load(), lineno=2384, col_offset=76, end_lineno=2384, end_col_offset=80), attr='max_workers', ctx=Load(), lineno=2384, col_offset=76, end_lineno=2384, end_col_offset=92)], lineno=2384, col_offset=18, end_lineno=2384, end_col_offset=93), lineno=2384, col_offset=8, end_lineno=2384, end_col_offset=93), Expr(value=Call(func=Name(id='_report_package_failures', ctx=Load(), lineno=2385, col_offset=8, end_lineno=2385, end_col_offset=32), args=[Name(id='results', ctx=Load(), lineno=2385, col_offset=33, end_lineno=2385, end_col_offset=40)], lineno=2385, col_offset=8, end_lineno=2385, end_col_offset=41), lineno=2385, col_offset=8, end_lineno=2385, end_col_offset=41), Try(body=[Assign(targets=[Name(id='global_graph', ctx=Store(), lineno=2388, col_offset=12, end_lineno=2388, end_col_offset=24)], value=Call(func=Name(id='_build_global_graph', ctx=Load(), lineno=2388, col_offset=27, end_lineno=2388, end_col_offset=46), args=[Attribute(value=Name(id='args', ctx=Load(), lineno=2389, col_offset=16, end_lineno=2389, end_col_offset=20), attr='format', ctx=Load(), lineno=2389, col_offset=16, end_lineno=2389, end_col_offset=27), Call(func=Name(id='list', ctx=Load(), lineno=2390, col_offset=16, end_lineno=2390, end_col_offset=20), args=[Attribute(value=Name(id='inputs', ctx=Load(), lineno=2390, col_offset=21, end_lineno=2390, end_col_offset=27), attr='excludes', ctx=Load(), lineno=2390, col_offset=21, end_lineno=2390, end_col_offset=36)], lineno=2390, col_offset=16, end_lineno=2390, end_col_offset=37), Attribute(value=Name(id='args', ctx=Load(), lineno=2391, col_offset=16, end_lineno=2391, end_col_offset=20), attr='max_bacon', ctx=Load(), lineno=2391, col_offset=16, end_lineno=2391, end_col_offset=30)], lineno=2388, col_offset=27, end_lineno=2392, end_col_offset=13), lineno=2388, col_offset=12, end_lineno=2392, end_col_offset=13)], handlers=[ExceptHandler(type=Tuple(elts=[Name(id='GraphBuildError', ctx=Load(), lineno=2394, col_offset=12, end_lineno=2394, end_col_offset=27), Name(id='RuntimeError', ctx=Load(), lineno=2395, col_offset=12, end_lineno=2395, end_col_offset=24), Name(id='OSError', ctx=Load(), lineno=2396, col_offset=12, end_lineno=2396, end_col_offset=19)], ctx=Load(), lineno=2393, col_offset=15, end_lineno=2397, end_col_offset=9), name='exc', body=[Assign(targets=[Name(id='message', ctx=Store(), lineno=2398, col_offset=12, end_lineno=2398, end_col_offset=19)], value=Constant(value='Building global graph failed', lineno=2398, col_offset=22, end_lineno=2398, end_col_offset=52), lineno=2398, col_offset=12, end_lineno=2398, end_col_offset=52), Raise(exc=Call(func=Name(id='GraphBuildError', ctx=Load(), lineno=2399, col_offset=18, end_lineno=2399, end_col_offset=33), args=[Name(id='message', ctx=Load(), lineno=2399, col_offset=34, end_lineno=2399, end_col_offset=41)], lineno=2399, col_offset=18, end_lineno=2399, end_col_offset=42), cause=Name(id='exc', ctx=Load(), lineno=2399, col_offset=48, end_lineno=2399, end_col_offset=51), lineno=2399, col_offset=12, end_lineno=2399, end_col_offset=51)], lineno=2393, col_offset=8, end_lineno=2399, end_col_offset=51)], lineno=2387, col_offset=8, end_lineno=2399, end_col_offset=51), Assign(targets=[Name(id='layers', ctx=Store(), lineno=2401, col_offset=8, end_lineno=2401, end_col_offset=14)], value=Call(func=Name(id='_load_layers_config', ctx=Load(), lineno=2401, col_offset=17, end_lineno=2401, end_col_offset=36), args=[Attribute(value=Name(id='args', ctx=Load(), lineno=2401, col_offset=37, end_lineno=2401, end_col_offset=41), attr='layers', ctx=Load(), lineno=2401, col_offset=37, end_lineno=2401, end_col_offset=48)], lineno=2401, col_offset=17, end_lineno=2401, end_col_offset=49), lineno=2401, col_offset=8, end_lineno=2401, end_col_offset=49), Assign(targets=[Name(id='allow', ctx=Store(), lineno=2402, col_offset=8, end_lineno=2402, end_col_offset=13)], value=Call(func=Name(id='_load_allowlist', ctx=Load(), lineno=2402, col_offset=16, end_lineno=2402, end_col_offset=31), args=[Attribute(value=Name(id='args', ctx=Load(), lineno=2402, col_offset=32, end_lineno=2402, end_col_offset=36), attr='allowlist', ctx=Load(), lineno=2402, col_offset=32, end_lineno=2402, end_col_offset=46)], lineno=2402, col_offset=16, end_lineno=2402, end_col_offset=47), lineno=2402, col_offset=8, end_lineno=2402, end_col_offset=47), Assign(targets=[Name(id='analysis', ctx=Store(), lineno=2404, col_offset=8, end_lineno=2404, end_col_offset=16)], value=Call(func=Name(id='analyze_graph', ctx=Load(), lineno=2404, col_offset=19, end_lineno=2404, end_col_offset=32), args=[Name(id='global_graph', ctx=Load(), lineno=2404, col_offset=33, end_lineno=2404, end_col_offset=45), Name(id='layers', ctx=Load(), lineno=2404, col_offset=47, end_lineno=2404, end_col_offset=53)], lineno=2404, col_offset=19, end_lineno=2404, end_col_offset=54), lineno=2404, col_offset=8, end_lineno=2404, end_col_offset=54), Expr(value=Call(func=Name(id='_write_global_artifacts', ctx=Load(), lineno=2405, col_offset=8, end_lineno=2405, end_col_offset=31), args=[Name(id='global_graph', ctx=Load(), lineno=2405, col_offset=32, end_lineno=2405, end_col_offset=44), Name(id='layers', ctx=Load(), lineno=2405, col_offset=46, end_lineno=2405, end_col_offset=52), Attribute(value=Name(id='args', ctx=Load(), lineno=2405, col_offset=54, end_lineno=2405, end_col_offset=58), attr='format', ctx=Load(), lineno=2405, col_offset=54, end_lineno=2405, end_col_offset=65), Name(id='analysis', ctx=Load(), lineno=2405, col_offset=67, end_lineno=2405, end_col_offset=75)], lineno=2405, col_offset=8, end_lineno=2405, end_col_offset=76), lineno=2405, col_offset=8, end_lineno=2405, end_col_offset=76), Expr(value=Call(func=Name(id='enforce_policy', ctx=Load(), lineno=2407, col_offset=8, end_lineno=2407, end_col_offset=22), args=[Name(id='analysis', ctx=Load(), lineno=2408, col_offset=12, end_lineno=2408, end_col_offset=20), Name(id='allow', ctx=Load(), lineno=2409, col_offset=12, end_lineno=2409, end_col_offset=17)], keywords=[keyword(arg='fail_cycles', value=Attribute(value=Name(id='args', ctx=Load(), lineno=2410, col_offset=24, end_lineno=2410, end_col_offset=28), attr='fail_on_cycles', ctx=Load(), lineno=2410, col_offset=24, end_lineno=2410, end_col_offset=43), lineno=2410, col_offset=12, end_lineno=2410, end_col_offset=43), keyword(arg='fail_layers', value=Attribute(value=Name(id='args', ctx=Load(), lineno=2411, col_offset=24, end_lineno=2411, end_col_offset=28), attr='fail_on_layer_violations', ctx=Load(), lineno=2411, col_offset=24, end_lineno=2411, end_col_offset=53), lineno=2411, col_offset=12, end_lineno=2411, end_col_offset=53)], lineno=2407, col_offset=8, end_lineno=2412, end_col_offset=9), lineno=2407, col_offset=8, end_lineno=2412, end_col_offset=9)], handlers=[ExceptHandler(type=Tuple(elts=[Name(id='GraphPolicyError', ctx=Load(), lineno=2413, col_offset=12, end_lineno=2413, end_col_offset=28), Name(id='ValidationError', ctx=Load(), lineno=2413, col_offset=30, end_lineno=2413, end_col_offset=45), Name(id='GraphBuildError', ctx=Load(), lineno=2413, col_offset=47, end_lineno=2413, end_col_offset=62)], ctx=Load(), lineno=2413, col_offset=11, end_lineno=2413, end_col_offset=63), body=[Raise(lineno=2414, col_offset=8, end_lineno=2414, end_col_offset=13)], lineno=2413, col_offset=4, end_lineno=2414, end_col_offset=13), ExceptHandler(type=Name(id='Exception', ctx=Load(), lineno=2415, col_offset=11, end_lineno=2415, end_col_offset=20), name='exc', body=[Assign(targets=[Name(id='message', ctx=Store(), lineno=2416, col_offset=8, end_lineno=2416, end_col_offset=15)], value=Constant(value='Unexpected failure while building documentation graphs', lineno=2416, col_offset=18, end_lineno=2416, end_col_offset=74), lineno=2416, col_offset=8, end_lineno=2416, end_col_offset=74), Raise(exc=Call(func=Name(id='GraphBuildError', ctx=Load(), lineno=2417, col_offset=14, end_lineno=2417, end_col_offset=29), args=[Name(id='message', ctx=Load(), lineno=2417, col_offset=30, end_lineno=2417, end_col_offset=37)], lineno=2417, col_offset=14, end_lineno=2417, end_col_offset=38), cause=Name(id='exc', ctx=Load(), lineno=2417, col_offset=44, end_lineno=2417, end_col_offset=47), lineno=2417, col_offset=8, end_lineno=2417, end_col_offset=47)], lineno=2415, col_offset=4, end_lineno=2417, end_col_offset=47)], lineno=2383, col_offset=4, end_lineno=2417, end_col_offset=47), Assign(targets=[Name(id='duration', ctx=Store(), lineno=2419, col_offset=4, end_lineno=2419, end_col_offset=12)], value=BinOp(left=Call(func=Attribute(value=Name(id='time', ctx=Load(), lineno=2419, col_offset=15, end_lineno=2419, end_col_offset=19), attr='monotonic', ctx=Load(), lineno=2419, col_offset=15, end_lineno=2419, end_col_offset=29), lineno=2419, col_offset=15, end_lineno=2419, end_col_offset=31), op=Sub(), right=Name(id='build_start', ctx=Load(), lineno=2419, col_offset=34, end_lineno=2419, end_col_offset=45), lineno=2419, col_offset=15, end_lineno=2419, end_col_offset=45), lineno=2419, col_offset=4, end_lineno=2419, end_col_offset=45), Return(value=Call(func=Name(id='_finalize_run', ctx=Load(), lineno=2421, col_offset=11, end_lineno=2421, end_col_offset=24), args=[Name(id='inputs', ctx=Load(), lineno=2421, col_offset=25, end_lineno=2421, end_col_offset=31), Name(id='results', ctx=Load(), lineno=2421, col_offset=33, end_lineno=2421, end_col_offset=40), Name(id='duration', ctx=Load(), lineno=2421, col_offset=42, end_lineno=2421, end_col_offset=50), Name(id='analysis', ctx=Load(), lineno=2421, col_offset=52, end_lineno=2421, end_col_offset=60)], lineno=2421, col_offset=11, end_lineno=2421, end_col_offset=61), lineno=2421, col_offset=4, end_lineno=2421, end_col_offset=61)], returns=Subscript(value=Name(id='dict', ctx=Load(), lineno=2350, col_offset=42, end_lineno=2350, end_col_offset=46), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=2350, col_offset=47, end_lineno=2350, end_col_offset=50), Name(id='object', ctx=Load(), lineno=2350, col_offset=52, end_lineno=2350, end_col_offset=58)], ctx=Load(), lineno=2350, col_offset=47, end_lineno=2350, end_col_offset=58), ctx=Load(), lineno=2350, col_offset=42, end_lineno=2350, end_col_offset=59), lineno=2350, col_offset=0, end_lineno=2421, end_col_offset=61), FunctionDef(name='main', args=arguments(args=[arg(arg='argv', annotation=BinOp(left=Subscript(value=Name(id='Sequence', ctx=Load(), lineno=2424, col_offset=15, end_lineno=2424, end_col_offset=23), slice=Name(id='str', ctx=Load(), lineno=2424, col_offset=24, end_lineno=2424, end_col_offset=27), ctx=Load(), lineno=2424, col_offset=15, end_lineno=2424, end_col_offset=28), op=BitOr(), right=Constant(value=None, lineno=2424, col_offset=31, end_lineno=2424, end_col_offset=35), lineno=2424, col_offset=15, end_lineno=2424, end_col_offset=35), lineno=2424, col_offset=9, end_lineno=2424, end_col_offset=35)], defaults=[Constant(value=None, lineno=2424, col_offset=38, end_lineno=2424, end_col_offset=42)]), body=[Expr(value=Constant(value='Entry point for the documentation graphs CLI.\n\n    Parameters\n    ----------\n    argv : Sequence[str] | None, optional\n        Optional command-line arguments to parse instead of ``sys.argv``.\n\n    Returns\n    -------\n    int\n        Exit code compatible with CLI conventions (0 success, non-zero failure).\n    ', lineno=2425, col_offset=4, end_lineno=2436, end_col_offset=7), lineno=2425, col_offset=4, end_lineno=2436, end_col_offset=7), Assign(targets=[Name(id='args', ctx=Store(), lineno=2437, col_offset=4, end_lineno=2437, end_col_offset=8)], value=Call(func=Name(id='parse_args', ctx=Load(), lineno=2437, col_offset=11, end_lineno=2437, end_col_offset=21), args=[Name(id='argv', ctx=Load(), lineno=2437, col_offset=22, end_lineno=2437, end_col_offset=26)], lineno=2437, col_offset=11, end_lineno=2437, end_col_offset=27), lineno=2437, col_offset=4, end_lineno=2437, end_col_offset=27), If(test=UnaryOp(op=Not(), operand=Attribute(value=Call(func=Attribute(value=Name(id='logging', ctx=Load(), lineno=2439, col_offset=11, end_lineno=2439, end_col_offset=18), attr='getLogger', ctx=Load(), lineno=2439, col_offset=11, end_lineno=2439, end_col_offset=28), lineno=2439, col_offset=11, end_lineno=2439, end_col_offset=30), attr='handlers', ctx=Load(), lineno=2439, col_offset=11, end_lineno=2439, end_col_offset=39), lineno=2439, col_offset=7, end_lineno=2439, end_col_offset=39), body=[Assign(targets=[Name(id='log_level', ctx=Store(), lineno=2440, col_offset=8, end_lineno=2440, end_col_offset=17)], value=IfExp(test=Attribute(value=Name(id='args', ctx=Load(), lineno=2440, col_offset=36, end_lineno=2440, end_col_offset=40), attr='verbose', ctx=Load(), lineno=2440, col_offset=36, end_lineno=2440, end_col_offset=48), body=Attribute(value=Name(id='logging', ctx=Load(), lineno=2440, col_offset=20, end_lineno=2440, end_col_offset=27), attr='INFO', ctx=Load(), lineno=2440, col_offset=20, end_lineno=2440, end_col_offset=32), orelse=Attribute(value=Name(id='logging', ctx=Load(), lineno=2440, col_offset=54, end_lineno=2440, end_col_offset=61), attr='WARNING', ctx=Load(), lineno=2440, col_offset=54, end_lineno=2440, end_col_offset=69), lineno=2440, col_offset=20, end_lineno=2440, end_col_offset=69), lineno=2440, col_offset=8, end_lineno=2440, end_col_offset=69), Expr(value=Call(func=Name(id='setup_logging', ctx=Load(), lineno=2441, col_offset=8, end_lineno=2441, end_col_offset=21), keywords=[keyword(arg='level', value=Name(id='log_level', ctx=Load(), lineno=2441, col_offset=28, end_lineno=2441, end_col_offset=37), lineno=2441, col_offset=22, end_lineno=2441, end_col_offset=37)], lineno=2441, col_offset=8, end_lineno=2441, end_col_offset=38), lineno=2441, col_offset=8, end_lineno=2441, end_col_offset=38)], lineno=2439, col_offset=4, end_lineno=2441, end_col_offset=38), Assign(targets=[Name(id='context', ctx=Store(), lineno=2443, col_offset=4, end_lineno=2443, end_col_offset=11)], value=Call(func=Name(id='_start_command', ctx=Load(), lineno=2443, col_offset=14, end_lineno=2443, end_col_offset=28), args=[Name(id='args', ctx=Load(), lineno=2443, col_offset=29, end_lineno=2443, end_col_offset=33)], lineno=2443, col_offset=14, end_lineno=2443, end_col_offset=34), lineno=2443, col_offset=4, end_lineno=2443, end_col_offset=34), Try(body=[Assign(targets=[Name(id='summary', ctx=Store(), lineno=2446, col_offset=8, end_lineno=2446, end_col_offset=15)], value=Call(func=Name(id='_execute', ctx=Load(), lineno=2446, col_offset=18, end_lineno=2446, end_col_offset=26), args=[Name(id='context', ctx=Load(), lineno=2446, col_offset=27, end_lineno=2446, end_col_offset=34)], lineno=2446, col_offset=18, end_lineno=2446, end_col_offset=35), lineno=2446, col_offset=8, end_lineno=2446, end_col_offset=35)], handlers=[ExceptHandler(type=Name(id='GraphPolicyError', ctx=Load(), lineno=2447, col_offset=11, end_lineno=2447, end_col_offset=27), name='exc', body=[Assign(targets=[Name(id='detail', ctx=Store(), lineno=2448, col_offset=8, end_lineno=2448, end_col_offset=14)], value=BoolOp(op=Or(), values=[Call(func=Name(id='str', ctx=Load(), lineno=2448, col_offset=17, end_lineno=2448, end_col_offset=20), args=[Name(id='exc', ctx=Load(), lineno=2448, col_offset=21, end_lineno=2448, end_col_offset=24)], lineno=2448, col_offset=17, end_lineno=2448, end_col_offset=25), Constant(value='Graph policy violations detected', lineno=2448, col_offset=29, end_lineno=2448, end_col_offset=63)], lineno=2448, col_offset=17, end_lineno=2448, end_col_offset=63), lineno=2448, col_offset=8, end_lineno=2448, end_col_offset=63), Assign(targets=[Name(id='extras', ctx=Store(), lineno=2449, col_offset=8, end_lineno=2449, end_col_offset=14)], value=Dict(keys=[Constant(value='error_count', lineno=2449, col_offset=18, end_lineno=2449, end_col_offset=31), Constant(value='errors', lineno=2449, col_offset=50, end_lineno=2449, end_col_offset=58)], values=[Call(func=Name(id='len', ctx=Load(), lineno=2449, col_offset=33, end_lineno=2449, end_col_offset=36), args=[Attribute(value=Name(id='exc', ctx=Load(), lineno=2449, col_offset=37, end_lineno=2449, end_col_offset=40), attr='errors', ctx=Load(), lineno=2449, col_offset=37, end_lineno=2449, end_col_offset=47)], lineno=2449, col_offset=33, end_lineno=2449, end_col_offset=48), Attribute(value=Name(id='exc', ctx=Load(), lineno=2449, col_offset=60, end_lineno=2449, end_col_offset=63), attr='errors', ctx=Load(), lineno=2449, col_offset=60, end_lineno=2449, end_col_offset=70)], lineno=2449, col_offset=17, end_lineno=2449, end_col_offset=71), lineno=2449, col_offset=8, end_lineno=2449, end_col_offset=71), Return(value=Call(func=Name(id='_record_failure', ctx=Load(), lineno=2450, col_offset=15, end_lineno=2450, end_col_offset=30), args=[Name(id='context', ctx=Load(), lineno=2451, col_offset=12, end_lineno=2451, end_col_offset=19)], keywords=[keyword(arg='detail', value=Name(id='detail', ctx=Load(), lineno=2452, col_offset=19, end_lineno=2452, end_col_offset=25), lineno=2452, col_offset=12, end_lineno=2452, end_col_offset=25), keyword(arg='status', value=Constant(value=422, lineno=2453, col_offset=19, end_lineno=2453, end_col_offset=22), lineno=2453, col_offset=12, end_lineno=2453, end_col_offset=22), keyword(arg='error_status', value=Constant(value='violation', lineno=2454, col_offset=25, end_lineno=2454, end_col_offset=36), lineno=2454, col_offset=12, end_lineno=2454, end_col_offset=36), keyword(arg='options', value=Call(func=Name(id='_FailureOptions', ctx=Load(), lineno=2455, col_offset=20, end_lineno=2455, end_col_offset=35), keywords=[keyword(arg='extras', value=Name(id='extras', ctx=Load(), lineno=2455, col_offset=43, end_lineno=2455, end_col_offset=49), lineno=2455, col_offset=36, end_lineno=2455, end_col_offset=49), keyword(arg='exc', value=Name(id='exc', ctx=Load(), lineno=2455, col_offset=55, end_lineno=2455, end_col_offset=58), lineno=2455, col_offset=51, end_lineno=2455, end_col_offset=58)], lineno=2455, col_offset=20, end_lineno=2455, end_col_offset=59), lineno=2455, col_offset=12, end_lineno=2455, end_col_offset=59)], lineno=2450, col_offset=15, end_lineno=2456, end_col_offset=9), lineno=2450, col_offset=8, end_lineno=2456, end_col_offset=9)], lineno=2447, col_offset=4, end_lineno=2456, end_col_offset=9), ExceptHandler(type=Name(id='ValidationError', ctx=Load(), lineno=2457, col_offset=11, end_lineno=2457, end_col_offset=26), name='exc', body=[Assign(targets=[Name(id='detail', ctx=Store(), lineno=2458, col_offset=8, end_lineno=2458, end_col_offset=14)], value=BoolOp(op=Or(), values=[Call(func=Name(id='str', ctx=Load(), lineno=2458, col_offset=17, end_lineno=2458, end_col_offset=20), args=[Name(id='exc', ctx=Load(), lineno=2458, col_offset=21, end_lineno=2458, end_col_offset=24)], lineno=2458, col_offset=17, end_lineno=2458, end_col_offset=25), Constant(value='Invalid configuration', lineno=2458, col_offset=29, end_lineno=2458, end_col_offset=52)], lineno=2458, col_offset=17, end_lineno=2458, end_col_offset=52), lineno=2458, col_offset=8, end_lineno=2458, end_col_offset=52), Assign(targets=[Name(id='extras', ctx=Store(), lineno=2459, col_offset=8, end_lineno=2459, end_col_offset=14)], value=Dict(keys=[Constant(value='error', lineno=2459, col_offset=18, end_lineno=2459, end_col_offset=25)], values=[Name(id='detail', ctx=Load(), lineno=2459, col_offset=27, end_lineno=2459, end_col_offset=33)], lineno=2459, col_offset=17, end_lineno=2459, end_col_offset=34), lineno=2459, col_offset=8, end_lineno=2459, end_col_offset=34), Return(value=Call(func=Name(id='_record_failure', ctx=Load(), lineno=2460, col_offset=15, end_lineno=2460, end_col_offset=30), args=[Name(id='context', ctx=Load(), lineno=2461, col_offset=12, end_lineno=2461, end_col_offset=19)], keywords=[keyword(arg='detail', value=Name(id='detail', ctx=Load(), lineno=2462, col_offset=19, end_lineno=2462, end_col_offset=25), lineno=2462, col_offset=12, end_lineno=2462, end_col_offset=25), keyword(arg='status', value=Constant(value=422, lineno=2463, col_offset=19, end_lineno=2463, end_col_offset=22), lineno=2463, col_offset=12, end_lineno=2463, end_col_offset=22), keyword(arg='error_status', value=Constant(value='config', lineno=2464, col_offset=25, end_lineno=2464, end_col_offset=33), lineno=2464, col_offset=12, end_lineno=2464, end_col_offset=33), keyword(arg='options', value=Call(func=Name(id='_FailureOptions', ctx=Load(), lineno=2465, col_offset=20, end_lineno=2465, end_col_offset=35), keywords=[keyword(arg='extras', value=Name(id='extras', ctx=Load(), lineno=2465, col_offset=43, end_lineno=2465, end_col_offset=49), lineno=2465, col_offset=36, end_lineno=2465, end_col_offset=49), keyword(arg='exc', value=Name(id='exc', ctx=Load(), lineno=2465, col_offset=55, end_lineno=2465, end_col_offset=58), lineno=2465, col_offset=51, end_lineno=2465, end_col_offset=58)], lineno=2465, col_offset=20, end_lineno=2465, end_col_offset=59), lineno=2465, col_offset=12, end_lineno=2465, end_col_offset=59)], lineno=2460, col_offset=15, end_lineno=2466, end_col_offset=9), lineno=2460, col_offset=8, end_lineno=2466, end_col_offset=9)], lineno=2457, col_offset=4, end_lineno=2466, end_col_offset=9), ExceptHandler(type=Name(id='GraphBuildError', ctx=Load(), lineno=2467, col_offset=11, end_lineno=2467, end_col_offset=26), name='exc', body=[Assign(targets=[Name(id='detail', ctx=Store(), lineno=2468, col_offset=8, end_lineno=2468, end_col_offset=14)], value=BoolOp(op=Or(), values=[Call(func=Name(id='str', ctx=Load(), lineno=2468, col_offset=17, end_lineno=2468, end_col_offset=20), args=[Name(id='exc', ctx=Load(), lineno=2468, col_offset=21, end_lineno=2468, end_col_offset=24)], lineno=2468, col_offset=17, end_lineno=2468, end_col_offset=25), Constant(value='Graph build failed', lineno=2468, col_offset=29, end_lineno=2468, end_col_offset=49)], lineno=2468, col_offset=17, end_lineno=2468, end_col_offset=49), lineno=2468, col_offset=8, end_lineno=2468, end_col_offset=49), Assign(targets=[Name(id='extras', ctx=Store(), lineno=2469, col_offset=8, end_lineno=2469, end_col_offset=14)], value=Dict(keys=[Constant(value='error', lineno=2469, col_offset=18, end_lineno=2469, end_col_offset=25)], values=[Name(id='detail', ctx=Load(), lineno=2469, col_offset=27, end_lineno=2469, end_col_offset=33)], lineno=2469, col_offset=17, end_lineno=2469, end_col_offset=34), lineno=2469, col_offset=8, end_lineno=2469, end_col_offset=34), Return(value=Call(func=Name(id='_record_failure', ctx=Load(), lineno=2470, col_offset=15, end_lineno=2470, end_col_offset=30), args=[Name(id='context', ctx=Load(), lineno=2471, col_offset=12, end_lineno=2471, end_col_offset=19)], keywords=[keyword(arg='detail', value=Name(id='detail', ctx=Load(), lineno=2472, col_offset=19, end_lineno=2472, end_col_offset=25), lineno=2472, col_offset=12, end_lineno=2472, end_col_offset=25), keyword(arg='status', value=Constant(value=500, lineno=2473, col_offset=19, end_lineno=2473, end_col_offset=22), lineno=2473, col_offset=12, end_lineno=2473, end_col_offset=22), keyword(arg='error_status', value=Constant(value='error', lineno=2474, col_offset=25, end_lineno=2474, end_col_offset=32), lineno=2474, col_offset=12, end_lineno=2474, end_col_offset=32), keyword(arg='options', value=Call(func=Name(id='_FailureOptions', ctx=Load(), lineno=2475, col_offset=20, end_lineno=2475, end_col_offset=35), keywords=[keyword(arg='extras', value=Name(id='extras', ctx=Load(), lineno=2475, col_offset=43, end_lineno=2475, end_col_offset=49), lineno=2475, col_offset=36, end_lineno=2475, end_col_offset=49), keyword(arg='exc', value=Name(id='exc', ctx=Load(), lineno=2475, col_offset=55, end_lineno=2475, end_col_offset=58), lineno=2475, col_offset=51, end_lineno=2475, end_col_offset=58)], lineno=2475, col_offset=20, end_lineno=2475, end_col_offset=59), lineno=2475, col_offset=12, end_lineno=2475, end_col_offset=59)], lineno=2470, col_offset=15, end_lineno=2476, end_col_offset=9), lineno=2470, col_offset=8, end_lineno=2476, end_col_offset=9)], lineno=2467, col_offset=4, end_lineno=2476, end_col_offset=9)], lineno=2445, col_offset=4, end_lineno=2476, end_col_offset=9), Return(value=Call(func=Name(id='_finish_success', ctx=Load(), lineno=2478, col_offset=11, end_lineno=2478, end_col_offset=26), args=[Name(id='context', ctx=Load(), lineno=2478, col_offset=27, end_lineno=2478, end_col_offset=34), Name(id='summary', ctx=Load(), lineno=2478, col_offset=36, end_lineno=2478, end_col_offset=43)], lineno=2478, col_offset=11, end_lineno=2478, end_col_offset=44), lineno=2478, col_offset=4, end_lineno=2478, end_col_offset=44)], returns=Name(id='int', ctx=Load(), lineno=2424, col_offset=47, end_lineno=2424, end_col_offset=50), lineno=2424, col_offset=0, end_lineno=2478, end_col_offset=44), If(test=Compare(left=Name(id='__name__', ctx=Load(), lineno=2481, col_offset=3, end_lineno=2481, end_col_offset=11), ops=[Eq()], comparators=[Constant(value='__main__', lineno=2481, col_offset=15, end_lineno=2481, end_col_offset=25)], lineno=2481, col_offset=3, end_lineno=2481, end_col_offset=25), body=[Expr(value=Call(func=Attribute(value=Name(id='sys', ctx=Load(), lineno=2482, col_offset=4, end_lineno=2482, end_col_offset=7), attr='exit', ctx=Load(), lineno=2482, col_offset=4, end_lineno=2482, end_col_offset=12), args=[Call(func=Name(id='main', ctx=Load(), lineno=2482, col_offset=13, end_lineno=2482, end_col_offset=17), lineno=2482, col_offset=13, end_lineno=2482, end_col_offset=19)], lineno=2482, col_offset=4, end_lineno=2482, end_col_offset=20), lineno=2482, col_offset=4, end_lineno=2482, end_col_offset=20)], lineno=2481, col_offset=0, end_lineno=2482, end_col_offset=20)])
Module(body=[Expr(value=Constant(value='Git history adapter for blame and log operations.\n\nProvides git blame and commit history using GitPython via GitClient.\nThis replaces subprocess-based Git operations with typed Python APIs for\nbetter performance (50-80ms latency reduction) and reliability.\n', lineno=1, col_offset=0, end_lineno=6, end_col_offset=3), lineno=1, col_offset=0, end_lineno=6, end_col_offset=3), ImportFrom(module='__future__', names=[alias(name='annotations', lineno=8, col_offset=23, end_lineno=8, end_col_offset=34)], level=0, lineno=8, col_offset=0, end_lineno=8, end_col_offset=34), ImportFrom(module='typing', names=[alias(name='TYPE_CHECKING', lineno=10, col_offset=19, end_lineno=10, end_col_offset=32)], level=0, lineno=10, col_offset=0, end_lineno=10, end_col_offset=32), Import(names=[alias(name='git.exc', lineno=12, col_offset=7, end_lineno=12, end_col_offset=14)], lineno=12, col_offset=0, end_lineno=12, end_col_offset=14), ImportFrom(module='codeintel_rev.errors', names=[alias(name='GitOperationError', lineno=14, col_offset=33, end_lineno=14, end_col_offset=50), alias(name='PathNotFoundError', lineno=14, col_offset=52, end_lineno=14, end_col_offset=69)], level=0, lineno=14, col_offset=0, end_lineno=14, end_col_offset=69), ImportFrom(module='codeintel_rev.io.path_utils', names=[alias(name='resolve_within_repo', lineno=15, col_offset=40, end_lineno=15, end_col_offset=59)], level=0, lineno=15, col_offset=0, end_lineno=15, end_col_offset=59), ImportFrom(module='kgfoundry_common.logging', names=[alias(name='get_logger', lineno=16, col_offset=37, end_lineno=16, end_col_offset=47)], level=0, lineno=16, col_offset=0, end_lineno=16, end_col_offset=47), If(test=Name(id='TYPE_CHECKING', ctx=Load(), lineno=18, col_offset=3, end_lineno=18, end_col_offset=16), body=[ImportFrom(module='codeintel_rev.app.config_context', names=[alias(name='ApplicationContext', lineno=19, col_offset=49, end_lineno=19, end_col_offset=67)], level=0, lineno=19, col_offset=4, end_lineno=19, end_col_offset=67)], lineno=18, col_offset=0, end_lineno=19, end_col_offset=67), Assign(targets=[Name(id='LOGGER', ctx=Store(), lineno=21, col_offset=0, end_lineno=21, end_col_offset=6)], value=Call(func=Name(id='get_logger', ctx=Load(), lineno=21, col_offset=9, end_lineno=21, end_col_offset=19), args=[Name(id='__name__', ctx=Load(), lineno=21, col_offset=20, end_lineno=21, end_col_offset=28)], lineno=21, col_offset=9, end_lineno=21, end_col_offset=29), lineno=21, col_offset=0, end_lineno=21, end_col_offset=29), AsyncFunctionDef(name='blame_range', args=arguments(args=[arg(arg='context', annotation=Name(id='ApplicationContext', ctx=Load(), lineno=25, col_offset=13, end_lineno=25, end_col_offset=31), lineno=25, col_offset=4, end_lineno=25, end_col_offset=31), arg(arg='path', annotation=Name(id='str', ctx=Load(), lineno=26, col_offset=10, end_lineno=26, end_col_offset=13), lineno=26, col_offset=4, end_lineno=26, end_col_offset=13), arg(arg='start_line', annotation=Name(id='int', ctx=Load(), lineno=27, col_offset=16, end_lineno=27, end_col_offset=19), lineno=27, col_offset=4, end_lineno=27, end_col_offset=19), arg(arg='end_line', annotation=Name(id='int', ctx=Load(), lineno=28, col_offset=14, end_lineno=28, end_col_offset=17), lineno=28, col_offset=4, end_lineno=28, end_col_offset=17)]), body=[Expr(value=Constant(value='Get git blame for line range using GitPython (async).\n\n    Uses AsyncGitClient for typed Git operations, providing structured data returns\n    without subprocess overhead. This is faster and more reliable than parsing\n    git blame porcelain output. The async implementation enables concurrent Git\n    operations without blocking the event loop.\n\n    Parameters\n    ----------\n    context : ApplicationContext\n        Application context containing GitClient and repo root.\n    path : str\n        File path relative to repo root.\n    start_line : int\n        Start line (1-indexed, inclusive).\n    end_line : int\n        End line (1-indexed, inclusive).\n\n    Returns\n    -------\n    dict\n        Dictionary with "blame" key containing list of GitBlameEntry dicts.\n\n    Raises\n    ------\n    GitOperationError\n        If Git blame operation fails. This function calls ``resolve_within_repo``\n        which may raise ``PathOutsideRepositoryError``. If the requested path\n        does not exist, ``PathNotFoundError`` is raised.\n    PathNotFoundError\n        If the requested file path does not exist within the repository.\n\n    Examples\n    --------\n    >>> result = blame_range(context, "README.md", 1, 10)\n    >>> isinstance(result["blame"], list)\n    True\n    >>> entry = result["blame"][0]\n    >>> "line" in entry and "author" in entry\n    True\n\n    Notes\n    -----\n    Async Pattern:\n    - Uses AsyncGitClient which wraps GitClient operations in asyncio.to_thread.\n    - This prevents blocking the event loop and enables concurrent Git operations.\n    ', lineno=30, col_offset=4, end_lineno=76, end_col_offset=7), lineno=30, col_offset=4, end_lineno=76, end_col_offset=7), Assign(targets=[Name(id='repo_root', ctx=Store(), lineno=77, col_offset=4, end_lineno=77, end_col_offset=13)], value=Attribute(value=Attribute(value=Name(id='context', ctx=Load(), lineno=77, col_offset=16, end_lineno=77, end_col_offset=23), attr='paths', ctx=Load(), lineno=77, col_offset=16, end_lineno=77, end_col_offset=29), attr='repo_root', ctx=Load(), lineno=77, col_offset=16, end_lineno=77, end_col_offset=39), lineno=77, col_offset=4, end_lineno=77, end_col_offset=39), Try(body=[Assign(targets=[Name(id='file_path', ctx=Store(), lineno=80, col_offset=8, end_lineno=80, end_col_offset=17)], value=Call(func=Name(id='resolve_within_repo', ctx=Load(), lineno=80, col_offset=20, end_lineno=80, end_col_offset=39), args=[Name(id='repo_root', ctx=Load(), lineno=80, col_offset=40, end_lineno=80, end_col_offset=49), Name(id='path', ctx=Load(), lineno=80, col_offset=51, end_lineno=80, end_col_offset=55)], keywords=[keyword(arg='allow_nonexistent', value=Constant(value=False, lineno=80, col_offset=75, end_lineno=80, end_col_offset=80), lineno=80, col_offset=57, end_lineno=80, end_col_offset=80)], lineno=80, col_offset=20, end_lineno=80, end_col_offset=81), lineno=80, col_offset=8, end_lineno=80, end_col_offset=81)], handlers=[ExceptHandler(type=Name(id='FileNotFoundError', ctx=Load(), lineno=81, col_offset=11, end_lineno=81, end_col_offset=28), name='exc', body=[Assign(targets=[Name(id='error_msg', ctx=Store(), lineno=82, col_offset=8, end_lineno=82, end_col_offset=17)], value=JoinedStr(values=[Constant(value='Path not found: ', lineno=82, col_offset=22, end_lineno=82, end_col_offset=38), FormattedValue(value=Name(id='path', ctx=Load(), lineno=82, col_offset=39, end_lineno=82, end_col_offset=43), conversion=-1, lineno=82, col_offset=38, end_lineno=82, end_col_offset=44)], lineno=82, col_offset=20, end_lineno=82, end_col_offset=45), lineno=82, col_offset=8, end_lineno=82, end_col_offset=45), Raise(exc=Call(func=Name(id='PathNotFoundError', ctx=Load(), lineno=83, col_offset=14, end_lineno=83, end_col_offset=31), args=[Name(id='error_msg', ctx=Load(), lineno=83, col_offset=32, end_lineno=83, end_col_offset=41)], keywords=[keyword(arg='path', value=Name(id='path', ctx=Load(), lineno=83, col_offset=48, end_lineno=83, end_col_offset=52), lineno=83, col_offset=43, end_lineno=83, end_col_offset=52), keyword(arg='cause', value=Name(id='exc', ctx=Load(), lineno=83, col_offset=60, end_lineno=83, end_col_offset=63), lineno=83, col_offset=54, end_lineno=83, end_col_offset=63)], lineno=83, col_offset=14, end_lineno=83, end_col_offset=64), cause=Name(id='exc', ctx=Load(), lineno=83, col_offset=70, end_lineno=83, end_col_offset=73), lineno=83, col_offset=8, end_lineno=83, end_col_offset=73)], lineno=81, col_offset=4, end_lineno=83, end_col_offset=73)], lineno=79, col_offset=4, end_lineno=83, end_col_offset=73), Assign(targets=[Name(id='relative_path', ctx=Store(), lineno=86, col_offset=4, end_lineno=86, end_col_offset=17)], value=Call(func=Name(id='str', ctx=Load(), lineno=86, col_offset=20, end_lineno=86, end_col_offset=23), args=[Call(func=Attribute(value=Name(id='file_path', ctx=Load(), lineno=86, col_offset=24, end_lineno=86, end_col_offset=33), attr='relative_to', ctx=Load(), lineno=86, col_offset=24, end_lineno=86, end_col_offset=45), args=[Name(id='repo_root', ctx=Load(), lineno=86, col_offset=46, end_lineno=86, end_col_offset=55)], lineno=86, col_offset=24, end_lineno=86, end_col_offset=56)], lineno=86, col_offset=20, end_lineno=86, end_col_offset=57), lineno=86, col_offset=4, end_lineno=86, end_col_offset=57), Expr(value=Call(func=Attribute(value=Name(id='LOGGER', ctx=Load(), lineno=88, col_offset=4, end_lineno=88, end_col_offset=10), attr='debug', ctx=Load(), lineno=88, col_offset=4, end_lineno=88, end_col_offset=16), args=[Constant(value='Getting git blame (async)', lineno=89, col_offset=8, end_lineno=89, end_col_offset=35)], keywords=[keyword(arg='extra', value=Dict(keys=[Constant(value='path', lineno=90, col_offset=15, end_lineno=90, end_col_offset=21), Constant(value='start_line', lineno=90, col_offset=38, end_lineno=90, end_col_offset=50), Constant(value='end_line', lineno=90, col_offset=64, end_lineno=90, end_col_offset=74)], values=[Name(id='relative_path', ctx=Load(), lineno=90, col_offset=23, end_lineno=90, end_col_offset=36), Name(id='start_line', ctx=Load(), lineno=90, col_offset=52, end_lineno=90, end_col_offset=62), Name(id='end_line', ctx=Load(), lineno=90, col_offset=76, end_lineno=90, end_col_offset=84)], lineno=90, col_offset=14, end_lineno=90, end_col_offset=85), lineno=90, col_offset=8, end_lineno=90, end_col_offset=85)], lineno=88, col_offset=4, end_lineno=91, end_col_offset=5), lineno=88, col_offset=4, end_lineno=91, end_col_offset=5), Try(body=[Assign(targets=[Name(id='entries', ctx=Store(), lineno=94, col_offset=8, end_lineno=94, end_col_offset=15)], value=Await(value=Call(func=Attribute(value=Attribute(value=Name(id='context', ctx=Load(), lineno=94, col_offset=24, end_lineno=94, end_col_offset=31), attr='async_git_client', ctx=Load(), lineno=94, col_offset=24, end_lineno=94, end_col_offset=48), attr='blame_range', ctx=Load(), lineno=94, col_offset=24, end_lineno=94, end_col_offset=60), keywords=[keyword(arg='path', value=Name(id='relative_path', ctx=Load(), lineno=95, col_offset=17, end_lineno=95, end_col_offset=30), lineno=95, col_offset=12, end_lineno=95, end_col_offset=30), keyword(arg='start_line', value=Name(id='start_line', ctx=Load(), lineno=96, col_offset=23, end_lineno=96, end_col_offset=33), lineno=96, col_offset=12, end_lineno=96, end_col_offset=33), keyword(arg='end_line', value=Name(id='end_line', ctx=Load(), lineno=97, col_offset=21, end_lineno=97, end_col_offset=29), lineno=97, col_offset=12, end_lineno=97, end_col_offset=29)], lineno=94, col_offset=24, end_lineno=98, end_col_offset=9), lineno=94, col_offset=18, end_lineno=98, end_col_offset=9), lineno=94, col_offset=8, end_lineno=98, end_col_offset=9)], handlers=[ExceptHandler(type=Attribute(value=Attribute(value=Name(id='git', ctx=Load(), lineno=99, col_offset=11, end_lineno=99, end_col_offset=14), attr='exc', ctx=Load(), lineno=99, col_offset=11, end_lineno=99, end_col_offset=18), attr='GitCommandError', ctx=Load(), lineno=99, col_offset=11, end_lineno=99, end_col_offset=34), name='exc', body=[Assign(targets=[Name(id='error_msg', ctx=Store(), lineno=100, col_offset=8, end_lineno=100, end_col_offset=17)], value=Constant(value='Git blame failed', lineno=100, col_offset=20, end_lineno=100, end_col_offset=38), lineno=100, col_offset=8, end_lineno=100, end_col_offset=38), Raise(exc=Call(func=Name(id='GitOperationError', ctx=Load(), lineno=101, col_offset=14, end_lineno=101, end_col_offset=31), args=[Name(id='error_msg', ctx=Load(), lineno=102, col_offset=12, end_lineno=102, end_col_offset=21)], keywords=[keyword(arg='path', value=Name(id='relative_path', ctx=Load(), lineno=103, col_offset=17, end_lineno=103, end_col_offset=30), lineno=103, col_offset=12, end_lineno=103, end_col_offset=30), keyword(arg='git_command', value=Constant(value='blame', lineno=104, col_offset=24, end_lineno=104, end_col_offset=31), lineno=104, col_offset=12, end_lineno=104, end_col_offset=31)], lineno=101, col_offset=14, end_lineno=105, end_col_offset=9), cause=Name(id='exc', ctx=Load(), lineno=105, col_offset=15, end_lineno=105, end_col_offset=18), lineno=101, col_offset=8, end_lineno=105, end_col_offset=18)], lineno=99, col_offset=4, end_lineno=105, end_col_offset=18)], lineno=93, col_offset=4, end_lineno=105, end_col_offset=18), Expr(value=Call(func=Attribute(value=Name(id='LOGGER', ctx=Load(), lineno=107, col_offset=4, end_lineno=107, end_col_offset=10), attr='debug', ctx=Load(), lineno=107, col_offset=4, end_lineno=107, end_col_offset=16), args=[Constant(value='Git blame completed', lineno=108, col_offset=8, end_lineno=108, end_col_offset=29)], keywords=[keyword(arg='extra', value=Dict(keys=[Constant(value='path', lineno=110, col_offset=12, end_lineno=110, end_col_offset=18), Constant(value='start_line', lineno=111, col_offset=12, end_lineno=111, end_col_offset=24), Constant(value='end_line', lineno=112, col_offset=12, end_lineno=112, end_col_offset=22), Constant(value='entries_count', lineno=113, col_offset=12, end_lineno=113, end_col_offset=27)], values=[Name(id='relative_path', ctx=Load(), lineno=110, col_offset=20, end_lineno=110, end_col_offset=33), Name(id='start_line', ctx=Load(), lineno=111, col_offset=26, end_lineno=111, end_col_offset=36), Name(id='end_line', ctx=Load(), lineno=112, col_offset=24, end_lineno=112, end_col_offset=32), Call(func=Name(id='len', ctx=Load(), lineno=113, col_offset=29, end_lineno=113, end_col_offset=32), args=[Name(id='entries', ctx=Load(), lineno=113, col_offset=33, end_lineno=113, end_col_offset=40)], lineno=113, col_offset=29, end_lineno=113, end_col_offset=41)], lineno=109, col_offset=14, end_lineno=114, end_col_offset=9), lineno=109, col_offset=8, end_lineno=114, end_col_offset=9)], lineno=107, col_offset=4, end_lineno=115, end_col_offset=5), lineno=107, col_offset=4, end_lineno=115, end_col_offset=5), Return(value=Dict(keys=[Constant(value='blame', lineno=116, col_offset=12, end_lineno=116, end_col_offset=19)], values=[Name(id='entries', ctx=Load(), lineno=116, col_offset=21, end_lineno=116, end_col_offset=28)], lineno=116, col_offset=11, end_lineno=116, end_col_offset=29), lineno=116, col_offset=4, end_lineno=116, end_col_offset=29)], returns=Name(id='dict', ctx=Load(), lineno=29, col_offset=5, end_lineno=29, end_col_offset=9), lineno=24, col_offset=0, end_lineno=116, end_col_offset=29), AsyncFunctionDef(name='file_history', args=arguments(args=[arg(arg='context', annotation=Name(id='ApplicationContext', ctx=Load(), lineno=120, col_offset=13, end_lineno=120, end_col_offset=31), lineno=120, col_offset=4, end_lineno=120, end_col_offset=31), arg(arg='path', annotation=Name(id='str', ctx=Load(), lineno=121, col_offset=10, end_lineno=121, end_col_offset=13), lineno=121, col_offset=4, end_lineno=121, end_col_offset=13), arg(arg='limit', annotation=Name(id='int', ctx=Load(), lineno=122, col_offset=11, end_lineno=122, end_col_offset=14), lineno=122, col_offset=4, end_lineno=122, end_col_offset=14)], defaults=[Constant(value=50, lineno=122, col_offset=17, end_lineno=122, end_col_offset=19)]), body=[Expr(value=Constant(value='Get commit history for file using GitPython (async).\n\n    Uses AsyncGitClient for typed Git operations, providing structured commit data\n    without subprocess overhead or text parsing. This is faster and more\n    reliable than parsing git log output. The async implementation enables\n    concurrent Git operations without blocking the event loop.\n\n    Parameters\n    ----------\n    context : ApplicationContext\n        Application context containing GitClient and repo root.\n    path : str\n        File path relative to repo root.\n    limit : int, optional\n        Maximum number of commits to return (default: 50).\n\n    Returns\n    -------\n    dict\n        Dictionary with "commits" key containing list of commit dicts with\n        fields: sha, full_sha, author, email, date, message.\n\n    Raises\n    ------\n    GitOperationError\n        If Git log operation fails. This function calls ``resolve_within_repo``\n        which may raise ``PathOutsideRepositoryError``. If the requested path\n        does not exist, ``PathNotFoundError`` is raised.\n    PathNotFoundError\n        If the requested file path does not exist within the repository.\n\n    Examples\n    --------\n    >>> result = file_history(context, "README.md", limit=10)\n    >>> isinstance(result["commits"], list)\n    True\n    >>> commit = result["commits"][0]\n    >>> "sha" in commit and "author" in commit\n    True\n\n    Notes\n    -----\n    Async Pattern:\n    - Uses AsyncGitClient which wraps GitClient operations in asyncio.to_thread.\n    - This prevents blocking the event loop and enables concurrent Git operations.\n    ', lineno=124, col_offset=4, end_lineno=169, end_col_offset=7), lineno=124, col_offset=4, end_lineno=169, end_col_offset=7), Assign(targets=[Name(id='repo_root', ctx=Store(), lineno=170, col_offset=4, end_lineno=170, end_col_offset=13)], value=Attribute(value=Attribute(value=Name(id='context', ctx=Load(), lineno=170, col_offset=16, end_lineno=170, end_col_offset=23), attr='paths', ctx=Load(), lineno=170, col_offset=16, end_lineno=170, end_col_offset=29), attr='repo_root', ctx=Load(), lineno=170, col_offset=16, end_lineno=170, end_col_offset=39), lineno=170, col_offset=4, end_lineno=170, end_col_offset=39), Try(body=[Assign(targets=[Name(id='file_path', ctx=Store(), lineno=173, col_offset=8, end_lineno=173, end_col_offset=17)], value=Call(func=Name(id='resolve_within_repo', ctx=Load(), lineno=173, col_offset=20, end_lineno=173, end_col_offset=39), args=[Name(id='repo_root', ctx=Load(), lineno=173, col_offset=40, end_lineno=173, end_col_offset=49), Name(id='path', ctx=Load(), lineno=173, col_offset=51, end_lineno=173, end_col_offset=55)], keywords=[keyword(arg='allow_nonexistent', value=Constant(value=False, lineno=173, col_offset=75, end_lineno=173, end_col_offset=80), lineno=173, col_offset=57, end_lineno=173, end_col_offset=80)], lineno=173, col_offset=20, end_lineno=173, end_col_offset=81), lineno=173, col_offset=8, end_lineno=173, end_col_offset=81)], handlers=[ExceptHandler(type=Name(id='FileNotFoundError', ctx=Load(), lineno=174, col_offset=11, end_lineno=174, end_col_offset=28), name='exc', body=[Assign(targets=[Name(id='error_msg', ctx=Store(), lineno=175, col_offset=8, end_lineno=175, end_col_offset=17)], value=JoinedStr(values=[Constant(value='Path not found: ', lineno=175, col_offset=22, end_lineno=175, end_col_offset=38), FormattedValue(value=Name(id='path', ctx=Load(), lineno=175, col_offset=39, end_lineno=175, end_col_offset=43), conversion=-1, lineno=175, col_offset=38, end_lineno=175, end_col_offset=44)], lineno=175, col_offset=20, end_lineno=175, end_col_offset=45), lineno=175, col_offset=8, end_lineno=175, end_col_offset=45), Raise(exc=Call(func=Name(id='PathNotFoundError', ctx=Load(), lineno=176, col_offset=14, end_lineno=176, end_col_offset=31), args=[Name(id='error_msg', ctx=Load(), lineno=176, col_offset=32, end_lineno=176, end_col_offset=41)], keywords=[keyword(arg='path', value=Name(id='path', ctx=Load(), lineno=176, col_offset=48, end_lineno=176, end_col_offset=52), lineno=176, col_offset=43, end_lineno=176, end_col_offset=52), keyword(arg='cause', value=Name(id='exc', ctx=Load(), lineno=176, col_offset=60, end_lineno=176, end_col_offset=63), lineno=176, col_offset=54, end_lineno=176, end_col_offset=63)], lineno=176, col_offset=14, end_lineno=176, end_col_offset=64), cause=Name(id='exc', ctx=Load(), lineno=176, col_offset=70, end_lineno=176, end_col_offset=73), lineno=176, col_offset=8, end_lineno=176, end_col_offset=73)], lineno=174, col_offset=4, end_lineno=176, end_col_offset=73)], lineno=172, col_offset=4, end_lineno=176, end_col_offset=73), Assign(targets=[Name(id='relative_path', ctx=Store(), lineno=179, col_offset=4, end_lineno=179, end_col_offset=17)], value=Call(func=Name(id='str', ctx=Load(), lineno=179, col_offset=20, end_lineno=179, end_col_offset=23), args=[Call(func=Attribute(value=Name(id='file_path', ctx=Load(), lineno=179, col_offset=24, end_lineno=179, end_col_offset=33), attr='relative_to', ctx=Load(), lineno=179, col_offset=24, end_lineno=179, end_col_offset=45), args=[Name(id='repo_root', ctx=Load(), lineno=179, col_offset=46, end_lineno=179, end_col_offset=55)], lineno=179, col_offset=24, end_lineno=179, end_col_offset=56)], lineno=179, col_offset=20, end_lineno=179, end_col_offset=57), lineno=179, col_offset=4, end_lineno=179, end_col_offset=57), Expr(value=Call(func=Attribute(value=Name(id='LOGGER', ctx=Load(), lineno=181, col_offset=4, end_lineno=181, end_col_offset=10), attr='debug', ctx=Load(), lineno=181, col_offset=4, end_lineno=181, end_col_offset=16), args=[Constant(value='Getting git history (async)', lineno=182, col_offset=8, end_lineno=182, end_col_offset=37)], keywords=[keyword(arg='extra', value=Dict(keys=[Constant(value='path', lineno=183, col_offset=15, end_lineno=183, end_col_offset=21), Constant(value='limit', lineno=183, col_offset=38, end_lineno=183, end_col_offset=45)], values=[Name(id='relative_path', ctx=Load(), lineno=183, col_offset=23, end_lineno=183, end_col_offset=36), Name(id='limit', ctx=Load(), lineno=183, col_offset=47, end_lineno=183, end_col_offset=52)], lineno=183, col_offset=14, end_lineno=183, end_col_offset=53), lineno=183, col_offset=8, end_lineno=183, end_col_offset=53)], lineno=181, col_offset=4, end_lineno=184, end_col_offset=5), lineno=181, col_offset=4, end_lineno=184, end_col_offset=5), Try(body=[Assign(targets=[Name(id='commits', ctx=Store(), lineno=187, col_offset=8, end_lineno=187, end_col_offset=15)], value=Await(value=Call(func=Attribute(value=Attribute(value=Name(id='context', ctx=Load(), lineno=187, col_offset=24, end_lineno=187, end_col_offset=31), attr='async_git_client', ctx=Load(), lineno=187, col_offset=24, end_lineno=187, end_col_offset=48), attr='file_history', ctx=Load(), lineno=187, col_offset=24, end_lineno=187, end_col_offset=61), keywords=[keyword(arg='path', value=Name(id='relative_path', ctx=Load(), lineno=187, col_offset=67, end_lineno=187, end_col_offset=80), lineno=187, col_offset=62, end_lineno=187, end_col_offset=80), keyword(arg='limit', value=Name(id='limit', ctx=Load(), lineno=187, col_offset=88, end_lineno=187, end_col_offset=93), lineno=187, col_offset=82, end_lineno=187, end_col_offset=93)], lineno=187, col_offset=24, end_lineno=187, end_col_offset=94), lineno=187, col_offset=18, end_lineno=187, end_col_offset=94), lineno=187, col_offset=8, end_lineno=187, end_col_offset=94)], handlers=[ExceptHandler(type=Attribute(value=Attribute(value=Name(id='git', ctx=Load(), lineno=188, col_offset=11, end_lineno=188, end_col_offset=14), attr='exc', ctx=Load(), lineno=188, col_offset=11, end_lineno=188, end_col_offset=18), attr='GitCommandError', ctx=Load(), lineno=188, col_offset=11, end_lineno=188, end_col_offset=34), name='exc', body=[Assign(targets=[Name(id='error_msg', ctx=Store(), lineno=189, col_offset=8, end_lineno=189, end_col_offset=17)], value=Constant(value='Git log failed', lineno=189, col_offset=20, end_lineno=189, end_col_offset=36), lineno=189, col_offset=8, end_lineno=189, end_col_offset=36), Raise(exc=Call(func=Name(id='GitOperationError', ctx=Load(), lineno=190, col_offset=14, end_lineno=190, end_col_offset=31), args=[Name(id='error_msg', ctx=Load(), lineno=191, col_offset=12, end_lineno=191, end_col_offset=21)], keywords=[keyword(arg='path', value=Name(id='relative_path', ctx=Load(), lineno=192, col_offset=17, end_lineno=192, end_col_offset=30), lineno=192, col_offset=12, end_lineno=192, end_col_offset=30), keyword(arg='git_command', value=Constant(value='log', lineno=193, col_offset=24, end_lineno=193, end_col_offset=29), lineno=193, col_offset=12, end_lineno=193, end_col_offset=29)], lineno=190, col_offset=14, end_lineno=194, end_col_offset=9), cause=Name(id='exc', ctx=Load(), lineno=194, col_offset=15, end_lineno=194, end_col_offset=18), lineno=190, col_offset=8, end_lineno=194, end_col_offset=18)], lineno=188, col_offset=4, end_lineno=194, end_col_offset=18)], lineno=186, col_offset=4, end_lineno=194, end_col_offset=18), Expr(value=Call(func=Attribute(value=Name(id='LOGGER', ctx=Load(), lineno=196, col_offset=4, end_lineno=196, end_col_offset=10), attr='debug', ctx=Load(), lineno=196, col_offset=4, end_lineno=196, end_col_offset=16), args=[Constant(value='Git history completed', lineno=197, col_offset=8, end_lineno=197, end_col_offset=31)], keywords=[keyword(arg='extra', value=Dict(keys=[Constant(value='path', lineno=198, col_offset=15, end_lineno=198, end_col_offset=21), Constant(value='limit', lineno=198, col_offset=38, end_lineno=198, end_col_offset=45), Constant(value='commits_count', lineno=198, col_offset=54, end_lineno=198, end_col_offset=69)], values=[Name(id='relative_path', ctx=Load(), lineno=198, col_offset=23, end_lineno=198, end_col_offset=36), Name(id='limit', ctx=Load(), lineno=198, col_offset=47, end_lineno=198, end_col_offset=52), Call(func=Name(id='len', ctx=Load(), lineno=198, col_offset=71, end_lineno=198, end_col_offset=74), args=[Name(id='commits', ctx=Load(), lineno=198, col_offset=75, end_lineno=198, end_col_offset=82)], lineno=198, col_offset=71, end_lineno=198, end_col_offset=83)], lineno=198, col_offset=14, end_lineno=198, end_col_offset=84), lineno=198, col_offset=8, end_lineno=198, end_col_offset=84)], lineno=196, col_offset=4, end_lineno=199, end_col_offset=5), lineno=196, col_offset=4, end_lineno=199, end_col_offset=5), Return(value=Dict(keys=[Constant(value='commits', lineno=200, col_offset=12, end_lineno=200, end_col_offset=21)], values=[Name(id='commits', ctx=Load(), lineno=200, col_offset=23, end_lineno=200, end_col_offset=30)], lineno=200, col_offset=11, end_lineno=200, end_col_offset=31), lineno=200, col_offset=4, end_lineno=200, end_col_offset=31)], returns=Name(id='dict', ctx=Load(), lineno=123, col_offset=5, end_lineno=123, end_col_offset=9), lineno=119, col_offset=0, end_lineno=200, end_col_offset=31), Assign(targets=[Name(id='__all__', ctx=Store(), lineno=203, col_offset=0, end_lineno=203, end_col_offset=7)], value=List(elts=[Constant(value='blame_range', lineno=203, col_offset=11, end_lineno=203, end_col_offset=24), Constant(value='file_history', lineno=203, col_offset=26, end_lineno=203, end_col_offset=40)], ctx=Load(), lineno=203, col_offset=10, end_lineno=203, end_col_offset=41), lineno=203, col_offset=0, end_lineno=203, end_col_offset=41)])
Module(body=[Expr(value=Constant(value='Overview of ids.\n\nThis module bundles ids logic for the kgfoundry stack. It groups related helpers so downstream\npackages can import a single cohesive namespace. Refer to the functions and classes below for\nimplementation specifics.\n', lineno=1, col_offset=0, end_lineno=6, end_col_offset=3), lineno=1, col_offset=0, end_lineno=6, end_col_offset=3), ImportFrom(module='__future__', names=[alias(name='annotations', lineno=10, col_offset=23, end_lineno=10, end_col_offset=34)], level=0, lineno=10, col_offset=0, end_lineno=10, end_col_offset=34), Import(names=[alias(name='base64', lineno=12, col_offset=7, end_lineno=12, end_col_offset=13)], lineno=12, col_offset=0, end_lineno=12, end_col_offset=13), Import(names=[alias(name='hashlib', lineno=13, col_offset=7, end_lineno=13, end_col_offset=14)], lineno=13, col_offset=0, end_lineno=13, end_col_offset=14), ImportFrom(module='kgfoundry_common.navmap_loader', names=[alias(name='load_nav_metadata', lineno=15, col_offset=43, end_lineno=15, end_col_offset=60)], level=0, lineno=15, col_offset=0, end_lineno=15, end_col_offset=60), Assign(targets=[Name(id='__all__', ctx=Store(), lineno=17, col_offset=0, end_lineno=17, end_col_offset=7)], value=List(elts=[Constant(value='urn_chunk', lineno=18, col_offset=4, end_lineno=18, end_col_offset=15), Constant(value='urn_doc_from_text', lineno=19, col_offset=4, end_lineno=19, end_col_offset=23)], ctx=Load(), lineno=17, col_offset=10, end_lineno=20, end_col_offset=1), lineno=17, col_offset=0, end_lineno=20, end_col_offset=1), Assign(targets=[Name(id='__navmap__', ctx=Store(), lineno=21, col_offset=0, end_lineno=21, end_col_offset=10)], value=Call(func=Name(id='load_nav_metadata', ctx=Load(), lineno=21, col_offset=13, end_lineno=21, end_col_offset=30), args=[Name(id='__name__', ctx=Load(), lineno=21, col_offset=31, end_lineno=21, end_col_offset=39), Call(func=Name(id='tuple', ctx=Load(), lineno=21, col_offset=41, end_lineno=21, end_col_offset=46), args=[Name(id='__all__', ctx=Load(), lineno=21, col_offset=47, end_lineno=21, end_col_offset=54)], lineno=21, col_offset=41, end_lineno=21, end_col_offset=55)], lineno=21, col_offset=13, end_lineno=21, end_col_offset=56), lineno=21, col_offset=0, end_lineno=21, end_col_offset=56), FunctionDef(name='urn_doc_from_text', args=arguments(args=[arg(arg='text', annotation=Name(id='str', ctx=Load(), lineno=25, col_offset=28, end_lineno=25, end_col_offset=31), lineno=25, col_offset=22, end_lineno=25, end_col_offset=31)]), body=[Expr(value=Constant(value='Generate a deterministic URN for a document from its text content.\n\n    Creates a SHA256-based URN identifier for a document by hashing\n    its text content and encoding the hash in base32.\n\n    Parameters\n    ----------\n    text : str\n        Document text content to hash.\n\n    Returns\n    -------\n    str\n        URN string in format "urn:doc:sha256:{base32_hash}".\n    ', lineno=26, col_offset=4, end_lineno=40, end_col_offset=7), lineno=26, col_offset=4, end_lineno=40, end_col_offset=7), Assign(targets=[Name(id='h', ctx=Store(), lineno=41, col_offset=4, end_lineno=41, end_col_offset=5)], value=Subscript(value=Call(func=Attribute(value=Call(func=Attribute(value=Name(id='hashlib', ctx=Load(), lineno=41, col_offset=8, end_lineno=41, end_col_offset=15), attr='sha256', ctx=Load(), lineno=41, col_offset=8, end_lineno=41, end_col_offset=22), args=[Call(func=Attribute(value=Name(id='text', ctx=Load(), lineno=41, col_offset=23, end_lineno=41, end_col_offset=27), attr='encode', ctx=Load(), lineno=41, col_offset=23, end_lineno=41, end_col_offset=34), args=[Constant(value='utf-8', lineno=41, col_offset=35, end_lineno=41, end_col_offset=42)], lineno=41, col_offset=23, end_lineno=41, end_col_offset=43)], lineno=41, col_offset=8, end_lineno=41, end_col_offset=44), attr='digest', ctx=Load(), lineno=41, col_offset=8, end_lineno=41, end_col_offset=51), lineno=41, col_offset=8, end_lineno=41, end_col_offset=53), slice=Slice(upper=Constant(value=16, lineno=41, col_offset=55, end_lineno=41, end_col_offset=57), lineno=41, col_offset=54, end_lineno=41, end_col_offset=57), ctx=Load(), lineno=41, col_offset=8, end_lineno=41, end_col_offset=58), lineno=41, col_offset=4, end_lineno=41, end_col_offset=58), Assign(targets=[Name(id='b32', ctx=Store(), lineno=42, col_offset=4, end_lineno=42, end_col_offset=7)], value=Call(func=Attribute(value=Call(func=Attribute(value=Call(func=Attribute(value=Call(func=Attribute(value=Name(id='base64', ctx=Load(), lineno=42, col_offset=10, end_lineno=42, end_col_offset=16), attr='b32encode', ctx=Load(), lineno=42, col_offset=10, end_lineno=42, end_col_offset=26), args=[Name(id='h', ctx=Load(), lineno=42, col_offset=27, end_lineno=42, end_col_offset=28)], lineno=42, col_offset=10, end_lineno=42, end_col_offset=29), attr='decode', ctx=Load(), lineno=42, col_offset=10, end_lineno=42, end_col_offset=36), args=[Constant(value='ascii', lineno=42, col_offset=37, end_lineno=42, end_col_offset=44)], lineno=42, col_offset=10, end_lineno=42, end_col_offset=45), attr='strip', ctx=Load(), lineno=42, col_offset=10, end_lineno=42, end_col_offset=51), args=[Constant(value='=', lineno=42, col_offset=52, end_lineno=42, end_col_offset=55)], lineno=42, col_offset=10, end_lineno=42, end_col_offset=56), attr='lower', ctx=Load(), lineno=42, col_offset=10, end_lineno=42, end_col_offset=62), lineno=42, col_offset=10, end_lineno=42, end_col_offset=64), lineno=42, col_offset=4, end_lineno=42, end_col_offset=64), Return(value=JoinedStr(values=[Constant(value='urn:doc:sha256:', lineno=43, col_offset=13, end_lineno=43, end_col_offset=28), FormattedValue(value=Name(id='b32', ctx=Load(), lineno=43, col_offset=29, end_lineno=43, end_col_offset=32), conversion=-1, lineno=43, col_offset=28, end_lineno=43, end_col_offset=33)], lineno=43, col_offset=11, end_lineno=43, end_col_offset=34), lineno=43, col_offset=4, end_lineno=43, end_col_offset=34)], returns=Name(id='str', ctx=Load(), lineno=25, col_offset=36, end_lineno=25, end_col_offset=39), lineno=25, col_offset=0, end_lineno=43, end_col_offset=34), FunctionDef(name='urn_chunk', args=arguments(args=[arg(arg='doc_hash', annotation=Name(id='str', ctx=Load(), lineno=47, col_offset=24, end_lineno=47, end_col_offset=27), lineno=47, col_offset=14, end_lineno=47, end_col_offset=27), arg(arg='start', annotation=Name(id='int', ctx=Load(), lineno=47, col_offset=36, end_lineno=47, end_col_offset=39), lineno=47, col_offset=29, end_lineno=47, end_col_offset=39), arg(arg='end', annotation=Name(id='int', ctx=Load(), lineno=47, col_offset=46, end_lineno=47, end_col_offset=49), lineno=47, col_offset=41, end_lineno=47, end_col_offset=49)]), body=[Expr(value=Constant(value='Generate a URN for a chunk referencing a document.\n\n    Creates a URN identifier for a text chunk by extracting the hash\n    from the document URN and appending the start and end positions.\n\n    Parameters\n    ----------\n    doc_hash : str\n        Document URN hash (e.g., "urn:doc:sha256:{hash}").\n    start : int\n        Start character position of the chunk.\n    end : int\n        End character position of the chunk.\n\n    Returns\n    -------\n    str\n        URN string in format "urn:chunk:{hash}:{start}-{end}".\n    ', lineno=48, col_offset=4, end_lineno=66, end_col_offset=7), lineno=48, col_offset=4, end_lineno=66, end_col_offset=7), Return(value=JoinedStr(values=[Constant(value='urn:chunk:', lineno=67, col_offset=13, end_lineno=67, end_col_offset=23), FormattedValue(value=Subscript(value=Call(func=Attribute(value=Name(id='doc_hash', ctx=Load(), lineno=67, col_offset=24, end_lineno=67, end_col_offset=32), attr='rsplit', ctx=Load(), lineno=67, col_offset=24, end_lineno=67, end_col_offset=39), args=[Constant(value=':', lineno=67, col_offset=40, end_lineno=67, end_col_offset=43)], keywords=[keyword(arg='maxsplit', value=Constant(value=1, lineno=67, col_offset=54, end_lineno=67, end_col_offset=55), lineno=67, col_offset=45, end_lineno=67, end_col_offset=55)], lineno=67, col_offset=24, end_lineno=67, end_col_offset=56), slice=UnaryOp(op=USub(), operand=Constant(value=1, lineno=67, col_offset=58, end_lineno=67, end_col_offset=59), lineno=67, col_offset=57, end_lineno=67, end_col_offset=59), ctx=Load(), lineno=67, col_offset=24, end_lineno=67, end_col_offset=60), conversion=-1, lineno=67, col_offset=23, end_lineno=67, end_col_offset=61), Constant(value=':', lineno=67, col_offset=61, end_lineno=67, end_col_offset=62), FormattedValue(value=Name(id='start', ctx=Load(), lineno=67, col_offset=63, end_lineno=67, end_col_offset=68), conversion=-1, lineno=67, col_offset=62, end_lineno=67, end_col_offset=69), Constant(value='-', lineno=67, col_offset=69, end_lineno=67, end_col_offset=70), FormattedValue(value=Name(id='end', ctx=Load(), lineno=67, col_offset=71, end_lineno=67, end_col_offset=74), conversion=-1, lineno=67, col_offset=70, end_lineno=67, end_col_offset=75)], lineno=67, col_offset=11, end_lineno=67, end_col_offset=76), lineno=67, col_offset=4, end_lineno=67, end_col_offset=76)], returns=Name(id='str', ctx=Load(), lineno=47, col_offset=54, end_lineno=47, end_col_offset=57), lineno=47, col_offset=0, end_lineno=67, end_col_offset=76)])
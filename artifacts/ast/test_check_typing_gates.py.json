Module(body=[Expr(value=Constant(value='Tests for enhanced typing gate checker with autofix guidance.\n\nTests cover:\n- Detection of heavy imports (numpy, fastapi, faiss, etc.)\n- Detection of private module imports (docs._types, docs._cache)\n- Detection of deprecated shim usage (resolve_numpy, resolve_fastapi, resolve_faiss)\n- Actionable autofix suggestions for each violation type\n- Output formats (default, JSON, --list for codemods)\n- TYPE_CHECKING guard detection\n', lineno=1, col_offset=0, end_lineno=10, end_col_offset=3), lineno=1, col_offset=0, end_lineno=10, end_col_offset=3), ImportFrom(module='__future__', names=[alias(name='annotations', lineno=12, col_offset=23, end_lineno=12, end_col_offset=34)], level=0, lineno=12, col_offset=0, end_lineno=12, end_col_offset=34), Import(names=[alias(name='json', lineno=14, col_offset=7, end_lineno=14, end_col_offset=11)], lineno=14, col_offset=0, end_lineno=14, end_col_offset=11), ImportFrom(module='typing', names=[alias(name='TYPE_CHECKING', lineno=15, col_offset=19, end_lineno=15, end_col_offset=32), alias(name='Any', lineno=15, col_offset=34, end_lineno=15, end_col_offset=37), alias(name='cast', lineno=15, col_offset=39, end_lineno=15, end_col_offset=43)], level=0, lineno=15, col_offset=0, end_lineno=15, end_col_offset=43), If(test=Name(id='TYPE_CHECKING', ctx=Load(), lineno=17, col_offset=3, end_lineno=17, end_col_offset=16), body=[ImportFrom(module='pathlib', names=[alias(name='Path', lineno=18, col_offset=24, end_lineno=18, end_col_offset=28)], level=0, lineno=18, col_offset=4, end_lineno=18, end_col_offset=28)], lineno=17, col_offset=0, end_lineno=18, end_col_offset=28), ImportFrom(module='tools.lint.check_typing_gates', names=[alias(name='check_file', lineno=21, col_offset=4, end_lineno=21, end_col_offset=14), alias(name='format_violations', lineno=22, col_offset=4, end_lineno=22, end_col_offset=21), alias(name='main', lineno=23, col_offset=4, end_lineno=23, end_col_offset=8)], level=0, lineno=20, col_offset=0, end_lineno=24, end_col_offset=1), ClassDef(name='TestTypeGateViolationTypes', body=[Expr(value=Constant(value='Test detection of different violation types.', lineno=28, col_offset=4, end_lineno=28, end_col_offset=54), lineno=28, col_offset=4, end_lineno=28, end_col_offset=54), FunctionDef(name='test_detect_heavy_import_numpy', args=arguments(args=[arg(arg='self', lineno=30, col_offset=39, end_lineno=30, end_col_offset=43), arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=30, col_offset=55, end_lineno=30, end_col_offset=59), lineno=30, col_offset=45, end_lineno=30, end_col_offset=59)]), body=[Expr(value=Constant(value='Verify detection of unguarded numpy imports.', lineno=31, col_offset=8, end_lineno=31, end_col_offset=58), lineno=31, col_offset=8, end_lineno=31, end_col_offset=58), Assign(targets=[Name(id='test_file', ctx=Store(), lineno=32, col_offset=8, end_lineno=32, end_col_offset=17)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=32, col_offset=20, end_lineno=32, end_col_offset=28), op=Div(), right=Constant(value='test.py', lineno=32, col_offset=31, end_lineno=32, end_col_offset=40), lineno=32, col_offset=20, end_lineno=32, end_col_offset=40), lineno=32, col_offset=8, end_lineno=32, end_col_offset=40), Expr(value=Call(func=Attribute(value=Name(id='test_file', ctx=Load(), lineno=33, col_offset=8, end_lineno=33, end_col_offset=17), attr='write_text', ctx=Load(), lineno=33, col_offset=8, end_lineno=33, end_col_offset=28), args=[Constant(value='\nimport numpy as np\n\ndef process(arr: np.ndarray) -> None:\n    pass\n', lineno=34, col_offset=12, end_lineno=39, end_col_offset=3)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=40, col_offset=21, end_lineno=40, end_col_offset=28), lineno=40, col_offset=12, end_lineno=40, end_col_offset=28)], lineno=33, col_offset=8, end_lineno=41, end_col_offset=9), lineno=33, col_offset=8, end_lineno=41, end_col_offset=9), Assign(targets=[Name(id='violations', ctx=Store(), lineno=43, col_offset=8, end_lineno=43, end_col_offset=18)], value=Call(func=Name(id='check_file', ctx=Load(), lineno=43, col_offset=21, end_lineno=43, end_col_offset=31), args=[Name(id='test_file', ctx=Load(), lineno=43, col_offset=32, end_lineno=43, end_col_offset=41)], lineno=43, col_offset=21, end_lineno=43, end_col_offset=42), lineno=43, col_offset=8, end_lineno=43, end_col_offset=42), Assert(test=Compare(left=Call(func=Name(id='len', ctx=Load(), lineno=44, col_offset=15, end_lineno=44, end_col_offset=18), args=[Name(id='violations', ctx=Load(), lineno=44, col_offset=19, end_lineno=44, end_col_offset=29)], lineno=44, col_offset=15, end_lineno=44, end_col_offset=30), ops=[Eq()], comparators=[Constant(value=1, lineno=44, col_offset=34, end_lineno=44, end_col_offset=35)], lineno=44, col_offset=15, end_lineno=44, end_col_offset=35), lineno=44, col_offset=8, end_lineno=44, end_col_offset=35), Assert(test=Compare(left=Attribute(value=Subscript(value=Name(id='violations', ctx=Load(), lineno=45, col_offset=15, end_lineno=45, end_col_offset=25), slice=Constant(value=0, lineno=45, col_offset=26, end_lineno=45, end_col_offset=27), ctx=Load(), lineno=45, col_offset=15, end_lineno=45, end_col_offset=28), attr='violation_type', ctx=Load(), lineno=45, col_offset=15, end_lineno=45, end_col_offset=43), ops=[Eq()], comparators=[Constant(value='heavy_import', lineno=45, col_offset=47, end_lineno=45, end_col_offset=61)], lineno=45, col_offset=15, end_lineno=45, end_col_offset=61), lineno=45, col_offset=8, end_lineno=45, end_col_offset=61), Assert(test=Compare(left=Attribute(value=Subscript(value=Name(id='violations', ctx=Load(), lineno=46, col_offset=15, end_lineno=46, end_col_offset=25), slice=Constant(value=0, lineno=46, col_offset=26, end_lineno=46, end_col_offset=27), ctx=Load(), lineno=46, col_offset=15, end_lineno=46, end_col_offset=28), attr='module_name', ctx=Load(), lineno=46, col_offset=15, end_lineno=46, end_col_offset=40), ops=[Eq()], comparators=[Constant(value='numpy', lineno=46, col_offset=44, end_lineno=46, end_col_offset=51)], lineno=46, col_offset=15, end_lineno=46, end_col_offset=51), lineno=46, col_offset=8, end_lineno=46, end_col_offset=51), Assert(test=Compare(left=Constant(value='numpy', lineno=47, col_offset=15, end_lineno=47, end_col_offset=22), ops=[In()], comparators=[Attribute(value=Subscript(value=Name(id='violations', ctx=Load(), lineno=47, col_offset=26, end_lineno=47, end_col_offset=36), slice=Constant(value=0, lineno=47, col_offset=37, end_lineno=47, end_col_offset=38), ctx=Load(), lineno=47, col_offset=26, end_lineno=47, end_col_offset=39), attr='suggestion', ctx=Load(), lineno=47, col_offset=26, end_lineno=47, end_col_offset=50)], lineno=47, col_offset=15, end_lineno=47, end_col_offset=50), lineno=47, col_offset=8, end_lineno=47, end_col_offset=50)], returns=Constant(value=None, lineno=30, col_offset=64, end_lineno=30, end_col_offset=68), lineno=30, col_offset=4, end_lineno=47, end_col_offset=50), FunctionDef(name='test_detect_heavy_import_from_fastapi', args=arguments(args=[arg(arg='self', lineno=49, col_offset=46, end_lineno=49, end_col_offset=50), arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=49, col_offset=62, end_lineno=49, end_col_offset=66), lineno=49, col_offset=52, end_lineno=49, end_col_offset=66)]), body=[Expr(value=Constant(value='Verify detection of unguarded fastapi imports.', lineno=50, col_offset=8, end_lineno=50, end_col_offset=60), lineno=50, col_offset=8, end_lineno=50, end_col_offset=60), Assign(targets=[Name(id='test_file', ctx=Store(), lineno=51, col_offset=8, end_lineno=51, end_col_offset=17)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=51, col_offset=20, end_lineno=51, end_col_offset=28), op=Div(), right=Constant(value='test.py', lineno=51, col_offset=31, end_lineno=51, end_col_offset=40), lineno=51, col_offset=20, end_lineno=51, end_col_offset=40), lineno=51, col_offset=8, end_lineno=51, end_col_offset=40), Expr(value=Call(func=Attribute(value=Name(id='test_file', ctx=Load(), lineno=52, col_offset=8, end_lineno=52, end_col_offset=17), attr='write_text', ctx=Load(), lineno=52, col_offset=8, end_lineno=52, end_col_offset=28), args=[Constant(value='\nfrom fastapi import FastAPI\n\napp: FastAPI = None\n', lineno=53, col_offset=12, end_lineno=57, end_col_offset=3)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=58, col_offset=21, end_lineno=58, end_col_offset=28), lineno=58, col_offset=12, end_lineno=58, end_col_offset=28)], lineno=52, col_offset=8, end_lineno=59, end_col_offset=9), lineno=52, col_offset=8, end_lineno=59, end_col_offset=9), Assign(targets=[Name(id='violations', ctx=Store(), lineno=61, col_offset=8, end_lineno=61, end_col_offset=18)], value=Call(func=Name(id='check_file', ctx=Load(), lineno=61, col_offset=21, end_lineno=61, end_col_offset=31), args=[Name(id='test_file', ctx=Load(), lineno=61, col_offset=32, end_lineno=61, end_col_offset=41)], lineno=61, col_offset=21, end_lineno=61, end_col_offset=42), lineno=61, col_offset=8, end_lineno=61, end_col_offset=42), Assert(test=Compare(left=Call(func=Name(id='len', ctx=Load(), lineno=62, col_offset=15, end_lineno=62, end_col_offset=18), args=[Name(id='violations', ctx=Load(), lineno=62, col_offset=19, end_lineno=62, end_col_offset=29)], lineno=62, col_offset=15, end_lineno=62, end_col_offset=30), ops=[Eq()], comparators=[Constant(value=1, lineno=62, col_offset=34, end_lineno=62, end_col_offset=35)], lineno=62, col_offset=15, end_lineno=62, end_col_offset=35), lineno=62, col_offset=8, end_lineno=62, end_col_offset=35), Assert(test=Compare(left=Attribute(value=Subscript(value=Name(id='violations', ctx=Load(), lineno=63, col_offset=15, end_lineno=63, end_col_offset=25), slice=Constant(value=0, lineno=63, col_offset=26, end_lineno=63, end_col_offset=27), ctx=Load(), lineno=63, col_offset=15, end_lineno=63, end_col_offset=28), attr='violation_type', ctx=Load(), lineno=63, col_offset=15, end_lineno=63, end_col_offset=43), ops=[Eq()], comparators=[Constant(value='heavy_import', lineno=63, col_offset=47, end_lineno=63, end_col_offset=61)], lineno=63, col_offset=15, end_lineno=63, end_col_offset=61), lineno=63, col_offset=8, end_lineno=63, end_col_offset=61), Assert(test=Compare(left=Attribute(value=Subscript(value=Name(id='violations', ctx=Load(), lineno=64, col_offset=15, end_lineno=64, end_col_offset=25), slice=Constant(value=0, lineno=64, col_offset=26, end_lineno=64, end_col_offset=27), ctx=Load(), lineno=64, col_offset=15, end_lineno=64, end_col_offset=28), attr='module_name', ctx=Load(), lineno=64, col_offset=15, end_lineno=64, end_col_offset=40), ops=[Eq()], comparators=[Constant(value='fastapi', lineno=64, col_offset=44, end_lineno=64, end_col_offset=53)], lineno=64, col_offset=15, end_lineno=64, end_col_offset=53), lineno=64, col_offset=8, end_lineno=64, end_col_offset=53), Assert(test=Compare(left=Constant(value='TYPE_CHECKING', lineno=65, col_offset=15, end_lineno=65, end_col_offset=30), ops=[In()], comparators=[Attribute(value=Subscript(value=Name(id='violations', ctx=Load(), lineno=65, col_offset=34, end_lineno=65, end_col_offset=44), slice=Constant(value=0, lineno=65, col_offset=45, end_lineno=65, end_col_offset=46), ctx=Load(), lineno=65, col_offset=34, end_lineno=65, end_col_offset=47), attr='suggestion', ctx=Load(), lineno=65, col_offset=34, end_lineno=65, end_col_offset=58)], lineno=65, col_offset=15, end_lineno=65, end_col_offset=58), lineno=65, col_offset=8, end_lineno=65, end_col_offset=58)], returns=Constant(value=None, lineno=49, col_offset=71, end_lineno=49, end_col_offset=75), lineno=49, col_offset=4, end_lineno=65, end_col_offset=58), FunctionDef(name='test_detect_private_module_docs_types', args=arguments(args=[arg(arg='self', lineno=67, col_offset=46, end_lineno=67, end_col_offset=50), arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=67, col_offset=62, end_lineno=67, end_col_offset=66), lineno=67, col_offset=52, end_lineno=67, end_col_offset=66)]), body=[Expr(value=Constant(value='Verify detection of private docs._types imports.', lineno=68, col_offset=8, end_lineno=68, end_col_offset=62), lineno=68, col_offset=8, end_lineno=68, end_col_offset=62), Assign(targets=[Name(id='test_file', ctx=Store(), lineno=69, col_offset=8, end_lineno=69, end_col_offset=17)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=69, col_offset=20, end_lineno=69, end_col_offset=28), op=Div(), right=Constant(value='test.py', lineno=69, col_offset=31, end_lineno=69, end_col_offset=40), lineno=69, col_offset=20, end_lineno=69, end_col_offset=40), lineno=69, col_offset=8, end_lineno=69, end_col_offset=40), Expr(value=Call(func=Attribute(value=Name(id='test_file', ctx=Load(), lineno=70, col_offset=8, end_lineno=70, end_col_offset=17), attr='write_text', ctx=Load(), lineno=70, col_offset=8, end_lineno=70, end_col_offset=28), args=[Constant(value='\nfrom docs._types.symbol import SymbolDefinition\n', lineno=71, col_offset=12, end_lineno=73, end_col_offset=3)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=74, col_offset=21, end_lineno=74, end_col_offset=28), lineno=74, col_offset=12, end_lineno=74, end_col_offset=28)], lineno=70, col_offset=8, end_lineno=75, end_col_offset=9), lineno=70, col_offset=8, end_lineno=75, end_col_offset=9), Assign(targets=[Name(id='violations', ctx=Store(), lineno=77, col_offset=8, end_lineno=77, end_col_offset=18)], value=Call(func=Name(id='check_file', ctx=Load(), lineno=77, col_offset=21, end_lineno=77, end_col_offset=31), args=[Name(id='test_file', ctx=Load(), lineno=77, col_offset=32, end_lineno=77, end_col_offset=41)], lineno=77, col_offset=21, end_lineno=77, end_col_offset=42), lineno=77, col_offset=8, end_lineno=77, end_col_offset=42), Assert(test=Compare(left=Call(func=Name(id='len', ctx=Load(), lineno=78, col_offset=15, end_lineno=78, end_col_offset=18), args=[Name(id='violations', ctx=Load(), lineno=78, col_offset=19, end_lineno=78, end_col_offset=29)], lineno=78, col_offset=15, end_lineno=78, end_col_offset=30), ops=[Eq()], comparators=[Constant(value=1, lineno=78, col_offset=34, end_lineno=78, end_col_offset=35)], lineno=78, col_offset=15, end_lineno=78, end_col_offset=35), lineno=78, col_offset=8, end_lineno=78, end_col_offset=35), Assert(test=Compare(left=Attribute(value=Subscript(value=Name(id='violations', ctx=Load(), lineno=79, col_offset=15, end_lineno=79, end_col_offset=25), slice=Constant(value=0, lineno=79, col_offset=26, end_lineno=79, end_col_offset=27), ctx=Load(), lineno=79, col_offset=15, end_lineno=79, end_col_offset=28), attr='violation_type', ctx=Load(), lineno=79, col_offset=15, end_lineno=79, end_col_offset=43), ops=[Eq()], comparators=[Constant(value='private_module', lineno=79, col_offset=47, end_lineno=79, end_col_offset=63)], lineno=79, col_offset=15, end_lineno=79, end_col_offset=63), lineno=79, col_offset=8, end_lineno=79, end_col_offset=63), Assert(test=Compare(left=Attribute(value=Subscript(value=Name(id='violations', ctx=Load(), lineno=80, col_offset=15, end_lineno=80, end_col_offset=25), slice=Constant(value=0, lineno=80, col_offset=26, end_lineno=80, end_col_offset=27), ctx=Load(), lineno=80, col_offset=15, end_lineno=80, end_col_offset=28), attr='module_name', ctx=Load(), lineno=80, col_offset=15, end_lineno=80, end_col_offset=40), ops=[Eq()], comparators=[Constant(value='docs._types.symbol', lineno=80, col_offset=44, end_lineno=80, end_col_offset=64)], lineno=80, col_offset=15, end_lineno=80, end_col_offset=64), lineno=80, col_offset=8, end_lineno=80, end_col_offset=64), Assert(test=Compare(left=Constant(value='public façade', lineno=81, col_offset=15, end_lineno=81, end_col_offset=31), ops=[In()], comparators=[Attribute(value=Subscript(value=Name(id='violations', ctx=Load(), lineno=81, col_offset=35, end_lineno=81, end_col_offset=45), slice=Constant(value=0, lineno=81, col_offset=46, end_lineno=81, end_col_offset=47), ctx=Load(), lineno=81, col_offset=35, end_lineno=81, end_col_offset=48), attr='suggestion', ctx=Load(), lineno=81, col_offset=35, end_lineno=81, end_col_offset=59)], lineno=81, col_offset=15, end_lineno=81, end_col_offset=59), lineno=81, col_offset=8, end_lineno=81, end_col_offset=59)], returns=Constant(value=None, lineno=67, col_offset=71, end_lineno=67, end_col_offset=75), lineno=67, col_offset=4, end_lineno=81, end_col_offset=59), FunctionDef(name='test_detect_private_module_docs_cache', args=arguments(args=[arg(arg='self', lineno=83, col_offset=46, end_lineno=83, end_col_offset=50), arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=83, col_offset=62, end_lineno=83, end_col_offset=66), lineno=83, col_offset=52, end_lineno=83, end_col_offset=66)]), body=[Expr(value=Constant(value='Verify detection of private docs._cache imports.', lineno=84, col_offset=8, end_lineno=84, end_col_offset=62), lineno=84, col_offset=8, end_lineno=84, end_col_offset=62), Assign(targets=[Name(id='test_file', ctx=Store(), lineno=85, col_offset=8, end_lineno=85, end_col_offset=17)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=85, col_offset=20, end_lineno=85, end_col_offset=28), op=Div(), right=Constant(value='test.py', lineno=85, col_offset=31, end_lineno=85, end_col_offset=40), lineno=85, col_offset=20, end_lineno=85, end_col_offset=40), lineno=85, col_offset=8, end_lineno=85, end_col_offset=40), Expr(value=Call(func=Attribute(value=Name(id='test_file', ctx=Load(), lineno=86, col_offset=8, end_lineno=86, end_col_offset=17), attr='write_text', ctx=Load(), lineno=86, col_offset=8, end_lineno=86, end_col_offset=28), args=[Constant(value='\nfrom docs._cache import get_cached_symbols\n', lineno=87, col_offset=12, end_lineno=89, end_col_offset=3)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=90, col_offset=21, end_lineno=90, end_col_offset=28), lineno=90, col_offset=12, end_lineno=90, end_col_offset=28)], lineno=86, col_offset=8, end_lineno=91, end_col_offset=9), lineno=86, col_offset=8, end_lineno=91, end_col_offset=9), Assign(targets=[Name(id='violations', ctx=Store(), lineno=93, col_offset=8, end_lineno=93, end_col_offset=18)], value=Call(func=Name(id='check_file', ctx=Load(), lineno=93, col_offset=21, end_lineno=93, end_col_offset=31), args=[Name(id='test_file', ctx=Load(), lineno=93, col_offset=32, end_lineno=93, end_col_offset=41)], lineno=93, col_offset=21, end_lineno=93, end_col_offset=42), lineno=93, col_offset=8, end_lineno=93, end_col_offset=42), Assert(test=Compare(left=Call(func=Name(id='len', ctx=Load(), lineno=94, col_offset=15, end_lineno=94, end_col_offset=18), args=[Name(id='violations', ctx=Load(), lineno=94, col_offset=19, end_lineno=94, end_col_offset=29)], lineno=94, col_offset=15, end_lineno=94, end_col_offset=30), ops=[Eq()], comparators=[Constant(value=1, lineno=94, col_offset=34, end_lineno=94, end_col_offset=35)], lineno=94, col_offset=15, end_lineno=94, end_col_offset=35), lineno=94, col_offset=8, end_lineno=94, end_col_offset=35), Assert(test=Compare(left=Attribute(value=Subscript(value=Name(id='violations', ctx=Load(), lineno=95, col_offset=15, end_lineno=95, end_col_offset=25), slice=Constant(value=0, lineno=95, col_offset=26, end_lineno=95, end_col_offset=27), ctx=Load(), lineno=95, col_offset=15, end_lineno=95, end_col_offset=28), attr='violation_type', ctx=Load(), lineno=95, col_offset=15, end_lineno=95, end_col_offset=43), ops=[Eq()], comparators=[Constant(value='private_module', lineno=95, col_offset=47, end_lineno=95, end_col_offset=63)], lineno=95, col_offset=15, end_lineno=95, end_col_offset=63), lineno=95, col_offset=8, end_lineno=95, end_col_offset=63), Assert(test=Compare(left=Constant(value='docs._cache', lineno=96, col_offset=15, end_lineno=96, end_col_offset=28), ops=[In()], comparators=[Attribute(value=Subscript(value=Name(id='violations', ctx=Load(), lineno=96, col_offset=32, end_lineno=96, end_col_offset=42), slice=Constant(value=0, lineno=96, col_offset=43, end_lineno=96, end_col_offset=44), ctx=Load(), lineno=96, col_offset=32, end_lineno=96, end_col_offset=45), attr='module_name', ctx=Load(), lineno=96, col_offset=32, end_lineno=96, end_col_offset=57)], lineno=96, col_offset=15, end_lineno=96, end_col_offset=57), lineno=96, col_offset=8, end_lineno=96, end_col_offset=57)], returns=Constant(value=None, lineno=83, col_offset=71, end_lineno=83, end_col_offset=75), lineno=83, col_offset=4, end_lineno=96, end_col_offset=57), FunctionDef(name='test_detect_deprecated_resolve_numpy_shim', args=arguments(args=[arg(arg='self', lineno=98, col_offset=50, end_lineno=98, end_col_offset=54), arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=98, col_offset=66, end_lineno=98, end_col_offset=70), lineno=98, col_offset=56, end_lineno=98, end_col_offset=70)]), body=[Expr(value=Constant(value='Verify detection of deprecated resolve_numpy shim usage.', lineno=99, col_offset=8, end_lineno=99, end_col_offset=70), lineno=99, col_offset=8, end_lineno=99, end_col_offset=70), Assign(targets=[Name(id='test_file', ctx=Store(), lineno=100, col_offset=8, end_lineno=100, end_col_offset=17)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=100, col_offset=20, end_lineno=100, end_col_offset=28), op=Div(), right=Constant(value='test.py', lineno=100, col_offset=31, end_lineno=100, end_col_offset=40), lineno=100, col_offset=20, end_lineno=100, end_col_offset=40), lineno=100, col_offset=8, end_lineno=100, end_col_offset=40), Expr(value=Call(func=Attribute(value=Name(id='test_file', ctx=Load(), lineno=101, col_offset=8, end_lineno=101, end_col_offset=17), attr='write_text', ctx=Load(), lineno=101, col_offset=8, end_lineno=101, end_col_offset=28), args=[Constant(value='\nfrom kgfoundry_common.typing import resolve_numpy\n', lineno=102, col_offset=12, end_lineno=104, end_col_offset=3)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=105, col_offset=21, end_lineno=105, end_col_offset=28), lineno=105, col_offset=12, end_lineno=105, end_col_offset=28)], lineno=101, col_offset=8, end_lineno=106, end_col_offset=9), lineno=101, col_offset=8, end_lineno=106, end_col_offset=9), Assign(targets=[Name(id='violations', ctx=Store(), lineno=108, col_offset=8, end_lineno=108, end_col_offset=18)], value=Call(func=Name(id='check_file', ctx=Load(), lineno=108, col_offset=21, end_lineno=108, end_col_offset=31), args=[Name(id='test_file', ctx=Load(), lineno=108, col_offset=32, end_lineno=108, end_col_offset=41)], lineno=108, col_offset=21, end_lineno=108, end_col_offset=42), lineno=108, col_offset=8, end_lineno=108, end_col_offset=42), Assert(test=Compare(left=Call(func=Name(id='len', ctx=Load(), lineno=109, col_offset=15, end_lineno=109, end_col_offset=18), args=[Name(id='violations', ctx=Load(), lineno=109, col_offset=19, end_lineno=109, end_col_offset=29)], lineno=109, col_offset=15, end_lineno=109, end_col_offset=30), ops=[Eq()], comparators=[Constant(value=1, lineno=109, col_offset=34, end_lineno=109, end_col_offset=35)], lineno=109, col_offset=15, end_lineno=109, end_col_offset=35), lineno=109, col_offset=8, end_lineno=109, end_col_offset=35), Assert(test=Compare(left=Attribute(value=Subscript(value=Name(id='violations', ctx=Load(), lineno=110, col_offset=15, end_lineno=110, end_col_offset=25), slice=Constant(value=0, lineno=110, col_offset=26, end_lineno=110, end_col_offset=27), ctx=Load(), lineno=110, col_offset=15, end_lineno=110, end_col_offset=28), attr='violation_type', ctx=Load(), lineno=110, col_offset=15, end_lineno=110, end_col_offset=43), ops=[Eq()], comparators=[Constant(value='deprecated_shim', lineno=110, col_offset=47, end_lineno=110, end_col_offset=64)], lineno=110, col_offset=15, end_lineno=110, end_col_offset=64), lineno=110, col_offset=8, end_lineno=110, end_col_offset=64), Assert(test=Compare(left=Constant(value='resolve_numpy', lineno=111, col_offset=15, end_lineno=111, end_col_offset=30), ops=[In()], comparators=[Attribute(value=Subscript(value=Name(id='violations', ctx=Load(), lineno=111, col_offset=34, end_lineno=111, end_col_offset=44), slice=Constant(value=0, lineno=111, col_offset=45, end_lineno=111, end_col_offset=46), ctx=Load(), lineno=111, col_offset=34, end_lineno=111, end_col_offset=47), attr='module_name', ctx=Load(), lineno=111, col_offset=34, end_lineno=111, end_col_offset=59)], lineno=111, col_offset=15, end_lineno=111, end_col_offset=59), lineno=111, col_offset=8, end_lineno=111, end_col_offset=59), Assert(test=Compare(left=Constant(value='gate_import', lineno=112, col_offset=15, end_lineno=112, end_col_offset=28), ops=[In()], comparators=[Attribute(value=Subscript(value=Name(id='violations', ctx=Load(), lineno=112, col_offset=32, end_lineno=112, end_col_offset=42), slice=Constant(value=0, lineno=112, col_offset=43, end_lineno=112, end_col_offset=44), ctx=Load(), lineno=112, col_offset=32, end_lineno=112, end_col_offset=45), attr='suggestion', ctx=Load(), lineno=112, col_offset=32, end_lineno=112, end_col_offset=56)], lineno=112, col_offset=15, end_lineno=112, end_col_offset=56), lineno=112, col_offset=8, end_lineno=112, end_col_offset=56)], returns=Constant(value=None, lineno=98, col_offset=75, end_lineno=98, end_col_offset=79), lineno=98, col_offset=4, end_lineno=112, end_col_offset=56), FunctionDef(name='test_detect_deprecated_resolve_fastapi_shim', args=arguments(args=[arg(arg='self', lineno=114, col_offset=52, end_lineno=114, end_col_offset=56), arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=114, col_offset=68, end_lineno=114, end_col_offset=72), lineno=114, col_offset=58, end_lineno=114, end_col_offset=72)]), body=[Expr(value=Constant(value='Verify detection of deprecated resolve_fastapi shim usage.', lineno=115, col_offset=8, end_lineno=115, end_col_offset=72), lineno=115, col_offset=8, end_lineno=115, end_col_offset=72), Assign(targets=[Name(id='test_file', ctx=Store(), lineno=116, col_offset=8, end_lineno=116, end_col_offset=17)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=116, col_offset=20, end_lineno=116, end_col_offset=28), op=Div(), right=Constant(value='test.py', lineno=116, col_offset=31, end_lineno=116, end_col_offset=40), lineno=116, col_offset=20, end_lineno=116, end_col_offset=40), lineno=116, col_offset=8, end_lineno=116, end_col_offset=40), Expr(value=Call(func=Attribute(value=Name(id='test_file', ctx=Load(), lineno=117, col_offset=8, end_lineno=117, end_col_offset=17), attr='write_text', ctx=Load(), lineno=117, col_offset=8, end_lineno=117, end_col_offset=28), args=[Constant(value='\nfrom kgfoundry_common.typing import resolve_fastapi\n', lineno=118, col_offset=12, end_lineno=120, end_col_offset=3)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=121, col_offset=21, end_lineno=121, end_col_offset=28), lineno=121, col_offset=12, end_lineno=121, end_col_offset=28)], lineno=117, col_offset=8, end_lineno=122, end_col_offset=9), lineno=117, col_offset=8, end_lineno=122, end_col_offset=9), Assign(targets=[Name(id='violations', ctx=Store(), lineno=124, col_offset=8, end_lineno=124, end_col_offset=18)], value=Call(func=Name(id='check_file', ctx=Load(), lineno=124, col_offset=21, end_lineno=124, end_col_offset=31), args=[Name(id='test_file', ctx=Load(), lineno=124, col_offset=32, end_lineno=124, end_col_offset=41)], lineno=124, col_offset=21, end_lineno=124, end_col_offset=42), lineno=124, col_offset=8, end_lineno=124, end_col_offset=42), Assert(test=Compare(left=Call(func=Name(id='len', ctx=Load(), lineno=125, col_offset=15, end_lineno=125, end_col_offset=18), args=[Name(id='violations', ctx=Load(), lineno=125, col_offset=19, end_lineno=125, end_col_offset=29)], lineno=125, col_offset=15, end_lineno=125, end_col_offset=30), ops=[Eq()], comparators=[Constant(value=1, lineno=125, col_offset=34, end_lineno=125, end_col_offset=35)], lineno=125, col_offset=15, end_lineno=125, end_col_offset=35), lineno=125, col_offset=8, end_lineno=125, end_col_offset=35), Assert(test=Compare(left=Attribute(value=Subscript(value=Name(id='violations', ctx=Load(), lineno=126, col_offset=15, end_lineno=126, end_col_offset=25), slice=Constant(value=0, lineno=126, col_offset=26, end_lineno=126, end_col_offset=27), ctx=Load(), lineno=126, col_offset=15, end_lineno=126, end_col_offset=28), attr='violation_type', ctx=Load(), lineno=126, col_offset=15, end_lineno=126, end_col_offset=43), ops=[Eq()], comparators=[Constant(value='deprecated_shim', lineno=126, col_offset=47, end_lineno=126, end_col_offset=64)], lineno=126, col_offset=15, end_lineno=126, end_col_offset=64), lineno=126, col_offset=8, end_lineno=126, end_col_offset=64), Assert(test=Compare(left=Constant(value='resolve_fastapi', lineno=127, col_offset=15, end_lineno=127, end_col_offset=32), ops=[In()], comparators=[Attribute(value=Subscript(value=Name(id='violations', ctx=Load(), lineno=127, col_offset=36, end_lineno=127, end_col_offset=46), slice=Constant(value=0, lineno=127, col_offset=47, end_lineno=127, end_col_offset=48), ctx=Load(), lineno=127, col_offset=36, end_lineno=127, end_col_offset=49), attr='module_name', ctx=Load(), lineno=127, col_offset=36, end_lineno=127, end_col_offset=61)], lineno=127, col_offset=15, end_lineno=127, end_col_offset=61), lineno=127, col_offset=8, end_lineno=127, end_col_offset=61)], returns=Constant(value=None, lineno=114, col_offset=77, end_lineno=114, end_col_offset=81), lineno=114, col_offset=4, end_lineno=127, end_col_offset=61), FunctionDef(name='test_detect_deprecated_resolve_faiss_shim', args=arguments(args=[arg(arg='self', lineno=129, col_offset=50, end_lineno=129, end_col_offset=54), arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=129, col_offset=66, end_lineno=129, end_col_offset=70), lineno=129, col_offset=56, end_lineno=129, end_col_offset=70)]), body=[Expr(value=Constant(value='Verify detection of deprecated resolve_faiss shim usage.', lineno=130, col_offset=8, end_lineno=130, end_col_offset=70), lineno=130, col_offset=8, end_lineno=130, end_col_offset=70), Assign(targets=[Name(id='test_file', ctx=Store(), lineno=131, col_offset=8, end_lineno=131, end_col_offset=17)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=131, col_offset=20, end_lineno=131, end_col_offset=28), op=Div(), right=Constant(value='test.py', lineno=131, col_offset=31, end_lineno=131, end_col_offset=40), lineno=131, col_offset=20, end_lineno=131, end_col_offset=40), lineno=131, col_offset=8, end_lineno=131, end_col_offset=40), Expr(value=Call(func=Attribute(value=Name(id='test_file', ctx=Load(), lineno=132, col_offset=8, end_lineno=132, end_col_offset=17), attr='write_text', ctx=Load(), lineno=132, col_offset=8, end_lineno=132, end_col_offset=28), args=[Constant(value='\nfrom kgfoundry_common.typing import resolve_faiss\n', lineno=133, col_offset=12, end_lineno=135, end_col_offset=3)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=136, col_offset=21, end_lineno=136, end_col_offset=28), lineno=136, col_offset=12, end_lineno=136, end_col_offset=28)], lineno=132, col_offset=8, end_lineno=137, end_col_offset=9), lineno=132, col_offset=8, end_lineno=137, end_col_offset=9), Assign(targets=[Name(id='violations', ctx=Store(), lineno=139, col_offset=8, end_lineno=139, end_col_offset=18)], value=Call(func=Name(id='check_file', ctx=Load(), lineno=139, col_offset=21, end_lineno=139, end_col_offset=31), args=[Name(id='test_file', ctx=Load(), lineno=139, col_offset=32, end_lineno=139, end_col_offset=41)], lineno=139, col_offset=21, end_lineno=139, end_col_offset=42), lineno=139, col_offset=8, end_lineno=139, end_col_offset=42), Assert(test=Compare(left=Call(func=Name(id='len', ctx=Load(), lineno=140, col_offset=15, end_lineno=140, end_col_offset=18), args=[Name(id='violations', ctx=Load(), lineno=140, col_offset=19, end_lineno=140, end_col_offset=29)], lineno=140, col_offset=15, end_lineno=140, end_col_offset=30), ops=[Eq()], comparators=[Constant(value=1, lineno=140, col_offset=34, end_lineno=140, end_col_offset=35)], lineno=140, col_offset=15, end_lineno=140, end_col_offset=35), lineno=140, col_offset=8, end_lineno=140, end_col_offset=35), Assert(test=Compare(left=Attribute(value=Subscript(value=Name(id='violations', ctx=Load(), lineno=141, col_offset=15, end_lineno=141, end_col_offset=25), slice=Constant(value=0, lineno=141, col_offset=26, end_lineno=141, end_col_offset=27), ctx=Load(), lineno=141, col_offset=15, end_lineno=141, end_col_offset=28), attr='violation_type', ctx=Load(), lineno=141, col_offset=15, end_lineno=141, end_col_offset=43), ops=[Eq()], comparators=[Constant(value='deprecated_shim', lineno=141, col_offset=47, end_lineno=141, end_col_offset=64)], lineno=141, col_offset=15, end_lineno=141, end_col_offset=64), lineno=141, col_offset=8, end_lineno=141, end_col_offset=64), Assert(test=Compare(left=Constant(value='resolve_faiss', lineno=142, col_offset=15, end_lineno=142, end_col_offset=30), ops=[In()], comparators=[Attribute(value=Subscript(value=Name(id='violations', ctx=Load(), lineno=142, col_offset=34, end_lineno=142, end_col_offset=44), slice=Constant(value=0, lineno=142, col_offset=45, end_lineno=142, end_col_offset=46), ctx=Load(), lineno=142, col_offset=34, end_lineno=142, end_col_offset=47), attr='module_name', ctx=Load(), lineno=142, col_offset=34, end_lineno=142, end_col_offset=59)], lineno=142, col_offset=15, end_lineno=142, end_col_offset=59), lineno=142, col_offset=8, end_lineno=142, end_col_offset=59)], returns=Constant(value=None, lineno=129, col_offset=75, end_lineno=129, end_col_offset=79), lineno=129, col_offset=4, end_lineno=142, end_col_offset=59), FunctionDef(name='test_no_violation_for_type_checking_guarded', args=arguments(args=[arg(arg='self', lineno=144, col_offset=52, end_lineno=144, end_col_offset=56), arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=144, col_offset=68, end_lineno=144, end_col_offset=72), lineno=144, col_offset=58, end_lineno=144, end_col_offset=72)]), body=[Expr(value=Constant(value='Verify no violation for TYPE_CHECKING-guarded imports.', lineno=145, col_offset=8, end_lineno=145, end_col_offset=68), lineno=145, col_offset=8, end_lineno=145, end_col_offset=68), Assign(targets=[Name(id='test_file', ctx=Store(), lineno=146, col_offset=8, end_lineno=146, end_col_offset=17)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=146, col_offset=20, end_lineno=146, end_col_offset=28), op=Div(), right=Constant(value='test.py', lineno=146, col_offset=31, end_lineno=146, end_col_offset=40), lineno=146, col_offset=20, end_lineno=146, end_col_offset=40), lineno=146, col_offset=8, end_lineno=146, end_col_offset=40), Expr(value=Call(func=Attribute(value=Name(id='test_file', ctx=Load(), lineno=147, col_offset=8, end_lineno=147, end_col_offset=17), attr='write_text', ctx=Load(), lineno=147, col_offset=8, end_lineno=147, end_col_offset=28), args=[Constant(value='\nfrom typing import TYPE_CHECKING\n\nif TYPE_CHECKING:\n    import numpy as np\n\ndef process(arr: np.ndarray) -> None:\n    pass\n', lineno=148, col_offset=12, end_lineno=156, end_col_offset=3)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=157, col_offset=21, end_lineno=157, end_col_offset=28), lineno=157, col_offset=12, end_lineno=157, end_col_offset=28)], lineno=147, col_offset=8, end_lineno=158, end_col_offset=9), lineno=147, col_offset=8, end_lineno=158, end_col_offset=9), Assign(targets=[Name(id='violations', ctx=Store(), lineno=160, col_offset=8, end_lineno=160, end_col_offset=18)], value=Call(func=Name(id='check_file', ctx=Load(), lineno=160, col_offset=21, end_lineno=160, end_col_offset=31), args=[Name(id='test_file', ctx=Load(), lineno=160, col_offset=32, end_lineno=160, end_col_offset=41)], lineno=160, col_offset=21, end_lineno=160, end_col_offset=42), lineno=160, col_offset=8, end_lineno=160, end_col_offset=42), Assert(test=Compare(left=Call(func=Name(id='len', ctx=Load(), lineno=161, col_offset=15, end_lineno=161, end_col_offset=18), args=[Name(id='violations', ctx=Load(), lineno=161, col_offset=19, end_lineno=161, end_col_offset=29)], lineno=161, col_offset=15, end_lineno=161, end_col_offset=30), ops=[Eq()], comparators=[Constant(value=0, lineno=161, col_offset=34, end_lineno=161, end_col_offset=35)], lineno=161, col_offset=15, end_lineno=161, end_col_offset=35), lineno=161, col_offset=8, end_lineno=161, end_col_offset=35)], returns=Constant(value=None, lineno=144, col_offset=77, end_lineno=144, end_col_offset=81), lineno=144, col_offset=4, end_lineno=161, end_col_offset=35), FunctionDef(name='test_no_violation_for_stdlib', args=arguments(args=[arg(arg='self', lineno=163, col_offset=37, end_lineno=163, end_col_offset=41), arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=163, col_offset=53, end_lineno=163, end_col_offset=57), lineno=163, col_offset=43, end_lineno=163, end_col_offset=57)]), body=[Expr(value=Constant(value='Verify no violations for stdlib imports.', lineno=164, col_offset=8, end_lineno=164, end_col_offset=54), lineno=164, col_offset=8, end_lineno=164, end_col_offset=54), Assign(targets=[Name(id='test_file', ctx=Store(), lineno=165, col_offset=8, end_lineno=165, end_col_offset=17)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=165, col_offset=20, end_lineno=165, end_col_offset=28), op=Div(), right=Constant(value='test.py', lineno=165, col_offset=31, end_lineno=165, end_col_offset=40), lineno=165, col_offset=20, end_lineno=165, end_col_offset=40), lineno=165, col_offset=8, end_lineno=165, end_col_offset=40), Expr(value=Call(func=Attribute(value=Name(id='test_file', ctx=Load(), lineno=166, col_offset=8, end_lineno=166, end_col_offset=17), attr='write_text', ctx=Load(), lineno=166, col_offset=8, end_lineno=166, end_col_offset=28), args=[Constant(value='\nimport json\nfrom pathlib import Path\n\ndef process(p: Path) -> None:\n    pass\n', lineno=167, col_offset=12, end_lineno=173, end_col_offset=3)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=174, col_offset=21, end_lineno=174, end_col_offset=28), lineno=174, col_offset=12, end_lineno=174, end_col_offset=28)], lineno=166, col_offset=8, end_lineno=175, end_col_offset=9), lineno=166, col_offset=8, end_lineno=175, end_col_offset=9), Assign(targets=[Name(id='violations', ctx=Store(), lineno=177, col_offset=8, end_lineno=177, end_col_offset=18)], value=Call(func=Name(id='check_file', ctx=Load(), lineno=177, col_offset=21, end_lineno=177, end_col_offset=31), args=[Name(id='test_file', ctx=Load(), lineno=177, col_offset=32, end_lineno=177, end_col_offset=41)], lineno=177, col_offset=21, end_lineno=177, end_col_offset=42), lineno=177, col_offset=8, end_lineno=177, end_col_offset=42), Assert(test=Compare(left=Call(func=Name(id='len', ctx=Load(), lineno=178, col_offset=15, end_lineno=178, end_col_offset=18), args=[Name(id='violations', ctx=Load(), lineno=178, col_offset=19, end_lineno=178, end_col_offset=29)], lineno=178, col_offset=15, end_lineno=178, end_col_offset=30), ops=[Eq()], comparators=[Constant(value=0, lineno=178, col_offset=34, end_lineno=178, end_col_offset=35)], lineno=178, col_offset=15, end_lineno=178, end_col_offset=35), lineno=178, col_offset=8, end_lineno=178, end_col_offset=35)], returns=Constant(value=None, lineno=163, col_offset=62, end_lineno=163, end_col_offset=66), lineno=163, col_offset=4, end_lineno=178, end_col_offset=35)], lineno=27, col_offset=0, end_lineno=178, end_col_offset=35), ClassDef(name='TestAutoFixSuggestions', body=[Expr(value=Constant(value='Test that suggestions are actionable and specific.', lineno=182, col_offset=4, end_lineno=182, end_col_offset=60), lineno=182, col_offset=4, end_lineno=182, end_col_offset=60), FunctionDef(name='test_heavy_import_suggestion_includes_type_checking', args=arguments(args=[arg(arg='self', lineno=184, col_offset=60, end_lineno=184, end_col_offset=64), arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=184, col_offset=76, end_lineno=184, end_col_offset=80), lineno=184, col_offset=66, end_lineno=184, end_col_offset=80)]), body=[Expr(value=Constant(value='Verify heavy import suggestion mentions TYPE_CHECKING.', lineno=185, col_offset=8, end_lineno=185, end_col_offset=68), lineno=185, col_offset=8, end_lineno=185, end_col_offset=68), Assign(targets=[Name(id='test_file', ctx=Store(), lineno=186, col_offset=8, end_lineno=186, end_col_offset=17)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=186, col_offset=20, end_lineno=186, end_col_offset=28), op=Div(), right=Constant(value='test.py', lineno=186, col_offset=31, end_lineno=186, end_col_offset=40), lineno=186, col_offset=20, end_lineno=186, end_col_offset=40), lineno=186, col_offset=8, end_lineno=186, end_col_offset=40), Expr(value=Call(func=Attribute(value=Name(id='test_file', ctx=Load(), lineno=187, col_offset=8, end_lineno=187, end_col_offset=17), attr='write_text', ctx=Load(), lineno=187, col_offset=8, end_lineno=187, end_col_offset=28), args=[Constant(value='import torch\n', lineno=187, col_offset=29, end_lineno=187, end_col_offset=45)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=187, col_offset=56, end_lineno=187, end_col_offset=63), lineno=187, col_offset=47, end_lineno=187, end_col_offset=63)], lineno=187, col_offset=8, end_lineno=187, end_col_offset=64), lineno=187, col_offset=8, end_lineno=187, end_col_offset=64), Assign(targets=[Name(id='violations', ctx=Store(), lineno=189, col_offset=8, end_lineno=189, end_col_offset=18)], value=Call(func=Name(id='check_file', ctx=Load(), lineno=189, col_offset=21, end_lineno=189, end_col_offset=31), args=[Name(id='test_file', ctx=Load(), lineno=189, col_offset=32, end_lineno=189, end_col_offset=41)], lineno=189, col_offset=21, end_lineno=189, end_col_offset=42), lineno=189, col_offset=8, end_lineno=189, end_col_offset=42), Assert(test=Compare(left=Call(func=Name(id='len', ctx=Load(), lineno=190, col_offset=15, end_lineno=190, end_col_offset=18), args=[Name(id='violations', ctx=Load(), lineno=190, col_offset=19, end_lineno=190, end_col_offset=29)], lineno=190, col_offset=15, end_lineno=190, end_col_offset=30), ops=[Eq()], comparators=[Constant(value=1, lineno=190, col_offset=34, end_lineno=190, end_col_offset=35)], lineno=190, col_offset=15, end_lineno=190, end_col_offset=35), lineno=190, col_offset=8, end_lineno=190, end_col_offset=35), Assert(test=Compare(left=Constant(value='TYPE_CHECKING', lineno=191, col_offset=15, end_lineno=191, end_col_offset=30), ops=[In()], comparators=[Attribute(value=Subscript(value=Name(id='violations', ctx=Load(), lineno=191, col_offset=34, end_lineno=191, end_col_offset=44), slice=Constant(value=0, lineno=191, col_offset=45, end_lineno=191, end_col_offset=46), ctx=Load(), lineno=191, col_offset=34, end_lineno=191, end_col_offset=47), attr='suggestion', ctx=Load(), lineno=191, col_offset=34, end_lineno=191, end_col_offset=58)], lineno=191, col_offset=15, end_lineno=191, end_col_offset=58), lineno=191, col_offset=8, end_lineno=191, end_col_offset=58)], returns=Constant(value=None, lineno=184, col_offset=85, end_lineno=184, end_col_offset=89), lineno=184, col_offset=4, end_lineno=191, end_col_offset=58), FunctionDef(name='test_heavy_import_suggestion_includes_gate_import', args=arguments(args=[arg(arg='self', lineno=193, col_offset=58, end_lineno=193, end_col_offset=62), arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=193, col_offset=74, end_lineno=193, end_col_offset=78), lineno=193, col_offset=64, end_lineno=193, end_col_offset=78)]), body=[Expr(value=Constant(value='Verify heavy import suggestion mentions gate_import.', lineno=194, col_offset=8, end_lineno=194, end_col_offset=66), lineno=194, col_offset=8, end_lineno=194, end_col_offset=66), Assign(targets=[Name(id='test_file', ctx=Store(), lineno=195, col_offset=8, end_lineno=195, end_col_offset=17)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=195, col_offset=20, end_lineno=195, end_col_offset=28), op=Div(), right=Constant(value='test.py', lineno=195, col_offset=31, end_lineno=195, end_col_offset=40), lineno=195, col_offset=20, end_lineno=195, end_col_offset=40), lineno=195, col_offset=8, end_lineno=195, end_col_offset=40), Expr(value=Call(func=Attribute(value=Name(id='test_file', ctx=Load(), lineno=196, col_offset=8, end_lineno=196, end_col_offset=17), attr='write_text', ctx=Load(), lineno=196, col_offset=8, end_lineno=196, end_col_offset=28), args=[Constant(value='import tensorflow\n', lineno=196, col_offset=29, end_lineno=196, end_col_offset=50)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=196, col_offset=61, end_lineno=196, end_col_offset=68), lineno=196, col_offset=52, end_lineno=196, end_col_offset=68)], lineno=196, col_offset=8, end_lineno=196, end_col_offset=69), lineno=196, col_offset=8, end_lineno=196, end_col_offset=69), Assign(targets=[Name(id='violations', ctx=Store(), lineno=198, col_offset=8, end_lineno=198, end_col_offset=18)], value=Call(func=Name(id='check_file', ctx=Load(), lineno=198, col_offset=21, end_lineno=198, end_col_offset=31), args=[Name(id='test_file', ctx=Load(), lineno=198, col_offset=32, end_lineno=198, end_col_offset=41)], lineno=198, col_offset=21, end_lineno=198, end_col_offset=42), lineno=198, col_offset=8, end_lineno=198, end_col_offset=42), Assert(test=Compare(left=Call(func=Name(id='len', ctx=Load(), lineno=199, col_offset=15, end_lineno=199, end_col_offset=18), args=[Name(id='violations', ctx=Load(), lineno=199, col_offset=19, end_lineno=199, end_col_offset=29)], lineno=199, col_offset=15, end_lineno=199, end_col_offset=30), ops=[Eq()], comparators=[Constant(value=1, lineno=199, col_offset=34, end_lineno=199, end_col_offset=35)], lineno=199, col_offset=15, end_lineno=199, end_col_offset=35), lineno=199, col_offset=8, end_lineno=199, end_col_offset=35), Assert(test=Compare(left=Constant(value='gate_import', lineno=200, col_offset=15, end_lineno=200, end_col_offset=28), ops=[In()], comparators=[Attribute(value=Subscript(value=Name(id='violations', ctx=Load(), lineno=200, col_offset=32, end_lineno=200, end_col_offset=42), slice=Constant(value=0, lineno=200, col_offset=43, end_lineno=200, end_col_offset=44), ctx=Load(), lineno=200, col_offset=32, end_lineno=200, end_col_offset=45), attr='suggestion', ctx=Load(), lineno=200, col_offset=32, end_lineno=200, end_col_offset=56)], lineno=200, col_offset=15, end_lineno=200, end_col_offset=56), lineno=200, col_offset=8, end_lineno=200, end_col_offset=56)], returns=Constant(value=None, lineno=193, col_offset=83, end_lineno=193, end_col_offset=87), lineno=193, col_offset=4, end_lineno=200, end_col_offset=56), FunctionDef(name='test_private_module_suggestion_references_facade', args=arguments(args=[arg(arg='self', lineno=202, col_offset=57, end_lineno=202, end_col_offset=61), arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=202, col_offset=73, end_lineno=202, end_col_offset=77), lineno=202, col_offset=63, end_lineno=202, end_col_offset=77)]), body=[Expr(value=Constant(value='Verify private module suggestion references public façade.', lineno=203, col_offset=8, end_lineno=203, end_col_offset=73), lineno=203, col_offset=8, end_lineno=203, end_col_offset=73), Assign(targets=[Name(id='test_file', ctx=Store(), lineno=204, col_offset=8, end_lineno=204, end_col_offset=17)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=204, col_offset=20, end_lineno=204, end_col_offset=28), op=Div(), right=Constant(value='test.py', lineno=204, col_offset=31, end_lineno=204, end_col_offset=40), lineno=204, col_offset=20, end_lineno=204, end_col_offset=40), lineno=204, col_offset=8, end_lineno=204, end_col_offset=40), Expr(value=Call(func=Attribute(value=Name(id='test_file', ctx=Load(), lineno=205, col_offset=8, end_lineno=205, end_col_offset=17), attr='write_text', ctx=Load(), lineno=205, col_offset=8, end_lineno=205, end_col_offset=28), args=[Constant(value='from docs._types.symbol import Symbol\n', lineno=205, col_offset=29, end_lineno=205, end_col_offset=70)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=205, col_offset=81, end_lineno=205, end_col_offset=88), lineno=205, col_offset=72, end_lineno=205, end_col_offset=88)], lineno=205, col_offset=8, end_lineno=205, end_col_offset=89), lineno=205, col_offset=8, end_lineno=205, end_col_offset=89), Assign(targets=[Name(id='violations', ctx=Store(), lineno=207, col_offset=8, end_lineno=207, end_col_offset=18)], value=Call(func=Name(id='check_file', ctx=Load(), lineno=207, col_offset=21, end_lineno=207, end_col_offset=31), args=[Name(id='test_file', ctx=Load(), lineno=207, col_offset=32, end_lineno=207, end_col_offset=41)], lineno=207, col_offset=21, end_lineno=207, end_col_offset=42), lineno=207, col_offset=8, end_lineno=207, end_col_offset=42), Assert(test=Compare(left=Call(func=Name(id='len', ctx=Load(), lineno=208, col_offset=15, end_lineno=208, end_col_offset=18), args=[Name(id='violations', ctx=Load(), lineno=208, col_offset=19, end_lineno=208, end_col_offset=29)], lineno=208, col_offset=15, end_lineno=208, end_col_offset=30), ops=[Eq()], comparators=[Constant(value=1, lineno=208, col_offset=34, end_lineno=208, end_col_offset=35)], lineno=208, col_offset=15, end_lineno=208, end_col_offset=35), lineno=208, col_offset=8, end_lineno=208, end_col_offset=35), Assert(test=Compare(left=Constant(value='façade', lineno=209, col_offset=15, end_lineno=209, end_col_offset=24), ops=[In()], comparators=[Call(func=Attribute(value=Attribute(value=Subscript(value=Name(id='violations', ctx=Load(), lineno=209, col_offset=28, end_lineno=209, end_col_offset=38), slice=Constant(value=0, lineno=209, col_offset=39, end_lineno=209, end_col_offset=40), ctx=Load(), lineno=209, col_offset=28, end_lineno=209, end_col_offset=41), attr='suggestion', ctx=Load(), lineno=209, col_offset=28, end_lineno=209, end_col_offset=52), attr='lower', ctx=Load(), lineno=209, col_offset=28, end_lineno=209, end_col_offset=58), lineno=209, col_offset=28, end_lineno=209, end_col_offset=60)], lineno=209, col_offset=15, end_lineno=209, end_col_offset=60), lineno=209, col_offset=8, end_lineno=209, end_col_offset=60), Assert(test=Compare(left=Constant(value='docs.types', lineno=210, col_offset=15, end_lineno=210, end_col_offset=27), ops=[In()], comparators=[Attribute(value=Subscript(value=Name(id='violations', ctx=Load(), lineno=210, col_offset=31, end_lineno=210, end_col_offset=41), slice=Constant(value=0, lineno=210, col_offset=42, end_lineno=210, end_col_offset=43), ctx=Load(), lineno=210, col_offset=31, end_lineno=210, end_col_offset=44), attr='suggestion', ctx=Load(), lineno=210, col_offset=31, end_lineno=210, end_col_offset=55)], lineno=210, col_offset=15, end_lineno=210, end_col_offset=55), lineno=210, col_offset=8, end_lineno=210, end_col_offset=55)], returns=Constant(value=None, lineno=202, col_offset=82, end_lineno=202, end_col_offset=86), lineno=202, col_offset=4, end_lineno=210, end_col_offset=55), FunctionDef(name='test_deprecated_shim_suggestion_references_gate_import', args=arguments(args=[arg(arg='self', lineno=212, col_offset=63, end_lineno=212, end_col_offset=67), arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=212, col_offset=79, end_lineno=212, end_col_offset=83), lineno=212, col_offset=69, end_lineno=212, end_col_offset=83)]), body=[Expr(value=Constant(value='Verify deprecated shim suggestion mentions gate_import.', lineno=213, col_offset=8, end_lineno=213, end_col_offset=69), lineno=213, col_offset=8, end_lineno=213, end_col_offset=69), Assign(targets=[Name(id='test_file', ctx=Store(), lineno=214, col_offset=8, end_lineno=214, end_col_offset=17)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=214, col_offset=20, end_lineno=214, end_col_offset=28), op=Div(), right=Constant(value='test.py', lineno=214, col_offset=31, end_lineno=214, end_col_offset=40), lineno=214, col_offset=20, end_lineno=214, end_col_offset=40), lineno=214, col_offset=8, end_lineno=214, end_col_offset=40), Expr(value=Call(func=Attribute(value=Name(id='test_file', ctx=Load(), lineno=215, col_offset=8, end_lineno=215, end_col_offset=17), attr='write_text', ctx=Load(), lineno=215, col_offset=8, end_lineno=215, end_col_offset=28), args=[Constant(value='from kgfoundry_common.typing import resolve_numpy\n', lineno=216, col_offset=12, end_lineno=216, end_col_offset=65)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=216, col_offset=76, end_lineno=216, end_col_offset=83), lineno=216, col_offset=67, end_lineno=216, end_col_offset=83)], lineno=215, col_offset=8, end_lineno=217, end_col_offset=9), lineno=215, col_offset=8, end_lineno=217, end_col_offset=9), Assign(targets=[Name(id='violations', ctx=Store(), lineno=219, col_offset=8, end_lineno=219, end_col_offset=18)], value=Call(func=Name(id='check_file', ctx=Load(), lineno=219, col_offset=21, end_lineno=219, end_col_offset=31), args=[Name(id='test_file', ctx=Load(), lineno=219, col_offset=32, end_lineno=219, end_col_offset=41)], lineno=219, col_offset=21, end_lineno=219, end_col_offset=42), lineno=219, col_offset=8, end_lineno=219, end_col_offset=42), Assert(test=Compare(left=Call(func=Name(id='len', ctx=Load(), lineno=220, col_offset=15, end_lineno=220, end_col_offset=18), args=[Name(id='violations', ctx=Load(), lineno=220, col_offset=19, end_lineno=220, end_col_offset=29)], lineno=220, col_offset=15, end_lineno=220, end_col_offset=30), ops=[Eq()], comparators=[Constant(value=1, lineno=220, col_offset=34, end_lineno=220, end_col_offset=35)], lineno=220, col_offset=15, end_lineno=220, end_col_offset=35), lineno=220, col_offset=8, end_lineno=220, end_col_offset=35), Assert(test=Compare(left=Constant(value='gate_import', lineno=221, col_offset=15, end_lineno=221, end_col_offset=28), ops=[In()], comparators=[Attribute(value=Subscript(value=Name(id='violations', ctx=Load(), lineno=221, col_offset=32, end_lineno=221, end_col_offset=42), slice=Constant(value=0, lineno=221, col_offset=43, end_lineno=221, end_col_offset=44), ctx=Load(), lineno=221, col_offset=32, end_lineno=221, end_col_offset=45), attr='suggestion', ctx=Load(), lineno=221, col_offset=32, end_lineno=221, end_col_offset=56)], lineno=221, col_offset=15, end_lineno=221, end_col_offset=56), lineno=221, col_offset=8, end_lineno=221, end_col_offset=56)], returns=Constant(value=None, lineno=212, col_offset=88, end_lineno=212, end_col_offset=92), lineno=212, col_offset=4, end_lineno=221, end_col_offset=56)], lineno=181, col_offset=0, end_lineno=221, end_col_offset=56), ClassDef(name='TestOutputFormats', body=[Expr(value=Constant(value='Test different output formats.', lineno=225, col_offset=4, end_lineno=225, end_col_offset=40), lineno=225, col_offset=4, end_lineno=225, end_col_offset=40), FunctionDef(name='test_json_output_format', args=arguments(args=[arg(arg='self', lineno=227, col_offset=32, end_lineno=227, end_col_offset=36), arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=227, col_offset=48, end_lineno=227, end_col_offset=52), lineno=227, col_offset=38, end_lineno=227, end_col_offset=52)]), body=[Expr(value=Constant(value='Verify JSON output contains all required fields.', lineno=228, col_offset=8, end_lineno=228, end_col_offset=62), lineno=228, col_offset=8, end_lineno=228, end_col_offset=62), Assign(targets=[Name(id='test_file', ctx=Store(), lineno=229, col_offset=8, end_lineno=229, end_col_offset=17)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=229, col_offset=20, end_lineno=229, end_col_offset=28), op=Div(), right=Constant(value='test.py', lineno=229, col_offset=31, end_lineno=229, end_col_offset=40), lineno=229, col_offset=20, end_lineno=229, end_col_offset=40), lineno=229, col_offset=8, end_lineno=229, end_col_offset=40), Expr(value=Call(func=Attribute(value=Name(id='test_file', ctx=Load(), lineno=230, col_offset=8, end_lineno=230, end_col_offset=17), attr='write_text', ctx=Load(), lineno=230, col_offset=8, end_lineno=230, end_col_offset=28), args=[Constant(value='import numpy as np\n', lineno=230, col_offset=29, end_lineno=230, end_col_offset=51)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=230, col_offset=62, end_lineno=230, end_col_offset=69), lineno=230, col_offset=53, end_lineno=230, end_col_offset=69)], lineno=230, col_offset=8, end_lineno=230, end_col_offset=70), lineno=230, col_offset=8, end_lineno=230, end_col_offset=70), Assign(targets=[Name(id='violations', ctx=Store(), lineno=232, col_offset=8, end_lineno=232, end_col_offset=18)], value=Call(func=Name(id='check_file', ctx=Load(), lineno=232, col_offset=21, end_lineno=232, end_col_offset=31), args=[Name(id='test_file', ctx=Load(), lineno=232, col_offset=32, end_lineno=232, end_col_offset=41)], lineno=232, col_offset=21, end_lineno=232, end_col_offset=42), lineno=232, col_offset=8, end_lineno=232, end_col_offset=42), Assign(targets=[Name(id='json_output', ctx=Store(), lineno=233, col_offset=8, end_lineno=233, end_col_offset=19)], value=Call(func=Name(id='format_violations', ctx=Load(), lineno=233, col_offset=22, end_lineno=233, end_col_offset=39), args=[Name(id='violations', ctx=Load(), lineno=233, col_offset=40, end_lineno=233, end_col_offset=50)], keywords=[keyword(arg='json_output', value=Constant(value=True, lineno=233, col_offset=64, end_lineno=233, end_col_offset=68), lineno=233, col_offset=52, end_lineno=233, end_col_offset=68)], lineno=233, col_offset=22, end_lineno=233, end_col_offset=69), lineno=233, col_offset=8, end_lineno=233, end_col_offset=69), Assign(targets=[Name(id='data', ctx=Store(), lineno=234, col_offset=8, end_lineno=234, end_col_offset=12)], value=Call(func=Name(id='cast', ctx=Load(), lineno=234, col_offset=15, end_lineno=234, end_col_offset=19), args=[Constant(value='list[dict[str, Any]]', lineno=234, col_offset=20, end_lineno=234, end_col_offset=42), Call(func=Attribute(value=Name(id='json', ctx=Load(), lineno=234, col_offset=44, end_lineno=234, end_col_offset=48), attr='loads', ctx=Load(), lineno=234, col_offset=44, end_lineno=234, end_col_offset=54), args=[Name(id='json_output', ctx=Load(), lineno=234, col_offset=55, end_lineno=234, end_col_offset=66)], lineno=234, col_offset=44, end_lineno=234, end_col_offset=67)], lineno=234, col_offset=15, end_lineno=234, end_col_offset=68), lineno=234, col_offset=8, end_lineno=234, end_col_offset=68), Assert(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=236, col_offset=15, end_lineno=236, end_col_offset=25), args=[Name(id='data', ctx=Load(), lineno=236, col_offset=26, end_lineno=236, end_col_offset=30), Name(id='list', ctx=Load(), lineno=236, col_offset=32, end_lineno=236, end_col_offset=36)], lineno=236, col_offset=15, end_lineno=236, end_col_offset=37), lineno=236, col_offset=8, end_lineno=236, end_col_offset=37), Assert(test=Compare(left=Call(func=Name(id='len', ctx=Load(), lineno=237, col_offset=15, end_lineno=237, end_col_offset=18), args=[Name(id='data', ctx=Load(), lineno=237, col_offset=19, end_lineno=237, end_col_offset=23)], lineno=237, col_offset=15, end_lineno=237, end_col_offset=24), ops=[Eq()], comparators=[Constant(value=1, lineno=237, col_offset=28, end_lineno=237, end_col_offset=29)], lineno=237, col_offset=15, end_lineno=237, end_col_offset=29), lineno=237, col_offset=8, end_lineno=237, end_col_offset=29), Assert(test=Compare(left=Subscript(value=Subscript(value=Name(id='data', ctx=Load(), lineno=238, col_offset=15, end_lineno=238, end_col_offset=19), slice=Constant(value=0, lineno=238, col_offset=20, end_lineno=238, end_col_offset=21), ctx=Load(), lineno=238, col_offset=15, end_lineno=238, end_col_offset=22), slice=Constant(value='violation_type', lineno=238, col_offset=23, end_lineno=238, end_col_offset=39), ctx=Load(), lineno=238, col_offset=15, end_lineno=238, end_col_offset=40), ops=[Eq()], comparators=[Constant(value='heavy_import', lineno=238, col_offset=44, end_lineno=238, end_col_offset=58)], lineno=238, col_offset=15, end_lineno=238, end_col_offset=58), lineno=238, col_offset=8, end_lineno=238, end_col_offset=58), Assert(test=Subscript(value=Subscript(value=Name(id='data', ctx=Load(), lineno=239, col_offset=15, end_lineno=239, end_col_offset=19), slice=Constant(value=0, lineno=239, col_offset=20, end_lineno=239, end_col_offset=21), ctx=Load(), lineno=239, col_offset=15, end_lineno=239, end_col_offset=22), slice=Constant(value='suggestion', lineno=239, col_offset=23, end_lineno=239, end_col_offset=35), ctx=Load(), lineno=239, col_offset=15, end_lineno=239, end_col_offset=36), lineno=239, col_offset=8, end_lineno=239, end_col_offset=36), Assert(test=Subscript(value=Subscript(value=Name(id='data', ctx=Load(), lineno=240, col_offset=15, end_lineno=240, end_col_offset=19), slice=Constant(value=0, lineno=240, col_offset=20, end_lineno=240, end_col_offset=21), ctx=Load(), lineno=240, col_offset=15, end_lineno=240, end_col_offset=22), slice=Constant(value='filepath', lineno=240, col_offset=23, end_lineno=240, end_col_offset=33), ctx=Load(), lineno=240, col_offset=15, end_lineno=240, end_col_offset=34), lineno=240, col_offset=8, end_lineno=240, end_col_offset=34), Assert(test=Subscript(value=Subscript(value=Name(id='data', ctx=Load(), lineno=241, col_offset=15, end_lineno=241, end_col_offset=19), slice=Constant(value=0, lineno=241, col_offset=20, end_lineno=241, end_col_offset=21), ctx=Load(), lineno=241, col_offset=15, end_lineno=241, end_col_offset=22), slice=Constant(value='lineno', lineno=241, col_offset=23, end_lineno=241, end_col_offset=31), ctx=Load(), lineno=241, col_offset=15, end_lineno=241, end_col_offset=32), lineno=241, col_offset=8, end_lineno=241, end_col_offset=32)], returns=Constant(value=None, lineno=227, col_offset=57, end_lineno=227, end_col_offset=61), lineno=227, col_offset=4, end_lineno=241, end_col_offset=32), FunctionDef(name='test_list_output_format', args=arguments(args=[arg(arg='self', lineno=243, col_offset=32, end_lineno=243, end_col_offset=36), arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=243, col_offset=48, end_lineno=243, end_col_offset=52), lineno=243, col_offset=38, end_lineno=243, end_col_offset=52)]), body=[Expr(value=Constant(value='Verify --list output format for codemod integration.', lineno=244, col_offset=8, end_lineno=244, end_col_offset=66), lineno=244, col_offset=8, end_lineno=244, end_col_offset=66), Assign(targets=[Name(id='test_file', ctx=Store(), lineno=245, col_offset=8, end_lineno=245, end_col_offset=17)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=245, col_offset=20, end_lineno=245, end_col_offset=28), op=Div(), right=Constant(value='test.py', lineno=245, col_offset=31, end_lineno=245, end_col_offset=40), lineno=245, col_offset=20, end_lineno=245, end_col_offset=40), lineno=245, col_offset=8, end_lineno=245, end_col_offset=40), Expr(value=Call(func=Attribute(value=Name(id='test_file', ctx=Load(), lineno=246, col_offset=8, end_lineno=246, end_col_offset=17), attr='write_text', ctx=Load(), lineno=246, col_offset=8, end_lineno=246, end_col_offset=28), args=[Constant(value='import numpy as np\n', lineno=246, col_offset=29, end_lineno=246, end_col_offset=51)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=246, col_offset=62, end_lineno=246, end_col_offset=69), lineno=246, col_offset=53, end_lineno=246, end_col_offset=69)], lineno=246, col_offset=8, end_lineno=246, end_col_offset=70), lineno=246, col_offset=8, end_lineno=246, end_col_offset=70), Assign(targets=[Name(id='violations', ctx=Store(), lineno=248, col_offset=8, end_lineno=248, end_col_offset=18)], value=Call(func=Name(id='check_file', ctx=Load(), lineno=248, col_offset=21, end_lineno=248, end_col_offset=31), args=[Name(id='test_file', ctx=Load(), lineno=248, col_offset=32, end_lineno=248, end_col_offset=41)], lineno=248, col_offset=21, end_lineno=248, end_col_offset=42), lineno=248, col_offset=8, end_lineno=248, end_col_offset=42), Assign(targets=[Name(id='list_output', ctx=Store(), lineno=249, col_offset=8, end_lineno=249, end_col_offset=19)], value=Call(func=Name(id='format_violations', ctx=Load(), lineno=249, col_offset=22, end_lineno=249, end_col_offset=39), args=[Name(id='violations', ctx=Load(), lineno=249, col_offset=40, end_lineno=249, end_col_offset=50)], keywords=[keyword(arg='list_output', value=Constant(value=True, lineno=249, col_offset=64, end_lineno=249, end_col_offset=68), lineno=249, col_offset=52, end_lineno=249, end_col_offset=68)], lineno=249, col_offset=22, end_lineno=249, end_col_offset=69), lineno=249, col_offset=8, end_lineno=249, end_col_offset=69), Assign(targets=[Name(id='lines', ctx=Store(), lineno=250, col_offset=8, end_lineno=250, end_col_offset=13)], value=Call(func=Attribute(value=Call(func=Attribute(value=Name(id='list_output', ctx=Load(), lineno=250, col_offset=16, end_lineno=250, end_col_offset=27), attr='strip', ctx=Load(), lineno=250, col_offset=16, end_lineno=250, end_col_offset=33), lineno=250, col_offset=16, end_lineno=250, end_col_offset=35), attr='split', ctx=Load(), lineno=250, col_offset=16, end_lineno=250, end_col_offset=41), args=[Constant(value='\n', lineno=250, col_offset=42, end_lineno=250, end_col_offset=46)], lineno=250, col_offset=16, end_lineno=250, end_col_offset=47), lineno=250, col_offset=8, end_lineno=250, end_col_offset=47), Assert(test=Compare(left=Call(func=Name(id='len', ctx=Load(), lineno=252, col_offset=15, end_lineno=252, end_col_offset=18), args=[Name(id='lines', ctx=Load(), lineno=252, col_offset=19, end_lineno=252, end_col_offset=24)], lineno=252, col_offset=15, end_lineno=252, end_col_offset=25), ops=[Eq()], comparators=[Constant(value=1, lineno=252, col_offset=29, end_lineno=252, end_col_offset=30)], lineno=252, col_offset=15, end_lineno=252, end_col_offset=30), lineno=252, col_offset=8, end_lineno=252, end_col_offset=30), Assign(targets=[Name(id='parts', ctx=Store(), lineno=254, col_offset=8, end_lineno=254, end_col_offset=13)], value=Call(func=Attribute(value=Subscript(value=Name(id='lines', ctx=Load(), lineno=254, col_offset=16, end_lineno=254, end_col_offset=21), slice=Constant(value=0, lineno=254, col_offset=22, end_lineno=254, end_col_offset=23), ctx=Load(), lineno=254, col_offset=16, end_lineno=254, end_col_offset=24), attr='split', ctx=Load(), lineno=254, col_offset=16, end_lineno=254, end_col_offset=30), args=[Constant(value=':', lineno=254, col_offset=31, end_lineno=254, end_col_offset=34)], lineno=254, col_offset=16, end_lineno=254, end_col_offset=35), lineno=254, col_offset=8, end_lineno=254, end_col_offset=35), Assert(test=Compare(left=Call(func=Name(id='len', ctx=Load(), lineno=255, col_offset=15, end_lineno=255, end_col_offset=18), args=[Name(id='parts', ctx=Load(), lineno=255, col_offset=19, end_lineno=255, end_col_offset=24)], lineno=255, col_offset=15, end_lineno=255, end_col_offset=25), ops=[GtE()], comparators=[Constant(value=4, lineno=255, col_offset=29, end_lineno=255, end_col_offset=30)], lineno=255, col_offset=15, end_lineno=255, end_col_offset=30), lineno=255, col_offset=8, end_lineno=255, end_col_offset=30), Assert(test=Compare(left=Subscript(value=Name(id='parts', ctx=Load(), lineno=256, col_offset=15, end_lineno=256, end_col_offset=20), slice=Constant(value=2, lineno=256, col_offset=21, end_lineno=256, end_col_offset=22), ctx=Load(), lineno=256, col_offset=15, end_lineno=256, end_col_offset=23), ops=[Eq()], comparators=[Constant(value='heavy_import', lineno=256, col_offset=27, end_lineno=256, end_col_offset=41)], lineno=256, col_offset=15, end_lineno=256, end_col_offset=41), lineno=256, col_offset=8, end_lineno=256, end_col_offset=41), Assert(test=Compare(left=Subscript(value=Name(id='parts', ctx=Load(), lineno=257, col_offset=15, end_lineno=257, end_col_offset=20), slice=Constant(value=3, lineno=257, col_offset=21, end_lineno=257, end_col_offset=22), ctx=Load(), lineno=257, col_offset=15, end_lineno=257, end_col_offset=23), ops=[Eq()], comparators=[Constant(value='numpy', lineno=257, col_offset=27, end_lineno=257, end_col_offset=34)], lineno=257, col_offset=15, end_lineno=257, end_col_offset=34), lineno=257, col_offset=8, end_lineno=257, end_col_offset=34)], returns=Constant(value=None, lineno=243, col_offset=57, end_lineno=243, end_col_offset=61), lineno=243, col_offset=4, end_lineno=257, end_col_offset=34), FunctionDef(name='test_default_output_includes_suggestions', args=arguments(args=[arg(arg='self', lineno=259, col_offset=49, end_lineno=259, end_col_offset=53), arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=259, col_offset=65, end_lineno=259, end_col_offset=69), lineno=259, col_offset=55, end_lineno=259, end_col_offset=69)]), body=[Expr(value=Constant(value='Verify default output format includes fix suggestions.', lineno=260, col_offset=8, end_lineno=260, end_col_offset=68), lineno=260, col_offset=8, end_lineno=260, end_col_offset=68), Assign(targets=[Name(id='test_file', ctx=Store(), lineno=261, col_offset=8, end_lineno=261, end_col_offset=17)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=261, col_offset=20, end_lineno=261, end_col_offset=28), op=Div(), right=Constant(value='test.py', lineno=261, col_offset=31, end_lineno=261, end_col_offset=40), lineno=261, col_offset=20, end_lineno=261, end_col_offset=40), lineno=261, col_offset=8, end_lineno=261, end_col_offset=40), Expr(value=Call(func=Attribute(value=Name(id='test_file', ctx=Load(), lineno=262, col_offset=8, end_lineno=262, end_col_offset=17), attr='write_text', ctx=Load(), lineno=262, col_offset=8, end_lineno=262, end_col_offset=28), args=[Constant(value='from docs._types import Symbol\n', lineno=262, col_offset=29, end_lineno=262, end_col_offset=63)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=262, col_offset=74, end_lineno=262, end_col_offset=81), lineno=262, col_offset=65, end_lineno=262, end_col_offset=81)], lineno=262, col_offset=8, end_lineno=262, end_col_offset=82), lineno=262, col_offset=8, end_lineno=262, end_col_offset=82), Assign(targets=[Name(id='violations', ctx=Store(), lineno=264, col_offset=8, end_lineno=264, end_col_offset=18)], value=Call(func=Name(id='check_file', ctx=Load(), lineno=264, col_offset=21, end_lineno=264, end_col_offset=31), args=[Name(id='test_file', ctx=Load(), lineno=264, col_offset=32, end_lineno=264, end_col_offset=41)], lineno=264, col_offset=21, end_lineno=264, end_col_offset=42), lineno=264, col_offset=8, end_lineno=264, end_col_offset=42), Assign(targets=[Name(id='output', ctx=Store(), lineno=265, col_offset=8, end_lineno=265, end_col_offset=14)], value=Call(func=Name(id='format_violations', ctx=Load(), lineno=265, col_offset=17, end_lineno=265, end_col_offset=34), args=[Name(id='violations', ctx=Load(), lineno=265, col_offset=35, end_lineno=265, end_col_offset=45)], lineno=265, col_offset=17, end_lineno=265, end_col_offset=46), lineno=265, col_offset=8, end_lineno=265, end_col_offset=46), Assert(test=Compare(left=Constant(value='Fix:', lineno=267, col_offset=15, end_lineno=267, end_col_offset=21), ops=[In()], comparators=[Name(id='output', ctx=Load(), lineno=267, col_offset=25, end_lineno=267, end_col_offset=31)], lineno=267, col_offset=15, end_lineno=267, end_col_offset=31), lineno=267, col_offset=8, end_lineno=267, end_col_offset=31), Assert(test=Compare(left=Constant(value='façade', lineno=268, col_offset=15, end_lineno=268, end_col_offset=24), ops=[In()], comparators=[Call(func=Attribute(value=Name(id='output', ctx=Load(), lineno=268, col_offset=28, end_lineno=268, end_col_offset=34), attr='lower', ctx=Load(), lineno=268, col_offset=28, end_lineno=268, end_col_offset=40), lineno=268, col_offset=28, end_lineno=268, end_col_offset=42)], lineno=268, col_offset=15, end_lineno=268, end_col_offset=42), lineno=268, col_offset=8, end_lineno=268, end_col_offset=42), Assert(test=Compare(left=Attribute(value=Subscript(value=Name(id='violations', ctx=Load(), lineno=269, col_offset=15, end_lineno=269, end_col_offset=25), slice=Constant(value=0, lineno=269, col_offset=26, end_lineno=269, end_col_offset=27), ctx=Load(), lineno=269, col_offset=15, end_lineno=269, end_col_offset=28), attr='suggestion', ctx=Load(), lineno=269, col_offset=15, end_lineno=269, end_col_offset=39), ops=[In()], comparators=[Name(id='output', ctx=Load(), lineno=269, col_offset=43, end_lineno=269, end_col_offset=49)], lineno=269, col_offset=15, end_lineno=269, end_col_offset=49), lineno=269, col_offset=8, end_lineno=269, end_col_offset=49)], returns=Constant(value=None, lineno=259, col_offset=74, end_lineno=259, end_col_offset=78), lineno=259, col_offset=4, end_lineno=269, end_col_offset=49), FunctionDef(name='test_empty_violations_output', args=arguments(args=[arg(arg='self', lineno=271, col_offset=37, end_lineno=271, end_col_offset=41), arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=271, col_offset=53, end_lineno=271, end_col_offset=57), lineno=271, col_offset=43, end_lineno=271, end_col_offset=57)]), body=[Expr(value=Constant(value='Verify output for clean files.', lineno=272, col_offset=8, end_lineno=272, end_col_offset=44), lineno=272, col_offset=8, end_lineno=272, end_col_offset=44), Assign(targets=[Name(id='test_file', ctx=Store(), lineno=273, col_offset=8, end_lineno=273, end_col_offset=17)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=273, col_offset=20, end_lineno=273, end_col_offset=28), op=Div(), right=Constant(value='test.py', lineno=273, col_offset=31, end_lineno=273, end_col_offset=40), lineno=273, col_offset=20, end_lineno=273, end_col_offset=40), lineno=273, col_offset=8, end_lineno=273, end_col_offset=40), Expr(value=Call(func=Attribute(value=Name(id='test_file', ctx=Load(), lineno=274, col_offset=8, end_lineno=274, end_col_offset=17), attr='write_text', ctx=Load(), lineno=274, col_offset=8, end_lineno=274, end_col_offset=28), args=[Constant(value='import sys\n', lineno=274, col_offset=29, end_lineno=274, end_col_offset=43)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=274, col_offset=54, end_lineno=274, end_col_offset=61), lineno=274, col_offset=45, end_lineno=274, end_col_offset=61)], lineno=274, col_offset=8, end_lineno=274, end_col_offset=62), lineno=274, col_offset=8, end_lineno=274, end_col_offset=62), Assign(targets=[Name(id='violations', ctx=Store(), lineno=276, col_offset=8, end_lineno=276, end_col_offset=18)], value=Call(func=Name(id='check_file', ctx=Load(), lineno=276, col_offset=21, end_lineno=276, end_col_offset=31), args=[Name(id='test_file', ctx=Load(), lineno=276, col_offset=32, end_lineno=276, end_col_offset=41)], lineno=276, col_offset=21, end_lineno=276, end_col_offset=42), lineno=276, col_offset=8, end_lineno=276, end_col_offset=42), Assign(targets=[Name(id='output', ctx=Store(), lineno=277, col_offset=8, end_lineno=277, end_col_offset=14)], value=Call(func=Name(id='format_violations', ctx=Load(), lineno=277, col_offset=17, end_lineno=277, end_col_offset=34), args=[Name(id='violations', ctx=Load(), lineno=277, col_offset=35, end_lineno=277, end_col_offset=45)], lineno=277, col_offset=17, end_lineno=277, end_col_offset=46), lineno=277, col_offset=8, end_lineno=277, end_col_offset=46), Assert(test=Compare(left=Constant(value='✓ No typing gate violations found', lineno=279, col_offset=15, end_lineno=279, end_col_offset=52), ops=[In()], comparators=[Name(id='output', ctx=Load(), lineno=279, col_offset=56, end_lineno=279, end_col_offset=62)], lineno=279, col_offset=15, end_lineno=279, end_col_offset=62), lineno=279, col_offset=8, end_lineno=279, end_col_offset=62)], returns=Constant(value=None, lineno=271, col_offset=62, end_lineno=271, end_col_offset=66), lineno=271, col_offset=4, end_lineno=279, end_col_offset=62)], lineno=224, col_offset=0, end_lineno=279, end_col_offset=62), ClassDef(name='TestMainCommand', body=[Expr(value=Constant(value='Test command-line interface.', lineno=283, col_offset=4, end_lineno=283, end_col_offset=38), lineno=283, col_offset=4, end_lineno=283, end_col_offset=38), FunctionDef(name='test_main_with_json_flag', args=arguments(args=[arg(arg='self', lineno=285, col_offset=33, end_lineno=285, end_col_offset=37), arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=285, col_offset=49, end_lineno=285, end_col_offset=53), lineno=285, col_offset=39, end_lineno=285, end_col_offset=53)]), body=[Expr(value=Constant(value='Verify --json flag works via main().', lineno=286, col_offset=8, end_lineno=286, end_col_offset=50), lineno=286, col_offset=8, end_lineno=286, end_col_offset=50), Assign(targets=[Name(id='test_file', ctx=Store(), lineno=287, col_offset=8, end_lineno=287, end_col_offset=17)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=287, col_offset=20, end_lineno=287, end_col_offset=28), op=Div(), right=Constant(value='test.py', lineno=287, col_offset=31, end_lineno=287, end_col_offset=40), lineno=287, col_offset=20, end_lineno=287, end_col_offset=40), lineno=287, col_offset=8, end_lineno=287, end_col_offset=40), Expr(value=Call(func=Attribute(value=Name(id='test_file', ctx=Load(), lineno=288, col_offset=8, end_lineno=288, end_col_offset=17), attr='write_text', ctx=Load(), lineno=288, col_offset=8, end_lineno=288, end_col_offset=28), args=[Constant(value='import numpy\n', lineno=288, col_offset=29, end_lineno=288, end_col_offset=45)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=288, col_offset=56, end_lineno=288, end_col_offset=63), lineno=288, col_offset=47, end_lineno=288, end_col_offset=63)], lineno=288, col_offset=8, end_lineno=288, end_col_offset=64), lineno=288, col_offset=8, end_lineno=288, end_col_offset=64), Assign(targets=[Name(id='exit_code', ctx=Store(), lineno=290, col_offset=8, end_lineno=290, end_col_offset=17)], value=Call(func=Name(id='main', ctx=Load(), lineno=290, col_offset=20, end_lineno=290, end_col_offset=24), args=[List(elts=[Constant(value='--json', lineno=290, col_offset=26, end_lineno=290, end_col_offset=34), Call(func=Name(id='str', ctx=Load(), lineno=290, col_offset=36, end_lineno=290, end_col_offset=39), args=[Name(id='tmp_path', ctx=Load(), lineno=290, col_offset=40, end_lineno=290, end_col_offset=48)], lineno=290, col_offset=36, end_lineno=290, end_col_offset=49)], ctx=Load(), lineno=290, col_offset=25, end_lineno=290, end_col_offset=50)], lineno=290, col_offset=20, end_lineno=290, end_col_offset=51), lineno=290, col_offset=8, end_lineno=290, end_col_offset=51), Assert(test=Compare(left=Name(id='exit_code', ctx=Load(), lineno=291, col_offset=15, end_lineno=291, end_col_offset=24), ops=[Eq()], comparators=[Constant(value=1, lineno=291, col_offset=28, end_lineno=291, end_col_offset=29)], lineno=291, col_offset=15, end_lineno=291, end_col_offset=29), lineno=291, col_offset=8, end_lineno=291, end_col_offset=29)], returns=Constant(value=None, lineno=285, col_offset=58, end_lineno=285, end_col_offset=62), lineno=285, col_offset=4, end_lineno=291, end_col_offset=29), FunctionDef(name='test_main_with_list_flag', args=arguments(args=[arg(arg='self', lineno=293, col_offset=33, end_lineno=293, end_col_offset=37), arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=293, col_offset=49, end_lineno=293, end_col_offset=53), lineno=293, col_offset=39, end_lineno=293, end_col_offset=53)]), body=[Expr(value=Constant(value='Verify --list flag works via main().', lineno=294, col_offset=8, end_lineno=294, end_col_offset=50), lineno=294, col_offset=8, end_lineno=294, end_col_offset=50), Assign(targets=[Name(id='test_file', ctx=Store(), lineno=295, col_offset=8, end_lineno=295, end_col_offset=17)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=295, col_offset=20, end_lineno=295, end_col_offset=28), op=Div(), right=Constant(value='test.py', lineno=295, col_offset=31, end_lineno=295, end_col_offset=40), lineno=295, col_offset=20, end_lineno=295, end_col_offset=40), lineno=295, col_offset=8, end_lineno=295, end_col_offset=40), Expr(value=Call(func=Attribute(value=Name(id='test_file', ctx=Load(), lineno=296, col_offset=8, end_lineno=296, end_col_offset=17), attr='write_text', ctx=Load(), lineno=296, col_offset=8, end_lineno=296, end_col_offset=28), args=[Constant(value='from docs._types import X\n', lineno=296, col_offset=29, end_lineno=296, end_col_offset=58)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=296, col_offset=69, end_lineno=296, end_col_offset=76), lineno=296, col_offset=60, end_lineno=296, end_col_offset=76)], lineno=296, col_offset=8, end_lineno=296, end_col_offset=77), lineno=296, col_offset=8, end_lineno=296, end_col_offset=77), Assign(targets=[Name(id='exit_code', ctx=Store(), lineno=298, col_offset=8, end_lineno=298, end_col_offset=17)], value=Call(func=Name(id='main', ctx=Load(), lineno=298, col_offset=20, end_lineno=298, end_col_offset=24), args=[List(elts=[Constant(value='--list', lineno=298, col_offset=26, end_lineno=298, end_col_offset=34), Call(func=Name(id='str', ctx=Load(), lineno=298, col_offset=36, end_lineno=298, end_col_offset=39), args=[Name(id='tmp_path', ctx=Load(), lineno=298, col_offset=40, end_lineno=298, end_col_offset=48)], lineno=298, col_offset=36, end_lineno=298, end_col_offset=49)], ctx=Load(), lineno=298, col_offset=25, end_lineno=298, end_col_offset=50)], lineno=298, col_offset=20, end_lineno=298, end_col_offset=51), lineno=298, col_offset=8, end_lineno=298, end_col_offset=51), Assert(test=Compare(left=Name(id='exit_code', ctx=Load(), lineno=299, col_offset=15, end_lineno=299, end_col_offset=24), ops=[Eq()], comparators=[Constant(value=1, lineno=299, col_offset=28, end_lineno=299, end_col_offset=29)], lineno=299, col_offset=15, end_lineno=299, end_col_offset=29), lineno=299, col_offset=8, end_lineno=299, end_col_offset=29)], returns=Constant(value=None, lineno=293, col_offset=58, end_lineno=293, end_col_offset=62), lineno=293, col_offset=4, end_lineno=299, end_col_offset=29), FunctionDef(name='test_main_with_clean_directory', args=arguments(args=[arg(arg='self', lineno=301, col_offset=39, end_lineno=301, end_col_offset=43), arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=301, col_offset=55, end_lineno=301, end_col_offset=59), lineno=301, col_offset=45, end_lineno=301, end_col_offset=59)]), body=[Expr(value=Constant(value='Verify main returns 0 for clean directory.', lineno=302, col_offset=8, end_lineno=302, end_col_offset=56), lineno=302, col_offset=8, end_lineno=302, end_col_offset=56), Assign(targets=[Name(id='test_file', ctx=Store(), lineno=303, col_offset=8, end_lineno=303, end_col_offset=17)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=303, col_offset=20, end_lineno=303, end_col_offset=28), op=Div(), right=Constant(value='test.py', lineno=303, col_offset=31, end_lineno=303, end_col_offset=40), lineno=303, col_offset=20, end_lineno=303, end_col_offset=40), lineno=303, col_offset=8, end_lineno=303, end_col_offset=40), Expr(value=Call(func=Attribute(value=Name(id='test_file', ctx=Load(), lineno=304, col_offset=8, end_lineno=304, end_col_offset=17), attr='write_text', ctx=Load(), lineno=304, col_offset=8, end_lineno=304, end_col_offset=28), args=[Constant(value='import sys\n', lineno=304, col_offset=29, end_lineno=304, end_col_offset=43)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=304, col_offset=54, end_lineno=304, end_col_offset=61), lineno=304, col_offset=45, end_lineno=304, end_col_offset=61)], lineno=304, col_offset=8, end_lineno=304, end_col_offset=62), lineno=304, col_offset=8, end_lineno=304, end_col_offset=62), Assign(targets=[Name(id='exit_code', ctx=Store(), lineno=306, col_offset=8, end_lineno=306, end_col_offset=17)], value=Call(func=Name(id='main', ctx=Load(), lineno=306, col_offset=20, end_lineno=306, end_col_offset=24), args=[List(elts=[Call(func=Name(id='str', ctx=Load(), lineno=306, col_offset=26, end_lineno=306, end_col_offset=29), args=[Name(id='tmp_path', ctx=Load(), lineno=306, col_offset=30, end_lineno=306, end_col_offset=38)], lineno=306, col_offset=26, end_lineno=306, end_col_offset=39)], ctx=Load(), lineno=306, col_offset=25, end_lineno=306, end_col_offset=40)], lineno=306, col_offset=20, end_lineno=306, end_col_offset=41), lineno=306, col_offset=8, end_lineno=306, end_col_offset=41), Assert(test=Compare(left=Name(id='exit_code', ctx=Load(), lineno=307, col_offset=15, end_lineno=307, end_col_offset=24), ops=[Eq()], comparators=[Constant(value=0, lineno=307, col_offset=28, end_lineno=307, end_col_offset=29)], lineno=307, col_offset=15, end_lineno=307, end_col_offset=29), lineno=307, col_offset=8, end_lineno=307, end_col_offset=29)], returns=Constant(value=None, lineno=301, col_offset=64, end_lineno=301, end_col_offset=68), lineno=301, col_offset=4, end_lineno=307, end_col_offset=29)], lineno=282, col_offset=0, end_lineno=307, end_col_offset=29), ClassDef(name='TestEdgeCases', body=[Expr(value=Constant(value='Test edge cases and special scenarios.', lineno=311, col_offset=4, end_lineno=311, end_col_offset=48), lineno=311, col_offset=4, end_lineno=311, end_col_offset=48), FunctionDef(name='test_nested_type_checking_blocks', args=arguments(args=[arg(arg='self', lineno=313, col_offset=41, end_lineno=313, end_col_offset=45), arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=313, col_offset=57, end_lineno=313, end_col_offset=61), lineno=313, col_offset=47, end_lineno=313, end_col_offset=61)]), body=[Expr(value=Constant(value='Verify handling of nested TYPE_CHECKING blocks.', lineno=314, col_offset=8, end_lineno=314, end_col_offset=61), lineno=314, col_offset=8, end_lineno=314, end_col_offset=61), Assign(targets=[Name(id='test_file', ctx=Store(), lineno=315, col_offset=8, end_lineno=315, end_col_offset=17)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=315, col_offset=20, end_lineno=315, end_col_offset=28), op=Div(), right=Constant(value='test.py', lineno=315, col_offset=31, end_lineno=315, end_col_offset=40), lineno=315, col_offset=20, end_lineno=315, end_col_offset=40), lineno=315, col_offset=8, end_lineno=315, end_col_offset=40), Expr(value=Call(func=Attribute(value=Name(id='test_file', ctx=Load(), lineno=316, col_offset=8, end_lineno=316, end_col_offset=17), attr='write_text', ctx=Load(), lineno=316, col_offset=8, end_lineno=316, end_col_offset=28), args=[Constant(value='\nfrom typing import TYPE_CHECKING\n\nif TYPE_CHECKING:\n    if True:\n        import numpy as np\n', lineno=317, col_offset=12, end_lineno=323, end_col_offset=3)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=324, col_offset=21, end_lineno=324, end_col_offset=28), lineno=324, col_offset=12, end_lineno=324, end_col_offset=28)], lineno=316, col_offset=8, end_lineno=325, end_col_offset=9), lineno=316, col_offset=8, end_lineno=325, end_col_offset=9), Assign(targets=[Name(id='violations', ctx=Store(), lineno=327, col_offset=8, end_lineno=327, end_col_offset=18)], value=Call(func=Name(id='check_file', ctx=Load(), lineno=327, col_offset=21, end_lineno=327, end_col_offset=31), args=[Name(id='test_file', ctx=Load(), lineno=327, col_offset=32, end_lineno=327, end_col_offset=41)], lineno=327, col_offset=21, end_lineno=327, end_col_offset=42), lineno=327, col_offset=8, end_lineno=327, end_col_offset=42), Assert(test=Compare(left=Call(func=Name(id='len', ctx=Load(), lineno=328, col_offset=15, end_lineno=328, end_col_offset=18), args=[Name(id='violations', ctx=Load(), lineno=328, col_offset=19, end_lineno=328, end_col_offset=29)], lineno=328, col_offset=15, end_lineno=328, end_col_offset=30), ops=[Eq()], comparators=[Constant(value=0, lineno=328, col_offset=34, end_lineno=328, end_col_offset=35)], lineno=328, col_offset=15, end_lineno=328, end_col_offset=35), lineno=328, col_offset=8, end_lineno=328, end_col_offset=35)], returns=Constant(value=None, lineno=313, col_offset=66, end_lineno=313, end_col_offset=70), lineno=313, col_offset=4, end_lineno=328, end_col_offset=35), FunctionDef(name='test_faiss_submodule_import', args=arguments(args=[arg(arg='self', lineno=330, col_offset=36, end_lineno=330, end_col_offset=40), arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=330, col_offset=52, end_lineno=330, end_col_offset=56), lineno=330, col_offset=42, end_lineno=330, end_col_offset=56)]), body=[Expr(value=Constant(value='Verify detection of faiss submodule imports.', lineno=331, col_offset=8, end_lineno=331, end_col_offset=58), lineno=331, col_offset=8, end_lineno=331, end_col_offset=58), Assign(targets=[Name(id='test_file', ctx=Store(), lineno=332, col_offset=8, end_lineno=332, end_col_offset=17)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=332, col_offset=20, end_lineno=332, end_col_offset=28), op=Div(), right=Constant(value='test.py', lineno=332, col_offset=31, end_lineno=332, end_col_offset=40), lineno=332, col_offset=20, end_lineno=332, end_col_offset=40), lineno=332, col_offset=8, end_lineno=332, end_col_offset=40), Expr(value=Call(func=Attribute(value=Name(id='test_file', ctx=Load(), lineno=333, col_offset=8, end_lineno=333, end_col_offset=17), attr='write_text', ctx=Load(), lineno=333, col_offset=8, end_lineno=333, end_col_offset=28), args=[Constant(value='from faiss.swigfaiss import IndexFlat\n', lineno=333, col_offset=29, end_lineno=333, end_col_offset=70)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=333, col_offset=81, end_lineno=333, end_col_offset=88), lineno=333, col_offset=72, end_lineno=333, end_col_offset=88)], lineno=333, col_offset=8, end_lineno=333, end_col_offset=89), lineno=333, col_offset=8, end_lineno=333, end_col_offset=89), Assign(targets=[Name(id='violations', ctx=Store(), lineno=335, col_offset=8, end_lineno=335, end_col_offset=18)], value=Call(func=Name(id='check_file', ctx=Load(), lineno=335, col_offset=21, end_lineno=335, end_col_offset=31), args=[Name(id='test_file', ctx=Load(), lineno=335, col_offset=32, end_lineno=335, end_col_offset=41)], lineno=335, col_offset=21, end_lineno=335, end_col_offset=42), lineno=335, col_offset=8, end_lineno=335, end_col_offset=42), Assert(test=Compare(left=Call(func=Name(id='len', ctx=Load(), lineno=336, col_offset=15, end_lineno=336, end_col_offset=18), args=[Name(id='violations', ctx=Load(), lineno=336, col_offset=19, end_lineno=336, end_col_offset=29)], lineno=336, col_offset=15, end_lineno=336, end_col_offset=30), ops=[Eq()], comparators=[Constant(value=1, lineno=336, col_offset=34, end_lineno=336, end_col_offset=35)], lineno=336, col_offset=15, end_lineno=336, end_col_offset=35), lineno=336, col_offset=8, end_lineno=336, end_col_offset=35), Assert(test=Compare(left=Attribute(value=Subscript(value=Name(id='violations', ctx=Load(), lineno=337, col_offset=15, end_lineno=337, end_col_offset=25), slice=Constant(value=0, lineno=337, col_offset=26, end_lineno=337, end_col_offset=27), ctx=Load(), lineno=337, col_offset=15, end_lineno=337, end_col_offset=28), attr='violation_type', ctx=Load(), lineno=337, col_offset=15, end_lineno=337, end_col_offset=43), ops=[Eq()], comparators=[Constant(value='heavy_import', lineno=337, col_offset=47, end_lineno=337, end_col_offset=61)], lineno=337, col_offset=15, end_lineno=337, end_col_offset=61), lineno=337, col_offset=8, end_lineno=337, end_col_offset=61), Assert(test=Compare(left=Constant(value='faiss', lineno=338, col_offset=15, end_lineno=338, end_col_offset=22), ops=[In()], comparators=[Attribute(value=Subscript(value=Name(id='violations', ctx=Load(), lineno=338, col_offset=26, end_lineno=338, end_col_offset=36), slice=Constant(value=0, lineno=338, col_offset=37, end_lineno=338, end_col_offset=38), ctx=Load(), lineno=338, col_offset=26, end_lineno=338, end_col_offset=39), attr='module_name', ctx=Load(), lineno=338, col_offset=26, end_lineno=338, end_col_offset=51)], lineno=338, col_offset=15, end_lineno=338, end_col_offset=51), lineno=338, col_offset=8, end_lineno=338, end_col_offset=51)], returns=Constant(value=None, lineno=330, col_offset=61, end_lineno=330, end_col_offset=65), lineno=330, col_offset=4, end_lineno=338, end_col_offset=51), FunctionDef(name='test_multiple_violations_in_one_file', args=arguments(args=[arg(arg='self', lineno=340, col_offset=45, end_lineno=340, end_col_offset=49), arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=340, col_offset=61, end_lineno=340, end_col_offset=65), lineno=340, col_offset=51, end_lineno=340, end_col_offset=65)]), body=[Expr(value=Constant(value='Verify detection of multiple violations in single file.', lineno=341, col_offset=8, end_lineno=341, end_col_offset=69), lineno=341, col_offset=8, end_lineno=341, end_col_offset=69), Assign(targets=[Name(id='test_file', ctx=Store(), lineno=342, col_offset=8, end_lineno=342, end_col_offset=17)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=342, col_offset=20, end_lineno=342, end_col_offset=28), op=Div(), right=Constant(value='test.py', lineno=342, col_offset=31, end_lineno=342, end_col_offset=40), lineno=342, col_offset=20, end_lineno=342, end_col_offset=40), lineno=342, col_offset=8, end_lineno=342, end_col_offset=40), Expr(value=Call(func=Attribute(value=Name(id='test_file', ctx=Load(), lineno=343, col_offset=8, end_lineno=343, end_col_offset=17), attr='write_text', ctx=Load(), lineno=343, col_offset=8, end_lineno=343, end_col_offset=28), args=[Constant(value='\nimport numpy as np\nfrom fastapi import FastAPI\nfrom docs._types import Symbol\nfrom kgfoundry_common.typing import resolve_numpy\n', lineno=344, col_offset=12, end_lineno=349, end_col_offset=3)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=350, col_offset=21, end_lineno=350, end_col_offset=28), lineno=350, col_offset=12, end_lineno=350, end_col_offset=28)], lineno=343, col_offset=8, end_lineno=351, end_col_offset=9), lineno=343, col_offset=8, end_lineno=351, end_col_offset=9), Assign(targets=[Name(id='violations', ctx=Store(), lineno=353, col_offset=8, end_lineno=353, end_col_offset=18)], value=Call(func=Name(id='check_file', ctx=Load(), lineno=353, col_offset=21, end_lineno=353, end_col_offset=31), args=[Name(id='test_file', ctx=Load(), lineno=353, col_offset=32, end_lineno=353, end_col_offset=41)], lineno=353, col_offset=21, end_lineno=353, end_col_offset=42), lineno=353, col_offset=8, end_lineno=353, end_col_offset=42), Assert(test=Compare(left=Call(func=Name(id='len', ctx=Load(), lineno=354, col_offset=15, end_lineno=354, end_col_offset=18), args=[Name(id='violations', ctx=Load(), lineno=354, col_offset=19, end_lineno=354, end_col_offset=29)], lineno=354, col_offset=15, end_lineno=354, end_col_offset=30), ops=[Eq()], comparators=[Constant(value=4, lineno=354, col_offset=34, end_lineno=354, end_col_offset=35)], lineno=354, col_offset=15, end_lineno=354, end_col_offset=35), lineno=354, col_offset=8, end_lineno=354, end_col_offset=35), Assign(targets=[Name(id='violation_types', ctx=Store(), lineno=355, col_offset=8, end_lineno=355, end_col_offset=23)], value=SetComp(elt=Attribute(value=Name(id='v', ctx=Load(), lineno=355, col_offset=27, end_lineno=355, end_col_offset=28), attr='violation_type', ctx=Load(), lineno=355, col_offset=27, end_lineno=355, end_col_offset=43), generators=[comprehension(target=Name(id='v', ctx=Store(), lineno=355, col_offset=48, end_lineno=355, end_col_offset=49), iter=Name(id='violations', ctx=Load(), lineno=355, col_offset=53, end_lineno=355, end_col_offset=63), is_async=0)], lineno=355, col_offset=26, end_lineno=355, end_col_offset=64), lineno=355, col_offset=8, end_lineno=355, end_col_offset=64), Assert(test=Compare(left=Name(id='violation_types', ctx=Load(), lineno=356, col_offset=15, end_lineno=356, end_col_offset=30), ops=[Eq()], comparators=[Set(elts=[Constant(value='heavy_import', lineno=356, col_offset=35, end_lineno=356, end_col_offset=49), Constant(value='private_module', lineno=356, col_offset=51, end_lineno=356, end_col_offset=67), Constant(value='deprecated_shim', lineno=356, col_offset=69, end_lineno=356, end_col_offset=86)], lineno=356, col_offset=34, end_lineno=356, end_col_offset=87)], lineno=356, col_offset=15, end_lineno=356, end_col_offset=87), lineno=356, col_offset=8, end_lineno=356, end_col_offset=87)], returns=Constant(value=None, lineno=340, col_offset=70, end_lineno=340, end_col_offset=74), lineno=340, col_offset=4, end_lineno=356, end_col_offset=87), FunctionDef(name='test_syntactic_errors_are_handled', args=arguments(args=[arg(arg='self', lineno=358, col_offset=42, end_lineno=358, end_col_offset=46), arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=358, col_offset=58, end_lineno=358, end_col_offset=62), lineno=358, col_offset=48, end_lineno=358, end_col_offset=62)]), body=[Expr(value=Constant(value='Verify graceful handling of syntax errors.', lineno=359, col_offset=8, end_lineno=359, end_col_offset=56), lineno=359, col_offset=8, end_lineno=359, end_col_offset=56), Assign(targets=[Name(id='test_file', ctx=Store(), lineno=360, col_offset=8, end_lineno=360, end_col_offset=17)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=360, col_offset=20, end_lineno=360, end_col_offset=28), op=Div(), right=Constant(value='test.py', lineno=360, col_offset=31, end_lineno=360, end_col_offset=40), lineno=360, col_offset=20, end_lineno=360, end_col_offset=40), lineno=360, col_offset=8, end_lineno=360, end_col_offset=40), Expr(value=Call(func=Attribute(value=Name(id='test_file', ctx=Load(), lineno=361, col_offset=8, end_lineno=361, end_col_offset=17), attr='write_text', ctx=Load(), lineno=361, col_offset=8, end_lineno=361, end_col_offset=28), args=[Constant(value='import numpy\nthis is not valid python\n', lineno=361, col_offset=29, end_lineno=361, end_col_offset=71)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=361, col_offset=82, end_lineno=361, end_col_offset=89), lineno=361, col_offset=73, end_lineno=361, end_col_offset=89)], lineno=361, col_offset=8, end_lineno=361, end_col_offset=90), lineno=361, col_offset=8, end_lineno=361, end_col_offset=90), Assign(targets=[Name(id='violations', ctx=Store(), lineno=363, col_offset=8, end_lineno=363, end_col_offset=18)], value=Call(func=Name(id='check_file', ctx=Load(), lineno=363, col_offset=21, end_lineno=363, end_col_offset=31), args=[Name(id='test_file', ctx=Load(), lineno=363, col_offset=32, end_lineno=363, end_col_offset=41)], lineno=363, col_offset=21, end_lineno=363, end_col_offset=42), lineno=363, col_offset=8, end_lineno=363, end_col_offset=42), Assert(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=365, col_offset=15, end_lineno=365, end_col_offset=25), args=[Name(id='violations', ctx=Load(), lineno=365, col_offset=26, end_lineno=365, end_col_offset=36), Name(id='list', ctx=Load(), lineno=365, col_offset=38, end_lineno=365, end_col_offset=42)], lineno=365, col_offset=15, end_lineno=365, end_col_offset=43), lineno=365, col_offset=8, end_lineno=365, end_col_offset=43)], returns=Constant(value=None, lineno=358, col_offset=67, end_lineno=358, end_col_offset=71), lineno=358, col_offset=4, end_lineno=365, end_col_offset=43), FunctionDef(name='test_violation_line_numbers_are_accurate', args=arguments(args=[arg(arg='self', lineno=367, col_offset=49, end_lineno=367, end_col_offset=53), arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=367, col_offset=65, end_lineno=367, end_col_offset=69), lineno=367, col_offset=55, end_lineno=367, end_col_offset=69)]), body=[Expr(value=Constant(value='Verify line numbers in violations are accurate.', lineno=368, col_offset=8, end_lineno=368, end_col_offset=61), lineno=368, col_offset=8, end_lineno=368, end_col_offset=61), Assign(targets=[Name(id='test_file', ctx=Store(), lineno=369, col_offset=8, end_lineno=369, end_col_offset=17)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=369, col_offset=20, end_lineno=369, end_col_offset=28), op=Div(), right=Constant(value='test.py', lineno=369, col_offset=31, end_lineno=369, end_col_offset=40), lineno=369, col_offset=20, end_lineno=369, end_col_offset=40), lineno=369, col_offset=8, end_lineno=369, end_col_offset=40), Expr(value=Call(func=Attribute(value=Name(id='test_file', ctx=Load(), lineno=370, col_offset=8, end_lineno=370, end_col_offset=17), attr='write_text', ctx=Load(), lineno=370, col_offset=8, end_lineno=370, end_col_offset=28), args=[Constant(value='\n# Line 1\n# Line 2\nimport numpy  # Line 3\n', lineno=371, col_offset=12, end_lineno=375, end_col_offset=3)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=376, col_offset=21, end_lineno=376, end_col_offset=28), lineno=376, col_offset=12, end_lineno=376, end_col_offset=28)], lineno=370, col_offset=8, end_lineno=377, end_col_offset=9), lineno=370, col_offset=8, end_lineno=377, end_col_offset=9), Assign(targets=[Name(id='violations', ctx=Store(), lineno=379, col_offset=8, end_lineno=379, end_col_offset=18)], value=Call(func=Name(id='check_file', ctx=Load(), lineno=379, col_offset=21, end_lineno=379, end_col_offset=31), args=[Name(id='test_file', ctx=Load(), lineno=379, col_offset=32, end_lineno=379, end_col_offset=41)], lineno=379, col_offset=21, end_lineno=379, end_col_offset=42), lineno=379, col_offset=8, end_lineno=379, end_col_offset=42), Assert(test=Compare(left=Call(func=Name(id='len', ctx=Load(), lineno=380, col_offset=15, end_lineno=380, end_col_offset=18), args=[Name(id='violations', ctx=Load(), lineno=380, col_offset=19, end_lineno=380, end_col_offset=29)], lineno=380, col_offset=15, end_lineno=380, end_col_offset=30), ops=[Eq()], comparators=[Constant(value=1, lineno=380, col_offset=34, end_lineno=380, end_col_offset=35)], lineno=380, col_offset=15, end_lineno=380, end_col_offset=35), lineno=380, col_offset=8, end_lineno=380, end_col_offset=35), Assert(test=Compare(left=Attribute(value=Subscript(value=Name(id='violations', ctx=Load(), lineno=381, col_offset=15, end_lineno=381, end_col_offset=25), slice=Constant(value=0, lineno=381, col_offset=26, end_lineno=381, end_col_offset=27), ctx=Load(), lineno=381, col_offset=15, end_lineno=381, end_col_offset=28), attr='lineno', ctx=Load(), lineno=381, col_offset=15, end_lineno=381, end_col_offset=35), ops=[Eq()], comparators=[Constant(value=4, lineno=381, col_offset=39, end_lineno=381, end_col_offset=40)], lineno=381, col_offset=15, end_lineno=381, end_col_offset=40), lineno=381, col_offset=8, end_lineno=381, end_col_offset=40)], returns=Constant(value=None, lineno=367, col_offset=74, end_lineno=367, end_col_offset=78), lineno=367, col_offset=4, end_lineno=381, end_col_offset=40)], lineno=310, col_offset=0, end_lineno=381, end_col_offset=40)])
Module(body=[Expr(value=Constant(value='Regression tests for FAISS module adaptation helpers.', lineno=1, col_offset=0, end_lineno=1, end_col_offset=59), lineno=1, col_offset=0, end_lineno=1, end_col_offset=59), ImportFrom(module='__future__', names=[alias(name='annotations', lineno=3, col_offset=23, end_lineno=3, end_col_offset=34)], level=0, lineno=3, col_offset=0, end_lineno=3, end_col_offset=34), ImportFrom(module='typing', names=[alias(name='TYPE_CHECKING', lineno=5, col_offset=19, end_lineno=5, end_col_offset=32)], level=0, lineno=5, col_offset=0, end_lineno=5, end_col_offset=32), Import(names=[alias(name='numpy', asname='np', lineno=7, col_offset=7, end_lineno=7, end_col_offset=18)], lineno=7, col_offset=0, end_lineno=7, end_col_offset=18), Import(names=[alias(name='pytest', lineno=8, col_offset=7, end_lineno=8, end_col_offset=13)], lineno=8, col_offset=0, end_lineno=8, end_col_offset=13), ImportFrom(module='search_api.types', names=[alias(name='wrap_faiss_module', lineno=10, col_offset=29, end_lineno=10, end_col_offset=46)], level=0, lineno=10, col_offset=0, end_lineno=10, end_col_offset=46), If(test=Name(id='TYPE_CHECKING', ctx=Load(), lineno=12, col_offset=3, end_lineno=12, end_col_offset=16), body=[ImportFrom(module='collections.abc', names=[alias(name='Callable', lineno=13, col_offset=32, end_lineno=13, end_col_offset=40)], level=0, lineno=13, col_offset=4, end_lineno=13, end_col_offset=40), ImportFrom(module='pathlib', names=[alias(name='Path', lineno=14, col_offset=24, end_lineno=14, end_col_offset=28)], level=0, lineno=14, col_offset=4, end_lineno=14, end_col_offset=28), Import(names=[alias(name='numpy.typing', asname='npt', lineno=16, col_offset=11, end_lineno=16, end_col_offset=30)], lineno=16, col_offset=4, end_lineno=16, end_col_offset=30), ImportFrom(module='search_api.types', names=[alias(name='FaissIndexProtocol', lineno=18, col_offset=33, end_lineno=18, end_col_offset=51), alias(name='IndexArray', lineno=18, col_offset=53, end_lineno=18, end_col_offset=63), alias(name='VectorArray', lineno=18, col_offset=65, end_lineno=18, end_col_offset=76)], level=0, lineno=18, col_offset=4, end_lineno=18, end_col_offset=76)], lineno=12, col_offset=0, end_lineno=18, end_col_offset=76), ClassDef(name='_FakeIndex', body=[Expr(value=Constant(value="Fake FAISS index for testing.\n\n    This class provides a minimal implementation of the FAISS index protocol\n    that records method calls and state changes. It's used to test FAISS\n    adapter behavior without requiring actual FAISS library dependencies.\n\n    Parameters\n    ----------\n    label : str\n        Label identifier for this index instance, used for debugging and\n        distinguishing between multiple index instances in tests.\n    ", lineno=22, col_offset=4, end_lineno=33, end_col_offset=7), lineno=22, col_offset=4, end_lineno=33, end_col_offset=7), FunctionDef(name='__init__', args=arguments(args=[arg(arg='self', lineno=35, col_offset=17, end_lineno=35, end_col_offset=21), arg(arg='label', annotation=Name(id='str', ctx=Load(), lineno=35, col_offset=30, end_lineno=35, end_col_offset=33), lineno=35, col_offset=23, end_lineno=35, end_col_offset=33)]), body=[Assign(targets=[Attribute(value=Name(id='self', ctx=Load(), lineno=36, col_offset=8, end_lineno=36, end_col_offset=12), attr='label', ctx=Store(), lineno=36, col_offset=8, end_lineno=36, end_col_offset=18)], value=Name(id='label', ctx=Load(), lineno=36, col_offset=21, end_lineno=36, end_col_offset=26), lineno=36, col_offset=8, end_lineno=36, end_col_offset=26), AnnAssign(target=Attribute(value=Name(id='self', ctx=Load(), lineno=37, col_offset=8, end_lineno=37, end_col_offset=12), attr='last_added', ctx=Store(), lineno=37, col_offset=8, end_lineno=37, end_col_offset=23), annotation=BinOp(left=Name(id='VectorArray', ctx=Load(), lineno=37, col_offset=25, end_lineno=37, end_col_offset=36), op=BitOr(), right=Constant(value=None, lineno=37, col_offset=39, end_lineno=37, end_col_offset=43), lineno=37, col_offset=25, end_lineno=37, end_col_offset=43), value=Constant(value=None, lineno=37, col_offset=46, end_lineno=37, end_col_offset=50), simple=0, lineno=37, col_offset=8, end_lineno=37, end_col_offset=50), AnnAssign(target=Attribute(value=Name(id='self', ctx=Load(), lineno=38, col_offset=8, end_lineno=38, end_col_offset=12), attr='last_added_with_ids', ctx=Store(), lineno=38, col_offset=8, end_lineno=38, end_col_offset=32), annotation=BinOp(left=Subscript(value=Name(id='tuple', ctx=Load(), lineno=38, col_offset=34, end_lineno=38, end_col_offset=39), slice=Tuple(elts=[Name(id='VectorArray', ctx=Load(), lineno=38, col_offset=40, end_lineno=38, end_col_offset=51), Name(id='IndexArray', ctx=Load(), lineno=38, col_offset=53, end_lineno=38, end_col_offset=63)], ctx=Load(), lineno=38, col_offset=40, end_lineno=38, end_col_offset=63), ctx=Load(), lineno=38, col_offset=34, end_lineno=38, end_col_offset=64), op=BitOr(), right=Constant(value=None, lineno=38, col_offset=67, end_lineno=38, end_col_offset=71), lineno=38, col_offset=34, end_lineno=38, end_col_offset=71), value=Constant(value=None, lineno=38, col_offset=74, end_lineno=38, end_col_offset=78), simple=0, lineno=38, col_offset=8, end_lineno=38, end_col_offset=78), AnnAssign(target=Attribute(value=Name(id='self', ctx=Load(), lineno=39, col_offset=8, end_lineno=39, end_col_offset=12), attr='last_trained', ctx=Store(), lineno=39, col_offset=8, end_lineno=39, end_col_offset=25), annotation=BinOp(left=Name(id='VectorArray', ctx=Load(), lineno=39, col_offset=27, end_lineno=39, end_col_offset=38), op=BitOr(), right=Constant(value=None, lineno=39, col_offset=41, end_lineno=39, end_col_offset=45), lineno=39, col_offset=27, end_lineno=39, end_col_offset=45), value=Constant(value=None, lineno=39, col_offset=48, end_lineno=39, end_col_offset=52), simple=0, lineno=39, col_offset=8, end_lineno=39, end_col_offset=52)], returns=Constant(value=None, lineno=35, col_offset=38, end_lineno=35, end_col_offset=42), lineno=35, col_offset=4, end_lineno=39, end_col_offset=52), FunctionDef(name='add', args=arguments(args=[arg(arg='self', lineno=41, col_offset=12, end_lineno=41, end_col_offset=16), arg(arg='vectors', annotation=Name(id='VectorArray', ctx=Load(), lineno=41, col_offset=27, end_lineno=41, end_col_offset=38), lineno=41, col_offset=18, end_lineno=41, end_col_offset=38)]), body=[Expr(value=Constant(value='Add vectors to index.\n\n        Parameters\n        ----------\n        vectors : VectorArray\n            Vectors to add.\n        ', lineno=42, col_offset=8, end_lineno=48, end_col_offset=11), lineno=42, col_offset=8, end_lineno=48, end_col_offset=11), Assign(targets=[Attribute(value=Name(id='self', ctx=Load(), lineno=49, col_offset=8, end_lineno=49, end_col_offset=12), attr='last_added', ctx=Store(), lineno=49, col_offset=8, end_lineno=49, end_col_offset=23)], value=Name(id='vectors', ctx=Load(), lineno=49, col_offset=26, end_lineno=49, end_col_offset=33), lineno=49, col_offset=8, end_lineno=49, end_col_offset=33)], returns=Constant(value=None, lineno=41, col_offset=43, end_lineno=41, end_col_offset=47), lineno=41, col_offset=4, end_lineno=49, end_col_offset=33), FunctionDef(name='search', args=arguments(args=[arg(arg='self', lineno=52, col_offset=8, end_lineno=52, end_col_offset=12), arg(arg='vectors', annotation=Name(id='VectorArray', ctx=Load(), lineno=52, col_offset=23, end_lineno=52, end_col_offset=34), lineno=52, col_offset=14, end_lineno=52, end_col_offset=34), arg(arg='k', annotation=Name(id='int', ctx=Load(), lineno=52, col_offset=39, end_lineno=52, end_col_offset=42), lineno=52, col_offset=36, end_lineno=52, end_col_offset=42)]), body=[Expr(value=Constant(value='Search for nearest neighbors.\n\n        Parameters\n        ----------\n        vectors : VectorArray\n            Query vectors.\n        k : int\n            Number of neighbors to return.\n\n        Returns\n        -------\n        tuple[npt.NDArray[np.float32], npt.NDArray[np.int64]]\n            Tuple of (distances, indices).\n        ', lineno=56, col_offset=8, end_lineno=69, end_col_offset=11), lineno=56, col_offset=8, end_lineno=69, end_col_offset=11), Assign(targets=[Name(id='distances', ctx=Store(), lineno=70, col_offset=8, end_lineno=70, end_col_offset=17)], value=Call(func=Attribute(value=Name(id='np', ctx=Load(), lineno=70, col_offset=20, end_lineno=70, end_col_offset=22), attr='zeros', ctx=Load(), lineno=70, col_offset=20, end_lineno=70, end_col_offset=28), args=[Tuple(elts=[Subscript(value=Attribute(value=Name(id='vectors', ctx=Load(), lineno=70, col_offset=30, end_lineno=70, end_col_offset=37), attr='shape', ctx=Load(), lineno=70, col_offset=30, end_lineno=70, end_col_offset=43), slice=Constant(value=0, lineno=70, col_offset=44, end_lineno=70, end_col_offset=45), ctx=Load(), lineno=70, col_offset=30, end_lineno=70, end_col_offset=46), Name(id='k', ctx=Load(), lineno=70, col_offset=48, end_lineno=70, end_col_offset=49)], ctx=Load(), lineno=70, col_offset=29, end_lineno=70, end_col_offset=50)], keywords=[keyword(arg='dtype', value=Attribute(value=Name(id='np', ctx=Load(), lineno=70, col_offset=58, end_lineno=70, end_col_offset=60), attr='float32', ctx=Load(), lineno=70, col_offset=58, end_lineno=70, end_col_offset=68), lineno=70, col_offset=52, end_lineno=70, end_col_offset=68)], lineno=70, col_offset=20, end_lineno=70, end_col_offset=69), lineno=70, col_offset=8, end_lineno=70, end_col_offset=69), Assign(targets=[Name(id='indices', ctx=Store(), lineno=71, col_offset=8, end_lineno=71, end_col_offset=15)], value=Call(func=Attribute(value=Name(id='np', ctx=Load(), lineno=71, col_offset=18, end_lineno=71, end_col_offset=20), attr='zeros', ctx=Load(), lineno=71, col_offset=18, end_lineno=71, end_col_offset=26), args=[Tuple(elts=[Subscript(value=Attribute(value=Name(id='vectors', ctx=Load(), lineno=71, col_offset=28, end_lineno=71, end_col_offset=35), attr='shape', ctx=Load(), lineno=71, col_offset=28, end_lineno=71, end_col_offset=41), slice=Constant(value=0, lineno=71, col_offset=42, end_lineno=71, end_col_offset=43), ctx=Load(), lineno=71, col_offset=28, end_lineno=71, end_col_offset=44), Name(id='k', ctx=Load(), lineno=71, col_offset=46, end_lineno=71, end_col_offset=47)], ctx=Load(), lineno=71, col_offset=27, end_lineno=71, end_col_offset=48)], keywords=[keyword(arg='dtype', value=Attribute(value=Name(id='np', ctx=Load(), lineno=71, col_offset=56, end_lineno=71, end_col_offset=58), attr='int64', ctx=Load(), lineno=71, col_offset=56, end_lineno=71, end_col_offset=64), lineno=71, col_offset=50, end_lineno=71, end_col_offset=64)], lineno=71, col_offset=18, end_lineno=71, end_col_offset=65), lineno=71, col_offset=8, end_lineno=71, end_col_offset=65), Return(value=Tuple(elts=[Name(id='distances', ctx=Load(), lineno=72, col_offset=15, end_lineno=72, end_col_offset=24), Name(id='indices', ctx=Load(), lineno=72, col_offset=26, end_lineno=72, end_col_offset=33)], ctx=Load(), lineno=72, col_offset=15, end_lineno=72, end_col_offset=33), lineno=72, col_offset=8, end_lineno=72, end_col_offset=33)], returns=Subscript(value=Name(id='tuple', ctx=Load(), lineno=53, col_offset=9, end_lineno=53, end_col_offset=14), slice=Tuple(elts=[Subscript(value=Attribute(value=Name(id='npt', ctx=Load(), lineno=54, col_offset=8, end_lineno=54, end_col_offset=11), attr='NDArray', ctx=Load(), lineno=54, col_offset=8, end_lineno=54, end_col_offset=19), slice=Attribute(value=Name(id='np', ctx=Load(), lineno=54, col_offset=20, end_lineno=54, end_col_offset=22), attr='float32', ctx=Load(), lineno=54, col_offset=20, end_lineno=54, end_col_offset=30), ctx=Load(), lineno=54, col_offset=8, end_lineno=54, end_col_offset=31), Subscript(value=Attribute(value=Name(id='npt', ctx=Load(), lineno=54, col_offset=33, end_lineno=54, end_col_offset=36), attr='NDArray', ctx=Load(), lineno=54, col_offset=33, end_lineno=54, end_col_offset=44), slice=Attribute(value=Name(id='np', ctx=Load(), lineno=54, col_offset=45, end_lineno=54, end_col_offset=47), attr='int64', ctx=Load(), lineno=54, col_offset=45, end_lineno=54, end_col_offset=53), ctx=Load(), lineno=54, col_offset=33, end_lineno=54, end_col_offset=54)], ctx=Load(), lineno=54, col_offset=8, end_lineno=54, end_col_offset=54), ctx=Load(), lineno=53, col_offset=9, end_lineno=55, end_col_offset=5), lineno=51, col_offset=4, end_lineno=72, end_col_offset=33), FunctionDef(name='train', args=arguments(args=[arg(arg='self', lineno=74, col_offset=14, end_lineno=74, end_col_offset=18), arg(arg='vectors', annotation=Name(id='VectorArray', ctx=Load(), lineno=74, col_offset=29, end_lineno=74, end_col_offset=40), lineno=74, col_offset=20, end_lineno=74, end_col_offset=40)]), body=[Expr(value=Constant(value='Train index on vectors.\n\n        Parameters\n        ----------\n        vectors : VectorArray\n            Training vectors.\n        ', lineno=75, col_offset=8, end_lineno=81, end_col_offset=11), lineno=75, col_offset=8, end_lineno=81, end_col_offset=11), Assign(targets=[Attribute(value=Name(id='self', ctx=Load(), lineno=82, col_offset=8, end_lineno=82, end_col_offset=12), attr='last_trained', ctx=Store(), lineno=82, col_offset=8, end_lineno=82, end_col_offset=25)], value=Name(id='vectors', ctx=Load(), lineno=82, col_offset=28, end_lineno=82, end_col_offset=35), lineno=82, col_offset=8, end_lineno=82, end_col_offset=35)], returns=Constant(value=None, lineno=74, col_offset=45, end_lineno=74, end_col_offset=49), lineno=74, col_offset=4, end_lineno=82, end_col_offset=35), FunctionDef(name='add_with_ids', args=arguments(args=[arg(arg='self', lineno=85, col_offset=8, end_lineno=85, end_col_offset=12), arg(arg='vectors', annotation=Name(id='VectorArray', ctx=Load(), lineno=85, col_offset=23, end_lineno=85, end_col_offset=34), lineno=85, col_offset=14, end_lineno=85, end_col_offset=34), arg(arg='ids', annotation=Name(id='IndexArray', ctx=Load(), lineno=85, col_offset=41, end_lineno=85, end_col_offset=51), lineno=85, col_offset=36, end_lineno=85, end_col_offset=51)]), body=[Expr(value=Constant(value='Add vectors with explicit IDs.\n\n        Parameters\n        ----------\n        vectors : VectorArray\n            Vectors to add.\n        ids : IndexArray\n            Vector IDs.\n        ', lineno=87, col_offset=8, end_lineno=95, end_col_offset=11), lineno=87, col_offset=8, end_lineno=95, end_col_offset=11), Assign(targets=[Attribute(value=Name(id='self', ctx=Load(), lineno=96, col_offset=8, end_lineno=96, end_col_offset=12), attr='last_added_with_ids', ctx=Store(), lineno=96, col_offset=8, end_lineno=96, end_col_offset=32)], value=Tuple(elts=[Name(id='vectors', ctx=Load(), lineno=96, col_offset=36, end_lineno=96, end_col_offset=43), Name(id='ids', ctx=Load(), lineno=96, col_offset=45, end_lineno=96, end_col_offset=48)], ctx=Load(), lineno=96, col_offset=35, end_lineno=96, end_col_offset=49), lineno=96, col_offset=8, end_lineno=96, end_col_offset=49)], returns=Constant(value=None, lineno=86, col_offset=9, end_lineno=86, end_col_offset=13), lineno=84, col_offset=4, end_lineno=96, end_col_offset=49)], lineno=21, col_offset=0, end_lineno=96, end_col_offset=49), ClassDef(name='_LegacyFaissModule', body=[Expr(value=Constant(value='Mock legacy FAISS module with camelCase names.\n\n    This mock module simulates the legacy FAISS API that uses camelCase method\n    names (e.g., ``indexFactory``, ``IndexFlatIP``). It records all method calls\n    and provides configurable return values for testing adapter compatibility\n    with legacy FAISS implementations.\n\n    Notes\n    -----\n    This module uses camelCase naming conventions consistent with older FAISS\n    Python bindings. The mock records method invocations to enable verification\n    of adapter behavior.\n    ', lineno=100, col_offset=4, end_lineno=112, end_col_offset=7), lineno=100, col_offset=4, end_lineno=112, end_col_offset=7), Assign(targets=[Name(id='METRIC_INNER_PRODUCT', ctx=Store(), lineno=114, col_offset=4, end_lineno=114, end_col_offset=24)], value=Constant(value=0, lineno=114, col_offset=27, end_lineno=114, end_col_offset=28), lineno=114, col_offset=4, end_lineno=114, end_col_offset=28), Assign(targets=[Name(id='METRIC_L2', ctx=Store(), lineno=115, col_offset=4, end_lineno=115, end_col_offset=13)], value=Constant(value=1, lineno=115, col_offset=16, end_lineno=115, end_col_offset=17), lineno=115, col_offset=4, end_lineno=115, end_col_offset=17), FunctionDef(name='__init__', args=arguments(args=[arg(arg='self', lineno=117, col_offset=17, end_lineno=117, end_col_offset=21)]), body=[AnnAssign(target=Attribute(value=Name(id='self', ctx=Load(), lineno=118, col_offset=8, end_lineno=118, end_col_offset=12), attr='index_factory_calls', ctx=Store(), lineno=118, col_offset=8, end_lineno=118, end_col_offset=32), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=118, col_offset=34, end_lineno=118, end_col_offset=38), slice=Subscript(value=Name(id='tuple', ctx=Load(), lineno=118, col_offset=39, end_lineno=118, end_col_offset=44), slice=Tuple(elts=[Name(id='int', ctx=Load(), lineno=118, col_offset=45, end_lineno=118, end_col_offset=48), Name(id='str', ctx=Load(), lineno=118, col_offset=50, end_lineno=118, end_col_offset=53), Name(id='int', ctx=Load(), lineno=118, col_offset=55, end_lineno=118, end_col_offset=58)], ctx=Load(), lineno=118, col_offset=45, end_lineno=118, end_col_offset=58), ctx=Load(), lineno=118, col_offset=39, end_lineno=118, end_col_offset=59), ctx=Load(), lineno=118, col_offset=34, end_lineno=118, end_col_offset=60), value=List(ctx=Load(), lineno=118, col_offset=63, end_lineno=118, end_col_offset=65), simple=0, lineno=118, col_offset=8, end_lineno=118, end_col_offset=65), AnnAssign(target=Attribute(value=Name(id='self', ctx=Load(), lineno=119, col_offset=8, end_lineno=119, end_col_offset=12), attr='write_calls', ctx=Store(), lineno=119, col_offset=8, end_lineno=119, end_col_offset=24), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=119, col_offset=26, end_lineno=119, end_col_offset=30), slice=Subscript(value=Name(id='tuple', ctx=Load(), lineno=119, col_offset=31, end_lineno=119, end_col_offset=36), slice=Tuple(elts=[Name(id='FaissIndexProtocol', ctx=Load(), lineno=119, col_offset=37, end_lineno=119, end_col_offset=55), Name(id='str', ctx=Load(), lineno=119, col_offset=57, end_lineno=119, end_col_offset=60)], ctx=Load(), lineno=119, col_offset=37, end_lineno=119, end_col_offset=60), ctx=Load(), lineno=119, col_offset=31, end_lineno=119, end_col_offset=61), ctx=Load(), lineno=119, col_offset=26, end_lineno=119, end_col_offset=62), value=List(ctx=Load(), lineno=119, col_offset=65, end_lineno=119, end_col_offset=67), simple=0, lineno=119, col_offset=8, end_lineno=119, end_col_offset=67), AnnAssign(target=Attribute(value=Name(id='self', ctx=Load(), lineno=120, col_offset=8, end_lineno=120, end_col_offset=12), attr='read_path', ctx=Store(), lineno=120, col_offset=8, end_lineno=120, end_col_offset=22), annotation=BinOp(left=Name(id='str', ctx=Load(), lineno=120, col_offset=24, end_lineno=120, end_col_offset=27), op=BitOr(), right=Constant(value=None, lineno=120, col_offset=30, end_lineno=120, end_col_offset=34), lineno=120, col_offset=24, end_lineno=120, end_col_offset=34), value=Constant(value=None, lineno=120, col_offset=37, end_lineno=120, end_col_offset=41), simple=0, lineno=120, col_offset=8, end_lineno=120, end_col_offset=41), AnnAssign(target=Attribute(value=Name(id='self', ctx=Load(), lineno=121, col_offset=8, end_lineno=121, end_col_offset=12), attr='normalize_vectors', ctx=Store(), lineno=121, col_offset=8, end_lineno=121, end_col_offset=30), annotation=BinOp(left=Name(id='VectorArray', ctx=Load(), lineno=121, col_offset=32, end_lineno=121, end_col_offset=43), op=BitOr(), right=Constant(value=None, lineno=121, col_offset=46, end_lineno=121, end_col_offset=50), lineno=121, col_offset=32, end_lineno=121, end_col_offset=50), value=Constant(value=None, lineno=121, col_offset=53, end_lineno=121, end_col_offset=57), simple=0, lineno=121, col_offset=8, end_lineno=121, end_col_offset=57), AnnAssign(target=Attribute(value=Name(id='self', ctx=Load(), lineno=122, col_offset=8, end_lineno=122, end_col_offset=12), attr='index_flat_ip_dimension', ctx=Store(), lineno=122, col_offset=8, end_lineno=122, end_col_offset=36), annotation=BinOp(left=Name(id='int', ctx=Load(), lineno=122, col_offset=38, end_lineno=122, end_col_offset=41), op=BitOr(), right=Constant(value=None, lineno=122, col_offset=44, end_lineno=122, end_col_offset=48), lineno=122, col_offset=38, end_lineno=122, end_col_offset=48), value=Constant(value=None, lineno=122, col_offset=51, end_lineno=122, end_col_offset=55), simple=0, lineno=122, col_offset=8, end_lineno=122, end_col_offset=55), AnnAssign(target=Attribute(value=Name(id='self', ctx=Load(), lineno=123, col_offset=8, end_lineno=123, end_col_offset=12), attr='index_id_map2_index', ctx=Store(), lineno=123, col_offset=8, end_lineno=123, end_col_offset=32), annotation=BinOp(left=Name(id='FaissIndexProtocol', ctx=Load(), lineno=123, col_offset=34, end_lineno=123, end_col_offset=52), op=BitOr(), right=Constant(value=None, lineno=123, col_offset=55, end_lineno=123, end_col_offset=59), lineno=123, col_offset=34, end_lineno=123, end_col_offset=59), value=Constant(value=None, lineno=123, col_offset=62, end_lineno=123, end_col_offset=66), simple=0, lineno=123, col_offset=8, end_lineno=123, end_col_offset=66), FunctionDef(name='index_flat_ip_impl', args=arguments(args=[arg(arg='dimension', annotation=Name(id='int', ctx=Load(), lineno=125, col_offset=42, end_lineno=125, end_col_offset=45), lineno=125, col_offset=31, end_lineno=125, end_col_offset=45)]), body=[Expr(value=Constant(value='Create flat IP index.\n\n            Parameters\n            ----------\n            dimension : int\n                Vector dimension.\n\n            Returns\n            -------\n            FaissIndexProtocol\n                Index instance.\n            ', lineno=126, col_offset=12, end_lineno=137, end_col_offset=15), lineno=126, col_offset=12, end_lineno=137, end_col_offset=15), Assign(targets=[Attribute(value=Name(id='self', ctx=Load(), lineno=138, col_offset=12, end_lineno=138, end_col_offset=16), attr='index_flat_ip_dimension', ctx=Store(), lineno=138, col_offset=12, end_lineno=138, end_col_offset=40)], value=Name(id='dimension', ctx=Load(), lineno=138, col_offset=43, end_lineno=138, end_col_offset=52), lineno=138, col_offset=12, end_lineno=138, end_col_offset=52), Return(value=Call(func=Name(id='_FakeIndex', ctx=Load(), lineno=139, col_offset=19, end_lineno=139, end_col_offset=29), args=[Constant(value='flat', lineno=139, col_offset=30, end_lineno=139, end_col_offset=36)], lineno=139, col_offset=19, end_lineno=139, end_col_offset=37), lineno=139, col_offset=12, end_lineno=139, end_col_offset=37)], returns=Name(id='FaissIndexProtocol', ctx=Load(), lineno=125, col_offset=50, end_lineno=125, end_col_offset=68), lineno=125, col_offset=8, end_lineno=139, end_col_offset=37), FunctionDef(name='index_id_map2_impl', args=arguments(args=[arg(arg='index', annotation=Name(id='FaissIndexProtocol', ctx=Load(), lineno=141, col_offset=38, end_lineno=141, end_col_offset=56), lineno=141, col_offset=31, end_lineno=141, end_col_offset=56)]), body=[Expr(value=Constant(value='Create ID map wrapper.\n\n            Parameters\n            ----------\n            index : FaissIndexProtocol\n                Base index.\n\n            Returns\n            -------\n            FaissIndexProtocol\n                Wrapped index.\n            ', lineno=142, col_offset=12, end_lineno=153, end_col_offset=15), lineno=142, col_offset=12, end_lineno=153, end_col_offset=15), Assign(targets=[Attribute(value=Name(id='self', ctx=Load(), lineno=154, col_offset=12, end_lineno=154, end_col_offset=16), attr='index_id_map2_index', ctx=Store(), lineno=154, col_offset=12, end_lineno=154, end_col_offset=36)], value=Name(id='index', ctx=Load(), lineno=154, col_offset=39, end_lineno=154, end_col_offset=44), lineno=154, col_offset=12, end_lineno=154, end_col_offset=44), Return(value=Call(func=Name(id='_FakeIndex', ctx=Load(), lineno=155, col_offset=19, end_lineno=155, end_col_offset=29), args=[Constant(value='idmap', lineno=155, col_offset=30, end_lineno=155, end_col_offset=37)], lineno=155, col_offset=19, end_lineno=155, end_col_offset=38), lineno=155, col_offset=12, end_lineno=155, end_col_offset=38)], returns=Name(id='FaissIndexProtocol', ctx=Load(), lineno=141, col_offset=61, end_lineno=141, end_col_offset=79), lineno=141, col_offset=8, end_lineno=155, end_col_offset=38), FunctionDef(name='normalize_l2_impl', args=arguments(args=[arg(arg='vectors', annotation=Name(id='VectorArray', ctx=Load(), lineno=157, col_offset=39, end_lineno=157, end_col_offset=50), lineno=157, col_offset=30, end_lineno=157, end_col_offset=50)]), body=[Expr(value=Constant(value='Normalize vectors to L2 unit length.\n\n            Parameters\n            ----------\n            vectors : VectorArray\n                Vectors to normalize.\n            ', lineno=158, col_offset=12, end_lineno=164, end_col_offset=15), lineno=158, col_offset=12, end_lineno=164, end_col_offset=15), Assign(targets=[Attribute(value=Name(id='self', ctx=Load(), lineno=165, col_offset=12, end_lineno=165, end_col_offset=16), attr='normalize_vectors', ctx=Store(), lineno=165, col_offset=12, end_lineno=165, end_col_offset=34)], value=Name(id='vectors', ctx=Load(), lineno=165, col_offset=37, end_lineno=165, end_col_offset=44), lineno=165, col_offset=12, end_lineno=165, end_col_offset=44)], returns=Constant(value=None, lineno=157, col_offset=55, end_lineno=157, end_col_offset=59), lineno=157, col_offset=8, end_lineno=165, end_col_offset=44), AnnAssign(target=Attribute(value=Name(id='self', ctx=Load(), lineno=167, col_offset=8, end_lineno=167, end_col_offset=12), attr='IndexFlatIP', ctx=Store(), lineno=167, col_offset=8, end_lineno=167, end_col_offset=24), annotation=Subscript(value=Name(id='Callable', ctx=Load(), lineno=167, col_offset=26, end_lineno=167, end_col_offset=34), slice=Tuple(elts=[List(elts=[Name(id='int', ctx=Load(), lineno=167, col_offset=36, end_lineno=167, end_col_offset=39)], ctx=Load(), lineno=167, col_offset=35, end_lineno=167, end_col_offset=40), Name(id='FaissIndexProtocol', ctx=Load(), lineno=167, col_offset=42, end_lineno=167, end_col_offset=60)], ctx=Load(), lineno=167, col_offset=35, end_lineno=167, end_col_offset=60), ctx=Load(), lineno=167, col_offset=26, end_lineno=167, end_col_offset=61), value=Name(id='index_flat_ip_impl', ctx=Load(), lineno=167, col_offset=64, end_lineno=167, end_col_offset=82), simple=0, lineno=167, col_offset=8, end_lineno=167, end_col_offset=82), AnnAssign(target=Attribute(value=Name(id='self', ctx=Load(), lineno=168, col_offset=8, end_lineno=168, end_col_offset=12), attr='IndexIDMap2', ctx=Store(), lineno=168, col_offset=8, end_lineno=168, end_col_offset=24), annotation=Subscript(value=Name(id='Callable', ctx=Load(), lineno=168, col_offset=26, end_lineno=168, end_col_offset=34), slice=Tuple(elts=[List(elts=[Name(id='FaissIndexProtocol', ctx=Load(), lineno=168, col_offset=36, end_lineno=168, end_col_offset=54)], ctx=Load(), lineno=168, col_offset=35, end_lineno=168, end_col_offset=55), Name(id='FaissIndexProtocol', ctx=Load(), lineno=168, col_offset=57, end_lineno=168, end_col_offset=75)], ctx=Load(), lineno=168, col_offset=35, end_lineno=168, end_col_offset=75), ctx=Load(), lineno=168, col_offset=26, end_lineno=168, end_col_offset=76), value=Name(id='index_id_map2_impl', ctx=Load(), lineno=168, col_offset=79, end_lineno=168, end_col_offset=97), simple=0, lineno=168, col_offset=8, end_lineno=168, end_col_offset=97), AnnAssign(target=Attribute(value=Name(id='self', ctx=Load(), lineno=169, col_offset=8, end_lineno=169, end_col_offset=12), attr='normalize_L2', ctx=Store(), lineno=169, col_offset=8, end_lineno=169, end_col_offset=25), annotation=Subscript(value=Name(id='Callable', ctx=Load(), lineno=169, col_offset=27, end_lineno=169, end_col_offset=35), slice=Tuple(elts=[List(elts=[Name(id='VectorArray', ctx=Load(), lineno=169, col_offset=37, end_lineno=169, end_col_offset=48)], ctx=Load(), lineno=169, col_offset=36, end_lineno=169, end_col_offset=49), Constant(value=None, lineno=169, col_offset=51, end_lineno=169, end_col_offset=55)], ctx=Load(), lineno=169, col_offset=36, end_lineno=169, end_col_offset=55), ctx=Load(), lineno=169, col_offset=27, end_lineno=169, end_col_offset=56), value=Name(id='normalize_l2_impl', ctx=Load(), lineno=169, col_offset=59, end_lineno=169, end_col_offset=76), simple=0, lineno=169, col_offset=8, end_lineno=169, end_col_offset=76)], returns=Constant(value=None, lineno=117, col_offset=26, end_lineno=117, end_col_offset=30), lineno=117, col_offset=4, end_lineno=169, end_col_offset=76), FunctionDef(name='index_factory', args=arguments(args=[arg(arg='self', lineno=171, col_offset=22, end_lineno=171, end_col_offset=26), arg(arg='dimension', annotation=Name(id='int', ctx=Load(), lineno=171, col_offset=39, end_lineno=171, end_col_offset=42), lineno=171, col_offset=28, end_lineno=171, end_col_offset=42), arg(arg='factory_string', annotation=Name(id='str', ctx=Load(), lineno=171, col_offset=60, end_lineno=171, end_col_offset=63), lineno=171, col_offset=44, end_lineno=171, end_col_offset=63), arg(arg='metric', annotation=Name(id='int', ctx=Load(), lineno=171, col_offset=73, end_lineno=171, end_col_offset=76), lineno=171, col_offset=65, end_lineno=171, end_col_offset=76)]), body=[Expr(value=Constant(value='Create index using factory string.\n\n        Parameters\n        ----------\n        dimension : int\n            Vector dimension.\n        factory_string : str\n            Factory description string.\n        metric : int\n            Distance metric constant.\n\n        Returns\n        -------\n        FaissIndexProtocol\n            Index instance.\n        ', lineno=172, col_offset=8, end_lineno=187, end_col_offset=11), lineno=172, col_offset=8, end_lineno=187, end_col_offset=11), Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='self', ctx=Load(), lineno=188, col_offset=8, end_lineno=188, end_col_offset=12), attr='index_factory_calls', ctx=Load(), lineno=188, col_offset=8, end_lineno=188, end_col_offset=32), attr='append', ctx=Load(), lineno=188, col_offset=8, end_lineno=188, end_col_offset=39), args=[Tuple(elts=[Name(id='dimension', ctx=Load(), lineno=188, col_offset=41, end_lineno=188, end_col_offset=50), Name(id='factory_string', ctx=Load(), lineno=188, col_offset=52, end_lineno=188, end_col_offset=66), Name(id='metric', ctx=Load(), lineno=188, col_offset=68, end_lineno=188, end_col_offset=74)], ctx=Load(), lineno=188, col_offset=40, end_lineno=188, end_col_offset=75)], lineno=188, col_offset=8, end_lineno=188, end_col_offset=76), lineno=188, col_offset=8, end_lineno=188, end_col_offset=76), Return(value=Call(func=Name(id='_FakeIndex', ctx=Load(), lineno=189, col_offset=15, end_lineno=189, end_col_offset=25), args=[Constant(value='factory', lineno=189, col_offset=26, end_lineno=189, end_col_offset=35)], lineno=189, col_offset=15, end_lineno=189, end_col_offset=36), lineno=189, col_offset=8, end_lineno=189, end_col_offset=36)], returns=Name(id='FaissIndexProtocol', ctx=Load(), lineno=171, col_offset=81, end_lineno=171, end_col_offset=99), lineno=171, col_offset=4, end_lineno=189, end_col_offset=36), FunctionDef(name='write_index', args=arguments(args=[arg(arg='self', lineno=191, col_offset=20, end_lineno=191, end_col_offset=24), arg(arg='index', annotation=Name(id='FaissIndexProtocol', ctx=Load(), lineno=191, col_offset=33, end_lineno=191, end_col_offset=51), lineno=191, col_offset=26, end_lineno=191, end_col_offset=51), arg(arg='path', annotation=Name(id='str', ctx=Load(), lineno=191, col_offset=59, end_lineno=191, end_col_offset=62), lineno=191, col_offset=53, end_lineno=191, end_col_offset=62)]), body=[Expr(value=Constant(value='Write index to file.\n\n        Parameters\n        ----------\n        index : FaissIndexProtocol\n            Index to write.\n        path : str\n            Output file path.\n        ', lineno=192, col_offset=8, end_lineno=200, end_col_offset=11), lineno=192, col_offset=8, end_lineno=200, end_col_offset=11), Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='self', ctx=Load(), lineno=201, col_offset=8, end_lineno=201, end_col_offset=12), attr='write_calls', ctx=Load(), lineno=201, col_offset=8, end_lineno=201, end_col_offset=24), attr='append', ctx=Load(), lineno=201, col_offset=8, end_lineno=201, end_col_offset=31), args=[Tuple(elts=[Name(id='index', ctx=Load(), lineno=201, col_offset=33, end_lineno=201, end_col_offset=38), Name(id='path', ctx=Load(), lineno=201, col_offset=40, end_lineno=201, end_col_offset=44)], ctx=Load(), lineno=201, col_offset=32, end_lineno=201, end_col_offset=45)], lineno=201, col_offset=8, end_lineno=201, end_col_offset=46), lineno=201, col_offset=8, end_lineno=201, end_col_offset=46)], returns=Constant(value=None, lineno=191, col_offset=67, end_lineno=191, end_col_offset=71), lineno=191, col_offset=4, end_lineno=201, end_col_offset=46), FunctionDef(name='read_index', args=arguments(args=[arg(arg='self', lineno=203, col_offset=19, end_lineno=203, end_col_offset=23), arg(arg='path', annotation=Name(id='str', ctx=Load(), lineno=203, col_offset=31, end_lineno=203, end_col_offset=34), lineno=203, col_offset=25, end_lineno=203, end_col_offset=34)]), body=[Expr(value=Constant(value='Read index from file.\n\n        Parameters\n        ----------\n        path : str\n            Input file path.\n\n        Returns\n        -------\n        FaissIndexProtocol\n            Index instance.\n        ', lineno=204, col_offset=8, end_lineno=215, end_col_offset=11), lineno=204, col_offset=8, end_lineno=215, end_col_offset=11), Assign(targets=[Attribute(value=Name(id='self', ctx=Load(), lineno=216, col_offset=8, end_lineno=216, end_col_offset=12), attr='read_path', ctx=Store(), lineno=216, col_offset=8, end_lineno=216, end_col_offset=22)], value=Name(id='path', ctx=Load(), lineno=216, col_offset=25, end_lineno=216, end_col_offset=29), lineno=216, col_offset=8, end_lineno=216, end_col_offset=29), Return(value=Call(func=Name(id='_FakeIndex', ctx=Load(), lineno=217, col_offset=15, end_lineno=217, end_col_offset=25), args=[Constant(value='read', lineno=217, col_offset=26, end_lineno=217, end_col_offset=32)], lineno=217, col_offset=15, end_lineno=217, end_col_offset=33), lineno=217, col_offset=8, end_lineno=217, end_col_offset=33)], returns=Name(id='FaissIndexProtocol', ctx=Load(), lineno=203, col_offset=39, end_lineno=203, end_col_offset=57), lineno=203, col_offset=4, end_lineno=217, end_col_offset=33)], lineno=99, col_offset=0, end_lineno=217, end_col_offset=33), ClassDef(name='_ModernFaissModule', body=[Expr(value=Constant(value='Mock modern FAISS module with PEP-8 names.\n\n    This mock module simulates the modern FAISS API that uses PEP-8 compliant\n    method names (e.g., ``index_factory``, ``index_flat_ip``). It records all\n    method calls and provides configurable return values for testing adapter\n    compatibility with modern FAISS implementations.\n\n    Notes\n    -----\n    This module uses PEP-8 naming conventions consistent with newer FAISS\n    Python bindings. The mock records method invocations to enable verification\n    of adapter behavior.\n    ', lineno=221, col_offset=4, end_lineno=233, end_col_offset=7), lineno=221, col_offset=4, end_lineno=233, end_col_offset=7), Assign(targets=[Name(id='METRIC_INNER_PRODUCT', ctx=Store(), lineno=235, col_offset=4, end_lineno=235, end_col_offset=24)], value=Constant(value=2, lineno=235, col_offset=27, end_lineno=235, end_col_offset=28), lineno=235, col_offset=4, end_lineno=235, end_col_offset=28), Assign(targets=[Name(id='METRIC_L2', ctx=Store(), lineno=236, col_offset=4, end_lineno=236, end_col_offset=13)], value=Constant(value=3, lineno=236, col_offset=16, end_lineno=236, end_col_offset=17), lineno=236, col_offset=4, end_lineno=236, end_col_offset=17), FunctionDef(name='__init__', args=arguments(args=[arg(arg='self', lineno=238, col_offset=17, end_lineno=238, end_col_offset=21)]), body=[AnnAssign(target=Attribute(value=Name(id='self', ctx=Load(), lineno=239, col_offset=8, end_lineno=239, end_col_offset=12), attr='records', ctx=Store(), lineno=239, col_offset=8, end_lineno=239, end_col_offset=20), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=239, col_offset=22, end_lineno=239, end_col_offset=26), slice=Subscript(value=Name(id='tuple', ctx=Load(), lineno=239, col_offset=27, end_lineno=239, end_col_offset=32), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=239, col_offset=33, end_lineno=239, end_col_offset=36), Name(id='object', ctx=Load(), lineno=239, col_offset=38, end_lineno=239, end_col_offset=44)], ctx=Load(), lineno=239, col_offset=33, end_lineno=239, end_col_offset=44), ctx=Load(), lineno=239, col_offset=27, end_lineno=239, end_col_offset=45), ctx=Load(), lineno=239, col_offset=22, end_lineno=239, end_col_offset=46), value=List(ctx=Load(), lineno=239, col_offset=49, end_lineno=239, end_col_offset=51), simple=0, lineno=239, col_offset=8, end_lineno=239, end_col_offset=51)], returns=Constant(value=None, lineno=238, col_offset=26, end_lineno=238, end_col_offset=30), lineno=238, col_offset=4, end_lineno=239, end_col_offset=51), FunctionDef(name='index_flat_ip', args=arguments(args=[arg(arg='self', lineno=241, col_offset=22, end_lineno=241, end_col_offset=26), arg(arg='dimension', annotation=Name(id='int', ctx=Load(), lineno=241, col_offset=39, end_lineno=241, end_col_offset=42), lineno=241, col_offset=28, end_lineno=241, end_col_offset=42)]), body=[Expr(value=Constant(value='Create flat IP index.\n\n        Parameters\n        ----------\n        dimension : int\n            Vector dimension.\n\n        Returns\n        -------\n        FaissIndexProtocol\n            Index instance.\n        ', lineno=242, col_offset=8, end_lineno=253, end_col_offset=11), lineno=242, col_offset=8, end_lineno=253, end_col_offset=11), Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='self', ctx=Load(), lineno=254, col_offset=8, end_lineno=254, end_col_offset=12), attr='records', ctx=Load(), lineno=254, col_offset=8, end_lineno=254, end_col_offset=20), attr='append', ctx=Load(), lineno=254, col_offset=8, end_lineno=254, end_col_offset=27), args=[Tuple(elts=[Constant(value='flat', lineno=254, col_offset=29, end_lineno=254, end_col_offset=35), Name(id='dimension', ctx=Load(), lineno=254, col_offset=37, end_lineno=254, end_col_offset=46)], ctx=Load(), lineno=254, col_offset=28, end_lineno=254, end_col_offset=47)], lineno=254, col_offset=8, end_lineno=254, end_col_offset=48), lineno=254, col_offset=8, end_lineno=254, end_col_offset=48), Return(value=Call(func=Name(id='_FakeIndex', ctx=Load(), lineno=255, col_offset=15, end_lineno=255, end_col_offset=25), args=[Constant(value='flat', lineno=255, col_offset=26, end_lineno=255, end_col_offset=32)], lineno=255, col_offset=15, end_lineno=255, end_col_offset=33), lineno=255, col_offset=8, end_lineno=255, end_col_offset=33)], returns=Name(id='FaissIndexProtocol', ctx=Load(), lineno=241, col_offset=47, end_lineno=241, end_col_offset=65), lineno=241, col_offset=4, end_lineno=255, end_col_offset=33), FunctionDef(name='index_factory', args=arguments(args=[arg(arg='self', lineno=257, col_offset=22, end_lineno=257, end_col_offset=26), arg(arg='dimension', annotation=Name(id='int', ctx=Load(), lineno=257, col_offset=39, end_lineno=257, end_col_offset=42), lineno=257, col_offset=28, end_lineno=257, end_col_offset=42), arg(arg='factory_string', annotation=Name(id='str', ctx=Load(), lineno=257, col_offset=60, end_lineno=257, end_col_offset=63), lineno=257, col_offset=44, end_lineno=257, end_col_offset=63), arg(arg='metric', annotation=Name(id='int', ctx=Load(), lineno=257, col_offset=73, end_lineno=257, end_col_offset=76), lineno=257, col_offset=65, end_lineno=257, end_col_offset=76)]), body=[Expr(value=Constant(value='Create index using factory string.\n\n        Parameters\n        ----------\n        dimension : int\n            Vector dimension.\n        factory_string : str\n            Factory description string.\n        metric : int\n            Distance metric constant.\n\n        Returns\n        -------\n        FaissIndexProtocol\n            Index instance.\n        ', lineno=258, col_offset=8, end_lineno=273, end_col_offset=11), lineno=258, col_offset=8, end_lineno=273, end_col_offset=11), Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='self', ctx=Load(), lineno=274, col_offset=8, end_lineno=274, end_col_offset=12), attr='records', ctx=Load(), lineno=274, col_offset=8, end_lineno=274, end_col_offset=20), attr='append', ctx=Load(), lineno=274, col_offset=8, end_lineno=274, end_col_offset=27), args=[Tuple(elts=[Constant(value='factory', lineno=274, col_offset=29, end_lineno=274, end_col_offset=38), Tuple(elts=[Name(id='dimension', ctx=Load(), lineno=274, col_offset=41, end_lineno=274, end_col_offset=50), Name(id='factory_string', ctx=Load(), lineno=274, col_offset=52, end_lineno=274, end_col_offset=66), Name(id='metric', ctx=Load(), lineno=274, col_offset=68, end_lineno=274, end_col_offset=74)], ctx=Load(), lineno=274, col_offset=40, end_lineno=274, end_col_offset=75)], ctx=Load(), lineno=274, col_offset=28, end_lineno=274, end_col_offset=76)], lineno=274, col_offset=8, end_lineno=274, end_col_offset=77), lineno=274, col_offset=8, end_lineno=274, end_col_offset=77), Return(value=Call(func=Name(id='_FakeIndex', ctx=Load(), lineno=275, col_offset=15, end_lineno=275, end_col_offset=25), args=[Constant(value='factory', lineno=275, col_offset=26, end_lineno=275, end_col_offset=35)], lineno=275, col_offset=15, end_lineno=275, end_col_offset=36), lineno=275, col_offset=8, end_lineno=275, end_col_offset=36)], returns=Name(id='FaissIndexProtocol', ctx=Load(), lineno=257, col_offset=81, end_lineno=257, end_col_offset=99), lineno=257, col_offset=4, end_lineno=275, end_col_offset=36), FunctionDef(name='index_id_map2', args=arguments(args=[arg(arg='self', lineno=277, col_offset=22, end_lineno=277, end_col_offset=26), arg(arg='index', annotation=Name(id='FaissIndexProtocol', ctx=Load(), lineno=277, col_offset=35, end_lineno=277, end_col_offset=53), lineno=277, col_offset=28, end_lineno=277, end_col_offset=53)]), body=[Expr(value=Constant(value='Create ID map wrapper.\n\n        Parameters\n        ----------\n        index : FaissIndexProtocol\n            Base index.\n\n        Returns\n        -------\n        FaissIndexProtocol\n            Wrapped index.\n        ', lineno=278, col_offset=8, end_lineno=289, end_col_offset=11), lineno=278, col_offset=8, end_lineno=289, end_col_offset=11), Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='self', ctx=Load(), lineno=290, col_offset=8, end_lineno=290, end_col_offset=12), attr='records', ctx=Load(), lineno=290, col_offset=8, end_lineno=290, end_col_offset=20), attr='append', ctx=Load(), lineno=290, col_offset=8, end_lineno=290, end_col_offset=27), args=[Tuple(elts=[Constant(value='idmap', lineno=290, col_offset=29, end_lineno=290, end_col_offset=36), Name(id='index', ctx=Load(), lineno=290, col_offset=38, end_lineno=290, end_col_offset=43)], ctx=Load(), lineno=290, col_offset=28, end_lineno=290, end_col_offset=44)], lineno=290, col_offset=8, end_lineno=290, end_col_offset=45), lineno=290, col_offset=8, end_lineno=290, end_col_offset=45), Return(value=Call(func=Name(id='_FakeIndex', ctx=Load(), lineno=291, col_offset=15, end_lineno=291, end_col_offset=25), args=[Constant(value='idmap', lineno=291, col_offset=26, end_lineno=291, end_col_offset=33)], lineno=291, col_offset=15, end_lineno=291, end_col_offset=34), lineno=291, col_offset=8, end_lineno=291, end_col_offset=34)], returns=Name(id='FaissIndexProtocol', ctx=Load(), lineno=277, col_offset=58, end_lineno=277, end_col_offset=76), lineno=277, col_offset=4, end_lineno=291, end_col_offset=34), FunctionDef(name='write_index', args=arguments(args=[arg(arg='self', lineno=293, col_offset=20, end_lineno=293, end_col_offset=24), arg(arg='index', annotation=Name(id='FaissIndexProtocol', ctx=Load(), lineno=293, col_offset=33, end_lineno=293, end_col_offset=51), lineno=293, col_offset=26, end_lineno=293, end_col_offset=51), arg(arg='path', annotation=Name(id='str', ctx=Load(), lineno=293, col_offset=59, end_lineno=293, end_col_offset=62), lineno=293, col_offset=53, end_lineno=293, end_col_offset=62)]), body=[Expr(value=Constant(value='Write index to file.\n\n        Parameters\n        ----------\n        index : FaissIndexProtocol\n            Index to write.\n        path : str\n            Output file path.\n        ', lineno=294, col_offset=8, end_lineno=302, end_col_offset=11), lineno=294, col_offset=8, end_lineno=302, end_col_offset=11), Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='self', ctx=Load(), lineno=303, col_offset=8, end_lineno=303, end_col_offset=12), attr='records', ctx=Load(), lineno=303, col_offset=8, end_lineno=303, end_col_offset=20), attr='append', ctx=Load(), lineno=303, col_offset=8, end_lineno=303, end_col_offset=27), args=[Tuple(elts=[Constant(value='write', lineno=303, col_offset=29, end_lineno=303, end_col_offset=36), Tuple(elts=[Name(id='index', ctx=Load(), lineno=303, col_offset=39, end_lineno=303, end_col_offset=44), Name(id='path', ctx=Load(), lineno=303, col_offset=46, end_lineno=303, end_col_offset=50)], ctx=Load(), lineno=303, col_offset=38, end_lineno=303, end_col_offset=51)], ctx=Load(), lineno=303, col_offset=28, end_lineno=303, end_col_offset=52)], lineno=303, col_offset=8, end_lineno=303, end_col_offset=53), lineno=303, col_offset=8, end_lineno=303, end_col_offset=53)], returns=Constant(value=None, lineno=293, col_offset=67, end_lineno=293, end_col_offset=71), lineno=293, col_offset=4, end_lineno=303, end_col_offset=53), FunctionDef(name='read_index', args=arguments(args=[arg(arg='self', lineno=305, col_offset=19, end_lineno=305, end_col_offset=23), arg(arg='path', annotation=Name(id='str', ctx=Load(), lineno=305, col_offset=31, end_lineno=305, end_col_offset=34), lineno=305, col_offset=25, end_lineno=305, end_col_offset=34)]), body=[Expr(value=Constant(value='Read index from file.\n\n        Parameters\n        ----------\n        path : str\n            Input file path.\n\n        Returns\n        -------\n        FaissIndexProtocol\n            Index instance.\n        ', lineno=306, col_offset=8, end_lineno=317, end_col_offset=11), lineno=306, col_offset=8, end_lineno=317, end_col_offset=11), Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='self', ctx=Load(), lineno=318, col_offset=8, end_lineno=318, end_col_offset=12), attr='records', ctx=Load(), lineno=318, col_offset=8, end_lineno=318, end_col_offset=20), attr='append', ctx=Load(), lineno=318, col_offset=8, end_lineno=318, end_col_offset=27), args=[Tuple(elts=[Constant(value='read', lineno=318, col_offset=29, end_lineno=318, end_col_offset=35), Name(id='path', ctx=Load(), lineno=318, col_offset=37, end_lineno=318, end_col_offset=41)], ctx=Load(), lineno=318, col_offset=28, end_lineno=318, end_col_offset=42)], lineno=318, col_offset=8, end_lineno=318, end_col_offset=43), lineno=318, col_offset=8, end_lineno=318, end_col_offset=43), Return(value=Call(func=Name(id='_FakeIndex', ctx=Load(), lineno=319, col_offset=15, end_lineno=319, end_col_offset=25), args=[Constant(value='read', lineno=319, col_offset=26, end_lineno=319, end_col_offset=32)], lineno=319, col_offset=15, end_lineno=319, end_col_offset=33), lineno=319, col_offset=8, end_lineno=319, end_col_offset=33)], returns=Name(id='FaissIndexProtocol', ctx=Load(), lineno=305, col_offset=39, end_lineno=305, end_col_offset=57), lineno=305, col_offset=4, end_lineno=319, end_col_offset=33), FunctionDef(name='normalize_l2', args=arguments(args=[arg(arg='self', lineno=321, col_offset=21, end_lineno=321, end_col_offset=25), arg(arg='vectors', annotation=Name(id='VectorArray', ctx=Load(), lineno=321, col_offset=36, end_lineno=321, end_col_offset=47), lineno=321, col_offset=27, end_lineno=321, end_col_offset=47)]), body=[Expr(value=Constant(value='Normalize vectors to L2 unit length.\n\n        Parameters\n        ----------\n        vectors : VectorArray\n            Vectors to normalize.\n        ', lineno=322, col_offset=8, end_lineno=328, end_col_offset=11), lineno=322, col_offset=8, end_lineno=328, end_col_offset=11), Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='self', ctx=Load(), lineno=329, col_offset=8, end_lineno=329, end_col_offset=12), attr='records', ctx=Load(), lineno=329, col_offset=8, end_lineno=329, end_col_offset=20), attr='append', ctx=Load(), lineno=329, col_offset=8, end_lineno=329, end_col_offset=27), args=[Tuple(elts=[Constant(value='normalize', lineno=329, col_offset=29, end_lineno=329, end_col_offset=40), Attribute(value=Name(id='vectors', ctx=Load(), lineno=329, col_offset=42, end_lineno=329, end_col_offset=49), attr='shape', ctx=Load(), lineno=329, col_offset=42, end_lineno=329, end_col_offset=55)], ctx=Load(), lineno=329, col_offset=28, end_lineno=329, end_col_offset=56)], lineno=329, col_offset=8, end_lineno=329, end_col_offset=57), lineno=329, col_offset=8, end_lineno=329, end_col_offset=57)], returns=Constant(value=None, lineno=321, col_offset=52, end_lineno=321, end_col_offset=56), lineno=321, col_offset=4, end_lineno=329, end_col_offset=57)], lineno=220, col_offset=0, end_lineno=329, end_col_offset=57), FunctionDef(name='test_wrap_faiss_module_adapts_legacy_surface', args=arguments(args=[arg(arg='dimension', annotation=Name(id='int', ctx=Load(), lineno=333, col_offset=60, end_lineno=333, end_col_offset=63), lineno=333, col_offset=49, end_lineno=333, end_col_offset=63), arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=333, col_offset=75, end_lineno=333, end_col_offset=79), lineno=333, col_offset=65, end_lineno=333, end_col_offset=79)]), body=[Expr(value=Constant(value='Test that legacy FAISS module is adapted to modern interface.\n\n    Parameters\n    ----------\n    dimension : int\n        Vector dimension for test.\n    tmp_path : Path\n        Temporary directory for file I/O tests.\n    ', lineno=334, col_offset=4, end_lineno=342, end_col_offset=7), lineno=334, col_offset=4, end_lineno=342, end_col_offset=7), Assign(targets=[Name(id='legacy', ctx=Store(), lineno=343, col_offset=4, end_lineno=343, end_col_offset=10)], value=Call(func=Name(id='_LegacyFaissModule', ctx=Load(), lineno=343, col_offset=13, end_lineno=343, end_col_offset=31), lineno=343, col_offset=13, end_lineno=343, end_col_offset=33), lineno=343, col_offset=4, end_lineno=343, end_col_offset=33), Assign(targets=[Name(id='adapted', ctx=Store(), lineno=344, col_offset=4, end_lineno=344, end_col_offset=11)], value=Call(func=Name(id='wrap_faiss_module', ctx=Load(), lineno=344, col_offset=14, end_lineno=344, end_col_offset=31), args=[Name(id='legacy', ctx=Load(), lineno=344, col_offset=32, end_lineno=344, end_col_offset=38)], lineno=344, col_offset=14, end_lineno=344, end_col_offset=39), lineno=344, col_offset=4, end_lineno=344, end_col_offset=39), Assign(targets=[Name(id='index', ctx=Store(), lineno=347, col_offset=4, end_lineno=347, end_col_offset=9)], value=Call(func=Attribute(value=Name(id='adapted', ctx=Load(), lineno=347, col_offset=12, end_lineno=347, end_col_offset=19), attr='index_flat_ip', ctx=Load(), lineno=347, col_offset=12, end_lineno=347, end_col_offset=33), args=[Name(id='dimension', ctx=Load(), lineno=347, col_offset=34, end_lineno=347, end_col_offset=43)], lineno=347, col_offset=12, end_lineno=347, end_col_offset=44), lineno=347, col_offset=4, end_lineno=347, end_col_offset=44), Assert(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=348, col_offset=11, end_lineno=348, end_col_offset=21), args=[Name(id='index', ctx=Load(), lineno=348, col_offset=22, end_lineno=348, end_col_offset=27), Name(id='_FakeIndex', ctx=Load(), lineno=348, col_offset=29, end_lineno=348, end_col_offset=39)], lineno=348, col_offset=11, end_lineno=348, end_col_offset=40), lineno=348, col_offset=4, end_lineno=348, end_col_offset=40), Assert(test=Compare(left=Attribute(value=Name(id='legacy', ctx=Load(), lineno=349, col_offset=11, end_lineno=349, end_col_offset=17), attr='index_flat_ip_dimension', ctx=Load(), lineno=349, col_offset=11, end_lineno=349, end_col_offset=41), ops=[Eq()], comparators=[Name(id='dimension', ctx=Load(), lineno=349, col_offset=45, end_lineno=349, end_col_offset=54)], lineno=349, col_offset=11, end_lineno=349, end_col_offset=54), lineno=349, col_offset=4, end_lineno=349, end_col_offset=54), Assign(targets=[Name(id='mapped_index', ctx=Store(), lineno=351, col_offset=4, end_lineno=351, end_col_offset=16)], value=Call(func=Attribute(value=Name(id='adapted', ctx=Load(), lineno=351, col_offset=19, end_lineno=351, end_col_offset=26), attr='index_id_map2', ctx=Load(), lineno=351, col_offset=19, end_lineno=351, end_col_offset=40), args=[Name(id='index', ctx=Load(), lineno=351, col_offset=41, end_lineno=351, end_col_offset=46)], lineno=351, col_offset=19, end_lineno=351, end_col_offset=47), lineno=351, col_offset=4, end_lineno=351, end_col_offset=47), Assert(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=352, col_offset=11, end_lineno=352, end_col_offset=21), args=[Name(id='mapped_index', ctx=Load(), lineno=352, col_offset=22, end_lineno=352, end_col_offset=34), Name(id='_FakeIndex', ctx=Load(), lineno=352, col_offset=36, end_lineno=352, end_col_offset=46)], lineno=352, col_offset=11, end_lineno=352, end_col_offset=47), lineno=352, col_offset=4, end_lineno=352, end_col_offset=47), Assert(test=Compare(left=Attribute(value=Name(id='legacy', ctx=Load(), lineno=353, col_offset=11, end_lineno=353, end_col_offset=17), attr='index_id_map2_index', ctx=Load(), lineno=353, col_offset=11, end_lineno=353, end_col_offset=37), ops=[Is()], comparators=[Name(id='index', ctx=Load(), lineno=353, col_offset=41, end_lineno=353, end_col_offset=46)], lineno=353, col_offset=11, end_lineno=353, end_col_offset=46), lineno=353, col_offset=4, end_lineno=353, end_col_offset=46), Assign(targets=[Name(id='vectors', ctx=Store(), lineno=355, col_offset=4, end_lineno=355, end_col_offset=11)], value=Call(func=Attribute(value=Name(id='np', ctx=Load(), lineno=355, col_offset=14, end_lineno=355, end_col_offset=16), attr='ones', ctx=Load(), lineno=355, col_offset=14, end_lineno=355, end_col_offset=21), args=[Tuple(elts=[Constant(value=2, lineno=355, col_offset=23, end_lineno=355, end_col_offset=24), Name(id='dimension', ctx=Load(), lineno=355, col_offset=26, end_lineno=355, end_col_offset=35)], ctx=Load(), lineno=355, col_offset=22, end_lineno=355, end_col_offset=36)], keywords=[keyword(arg='dtype', value=Attribute(value=Name(id='np', ctx=Load(), lineno=355, col_offset=44, end_lineno=355, end_col_offset=46), attr='float32', ctx=Load(), lineno=355, col_offset=44, end_lineno=355, end_col_offset=54), lineno=355, col_offset=38, end_lineno=355, end_col_offset=54)], lineno=355, col_offset=14, end_lineno=355, end_col_offset=55), lineno=355, col_offset=4, end_lineno=355, end_col_offset=55), Expr(value=Call(func=Attribute(value=Name(id='adapted', ctx=Load(), lineno=356, col_offset=4, end_lineno=356, end_col_offset=11), attr='normalize_l2', ctx=Load(), lineno=356, col_offset=4, end_lineno=356, end_col_offset=24), args=[Name(id='vectors', ctx=Load(), lineno=356, col_offset=25, end_lineno=356, end_col_offset=32)], lineno=356, col_offset=4, end_lineno=356, end_col_offset=33), lineno=356, col_offset=4, end_lineno=356, end_col_offset=33), Assert(test=Compare(left=Attribute(value=Name(id='legacy', ctx=Load(), lineno=357, col_offset=11, end_lineno=357, end_col_offset=17), attr='normalize_vectors', ctx=Load(), lineno=357, col_offset=11, end_lineno=357, end_col_offset=35), ops=[IsNot()], comparators=[Constant(value=None, lineno=357, col_offset=43, end_lineno=357, end_col_offset=47)], lineno=357, col_offset=11, end_lineno=357, end_col_offset=47), lineno=357, col_offset=4, end_lineno=357, end_col_offset=47), Assert(test=Compare(left=Attribute(value=Attribute(value=Name(id='legacy', ctx=Load(), lineno=358, col_offset=11, end_lineno=358, end_col_offset=17), attr='normalize_vectors', ctx=Load(), lineno=358, col_offset=11, end_lineno=358, end_col_offset=35), attr='shape', ctx=Load(), lineno=358, col_offset=11, end_lineno=358, end_col_offset=41), ops=[Eq()], comparators=[Attribute(value=Name(id='vectors', ctx=Load(), lineno=358, col_offset=45, end_lineno=358, end_col_offset=52), attr='shape', ctx=Load(), lineno=358, col_offset=45, end_lineno=358, end_col_offset=58)], lineno=358, col_offset=11, end_lineno=358, end_col_offset=58), lineno=358, col_offset=4, end_lineno=358, end_col_offset=58), Assign(targets=[Name(id='factory_index', ctx=Store(), lineno=360, col_offset=4, end_lineno=360, end_col_offset=17)], value=Call(func=Attribute(value=Name(id='adapted', ctx=Load(), lineno=360, col_offset=20, end_lineno=360, end_col_offset=27), attr='index_factory', ctx=Load(), lineno=360, col_offset=20, end_lineno=360, end_col_offset=41), args=[Name(id='dimension', ctx=Load(), lineno=360, col_offset=42, end_lineno=360, end_col_offset=51), Constant(value='Flat', lineno=360, col_offset=53, end_lineno=360, end_col_offset=59), Attribute(value=Name(id='adapted', ctx=Load(), lineno=360, col_offset=61, end_lineno=360, end_col_offset=68), attr='metric_l2', ctx=Load(), lineno=360, col_offset=61, end_lineno=360, end_col_offset=78)], lineno=360, col_offset=20, end_lineno=360, end_col_offset=79), lineno=360, col_offset=4, end_lineno=360, end_col_offset=79), Assert(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=361, col_offset=11, end_lineno=361, end_col_offset=21), args=[Name(id='factory_index', ctx=Load(), lineno=361, col_offset=22, end_lineno=361, end_col_offset=35), Name(id='_FakeIndex', ctx=Load(), lineno=361, col_offset=37, end_lineno=361, end_col_offset=47)], lineno=361, col_offset=11, end_lineno=361, end_col_offset=48), lineno=361, col_offset=4, end_lineno=361, end_col_offset=48), Assert(test=Compare(left=Subscript(value=Attribute(value=Name(id='legacy', ctx=Load(), lineno=362, col_offset=11, end_lineno=362, end_col_offset=17), attr='index_factory_calls', ctx=Load(), lineno=362, col_offset=11, end_lineno=362, end_col_offset=37), slice=UnaryOp(op=USub(), operand=Constant(value=1, lineno=362, col_offset=39, end_lineno=362, end_col_offset=40), lineno=362, col_offset=38, end_lineno=362, end_col_offset=40), ctx=Load(), lineno=362, col_offset=11, end_lineno=362, end_col_offset=41), ops=[Eq()], comparators=[Tuple(elts=[Name(id='dimension', ctx=Load(), lineno=362, col_offset=46, end_lineno=362, end_col_offset=55), Constant(value='Flat', lineno=362, col_offset=57, end_lineno=362, end_col_offset=63), Attribute(value=Name(id='adapted', ctx=Load(), lineno=362, col_offset=65, end_lineno=362, end_col_offset=72), attr='metric_l2', ctx=Load(), lineno=362, col_offset=65, end_lineno=362, end_col_offset=82)], ctx=Load(), lineno=362, col_offset=45, end_lineno=362, end_col_offset=83)], lineno=362, col_offset=11, end_lineno=362, end_col_offset=83), lineno=362, col_offset=4, end_lineno=362, end_col_offset=83), Assign(targets=[Name(id='index_path', ctx=Store(), lineno=364, col_offset=4, end_lineno=364, end_col_offset=14)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=364, col_offset=17, end_lineno=364, end_col_offset=25), op=Div(), right=Constant(value='index.faiss', lineno=364, col_offset=28, end_lineno=364, end_col_offset=41), lineno=364, col_offset=17, end_lineno=364, end_col_offset=41), lineno=364, col_offset=4, end_lineno=364, end_col_offset=41), Expr(value=Call(func=Attribute(value=Name(id='adapted', ctx=Load(), lineno=365, col_offset=4, end_lineno=365, end_col_offset=11), attr='write_index', ctx=Load(), lineno=365, col_offset=4, end_lineno=365, end_col_offset=23), args=[Name(id='factory_index', ctx=Load(), lineno=365, col_offset=24, end_lineno=365, end_col_offset=37), Call(func=Name(id='str', ctx=Load(), lineno=365, col_offset=39, end_lineno=365, end_col_offset=42), args=[Name(id='index_path', ctx=Load(), lineno=365, col_offset=43, end_lineno=365, end_col_offset=53)], lineno=365, col_offset=39, end_lineno=365, end_col_offset=54)], lineno=365, col_offset=4, end_lineno=365, end_col_offset=55), lineno=365, col_offset=4, end_lineno=365, end_col_offset=55), Assert(test=Compare(left=Subscript(value=Attribute(value=Name(id='legacy', ctx=Load(), lineno=366, col_offset=11, end_lineno=366, end_col_offset=17), attr='write_calls', ctx=Load(), lineno=366, col_offset=11, end_lineno=366, end_col_offset=29), slice=UnaryOp(op=USub(), operand=Constant(value=1, lineno=366, col_offset=31, end_lineno=366, end_col_offset=32), lineno=366, col_offset=30, end_lineno=366, end_col_offset=32), ctx=Load(), lineno=366, col_offset=11, end_lineno=366, end_col_offset=33), ops=[Eq()], comparators=[Tuple(elts=[Name(id='factory_index', ctx=Load(), lineno=366, col_offset=38, end_lineno=366, end_col_offset=51), Call(func=Name(id='str', ctx=Load(), lineno=366, col_offset=53, end_lineno=366, end_col_offset=56), args=[Name(id='index_path', ctx=Load(), lineno=366, col_offset=57, end_lineno=366, end_col_offset=67)], lineno=366, col_offset=53, end_lineno=366, end_col_offset=68)], ctx=Load(), lineno=366, col_offset=37, end_lineno=366, end_col_offset=69)], lineno=366, col_offset=11, end_lineno=366, end_col_offset=69), lineno=366, col_offset=4, end_lineno=366, end_col_offset=69), Assign(targets=[Name(id='read_index', ctx=Store(), lineno=368, col_offset=4, end_lineno=368, end_col_offset=14)], value=Call(func=Attribute(value=Name(id='adapted', ctx=Load(), lineno=368, col_offset=17, end_lineno=368, end_col_offset=24), attr='read_index', ctx=Load(), lineno=368, col_offset=17, end_lineno=368, end_col_offset=35), args=[Call(func=Name(id='str', ctx=Load(), lineno=368, col_offset=36, end_lineno=368, end_col_offset=39), args=[Name(id='index_path', ctx=Load(), lineno=368, col_offset=40, end_lineno=368, end_col_offset=50)], lineno=368, col_offset=36, end_lineno=368, end_col_offset=51)], lineno=368, col_offset=17, end_lineno=368, end_col_offset=52), lineno=368, col_offset=4, end_lineno=368, end_col_offset=52), Assert(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=369, col_offset=11, end_lineno=369, end_col_offset=21), args=[Name(id='read_index', ctx=Load(), lineno=369, col_offset=22, end_lineno=369, end_col_offset=32), Name(id='_FakeIndex', ctx=Load(), lineno=369, col_offset=34, end_lineno=369, end_col_offset=44)], lineno=369, col_offset=11, end_lineno=369, end_col_offset=45), lineno=369, col_offset=4, end_lineno=369, end_col_offset=45), Assert(test=Compare(left=Attribute(value=Name(id='legacy', ctx=Load(), lineno=370, col_offset=11, end_lineno=370, end_col_offset=17), attr='read_path', ctx=Load(), lineno=370, col_offset=11, end_lineno=370, end_col_offset=27), ops=[Eq()], comparators=[Call(func=Name(id='str', ctx=Load(), lineno=370, col_offset=31, end_lineno=370, end_col_offset=34), args=[Name(id='index_path', ctx=Load(), lineno=370, col_offset=35, end_lineno=370, end_col_offset=45)], lineno=370, col_offset=31, end_lineno=370, end_col_offset=46)], lineno=370, col_offset=11, end_lineno=370, end_col_offset=46), lineno=370, col_offset=4, end_lineno=370, end_col_offset=46)], decorator_list=[Call(func=Attribute(value=Attribute(value=Name(id='pytest', ctx=Load(), lineno=332, col_offset=1, end_lineno=332, end_col_offset=7), attr='mark', ctx=Load(), lineno=332, col_offset=1, end_lineno=332, end_col_offset=12), attr='parametrize', ctx=Load(), lineno=332, col_offset=1, end_lineno=332, end_col_offset=24), args=[Constant(value='dimension', lineno=332, col_offset=25, end_lineno=332, end_col_offset=36), List(elts=[Constant(value=5, lineno=332, col_offset=39, end_lineno=332, end_col_offset=40), Constant(value=128, lineno=332, col_offset=42, end_lineno=332, end_col_offset=45)], ctx=Load(), lineno=332, col_offset=38, end_lineno=332, end_col_offset=46)], lineno=332, col_offset=1, end_lineno=332, end_col_offset=47)], returns=Constant(value=None, lineno=333, col_offset=84, end_lineno=333, end_col_offset=88), lineno=333, col_offset=0, end_lineno=370, end_col_offset=46), FunctionDef(name='test_wrap_faiss_module_returns_pep8_module_directly', args=arguments(), body=[Expr(value=Constant(value='Test that modern PEP-8 module is returned unchanged.', lineno=374, col_offset=4, end_lineno=374, end_col_offset=62), lineno=374, col_offset=4, end_lineno=374, end_col_offset=62), Assign(targets=[Name(id='modern', ctx=Store(), lineno=375, col_offset=4, end_lineno=375, end_col_offset=10)], value=Call(func=Name(id='_ModernFaissModule', ctx=Load(), lineno=375, col_offset=13, end_lineno=375, end_col_offset=31), lineno=375, col_offset=13, end_lineno=375, end_col_offset=33), lineno=375, col_offset=4, end_lineno=375, end_col_offset=33), Assign(targets=[Name(id='wrapped', ctx=Store(), lineno=376, col_offset=4, end_lineno=376, end_col_offset=11)], value=Call(func=Name(id='wrap_faiss_module', ctx=Load(), lineno=376, col_offset=14, end_lineno=376, end_col_offset=31), args=[Name(id='modern', ctx=Load(), lineno=376, col_offset=32, end_lineno=376, end_col_offset=38)], lineno=376, col_offset=14, end_lineno=376, end_col_offset=39), lineno=376, col_offset=4, end_lineno=376, end_col_offset=39), Assert(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=379, col_offset=11, end_lineno=379, end_col_offset=21), args=[Name(id='wrapped', ctx=Load(), lineno=379, col_offset=22, end_lineno=379, end_col_offset=29), Name(id='_ModernFaissModule', ctx=Load(), lineno=379, col_offset=31, end_lineno=379, end_col_offset=49)], lineno=379, col_offset=11, end_lineno=379, end_col_offset=50), lineno=379, col_offset=4, end_lineno=379, end_col_offset=50), Assert(test=Compare(left=Name(id='wrapped', ctx=Load(), lineno=380, col_offset=11, end_lineno=380, end_col_offset=18), ops=[Is()], comparators=[Name(id='modern', ctx=Load(), lineno=380, col_offset=22, end_lineno=380, end_col_offset=28)], lineno=380, col_offset=11, end_lineno=380, end_col_offset=28), lineno=380, col_offset=4, end_lineno=380, end_col_offset=28), Assign(targets=[Name(id='result', ctx=Store(), lineno=382, col_offset=4, end_lineno=382, end_col_offset=10)], value=Call(func=Attribute(value=Name(id='wrapped', ctx=Load(), lineno=382, col_offset=13, end_lineno=382, end_col_offset=20), attr='index_flat_ip', ctx=Load(), lineno=382, col_offset=13, end_lineno=382, end_col_offset=34), args=[Constant(value=10, lineno=382, col_offset=35, end_lineno=382, end_col_offset=37)], lineno=382, col_offset=13, end_lineno=382, end_col_offset=38), lineno=382, col_offset=4, end_lineno=382, end_col_offset=38), Assert(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=383, col_offset=11, end_lineno=383, end_col_offset=21), args=[Name(id='result', ctx=Load(), lineno=383, col_offset=22, end_lineno=383, end_col_offset=28), Name(id='_FakeIndex', ctx=Load(), lineno=383, col_offset=30, end_lineno=383, end_col_offset=40)], lineno=383, col_offset=11, end_lineno=383, end_col_offset=41), lineno=383, col_offset=4, end_lineno=383, end_col_offset=41), Assert(test=Compare(left=Subscript(value=Attribute(value=Name(id='modern', ctx=Load(), lineno=384, col_offset=11, end_lineno=384, end_col_offset=17), attr='records', ctx=Load(), lineno=384, col_offset=11, end_lineno=384, end_col_offset=25), slice=Constant(value=0, lineno=384, col_offset=26, end_lineno=384, end_col_offset=27), ctx=Load(), lineno=384, col_offset=11, end_lineno=384, end_col_offset=28), ops=[Eq()], comparators=[Tuple(elts=[Constant(value='flat', lineno=384, col_offset=33, end_lineno=384, end_col_offset=39), Constant(value=10, lineno=384, col_offset=41, end_lineno=384, end_col_offset=43)], ctx=Load(), lineno=384, col_offset=32, end_lineno=384, end_col_offset=44)], lineno=384, col_offset=11, end_lineno=384, end_col_offset=44), lineno=384, col_offset=4, end_lineno=384, end_col_offset=44)], returns=Constant(value=None, lineno=373, col_offset=61, end_lineno=373, end_col_offset=65), lineno=373, col_offset=0, end_lineno=384, end_col_offset=44)])
Module(body=[ImportFrom(module='__future__', names=[alias(name='annotations', lineno=1, col_offset=23, end_lineno=1, end_col_offset=34)], level=0, lineno=1, col_offset=0, end_lineno=1, end_col_offset=34), Import(names=[alias(name='json', lineno=3, col_offset=7, end_lineno=3, end_col_offset=11)], lineno=3, col_offset=0, end_lineno=3, end_col_offset=11), ImportFrom(module='pathlib', names=[alias(name='Path', lineno=4, col_offset=20, end_lineno=4, end_col_offset=24)], level=0, lineno=4, col_offset=0, end_lineno=4, end_col_offset=24), Import(names=[alias(name='numpy', asname='np', lineno=6, col_offset=7, end_lineno=6, end_col_offset=18)], lineno=6, col_offset=0, end_lineno=6, end_col_offset=18), Import(names=[alias(name='pytest', lineno=7, col_offset=7, end_lineno=7, end_col_offset=13)], lineno=7, col_offset=0, end_lineno=7, end_col_offset=13), ImportFrom(module='codeintel_rev.config.settings', names=[alias(name='XTRConfig', lineno=8, col_offset=42, end_lineno=8, end_col_offset=51)], level=0, lineno=8, col_offset=0, end_lineno=8, end_col_offset=51), ImportFrom(module='codeintel_rev.io.xtr_manager', names=[alias(name='XTRIndex', lineno=9, col_offset=41, end_lineno=9, end_col_offset=49)], level=0, lineno=9, col_offset=0, end_lineno=9, end_col_offset=49), FunctionDef(name='_write_token_artifacts', args=arguments(args=[arg(arg='root', annotation=Name(id='Path', ctx=Load(), lineno=12, col_offset=33, end_lineno=12, end_col_offset=37), lineno=12, col_offset=27, end_lineno=12, end_col_offset=37)]), body=[Assign(targets=[Name(id='token_path', ctx=Store(), lineno=13, col_offset=4, end_lineno=13, end_col_offset=14)], value=BinOp(left=Name(id='root', ctx=Load(), lineno=13, col_offset=17, end_lineno=13, end_col_offset=21), op=Div(), right=Constant(value='tokens.f16', lineno=13, col_offset=24, end_lineno=13, end_col_offset=36), lineno=13, col_offset=17, end_lineno=13, end_col_offset=36), lineno=13, col_offset=4, end_lineno=13, end_col_offset=36), Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='token_path', ctx=Load(), lineno=14, col_offset=4, end_lineno=14, end_col_offset=14), attr='parent', ctx=Load(), lineno=14, col_offset=4, end_lineno=14, end_col_offset=21), attr='mkdir', ctx=Load(), lineno=14, col_offset=4, end_lineno=14, end_col_offset=27), keywords=[keyword(arg='parents', value=Constant(value=True, lineno=14, col_offset=36, end_lineno=14, end_col_offset=40), lineno=14, col_offset=28, end_lineno=14, end_col_offset=40), keyword(arg='exist_ok', value=Constant(value=True, lineno=14, col_offset=51, end_lineno=14, end_col_offset=55), lineno=14, col_offset=42, end_lineno=14, end_col_offset=55)], lineno=14, col_offset=4, end_lineno=14, end_col_offset=56), lineno=14, col_offset=4, end_lineno=14, end_col_offset=56), Assign(targets=[Name(id='data', ctx=Store(), lineno=15, col_offset=4, end_lineno=15, end_col_offset=8)], value=Call(func=Attribute(value=Name(id='np', ctx=Load(), lineno=15, col_offset=11, end_lineno=15, end_col_offset=13), attr='asarray', ctx=Load(), lineno=15, col_offset=11, end_lineno=15, end_col_offset=21), args=[List(elts=[List(elts=[Constant(value=1.0, lineno=17, col_offset=13, end_lineno=17, end_col_offset=16), Constant(value=0.0, lineno=17, col_offset=18, end_lineno=17, end_col_offset=21)], ctx=Load(), lineno=17, col_offset=12, end_lineno=17, end_col_offset=22), List(elts=[Constant(value=0.0, lineno=18, col_offset=13, end_lineno=18, end_col_offset=16), Constant(value=1.0, lineno=18, col_offset=18, end_lineno=18, end_col_offset=21)], ctx=Load(), lineno=18, col_offset=12, end_lineno=18, end_col_offset=22), List(elts=[Constant(value=0.5, lineno=19, col_offset=13, end_lineno=19, end_col_offset=16), Constant(value=0.5, lineno=19, col_offset=18, end_lineno=19, end_col_offset=21)], ctx=Load(), lineno=19, col_offset=12, end_lineno=19, end_col_offset=22)], ctx=Load(), lineno=16, col_offset=8, end_lineno=20, end_col_offset=9)], keywords=[keyword(arg='dtype', value=Attribute(value=Name(id='np', ctx=Load(), lineno=21, col_offset=14, end_lineno=21, end_col_offset=16), attr='float16', ctx=Load(), lineno=21, col_offset=14, end_lineno=21, end_col_offset=24), lineno=21, col_offset=8, end_lineno=21, end_col_offset=24)], lineno=15, col_offset=11, end_lineno=22, end_col_offset=5), lineno=15, col_offset=4, end_lineno=22, end_col_offset=5), Assign(targets=[Name(id='memmap', ctx=Store(), lineno=23, col_offset=4, end_lineno=23, end_col_offset=10)], value=Call(func=Attribute(value=Name(id='np', ctx=Load(), lineno=23, col_offset=13, end_lineno=23, end_col_offset=15), attr='memmap', ctx=Load(), lineno=23, col_offset=13, end_lineno=23, end_col_offset=22), args=[Name(id='token_path', ctx=Load(), lineno=23, col_offset=23, end_lineno=23, end_col_offset=33)], keywords=[keyword(arg='mode', value=Constant(value='w+', lineno=23, col_offset=40, end_lineno=23, end_col_offset=44), lineno=23, col_offset=35, end_lineno=23, end_col_offset=44), keyword(arg='dtype', value=Attribute(value=Name(id='np', ctx=Load(), lineno=23, col_offset=52, end_lineno=23, end_col_offset=54), attr='float16', ctx=Load(), lineno=23, col_offset=52, end_lineno=23, end_col_offset=62), lineno=23, col_offset=46, end_lineno=23, end_col_offset=62), keyword(arg='shape', value=Attribute(value=Name(id='data', ctx=Load(), lineno=23, col_offset=70, end_lineno=23, end_col_offset=74), attr='shape', ctx=Load(), lineno=23, col_offset=70, end_lineno=23, end_col_offset=80), lineno=23, col_offset=64, end_lineno=23, end_col_offset=80)], lineno=23, col_offset=13, end_lineno=23, end_col_offset=81), lineno=23, col_offset=4, end_lineno=23, end_col_offset=81), Assign(targets=[Subscript(value=Name(id='memmap', ctx=Load(), lineno=24, col_offset=4, end_lineno=24, end_col_offset=10), slice=Slice(lineno=24, col_offset=11, end_lineno=24, end_col_offset=12), ctx=Store(), lineno=24, col_offset=4, end_lineno=24, end_col_offset=13)], value=Name(id='data', ctx=Load(), lineno=24, col_offset=16, end_lineno=24, end_col_offset=20), lineno=24, col_offset=4, end_lineno=24, end_col_offset=20), Expr(value=Call(func=Attribute(value=Name(id='memmap', ctx=Load(), lineno=25, col_offset=4, end_lineno=25, end_col_offset=10), attr='flush', ctx=Load(), lineno=25, col_offset=4, end_lineno=25, end_col_offset=16), lineno=25, col_offset=4, end_lineno=25, end_col_offset=18), lineno=25, col_offset=4, end_lineno=25, end_col_offset=18), Assign(targets=[Name(id='meta', ctx=Store(), lineno=26, col_offset=4, end_lineno=26, end_col_offset=8)], value=Dict(keys=[Constant(value='dim', lineno=27, col_offset=8, end_lineno=27, end_col_offset=13), Constant(value='dtype', lineno=28, col_offset=8, end_lineno=28, end_col_offset=15), Constant(value='total_tokens', lineno=29, col_offset=8, end_lineno=29, end_col_offset=22), Constant(value='doc_count', lineno=30, col_offset=8, end_lineno=30, end_col_offset=19), Constant(value='chunk_ids', lineno=31, col_offset=8, end_lineno=31, end_col_offset=19), Constant(value='offsets', lineno=32, col_offset=8, end_lineno=32, end_col_offset=17), Constant(value='lengths', lineno=33, col_offset=8, end_lineno=33, end_col_offset=17)], values=[Constant(value=2, lineno=27, col_offset=15, end_lineno=27, end_col_offset=16), Constant(value='float16', lineno=28, col_offset=17, end_lineno=28, end_col_offset=26), Constant(value=3, lineno=29, col_offset=24, end_lineno=29, end_col_offset=25), Constant(value=2, lineno=30, col_offset=21, end_lineno=30, end_col_offset=22), List(elts=[Constant(value=1, lineno=31, col_offset=22, end_lineno=31, end_col_offset=23), Constant(value=2, lineno=31, col_offset=25, end_lineno=31, end_col_offset=26)], ctx=Load(), lineno=31, col_offset=21, end_lineno=31, end_col_offset=27), List(elts=[Constant(value=0, lineno=32, col_offset=20, end_lineno=32, end_col_offset=21), Constant(value=2, lineno=32, col_offset=23, end_lineno=32, end_col_offset=24)], ctx=Load(), lineno=32, col_offset=19, end_lineno=32, end_col_offset=25), List(elts=[Constant(value=2, lineno=33, col_offset=20, end_lineno=33, end_col_offset=21), Constant(value=1, lineno=33, col_offset=23, end_lineno=33, end_col_offset=24)], ctx=Load(), lineno=33, col_offset=19, end_lineno=33, end_col_offset=25)], lineno=26, col_offset=11, end_lineno=34, end_col_offset=5), lineno=26, col_offset=4, end_lineno=34, end_col_offset=5), With(items=[withitem(context_expr=Call(func=Attribute(value=BinOp(left=Name(id='root', ctx=Load(), lineno=35, col_offset=10, end_lineno=35, end_col_offset=14), op=Div(), right=Constant(value='index.meta.json', lineno=35, col_offset=17, end_lineno=35, end_col_offset=34), lineno=35, col_offset=10, end_lineno=35, end_col_offset=34), attr='open', ctx=Load(), lineno=35, col_offset=9, end_lineno=35, end_col_offset=40), args=[Constant(value='w', lineno=35, col_offset=41, end_lineno=35, end_col_offset=44)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=35, col_offset=55, end_lineno=35, end_col_offset=62), lineno=35, col_offset=46, end_lineno=35, end_col_offset=62)], lineno=35, col_offset=9, end_lineno=35, end_col_offset=63), optional_vars=Name(id='handle', ctx=Store(), lineno=35, col_offset=67, end_lineno=35, end_col_offset=73))], body=[Expr(value=Call(func=Attribute(value=Name(id='json', ctx=Load(), lineno=36, col_offset=8, end_lineno=36, end_col_offset=12), attr='dump', ctx=Load(), lineno=36, col_offset=8, end_lineno=36, end_col_offset=17), args=[Name(id='meta', ctx=Load(), lineno=36, col_offset=18, end_lineno=36, end_col_offset=22), Name(id='handle', ctx=Load(), lineno=36, col_offset=24, end_lineno=36, end_col_offset=30)], lineno=36, col_offset=8, end_lineno=36, end_col_offset=31), lineno=36, col_offset=8, end_lineno=36, end_col_offset=31)], lineno=35, col_offset=4, end_lineno=36, end_col_offset=31)], returns=Constant(value=None, lineno=12, col_offset=42, end_lineno=12, end_col_offset=46), lineno=12, col_offset=0, end_lineno=36, end_col_offset=31), FunctionDef(name='test_xtr_index_open_and_metadata', args=arguments(args=[arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=39, col_offset=47, end_lineno=39, end_col_offset=51), lineno=39, col_offset=37, end_lineno=39, end_col_offset=51)]), body=[Expr(value=Call(func=Name(id='_write_token_artifacts', ctx=Load(), lineno=40, col_offset=4, end_lineno=40, end_col_offset=26), args=[Name(id='tmp_path', ctx=Load(), lineno=40, col_offset=27, end_lineno=40, end_col_offset=35)], lineno=40, col_offset=4, end_lineno=40, end_col_offset=36), lineno=40, col_offset=4, end_lineno=40, end_col_offset=36), Assign(targets=[Name(id='index', ctx=Store(), lineno=41, col_offset=4, end_lineno=41, end_col_offset=9)], value=Call(func=Name(id='XTRIndex', ctx=Load(), lineno=41, col_offset=12, end_lineno=41, end_col_offset=20), args=[Name(id='tmp_path', ctx=Load(), lineno=41, col_offset=21, end_lineno=41, end_col_offset=29), Call(func=Name(id='XTRConfig', ctx=Load(), lineno=41, col_offset=31, end_lineno=41, end_col_offset=40), keywords=[keyword(arg='enable', value=Constant(value=True, lineno=41, col_offset=48, end_lineno=41, end_col_offset=52), lineno=41, col_offset=41, end_lineno=41, end_col_offset=52), keyword(arg='dim', value=Constant(value=2, lineno=41, col_offset=58, end_lineno=41, end_col_offset=59), lineno=41, col_offset=54, end_lineno=41, end_col_offset=59), keyword(arg='dtype', value=Constant(value='float16', lineno=41, col_offset=67, end_lineno=41, end_col_offset=76), lineno=41, col_offset=61, end_lineno=41, end_col_offset=76)], lineno=41, col_offset=31, end_lineno=41, end_col_offset=77)], lineno=41, col_offset=12, end_lineno=41, end_col_offset=78), lineno=41, col_offset=4, end_lineno=41, end_col_offset=78), Expr(value=Call(func=Attribute(value=Name(id='index', ctx=Load(), lineno=42, col_offset=4, end_lineno=42, end_col_offset=9), attr='open', ctx=Load(), lineno=42, col_offset=4, end_lineno=42, end_col_offset=14), lineno=42, col_offset=4, end_lineno=42, end_col_offset=16), lineno=42, col_offset=4, end_lineno=42, end_col_offset=16), Assert(test=Attribute(value=Name(id='index', ctx=Load(), lineno=43, col_offset=11, end_lineno=43, end_col_offset=16), attr='ready', ctx=Load(), lineno=43, col_offset=11, end_lineno=43, end_col_offset=22), lineno=43, col_offset=4, end_lineno=43, end_col_offset=22), Assign(targets=[Name(id='meta', ctx=Store(), lineno=44, col_offset=4, end_lineno=44, end_col_offset=8)], value=Call(func=Attribute(value=Name(id='index', ctx=Load(), lineno=44, col_offset=11, end_lineno=44, end_col_offset=16), attr='metadata', ctx=Load(), lineno=44, col_offset=11, end_lineno=44, end_col_offset=25), lineno=44, col_offset=11, end_lineno=44, end_col_offset=27), lineno=44, col_offset=4, end_lineno=44, end_col_offset=27), Assert(test=Compare(left=Name(id='meta', ctx=Load(), lineno=45, col_offset=11, end_lineno=45, end_col_offset=15), ops=[IsNot()], comparators=[Constant(value=None, lineno=45, col_offset=23, end_lineno=45, end_col_offset=27)], lineno=45, col_offset=11, end_lineno=45, end_col_offset=27), lineno=45, col_offset=4, end_lineno=45, end_col_offset=27), Assert(test=Compare(left=Subscript(value=Name(id='meta', ctx=Load(), lineno=46, col_offset=11, end_lineno=46, end_col_offset=15), slice=Constant(value='chunk_ids', lineno=46, col_offset=16, end_lineno=46, end_col_offset=27), ctx=Load(), lineno=46, col_offset=11, end_lineno=46, end_col_offset=28), ops=[Eq()], comparators=[List(elts=[Constant(value=1, lineno=46, col_offset=33, end_lineno=46, end_col_offset=34), Constant(value=2, lineno=46, col_offset=36, end_lineno=46, end_col_offset=37)], ctx=Load(), lineno=46, col_offset=32, end_lineno=46, end_col_offset=38)], lineno=46, col_offset=11, end_lineno=46, end_col_offset=38), lineno=46, col_offset=4, end_lineno=46, end_col_offset=38), Assert(test=Compare(left=Subscript(value=Name(id='meta', ctx=Load(), lineno=47, col_offset=11, end_lineno=47, end_col_offset=15), slice=Constant(value='offsets', lineno=47, col_offset=16, end_lineno=47, end_col_offset=25), ctx=Load(), lineno=47, col_offset=11, end_lineno=47, end_col_offset=26), ops=[Eq()], comparators=[List(elts=[Constant(value=0, lineno=47, col_offset=31, end_lineno=47, end_col_offset=32), Constant(value=2, lineno=47, col_offset=34, end_lineno=47, end_col_offset=35)], ctx=Load(), lineno=47, col_offset=30, end_lineno=47, end_col_offset=36)], lineno=47, col_offset=11, end_lineno=47, end_col_offset=36), lineno=47, col_offset=4, end_lineno=47, end_col_offset=36)], returns=Constant(value=None, lineno=39, col_offset=56, end_lineno=39, end_col_offset=60), lineno=39, col_offset=0, end_lineno=47, end_col_offset=36), FunctionDef(name='test_xtr_index_not_ready_without_artifacts', args=arguments(args=[arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=50, col_offset=57, end_lineno=50, end_col_offset=61), lineno=50, col_offset=47, end_lineno=50, end_col_offset=61)]), body=[Assign(targets=[Name(id='index', ctx=Store(), lineno=51, col_offset=4, end_lineno=51, end_col_offset=9)], value=Call(func=Name(id='XTRIndex', ctx=Load(), lineno=51, col_offset=12, end_lineno=51, end_col_offset=20), args=[Name(id='tmp_path', ctx=Load(), lineno=51, col_offset=21, end_lineno=51, end_col_offset=29), Call(func=Name(id='XTRConfig', ctx=Load(), lineno=51, col_offset=31, end_lineno=51, end_col_offset=40), keywords=[keyword(arg='enable', value=Constant(value=True, lineno=51, col_offset=48, end_lineno=51, end_col_offset=52), lineno=51, col_offset=41, end_lineno=51, end_col_offset=52)], lineno=51, col_offset=31, end_lineno=51, end_col_offset=53)], lineno=51, col_offset=12, end_lineno=51, end_col_offset=54), lineno=51, col_offset=4, end_lineno=51, end_col_offset=54), Expr(value=Call(func=Attribute(value=Name(id='index', ctx=Load(), lineno=52, col_offset=4, end_lineno=52, end_col_offset=9), attr='open', ctx=Load(), lineno=52, col_offset=4, end_lineno=52, end_col_offset=14), lineno=52, col_offset=4, end_lineno=52, end_col_offset=16), lineno=52, col_offset=4, end_lineno=52, end_col_offset=16), Assert(test=UnaryOp(op=Not(), operand=Attribute(value=Name(id='index', ctx=Load(), lineno=53, col_offset=15, end_lineno=53, end_col_offset=20), attr='ready', ctx=Load(), lineno=53, col_offset=15, end_lineno=53, end_col_offset=26), lineno=53, col_offset=11, end_lineno=53, end_col_offset=26), lineno=53, col_offset=4, end_lineno=53, end_col_offset=26)], returns=Constant(value=None, lineno=50, col_offset=66, end_lineno=50, end_col_offset=70), lineno=50, col_offset=0, end_lineno=53, end_col_offset=26), FunctionDef(name='test_xtr_search_and_rescore', args=arguments(args=[arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=57, col_offset=14, end_lineno=57, end_col_offset=18), lineno=57, col_offset=4, end_lineno=57, end_col_offset=18), arg(arg='monkeypatch', annotation=Attribute(value=Name(id='pytest', ctx=Load(), lineno=58, col_offset=17, end_lineno=58, end_col_offset=23), attr='MonkeyPatch', ctx=Load(), lineno=58, col_offset=17, end_lineno=58, end_col_offset=35), lineno=58, col_offset=4, end_lineno=58, end_col_offset=35)]), body=[Expr(value=Call(func=Name(id='_write_token_artifacts', ctx=Load(), lineno=60, col_offset=4, end_lineno=60, end_col_offset=26), args=[Name(id='tmp_path', ctx=Load(), lineno=60, col_offset=27, end_lineno=60, end_col_offset=35)], lineno=60, col_offset=4, end_lineno=60, end_col_offset=36), lineno=60, col_offset=4, end_lineno=60, end_col_offset=36), Assign(targets=[Name(id='config', ctx=Store(), lineno=61, col_offset=4, end_lineno=61, end_col_offset=10)], value=Call(func=Name(id='XTRConfig', ctx=Load(), lineno=61, col_offset=13, end_lineno=61, end_col_offset=22), keywords=[keyword(arg='enable', value=Constant(value=True, lineno=61, col_offset=30, end_lineno=61, end_col_offset=34), lineno=61, col_offset=23, end_lineno=61, end_col_offset=34), keyword(arg='dim', value=Constant(value=2, lineno=61, col_offset=40, end_lineno=61, end_col_offset=41), lineno=61, col_offset=36, end_lineno=61, end_col_offset=41), keyword(arg='dtype', value=Constant(value='float16', lineno=61, col_offset=49, end_lineno=61, end_col_offset=58), lineno=61, col_offset=43, end_lineno=61, end_col_offset=58)], lineno=61, col_offset=13, end_lineno=61, end_col_offset=59), lineno=61, col_offset=4, end_lineno=61, end_col_offset=59), Assign(targets=[Name(id='index', ctx=Store(), lineno=62, col_offset=4, end_lineno=62, end_col_offset=9)], value=Call(func=Name(id='XTRIndex', ctx=Load(), lineno=62, col_offset=12, end_lineno=62, end_col_offset=20), args=[Name(id='tmp_path', ctx=Load(), lineno=62, col_offset=21, end_lineno=62, end_col_offset=29), Name(id='config', ctx=Load(), lineno=62, col_offset=31, end_lineno=62, end_col_offset=37)], lineno=62, col_offset=12, end_lineno=62, end_col_offset=38), lineno=62, col_offset=4, end_lineno=62, end_col_offset=38), Expr(value=Call(func=Attribute(value=Name(id='index', ctx=Load(), lineno=63, col_offset=4, end_lineno=63, end_col_offset=9), attr='open', ctx=Load(), lineno=63, col_offset=4, end_lineno=63, end_col_offset=14), lineno=63, col_offset=4, end_lineno=63, end_col_offset=16), lineno=63, col_offset=4, end_lineno=63, end_col_offset=16), Assert(test=Attribute(value=Name(id='index', ctx=Load(), lineno=64, col_offset=11, end_lineno=64, end_col_offset=16), attr='ready', ctx=Load(), lineno=64, col_offset=11, end_lineno=64, end_col_offset=22), lineno=64, col_offset=4, end_lineno=64, end_col_offset=22), FunctionDef(name='_encode_query', args=arguments(args=[arg(arg='self', annotation=Name(id='XTRIndex', ctx=Load(), lineno=66, col_offset=28, end_lineno=66, end_col_offset=36), lineno=66, col_offset=22, end_lineno=66, end_col_offset=36), arg(arg='text', annotation=Name(id='str', ctx=Load(), lineno=66, col_offset=44, end_lineno=66, end_col_offset=47), lineno=66, col_offset=38, end_lineno=66, end_col_offset=47)]), body=[Delete(targets=[Name(id='text', ctx=Del(), lineno=67, col_offset=12, end_lineno=67, end_col_offset=16), Name(id='self', ctx=Del(), lineno=67, col_offset=18, end_lineno=67, end_col_offset=22)], lineno=67, col_offset=8, end_lineno=67, end_col_offset=22), Return(value=Call(func=Attribute(value=Name(id='np', ctx=Load(), lineno=68, col_offset=15, end_lineno=68, end_col_offset=17), attr='asarray', ctx=Load(), lineno=68, col_offset=15, end_lineno=68, end_col_offset=25), args=[List(elts=[List(elts=[Constant(value=1.0, lineno=68, col_offset=28, end_lineno=68, end_col_offset=31), Constant(value=0.0, lineno=68, col_offset=33, end_lineno=68, end_col_offset=36)], ctx=Load(), lineno=68, col_offset=27, end_lineno=68, end_col_offset=37), List(elts=[Constant(value=0.0, lineno=68, col_offset=40, end_lineno=68, end_col_offset=43), Constant(value=1.0, lineno=68, col_offset=45, end_lineno=68, end_col_offset=48)], ctx=Load(), lineno=68, col_offset=39, end_lineno=68, end_col_offset=49)], ctx=Load(), lineno=68, col_offset=26, end_lineno=68, end_col_offset=50)], keywords=[keyword(arg='dtype', value=Attribute(value=Name(id='np', ctx=Load(), lineno=68, col_offset=58, end_lineno=68, end_col_offset=60), attr='float32', ctx=Load(), lineno=68, col_offset=58, end_lineno=68, end_col_offset=68), lineno=68, col_offset=52, end_lineno=68, end_col_offset=68)], lineno=68, col_offset=15, end_lineno=68, end_col_offset=69), lineno=68, col_offset=8, end_lineno=68, end_col_offset=69)], returns=Attribute(value=Name(id='np', ctx=Load(), lineno=66, col_offset=52, end_lineno=66, end_col_offset=54), attr='ndarray', ctx=Load(), lineno=66, col_offset=52, end_lineno=66, end_col_offset=62), lineno=66, col_offset=4, end_lineno=68, end_col_offset=69), Expr(value=Call(func=Attribute(value=Name(id='monkeypatch', ctx=Load(), lineno=70, col_offset=4, end_lineno=70, end_col_offset=15), attr='setattr', ctx=Load(), lineno=70, col_offset=4, end_lineno=70, end_col_offset=23), args=[Name(id='XTRIndex', ctx=Load(), lineno=70, col_offset=24, end_lineno=70, end_col_offset=32), Constant(value='encode_query_tokens', lineno=70, col_offset=34, end_lineno=70, end_col_offset=55), Name(id='_encode_query', ctx=Load(), lineno=70, col_offset=57, end_lineno=70, end_col_offset=70)], lineno=70, col_offset=4, end_lineno=70, end_col_offset=71), lineno=70, col_offset=4, end_lineno=70, end_col_offset=71), Assign(targets=[Name(id='wide_hits', ctx=Store(), lineno=71, col_offset=4, end_lineno=71, end_col_offset=13)], value=Call(func=Attribute(value=Name(id='index', ctx=Load(), lineno=71, col_offset=16, end_lineno=71, end_col_offset=21), attr='search', ctx=Load(), lineno=71, col_offset=16, end_lineno=71, end_col_offset=28), args=[Constant(value='query', lineno=71, col_offset=29, end_lineno=71, end_col_offset=36)], keywords=[keyword(arg='k', value=Constant(value=2, lineno=71, col_offset=40, end_lineno=71, end_col_offset=41), lineno=71, col_offset=38, end_lineno=71, end_col_offset=41), keyword(arg='explain', value=Constant(value=True, lineno=71, col_offset=51, end_lineno=71, end_col_offset=55), lineno=71, col_offset=43, end_lineno=71, end_col_offset=55)], lineno=71, col_offset=16, end_lineno=71, end_col_offset=56), lineno=71, col_offset=4, end_lineno=71, end_col_offset=56), Assert(test=Compare(left=Call(func=Name(id='len', ctx=Load(), lineno=72, col_offset=11, end_lineno=72, end_col_offset=14), args=[Name(id='wide_hits', ctx=Load(), lineno=72, col_offset=15, end_lineno=72, end_col_offset=24)], lineno=72, col_offset=11, end_lineno=72, end_col_offset=25), ops=[Eq()], comparators=[Constant(value=2, lineno=72, col_offset=29, end_lineno=72, end_col_offset=30)], lineno=72, col_offset=11, end_lineno=72, end_col_offset=30), lineno=72, col_offset=4, end_lineno=72, end_col_offset=30), Assert(test=Compare(left=Subscript(value=Subscript(value=Name(id='wide_hits', ctx=Load(), lineno=73, col_offset=11, end_lineno=73, end_col_offset=20), slice=Constant(value=0, lineno=73, col_offset=21, end_lineno=73, end_col_offset=22), ctx=Load(), lineno=73, col_offset=11, end_lineno=73, end_col_offset=23), slice=Constant(value=0, lineno=73, col_offset=24, end_lineno=73, end_col_offset=25), ctx=Load(), lineno=73, col_offset=11, end_lineno=73, end_col_offset=26), ops=[In()], comparators=[Set(elts=[Constant(value=1, lineno=73, col_offset=31, end_lineno=73, end_col_offset=32), Constant(value=2, lineno=73, col_offset=34, end_lineno=73, end_col_offset=35)], lineno=73, col_offset=30, end_lineno=73, end_col_offset=36)], lineno=73, col_offset=11, end_lineno=73, end_col_offset=36), lineno=73, col_offset=4, end_lineno=73, end_col_offset=36), Assign(targets=[Name(id='narrow_hits', ctx=Store(), lineno=74, col_offset=4, end_lineno=74, end_col_offset=15)], value=Call(func=Attribute(value=Name(id='index', ctx=Load(), lineno=74, col_offset=18, end_lineno=74, end_col_offset=23), attr='rescore', ctx=Load(), lineno=74, col_offset=18, end_lineno=74, end_col_offset=31), args=[Constant(value='query', lineno=74, col_offset=32, end_lineno=74, end_col_offset=39), List(elts=[Constant(value=1, lineno=74, col_offset=42, end_lineno=74, end_col_offset=43)], ctx=Load(), lineno=74, col_offset=41, end_lineno=74, end_col_offset=44)], keywords=[keyword(arg='explain', value=Constant(value=False, lineno=74, col_offset=54, end_lineno=74, end_col_offset=59), lineno=74, col_offset=46, end_lineno=74, end_col_offset=59)], lineno=74, col_offset=18, end_lineno=74, end_col_offset=60), lineno=74, col_offset=4, end_lineno=74, end_col_offset=60), Assert(test=Compare(left=Call(func=Name(id='len', ctx=Load(), lineno=75, col_offset=11, end_lineno=75, end_col_offset=14), args=[Name(id='narrow_hits', ctx=Load(), lineno=75, col_offset=15, end_lineno=75, end_col_offset=26)], lineno=75, col_offset=11, end_lineno=75, end_col_offset=27), ops=[Eq()], comparators=[Constant(value=1, lineno=75, col_offset=31, end_lineno=75, end_col_offset=32)], lineno=75, col_offset=11, end_lineno=75, end_col_offset=32), lineno=75, col_offset=4, end_lineno=75, end_col_offset=32)], returns=Constant(value=None, lineno=59, col_offset=5, end_lineno=59, end_col_offset=9), lineno=56, col_offset=0, end_lineno=75, end_col_offset=32)])
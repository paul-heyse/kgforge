Module(body=[Expr(value=Constant(value='Tests for subprocess utilities with timeout and safety features.', lineno=1, col_offset=0, end_lineno=1, end_col_offset=70), lineno=1, col_offset=0, end_lineno=1, end_col_offset=70), ImportFrom(module='__future__', names=[alias(name='annotations', lineno=3, col_offset=23, end_lineno=3, end_col_offset=34)], level=0, lineno=3, col_offset=0, end_lineno=3, end_col_offset=34), ImportFrom(module='collections', names=[alias(name='UserDict', lineno=5, col_offset=24, end_lineno=5, end_col_offset=32)], level=0, lineno=5, col_offset=0, end_lineno=5, end_col_offset=32), ImportFrom(module='typing', names=[alias(name='TYPE_CHECKING', lineno=6, col_offset=19, end_lineno=6, end_col_offset=32)], level=0, lineno=6, col_offset=0, end_lineno=6, end_col_offset=32), Import(names=[alias(name='pytest', lineno=8, col_offset=7, end_lineno=8, end_col_offset=13)], lineno=8, col_offset=0, end_lineno=8, end_col_offset=13), ImportFrom(module='kgfoundry_common.subprocess_utils', names=[alias(name='SubprocessError', lineno=11, col_offset=4, end_lineno=11, end_col_offset=19), alias(name='SubprocessTimeoutError', lineno=12, col_offset=4, end_lineno=12, end_col_offset=26), alias(name='run_subprocess', lineno=13, col_offset=4, end_lineno=13, end_col_offset=18)], level=0, lineno=10, col_offset=0, end_lineno=14, end_col_offset=1), If(test=Name(id='TYPE_CHECKING', ctx=Load(), lineno=16, col_offset=3, end_lineno=16, end_col_offset=16), body=[ImportFrom(module='pathlib', names=[alias(name='Path', lineno=17, col_offset=24, end_lineno=17, end_col_offset=28)], level=0, lineno=17, col_offset=4, end_lineno=17, end_col_offset=28)], lineno=16, col_offset=0, end_lineno=17, end_col_offset=28), ClassDef(name='TestSubprocessExecution', body=[Expr(value=Constant(value='Test suite for subprocess execution.', lineno=21, col_offset=4, end_lineno=21, end_col_offset=46), lineno=21, col_offset=4, end_lineno=21, end_col_offset=46), FunctionDef(name='test_simple_command_success', args=arguments(args=[arg(arg='self', lineno=23, col_offset=36, end_lineno=23, end_col_offset=40)]), body=[Expr(value=Constant(value='Test successful simple command execution.', lineno=24, col_offset=8, end_lineno=24, end_col_offset=55), lineno=24, col_offset=8, end_lineno=24, end_col_offset=55), Assign(targets=[Name(id='result', ctx=Store(), lineno=25, col_offset=8, end_lineno=25, end_col_offset=14)], value=Call(func=Name(id='run_subprocess', ctx=Load(), lineno=25, col_offset=17, end_lineno=25, end_col_offset=31), args=[List(elts=[Constant(value='echo', lineno=25, col_offset=33, end_lineno=25, end_col_offset=39), Constant(value='hello', lineno=25, col_offset=41, end_lineno=25, end_col_offset=48)], ctx=Load(), lineno=25, col_offset=32, end_lineno=25, end_col_offset=49)], keywords=[keyword(arg='timeout', value=Constant(value=5, lineno=25, col_offset=59, end_lineno=25, end_col_offset=60), lineno=25, col_offset=51, end_lineno=25, end_col_offset=60)], lineno=25, col_offset=17, end_lineno=25, end_col_offset=61), lineno=25, col_offset=8, end_lineno=25, end_col_offset=61), Assert(test=Compare(left=Constant(value='hello', lineno=26, col_offset=15, end_lineno=26, end_col_offset=22), ops=[In()], comparators=[Name(id='result', ctx=Load(), lineno=26, col_offset=26, end_lineno=26, end_col_offset=32)], lineno=26, col_offset=15, end_lineno=26, end_col_offset=32), lineno=26, col_offset=8, end_lineno=26, end_col_offset=32)], returns=Constant(value=None, lineno=23, col_offset=45, end_lineno=23, end_col_offset=49), lineno=23, col_offset=4, end_lineno=26, end_col_offset=32), FunctionDef(name='test_command_with_output', args=arguments(args=[arg(arg='self', lineno=28, col_offset=33, end_lineno=28, end_col_offset=37)]), body=[Expr(value=Constant(value='Test command that produces output.', lineno=29, col_offset=8, end_lineno=29, end_col_offset=48), lineno=29, col_offset=8, end_lineno=29, end_col_offset=48), Assign(targets=[Name(id='result', ctx=Store(), lineno=30, col_offset=8, end_lineno=30, end_col_offset=14)], value=Call(func=Name(id='run_subprocess', ctx=Load(), lineno=30, col_offset=17, end_lineno=30, end_col_offset=31), args=[List(elts=[Constant(value='python', lineno=31, col_offset=13, end_lineno=31, end_col_offset=21), Constant(value='-c', lineno=31, col_offset=23, end_lineno=31, end_col_offset=27), Constant(value="print('test output')", lineno=31, col_offset=29, end_lineno=31, end_col_offset=51)], ctx=Load(), lineno=31, col_offset=12, end_lineno=31, end_col_offset=52)], keywords=[keyword(arg='timeout', value=Constant(value=10, lineno=32, col_offset=20, end_lineno=32, end_col_offset=22), lineno=32, col_offset=12, end_lineno=32, end_col_offset=22)], lineno=30, col_offset=17, end_lineno=33, end_col_offset=9), lineno=30, col_offset=8, end_lineno=33, end_col_offset=9), Assert(test=Compare(left=Constant(value='test output', lineno=34, col_offset=15, end_lineno=34, end_col_offset=28), ops=[In()], comparators=[Name(id='result', ctx=Load(), lineno=34, col_offset=32, end_lineno=34, end_col_offset=38)], lineno=34, col_offset=15, end_lineno=34, end_col_offset=38), lineno=34, col_offset=8, end_lineno=34, end_col_offset=38)], returns=Constant(value=None, lineno=28, col_offset=42, end_lineno=28, end_col_offset=46), lineno=28, col_offset=4, end_lineno=34, end_col_offset=38), FunctionDef(name='test_command_failure_raises_error', args=arguments(args=[arg(arg='self', lineno=36, col_offset=42, end_lineno=36, end_col_offset=46)]), body=[Expr(value=Constant(value='Test that failed command raises SubprocessError.', lineno=37, col_offset=8, end_lineno=37, end_col_offset=62), lineno=37, col_offset=8, end_lineno=37, end_col_offset=62), With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=38, col_offset=13, end_lineno=38, end_col_offset=19), attr='raises', ctx=Load(), lineno=38, col_offset=13, end_lineno=38, end_col_offset=26), args=[Name(id='SubprocessError', ctx=Load(), lineno=38, col_offset=27, end_lineno=38, end_col_offset=42)], lineno=38, col_offset=13, end_lineno=38, end_col_offset=43), optional_vars=Name(id='exc_info', ctx=Store(), lineno=38, col_offset=47, end_lineno=38, end_col_offset=55))], body=[Expr(value=Call(func=Name(id='run_subprocess', ctx=Load(), lineno=39, col_offset=12, end_lineno=39, end_col_offset=26), args=[List(elts=[Constant(value='python', lineno=40, col_offset=17, end_lineno=40, end_col_offset=25), Constant(value='-c', lineno=40, col_offset=27, end_lineno=40, end_col_offset=31), Constant(value='import sys; sys.exit(1)', lineno=40, col_offset=33, end_lineno=40, end_col_offset=58)], ctx=Load(), lineno=40, col_offset=16, end_lineno=40, end_col_offset=59)], keywords=[keyword(arg='timeout', value=Constant(value=5, lineno=41, col_offset=24, end_lineno=41, end_col_offset=25), lineno=41, col_offset=16, end_lineno=41, end_col_offset=25)], lineno=39, col_offset=12, end_lineno=42, end_col_offset=13), lineno=39, col_offset=12, end_lineno=42, end_col_offset=13)], lineno=38, col_offset=8, end_lineno=42, end_col_offset=13), Assert(test=Compare(left=Attribute(value=Attribute(value=Name(id='exc_info', ctx=Load(), lineno=43, col_offset=15, end_lineno=43, end_col_offset=23), attr='value', ctx=Load(), lineno=43, col_offset=15, end_lineno=43, end_col_offset=29), attr='returncode', ctx=Load(), lineno=43, col_offset=15, end_lineno=43, end_col_offset=40), ops=[Eq()], comparators=[Constant(value=1, lineno=43, col_offset=44, end_lineno=43, end_col_offset=45)], lineno=43, col_offset=15, end_lineno=43, end_col_offset=45), lineno=43, col_offset=8, end_lineno=43, end_col_offset=45)], returns=Constant(value=None, lineno=36, col_offset=51, end_lineno=36, end_col_offset=55), lineno=36, col_offset=4, end_lineno=43, end_col_offset=45), FunctionDef(name='test_command_with_stderr', args=arguments(args=[arg(arg='self', lineno=45, col_offset=33, end_lineno=45, end_col_offset=37)]), body=[Expr(value=Constant(value='Test that stderr is captured in error.', lineno=46, col_offset=8, end_lineno=46, end_col_offset=52), lineno=46, col_offset=8, end_lineno=46, end_col_offset=52), With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=47, col_offset=13, end_lineno=47, end_col_offset=19), attr='raises', ctx=Load(), lineno=47, col_offset=13, end_lineno=47, end_col_offset=26), args=[Name(id='SubprocessError', ctx=Load(), lineno=47, col_offset=27, end_lineno=47, end_col_offset=42)], lineno=47, col_offset=13, end_lineno=47, end_col_offset=43), optional_vars=Name(id='exc_info', ctx=Store(), lineno=47, col_offset=47, end_lineno=47, end_col_offset=55))], body=[Expr(value=Call(func=Name(id='run_subprocess', ctx=Load(), lineno=48, col_offset=12, end_lineno=48, end_col_offset=26), args=[List(elts=[Constant(value='python', lineno=49, col_offset=17, end_lineno=49, end_col_offset=25), Constant(value='-c', lineno=49, col_offset=27, end_lineno=49, end_col_offset=31), Constant(value="import sys; sys.stderr.write('error'); sys.exit(1)", lineno=49, col_offset=33, end_lineno=49, end_col_offset=85)], ctx=Load(), lineno=49, col_offset=16, end_lineno=49, end_col_offset=86)], keywords=[keyword(arg='timeout', value=Constant(value=5, lineno=50, col_offset=24, end_lineno=50, end_col_offset=25), lineno=50, col_offset=16, end_lineno=50, end_col_offset=25)], lineno=48, col_offset=12, end_lineno=51, end_col_offset=13), lineno=48, col_offset=12, end_lineno=51, end_col_offset=13)], lineno=47, col_offset=8, end_lineno=51, end_col_offset=13), Assert(test=Compare(left=Attribute(value=Attribute(value=Name(id='exc_info', ctx=Load(), lineno=52, col_offset=15, end_lineno=52, end_col_offset=23), attr='value', ctx=Load(), lineno=52, col_offset=15, end_lineno=52, end_col_offset=29), attr='stderr', ctx=Load(), lineno=52, col_offset=15, end_lineno=52, end_col_offset=36), ops=[IsNot()], comparators=[Constant(value=None, lineno=52, col_offset=44, end_lineno=52, end_col_offset=48)], lineno=52, col_offset=15, end_lineno=52, end_col_offset=48), lineno=52, col_offset=8, end_lineno=52, end_col_offset=48)], returns=Constant(value=None, lineno=45, col_offset=42, end_lineno=45, end_col_offset=46), lineno=45, col_offset=4, end_lineno=52, end_col_offset=48), FunctionDef(name='test_timeout_enforcement', args=arguments(args=[arg(arg='self', lineno=54, col_offset=33, end_lineno=54, end_col_offset=37)]), body=[Expr(value=Constant(value='Test that timeout is enforced.', lineno=55, col_offset=8, end_lineno=55, end_col_offset=44), lineno=55, col_offset=8, end_lineno=55, end_col_offset=44), With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=56, col_offset=13, end_lineno=56, end_col_offset=19), attr='raises', ctx=Load(), lineno=56, col_offset=13, end_lineno=56, end_col_offset=26), args=[Name(id='SubprocessTimeoutError', ctx=Load(), lineno=56, col_offset=27, end_lineno=56, end_col_offset=49)], lineno=56, col_offset=13, end_lineno=56, end_col_offset=50))], body=[Expr(value=Call(func=Name(id='run_subprocess', ctx=Load(), lineno=57, col_offset=12, end_lineno=57, end_col_offset=26), args=[List(elts=[Constant(value='python', lineno=58, col_offset=17, end_lineno=58, end_col_offset=25), Constant(value='-c', lineno=58, col_offset=27, end_lineno=58, end_col_offset=31), Constant(value='import time; time.sleep(10)', lineno=58, col_offset=33, end_lineno=58, end_col_offset=62)], ctx=Load(), lineno=58, col_offset=16, end_lineno=58, end_col_offset=63)], keywords=[keyword(arg='timeout', value=Constant(value=1, lineno=59, col_offset=24, end_lineno=59, end_col_offset=25), lineno=59, col_offset=16, end_lineno=59, end_col_offset=25)], lineno=57, col_offset=12, end_lineno=60, end_col_offset=13), lineno=57, col_offset=12, end_lineno=60, end_col_offset=13)], lineno=56, col_offset=8, end_lineno=60, end_col_offset=13)], returns=Constant(value=None, lineno=54, col_offset=42, end_lineno=54, end_col_offset=46), lineno=54, col_offset=4, end_lineno=60, end_col_offset=13), FunctionDef(name='test_timeout_error_has_details', args=arguments(args=[arg(arg='self', lineno=62, col_offset=39, end_lineno=62, end_col_offset=43)]), body=[Expr(value=Constant(value='Test that timeout error contains useful details.', lineno=63, col_offset=8, end_lineno=63, end_col_offset=62), lineno=63, col_offset=8, end_lineno=63, end_col_offset=62), With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=64, col_offset=13, end_lineno=64, end_col_offset=19), attr='raises', ctx=Load(), lineno=64, col_offset=13, end_lineno=64, end_col_offset=26), args=[Name(id='SubprocessTimeoutError', ctx=Load(), lineno=64, col_offset=27, end_lineno=64, end_col_offset=49)], lineno=64, col_offset=13, end_lineno=64, end_col_offset=50), optional_vars=Name(id='exc_info', ctx=Store(), lineno=64, col_offset=54, end_lineno=64, end_col_offset=62))], body=[Expr(value=Call(func=Name(id='run_subprocess', ctx=Load(), lineno=65, col_offset=12, end_lineno=65, end_col_offset=26), args=[List(elts=[Constant(value='sleep', lineno=66, col_offset=17, end_lineno=66, end_col_offset=24), Constant(value='10', lineno=66, col_offset=26, end_lineno=66, end_col_offset=30)], ctx=Load(), lineno=66, col_offset=16, end_lineno=66, end_col_offset=31)], keywords=[keyword(arg='timeout', value=Constant(value=1, lineno=67, col_offset=24, end_lineno=67, end_col_offset=25), lineno=67, col_offset=16, end_lineno=67, end_col_offset=25)], lineno=65, col_offset=12, end_lineno=68, end_col_offset=13), lineno=65, col_offset=12, end_lineno=68, end_col_offset=13)], lineno=64, col_offset=8, end_lineno=68, end_col_offset=13), Assert(test=Compare(left=Attribute(value=Attribute(value=Name(id='exc_info', ctx=Load(), lineno=69, col_offset=15, end_lineno=69, end_col_offset=23), attr='value', ctx=Load(), lineno=69, col_offset=15, end_lineno=69, end_col_offset=29), attr='timeout_seconds', ctx=Load(), lineno=69, col_offset=15, end_lineno=69, end_col_offset=45), ops=[Eq()], comparators=[Constant(value=1, lineno=69, col_offset=49, end_lineno=69, end_col_offset=50)], lineno=69, col_offset=15, end_lineno=69, end_col_offset=50), lineno=69, col_offset=8, end_lineno=69, end_col_offset=50), Assert(test=Compare(left=Attribute(value=Attribute(value=Name(id='exc_info', ctx=Load(), lineno=70, col_offset=15, end_lineno=70, end_col_offset=23), attr='value', ctx=Load(), lineno=70, col_offset=15, end_lineno=70, end_col_offset=29), attr='command', ctx=Load(), lineno=70, col_offset=15, end_lineno=70, end_col_offset=37), ops=[IsNot()], comparators=[Constant(value=None, lineno=70, col_offset=45, end_lineno=70, end_col_offset=49)], lineno=70, col_offset=15, end_lineno=70, end_col_offset=49), lineno=70, col_offset=8, end_lineno=70, end_col_offset=49)], returns=Constant(value=None, lineno=62, col_offset=48, end_lineno=62, end_col_offset=52), lineno=62, col_offset=4, end_lineno=70, end_col_offset=49), FunctionDef(name='test_invalid_timeout_too_low', args=arguments(args=[arg(arg='self', lineno=72, col_offset=37, end_lineno=72, end_col_offset=41)]), body=[Expr(value=Constant(value='Test that timeout < 1 is rejected.', lineno=73, col_offset=8, end_lineno=73, end_col_offset=48), lineno=73, col_offset=8, end_lineno=73, end_col_offset=48), With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=74, col_offset=13, end_lineno=74, end_col_offset=19), attr='raises', ctx=Load(), lineno=74, col_offset=13, end_lineno=74, end_col_offset=26), args=[Name(id='ValueError', ctx=Load(), lineno=74, col_offset=27, end_lineno=74, end_col_offset=37)], keywords=[keyword(arg='match', value=Constant(value='between', lineno=74, col_offset=45, end_lineno=74, end_col_offset=54), lineno=74, col_offset=39, end_lineno=74, end_col_offset=54)], lineno=74, col_offset=13, end_lineno=74, end_col_offset=55))], body=[Expr(value=Call(func=Name(id='run_subprocess', ctx=Load(), lineno=75, col_offset=12, end_lineno=75, end_col_offset=26), args=[List(elts=[Constant(value='echo', lineno=75, col_offset=28, end_lineno=75, end_col_offset=34), Constant(value='test', lineno=75, col_offset=36, end_lineno=75, end_col_offset=42)], ctx=Load(), lineno=75, col_offset=27, end_lineno=75, end_col_offset=43)], keywords=[keyword(arg='timeout', value=Constant(value=0, lineno=75, col_offset=53, end_lineno=75, end_col_offset=54), lineno=75, col_offset=45, end_lineno=75, end_col_offset=54)], lineno=75, col_offset=12, end_lineno=75, end_col_offset=55), lineno=75, col_offset=12, end_lineno=75, end_col_offset=55)], lineno=74, col_offset=8, end_lineno=75, end_col_offset=55)], returns=Constant(value=None, lineno=72, col_offset=46, end_lineno=72, end_col_offset=50), lineno=72, col_offset=4, end_lineno=75, end_col_offset=55), FunctionDef(name='test_invalid_timeout_too_high', args=arguments(args=[arg(arg='self', lineno=77, col_offset=38, end_lineno=77, end_col_offset=42)]), body=[Expr(value=Constant(value='Test that timeout > 3600 is rejected.', lineno=78, col_offset=8, end_lineno=78, end_col_offset=51), lineno=78, col_offset=8, end_lineno=78, end_col_offset=51), With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=79, col_offset=13, end_lineno=79, end_col_offset=19), attr='raises', ctx=Load(), lineno=79, col_offset=13, end_lineno=79, end_col_offset=26), args=[Name(id='ValueError', ctx=Load(), lineno=79, col_offset=27, end_lineno=79, end_col_offset=37)], keywords=[keyword(arg='match', value=Constant(value='between', lineno=79, col_offset=45, end_lineno=79, end_col_offset=54), lineno=79, col_offset=39, end_lineno=79, end_col_offset=54)], lineno=79, col_offset=13, end_lineno=79, end_col_offset=55))], body=[Expr(value=Call(func=Name(id='run_subprocess', ctx=Load(), lineno=80, col_offset=12, end_lineno=80, end_col_offset=26), args=[List(elts=[Constant(value='echo', lineno=80, col_offset=28, end_lineno=80, end_col_offset=34), Constant(value='test', lineno=80, col_offset=36, end_lineno=80, end_col_offset=42)], ctx=Load(), lineno=80, col_offset=27, end_lineno=80, end_col_offset=43)], keywords=[keyword(arg='timeout', value=Constant(value=3601, lineno=80, col_offset=53, end_lineno=80, end_col_offset=57), lineno=80, col_offset=45, end_lineno=80, end_col_offset=57)], lineno=80, col_offset=12, end_lineno=80, end_col_offset=58), lineno=80, col_offset=12, end_lineno=80, end_col_offset=58)], lineno=79, col_offset=8, end_lineno=80, end_col_offset=58)], returns=Constant(value=None, lineno=77, col_offset=47, end_lineno=77, end_col_offset=51), lineno=77, col_offset=4, end_lineno=80, end_col_offset=58), FunctionDef(name='test_valid_timeout_boundaries', args=arguments(args=[arg(arg='self', lineno=82, col_offset=38, end_lineno=82, end_col_offset=42)]), body=[Expr(value=Constant(value='Test that boundary timeout values are accepted.', lineno=83, col_offset=8, end_lineno=83, end_col_offset=61), lineno=83, col_offset=8, end_lineno=83, end_col_offset=61), Assign(targets=[Name(id='result', ctx=Store(), lineno=85, col_offset=8, end_lineno=85, end_col_offset=14)], value=Call(func=Name(id='run_subprocess', ctx=Load(), lineno=85, col_offset=17, end_lineno=85, end_col_offset=31), args=[List(elts=[Constant(value='echo', lineno=85, col_offset=33, end_lineno=85, end_col_offset=39), Constant(value='test', lineno=85, col_offset=41, end_lineno=85, end_col_offset=47)], ctx=Load(), lineno=85, col_offset=32, end_lineno=85, end_col_offset=48)], keywords=[keyword(arg='timeout', value=Constant(value=1, lineno=85, col_offset=58, end_lineno=85, end_col_offset=59), lineno=85, col_offset=50, end_lineno=85, end_col_offset=59)], lineno=85, col_offset=17, end_lineno=85, end_col_offset=60), lineno=85, col_offset=8, end_lineno=85, end_col_offset=60), Assert(test=Compare(left=Constant(value='test', lineno=86, col_offset=15, end_lineno=86, end_col_offset=21), ops=[In()], comparators=[Name(id='result', ctx=Load(), lineno=86, col_offset=25, end_lineno=86, end_col_offset=31)], lineno=86, col_offset=15, end_lineno=86, end_col_offset=31), lineno=86, col_offset=8, end_lineno=86, end_col_offset=31), Assign(targets=[Name(id='result', ctx=Store(), lineno=89, col_offset=8, end_lineno=89, end_col_offset=14)], value=Call(func=Name(id='run_subprocess', ctx=Load(), lineno=89, col_offset=17, end_lineno=89, end_col_offset=31), args=[List(elts=[Constant(value='echo', lineno=89, col_offset=33, end_lineno=89, end_col_offset=39), Constant(value='test', lineno=89, col_offset=41, end_lineno=89, end_col_offset=47)], ctx=Load(), lineno=89, col_offset=32, end_lineno=89, end_col_offset=48)], keywords=[keyword(arg='timeout', value=Constant(value=3600, lineno=89, col_offset=58, end_lineno=89, end_col_offset=62), lineno=89, col_offset=50, end_lineno=89, end_col_offset=62)], lineno=89, col_offset=17, end_lineno=89, end_col_offset=63), lineno=89, col_offset=8, end_lineno=89, end_col_offset=63), Assert(test=Compare(left=Constant(value='test', lineno=90, col_offset=15, end_lineno=90, end_col_offset=21), ops=[In()], comparators=[Name(id='result', ctx=Load(), lineno=90, col_offset=25, end_lineno=90, end_col_offset=31)], lineno=90, col_offset=15, end_lineno=90, end_col_offset=31), lineno=90, col_offset=8, end_lineno=90, end_col_offset=31)], returns=Constant(value=None, lineno=82, col_offset=47, end_lineno=82, end_col_offset=51), lineno=82, col_offset=4, end_lineno=90, end_col_offset=31), FunctionDef(name='test_timeout_none_uses_default', args=arguments(args=[arg(arg='self', lineno=92, col_offset=39, end_lineno=92, end_col_offset=43)]), body=[Expr(value=Constant(value='Test that None timeout uses default.', lineno=93, col_offset=8, end_lineno=93, end_col_offset=50), lineno=93, col_offset=8, end_lineno=93, end_col_offset=50), Assign(targets=[Name(id='result', ctx=Store(), lineno=94, col_offset=8, end_lineno=94, end_col_offset=14)], value=Call(func=Name(id='run_subprocess', ctx=Load(), lineno=94, col_offset=17, end_lineno=94, end_col_offset=31), args=[List(elts=[Constant(value='echo', lineno=94, col_offset=33, end_lineno=94, end_col_offset=39), Constant(value='test', lineno=94, col_offset=41, end_lineno=94, end_col_offset=47)], ctx=Load(), lineno=94, col_offset=32, end_lineno=94, end_col_offset=48)], keywords=[keyword(arg='timeout', value=Constant(value=None, lineno=94, col_offset=58, end_lineno=94, end_col_offset=62), lineno=94, col_offset=50, end_lineno=94, end_col_offset=62)], lineno=94, col_offset=17, end_lineno=94, end_col_offset=63), lineno=94, col_offset=8, end_lineno=94, end_col_offset=63), Assert(test=Compare(left=Constant(value='test', lineno=95, col_offset=15, end_lineno=95, end_col_offset=21), ops=[In()], comparators=[Name(id='result', ctx=Load(), lineno=95, col_offset=25, end_lineno=95, end_col_offset=31)], lineno=95, col_offset=15, end_lineno=95, end_col_offset=31), lineno=95, col_offset=8, end_lineno=95, end_col_offset=31)], returns=Constant(value=None, lineno=92, col_offset=48, end_lineno=92, end_col_offset=52), lineno=92, col_offset=4, end_lineno=95, end_col_offset=31)], lineno=20, col_offset=0, end_lineno=95, end_col_offset=31), ClassDef(name='TestWorkingDirectory', body=[Expr(value=Constant(value='Test suite for working directory handling.', lineno=99, col_offset=4, end_lineno=99, end_col_offset=52), lineno=99, col_offset=4, end_lineno=99, end_col_offset=52), FunctionDef(name='test_cwd_is_used', args=arguments(args=[arg(arg='self', lineno=101, col_offset=25, end_lineno=101, end_col_offset=29), arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=101, col_offset=41, end_lineno=101, end_col_offset=45), lineno=101, col_offset=31, end_lineno=101, end_col_offset=45)]), body=[Expr(value=Constant(value='Test that cwd parameter is used.', lineno=102, col_offset=8, end_lineno=102, end_col_offset=46), lineno=102, col_offset=8, end_lineno=102, end_col_offset=46), Assign(targets=[Name(id='test_file', ctx=Store(), lineno=104, col_offset=8, end_lineno=104, end_col_offset=17)], value=BinOp(left=Name(id='tmp_path', ctx=Load(), lineno=104, col_offset=20, end_lineno=104, end_col_offset=28), op=Div(), right=Constant(value='test.txt', lineno=104, col_offset=31, end_lineno=104, end_col_offset=41), lineno=104, col_offset=20, end_lineno=104, end_col_offset=41), lineno=104, col_offset=8, end_lineno=104, end_col_offset=41), Expr(value=Call(func=Attribute(value=Name(id='test_file', ctx=Load(), lineno=105, col_offset=8, end_lineno=105, end_col_offset=17), attr='write_text', ctx=Load(), lineno=105, col_offset=8, end_lineno=105, end_col_offset=28), args=[Constant(value='content', lineno=105, col_offset=29, end_lineno=105, end_col_offset=38)], lineno=105, col_offset=8, end_lineno=105, end_col_offset=39), lineno=105, col_offset=8, end_lineno=105, end_col_offset=39), Assign(targets=[Name(id='result', ctx=Store(), lineno=108, col_offset=8, end_lineno=108, end_col_offset=14)], value=Call(func=Name(id='run_subprocess', ctx=Load(), lineno=108, col_offset=17, end_lineno=108, end_col_offset=31), args=[List(elts=[Constant(value='ls', lineno=109, col_offset=13, end_lineno=109, end_col_offset=17), Constant(value='test.txt', lineno=109, col_offset=19, end_lineno=109, end_col_offset=29)], ctx=Load(), lineno=109, col_offset=12, end_lineno=109, end_col_offset=30)], keywords=[keyword(arg='timeout', value=Constant(value=5, lineno=110, col_offset=20, end_lineno=110, end_col_offset=21), lineno=110, col_offset=12, end_lineno=110, end_col_offset=21), keyword(arg='cwd', value=Name(id='tmp_path', ctx=Load(), lineno=111, col_offset=16, end_lineno=111, end_col_offset=24), lineno=111, col_offset=12, end_lineno=111, end_col_offset=24)], lineno=108, col_offset=17, end_lineno=112, end_col_offset=9), lineno=108, col_offset=8, end_lineno=112, end_col_offset=9), Assert(test=Compare(left=Constant(value='test.txt', lineno=113, col_offset=15, end_lineno=113, end_col_offset=25), ops=[In()], comparators=[Name(id='result', ctx=Load(), lineno=113, col_offset=29, end_lineno=113, end_col_offset=35)], lineno=113, col_offset=15, end_lineno=113, end_col_offset=35), lineno=113, col_offset=8, end_lineno=113, end_col_offset=35)], returns=Constant(value=None, lineno=101, col_offset=50, end_lineno=101, end_col_offset=54), lineno=101, col_offset=4, end_lineno=113, end_col_offset=35), FunctionDef(name='test_cwd_resolved_to_absolute_path', args=arguments(args=[arg(arg='self', lineno=115, col_offset=43, end_lineno=115, end_col_offset=47), arg(arg='tmp_path', annotation=Name(id='Path', ctx=Load(), lineno=115, col_offset=59, end_lineno=115, end_col_offset=63), lineno=115, col_offset=49, end_lineno=115, end_col_offset=63)]), body=[Expr(value=Constant(value='Test that cwd is resolved to absolute path.', lineno=116, col_offset=8, end_lineno=116, end_col_offset=57), lineno=116, col_offset=8, end_lineno=116, end_col_offset=57), Assign(targets=[Name(id='result', ctx=Store(), lineno=118, col_offset=8, end_lineno=118, end_col_offset=14)], value=Call(func=Name(id='run_subprocess', ctx=Load(), lineno=118, col_offset=17, end_lineno=118, end_col_offset=31), args=[List(elts=[Constant(value='pwd', lineno=119, col_offset=13, end_lineno=119, end_col_offset=18)], ctx=Load(), lineno=119, col_offset=12, end_lineno=119, end_col_offset=19)], keywords=[keyword(arg='timeout', value=Constant(value=5, lineno=120, col_offset=20, end_lineno=120, end_col_offset=21), lineno=120, col_offset=12, end_lineno=120, end_col_offset=21), keyword(arg='cwd', value=Name(id='tmp_path', ctx=Load(), lineno=121, col_offset=16, end_lineno=121, end_col_offset=24), lineno=121, col_offset=12, end_lineno=121, end_col_offset=24)], lineno=118, col_offset=17, end_lineno=122, end_col_offset=9), lineno=118, col_offset=8, end_lineno=122, end_col_offset=9), Assert(test=BoolOp(op=Or(), values=[Compare(left=Call(func=Name(id='str', ctx=Load(), lineno=124, col_offset=15, end_lineno=124, end_col_offset=18), args=[Call(func=Attribute(value=Name(id='tmp_path', ctx=Load(), lineno=124, col_offset=19, end_lineno=124, end_col_offset=27), attr='resolve', ctx=Load(), lineno=124, col_offset=19, end_lineno=124, end_col_offset=35), lineno=124, col_offset=19, end_lineno=124, end_col_offset=37)], lineno=124, col_offset=15, end_lineno=124, end_col_offset=38), ops=[In()], comparators=[Name(id='result', ctx=Load(), lineno=124, col_offset=42, end_lineno=124, end_col_offset=48)], lineno=124, col_offset=15, end_lineno=124, end_col_offset=48), Compare(left=Call(func=Name(id='str', ctx=Load(), lineno=124, col_offset=52, end_lineno=124, end_col_offset=55), args=[Name(id='tmp_path', ctx=Load(), lineno=124, col_offset=56, end_lineno=124, end_col_offset=64)], lineno=124, col_offset=52, end_lineno=124, end_col_offset=65), ops=[In()], comparators=[Name(id='result', ctx=Load(), lineno=124, col_offset=69, end_lineno=124, end_col_offset=75)], lineno=124, col_offset=52, end_lineno=124, end_col_offset=75)], lineno=124, col_offset=15, end_lineno=124, end_col_offset=75), lineno=124, col_offset=8, end_lineno=124, end_col_offset=75)], returns=Constant(value=None, lineno=115, col_offset=68, end_lineno=115, end_col_offset=72), lineno=115, col_offset=4, end_lineno=124, end_col_offset=75), FunctionDef(name='test_cwd_none_works', args=arguments(args=[arg(arg='self', lineno=126, col_offset=28, end_lineno=126, end_col_offset=32)]), body=[Expr(value=Constant(value='Test that cwd=None (inherit parent cwd) works.', lineno=127, col_offset=8, end_lineno=127, end_col_offset=60), lineno=127, col_offset=8, end_lineno=127, end_col_offset=60), Assign(targets=[Name(id='result', ctx=Store(), lineno=128, col_offset=8, end_lineno=128, end_col_offset=14)], value=Call(func=Name(id='run_subprocess', ctx=Load(), lineno=128, col_offset=17, end_lineno=128, end_col_offset=31), args=[List(elts=[Constant(value='pwd', lineno=128, col_offset=33, end_lineno=128, end_col_offset=38)], ctx=Load(), lineno=128, col_offset=32, end_lineno=128, end_col_offset=39)], keywords=[keyword(arg='timeout', value=Constant(value=5, lineno=128, col_offset=49, end_lineno=128, end_col_offset=50), lineno=128, col_offset=41, end_lineno=128, end_col_offset=50), keyword(arg='cwd', value=Constant(value=None, lineno=128, col_offset=56, end_lineno=128, end_col_offset=60), lineno=128, col_offset=52, end_lineno=128, end_col_offset=60)], lineno=128, col_offset=17, end_lineno=128, end_col_offset=61), lineno=128, col_offset=8, end_lineno=128, end_col_offset=61), Assert(test=Compare(left=Constant(value='/', lineno=129, col_offset=15, end_lineno=129, end_col_offset=18), ops=[In()], comparators=[Name(id='result', ctx=Load(), lineno=129, col_offset=22, end_lineno=129, end_col_offset=28)], lineno=129, col_offset=15, end_lineno=129, end_col_offset=28), lineno=129, col_offset=8, end_lineno=129, end_col_offset=28)], returns=Constant(value=None, lineno=126, col_offset=37, end_lineno=126, end_col_offset=41), lineno=126, col_offset=4, end_lineno=129, end_col_offset=28)], lineno=98, col_offset=0, end_lineno=129, end_col_offset=28), ClassDef(name='TestEnvironmentVariables', body=[Expr(value=Constant(value='Test suite for environment variable handling.', lineno=133, col_offset=4, end_lineno=133, end_col_offset=55), lineno=133, col_offset=4, end_lineno=133, end_col_offset=55), FunctionDef(name='test_env_dict_passed', args=arguments(args=[arg(arg='self', lineno=135, col_offset=29, end_lineno=135, end_col_offset=33)]), body=[Expr(value=Constant(value='Test that environment dict is passed to subprocess.', lineno=136, col_offset=8, end_lineno=136, end_col_offset=65), lineno=136, col_offset=8, end_lineno=136, end_col_offset=65), Assign(targets=[Name(id='env', ctx=Store(), lineno=137, col_offset=8, end_lineno=137, end_col_offset=11)], value=Dict(keys=[Constant(value='TEST_VAR', lineno=137, col_offset=15, end_lineno=137, end_col_offset=25), Constant(value='PATH', lineno=137, col_offset=41, end_lineno=137, end_col_offset=47)], values=[Constant(value='test_value', lineno=137, col_offset=27, end_lineno=137, end_col_offset=39), Constant(value='/usr/bin:/bin', lineno=137, col_offset=49, end_lineno=137, end_col_offset=64)], lineno=137, col_offset=14, end_lineno=137, end_col_offset=65), lineno=137, col_offset=8, end_lineno=137, end_col_offset=65), Assign(targets=[Name(id='result', ctx=Store(), lineno=138, col_offset=8, end_lineno=138, end_col_offset=14)], value=Call(func=Name(id='run_subprocess', ctx=Load(), lineno=138, col_offset=17, end_lineno=138, end_col_offset=31), args=[List(elts=[Constant(value='python', lineno=139, col_offset=13, end_lineno=139, end_col_offset=21), Constant(value='-c', lineno=139, col_offset=23, end_lineno=139, end_col_offset=27), Constant(value="import os; print(os.environ.get('TEST_VAR'))", lineno=139, col_offset=29, end_lineno=139, end_col_offset=75)], ctx=Load(), lineno=139, col_offset=12, end_lineno=139, end_col_offset=76)], keywords=[keyword(arg='timeout', value=Constant(value=5, lineno=140, col_offset=20, end_lineno=140, end_col_offset=21), lineno=140, col_offset=12, end_lineno=140, end_col_offset=21), keyword(arg='env', value=Name(id='env', ctx=Load(), lineno=141, col_offset=16, end_lineno=141, end_col_offset=19), lineno=141, col_offset=12, end_lineno=141, end_col_offset=19)], lineno=138, col_offset=17, end_lineno=142, end_col_offset=9), lineno=138, col_offset=8, end_lineno=142, end_col_offset=9), Assert(test=Compare(left=Constant(value='test_value', lineno=143, col_offset=15, end_lineno=143, end_col_offset=27), ops=[In()], comparators=[Name(id='result', ctx=Load(), lineno=143, col_offset=31, end_lineno=143, end_col_offset=37)], lineno=143, col_offset=15, end_lineno=143, end_col_offset=37), lineno=143, col_offset=8, end_lineno=143, end_col_offset=37)], returns=Constant(value=None, lineno=135, col_offset=38, end_lineno=135, end_col_offset=42), lineno=135, col_offset=4, end_lineno=143, end_col_offset=37), FunctionDef(name='test_env_none_inherits_parent', args=arguments(args=[arg(arg='self', lineno=145, col_offset=38, end_lineno=145, end_col_offset=42)]), body=[Expr(value=Constant(value='Test that env=None inherits parent environment.', lineno=146, col_offset=8, end_lineno=146, end_col_offset=61), lineno=146, col_offset=8, end_lineno=146, end_col_offset=61), Assign(targets=[Name(id='result', ctx=Store(), lineno=147, col_offset=8, end_lineno=147, end_col_offset=14)], value=Call(func=Name(id='run_subprocess', ctx=Load(), lineno=147, col_offset=17, end_lineno=147, end_col_offset=31), args=[List(elts=[Constant(value='python', lineno=148, col_offset=13, end_lineno=148, end_col_offset=21), Constant(value='-c', lineno=148, col_offset=23, end_lineno=148, end_col_offset=27), Constant(value="import os; print(bool(os.environ.get('PATH')))", lineno=148, col_offset=29, end_lineno=148, end_col_offset=77)], ctx=Load(), lineno=148, col_offset=12, end_lineno=148, end_col_offset=78)], keywords=[keyword(arg='timeout', value=Constant(value=5, lineno=149, col_offset=20, end_lineno=149, end_col_offset=21), lineno=149, col_offset=12, end_lineno=149, end_col_offset=21), keyword(arg='env', value=Constant(value=None, lineno=150, col_offset=16, end_lineno=150, end_col_offset=20), lineno=150, col_offset=12, end_lineno=150, end_col_offset=20)], lineno=147, col_offset=17, end_lineno=151, end_col_offset=9), lineno=147, col_offset=8, end_lineno=151, end_col_offset=9), Assert(test=Compare(left=Constant(value='True', lineno=152, col_offset=15, end_lineno=152, end_col_offset=21), ops=[In()], comparators=[Name(id='result', ctx=Load(), lineno=152, col_offset=25, end_lineno=152, end_col_offset=31)], lineno=152, col_offset=15, end_lineno=152, end_col_offset=31), lineno=152, col_offset=8, end_lineno=152, end_col_offset=31)], returns=Constant(value=None, lineno=145, col_offset=47, end_lineno=145, end_col_offset=51), lineno=145, col_offset=4, end_lineno=152, end_col_offset=31), FunctionDef(name='test_env_dict_mapping', args=arguments(args=[arg(arg='self', lineno=154, col_offset=30, end_lineno=154, end_col_offset=34)]), body=[Expr(value=Constant(value='Test that env can be any Mapping.', lineno=155, col_offset=8, end_lineno=155, end_col_offset=47), lineno=155, col_offset=8, end_lineno=155, end_col_offset=47), Assign(targets=[Name(id='env', ctx=Store(), lineno=156, col_offset=8, end_lineno=156, end_col_offset=11)], value=Call(func=Name(id='UserDict', ctx=Load(), lineno=156, col_offset=14, end_lineno=156, end_col_offset=22), args=[Dict(keys=[Constant(value='CUSTOM', lineno=156, col_offset=24, end_lineno=156, end_col_offset=32), Constant(value='PATH', lineno=156, col_offset=43, end_lineno=156, end_col_offset=49)], values=[Constant(value='value', lineno=156, col_offset=34, end_lineno=156, end_col_offset=41), Constant(value='/bin', lineno=156, col_offset=51, end_lineno=156, end_col_offset=57)], lineno=156, col_offset=23, end_lineno=156, end_col_offset=58)], lineno=156, col_offset=14, end_lineno=156, end_col_offset=59), lineno=156, col_offset=8, end_lineno=156, end_col_offset=59), Assign(targets=[Name(id='result', ctx=Store(), lineno=157, col_offset=8, end_lineno=157, end_col_offset=14)], value=Call(func=Name(id='run_subprocess', ctx=Load(), lineno=157, col_offset=17, end_lineno=157, end_col_offset=31), args=[List(elts=[Constant(value='python', lineno=158, col_offset=13, end_lineno=158, end_col_offset=21), Constant(value='-c', lineno=158, col_offset=23, end_lineno=158, end_col_offset=27), Constant(value="import os; print(os.environ.get('CUSTOM'))", lineno=158, col_offset=29, end_lineno=158, end_col_offset=73)], ctx=Load(), lineno=158, col_offset=12, end_lineno=158, end_col_offset=74)], keywords=[keyword(arg='timeout', value=Constant(value=5, lineno=159, col_offset=20, end_lineno=159, end_col_offset=21), lineno=159, col_offset=12, end_lineno=159, end_col_offset=21), keyword(arg='env', value=Name(id='env', ctx=Load(), lineno=160, col_offset=16, end_lineno=160, end_col_offset=19), lineno=160, col_offset=12, end_lineno=160, end_col_offset=19)], lineno=157, col_offset=17, end_lineno=161, end_col_offset=9), lineno=157, col_offset=8, end_lineno=161, end_col_offset=9), Assert(test=Compare(left=Constant(value='value', lineno=162, col_offset=15, end_lineno=162, end_col_offset=22), ops=[In()], comparators=[Name(id='result', ctx=Load(), lineno=162, col_offset=26, end_lineno=162, end_col_offset=32)], lineno=162, col_offset=15, end_lineno=162, end_col_offset=32), lineno=162, col_offset=8, end_lineno=162, end_col_offset=32)], returns=Constant(value=None, lineno=154, col_offset=39, end_lineno=154, end_col_offset=43), lineno=154, col_offset=4, end_lineno=162, end_col_offset=32)], lineno=132, col_offset=0, end_lineno=162, end_col_offset=32), ClassDef(name='TestErrorReporting', body=[Expr(value=Constant(value='Test suite for error messages.', lineno=166, col_offset=4, end_lineno=166, end_col_offset=40), lineno=166, col_offset=4, end_lineno=166, end_col_offset=40), FunctionDef(name='test_subprocess_error_message_includes_command', args=arguments(args=[arg(arg='self', lineno=168, col_offset=55, end_lineno=168, end_col_offset=59)]), body=[Expr(value=Constant(value='Test that error message includes command.', lineno=169, col_offset=8, end_lineno=169, end_col_offset=55), lineno=169, col_offset=8, end_lineno=169, end_col_offset=55), With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=170, col_offset=13, end_lineno=170, end_col_offset=19), attr='raises', ctx=Load(), lineno=170, col_offset=13, end_lineno=170, end_col_offset=26), args=[Name(id='SubprocessError', ctx=Load(), lineno=170, col_offset=27, end_lineno=170, end_col_offset=42)], lineno=170, col_offset=13, end_lineno=170, end_col_offset=43), optional_vars=Name(id='exc_info', ctx=Store(), lineno=170, col_offset=47, end_lineno=170, end_col_offset=55))], body=[Expr(value=Call(func=Name(id='run_subprocess', ctx=Load(), lineno=171, col_offset=12, end_lineno=171, end_col_offset=26), args=[List(elts=[Constant(value='false', lineno=171, col_offset=28, end_lineno=171, end_col_offset=35)], ctx=Load(), lineno=171, col_offset=27, end_lineno=171, end_col_offset=36)], keywords=[keyword(arg='timeout', value=Constant(value=5, lineno=171, col_offset=46, end_lineno=171, end_col_offset=47), lineno=171, col_offset=38, end_lineno=171, end_col_offset=47)], lineno=171, col_offset=12, end_lineno=171, end_col_offset=48), lineno=171, col_offset=12, end_lineno=171, end_col_offset=48)], lineno=170, col_offset=8, end_lineno=171, end_col_offset=48), Assert(test=Compare(left=Constant(value='false', lineno=172, col_offset=15, end_lineno=172, end_col_offset=22), ops=[In()], comparators=[Call(func=Name(id='str', ctx=Load(), lineno=172, col_offset=26, end_lineno=172, end_col_offset=29), args=[Attribute(value=Name(id='exc_info', ctx=Load(), lineno=172, col_offset=30, end_lineno=172, end_col_offset=38), attr='value', ctx=Load(), lineno=172, col_offset=30, end_lineno=172, end_col_offset=44)], lineno=172, col_offset=26, end_lineno=172, end_col_offset=45)], lineno=172, col_offset=15, end_lineno=172, end_col_offset=45), lineno=172, col_offset=8, end_lineno=172, end_col_offset=45)], returns=Constant(value=None, lineno=168, col_offset=64, end_lineno=168, end_col_offset=68), lineno=168, col_offset=4, end_lineno=172, end_col_offset=45), FunctionDef(name='test_timeout_error_message_includes_command', args=arguments(args=[arg(arg='self', lineno=174, col_offset=52, end_lineno=174, end_col_offset=56)]), body=[Expr(value=Constant(value='Test that timeout error includes command.', lineno=175, col_offset=8, end_lineno=175, end_col_offset=55), lineno=175, col_offset=8, end_lineno=175, end_col_offset=55), With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='pytest', ctx=Load(), lineno=176, col_offset=13, end_lineno=176, end_col_offset=19), attr='raises', ctx=Load(), lineno=176, col_offset=13, end_lineno=176, end_col_offset=26), args=[Name(id='SubprocessTimeoutError', ctx=Load(), lineno=176, col_offset=27, end_lineno=176, end_col_offset=49)], lineno=176, col_offset=13, end_lineno=176, end_col_offset=50), optional_vars=Name(id='exc_info', ctx=Store(), lineno=176, col_offset=54, end_lineno=176, end_col_offset=62))], body=[Expr(value=Call(func=Name(id='run_subprocess', ctx=Load(), lineno=177, col_offset=12, end_lineno=177, end_col_offset=26), args=[List(elts=[Constant(value='sleep', lineno=177, col_offset=28, end_lineno=177, end_col_offset=35), Constant(value='10', lineno=177, col_offset=37, end_lineno=177, end_col_offset=41)], ctx=Load(), lineno=177, col_offset=27, end_lineno=177, end_col_offset=42)], keywords=[keyword(arg='timeout', value=Constant(value=1, lineno=177, col_offset=52, end_lineno=177, end_col_offset=53), lineno=177, col_offset=44, end_lineno=177, end_col_offset=53)], lineno=177, col_offset=12, end_lineno=177, end_col_offset=54), lineno=177, col_offset=12, end_lineno=177, end_col_offset=54)], lineno=176, col_offset=8, end_lineno=177, end_col_offset=54), Assert(test=Compare(left=Constant(value='sleep', lineno=178, col_offset=15, end_lineno=178, end_col_offset=22), ops=[In()], comparators=[Call(func=Name(id='str', ctx=Load(), lineno=178, col_offset=26, end_lineno=178, end_col_offset=29), args=[Attribute(value=Name(id='exc_info', ctx=Load(), lineno=178, col_offset=30, end_lineno=178, end_col_offset=38), attr='value', ctx=Load(), lineno=178, col_offset=30, end_lineno=178, end_col_offset=44)], lineno=178, col_offset=26, end_lineno=178, end_col_offset=45)], lineno=178, col_offset=15, end_lineno=178, end_col_offset=45), lineno=178, col_offset=8, end_lineno=178, end_col_offset=45)], returns=Constant(value=None, lineno=174, col_offset=61, end_lineno=174, end_col_offset=65), lineno=174, col_offset=4, end_lineno=178, end_col_offset=45)], lineno=165, col_offset=0, end_lineno=178, end_col_offset=45), ClassDef(name='TestComplexCommands', body=[Expr(value=Constant(value='Test suite for complex command scenarios.', lineno=182, col_offset=4, end_lineno=182, end_col_offset=51), lineno=182, col_offset=4, end_lineno=182, end_col_offset=51), FunctionDef(name='test_python_script_with_args', args=arguments(args=[arg(arg='self', lineno=184, col_offset=37, end_lineno=184, end_col_offset=41)]), body=[Expr(value=Constant(value='Test Python script with arguments.', lineno=185, col_offset=8, end_lineno=185, end_col_offset=48), lineno=185, col_offset=8, end_lineno=185, end_col_offset=48), Assign(targets=[Name(id='result', ctx=Store(), lineno=186, col_offset=8, end_lineno=186, end_col_offset=14)], value=Call(func=Name(id='run_subprocess', ctx=Load(), lineno=186, col_offset=17, end_lineno=186, end_col_offset=31), args=[List(elts=[Constant(value='python', lineno=188, col_offset=16, end_lineno=188, end_col_offset=24), Constant(value='-c', lineno=189, col_offset=16, end_lineno=189, end_col_offset=20), Constant(value="import sys; print(f'{len(sys.argv)} {sys.argv[1]}')", lineno=190, col_offset=16, end_lineno=190, end_col_offset=69), Constant(value='arg1', lineno=191, col_offset=16, end_lineno=191, end_col_offset=22)], ctx=Load(), lineno=187, col_offset=12, end_lineno=192, end_col_offset=13)], keywords=[keyword(arg='timeout', value=Constant(value=5, lineno=193, col_offset=20, end_lineno=193, end_col_offset=21), lineno=193, col_offset=12, end_lineno=193, end_col_offset=21)], lineno=186, col_offset=17, end_lineno=194, end_col_offset=9), lineno=186, col_offset=8, end_lineno=194, end_col_offset=9), Assert(test=Compare(left=Constant(value='arg1', lineno=195, col_offset=15, end_lineno=195, end_col_offset=21), ops=[In()], comparators=[Name(id='result', ctx=Load(), lineno=195, col_offset=25, end_lineno=195, end_col_offset=31)], lineno=195, col_offset=15, end_lineno=195, end_col_offset=31), lineno=195, col_offset=8, end_lineno=195, end_col_offset=31)], returns=Constant(value=None, lineno=184, col_offset=46, end_lineno=184, end_col_offset=50), lineno=184, col_offset=4, end_lineno=195, end_col_offset=31), FunctionDef(name='test_shell_command_via_python', args=arguments(args=[arg(arg='self', lineno=197, col_offset=38, end_lineno=197, end_col_offset=42)]), body=[Expr(value=Constant(value='Test shell-like commands via Python.', lineno=198, col_offset=8, end_lineno=198, end_col_offset=50), lineno=198, col_offset=8, end_lineno=198, end_col_offset=50), Assign(targets=[Name(id='result', ctx=Store(), lineno=199, col_offset=8, end_lineno=199, end_col_offset=14)], value=Call(func=Name(id='run_subprocess', ctx=Load(), lineno=199, col_offset=17, end_lineno=199, end_col_offset=31), args=[List(elts=[Constant(value='python', lineno=201, col_offset=16, end_lineno=201, end_col_offset=24), Constant(value='-c', lineno=202, col_offset=16, end_lineno=202, end_col_offset=20), Constant(value="data = [1, 2, 3]; print(','.join(map(str, data)))", lineno=203, col_offset=17, end_lineno=203, end_col_offset=68)], ctx=Load(), lineno=200, col_offset=12, end_lineno=204, end_col_offset=13)], keywords=[keyword(arg='timeout', value=Constant(value=5, lineno=205, col_offset=20, end_lineno=205, end_col_offset=21), lineno=205, col_offset=12, end_lineno=205, end_col_offset=21)], lineno=199, col_offset=17, end_lineno=206, end_col_offset=9), lineno=199, col_offset=8, end_lineno=206, end_col_offset=9), Assert(test=Compare(left=Constant(value='1,2,3', lineno=207, col_offset=15, end_lineno=207, end_col_offset=22), ops=[In()], comparators=[Name(id='result', ctx=Load(), lineno=207, col_offset=26, end_lineno=207, end_col_offset=32)], lineno=207, col_offset=15, end_lineno=207, end_col_offset=32), lineno=207, col_offset=8, end_lineno=207, end_col_offset=32)], returns=Constant(value=None, lineno=197, col_offset=47, end_lineno=197, end_col_offset=51), lineno=197, col_offset=4, end_lineno=207, end_col_offset=32), FunctionDef(name='test_echo_various_inputs', args=arguments(args=[arg(arg='self', lineno=213, col_offset=33, end_lineno=213, end_col_offset=37), arg(arg='value', annotation=Name(id='str', ctx=Load(), lineno=213, col_offset=46, end_lineno=213, end_col_offset=49), lineno=213, col_offset=39, end_lineno=213, end_col_offset=49)]), body=[Expr(value=Constant(value='Test echo command with various inputs.', lineno=214, col_offset=8, end_lineno=214, end_col_offset=52), lineno=214, col_offset=8, end_lineno=214, end_col_offset=52), Assign(targets=[Name(id='result', ctx=Store(), lineno=215, col_offset=8, end_lineno=215, end_col_offset=14)], value=Call(func=Name(id='run_subprocess', ctx=Load(), lineno=215, col_offset=17, end_lineno=215, end_col_offset=31), args=[List(elts=[Constant(value='echo', lineno=215, col_offset=33, end_lineno=215, end_col_offset=39), Name(id='value', ctx=Load(), lineno=215, col_offset=41, end_lineno=215, end_col_offset=46)], ctx=Load(), lineno=215, col_offset=32, end_lineno=215, end_col_offset=47)], keywords=[keyword(arg='timeout', value=Constant(value=5, lineno=215, col_offset=57, end_lineno=215, end_col_offset=58), lineno=215, col_offset=49, end_lineno=215, end_col_offset=58)], lineno=215, col_offset=17, end_lineno=215, end_col_offset=59), lineno=215, col_offset=8, end_lineno=215, end_col_offset=59), If(test=Name(id='value', ctx=Load(), lineno=216, col_offset=11, end_lineno=216, end_col_offset=16), body=[Assert(test=Compare(left=Name(id='value', ctx=Load(), lineno=217, col_offset=19, end_lineno=217, end_col_offset=24), ops=[In()], comparators=[Name(id='result', ctx=Load(), lineno=217, col_offset=28, end_lineno=217, end_col_offset=34)], lineno=217, col_offset=19, end_lineno=217, end_col_offset=34), lineno=217, col_offset=12, end_lineno=217, end_col_offset=34)], lineno=216, col_offset=8, end_lineno=217, end_col_offset=34)], decorator_list=[Call(func=Attribute(value=Attribute(value=Name(id='pytest', ctx=Load(), lineno=209, col_offset=5, end_lineno=209, end_col_offset=11), attr='mark', ctx=Load(), lineno=209, col_offset=5, end_lineno=209, end_col_offset=16), attr='parametrize', ctx=Load(), lineno=209, col_offset=5, end_lineno=209, end_col_offset=28), args=[Constant(value='value', lineno=210, col_offset=8, end_lineno=210, end_col_offset=15), List(elts=[Constant(value='test', lineno=211, col_offset=9, end_lineno=211, end_col_offset=15), Constant(value='hello world', lineno=211, col_offset=17, end_lineno=211, end_col_offset=30), Constant(value='123', lineno=211, col_offset=32, end_lineno=211, end_col_offset=37), Constant(value='', lineno=211, col_offset=39, end_lineno=211, end_col_offset=41)], ctx=Load(), lineno=211, col_offset=8, end_lineno=211, end_col_offset=42)], lineno=209, col_offset=5, end_lineno=212, end_col_offset=5)], returns=Constant(value=None, lineno=213, col_offset=54, end_lineno=213, end_col_offset=58), lineno=213, col_offset=4, end_lineno=217, end_col_offset=34)], lineno=181, col_offset=0, end_lineno=217, end_col_offset=34)])
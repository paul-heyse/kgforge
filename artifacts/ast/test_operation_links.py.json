Module(body=[Expr(value=Constant(value='Tests for OpenAPI operation hyperlink generation utilities.', lineno=1, col_offset=0, end_lineno=1, end_col_offset=65), lineno=1, col_offset=0, end_lineno=1, end_col_offset=65), ImportFrom(module='__future__', names=[alias(name='annotations', lineno=3, col_offset=23, end_lineno=3, end_col_offset=34)], level=0, lineno=3, col_offset=0, end_lineno=3, end_col_offset=34), Import(names=[alias(name='importlib', lineno=5, col_offset=7, end_lineno=5, end_col_offset=16)], lineno=5, col_offset=0, end_lineno=5, end_col_offset=16), ImportFrom(module='collections.abc', names=[alias(name='Callable', lineno=6, col_offset=28, end_lineno=6, end_col_offset=36)], level=0, lineno=6, col_offset=0, end_lineno=6, end_col_offset=36), ImportFrom(module='pathlib', names=[alias(name='Path', lineno=7, col_offset=20, end_lineno=7, end_col_offset=24)], level=0, lineno=7, col_offset=0, end_lineno=7, end_col_offset=24), ImportFrom(module='typing', names=[alias(name='cast', lineno=8, col_offset=19, end_lineno=8, end_col_offset=23)], level=0, lineno=8, col_offset=0, end_lineno=8, end_col_offset=23), Import(names=[alias(name='pytest', lineno=10, col_offset=7, end_lineno=10, end_col_offset=13)], lineno=10, col_offset=0, end_lineno=10, end_col_offset=13), Assign(targets=[Name(id='operation_links', ctx=Store(), lineno=12, col_offset=0, end_lineno=12, end_col_offset=15)], value=Call(func=Attribute(value=Name(id='importlib', ctx=Load(), lineno=12, col_offset=18, end_lineno=12, end_col_offset=27), attr='import_module', ctx=Load(), lineno=12, col_offset=18, end_lineno=12, end_col_offset=41), args=[Constant(value='tools.mkdocs_suite.docs._scripts._operation_links', lineno=12, col_offset=42, end_lineno=12, end_col_offset=93)], lineno=12, col_offset=18, end_lineno=12, end_col_offset=94), lineno=12, col_offset=0, end_lineno=12, end_col_offset=94), Assign(targets=[Name(id='build_operation_href', ctx=Store(), lineno=13, col_offset=0, end_lineno=13, end_col_offset=20)], value=Call(func=Name(id='cast', ctx=Load(), lineno=13, col_offset=23, end_lineno=13, end_col_offset=27), args=[Constant(value='Callable[[object, str], str | None]', lineno=14, col_offset=4, end_lineno=14, end_col_offset=41), Attribute(value=Name(id='operation_links', ctx=Load(), lineno=15, col_offset=4, end_lineno=15, end_col_offset=19), attr='build_operation_href', ctx=Load(), lineno=15, col_offset=4, end_lineno=15, end_col_offset=40)], lineno=13, col_offset=23, end_lineno=16, end_col_offset=1), lineno=13, col_offset=0, end_lineno=16, end_col_offset=1), FunctionDef(name='test_build_operation_href_known_specs', args=arguments(args=[arg(arg='spec_path', annotation=BinOp(left=Name(id='str', ctx=Load(), lineno=35, col_offset=15, end_lineno=35, end_col_offset=18), op=BitOr(), right=Name(id='Path', ctx=Load(), lineno=35, col_offset=21, end_lineno=35, end_col_offset=25), lineno=35, col_offset=15, end_lineno=35, end_col_offset=25), lineno=35, col_offset=4, end_lineno=35, end_col_offset=25), arg(arg='operation_id', annotation=Name(id='str', ctx=Load(), lineno=35, col_offset=41, end_lineno=35, end_col_offset=44), lineno=35, col_offset=27, end_lineno=35, end_col_offset=44), arg(arg='expected', annotation=Name(id='str', ctx=Load(), lineno=35, col_offset=56, end_lineno=35, end_col_offset=59), lineno=35, col_offset=46, end_lineno=35, end_col_offset=59)]), body=[Expr(value=Constant(value='CLI and HTTP specs should resolve to their rendered Markdown pages.', lineno=37, col_offset=4, end_lineno=37, end_col_offset=77), lineno=37, col_offset=4, end_lineno=37, end_col_offset=77), Assign(targets=[Name(id='href', ctx=Store(), lineno=38, col_offset=4, end_lineno=38, end_col_offset=8)], value=Call(func=Name(id='build_operation_href', ctx=Load(), lineno=38, col_offset=11, end_lineno=38, end_col_offset=31), args=[Name(id='spec_path', ctx=Load(), lineno=38, col_offset=32, end_lineno=38, end_col_offset=41), Name(id='operation_id', ctx=Load(), lineno=38, col_offset=43, end_lineno=38, end_col_offset=55)], lineno=38, col_offset=11, end_lineno=38, end_col_offset=56), lineno=38, col_offset=4, end_lineno=38, end_col_offset=56), Assert(test=Compare(left=Name(id='href', ctx=Load(), lineno=40, col_offset=11, end_lineno=40, end_col_offset=15), ops=[Eq()], comparators=[Name(id='expected', ctx=Load(), lineno=40, col_offset=19, end_lineno=40, end_col_offset=27)], lineno=40, col_offset=11, end_lineno=40, end_col_offset=27), lineno=40, col_offset=4, end_lineno=40, end_col_offset=27)], decorator_list=[Call(func=Attribute(value=Attribute(value=Name(id='pytest', ctx=Load(), lineno=19, col_offset=1, end_lineno=19, end_col_offset=7), attr='mark', ctx=Load(), lineno=19, col_offset=1, end_lineno=19, end_col_offset=12), attr='parametrize', ctx=Load(), lineno=19, col_offset=1, end_lineno=19, end_col_offset=24), args=[Tuple(elts=[Constant(value='spec_path', lineno=20, col_offset=5, end_lineno=20, end_col_offset=16), Constant(value='operation_id', lineno=20, col_offset=18, end_lineno=20, end_col_offset=32), Constant(value='expected', lineno=20, col_offset=34, end_lineno=20, end_col_offset=44)], ctx=Load(), lineno=20, col_offset=4, end_lineno=20, end_col_offset=45), List(elts=[Tuple(elts=[Constant(value='docs/api/openapi-cli.yaml', lineno=23, col_offset=12, end_lineno=23, end_col_offset=39), Constant(value='cli.run-command', lineno=24, col_offset=12, end_lineno=24, end_col_offset=29), Constant(value='api/openapi-cli.md#operation/cli.run-command', lineno=25, col_offset=12, end_lineno=25, end_col_offset=58)], ctx=Load(), lineno=22, col_offset=8, end_lineno=26, end_col_offset=9), Tuple(elts=[Call(func=Name(id='Path', ctx=Load(), lineno=28, col_offset=12, end_lineno=28, end_col_offset=16), args=[Constant(value='docs/api/openapi.yaml', lineno=28, col_offset=17, end_lineno=28, end_col_offset=40)], lineno=28, col_offset=12, end_lineno=28, end_col_offset=41), Constant(value='http.get-resource', lineno=29, col_offset=12, end_lineno=29, end_col_offset=31), Constant(value='api/index.md#operation/http.get-resource', lineno=30, col_offset=12, end_lineno=30, end_col_offset=54)], ctx=Load(), lineno=27, col_offset=8, end_lineno=31, end_col_offset=9)], ctx=Load(), lineno=21, col_offset=4, end_lineno=32, end_col_offset=5)], lineno=19, col_offset=1, end_lineno=33, end_col_offset=1)], returns=Constant(value=None, lineno=36, col_offset=5, end_lineno=36, end_col_offset=9), lineno=34, col_offset=0, end_lineno=40, end_col_offset=27), FunctionDef(name='test_build_operation_href_encodes_operation_id', args=arguments(), body=[Expr(value=Constant(value='Operation identifiers must be percent-encoded within anchors.', lineno=44, col_offset=4, end_lineno=44, end_col_offset=71), lineno=44, col_offset=4, end_lineno=44, end_col_offset=71), Assign(targets=[Name(id='href', ctx=Store(), lineno=45, col_offset=4, end_lineno=45, end_col_offset=8)], value=Call(func=Name(id='build_operation_href', ctx=Load(), lineno=45, col_offset=11, end_lineno=45, end_col_offset=31), args=[Constant(value='openapi.yaml', lineno=45, col_offset=32, end_lineno=45, end_col_offset=46), Constant(value='operation id/with"chars"?', lineno=45, col_offset=48, end_lineno=45, end_col_offset=75)], lineno=45, col_offset=11, end_lineno=45, end_col_offset=76), lineno=45, col_offset=4, end_lineno=45, end_col_offset=76), Assert(test=Compare(left=Name(id='href', ctx=Load(), lineno=47, col_offset=11, end_lineno=47, end_col_offset=15), ops=[Eq()], comparators=[Constant(value='api/index.md#operation/operation%20id%2Fwith%22chars%22%3F', lineno=47, col_offset=19, end_lineno=47, end_col_offset=79)], lineno=47, col_offset=11, end_lineno=47, end_col_offset=79), lineno=47, col_offset=4, end_lineno=47, end_col_offset=79)], returns=Constant(value=None, lineno=43, col_offset=56, end_lineno=43, end_col_offset=60), lineno=43, col_offset=0, end_lineno=47, end_col_offset=79), FunctionDef(name='test_build_operation_href_rejects_unknown_specs', args=arguments(args=[arg(arg='spec_path', annotation=Name(id='object', ctx=Load(), lineno=51, col_offset=63, end_lineno=51, end_col_offset=69), lineno=51, col_offset=52, end_lineno=51, end_col_offset=69)]), body=[Expr(value=Constant(value='Unknown specification files should not produce hyperlinks.', lineno=52, col_offset=4, end_lineno=52, end_col_offset=68), lineno=52, col_offset=4, end_lineno=52, end_col_offset=68), Assign(targets=[Name(id='href', ctx=Store(), lineno=53, col_offset=4, end_lineno=53, end_col_offset=8)], value=Call(func=Name(id='build_operation_href', ctx=Load(), lineno=53, col_offset=11, end_lineno=53, end_col_offset=31), args=[Name(id='spec_path', ctx=Load(), lineno=53, col_offset=32, end_lineno=53, end_col_offset=41), Constant(value='ignored', lineno=53, col_offset=43, end_lineno=53, end_col_offset=52)], lineno=53, col_offset=11, end_lineno=53, end_col_offset=53), lineno=53, col_offset=4, end_lineno=53, end_col_offset=53), Assert(test=Compare(left=Name(id='href', ctx=Load(), lineno=55, col_offset=11, end_lineno=55, end_col_offset=15), ops=[Is()], comparators=[Constant(value=None, lineno=55, col_offset=19, end_lineno=55, end_col_offset=23)], lineno=55, col_offset=11, end_lineno=55, end_col_offset=23), lineno=55, col_offset=4, end_lineno=55, end_col_offset=23)], decorator_list=[Call(func=Attribute(value=Attribute(value=Name(id='pytest', ctx=Load(), lineno=50, col_offset=1, end_lineno=50, end_col_offset=7), attr='mark', ctx=Load(), lineno=50, col_offset=1, end_lineno=50, end_col_offset=12), attr='parametrize', ctx=Load(), lineno=50, col_offset=1, end_lineno=50, end_col_offset=24), args=[Constant(value='spec_path', lineno=50, col_offset=25, end_lineno=50, end_col_offset=36), List(elts=[Constant(value=None, lineno=50, col_offset=39, end_lineno=50, end_col_offset=43), Call(func=Name(id='object', ctx=Load(), lineno=50, col_offset=45, end_lineno=50, end_col_offset=51), lineno=50, col_offset=45, end_lineno=50, end_col_offset=53), Call(func=Name(id='Path', ctx=Load(), lineno=50, col_offset=55, end_lineno=50, end_col_offset=59), args=[Constant(value='spec/openapi.json', lineno=50, col_offset=60, end_lineno=50, end_col_offset=79)], lineno=50, col_offset=55, end_lineno=50, end_col_offset=80)], ctx=Load(), lineno=50, col_offset=38, end_lineno=50, end_col_offset=81)], lineno=50, col_offset=1, end_lineno=50, end_col_offset=82)], returns=Constant(value=None, lineno=51, col_offset=74, end_lineno=51, end_col_offset=78), lineno=51, col_offset=0, end_lineno=55, end_col_offset=23), FunctionDef(name='test_build_operation_href_requires_operation_identifier', args=arguments(), body=[Expr(value=Constant(value='Empty or missing operation identifiers should return ``None``.', lineno=59, col_offset=4, end_lineno=59, end_col_offset=72), lineno=59, col_offset=4, end_lineno=59, end_col_offset=72), Assert(test=Compare(left=Call(func=Name(id='build_operation_href', ctx=Load(), lineno=60, col_offset=11, end_lineno=60, end_col_offset=31), args=[Constant(value='openapi.yaml', lineno=60, col_offset=32, end_lineno=60, end_col_offset=46), Constant(value='', lineno=60, col_offset=48, end_lineno=60, end_col_offset=50)], lineno=60, col_offset=11, end_lineno=60, end_col_offset=51), ops=[Is()], comparators=[Constant(value=None, lineno=60, col_offset=55, end_lineno=60, end_col_offset=59)], lineno=60, col_offset=11, end_lineno=60, end_col_offset=59), lineno=60, col_offset=4, end_lineno=60, end_col_offset=59)], returns=Constant(value=None, lineno=58, col_offset=65, end_lineno=58, end_col_offset=69), lineno=58, col_offset=0, end_lineno=60, end_col_offset=59)])
Module(body=[Expr(value=Constant(value='Tests for the optional MkDocs D2 plugin wrapper.', lineno=1, col_offset=0, end_lineno=1, end_col_offset=54), lineno=1, col_offset=0, end_lineno=1, end_col_offset=54), ImportFrom(module='__future__', names=[alias(name='annotations', lineno=3, col_offset=23, end_lineno=3, end_col_offset=34)], level=0, lineno=3, col_offset=0, end_lineno=3, end_col_offset=34), Import(names=[alias(name='logging', lineno=5, col_offset=7, end_lineno=5, end_col_offset=14)], lineno=5, col_offset=0, end_lineno=5, end_col_offset=14), Import(names=[alias(name='pytest', lineno=7, col_offset=7, end_lineno=7, end_col_offset=13)], lineno=7, col_offset=0, end_lineno=7, end_col_offset=13), ImportFrom(module='tools.mkdocs_suite.plugins', names=[alias(name='optional_d2', lineno=8, col_offset=39, end_lineno=8, end_col_offset=50)], level=0, lineno=8, col_offset=0, end_lineno=8, end_col_offset=50), FunctionDef(name='test_logger_uses_null_handler', args=arguments(), body=[Expr(value=Constant(value='Ensure the optional D2 plugin logger installs a ``NullHandler``.', lineno=12, col_offset=4, end_lineno=12, end_col_offset=74), lineno=12, col_offset=4, end_lineno=12, end_col_offset=74), Assert(test=Call(func=Name(id='any', ctx=Load(), lineno=13, col_offset=11, end_lineno=13, end_col_offset=14), args=[GeneratorExp(elt=Call(func=Name(id='isinstance', ctx=Load(), lineno=13, col_offset=15, end_lineno=13, end_col_offset=25), args=[Name(id='handler', ctx=Load(), lineno=13, col_offset=26, end_lineno=13, end_col_offset=33), Attribute(value=Name(id='logging', ctx=Load(), lineno=13, col_offset=35, end_lineno=13, end_col_offset=42), attr='NullHandler', ctx=Load(), lineno=13, col_offset=35, end_lineno=13, end_col_offset=54)], lineno=13, col_offset=15, end_lineno=13, end_col_offset=55), generators=[comprehension(target=Name(id='handler', ctx=Store(), lineno=13, col_offset=60, end_lineno=13, end_col_offset=67), iter=Attribute(value=Attribute(value=Name(id='optional_d2', ctx=Load(), lineno=13, col_offset=71, end_lineno=13, end_col_offset=82), attr='LOGGER', ctx=Load(), lineno=13, col_offset=71, end_lineno=13, end_col_offset=89), attr='handlers', ctx=Load(), lineno=13, col_offset=71, end_lineno=13, end_col_offset=98), is_async=0)], lineno=13, col_offset=14, end_lineno=13, end_col_offset=99)], lineno=13, col_offset=11, end_lineno=13, end_col_offset=99), lineno=13, col_offset=4, end_lineno=13, end_col_offset=99)], returns=Constant(value=None, lineno=11, col_offset=39, end_lineno=11, end_col_offset=43), lineno=11, col_offset=0, end_lineno=13, end_col_offset=99), FunctionDef(name='test_missing_dependency_warning_requires_handler', args=arguments(args=[arg(arg='monkeypatch', annotation=Attribute(value=Name(id='pytest', ctx=Load(), lineno=17, col_offset=17, end_lineno=17, end_col_offset=23), attr='MonkeyPatch', ctx=Load(), lineno=17, col_offset=17, end_lineno=17, end_col_offset=35), lineno=17, col_offset=4, end_lineno=17, end_col_offset=35)]), body=[Expr(value=Constant(value='Surface warnings only when a real handler is registered.', lineno=19, col_offset=4, end_lineno=19, end_col_offset=66), lineno=19, col_offset=4, end_lineno=19, end_col_offset=66), Assign(targets=[Name(id='message', ctx=Store(), lineno=20, col_offset=4, end_lineno=20, end_col_offset=11)], value=Constant(value='mkdocs-d2-plugin is not installed; skipping D2 diagram rendering.', lineno=20, col_offset=14, end_lineno=20, end_col_offset=81), lineno=20, col_offset=4, end_lineno=20, end_col_offset=81), Expr(value=Call(func=Attribute(value=Name(id='monkeypatch', ctx=Load(), lineno=21, col_offset=4, end_lineno=21, end_col_offset=15), attr='setattr', ctx=Load(), lineno=21, col_offset=4, end_lineno=21, end_col_offset=23), args=[Name(id='optional_d2', ctx=Load(), lineno=21, col_offset=24, end_lineno=21, end_col_offset=35), Constant(value='D2Plugin', lineno=21, col_offset=37, end_lineno=21, end_col_offset=47), Constant(value=None, lineno=21, col_offset=49, end_lineno=21, end_col_offset=53)], lineno=21, col_offset=4, end_lineno=21, end_col_offset=54), lineno=21, col_offset=4, end_lineno=21, end_col_offset=54), Assign(targets=[Name(id='plugin_without_handler', ctx=Store(), lineno=23, col_offset=4, end_lineno=23, end_col_offset=26)], value=Call(func=Attribute(value=Name(id='optional_d2', ctx=Load(), lineno=23, col_offset=29, end_lineno=23, end_col_offset=40), attr='OptionalD2Plugin', ctx=Load(), lineno=23, col_offset=29, end_lineno=23, end_col_offset=57), lineno=23, col_offset=29, end_lineno=23, end_col_offset=59), lineno=23, col_offset=4, end_lineno=23, end_col_offset=59), Assign(targets=[Tuple(elts=[Name(id='errors', ctx=Store(), lineno=24, col_offset=4, end_lineno=24, end_col_offset=10), Name(id='warnings', ctx=Store(), lineno=24, col_offset=12, end_lineno=24, end_col_offset=20)], ctx=Store(), lineno=24, col_offset=4, end_lineno=24, end_col_offset=20)], value=Call(func=Attribute(value=Name(id='plugin_without_handler', ctx=Load(), lineno=24, col_offset=23, end_lineno=24, end_col_offset=45), attr='load_config', ctx=Load(), lineno=24, col_offset=23, end_lineno=24, end_col_offset=57), args=[Dict(lineno=24, col_offset=58, end_lineno=24, end_col_offset=60), Constant(value=None, lineno=24, col_offset=62, end_lineno=24, end_col_offset=66)], lineno=24, col_offset=23, end_lineno=24, end_col_offset=67), lineno=24, col_offset=4, end_lineno=24, end_col_offset=67), Assert(test=Compare(left=Call(func=Name(id='list', ctx=Load(), lineno=26, col_offset=11, end_lineno=26, end_col_offset=15), args=[Name(id='errors', ctx=Load(), lineno=26, col_offset=16, end_lineno=26, end_col_offset=22)], lineno=26, col_offset=11, end_lineno=26, end_col_offset=23), ops=[Eq()], comparators=[List(ctx=Load(), lineno=26, col_offset=27, end_lineno=26, end_col_offset=29)], lineno=26, col_offset=11, end_lineno=26, end_col_offset=29), lineno=26, col_offset=4, end_lineno=26, end_col_offset=29), Assert(test=Compare(left=Call(func=Name(id='list', ctx=Load(), lineno=27, col_offset=11, end_lineno=27, end_col_offset=15), args=[Name(id='warnings', ctx=Load(), lineno=27, col_offset=16, end_lineno=27, end_col_offset=24)], lineno=27, col_offset=11, end_lineno=27, end_col_offset=25), ops=[Eq()], comparators=[List(elts=[Name(id='message', ctx=Load(), lineno=27, col_offset=30, end_lineno=27, end_col_offset=37)], ctx=Load(), lineno=27, col_offset=29, end_lineno=27, end_col_offset=38)], lineno=27, col_offset=11, end_lineno=27, end_col_offset=38), lineno=27, col_offset=4, end_lineno=27, end_col_offset=38), AnnAssign(target=Name(id='records', ctx=Store(), lineno=29, col_offset=4, end_lineno=29, end_col_offset=11), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=29, col_offset=13, end_lineno=29, end_col_offset=17), slice=Name(id='str', ctx=Load(), lineno=29, col_offset=18, end_lineno=29, end_col_offset=21), ctx=Load(), lineno=29, col_offset=13, end_lineno=29, end_col_offset=22), value=List(ctx=Load(), lineno=29, col_offset=25, end_lineno=29, end_col_offset=27), simple=1, lineno=29, col_offset=4, end_lineno=29, end_col_offset=27), ClassDef(name='Collector', bases=[Attribute(value=Name(id='logging', ctx=Load(), lineno=31, col_offset=20, end_lineno=31, end_col_offset=27), attr='Handler', ctx=Load(), lineno=31, col_offset=20, end_lineno=31, end_col_offset=35)], body=[FunctionDef(name='emit', args=arguments(args=[arg(arg='self', lineno=32, col_offset=17, end_lineno=32, end_col_offset=21), arg(arg='record', annotation=Attribute(value=Name(id='logging', ctx=Load(), lineno=32, col_offset=31, end_lineno=32, end_col_offset=38), attr='LogRecord', ctx=Load(), lineno=32, col_offset=31, end_lineno=32, end_col_offset=48), lineno=32, col_offset=23, end_lineno=32, end_col_offset=48)]), body=[Expr(value=Call(func=Attribute(value=Name(id='records', ctx=Load(), lineno=33, col_offset=12, end_lineno=33, end_col_offset=19), attr='append', ctx=Load(), lineno=33, col_offset=12, end_lineno=33, end_col_offset=26), args=[Call(func=Attribute(value=Name(id='record', ctx=Load(), lineno=33, col_offset=27, end_lineno=33, end_col_offset=33), attr='getMessage', ctx=Load(), lineno=33, col_offset=27, end_lineno=33, end_col_offset=44), lineno=33, col_offset=27, end_lineno=33, end_col_offset=46)], lineno=33, col_offset=12, end_lineno=33, end_col_offset=47), lineno=33, col_offset=12, end_lineno=33, end_col_offset=47)], returns=Constant(value=None, lineno=32, col_offset=53, end_lineno=32, end_col_offset=57), lineno=32, col_offset=8, end_lineno=33, end_col_offset=47)], lineno=31, col_offset=4, end_lineno=33, end_col_offset=47), Assign(targets=[Name(id='handler', ctx=Store(), lineno=35, col_offset=4, end_lineno=35, end_col_offset=11)], value=Call(func=Name(id='Collector', ctx=Load(), lineno=35, col_offset=14, end_lineno=35, end_col_offset=23), lineno=35, col_offset=14, end_lineno=35, end_col_offset=25), lineno=35, col_offset=4, end_lineno=35, end_col_offset=25), Expr(value=Call(func=Attribute(value=Name(id='handler', ctx=Load(), lineno=36, col_offset=4, end_lineno=36, end_col_offset=11), attr='setLevel', ctx=Load(), lineno=36, col_offset=4, end_lineno=36, end_col_offset=20), args=[Attribute(value=Name(id='logging', ctx=Load(), lineno=36, col_offset=21, end_lineno=36, end_col_offset=28), attr='WARNING', ctx=Load(), lineno=36, col_offset=21, end_lineno=36, end_col_offset=36)], lineno=36, col_offset=4, end_lineno=36, end_col_offset=37), lineno=36, col_offset=4, end_lineno=36, end_col_offset=37), Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='optional_d2', ctx=Load(), lineno=37, col_offset=4, end_lineno=37, end_col_offset=15), attr='LOGGER', ctx=Load(), lineno=37, col_offset=4, end_lineno=37, end_col_offset=22), attr='addHandler', ctx=Load(), lineno=37, col_offset=4, end_lineno=37, end_col_offset=33), args=[Name(id='handler', ctx=Load(), lineno=37, col_offset=34, end_lineno=37, end_col_offset=41)], lineno=37, col_offset=4, end_lineno=37, end_col_offset=42), lineno=37, col_offset=4, end_lineno=37, end_col_offset=42), Try(body=[Assign(targets=[Name(id='plugin_with_handler', ctx=Store(), lineno=40, col_offset=8, end_lineno=40, end_col_offset=27)], value=Call(func=Attribute(value=Name(id='optional_d2', ctx=Load(), lineno=40, col_offset=30, end_lineno=40, end_col_offset=41), attr='OptionalD2Plugin', ctx=Load(), lineno=40, col_offset=30, end_lineno=40, end_col_offset=58), lineno=40, col_offset=30, end_lineno=40, end_col_offset=60), lineno=40, col_offset=8, end_lineno=40, end_col_offset=60), Assign(targets=[Tuple(elts=[Name(id='_', ctx=Store(), lineno=41, col_offset=8, end_lineno=41, end_col_offset=9), Name(id='warnings_with_handler', ctx=Store(), lineno=41, col_offset=11, end_lineno=41, end_col_offset=32)], ctx=Store(), lineno=41, col_offset=8, end_lineno=41, end_col_offset=32)], value=Call(func=Attribute(value=Name(id='plugin_with_handler', ctx=Load(), lineno=41, col_offset=35, end_lineno=41, end_col_offset=54), attr='load_config', ctx=Load(), lineno=41, col_offset=35, end_lineno=41, end_col_offset=66), args=[Dict(lineno=41, col_offset=67, end_lineno=41, end_col_offset=69), Constant(value=None, lineno=41, col_offset=71, end_lineno=41, end_col_offset=75)], lineno=41, col_offset=35, end_lineno=41, end_col_offset=76), lineno=41, col_offset=8, end_lineno=41, end_col_offset=76)], finalbody=[Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='optional_d2', ctx=Load(), lineno=43, col_offset=8, end_lineno=43, end_col_offset=19), attr='LOGGER', ctx=Load(), lineno=43, col_offset=8, end_lineno=43, end_col_offset=26), attr='removeHandler', ctx=Load(), lineno=43, col_offset=8, end_lineno=43, end_col_offset=40), args=[Name(id='handler', ctx=Load(), lineno=43, col_offset=41, end_lineno=43, end_col_offset=48)], lineno=43, col_offset=8, end_lineno=43, end_col_offset=49), lineno=43, col_offset=8, end_lineno=43, end_col_offset=49)], lineno=39, col_offset=4, end_lineno=43, end_col_offset=49), Assert(test=Compare(left=Call(func=Name(id='list', ctx=Load(), lineno=45, col_offset=11, end_lineno=45, end_col_offset=15), args=[Name(id='warnings_with_handler', ctx=Load(), lineno=45, col_offset=16, end_lineno=45, end_col_offset=37)], lineno=45, col_offset=11, end_lineno=45, end_col_offset=38), ops=[Eq()], comparators=[List(elts=[Name(id='message', ctx=Load(), lineno=45, col_offset=43, end_lineno=45, end_col_offset=50)], ctx=Load(), lineno=45, col_offset=42, end_lineno=45, end_col_offset=51)], lineno=45, col_offset=11, end_lineno=45, end_col_offset=51), lineno=45, col_offset=4, end_lineno=45, end_col_offset=51), Assert(test=Compare(left=Name(id='records', ctx=Load(), lineno=46, col_offset=11, end_lineno=46, end_col_offset=18), ops=[Eq()], comparators=[List(elts=[Name(id='message', ctx=Load(), lineno=46, col_offset=23, end_lineno=46, end_col_offset=30)], ctx=Load(), lineno=46, col_offset=22, end_lineno=46, end_col_offset=31)], lineno=46, col_offset=11, end_lineno=46, end_col_offset=31), lineno=46, col_offset=4, end_lineno=46, end_col_offset=31)], returns=Constant(value=None, lineno=18, col_offset=5, end_lineno=18, end_col_offset=9), lineno=16, col_offset=0, end_lineno=46, end_col_offset=31)])
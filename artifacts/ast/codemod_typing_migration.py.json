Module(body=[Expr(value=Constant(value='LibCST-based codemod for migrating to typing facades.\n\nThis module provides AST transformers that:\n1. Replace private `docs._types` imports with public `docs.types` imports\n2. Replace `resolve_numpy`, `resolve_fastapi`, `resolve_faiss` shims with `gate_import` calls\n3. Ensure TYPE_CHECKING guards are used for heavy optional dependencies\n', lineno=1, col_offset=0, end_lineno=7, end_col_offset=3), lineno=1, col_offset=0, end_lineno=7, end_col_offset=3), ImportFrom(module='__future__', names=[alias(name='annotations', lineno=9, col_offset=23, end_lineno=9, end_col_offset=34)], level=0, lineno=9, col_offset=0, end_lineno=9, end_col_offset=34), Import(names=[alias(name='argparse', lineno=11, col_offset=7, end_lineno=11, end_col_offset=15)], lineno=11, col_offset=0, end_lineno=11, end_col_offset=15), Import(names=[alias(name='logging', lineno=12, col_offset=7, end_lineno=12, end_col_offset=14)], lineno=12, col_offset=0, end_lineno=12, end_col_offset=14), ImportFrom(module='pathlib', names=[alias(name='Path', lineno=13, col_offset=20, end_lineno=13, end_col_offset=24)], level=0, lineno=13, col_offset=0, end_lineno=13, end_col_offset=24), ImportFrom(module='typing', names=[alias(name='cast', lineno=14, col_offset=19, end_lineno=14, end_col_offset=23), alias(name='override', lineno=14, col_offset=25, end_lineno=14, end_col_offset=33)], level=0, lineno=14, col_offset=0, end_lineno=14, end_col_offset=33), Import(names=[alias(name='libcst', asname='cst', lineno=16, col_offset=7, end_lineno=16, end_col_offset=20)], lineno=16, col_offset=0, end_lineno=16, end_col_offset=20), Assign(targets=[Name(id='logger', ctx=Store(), lineno=18, col_offset=0, end_lineno=18, end_col_offset=6)], value=Call(func=Attribute(value=Name(id='logging', ctx=Load(), lineno=18, col_offset=9, end_lineno=18, end_col_offset=16), attr='getLogger', ctx=Load(), lineno=18, col_offset=9, end_lineno=18, end_col_offset=26), args=[Name(id='__name__', ctx=Load(), lineno=18, col_offset=27, end_lineno=18, end_col_offset=35)], lineno=18, col_offset=9, end_lineno=18, end_col_offset=36), lineno=18, col_offset=0, end_lineno=18, end_col_offset=36), Assign(targets=[Name(id='MIN_MODULE_PARTS', ctx=Store(), lineno=20, col_offset=0, end_lineno=20, end_col_offset=16)], value=Constant(value=2, lineno=20, col_offset=19, end_lineno=20, end_col_offset=20), lineno=20, col_offset=0, end_lineno=20, end_col_offset=20), ClassDef(name='TypingFacadeMigrator', bases=[Attribute(value=Name(id='cst', ctx=Load(), lineno=23, col_offset=27, end_lineno=23, end_col_offset=30), attr='CSTTransformer', ctx=Load(), lineno=23, col_offset=27, end_lineno=23, end_col_offset=45)], body=[Expr(value=Constant(value='Migrate typing imports to use façades instead of private modules.\n\n    Notes\n    -----\n    This transformer replaces imports from ``docs._types`` with equivalent\n    imports from the public facade modules (e.g., ``docs.types``).\n    ', lineno=24, col_offset=4, end_lineno=30, end_col_offset=7), lineno=24, col_offset=4, end_lineno=30, end_col_offset=7), FunctionDef(name='__init__', args=arguments(args=[arg(arg='self', lineno=32, col_offset=17, end_lineno=32, end_col_offset=21)]), body=[Assign(targets=[Attribute(value=Name(id='self', ctx=Load(), lineno=33, col_offset=8, end_lineno=33, end_col_offset=12), attr='modified', ctx=Store(), lineno=33, col_offset=8, end_lineno=33, end_col_offset=21)], value=Constant(value=False, lineno=33, col_offset=24, end_lineno=33, end_col_offset=29), lineno=33, col_offset=8, end_lineno=33, end_col_offset=29)], returns=Constant(value=None, lineno=32, col_offset=26, end_lineno=32, end_col_offset=30), lineno=32, col_offset=4, end_lineno=33, end_col_offset=29), FunctionDef(name='_transform_import_from', args=arguments(args=[arg(arg='self', lineno=35, col_offset=31, end_lineno=35, end_col_offset=35), arg(arg='node', annotation=Attribute(value=Name(id='cst', ctx=Load(), lineno=35, col_offset=43, end_lineno=35, end_col_offset=46), attr='ImportFrom', ctx=Load(), lineno=35, col_offset=43, end_lineno=35, end_col_offset=57), lineno=35, col_offset=37, end_lineno=35, end_col_offset=57)]), body=[Expr(value=Constant(value='Return an updated import replacing private docs types with facades.\n\n        Parameters\n        ----------\n        node : cst.ImportFrom\n            ImportFrom node to transform.\n\n        Returns\n        -------\n        cst.ImportFrom | cst.RemovalSentinel\n            Transformed node or removal sentinel if unchanged.\n        ', lineno=36, col_offset=8, end_lineno=47, end_col_offset=11), lineno=36, col_offset=8, end_lineno=47, end_col_offset=11), If(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=48, col_offset=11, end_lineno=48, end_col_offset=21), args=[Attribute(value=Name(id='node', ctx=Load(), lineno=48, col_offset=22, end_lineno=48, end_col_offset=26), attr='module', ctx=Load(), lineno=48, col_offset=22, end_lineno=48, end_col_offset=33), Attribute(value=Name(id='cst', ctx=Load(), lineno=48, col_offset=35, end_lineno=48, end_col_offset=38), attr='Attribute', ctx=Load(), lineno=48, col_offset=35, end_lineno=48, end_col_offset=48)], lineno=48, col_offset=11, end_lineno=48, end_col_offset=49), body=[Assign(targets=[Name(id='module_parts', ctx=Store(), lineno=49, col_offset=12, end_lineno=49, end_col_offset=24)], value=Call(func=Attribute(value=Name(id='self', ctx=Load(), lineno=49, col_offset=27, end_lineno=49, end_col_offset=31), attr='_get_module_parts', ctx=Load(), lineno=49, col_offset=27, end_lineno=49, end_col_offset=49), args=[Attribute(value=Name(id='node', ctx=Load(), lineno=49, col_offset=50, end_lineno=49, end_col_offset=54), attr='module', ctx=Load(), lineno=49, col_offset=50, end_lineno=49, end_col_offset=61)], lineno=49, col_offset=27, end_lineno=49, end_col_offset=62), lineno=49, col_offset=12, end_lineno=49, end_col_offset=62), If(test=BoolOp(op=And(), values=[Compare(left=Call(func=Name(id='len', ctx=Load(), lineno=51, col_offset=16, end_lineno=51, end_col_offset=19), args=[Name(id='module_parts', ctx=Load(), lineno=51, col_offset=20, end_lineno=51, end_col_offset=32)], lineno=51, col_offset=16, end_lineno=51, end_col_offset=33), ops=[GtE()], comparators=[Name(id='MIN_MODULE_PARTS', ctx=Load(), lineno=51, col_offset=37, end_lineno=51, end_col_offset=53)], lineno=51, col_offset=16, end_lineno=51, end_col_offset=53), Compare(left=Subscript(value=Name(id='module_parts', ctx=Load(), lineno=52, col_offset=20, end_lineno=52, end_col_offset=32), slice=Constant(value=0, lineno=52, col_offset=33, end_lineno=52, end_col_offset=34), ctx=Load(), lineno=52, col_offset=20, end_lineno=52, end_col_offset=35), ops=[Eq()], comparators=[Constant(value='docs', lineno=52, col_offset=39, end_lineno=52, end_col_offset=45)], lineno=52, col_offset=20, end_lineno=52, end_col_offset=45), Compare(left=Subscript(value=Name(id='module_parts', ctx=Load(), lineno=53, col_offset=20, end_lineno=53, end_col_offset=32), slice=Constant(value=1, lineno=53, col_offset=33, end_lineno=53, end_col_offset=34), ctx=Load(), lineno=53, col_offset=20, end_lineno=53, end_col_offset=35), ops=[Eq()], comparators=[Constant(value='_types', lineno=53, col_offset=39, end_lineno=53, end_col_offset=47)], lineno=53, col_offset=20, end_lineno=53, end_col_offset=47)], lineno=51, col_offset=16, end_lineno=53, end_col_offset=47), body=[Assign(targets=[Name(id='new_parts', ctx=Store(), lineno=55, col_offset=16, end_lineno=55, end_col_offset=25)], value=List(elts=[Constant(value='docs', lineno=55, col_offset=29, end_lineno=55, end_col_offset=35), Constant(value='types', lineno=55, col_offset=37, end_lineno=55, end_col_offset=44), Starred(value=Subscript(value=Name(id='module_parts', ctx=Load(), lineno=55, col_offset=47, end_lineno=55, end_col_offset=59), slice=Slice(lower=Name(id='MIN_MODULE_PARTS', ctx=Load(), lineno=55, col_offset=60, end_lineno=55, end_col_offset=76), lineno=55, col_offset=60, end_lineno=55, end_col_offset=77), ctx=Load(), lineno=55, col_offset=47, end_lineno=55, end_col_offset=78), ctx=Load(), lineno=55, col_offset=46, end_lineno=55, end_col_offset=78)], ctx=Load(), lineno=55, col_offset=28, end_lineno=55, end_col_offset=79), lineno=55, col_offset=16, end_lineno=55, end_col_offset=79), Assign(targets=[Name(id='new_module', ctx=Store(), lineno=56, col_offset=16, end_lineno=56, end_col_offset=26)], value=Call(func=Attribute(value=Name(id='self', ctx=Load(), lineno=56, col_offset=29, end_lineno=56, end_col_offset=33), attr='_build_module', ctx=Load(), lineno=56, col_offset=29, end_lineno=56, end_col_offset=47), args=[Name(id='new_parts', ctx=Load(), lineno=56, col_offset=48, end_lineno=56, end_col_offset=57)], lineno=56, col_offset=29, end_lineno=56, end_col_offset=58), lineno=56, col_offset=16, end_lineno=56, end_col_offset=58), Assign(targets=[Attribute(value=Name(id='self', ctx=Load(), lineno=57, col_offset=16, end_lineno=57, end_col_offset=20), attr='modified', ctx=Store(), lineno=57, col_offset=16, end_lineno=57, end_col_offset=29)], value=Constant(value=True, lineno=57, col_offset=32, end_lineno=57, end_col_offset=36), lineno=57, col_offset=16, end_lineno=57, end_col_offset=36), Return(value=Call(func=Attribute(value=Name(id='node', ctx=Load(), lineno=58, col_offset=23, end_lineno=58, end_col_offset=27), attr='with_changes', ctx=Load(), lineno=58, col_offset=23, end_lineno=58, end_col_offset=40), keywords=[keyword(arg='module', value=Name(id='new_module', ctx=Load(), lineno=58, col_offset=48, end_lineno=58, end_col_offset=58), lineno=58, col_offset=41, end_lineno=58, end_col_offset=58)], lineno=58, col_offset=23, end_lineno=58, end_col_offset=59), lineno=58, col_offset=16, end_lineno=58, end_col_offset=59)], lineno=50, col_offset=12, end_lineno=58, end_col_offset=59)], lineno=48, col_offset=8, end_lineno=58, end_col_offset=59), If(test=BoolOp(op=And(), values=[Call(func=Name(id='isinstance', ctx=Load(), lineno=60, col_offset=11, end_lineno=60, end_col_offset=21), args=[Attribute(value=Name(id='node', ctx=Load(), lineno=60, col_offset=22, end_lineno=60, end_col_offset=26), attr='module', ctx=Load(), lineno=60, col_offset=22, end_lineno=60, end_col_offset=33), Attribute(value=Name(id='cst', ctx=Load(), lineno=60, col_offset=35, end_lineno=60, end_col_offset=38), attr='Name', ctx=Load(), lineno=60, col_offset=35, end_lineno=60, end_col_offset=43)], lineno=60, col_offset=11, end_lineno=60, end_col_offset=44), Compare(left=Attribute(value=Attribute(value=Name(id='node', ctx=Load(), lineno=60, col_offset=49, end_lineno=60, end_col_offset=53), attr='module', ctx=Load(), lineno=60, col_offset=49, end_lineno=60, end_col_offset=60), attr='value', ctx=Load(), lineno=60, col_offset=49, end_lineno=60, end_col_offset=66), ops=[Eq()], comparators=[Constant(value='docs._types', lineno=60, col_offset=70, end_lineno=60, end_col_offset=83)], lineno=60, col_offset=49, end_lineno=60, end_col_offset=83)], lineno=60, col_offset=11, end_lineno=60, end_col_offset=83), body=[Assign(targets=[Name(id='new_module', ctx=Store(), lineno=61, col_offset=12, end_lineno=61, end_col_offset=22)], value=Call(func=Attribute(value=Name(id='cst', ctx=Load(), lineno=61, col_offset=25, end_lineno=61, end_col_offset=28), attr='Name', ctx=Load(), lineno=61, col_offset=25, end_lineno=61, end_col_offset=33), args=[Constant(value='docs.types', lineno=61, col_offset=34, end_lineno=61, end_col_offset=46)], lineno=61, col_offset=25, end_lineno=61, end_col_offset=47), lineno=61, col_offset=12, end_lineno=61, end_col_offset=47), Assign(targets=[Attribute(value=Name(id='self', ctx=Load(), lineno=62, col_offset=12, end_lineno=62, end_col_offset=16), attr='modified', ctx=Store(), lineno=62, col_offset=12, end_lineno=62, end_col_offset=25)], value=Constant(value=True, lineno=62, col_offset=28, end_lineno=62, end_col_offset=32), lineno=62, col_offset=12, end_lineno=62, end_col_offset=32), Return(value=Call(func=Attribute(value=Name(id='node', ctx=Load(), lineno=63, col_offset=19, end_lineno=63, end_col_offset=23), attr='with_changes', ctx=Load(), lineno=63, col_offset=19, end_lineno=63, end_col_offset=36), keywords=[keyword(arg='module', value=Name(id='new_module', ctx=Load(), lineno=63, col_offset=44, end_lineno=63, end_col_offset=54), lineno=63, col_offset=37, end_lineno=63, end_col_offset=54)], lineno=63, col_offset=19, end_lineno=63, end_col_offset=55), lineno=63, col_offset=12, end_lineno=63, end_col_offset=55)], lineno=60, col_offset=8, end_lineno=63, end_col_offset=55), Return(value=Name(id='node', ctx=Load(), lineno=65, col_offset=15, end_lineno=65, end_col_offset=19), lineno=65, col_offset=8, end_lineno=65, end_col_offset=19)], returns=BinOp(left=Attribute(value=Name(id='cst', ctx=Load(), lineno=35, col_offset=62, end_lineno=35, end_col_offset=65), attr='ImportFrom', ctx=Load(), lineno=35, col_offset=62, end_lineno=35, end_col_offset=76), op=BitOr(), right=Attribute(value=Name(id='cst', ctx=Load(), lineno=35, col_offset=79, end_lineno=35, end_col_offset=82), attr='RemovalSentinel', ctx=Load(), lineno=35, col_offset=79, end_lineno=35, end_col_offset=98), lineno=35, col_offset=62, end_lineno=35, end_col_offset=98), lineno=35, col_offset=4, end_lineno=65, end_col_offset=19), FunctionDef(name='_transform_call', args=arguments(args=[arg(arg='self', lineno=67, col_offset=24, end_lineno=67, end_col_offset=28), arg(arg='node', annotation=Attribute(value=Name(id='cst', ctx=Load(), lineno=67, col_offset=36, end_lineno=67, end_col_offset=39), attr='Call', ctx=Load(), lineno=67, col_offset=36, end_lineno=67, end_col_offset=44), lineno=67, col_offset=30, end_lineno=67, end_col_offset=44)]), body=[Expr(value=Constant(value='Convert resolve_* shim invocations to gate_import calls.\n\n        Parameters\n        ----------\n        node : cst.Call\n            Call node to transform.\n\n        Returns\n        -------\n        cst.Call\n            Transformed call node with gate_import.\n        ', lineno=68, col_offset=8, end_lineno=79, end_col_offset=11), lineno=68, col_offset=8, end_lineno=79, end_col_offset=11), Assign(targets=[Name(id='shim_map', ctx=Store(), lineno=80, col_offset=8, end_lineno=80, end_col_offset=16)], value=Dict(keys=[Constant(value='resolve_numpy', lineno=81, col_offset=12, end_lineno=81, end_col_offset=27), Constant(value='resolve_fastapi', lineno=82, col_offset=12, end_lineno=82, end_col_offset=29), Constant(value='resolve_faiss', lineno=83, col_offset=12, end_lineno=83, end_col_offset=27)], values=[Tuple(elts=[Constant(value='gate_import', lineno=81, col_offset=30, end_lineno=81, end_col_offset=43), Constant(value='numpy', lineno=81, col_offset=45, end_lineno=81, end_col_offset=52), Constant(value='numpy array operations', lineno=81, col_offset=54, end_lineno=81, end_col_offset=78)], ctx=Load(), lineno=81, col_offset=29, end_lineno=81, end_col_offset=79), Tuple(elts=[Constant(value='gate_import', lineno=82, col_offset=32, end_lineno=82, end_col_offset=45), Constant(value='fastapi', lineno=82, col_offset=47, end_lineno=82, end_col_offset=56), Constant(value='FastAPI integration', lineno=82, col_offset=58, end_lineno=82, end_col_offset=79)], ctx=Load(), lineno=82, col_offset=31, end_lineno=82, end_col_offset=80), Tuple(elts=[Constant(value='gate_import', lineno=83, col_offset=30, end_lineno=83, end_col_offset=43), Constant(value='faiss', lineno=83, col_offset=45, end_lineno=83, end_col_offset=52), Constant(value='FAISS vector indexing', lineno=83, col_offset=54, end_lineno=83, end_col_offset=77)], ctx=Load(), lineno=83, col_offset=29, end_lineno=83, end_col_offset=78)], lineno=80, col_offset=19, end_lineno=84, end_col_offset=9), lineno=80, col_offset=8, end_lineno=84, end_col_offset=9), If(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=86, col_offset=11, end_lineno=86, end_col_offset=21), args=[Attribute(value=Name(id='node', ctx=Load(), lineno=86, col_offset=22, end_lineno=86, end_col_offset=26), attr='func', ctx=Load(), lineno=86, col_offset=22, end_lineno=86, end_col_offset=31), Attribute(value=Name(id='cst', ctx=Load(), lineno=86, col_offset=33, end_lineno=86, end_col_offset=36), attr='Name', ctx=Load(), lineno=86, col_offset=33, end_lineno=86, end_col_offset=41)], lineno=86, col_offset=11, end_lineno=86, end_col_offset=42), body=[Assign(targets=[Name(id='func_name', ctx=Store(), lineno=87, col_offset=12, end_lineno=87, end_col_offset=21)], value=Attribute(value=Attribute(value=Name(id='node', ctx=Load(), lineno=87, col_offset=24, end_lineno=87, end_col_offset=28), attr='func', ctx=Load(), lineno=87, col_offset=24, end_lineno=87, end_col_offset=33), attr='value', ctx=Load(), lineno=87, col_offset=24, end_lineno=87, end_col_offset=39), lineno=87, col_offset=12, end_lineno=87, end_col_offset=39), If(test=Compare(left=Name(id='func_name', ctx=Load(), lineno=88, col_offset=15, end_lineno=88, end_col_offset=24), ops=[In()], comparators=[Name(id='shim_map', ctx=Load(), lineno=88, col_offset=28, end_lineno=88, end_col_offset=36)], lineno=88, col_offset=15, end_lineno=88, end_col_offset=36), body=[Assign(targets=[Tuple(elts=[Name(id='gate_func', ctx=Store(), lineno=89, col_offset=16, end_lineno=89, end_col_offset=25), Name(id='lib_name', ctx=Store(), lineno=89, col_offset=27, end_lineno=89, end_col_offset=35), Name(id='usage', ctx=Store(), lineno=89, col_offset=37, end_lineno=89, end_col_offset=42)], ctx=Store(), lineno=89, col_offset=16, end_lineno=89, end_col_offset=42)], value=Subscript(value=Name(id='shim_map', ctx=Load(), lineno=89, col_offset=45, end_lineno=89, end_col_offset=53), slice=Name(id='func_name', ctx=Load(), lineno=89, col_offset=54, end_lineno=89, end_col_offset=63), ctx=Load(), lineno=89, col_offset=45, end_lineno=89, end_col_offset=64), lineno=89, col_offset=16, end_lineno=89, end_col_offset=64), Assign(targets=[Name(id='new_args', ctx=Store(), lineno=90, col_offset=16, end_lineno=90, end_col_offset=24)], value=List(elts=[Call(func=Attribute(value=Name(id='cst', ctx=Load(), lineno=91, col_offset=20, end_lineno=91, end_col_offset=23), attr='Arg', ctx=Load(), lineno=91, col_offset=20, end_lineno=91, end_col_offset=27), args=[Call(func=Attribute(value=Name(id='cst', ctx=Load(), lineno=91, col_offset=28, end_lineno=91, end_col_offset=31), attr='SimpleString', ctx=Load(), lineno=91, col_offset=28, end_lineno=91, end_col_offset=44), args=[JoinedStr(values=[Constant(value='"', lineno=91, col_offset=47, end_lineno=91, end_col_offset=48), FormattedValue(value=Name(id='lib_name', ctx=Load(), lineno=91, col_offset=49, end_lineno=91, end_col_offset=57), conversion=-1, lineno=91, col_offset=48, end_lineno=91, end_col_offset=58), Constant(value='"', lineno=91, col_offset=58, end_lineno=91, end_col_offset=59)], lineno=91, col_offset=45, end_lineno=91, end_col_offset=60)], lineno=91, col_offset=28, end_lineno=91, end_col_offset=61)], lineno=91, col_offset=20, end_lineno=91, end_col_offset=62), Call(func=Attribute(value=Name(id='cst', ctx=Load(), lineno=92, col_offset=20, end_lineno=92, end_col_offset=23), attr='Arg', ctx=Load(), lineno=92, col_offset=20, end_lineno=92, end_col_offset=27), args=[Call(func=Attribute(value=Name(id='cst', ctx=Load(), lineno=92, col_offset=28, end_lineno=92, end_col_offset=31), attr='SimpleString', ctx=Load(), lineno=92, col_offset=28, end_lineno=92, end_col_offset=44), args=[JoinedStr(values=[Constant(value='"', lineno=92, col_offset=47, end_lineno=92, end_col_offset=48), FormattedValue(value=Name(id='usage', ctx=Load(), lineno=92, col_offset=49, end_lineno=92, end_col_offset=54), conversion=-1, lineno=92, col_offset=48, end_lineno=92, end_col_offset=55), Constant(value='"', lineno=92, col_offset=55, end_lineno=92, end_col_offset=56)], lineno=92, col_offset=45, end_lineno=92, end_col_offset=57)], lineno=92, col_offset=28, end_lineno=92, end_col_offset=58)], lineno=92, col_offset=20, end_lineno=92, end_col_offset=59)], ctx=Load(), lineno=90, col_offset=27, end_lineno=93, end_col_offset=17), lineno=90, col_offset=16, end_lineno=93, end_col_offset=17), Assign(targets=[Attribute(value=Name(id='self', ctx=Load(), lineno=94, col_offset=16, end_lineno=94, end_col_offset=20), attr='modified', ctx=Store(), lineno=94, col_offset=16, end_lineno=94, end_col_offset=29)], value=Constant(value=True, lineno=94, col_offset=32, end_lineno=94, end_col_offset=36), lineno=94, col_offset=16, end_lineno=94, end_col_offset=36), Return(value=Call(func=Attribute(value=Name(id='node', ctx=Load(), lineno=95, col_offset=23, end_lineno=95, end_col_offset=27), attr='with_changes', ctx=Load(), lineno=95, col_offset=23, end_lineno=95, end_col_offset=40), keywords=[keyword(arg='func', value=Call(func=Attribute(value=Name(id='cst', ctx=Load(), lineno=95, col_offset=46, end_lineno=95, end_col_offset=49), attr='Name', ctx=Load(), lineno=95, col_offset=46, end_lineno=95, end_col_offset=54), args=[Name(id='gate_func', ctx=Load(), lineno=95, col_offset=55, end_lineno=95, end_col_offset=64)], lineno=95, col_offset=46, end_lineno=95, end_col_offset=65), lineno=95, col_offset=41, end_lineno=95, end_col_offset=65), keyword(arg='args', value=Name(id='new_args', ctx=Load(), lineno=95, col_offset=72, end_lineno=95, end_col_offset=80), lineno=95, col_offset=67, end_lineno=95, end_col_offset=80)], lineno=95, col_offset=23, end_lineno=95, end_col_offset=81), lineno=95, col_offset=16, end_lineno=95, end_col_offset=81)], lineno=88, col_offset=12, end_lineno=95, end_col_offset=81)], lineno=86, col_offset=8, end_lineno=95, end_col_offset=81), Return(value=Name(id='node', ctx=Load(), lineno=97, col_offset=15, end_lineno=97, end_col_offset=19), lineno=97, col_offset=8, end_lineno=97, end_col_offset=19)], returns=Attribute(value=Name(id='cst', ctx=Load(), lineno=67, col_offset=49, end_lineno=67, end_col_offset=52), attr='Call', ctx=Load(), lineno=67, col_offset=49, end_lineno=67, end_col_offset=57), lineno=67, col_offset=4, end_lineno=97, end_col_offset=19), FunctionDef(name='_get_module_parts', args=arguments(args=[arg(arg='node', annotation=Attribute(value=Name(id='cst', ctx=Load(), lineno=100, col_offset=32, end_lineno=100, end_col_offset=35), attr='BaseExpression', ctx=Load(), lineno=100, col_offset=32, end_lineno=100, end_col_offset=50), lineno=100, col_offset=26, end_lineno=100, end_col_offset=50)]), body=[Expr(value=Constant(value='Extract module path as list of parts.\n\n        Parameters\n        ----------\n        node : cst.BaseExpression\n            Module expression node to parse.\n\n        Returns\n        -------\n        list[str]\n            List of module name parts.\n        ', lineno=101, col_offset=8, end_lineno=112, end_col_offset=11), lineno=101, col_offset=8, end_lineno=112, end_col_offset=11), AnnAssign(target=Name(id='parts', ctx=Store(), lineno=113, col_offset=8, end_lineno=113, end_col_offset=13), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=113, col_offset=15, end_lineno=113, end_col_offset=19), slice=Name(id='str', ctx=Load(), lineno=113, col_offset=20, end_lineno=113, end_col_offset=23), ctx=Load(), lineno=113, col_offset=15, end_lineno=113, end_col_offset=24), value=List(ctx=Load(), lineno=113, col_offset=27, end_lineno=113, end_col_offset=29), simple=1, lineno=113, col_offset=8, end_lineno=113, end_col_offset=29), Assign(targets=[Name(id='current', ctx=Store(), lineno=114, col_offset=8, end_lineno=114, end_col_offset=15)], value=Name(id='node', ctx=Load(), lineno=114, col_offset=18, end_lineno=114, end_col_offset=22), lineno=114, col_offset=8, end_lineno=114, end_col_offset=22), While(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=115, col_offset=14, end_lineno=115, end_col_offset=24), args=[Name(id='current', ctx=Load(), lineno=115, col_offset=25, end_lineno=115, end_col_offset=32), Attribute(value=Name(id='cst', ctx=Load(), lineno=115, col_offset=34, end_lineno=115, end_col_offset=37), attr='Attribute', ctx=Load(), lineno=115, col_offset=34, end_lineno=115, end_col_offset=47)], lineno=115, col_offset=14, end_lineno=115, end_col_offset=48), body=[Expr(value=Call(func=Attribute(value=Name(id='parts', ctx=Load(), lineno=116, col_offset=12, end_lineno=116, end_col_offset=17), attr='insert', ctx=Load(), lineno=116, col_offset=12, end_lineno=116, end_col_offset=24), args=[Constant(value=0, lineno=116, col_offset=25, end_lineno=116, end_col_offset=26), Attribute(value=Attribute(value=Name(id='current', ctx=Load(), lineno=116, col_offset=28, end_lineno=116, end_col_offset=35), attr='attr', ctx=Load(), lineno=116, col_offset=28, end_lineno=116, end_col_offset=40), attr='value', ctx=Load(), lineno=116, col_offset=28, end_lineno=116, end_col_offset=46)], lineno=116, col_offset=12, end_lineno=116, end_col_offset=47), lineno=116, col_offset=12, end_lineno=116, end_col_offset=47), Assign(targets=[Name(id='current', ctx=Store(), lineno=117, col_offset=12, end_lineno=117, end_col_offset=19)], value=Attribute(value=Name(id='current', ctx=Load(), lineno=117, col_offset=22, end_lineno=117, end_col_offset=29), attr='value', ctx=Load(), lineno=117, col_offset=22, end_lineno=117, end_col_offset=35), lineno=117, col_offset=12, end_lineno=117, end_col_offset=35)], lineno=115, col_offset=8, end_lineno=117, end_col_offset=35), If(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=118, col_offset=11, end_lineno=118, end_col_offset=21), args=[Name(id='current', ctx=Load(), lineno=118, col_offset=22, end_lineno=118, end_col_offset=29), Attribute(value=Name(id='cst', ctx=Load(), lineno=118, col_offset=31, end_lineno=118, end_col_offset=34), attr='Name', ctx=Load(), lineno=118, col_offset=31, end_lineno=118, end_col_offset=39)], lineno=118, col_offset=11, end_lineno=118, end_col_offset=40), body=[Expr(value=Call(func=Attribute(value=Name(id='parts', ctx=Load(), lineno=119, col_offset=12, end_lineno=119, end_col_offset=17), attr='insert', ctx=Load(), lineno=119, col_offset=12, end_lineno=119, end_col_offset=24), args=[Constant(value=0, lineno=119, col_offset=25, end_lineno=119, end_col_offset=26), Attribute(value=Name(id='current', ctx=Load(), lineno=119, col_offset=28, end_lineno=119, end_col_offset=35), attr='value', ctx=Load(), lineno=119, col_offset=28, end_lineno=119, end_col_offset=41)], lineno=119, col_offset=12, end_lineno=119, end_col_offset=42), lineno=119, col_offset=12, end_lineno=119, end_col_offset=42)], lineno=118, col_offset=8, end_lineno=119, end_col_offset=42), Return(value=Name(id='parts', ctx=Load(), lineno=120, col_offset=15, end_lineno=120, end_col_offset=20), lineno=120, col_offset=8, end_lineno=120, end_col_offset=20)], decorator_list=[Name(id='staticmethod', ctx=Load(), lineno=99, col_offset=5, end_lineno=99, end_col_offset=17)], returns=Subscript(value=Name(id='list', ctx=Load(), lineno=100, col_offset=55, end_lineno=100, end_col_offset=59), slice=Name(id='str', ctx=Load(), lineno=100, col_offset=60, end_lineno=100, end_col_offset=63), ctx=Load(), lineno=100, col_offset=55, end_lineno=100, end_col_offset=64), lineno=100, col_offset=4, end_lineno=120, end_col_offset=20), FunctionDef(name='_build_module', args=arguments(args=[arg(arg='parts', annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=123, col_offset=29, end_lineno=123, end_col_offset=33), slice=Name(id='str', ctx=Load(), lineno=123, col_offset=34, end_lineno=123, end_col_offset=37), ctx=Load(), lineno=123, col_offset=29, end_lineno=123, end_col_offset=38), lineno=123, col_offset=22, end_lineno=123, end_col_offset=38)]), body=[Expr(value=Constant(value='Build a module expression from parts.\n\n        Parameters\n        ----------\n        parts : list[str]\n            List of module name parts.\n\n        Returns\n        -------\n        cst.BaseExpression\n            Constructed module expression node.\n        ', lineno=124, col_offset=8, end_lineno=135, end_col_offset=11), lineno=124, col_offset=8, end_lineno=135, end_col_offset=11), AnnAssign(target=Name(id='result', ctx=Store(), lineno=136, col_offset=8, end_lineno=136, end_col_offset=14), annotation=Attribute(value=Name(id='cst', ctx=Load(), lineno=136, col_offset=16, end_lineno=136, end_col_offset=19), attr='BaseExpression', ctx=Load(), lineno=136, col_offset=16, end_lineno=136, end_col_offset=34), value=Call(func=Attribute(value=Name(id='cst', ctx=Load(), lineno=136, col_offset=37, end_lineno=136, end_col_offset=40), attr='Name', ctx=Load(), lineno=136, col_offset=37, end_lineno=136, end_col_offset=45), args=[Subscript(value=Name(id='parts', ctx=Load(), lineno=136, col_offset=46, end_lineno=136, end_col_offset=51), slice=Constant(value=0, lineno=136, col_offset=52, end_lineno=136, end_col_offset=53), ctx=Load(), lineno=136, col_offset=46, end_lineno=136, end_col_offset=54)], lineno=136, col_offset=37, end_lineno=136, end_col_offset=55), simple=1, lineno=136, col_offset=8, end_lineno=136, end_col_offset=55), For(target=Name(id='part', ctx=Store(), lineno=137, col_offset=12, end_lineno=137, end_col_offset=16), iter=Subscript(value=Name(id='parts', ctx=Load(), lineno=137, col_offset=20, end_lineno=137, end_col_offset=25), slice=Slice(lower=Constant(value=1, lineno=137, col_offset=26, end_lineno=137, end_col_offset=27), lineno=137, col_offset=26, end_lineno=137, end_col_offset=28), ctx=Load(), lineno=137, col_offset=20, end_lineno=137, end_col_offset=29), body=[Assign(targets=[Name(id='result', ctx=Store(), lineno=138, col_offset=12, end_lineno=138, end_col_offset=18)], value=Call(func=Attribute(value=Name(id='cst', ctx=Load(), lineno=138, col_offset=21, end_lineno=138, end_col_offset=24), attr='Attribute', ctx=Load(), lineno=138, col_offset=21, end_lineno=138, end_col_offset=34), keywords=[keyword(arg='value', value=Name(id='result', ctx=Load(), lineno=138, col_offset=41, end_lineno=138, end_col_offset=47), lineno=138, col_offset=35, end_lineno=138, end_col_offset=47), keyword(arg='attr', value=Call(func=Attribute(value=Name(id='cst', ctx=Load(), lineno=138, col_offset=54, end_lineno=138, end_col_offset=57), attr='Name', ctx=Load(), lineno=138, col_offset=54, end_lineno=138, end_col_offset=62), args=[Name(id='part', ctx=Load(), lineno=138, col_offset=63, end_lineno=138, end_col_offset=67)], lineno=138, col_offset=54, end_lineno=138, end_col_offset=68), lineno=138, col_offset=49, end_lineno=138, end_col_offset=68)], lineno=138, col_offset=21, end_lineno=138, end_col_offset=69), lineno=138, col_offset=12, end_lineno=138, end_col_offset=69)], lineno=137, col_offset=8, end_lineno=138, end_col_offset=69), Return(value=Name(id='result', ctx=Load(), lineno=139, col_offset=15, end_lineno=139, end_col_offset=21), lineno=139, col_offset=8, end_lineno=139, end_col_offset=21)], decorator_list=[Name(id='staticmethod', ctx=Load(), lineno=122, col_offset=5, end_lineno=122, end_col_offset=17)], returns=Attribute(value=Name(id='cst', ctx=Load(), lineno=123, col_offset=43, end_lineno=123, end_col_offset=46), attr='BaseExpression', ctx=Load(), lineno=123, col_offset=43, end_lineno=123, end_col_offset=61), lineno=123, col_offset=4, end_lineno=139, end_col_offset=21), FunctionDef(name='leave_ImportFrom', args=arguments(args=[arg(arg='self', lineno=143, col_offset=8, end_lineno=143, end_col_offset=12), arg(arg='original_node', annotation=Attribute(value=Name(id='cst', ctx=Load(), lineno=143, col_offset=29, end_lineno=143, end_col_offset=32), attr='ImportFrom', ctx=Load(), lineno=143, col_offset=29, end_lineno=143, end_col_offset=43), lineno=143, col_offset=14, end_lineno=143, end_col_offset=43), arg(arg='updated_node', annotation=Attribute(value=Name(id='cst', ctx=Load(), lineno=143, col_offset=59, end_lineno=143, end_col_offset=62), attr='ImportFrom', ctx=Load(), lineno=143, col_offset=59, end_lineno=143, end_col_offset=73), lineno=143, col_offset=45, end_lineno=143, end_col_offset=73)]), body=[Expr(value=Constant(value='Rewrite ``ImportFrom`` statements using docstring façade rules.\n\n        Parameters\n        ----------\n        original_node : cst.ImportFrom\n            Original node before transformation.\n        updated_node : cst.ImportFrom\n            Updated node after generic visitor processing.\n\n        Returns\n        -------\n        cst.ImportFrom | cst.RemovalSentinel | cst.FlattenSentinel[cst.BaseSmallStatement]\n            Transformed import node or sentinel.\n        ', lineno=145, col_offset=8, end_lineno=158, end_col_offset=11), lineno=145, col_offset=8, end_lineno=158, end_col_offset=11), Delete(targets=[Name(id='original_node', ctx=Del(), lineno=159, col_offset=12, end_lineno=159, end_col_offset=25)], lineno=159, col_offset=8, end_lineno=159, end_col_offset=25), Return(value=Call(func=Attribute(value=Name(id='self', ctx=Load(), lineno=160, col_offset=15, end_lineno=160, end_col_offset=19), attr='_transform_import_from', ctx=Load(), lineno=160, col_offset=15, end_lineno=160, end_col_offset=42), args=[Name(id='updated_node', ctx=Load(), lineno=160, col_offset=43, end_lineno=160, end_col_offset=55)], lineno=160, col_offset=15, end_lineno=160, end_col_offset=56), lineno=160, col_offset=8, end_lineno=160, end_col_offset=56)], decorator_list=[Name(id='override', ctx=Load(), lineno=141, col_offset=5, end_lineno=141, end_col_offset=13)], returns=BinOp(left=BinOp(left=Attribute(value=Name(id='cst', ctx=Load(), lineno=144, col_offset=9, end_lineno=144, end_col_offset=12), attr='ImportFrom', ctx=Load(), lineno=144, col_offset=9, end_lineno=144, end_col_offset=23), op=BitOr(), right=Attribute(value=Name(id='cst', ctx=Load(), lineno=144, col_offset=26, end_lineno=144, end_col_offset=29), attr='RemovalSentinel', ctx=Load(), lineno=144, col_offset=26, end_lineno=144, end_col_offset=45), lineno=144, col_offset=9, end_lineno=144, end_col_offset=45), op=BitOr(), right=Subscript(value=Attribute(value=Name(id='cst', ctx=Load(), lineno=144, col_offset=48, end_lineno=144, end_col_offset=51), attr='FlattenSentinel', ctx=Load(), lineno=144, col_offset=48, end_lineno=144, end_col_offset=67), slice=Attribute(value=Name(id='cst', ctx=Load(), lineno=144, col_offset=68, end_lineno=144, end_col_offset=71), attr='BaseSmallStatement', ctx=Load(), lineno=144, col_offset=68, end_lineno=144, end_col_offset=90), ctx=Load(), lineno=144, col_offset=48, end_lineno=144, end_col_offset=91), lineno=144, col_offset=9, end_lineno=144, end_col_offset=91), lineno=142, col_offset=4, end_lineno=160, end_col_offset=56), FunctionDef(name='leave_Call', args=arguments(args=[arg(arg='self', lineno=163, col_offset=19, end_lineno=163, end_col_offset=23), arg(arg='original_node', annotation=Attribute(value=Name(id='cst', ctx=Load(), lineno=163, col_offset=40, end_lineno=163, end_col_offset=43), attr='Call', ctx=Load(), lineno=163, col_offset=40, end_lineno=163, end_col_offset=48), lineno=163, col_offset=25, end_lineno=163, end_col_offset=48), arg(arg='updated_node', annotation=Attribute(value=Name(id='cst', ctx=Load(), lineno=163, col_offset=64, end_lineno=163, end_col_offset=67), attr='Call', ctx=Load(), lineno=163, col_offset=64, end_lineno=163, end_col_offset=72), lineno=163, col_offset=50, end_lineno=163, end_col_offset=72)]), body=[Expr(value=Constant(value='Rewrite shim calls such as ``resolve_numpy`` to ``gate_import``.\n\n        Parameters\n        ----------\n        original_node : cst.Call\n            Original call node before transformation.\n        updated_node : cst.Call\n            Updated call node after generic visitor processing.\n\n        Returns\n        -------\n        cst.Call\n            Transformed call node with gate_import.\n        ', lineno=164, col_offset=8, end_lineno=177, end_col_offset=11), lineno=164, col_offset=8, end_lineno=177, end_col_offset=11), Delete(targets=[Name(id='original_node', ctx=Del(), lineno=178, col_offset=12, end_lineno=178, end_col_offset=25)], lineno=178, col_offset=8, end_lineno=178, end_col_offset=25), Return(value=Call(func=Attribute(value=Name(id='self', ctx=Load(), lineno=179, col_offset=15, end_lineno=179, end_col_offset=19), attr='_transform_call', ctx=Load(), lineno=179, col_offset=15, end_lineno=179, end_col_offset=35), args=[Name(id='updated_node', ctx=Load(), lineno=179, col_offset=36, end_lineno=179, end_col_offset=48)], lineno=179, col_offset=15, end_lineno=179, end_col_offset=49), lineno=179, col_offset=8, end_lineno=179, end_col_offset=49)], decorator_list=[Name(id='override', ctx=Load(), lineno=162, col_offset=5, end_lineno=162, end_col_offset=13)], returns=Attribute(value=Name(id='cst', ctx=Load(), lineno=163, col_offset=77, end_lineno=163, end_col_offset=80), attr='Call', ctx=Load(), lineno=163, col_offset=77, end_lineno=163, end_col_offset=85), lineno=163, col_offset=4, end_lineno=179, end_col_offset=49)], lineno=23, col_offset=0, end_lineno=179, end_col_offset=49), FunctionDef(name='run_codemod_on_file', args=arguments(args=[arg(arg='file_path', annotation=Name(id='Path', ctx=Load(), lineno=182, col_offset=35, end_lineno=182, end_col_offset=39), lineno=182, col_offset=24, end_lineno=182, end_col_offset=39)]), body=[Expr(value=Constant(value='Apply the typing facade migration codemod to a file.\n\n    Parameters\n    ----------\n    file_path : Path\n        Path to the Python file to transform.\n\n    Returns\n    -------\n    bool\n        True if the file was modified, False otherwise.\n    ', lineno=183, col_offset=4, end_lineno=194, end_col_offset=7), lineno=183, col_offset=4, end_lineno=194, end_col_offset=7), Try(body=[Assign(targets=[Name(id='source_code', ctx=Store(), lineno=196, col_offset=8, end_lineno=196, end_col_offset=19)], value=Call(func=Attribute(value=Name(id='file_path', ctx=Load(), lineno=196, col_offset=22, end_lineno=196, end_col_offset=31), attr='read_text', ctx=Load(), lineno=196, col_offset=22, end_lineno=196, end_col_offset=41), keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=196, col_offset=51, end_lineno=196, end_col_offset=58), lineno=196, col_offset=42, end_lineno=196, end_col_offset=58)], lineno=196, col_offset=22, end_lineno=196, end_col_offset=59), lineno=196, col_offset=8, end_lineno=196, end_col_offset=59), Assign(targets=[Name(id='module', ctx=Store(), lineno=197, col_offset=8, end_lineno=197, end_col_offset=14)], value=Call(func=Attribute(value=Name(id='cst', ctx=Load(), lineno=197, col_offset=17, end_lineno=197, end_col_offset=20), attr='parse_module', ctx=Load(), lineno=197, col_offset=17, end_lineno=197, end_col_offset=33), args=[Name(id='source_code', ctx=Load(), lineno=197, col_offset=34, end_lineno=197, end_col_offset=45)], lineno=197, col_offset=17, end_lineno=197, end_col_offset=46), lineno=197, col_offset=8, end_lineno=197, end_col_offset=46), Assign(targets=[Name(id='transformer', ctx=Store(), lineno=198, col_offset=8, end_lineno=198, end_col_offset=19)], value=Call(func=Name(id='TypingFacadeMigrator', ctx=Load(), lineno=198, col_offset=22, end_lineno=198, end_col_offset=42), lineno=198, col_offset=22, end_lineno=198, end_col_offset=44), lineno=198, col_offset=8, end_lineno=198, end_col_offset=44), Assign(targets=[Name(id='new_module', ctx=Store(), lineno=199, col_offset=8, end_lineno=199, end_col_offset=18)], value=Call(func=Attribute(value=Name(id='module', ctx=Load(), lineno=199, col_offset=21, end_lineno=199, end_col_offset=27), attr='visit', ctx=Load(), lineno=199, col_offset=21, end_lineno=199, end_col_offset=33), args=[Name(id='transformer', ctx=Load(), lineno=199, col_offset=34, end_lineno=199, end_col_offset=45)], lineno=199, col_offset=21, end_lineno=199, end_col_offset=46), lineno=199, col_offset=8, end_lineno=199, end_col_offset=46)], handlers=[ExceptHandler(type=Name(id='Exception', ctx=Load(), lineno=200, col_offset=11, end_lineno=200, end_col_offset=20), body=[Expr(value=Call(func=Attribute(value=Name(id='logger', ctx=Load(), lineno=201, col_offset=8, end_lineno=201, end_col_offset=14), attr='exception', ctx=Load(), lineno=201, col_offset=8, end_lineno=201, end_col_offset=24), args=[Constant(value='Error processing %s', lineno=201, col_offset=25, end_lineno=201, end_col_offset=46), Name(id='file_path', ctx=Load(), lineno=201, col_offset=48, end_lineno=201, end_col_offset=57)], lineno=201, col_offset=8, end_lineno=201, end_col_offset=58), lineno=201, col_offset=8, end_lineno=201, end_col_offset=58), Return(value=Constant(value=False, lineno=202, col_offset=15, end_lineno=202, end_col_offset=20), lineno=202, col_offset=8, end_lineno=202, end_col_offset=20)], lineno=200, col_offset=4, end_lineno=202, end_col_offset=20)], lineno=195, col_offset=4, end_lineno=202, end_col_offset=20), If(test=Attribute(value=Name(id='transformer', ctx=Load(), lineno=204, col_offset=7, end_lineno=204, end_col_offset=18), attr='modified', ctx=Load(), lineno=204, col_offset=7, end_lineno=204, end_col_offset=27), body=[Expr(value=Call(func=Attribute(value=Name(id='file_path', ctx=Load(), lineno=205, col_offset=8, end_lineno=205, end_col_offset=17), attr='write_text', ctx=Load(), lineno=205, col_offset=8, end_lineno=205, end_col_offset=28), args=[Attribute(value=Name(id='new_module', ctx=Load(), lineno=205, col_offset=29, end_lineno=205, end_col_offset=39), attr='code', ctx=Load(), lineno=205, col_offset=29, end_lineno=205, end_col_offset=44)], keywords=[keyword(arg='encoding', value=Constant(value='utf-8', lineno=205, col_offset=55, end_lineno=205, end_col_offset=62), lineno=205, col_offset=46, end_lineno=205, end_col_offset=62)], lineno=205, col_offset=8, end_lineno=205, end_col_offset=63), lineno=205, col_offset=8, end_lineno=205, end_col_offset=63), Expr(value=Call(func=Attribute(value=Name(id='logger', ctx=Load(), lineno=206, col_offset=8, end_lineno=206, end_col_offset=14), attr='info', ctx=Load(), lineno=206, col_offset=8, end_lineno=206, end_col_offset=19), args=[Constant(value='Updated %s', lineno=206, col_offset=20, end_lineno=206, end_col_offset=32), Name(id='file_path', ctx=Load(), lineno=206, col_offset=34, end_lineno=206, end_col_offset=43)], lineno=206, col_offset=8, end_lineno=206, end_col_offset=44), lineno=206, col_offset=8, end_lineno=206, end_col_offset=44), Return(value=Constant(value=True, lineno=207, col_offset=15, end_lineno=207, end_col_offset=19), lineno=207, col_offset=8, end_lineno=207, end_col_offset=19)], lineno=204, col_offset=4, end_lineno=207, end_col_offset=19), Return(value=Constant(value=False, lineno=208, col_offset=11, end_lineno=208, end_col_offset=16), lineno=208, col_offset=4, end_lineno=208, end_col_offset=16)], returns=Name(id='bool', ctx=Load(), lineno=182, col_offset=44, end_lineno=182, end_col_offset=48), lineno=182, col_offset=0, end_lineno=208, end_col_offset=16), FunctionDef(name='main', args=arguments(args=[arg(arg='argv', annotation=BinOp(left=BinOp(left=Subscript(value=Name(id='list', ctx=Load(), lineno=211, col_offset=15, end_lineno=211, end_col_offset=19), slice=Name(id='str', ctx=Load(), lineno=211, col_offset=20, end_lineno=211, end_col_offset=23), ctx=Load(), lineno=211, col_offset=15, end_lineno=211, end_col_offset=24), op=BitOr(), right=Subscript(value=Name(id='tuple', ctx=Load(), lineno=211, col_offset=27, end_lineno=211, end_col_offset=32), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=211, col_offset=33, end_lineno=211, end_col_offset=36), Constant(value=Ellipsis, lineno=211, col_offset=38, end_lineno=211, end_col_offset=41)], ctx=Load(), lineno=211, col_offset=33, end_lineno=211, end_col_offset=41), ctx=Load(), lineno=211, col_offset=27, end_lineno=211, end_col_offset=42), lineno=211, col_offset=15, end_lineno=211, end_col_offset=42), op=BitOr(), right=Constant(value=None, lineno=211, col_offset=45, end_lineno=211, end_col_offset=49), lineno=211, col_offset=15, end_lineno=211, end_col_offset=49), lineno=211, col_offset=9, end_lineno=211, end_col_offset=49)], defaults=[Constant(value=None, lineno=211, col_offset=52, end_lineno=211, end_col_offset=56)]), body=[Expr(value=Constant(value='Migrate typing imports to facades.\n\n    Transforms:\n    - `docs._types` → `docs.types` (public facade)\n    - `resolve_*` shim calls → `gate_import()` calls\n\n    Parameters\n    ----------\n    argv : list[str] | tuple[str, ...] | None, optional\n        Command-line arguments.\n\n    Returns\n    -------\n    int\n        Exit code (0 = success, 1 = failure).\n    ', lineno=212, col_offset=4, end_lineno=227, end_col_offset=7), lineno=212, col_offset=4, end_lineno=227, end_col_offset=7), Assign(targets=[Name(id='parser', ctx=Store(), lineno=228, col_offset=4, end_lineno=228, end_col_offset=10)], value=Call(func=Attribute(value=Name(id='argparse', ctx=Load(), lineno=228, col_offset=13, end_lineno=228, end_col_offset=21), attr='ArgumentParser', ctx=Load(), lineno=228, col_offset=13, end_lineno=228, end_col_offset=36), keywords=[keyword(arg='description', value=Constant(value='Migrate typing imports to facades (docs._types → docs.types, shims → gate_import)', lineno=229, col_offset=20, end_lineno=229, end_col_offset=107), lineno=229, col_offset=8, end_lineno=229, end_col_offset=107)], lineno=228, col_offset=13, end_lineno=230, end_col_offset=5), lineno=228, col_offset=4, end_lineno=230, end_col_offset=5), Expr(value=Call(func=Attribute(value=Name(id='parser', ctx=Load(), lineno=231, col_offset=4, end_lineno=231, end_col_offset=10), attr='add_argument', ctx=Load(), lineno=231, col_offset=4, end_lineno=231, end_col_offset=23), args=[Constant(value='paths', lineno=232, col_offset=8, end_lineno=232, end_col_offset=15)], keywords=[keyword(arg='nargs', value=Constant(value='+', lineno=233, col_offset=14, end_lineno=233, end_col_offset=17), lineno=233, col_offset=8, end_lineno=233, end_col_offset=17), keyword(arg='type', value=Name(id='Path', ctx=Load(), lineno=234, col_offset=13, end_lineno=234, end_col_offset=17), lineno=234, col_offset=8, end_lineno=234, end_col_offset=17), keyword(arg='help', value=Constant(value='Directories or files to codemod', lineno=235, col_offset=13, end_lineno=235, end_col_offset=46), lineno=235, col_offset=8, end_lineno=235, end_col_offset=46)], lineno=231, col_offset=4, end_lineno=236, end_col_offset=5), lineno=231, col_offset=4, end_lineno=236, end_col_offset=5), Expr(value=Call(func=Attribute(value=Name(id='parser', ctx=Load(), lineno=237, col_offset=4, end_lineno=237, end_col_offset=10), attr='add_argument', ctx=Load(), lineno=237, col_offset=4, end_lineno=237, end_col_offset=23), args=[Constant(value='--dry-run', lineno=238, col_offset=8, end_lineno=238, end_col_offset=19)], keywords=[keyword(arg='action', value=Constant(value='store_true', lineno=239, col_offset=15, end_lineno=239, end_col_offset=27), lineno=239, col_offset=8, end_lineno=239, end_col_offset=27), keyword(arg='help', value=Constant(value='Show changes without writing', lineno=240, col_offset=13, end_lineno=240, end_col_offset=43), lineno=240, col_offset=8, end_lineno=240, end_col_offset=43)], lineno=237, col_offset=4, end_lineno=241, end_col_offset=5), lineno=237, col_offset=4, end_lineno=241, end_col_offset=5), Assign(targets=[Name(id='args', ctx=Store(), lineno=243, col_offset=4, end_lineno=243, end_col_offset=8)], value=Call(func=Attribute(value=Name(id='parser', ctx=Load(), lineno=243, col_offset=11, end_lineno=243, end_col_offset=17), attr='parse_args', ctx=Load(), lineno=243, col_offset=11, end_lineno=243, end_col_offset=28), args=[Name(id='argv', ctx=Load(), lineno=243, col_offset=29, end_lineno=243, end_col_offset=33)], lineno=243, col_offset=11, end_lineno=243, end_col_offset=34), lineno=243, col_offset=4, end_lineno=243, end_col_offset=34), AnnAssign(target=Name(id='python_files', ctx=Store(), lineno=246, col_offset=4, end_lineno=246, end_col_offset=16), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=246, col_offset=18, end_lineno=246, end_col_offset=22), slice=Name(id='Path', ctx=Load(), lineno=246, col_offset=23, end_lineno=246, end_col_offset=27), ctx=Load(), lineno=246, col_offset=18, end_lineno=246, end_col_offset=28), value=List(ctx=Load(), lineno=246, col_offset=31, end_lineno=246, end_col_offset=33), simple=1, lineno=246, col_offset=4, end_lineno=246, end_col_offset=33), Assign(targets=[Name(id='raw_paths', ctx=Store(), lineno=247, col_offset=4, end_lineno=247, end_col_offset=13)], value=Call(func=Name(id='cast', ctx=Load(), lineno=247, col_offset=16, end_lineno=247, end_col_offset=20), args=[Constant(value='list[Path]', lineno=247, col_offset=21, end_lineno=247, end_col_offset=33), Attribute(value=Name(id='args', ctx=Load(), lineno=247, col_offset=35, end_lineno=247, end_col_offset=39), attr='paths', ctx=Load(), lineno=247, col_offset=35, end_lineno=247, end_col_offset=45)], lineno=247, col_offset=16, end_lineno=247, end_col_offset=46), lineno=247, col_offset=4, end_lineno=247, end_col_offset=46), For(target=Name(id='path_arg', ctx=Store(), lineno=248, col_offset=8, end_lineno=248, end_col_offset=16), iter=Name(id='raw_paths', ctx=Load(), lineno=248, col_offset=20, end_lineno=248, end_col_offset=29), body=[If(test=BoolOp(op=And(), values=[Call(func=Attribute(value=Name(id='path_arg', ctx=Load(), lineno=249, col_offset=11, end_lineno=249, end_col_offset=19), attr='is_file', ctx=Load(), lineno=249, col_offset=11, end_lineno=249, end_col_offset=27), lineno=249, col_offset=11, end_lineno=249, end_col_offset=29), Compare(left=Attribute(value=Name(id='path_arg', ctx=Load(), lineno=249, col_offset=34, end_lineno=249, end_col_offset=42), attr='suffix', ctx=Load(), lineno=249, col_offset=34, end_lineno=249, end_col_offset=49), ops=[Eq()], comparators=[Constant(value='.py', lineno=249, col_offset=53, end_lineno=249, end_col_offset=58)], lineno=249, col_offset=34, end_lineno=249, end_col_offset=58)], lineno=249, col_offset=11, end_lineno=249, end_col_offset=58), body=[Expr(value=Call(func=Attribute(value=Name(id='python_files', ctx=Load(), lineno=250, col_offset=12, end_lineno=250, end_col_offset=24), attr='append', ctx=Load(), lineno=250, col_offset=12, end_lineno=250, end_col_offset=31), args=[Name(id='path_arg', ctx=Load(), lineno=250, col_offset=32, end_lineno=250, end_col_offset=40)], lineno=250, col_offset=12, end_lineno=250, end_col_offset=41), lineno=250, col_offset=12, end_lineno=250, end_col_offset=41)], orelse=[If(test=Call(func=Attribute(value=Name(id='path_arg', ctx=Load(), lineno=251, col_offset=13, end_lineno=251, end_col_offset=21), attr='is_dir', ctx=Load(), lineno=251, col_offset=13, end_lineno=251, end_col_offset=28), lineno=251, col_offset=13, end_lineno=251, end_col_offset=30), body=[Expr(value=Call(func=Attribute(value=Name(id='python_files', ctx=Load(), lineno=252, col_offset=12, end_lineno=252, end_col_offset=24), attr='extend', ctx=Load(), lineno=252, col_offset=12, end_lineno=252, end_col_offset=31), args=[Call(func=Attribute(value=Name(id='path_arg', ctx=Load(), lineno=252, col_offset=32, end_lineno=252, end_col_offset=40), attr='rglob', ctx=Load(), lineno=252, col_offset=32, end_lineno=252, end_col_offset=46), args=[Constant(value='*.py', lineno=252, col_offset=47, end_lineno=252, end_col_offset=53)], lineno=252, col_offset=32, end_lineno=252, end_col_offset=54)], lineno=252, col_offset=12, end_lineno=252, end_col_offset=55), lineno=252, col_offset=12, end_lineno=252, end_col_offset=55)], lineno=251, col_offset=8, end_lineno=252, end_col_offset=55)], lineno=249, col_offset=8, end_lineno=252, end_col_offset=55)], lineno=248, col_offset=4, end_lineno=252, end_col_offset=55), Expr(value=Call(func=Attribute(value=Name(id='logger', ctx=Load(), lineno=254, col_offset=4, end_lineno=254, end_col_offset=10), attr='info', ctx=Load(), lineno=254, col_offset=4, end_lineno=254, end_col_offset=15), args=[Constant(value='Processing %d Python files', lineno=254, col_offset=16, end_lineno=254, end_col_offset=44), Call(func=Name(id='len', ctx=Load(), lineno=254, col_offset=46, end_lineno=254, end_col_offset=49), args=[Name(id='python_files', ctx=Load(), lineno=254, col_offset=50, end_lineno=254, end_col_offset=62)], lineno=254, col_offset=46, end_lineno=254, end_col_offset=63)], lineno=254, col_offset=4, end_lineno=254, end_col_offset=64), lineno=254, col_offset=4, end_lineno=254, end_col_offset=64), Assign(targets=[Name(id='updated', ctx=Store(), lineno=256, col_offset=4, end_lineno=256, end_col_offset=11)], value=Constant(value=0, lineno=256, col_offset=14, end_lineno=256, end_col_offset=15), lineno=256, col_offset=4, end_lineno=256, end_col_offset=15), For(target=Name(id='file_path', ctx=Store(), lineno=257, col_offset=8, end_lineno=257, end_col_offset=17), iter=Name(id='python_files', ctx=Load(), lineno=257, col_offset=21, end_lineno=257, end_col_offset=33), body=[If(test=Call(func=Name(id='run_codemod_on_file', ctx=Load(), lineno=258, col_offset=11, end_lineno=258, end_col_offset=30), args=[Name(id='file_path', ctx=Load(), lineno=258, col_offset=31, end_lineno=258, end_col_offset=40)], lineno=258, col_offset=11, end_lineno=258, end_col_offset=41), body=[AugAssign(target=Name(id='updated', ctx=Store(), lineno=259, col_offset=12, end_lineno=259, end_col_offset=19), op=Add(), value=Constant(value=1, lineno=259, col_offset=23, end_lineno=259, end_col_offset=24), lineno=259, col_offset=12, end_lineno=259, end_col_offset=24)], lineno=258, col_offset=8, end_lineno=259, end_col_offset=24)], lineno=257, col_offset=4, end_lineno=259, end_col_offset=24), Expr(value=Call(func=Attribute(value=Name(id='logger', ctx=Load(), lineno=261, col_offset=4, end_lineno=261, end_col_offset=10), attr='info', ctx=Load(), lineno=261, col_offset=4, end_lineno=261, end_col_offset=15), args=[Constant(value='Updated %d/%d files', lineno=261, col_offset=16, end_lineno=261, end_col_offset=37), Name(id='updated', ctx=Load(), lineno=261, col_offset=39, end_lineno=261, end_col_offset=46), Call(func=Name(id='len', ctx=Load(), lineno=261, col_offset=48, end_lineno=261, end_col_offset=51), args=[Name(id='python_files', ctx=Load(), lineno=261, col_offset=52, end_lineno=261, end_col_offset=64)], lineno=261, col_offset=48, end_lineno=261, end_col_offset=65)], lineno=261, col_offset=4, end_lineno=261, end_col_offset=66), lineno=261, col_offset=4, end_lineno=261, end_col_offset=66), Return(value=Constant(value=0, lineno=262, col_offset=11, end_lineno=262, end_col_offset=12), lineno=262, col_offset=4, end_lineno=262, end_col_offset=12)], returns=Name(id='int', ctx=Load(), lineno=211, col_offset=61, end_lineno=211, end_col_offset=64), lineno=211, col_offset=0, end_lineno=262, end_col_offset=12), If(test=Compare(left=Name(id='__name__', ctx=Load(), lineno=265, col_offset=3, end_lineno=265, end_col_offset=11), ops=[Eq()], comparators=[Constant(value='__main__', lineno=265, col_offset=15, end_lineno=265, end_col_offset=25)], lineno=265, col_offset=3, end_lineno=265, end_col_offset=25), body=[Raise(exc=Call(func=Name(id='SystemExit', ctx=Load(), lineno=266, col_offset=10, end_lineno=266, end_col_offset=20), args=[Call(func=Name(id='main', ctx=Load(), lineno=266, col_offset=21, end_lineno=266, end_col_offset=25), lineno=266, col_offset=21, end_lineno=266, end_col_offset=27)], lineno=266, col_offset=10, end_lineno=266, end_col_offset=28), lineno=266, col_offset=4, end_lineno=266, end_col_offset=28)], lineno=265, col_offset=0, end_lineno=266, end_col_offset=28)])
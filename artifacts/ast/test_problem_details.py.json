Module(body=[Expr(value=Constant(value='Tests for RFC 9457 problem details helpers used by tooling.', lineno=1, col_offset=0, end_lineno=1, end_col_offset=65), lineno=1, col_offset=0, end_lineno=1, end_col_offset=65), ImportFrom(module='__future__', names=[alias(name='annotations', lineno=3, col_offset=23, end_lineno=3, end_col_offset=34)], level=0, lineno=3, col_offset=0, end_lineno=3, end_col_offset=34), Import(names=[alias(name='importlib', lineno=5, col_offset=7, end_lineno=5, end_col_offset=16)], lineno=5, col_offset=0, end_lineno=5, end_col_offset=16), ImportFrom(module='dataclasses', names=[alias(name='dataclass', lineno=6, col_offset=24, end_lineno=6, end_col_offset=33)], level=0, lineno=6, col_offset=0, end_lineno=6, end_col_offset=33), Assign(targets=[Name(id='problem_details', ctx=Store(), lineno=8, col_offset=0, end_lineno=8, end_col_offset=15)], value=Call(func=Attribute(value=Name(id='importlib', ctx=Load(), lineno=8, col_offset=18, end_lineno=8, end_col_offset=27), attr='import_module', ctx=Load(), lineno=8, col_offset=18, end_lineno=8, end_col_offset=41), args=[Constant(value='tools._shared.problem_details', lineno=8, col_offset=42, end_lineno=8, end_col_offset=73)], lineno=8, col_offset=18, end_lineno=8, end_col_offset=74), lineno=8, col_offset=0, end_lineno=8, end_col_offset=74), FunctionDef(name='test_coerce_optional_dict_handles_empty_values', args=arguments(), body=[Assign(targets=[Name(id='helper', ctx=Store(), lineno=12, col_offset=4, end_lineno=12, end_col_offset=10)], value=Attribute(value=Name(id='problem_details', ctx=Load(), lineno=12, col_offset=13, end_lineno=12, end_col_offset=28), attr='coerce_optional_dict', ctx=Load(), lineno=12, col_offset=13, end_lineno=12, end_col_offset=49), lineno=12, col_offset=4, end_lineno=12, end_col_offset=49), Assert(test=Compare(left=Call(func=Name(id='helper', ctx=Load(), lineno=13, col_offset=11, end_lineno=13, end_col_offset=17), args=[Constant(value=None, lineno=13, col_offset=18, end_lineno=13, end_col_offset=22)], lineno=13, col_offset=11, end_lineno=13, end_col_offset=23), ops=[Is()], comparators=[Constant(value=None, lineno=13, col_offset=27, end_lineno=13, end_col_offset=31)], lineno=13, col_offset=11, end_lineno=13, end_col_offset=31), lineno=13, col_offset=4, end_lineno=13, end_col_offset=31), Assert(test=Compare(left=Call(func=Name(id='helper', ctx=Load(), lineno=14, col_offset=11, end_lineno=14, end_col_offset=17), args=[Dict(lineno=14, col_offset=18, end_lineno=14, end_col_offset=20)], lineno=14, col_offset=11, end_lineno=14, end_col_offset=21), ops=[Is()], comparators=[Constant(value=None, lineno=14, col_offset=25, end_lineno=14, end_col_offset=29)], lineno=14, col_offset=11, end_lineno=14, end_col_offset=29), lineno=14, col_offset=4, end_lineno=14, end_col_offset=29), Assign(targets=[Name(id='materialised', ctx=Store(), lineno=15, col_offset=4, end_lineno=15, end_col_offset=16)], value=Call(func=Name(id='helper', ctx=Load(), lineno=15, col_offset=19, end_lineno=15, end_col_offset=25), args=[Dict(keys=[Constant(value='key', lineno=15, col_offset=27, end_lineno=15, end_col_offset=32)], values=[Constant(value='value', lineno=15, col_offset=34, end_lineno=15, end_col_offset=41)], lineno=15, col_offset=26, end_lineno=15, end_col_offset=42)], lineno=15, col_offset=19, end_lineno=15, end_col_offset=43), lineno=15, col_offset=4, end_lineno=15, end_col_offset=43), Assert(test=Compare(left=Name(id='materialised', ctx=Load(), lineno=16, col_offset=11, end_lineno=16, end_col_offset=23), ops=[Eq()], comparators=[Dict(keys=[Constant(value='key', lineno=16, col_offset=28, end_lineno=16, end_col_offset=33)], values=[Constant(value='value', lineno=16, col_offset=35, end_lineno=16, end_col_offset=42)], lineno=16, col_offset=27, end_lineno=16, end_col_offset=43)], lineno=16, col_offset=11, end_lineno=16, end_col_offset=43), lineno=16, col_offset=4, end_lineno=16, end_col_offset=43)], returns=Constant(value=None, lineno=11, col_offset=56, end_lineno=11, end_col_offset=60), lineno=11, col_offset=0, end_lineno=16, end_col_offset=43), ClassDef(name='_SchemaError', body=[AnnAssign(target=Name(id='message', ctx=Store(), lineno=21, col_offset=4, end_lineno=21, end_col_offset=11), annotation=Name(id='str', ctx=Load(), lineno=21, col_offset=13, end_lineno=21, end_col_offset=16), simple=1, lineno=21, col_offset=4, end_lineno=21, end_col_offset=16), AnnAssign(target=Name(id='absolute_path', ctx=Store(), lineno=22, col_offset=4, end_lineno=22, end_col_offset=17), annotation=Subscript(value=Name(id='tuple', ctx=Load(), lineno=22, col_offset=19, end_lineno=22, end_col_offset=24), slice=Tuple(elts=[Name(id='str', ctx=Load(), lineno=22, col_offset=25, end_lineno=22, end_col_offset=28), Constant(value=Ellipsis, lineno=22, col_offset=30, end_lineno=22, end_col_offset=33)], ctx=Load(), lineno=22, col_offset=25, end_lineno=22, end_col_offset=33), ctx=Load(), lineno=22, col_offset=19, end_lineno=22, end_col_offset=34), value=Tuple(elts=[Constant(value='root', lineno=22, col_offset=38, end_lineno=22, end_col_offset=44), Constant(value='field', lineno=22, col_offset=46, end_lineno=22, end_col_offset=53)], ctx=Load(), lineno=22, col_offset=37, end_lineno=22, end_col_offset=54), simple=1, lineno=22, col_offset=4, end_lineno=22, end_col_offset=54), AnnAssign(target=Name(id='validator', ctx=Store(), lineno=23, col_offset=4, end_lineno=23, end_col_offset=13), annotation=Name(id='str', ctx=Load(), lineno=23, col_offset=15, end_lineno=23, end_col_offset=18), value=Constant(value='type', lineno=23, col_offset=21, end_lineno=23, end_col_offset=27), simple=1, lineno=23, col_offset=4, end_lineno=23, end_col_offset=27)], decorator_list=[Call(func=Name(id='dataclass', ctx=Load(), lineno=19, col_offset=1, end_lineno=19, end_col_offset=10), keywords=[keyword(arg='slots', value=Constant(value=True, lineno=19, col_offset=17, end_lineno=19, end_col_offset=21), lineno=19, col_offset=11, end_lineno=19, end_col_offset=21), keyword(arg='frozen', value=Constant(value=True, lineno=19, col_offset=30, end_lineno=19, end_col_offset=34), lineno=19, col_offset=23, end_lineno=19, end_col_offset=34)], lineno=19, col_offset=1, end_lineno=19, end_col_offset=35)], lineno=20, col_offset=0, end_lineno=23, end_col_offset=27), FunctionDef(name='test_build_schema_problem_details_merges_optional_extensions', args=arguments(), body=[Assign(targets=[Name(id='base', ctx=Store(), lineno=27, col_offset=4, end_lineno=27, end_col_offset=8)], value=Call(func=Attribute(value=Name(id='problem_details', ctx=Load(), lineno=27, col_offset=11, end_lineno=27, end_col_offset=26), attr='ProblemDetailsParams', ctx=Load(), lineno=27, col_offset=11, end_lineno=27, end_col_offset=47), keywords=[keyword(arg='type', value=Constant(value='https://kgfoundry.dev/problems/test', lineno=28, col_offset=13, end_lineno=28, end_col_offset=50), lineno=28, col_offset=8, end_lineno=28, end_col_offset=50), keyword(arg='title', value=Constant(value='Test', lineno=29, col_offset=14, end_lineno=29, end_col_offset=20), lineno=29, col_offset=8, end_lineno=29, end_col_offset=20), keyword(arg='status', value=Constant(value=400, lineno=30, col_offset=15, end_lineno=30, end_col_offset=18), lineno=30, col_offset=8, end_lineno=30, end_col_offset=18), keyword(arg='detail', value=Constant(value='', lineno=31, col_offset=15, end_lineno=31, end_col_offset=17), lineno=31, col_offset=8, end_lineno=31, end_col_offset=17), keyword(arg='instance', value=Constant(value='urn:test:example', lineno=32, col_offset=17, end_lineno=32, end_col_offset=35), lineno=32, col_offset=8, end_lineno=32, end_col_offset=35)], lineno=27, col_offset=11, end_lineno=33, end_col_offset=5), lineno=27, col_offset=4, end_lineno=33, end_col_offset=5), Assign(targets=[Name(id='params', ctx=Store(), lineno=34, col_offset=4, end_lineno=34, end_col_offset=10)], value=Call(func=Attribute(value=Name(id='problem_details', ctx=Load(), lineno=34, col_offset=13, end_lineno=34, end_col_offset=28), attr='SchemaProblemDetailsParams', ctx=Load(), lineno=34, col_offset=13, end_lineno=34, end_col_offset=55), keywords=[keyword(arg='base', value=Name(id='base', ctx=Load(), lineno=35, col_offset=13, end_lineno=35, end_col_offset=17), lineno=35, col_offset=8, end_lineno=35, end_col_offset=17), keyword(arg='error', value=Call(func=Name(id='_SchemaError', ctx=Load(), lineno=36, col_offset=14, end_lineno=36, end_col_offset=26), args=[Constant(value='invalid', lineno=36, col_offset=27, end_lineno=36, end_col_offset=36)], lineno=36, col_offset=14, end_lineno=36, end_col_offset=37), lineno=36, col_offset=8, end_lineno=36, end_col_offset=37), keyword(arg='extensions', value=Dict(keys=[Constant(value='custom', lineno=37, col_offset=20, end_lineno=37, end_col_offset=28)], values=[Constant(value='value', lineno=37, col_offset=30, end_lineno=37, end_col_offset=37)], lineno=37, col_offset=19, end_lineno=37, end_col_offset=38), lineno=37, col_offset=8, end_lineno=37, end_col_offset=38)], lineno=34, col_offset=13, end_lineno=38, end_col_offset=5), lineno=34, col_offset=4, end_lineno=38, end_col_offset=5), Assign(targets=[Name(id='problem', ctx=Store(), lineno=40, col_offset=4, end_lineno=40, end_col_offset=11)], value=Call(func=Attribute(value=Name(id='problem_details', ctx=Load(), lineno=40, col_offset=14, end_lineno=40, end_col_offset=29), attr='build_schema_problem_details', ctx=Load(), lineno=40, col_offset=14, end_lineno=40, end_col_offset=58), args=[Name(id='params', ctx=Load(), lineno=40, col_offset=59, end_lineno=40, end_col_offset=65)], lineno=40, col_offset=14, end_lineno=40, end_col_offset=66), lineno=40, col_offset=4, end_lineno=40, end_col_offset=66), Assert(test=Compare(left=Subscript(value=Name(id='problem', ctx=Load(), lineno=42, col_offset=11, end_lineno=42, end_col_offset=18), slice=Constant(value='detail', lineno=42, col_offset=19, end_lineno=42, end_col_offset=27), ctx=Load(), lineno=42, col_offset=11, end_lineno=42, end_col_offset=28), ops=[Eq()], comparators=[Constant(value='invalid', lineno=42, col_offset=32, end_lineno=42, end_col_offset=41)], lineno=42, col_offset=11, end_lineno=42, end_col_offset=41), lineno=42, col_offset=4, end_lineno=42, end_col_offset=41), Assign(targets=[Name(id='extensions', ctx=Store(), lineno=43, col_offset=4, end_lineno=43, end_col_offset=14)], value=Call(func=Attribute(value=Name(id='problem', ctx=Load(), lineno=43, col_offset=17, end_lineno=43, end_col_offset=24), attr='get', ctx=Load(), lineno=43, col_offset=17, end_lineno=43, end_col_offset=28), args=[Constant(value='extensions', lineno=43, col_offset=29, end_lineno=43, end_col_offset=41)], lineno=43, col_offset=17, end_lineno=43, end_col_offset=42), lineno=43, col_offset=4, end_lineno=43, end_col_offset=42), Assert(test=Call(func=Name(id='isinstance', ctx=Load(), lineno=44, col_offset=11, end_lineno=44, end_col_offset=21), args=[Name(id='extensions', ctx=Load(), lineno=44, col_offset=22, end_lineno=44, end_col_offset=32), Name(id='dict', ctx=Load(), lineno=44, col_offset=34, end_lineno=44, end_col_offset=38)], lineno=44, col_offset=11, end_lineno=44, end_col_offset=39), lineno=44, col_offset=4, end_lineno=44, end_col_offset=39), Assert(test=Compare(left=Subscript(value=Name(id='extensions', ctx=Load(), lineno=45, col_offset=11, end_lineno=45, end_col_offset=21), slice=Constant(value='jsonPointer', lineno=45, col_offset=22, end_lineno=45, end_col_offset=35), ctx=Load(), lineno=45, col_offset=11, end_lineno=45, end_col_offset=36), ops=[Eq()], comparators=[Constant(value='/root/field', lineno=45, col_offset=40, end_lineno=45, end_col_offset=53)], lineno=45, col_offset=11, end_lineno=45, end_col_offset=53), lineno=45, col_offset=4, end_lineno=45, end_col_offset=53), Assert(test=Compare(left=Subscript(value=Name(id='extensions', ctx=Load(), lineno=46, col_offset=11, end_lineno=46, end_col_offset=21), slice=Constant(value='validator', lineno=46, col_offset=22, end_lineno=46, end_col_offset=33), ctx=Load(), lineno=46, col_offset=11, end_lineno=46, end_col_offset=34), ops=[Eq()], comparators=[Constant(value='type', lineno=46, col_offset=38, end_lineno=46, end_col_offset=44)], lineno=46, col_offset=11, end_lineno=46, end_col_offset=44), lineno=46, col_offset=4, end_lineno=46, end_col_offset=44), Assert(test=Compare(left=Subscript(value=Name(id='extensions', ctx=Load(), lineno=47, col_offset=11, end_lineno=47, end_col_offset=21), slice=Constant(value='custom', lineno=47, col_offset=22, end_lineno=47, end_col_offset=30), ctx=Load(), lineno=47, col_offset=11, end_lineno=47, end_col_offset=31), ops=[Eq()], comparators=[Constant(value='value', lineno=47, col_offset=35, end_lineno=47, end_col_offset=42)], lineno=47, col_offset=11, end_lineno=47, end_col_offset=42), lineno=47, col_offset=4, end_lineno=47, end_col_offset=42)], returns=Constant(value=None, lineno=26, col_offset=70, end_lineno=26, end_col_offset=74), lineno=26, col_offset=0, end_lineno=47, end_col_offset=42)])
Module(body=[Expr(value=Constant(value='Typed Git operations wrapper using GitPython.\n\nThis module provides typed Python APIs for Git operations (blame, history) using\nGitPython instead of subprocess calls. Benefits include:\n- 50-80ms latency reduction (no subprocess overhead)\n- Structured data returns (no text parsing)\n- Automatic Unicode/locale handling\n- Specific typed exceptions\n- Unit testable (mock git.Repo)\n\nExample Usage\n-------------\nInitialize client with repository path:\n\n>>> from pathlib import Path\n>>> git_client = GitClient(repo_path=Path("/path/to/repo"))\n\nGet blame for line range:\n\n>>> entries = git_client.blame_range("src/main.py", start_line=10, end_line=20)\n>>> for entry in entries:\n...     print(f"Line {entry[\'line\']}: {entry[\'author\']} - {entry[\'message\']}")\n\nGet commit history:\n\n>>> commits = git_client.file_history("README.md", limit=10)\n>>> for commit in commits:\n...     print(f"{commit[\'sha\']}: {commit[\'message\']}")\n\nAsync wrapper for non-blocking operations:\n\n>>> async_client = AsyncGitClient(git_client)\n>>> entries = await async_client.blame_range("src/main.py", 10, 20)\n\nSee Also\n--------\ncodeintel_rev.mcp_server.adapters.history : Adapters using GitClient\nGitPython documentation : https://gitpython.readthedocs.io/\n', lineno=1, col_offset=0, end_lineno=39, end_col_offset=3), lineno=1, col_offset=0, end_lineno=39, end_col_offset=3), ImportFrom(module='__future__', names=[alias(name='annotations', lineno=41, col_offset=23, end_lineno=41, end_col_offset=34)], level=0, lineno=41, col_offset=0, end_lineno=41, end_col_offset=34), Import(names=[alias(name='asyncio', lineno=43, col_offset=7, end_lineno=43, end_col_offset=14)], lineno=43, col_offset=0, end_lineno=43, end_col_offset=14), ImportFrom(module='dataclasses', names=[alias(name='dataclass', lineno=44, col_offset=24, end_lineno=44, end_col_offset=33), alias(name='field', lineno=44, col_offset=35, end_lineno=44, end_col_offset=40)], level=0, lineno=44, col_offset=0, end_lineno=44, end_col_offset=40), ImportFrom(module='pathlib', names=[alias(name='Path', lineno=45, col_offset=20, end_lineno=45, end_col_offset=24)], level=0, lineno=45, col_offset=0, end_lineno=45, end_col_offset=24), ImportFrom(module='typing', names=[alias(name='TYPE_CHECKING', lineno=46, col_offset=19, end_lineno=46, end_col_offset=32)], level=0, lineno=46, col_offset=0, end_lineno=46, end_col_offset=32), Import(names=[alias(name='git', lineno=48, col_offset=7, end_lineno=48, end_col_offset=10)], lineno=48, col_offset=0, end_lineno=48, end_col_offset=10), ImportFrom(module='kgfoundry_common.logging', names=[alias(name='get_logger', lineno=50, col_offset=37, end_lineno=50, end_col_offset=47)], level=0, lineno=50, col_offset=0, end_lineno=50, end_col_offset=47), If(test=Name(id='TYPE_CHECKING', ctx=Load(), lineno=52, col_offset=3, end_lineno=52, end_col_offset=16), body=[ImportFrom(module='codeintel_rev.mcp_server.schemas', names=[alias(name='GitBlameEntry', lineno=53, col_offset=49, end_lineno=53, end_col_offset=62)], level=0, lineno=53, col_offset=4, end_lineno=53, end_col_offset=62)], lineno=52, col_offset=0, end_lineno=53, end_col_offset=62), Assign(targets=[Name(id='LOGGER', ctx=Store(), lineno=55, col_offset=0, end_lineno=55, end_col_offset=6)], value=Call(func=Name(id='get_logger', ctx=Load(), lineno=55, col_offset=9, end_lineno=55, end_col_offset=19), args=[Name(id='__name__', ctx=Load(), lineno=55, col_offset=20, end_lineno=55, end_col_offset=28)], lineno=55, col_offset=9, end_lineno=55, end_col_offset=29), lineno=55, col_offset=0, end_lineno=55, end_col_offset=29), ClassDef(name='GitClient', body=[Expr(value=Constant(value='Typed wrapper around GitPython for blame and history operations.\n\n    Provides structured APIs that return typed dictionaries instead of parsing\n    subprocess text output. Handles encoding/locale issues automatically via\n    GitPython\'s built-in Unicode support.\n\n    The Git repository is lazy-loaded on first access to avoid startup overhead\n    for applications that may not use Git operations immediately.\n\n    Attributes\n    ----------\n    repo_path : Path\n        Path to repository root directory. GitPython will search parent\n        directories for .git if repo_path is a subdirectory.\n\n    Examples\n    --------\n    Create client and get blame:\n\n    >>> from pathlib import Path\n    >>> client = GitClient(repo_path=Path("/home/user/myrepo"))\n    >>> blame = client.blame_range("src/main.py", 1, 10)\n    >>> blame[0]["author"]\n    \'John Doe\'\n\n    Get commit history:\n\n    >>> history = client.file_history("README.md", limit=5)\n    >>> len(history)\n    5\n    >>> history[0]["message"]\n    \'Update documentation\'\n\n    Notes\n    -----\n    The GitPython Repo object is cached after first access. This is safe because\n    Git repositories are generally not modified during server runtime (except for\n    indexing operations which run separately).\n\n    For async operations, use AsyncGitClient wrapper which runs operations in\n    a threadpool via asyncio.to_thread.\n    ', lineno=60, col_offset=4, end_lineno=101, end_col_offset=7), lineno=60, col_offset=4, end_lineno=101, end_col_offset=7), AnnAssign(target=Name(id='repo_path', ctx=Store(), lineno=103, col_offset=4, end_lineno=103, end_col_offset=13), annotation=Name(id='Path', ctx=Load(), lineno=103, col_offset=15, end_lineno=103, end_col_offset=19), simple=1, lineno=103, col_offset=4, end_lineno=103, end_col_offset=19), AnnAssign(target=Name(id='_repo', ctx=Store(), lineno=104, col_offset=4, end_lineno=104, end_col_offset=9), annotation=BinOp(left=Attribute(value=Name(id='git', ctx=Load(), lineno=104, col_offset=11, end_lineno=104, end_col_offset=14), attr='Repo', ctx=Load(), lineno=104, col_offset=11, end_lineno=104, end_col_offset=19), op=BitOr(), right=Constant(value=None, lineno=104, col_offset=22, end_lineno=104, end_col_offset=26), lineno=104, col_offset=11, end_lineno=104, end_col_offset=26), value=Call(func=Name(id='field', ctx=Load(), lineno=104, col_offset=29, end_lineno=104, end_col_offset=34), keywords=[keyword(arg='default', value=Constant(value=None, lineno=104, col_offset=43, end_lineno=104, end_col_offset=47), lineno=104, col_offset=35, end_lineno=104, end_col_offset=47), keyword(arg='init', value=Constant(value=False, lineno=104, col_offset=54, end_lineno=104, end_col_offset=59), lineno=104, col_offset=49, end_lineno=104, end_col_offset=59), keyword(arg='repr', value=Constant(value=False, lineno=104, col_offset=66, end_lineno=104, end_col_offset=71), lineno=104, col_offset=61, end_lineno=104, end_col_offset=71)], lineno=104, col_offset=29, end_lineno=104, end_col_offset=72), simple=1, lineno=104, col_offset=4, end_lineno=104, end_col_offset=72), FunctionDef(name='repo', args=arguments(args=[arg(arg='self', lineno=107, col_offset=13, end_lineno=107, end_col_offset=17)]), body=[Expr(value=Constant(value='Lazy-load Git repository.\n\n        Creates GitPython Repo instance on first access and caches it for\n        subsequent calls. This avoids repository initialization overhead at\n        client creation time.\n\n        Returns\n        -------\n        git.Repo\n            GitPython repository object for performing Git operations.\n\n        Raises\n        ------\n        git.exc.InvalidGitRepositoryError\n            If repo_path is not a valid Git repository or .git cannot be found\n            in parent directories. This exception is raised explicitly when\n            GitPython fails to initialize the repository.\n\n        Examples\n        --------\n        >>> client = GitClient(repo_path=Path("."))\n        >>> repo = client.repo  # Lazy initialization happens here\n        >>> repo.head.commit.hexsha\n        \'a1b2c3d4...\'\n        ', lineno=108, col_offset=8, end_lineno=132, end_col_offset=11), lineno=108, col_offset=8, end_lineno=132, end_col_offset=11), If(test=Compare(left=Attribute(value=Name(id='self', ctx=Load(), lineno=133, col_offset=11, end_lineno=133, end_col_offset=15), attr='_repo', ctx=Load(), lineno=133, col_offset=11, end_lineno=133, end_col_offset=21), ops=[Is()], comparators=[Constant(value=None, lineno=133, col_offset=25, end_lineno=133, end_col_offset=29)], lineno=133, col_offset=11, end_lineno=133, end_col_offset=29), body=[Try(body=[Assign(targets=[Attribute(value=Name(id='self', ctx=Load(), lineno=135, col_offset=16, end_lineno=135, end_col_offset=20), attr='_repo', ctx=Store(), lineno=135, col_offset=16, end_lineno=135, end_col_offset=26)], value=Call(func=Attribute(value=Name(id='git', ctx=Load(), lineno=135, col_offset=29, end_lineno=135, end_col_offset=32), attr='Repo', ctx=Load(), lineno=135, col_offset=29, end_lineno=135, end_col_offset=37), args=[Attribute(value=Name(id='self', ctx=Load(), lineno=135, col_offset=38, end_lineno=135, end_col_offset=42), attr='repo_path', ctx=Load(), lineno=135, col_offset=38, end_lineno=135, end_col_offset=52)], keywords=[keyword(arg='search_parent_directories', value=Constant(value=True, lineno=135, col_offset=80, end_lineno=135, end_col_offset=84), lineno=135, col_offset=54, end_lineno=135, end_col_offset=84)], lineno=135, col_offset=29, end_lineno=135, end_col_offset=85), lineno=135, col_offset=16, end_lineno=135, end_col_offset=85), Expr(value=Call(func=Attribute(value=Name(id='LOGGER', ctx=Load(), lineno=136, col_offset=16, end_lineno=136, end_col_offset=22), attr='debug', ctx=Load(), lineno=136, col_offset=16, end_lineno=136, end_col_offset=28), args=[Constant(value='Initialized Git repository', lineno=137, col_offset=20, end_lineno=137, end_col_offset=48)], keywords=[keyword(arg='extra', value=Dict(keys=[Constant(value='repo_path', lineno=139, col_offset=24, end_lineno=139, end_col_offset=35), Constant(value='git_dir', lineno=140, col_offset=24, end_lineno=140, end_col_offset=33)], values=[Call(func=Name(id='str', ctx=Load(), lineno=139, col_offset=37, end_lineno=139, end_col_offset=40), args=[Attribute(value=Name(id='self', ctx=Load(), lineno=139, col_offset=41, end_lineno=139, end_col_offset=45), attr='repo_path', ctx=Load(), lineno=139, col_offset=41, end_lineno=139, end_col_offset=55)], lineno=139, col_offset=37, end_lineno=139, end_col_offset=56), Call(func=Name(id='str', ctx=Load(), lineno=140, col_offset=35, end_lineno=140, end_col_offset=38), args=[Attribute(value=Attribute(value=Name(id='self', ctx=Load(), lineno=140, col_offset=39, end_lineno=140, end_col_offset=43), attr='_repo', ctx=Load(), lineno=140, col_offset=39, end_lineno=140, end_col_offset=49), attr='git_dir', ctx=Load(), lineno=140, col_offset=39, end_lineno=140, end_col_offset=57)], lineno=140, col_offset=35, end_lineno=140, end_col_offset=58)], lineno=138, col_offset=26, end_lineno=141, end_col_offset=21), lineno=138, col_offset=20, end_lineno=141, end_col_offset=21)], lineno=136, col_offset=16, end_lineno=142, end_col_offset=17), lineno=136, col_offset=16, end_lineno=142, end_col_offset=17)], handlers=[ExceptHandler(type=Attribute(value=Attribute(value=Name(id='git', ctx=Load(), lineno=143, col_offset=19, end_lineno=143, end_col_offset=22), attr='exc', ctx=Load(), lineno=143, col_offset=19, end_lineno=143, end_col_offset=26), attr='InvalidGitRepositoryError', ctx=Load(), lineno=143, col_offset=19, end_lineno=143, end_col_offset=52), name='exc', body=[Expr(value=Call(func=Attribute(value=Name(id='LOGGER', ctx=Load(), lineno=144, col_offset=16, end_lineno=144, end_col_offset=22), attr='exception', ctx=Load(), lineno=144, col_offset=16, end_lineno=144, end_col_offset=32), args=[Constant(value='Invalid Git repository', lineno=145, col_offset=20, end_lineno=145, end_col_offset=44)], keywords=[keyword(arg='extra', value=Dict(keys=[Constant(value='repo_path', lineno=146, col_offset=27, end_lineno=146, end_col_offset=38), Constant(value='error', lineno=146, col_offset=61, end_lineno=146, end_col_offset=68)], values=[Call(func=Name(id='str', ctx=Load(), lineno=146, col_offset=40, end_lineno=146, end_col_offset=43), args=[Attribute(value=Name(id='self', ctx=Load(), lineno=146, col_offset=44, end_lineno=146, end_col_offset=48), attr='repo_path', ctx=Load(), lineno=146, col_offset=44, end_lineno=146, end_col_offset=58)], lineno=146, col_offset=40, end_lineno=146, end_col_offset=59), Call(func=Name(id='str', ctx=Load(), lineno=146, col_offset=70, end_lineno=146, end_col_offset=73), args=[Name(id='exc', ctx=Load(), lineno=146, col_offset=74, end_lineno=146, end_col_offset=77)], lineno=146, col_offset=70, end_lineno=146, end_col_offset=78)], lineno=146, col_offset=26, end_lineno=146, end_col_offset=79), lineno=146, col_offset=20, end_lineno=146, end_col_offset=79)], lineno=144, col_offset=16, end_lineno=147, end_col_offset=17), lineno=144, col_offset=16, end_lineno=147, end_col_offset=17), Raise(lineno=148, col_offset=16, end_lineno=148, end_col_offset=21)], lineno=143, col_offset=12, end_lineno=148, end_col_offset=21)], lineno=134, col_offset=12, end_lineno=148, end_col_offset=21)], lineno=133, col_offset=8, end_lineno=148, end_col_offset=21), Return(value=Attribute(value=Name(id='self', ctx=Load(), lineno=149, col_offset=15, end_lineno=149, end_col_offset=19), attr='_repo', ctx=Load(), lineno=149, col_offset=15, end_lineno=149, end_col_offset=25), lineno=149, col_offset=8, end_lineno=149, end_col_offset=25)], decorator_list=[Name(id='property', ctx=Load(), lineno=106, col_offset=5, end_lineno=106, end_col_offset=13)], returns=Attribute(value=Name(id='git', ctx=Load(), lineno=107, col_offset=22, end_lineno=107, end_col_offset=25), attr='Repo', ctx=Load(), lineno=107, col_offset=22, end_lineno=107, end_col_offset=30), lineno=107, col_offset=4, end_lineno=149, end_col_offset=25), FunctionDef(name='blame_range', args=arguments(args=[arg(arg='self', lineno=151, col_offset=20, end_lineno=151, end_col_offset=24), arg(arg='path', annotation=Name(id='str', ctx=Load(), lineno=151, col_offset=32, end_lineno=151, end_col_offset=35), lineno=151, col_offset=26, end_lineno=151, end_col_offset=35), arg(arg='start_line', annotation=Name(id='int', ctx=Load(), lineno=151, col_offset=49, end_lineno=151, end_col_offset=52), lineno=151, col_offset=37, end_lineno=151, end_col_offset=52), arg(arg='end_line', annotation=Name(id='int', ctx=Load(), lineno=151, col_offset=64, end_lineno=151, end_col_offset=67), lineno=151, col_offset=54, end_lineno=151, end_col_offset=67)]), body=[Expr(value=Constant(value='Get Git blame for line range.\n\n        Returns blame information for each line in the specified range, showing\n        which commit last modified the line, who authored it, when, and why.\n\n        Uses GitPython\'s blame_incremental() for efficient line-by-line blame.\n        This is faster than running `git blame` subprocess because it uses\n        GitPython\'s internal optimizations and avoids text parsing.\n\n        Parameters\n        ----------\n        path : str\n            File path relative to repository root. Path separators should be\n            forward slashes (/) even on Windows. GitPython normalizes paths.\n        start_line : int\n            Start line number (1-indexed, inclusive). Must be positive and\n            less than or equal to end_line.\n        end_line : int\n            End line number (1-indexed, inclusive). Must be positive and\n            greater than or equal to start_line.\n\n        Returns\n        -------\n        list[GitBlameEntry]\n            List of blame entries, one per line in range. Each entry is a\n            typed dictionary with fields: line, commit, author, date, message.\n            Lines are ordered by line number (ascending).\n\n        Raises\n        ------\n        FileNotFoundError\n            If the specified file does not exist in the repository at HEAD.\n            This is raised instead of git.exc.GitCommandError for clearer\n            error handling in adapters.\n        git.exc.GitCommandError\n            If Git operation fails for other reasons (not a valid commit,\n            permission denied, etc.). The exception message contains details\n            from Git.\n\n        Examples\n        --------\n        Get blame for first 10 lines:\n\n        >>> client = GitClient(repo_path=Path("."))\n        >>> blame = client.blame_range("README.md", 1, 10)\n        >>> for entry in blame:\n        ...     print(f"Line {entry[\'line\']}: {entry[\'author\']}")\n        Line 1: John Doe\n        Line 2: Jane Smith\n        ...\n\n        Handle file not found:\n\n        >>> try:\n        ...     blame = client.blame_range("nonexistent.txt", 1, 10)\n        ... except FileNotFoundError as exc:\n        ...     print(f"File not found: {exc}")\n        File not found: File not found: nonexistent.txt\n\n        Notes\n        -----\n        GitPython\'s blame_incremental returns blame info for entire file, but\n        we filter to requested line range for efficiency. The function handles\n        Unicode filenames and author names automatically.\n\n        Line numbers are 1-indexed to match editor conventions and Git\'s\n        output format. Internally, GitPython uses 0-indexed lines.\n        ', lineno=152, col_offset=8, end_lineno=219, end_col_offset=11), lineno=152, col_offset=8, end_lineno=219, end_col_offset=11), Try(body=[Assign(targets=[Name(id='blame_iter', ctx=Store(), lineno=222, col_offset=12, end_lineno=222, end_col_offset=22)], value=Call(func=Attribute(value=Attribute(value=Name(id='self', ctx=Load(), lineno=222, col_offset=25, end_lineno=222, end_col_offset=29), attr='repo', ctx=Load(), lineno=222, col_offset=25, end_lineno=222, end_col_offset=34), attr='blame_incremental', ctx=Load(), lineno=222, col_offset=25, end_lineno=222, end_col_offset=52), keywords=[keyword(arg='rev', value=Constant(value='HEAD', lineno=223, col_offset=20, end_lineno=223, end_col_offset=26), lineno=223, col_offset=16, end_lineno=223, end_col_offset=26), keyword(arg='file', value=Name(id='path', ctx=Load(), lineno=224, col_offset=21, end_lineno=224, end_col_offset=25), lineno=224, col_offset=16, end_lineno=224, end_col_offset=25), keyword(arg='L', value=JoinedStr(values=[FormattedValue(value=Name(id='start_line', ctx=Load(), lineno=225, col_offset=21, end_lineno=225, end_col_offset=31), conversion=-1, lineno=225, col_offset=20, end_lineno=225, end_col_offset=32), Constant(value=',', lineno=225, col_offset=32, end_lineno=225, end_col_offset=33), FormattedValue(value=Name(id='end_line', ctx=Load(), lineno=225, col_offset=34, end_lineno=225, end_col_offset=42), conversion=-1, lineno=225, col_offset=33, end_lineno=225, end_col_offset=43)], lineno=225, col_offset=18, end_lineno=225, end_col_offset=44), lineno=225, col_offset=16, end_lineno=225, end_col_offset=44)], lineno=222, col_offset=25, end_lineno=226, end_col_offset=13), lineno=222, col_offset=12, end_lineno=226, end_col_offset=13)], handlers=[ExceptHandler(type=Attribute(value=Attribute(value=Name(id='git', ctx=Load(), lineno=227, col_offset=15, end_lineno=227, end_col_offset=18), attr='exc', ctx=Load(), lineno=227, col_offset=15, end_lineno=227, end_col_offset=22), attr='GitCommandError', ctx=Load(), lineno=227, col_offset=15, end_lineno=227, end_col_offset=38), name='exc', body=[If(test=BoolOp(op=Or(), values=[Compare(left=Constant(value='does not exist', lineno=229, col_offset=15, end_lineno=229, end_col_offset=31), ops=[In()], comparators=[Call(func=Attribute(value=Call(func=Name(id='str', ctx=Load(), lineno=229, col_offset=35, end_lineno=229, end_col_offset=38), args=[Name(id='exc', ctx=Load(), lineno=229, col_offset=39, end_lineno=229, end_col_offset=42)], lineno=229, col_offset=35, end_lineno=229, end_col_offset=43), attr='lower', ctx=Load(), lineno=229, col_offset=35, end_lineno=229, end_col_offset=49), lineno=229, col_offset=35, end_lineno=229, end_col_offset=51)], lineno=229, col_offset=15, end_lineno=229, end_col_offset=51), Compare(left=Constant(value='bad file', lineno=229, col_offset=55, end_lineno=229, end_col_offset=65), ops=[In()], comparators=[Call(func=Attribute(value=Call(func=Name(id='str', ctx=Load(), lineno=229, col_offset=69, end_lineno=229, end_col_offset=72), args=[Name(id='exc', ctx=Load(), lineno=229, col_offset=73, end_lineno=229, end_col_offset=76)], lineno=229, col_offset=69, end_lineno=229, end_col_offset=77), attr='lower', ctx=Load(), lineno=229, col_offset=69, end_lineno=229, end_col_offset=83), lineno=229, col_offset=69, end_lineno=229, end_col_offset=85)], lineno=229, col_offset=55, end_lineno=229, end_col_offset=85)], lineno=229, col_offset=15, end_lineno=229, end_col_offset=85), body=[Expr(value=Call(func=Attribute(value=Name(id='LOGGER', ctx=Load(), lineno=230, col_offset=16, end_lineno=230, end_col_offset=22), attr='warning', ctx=Load(), lineno=230, col_offset=16, end_lineno=230, end_col_offset=30), args=[Constant(value='File not found for blame', lineno=230, col_offset=31, end_lineno=230, end_col_offset=57)], keywords=[keyword(arg='extra', value=Dict(keys=[Constant(value='path', lineno=230, col_offset=66, end_lineno=230, end_col_offset=72), Constant(value='error', lineno=230, col_offset=80, end_lineno=230, end_col_offset=87)], values=[Name(id='path', ctx=Load(), lineno=230, col_offset=74, end_lineno=230, end_col_offset=78), Call(func=Name(id='str', ctx=Load(), lineno=230, col_offset=89, end_lineno=230, end_col_offset=92), args=[Name(id='exc', ctx=Load(), lineno=230, col_offset=93, end_lineno=230, end_col_offset=96)], lineno=230, col_offset=89, end_lineno=230, end_col_offset=97)], lineno=230, col_offset=65, end_lineno=230, end_col_offset=98), lineno=230, col_offset=59, end_lineno=230, end_col_offset=98)], lineno=230, col_offset=16, end_lineno=230, end_col_offset=99), lineno=230, col_offset=16, end_lineno=230, end_col_offset=99), Assign(targets=[Name(id='msg', ctx=Store(), lineno=231, col_offset=16, end_lineno=231, end_col_offset=19)], value=JoinedStr(values=[Constant(value='File not found: ', lineno=231, col_offset=24, end_lineno=231, end_col_offset=40), FormattedValue(value=Name(id='path', ctx=Load(), lineno=231, col_offset=41, end_lineno=231, end_col_offset=45), conversion=-1, lineno=231, col_offset=40, end_lineno=231, end_col_offset=46)], lineno=231, col_offset=22, end_lineno=231, end_col_offset=47), lineno=231, col_offset=16, end_lineno=231, end_col_offset=47), Raise(exc=Call(func=Name(id='FileNotFoundError', ctx=Load(), lineno=232, col_offset=22, end_lineno=232, end_col_offset=39), args=[Name(id='msg', ctx=Load(), lineno=232, col_offset=40, end_lineno=232, end_col_offset=43)], lineno=232, col_offset=22, end_lineno=232, end_col_offset=44), cause=Name(id='exc', ctx=Load(), lineno=232, col_offset=50, end_lineno=232, end_col_offset=53), lineno=232, col_offset=16, end_lineno=232, end_col_offset=53)], lineno=229, col_offset=12, end_lineno=232, end_col_offset=53), Expr(value=Call(func=Attribute(value=Name(id='LOGGER', ctx=Load(), lineno=234, col_offset=12, end_lineno=234, end_col_offset=18), attr='exception', ctx=Load(), lineno=234, col_offset=12, end_lineno=234, end_col_offset=28), args=[Constant(value='Git blame failed', lineno=234, col_offset=29, end_lineno=234, end_col_offset=47)], keywords=[keyword(arg='extra', value=Dict(keys=[Constant(value='path', lineno=234, col_offset=56, end_lineno=234, end_col_offset=62), Constant(value='error', lineno=234, col_offset=70, end_lineno=234, end_col_offset=77)], values=[Name(id='path', ctx=Load(), lineno=234, col_offset=64, end_lineno=234, end_col_offset=68), Call(func=Name(id='str', ctx=Load(), lineno=234, col_offset=79, end_lineno=234, end_col_offset=82), args=[Name(id='exc', ctx=Load(), lineno=234, col_offset=83, end_lineno=234, end_col_offset=86)], lineno=234, col_offset=79, end_lineno=234, end_col_offset=87)], lineno=234, col_offset=55, end_lineno=234, end_col_offset=88), lineno=234, col_offset=49, end_lineno=234, end_col_offset=88)], lineno=234, col_offset=12, end_lineno=234, end_col_offset=89), lineno=234, col_offset=12, end_lineno=234, end_col_offset=89), Raise(lineno=235, col_offset=12, end_lineno=235, end_col_offset=17)], lineno=227, col_offset=8, end_lineno=235, end_col_offset=17)], lineno=220, col_offset=8, end_lineno=235, end_col_offset=17), AnnAssign(target=Name(id='entries', ctx=Store(), lineno=237, col_offset=8, end_lineno=237, end_col_offset=15), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=237, col_offset=17, end_lineno=237, end_col_offset=21), slice=Name(id='GitBlameEntry', ctx=Load(), lineno=237, col_offset=22, end_lineno=237, end_col_offset=35), ctx=Load(), lineno=237, col_offset=17, end_lineno=237, end_col_offset=36), value=List(ctx=Load(), lineno=237, col_offset=39, end_lineno=237, end_col_offset=41), simple=1, lineno=237, col_offset=8, end_lineno=237, end_col_offset=41), For(target=Tuple(elts=[Name(id='commit', ctx=Store(), lineno=238, col_offset=12, end_lineno=238, end_col_offset=18), Name(id='line_nums', ctx=Store(), lineno=238, col_offset=20, end_lineno=238, end_col_offset=29)], ctx=Store(), lineno=238, col_offset=12, end_lineno=238, end_col_offset=29), iter=Name(id='blame_iter', ctx=Load(), lineno=238, col_offset=33, end_lineno=238, end_col_offset=43), body=[For(target=Name(id='line_num', ctx=Store(), lineno=239, col_offset=16, end_lineno=239, end_col_offset=24), iter=Name(id='line_nums', ctx=Load(), lineno=239, col_offset=28, end_lineno=239, end_col_offset=37), body=[If(test=Compare(left=Name(id='start_line', ctx=Load(), lineno=241, col_offset=19, end_lineno=241, end_col_offset=29), ops=[LtE(), LtE()], comparators=[Name(id='line_num', ctx=Load(), lineno=241, col_offset=33, end_lineno=241, end_col_offset=41), Name(id='end_line', ctx=Load(), lineno=241, col_offset=45, end_lineno=241, end_col_offset=53)], lineno=241, col_offset=19, end_lineno=241, end_col_offset=53), body=[AnnAssign(target=Name(id='entry', ctx=Store(), lineno=242, col_offset=20, end_lineno=242, end_col_offset=25), annotation=Name(id='GitBlameEntry', ctx=Load(), lineno=242, col_offset=27, end_lineno=242, end_col_offset=40), value=Dict(keys=[Constant(value='line', lineno=243, col_offset=24, end_lineno=243, end_col_offset=30), Constant(value='commit', lineno=244, col_offset=24, end_lineno=244, end_col_offset=32), Constant(value='author', lineno=245, col_offset=24, end_lineno=245, end_col_offset=32), Constant(value='date', lineno=246, col_offset=24, end_lineno=246, end_col_offset=30), Constant(value='message', lineno=247, col_offset=24, end_lineno=247, end_col_offset=33)], values=[Name(id='line_num', ctx=Load(), lineno=243, col_offset=32, end_lineno=243, end_col_offset=40), Subscript(value=Attribute(value=Name(id='commit', ctx=Load(), lineno=244, col_offset=34, end_lineno=244, end_col_offset=40), attr='hexsha', ctx=Load(), lineno=244, col_offset=34, end_lineno=244, end_col_offset=47), slice=Slice(upper=Constant(value=8, lineno=244, col_offset=49, end_lineno=244, end_col_offset=50), lineno=244, col_offset=48, end_lineno=244, end_col_offset=50), ctx=Load(), lineno=244, col_offset=34, end_lineno=244, end_col_offset=51), Attribute(value=Attribute(value=Name(id='commit', ctx=Load(), lineno=245, col_offset=34, end_lineno=245, end_col_offset=40), attr='author', ctx=Load(), lineno=245, col_offset=34, end_lineno=245, end_col_offset=47), attr='name', ctx=Load(), lineno=245, col_offset=34, end_lineno=245, end_col_offset=52), Call(func=Attribute(value=Attribute(value=Name(id='commit', ctx=Load(), lineno=246, col_offset=32, end_lineno=246, end_col_offset=38), attr='authored_datetime', ctx=Load(), lineno=246, col_offset=32, end_lineno=246, end_col_offset=56), attr='isoformat', ctx=Load(), lineno=246, col_offset=32, end_lineno=246, end_col_offset=66), lineno=246, col_offset=32, end_lineno=246, end_col_offset=68), Attribute(value=Name(id='commit', ctx=Load(), lineno=247, col_offset=35, end_lineno=247, end_col_offset=41), attr='summary', ctx=Load(), lineno=247, col_offset=35, end_lineno=247, end_col_offset=49)], lineno=242, col_offset=43, end_lineno=248, end_col_offset=21), simple=1, lineno=242, col_offset=20, end_lineno=248, end_col_offset=21), Expr(value=Call(func=Attribute(value=Name(id='entries', ctx=Load(), lineno=249, col_offset=20, end_lineno=249, end_col_offset=27), attr='append', ctx=Load(), lineno=249, col_offset=20, end_lineno=249, end_col_offset=34), args=[Name(id='entry', ctx=Load(), lineno=249, col_offset=35, end_lineno=249, end_col_offset=40)], lineno=249, col_offset=20, end_lineno=249, end_col_offset=41), lineno=249, col_offset=20, end_lineno=249, end_col_offset=41)], lineno=241, col_offset=16, end_lineno=249, end_col_offset=41)], lineno=239, col_offset=12, end_lineno=249, end_col_offset=41)], lineno=238, col_offset=8, end_lineno=249, end_col_offset=41), Expr(value=Call(func=Attribute(value=Name(id='LOGGER', ctx=Load(), lineno=251, col_offset=8, end_lineno=251, end_col_offset=14), attr='debug', ctx=Load(), lineno=251, col_offset=8, end_lineno=251, end_col_offset=20), args=[Constant(value='Git blame completed', lineno=252, col_offset=12, end_lineno=252, end_col_offset=33)], keywords=[keyword(arg='extra', value=Dict(keys=[Constant(value='path', lineno=254, col_offset=16, end_lineno=254, end_col_offset=22), Constant(value='start_line', lineno=255, col_offset=16, end_lineno=255, end_col_offset=28), Constant(value='end_line', lineno=256, col_offset=16, end_lineno=256, end_col_offset=26), Constant(value='entries_count', lineno=257, col_offset=16, end_lineno=257, end_col_offset=31)], values=[Name(id='path', ctx=Load(), lineno=254, col_offset=24, end_lineno=254, end_col_offset=28), Name(id='start_line', ctx=Load(), lineno=255, col_offset=30, end_lineno=255, end_col_offset=40), Name(id='end_line', ctx=Load(), lineno=256, col_offset=28, end_lineno=256, end_col_offset=36), Call(func=Name(id='len', ctx=Load(), lineno=257, col_offset=33, end_lineno=257, end_col_offset=36), args=[Name(id='entries', ctx=Load(), lineno=257, col_offset=37, end_lineno=257, end_col_offset=44)], lineno=257, col_offset=33, end_lineno=257, end_col_offset=45)], lineno=253, col_offset=18, end_lineno=258, end_col_offset=13), lineno=253, col_offset=12, end_lineno=258, end_col_offset=13)], lineno=251, col_offset=8, end_lineno=259, end_col_offset=9), lineno=251, col_offset=8, end_lineno=259, end_col_offset=9), Return(value=Name(id='entries', ctx=Load(), lineno=261, col_offset=15, end_lineno=261, end_col_offset=22), lineno=261, col_offset=8, end_lineno=261, end_col_offset=22)], returns=Subscript(value=Name(id='list', ctx=Load(), lineno=151, col_offset=72, end_lineno=151, end_col_offset=76), slice=Name(id='GitBlameEntry', ctx=Load(), lineno=151, col_offset=77, end_lineno=151, end_col_offset=90), ctx=Load(), lineno=151, col_offset=72, end_lineno=151, end_col_offset=91), lineno=151, col_offset=4, end_lineno=261, end_col_offset=22), FunctionDef(name='file_history', args=arguments(args=[arg(arg='self', lineno=263, col_offset=21, end_lineno=263, end_col_offset=25), arg(arg='path', annotation=Name(id='str', ctx=Load(), lineno=263, col_offset=33, end_lineno=263, end_col_offset=36), lineno=263, col_offset=27, end_lineno=263, end_col_offset=36), arg(arg='limit', annotation=Name(id='int', ctx=Load(), lineno=263, col_offset=45, end_lineno=263, end_col_offset=48), lineno=263, col_offset=38, end_lineno=263, end_col_offset=48)], defaults=[Constant(value=50, lineno=263, col_offset=51, end_lineno=263, end_col_offset=53)]), body=[Expr(value=Constant(value='Get commit history for file.\n\n        Returns list of commits that modified the specified file, ordered by\n        commit date (newest first). Includes commit metadata: SHA, author,\n        date, message.\n\n        Uses GitPython\'s iter_commits() for efficient history traversal. This\n        is faster than `git log` subprocess because it avoids process overhead\n        and text parsing.\n\n        Parameters\n        ----------\n        path : str\n            File path relative to repository root. Path separators should be\n            forward slashes (/) even on Windows.\n        limit : int, optional\n            Maximum number of commits to return (default: 50). Set to a large\n            value (e.g., 1000) to get full history, but be aware of performance\n            impact for files with many commits.\n\n        Returns\n        -------\n        list[dict]\n            List of commit dictionaries ordered by date (newest first). Each\n            dict contains: sha (8 chars), full_sha (40 chars), author, email,\n            date (ISO 8601), message (summary line).\n\n        Raises\n        ------\n        FileNotFoundError\n            If the specified file does not exist in the repository history.\n            This includes files that were deleted in HEAD but existed in\n            past commits.\n        git.exc.GitCommandError\n            If Git operation fails for other reasons.\n\n        Examples\n        --------\n        Get recent commits:\n\n        >>> client = GitClient(repo_path=Path("."))\n        >>> history = client.file_history("README.md", limit=5)\n        >>> for commit in history:\n        ...     print(f"{commit[\'sha\']}: {commit[\'message\']}")\n        a1b2c3d4: Update documentation\n        e5f6g7h8: Fix typo\n        ...\n\n        Get full author info:\n\n        >>> commit = history[0]\n        >>> print(f"{commit[\'author\']} <{commit[\'email\']}>")\n        John Doe <john@example.com>\n\n        Notes\n        -----\n        The function returns commits in reverse chronological order (newest\n        first), matching `git log` default behavior. Dates are in ISO 8601\n        format with timezone info.\n\n        For files with rename history, GitPython\'s --follow equivalent may\n        not work perfectly. Consider using Git\'s --follow flag via subprocess\n        if rename tracking is critical.\n        ', lineno=264, col_offset=8, end_lineno=327, end_col_offset=11), lineno=264, col_offset=8, end_lineno=327, end_col_offset=11), Try(body=[Assign(targets=[Name(id='commits_iter', ctx=Store(), lineno=330, col_offset=12, end_lineno=330, end_col_offset=24)], value=Call(func=Attribute(value=Attribute(value=Name(id='self', ctx=Load(), lineno=330, col_offset=27, end_lineno=330, end_col_offset=31), attr='repo', ctx=Load(), lineno=330, col_offset=27, end_lineno=330, end_col_offset=36), attr='iter_commits', ctx=Load(), lineno=330, col_offset=27, end_lineno=330, end_col_offset=49), keywords=[keyword(arg='rev', value=Constant(value='HEAD', lineno=330, col_offset=54, end_lineno=330, end_col_offset=60), lineno=330, col_offset=50, end_lineno=330, end_col_offset=60), keyword(arg='paths', value=Name(id='path', ctx=Load(), lineno=330, col_offset=68, end_lineno=330, end_col_offset=72), lineno=330, col_offset=62, end_lineno=330, end_col_offset=72), keyword(arg='max_count', value=Name(id='limit', ctx=Load(), lineno=330, col_offset=84, end_lineno=330, end_col_offset=89), lineno=330, col_offset=74, end_lineno=330, end_col_offset=89)], lineno=330, col_offset=27, end_lineno=330, end_col_offset=90), lineno=330, col_offset=12, end_lineno=330, end_col_offset=90)], handlers=[ExceptHandler(type=Attribute(value=Attribute(value=Name(id='git', ctx=Load(), lineno=331, col_offset=15, end_lineno=331, end_col_offset=18), attr='exc', ctx=Load(), lineno=331, col_offset=15, end_lineno=331, end_col_offset=22), attr='GitCommandError', ctx=Load(), lineno=331, col_offset=15, end_lineno=331, end_col_offset=38), name='exc', body=[If(test=BoolOp(op=Or(), values=[Compare(left=Constant(value='does not exist', lineno=333, col_offset=15, end_lineno=333, end_col_offset=31), ops=[In()], comparators=[Call(func=Attribute(value=Call(func=Name(id='str', ctx=Load(), lineno=333, col_offset=35, end_lineno=333, end_col_offset=38), args=[Name(id='exc', ctx=Load(), lineno=333, col_offset=39, end_lineno=333, end_col_offset=42)], lineno=333, col_offset=35, end_lineno=333, end_col_offset=43), attr='lower', ctx=Load(), lineno=333, col_offset=35, end_lineno=333, end_col_offset=49), lineno=333, col_offset=35, end_lineno=333, end_col_offset=51)], lineno=333, col_offset=15, end_lineno=333, end_col_offset=51), Compare(left=Constant(value='bad file', lineno=333, col_offset=55, end_lineno=333, end_col_offset=65), ops=[In()], comparators=[Call(func=Attribute(value=Call(func=Name(id='str', ctx=Load(), lineno=333, col_offset=69, end_lineno=333, end_col_offset=72), args=[Name(id='exc', ctx=Load(), lineno=333, col_offset=73, end_lineno=333, end_col_offset=76)], lineno=333, col_offset=69, end_lineno=333, end_col_offset=77), attr='lower', ctx=Load(), lineno=333, col_offset=69, end_lineno=333, end_col_offset=83), lineno=333, col_offset=69, end_lineno=333, end_col_offset=85)], lineno=333, col_offset=55, end_lineno=333, end_col_offset=85)], lineno=333, col_offset=15, end_lineno=333, end_col_offset=85), body=[Expr(value=Call(func=Attribute(value=Name(id='LOGGER', ctx=Load(), lineno=334, col_offset=16, end_lineno=334, end_col_offset=22), attr='warning', ctx=Load(), lineno=334, col_offset=16, end_lineno=334, end_col_offset=30), args=[Constant(value='File not found for history', lineno=335, col_offset=20, end_lineno=335, end_col_offset=48)], keywords=[keyword(arg='extra', value=Dict(keys=[Constant(value='path', lineno=336, col_offset=27, end_lineno=336, end_col_offset=33), Constant(value='error', lineno=336, col_offset=41, end_lineno=336, end_col_offset=48)], values=[Name(id='path', ctx=Load(), lineno=336, col_offset=35, end_lineno=336, end_col_offset=39), Call(func=Name(id='str', ctx=Load(), lineno=336, col_offset=50, end_lineno=336, end_col_offset=53), args=[Name(id='exc', ctx=Load(), lineno=336, col_offset=54, end_lineno=336, end_col_offset=57)], lineno=336, col_offset=50, end_lineno=336, end_col_offset=58)], lineno=336, col_offset=26, end_lineno=336, end_col_offset=59), lineno=336, col_offset=20, end_lineno=336, end_col_offset=59)], lineno=334, col_offset=16, end_lineno=337, end_col_offset=17), lineno=334, col_offset=16, end_lineno=337, end_col_offset=17), Assign(targets=[Name(id='msg', ctx=Store(), lineno=338, col_offset=16, end_lineno=338, end_col_offset=19)], value=JoinedStr(values=[Constant(value='File not found: ', lineno=338, col_offset=24, end_lineno=338, end_col_offset=40), FormattedValue(value=Name(id='path', ctx=Load(), lineno=338, col_offset=41, end_lineno=338, end_col_offset=45), conversion=-1, lineno=338, col_offset=40, end_lineno=338, end_col_offset=46)], lineno=338, col_offset=22, end_lineno=338, end_col_offset=47), lineno=338, col_offset=16, end_lineno=338, end_col_offset=47), Raise(exc=Call(func=Name(id='FileNotFoundError', ctx=Load(), lineno=339, col_offset=22, end_lineno=339, end_col_offset=39), args=[Name(id='msg', ctx=Load(), lineno=339, col_offset=40, end_lineno=339, end_col_offset=43)], lineno=339, col_offset=22, end_lineno=339, end_col_offset=44), cause=Name(id='exc', ctx=Load(), lineno=339, col_offset=50, end_lineno=339, end_col_offset=53), lineno=339, col_offset=16, end_lineno=339, end_col_offset=53)], lineno=333, col_offset=12, end_lineno=339, end_col_offset=53), Expr(value=Call(func=Attribute(value=Name(id='LOGGER', ctx=Load(), lineno=341, col_offset=12, end_lineno=341, end_col_offset=18), attr='exception', ctx=Load(), lineno=341, col_offset=12, end_lineno=341, end_col_offset=28), args=[Constant(value='Git log failed', lineno=341, col_offset=29, end_lineno=341, end_col_offset=45)], keywords=[keyword(arg='extra', value=Dict(keys=[Constant(value='path', lineno=341, col_offset=54, end_lineno=341, end_col_offset=60), Constant(value='error', lineno=341, col_offset=68, end_lineno=341, end_col_offset=75)], values=[Name(id='path', ctx=Load(), lineno=341, col_offset=62, end_lineno=341, end_col_offset=66), Call(func=Name(id='str', ctx=Load(), lineno=341, col_offset=77, end_lineno=341, end_col_offset=80), args=[Name(id='exc', ctx=Load(), lineno=341, col_offset=81, end_lineno=341, end_col_offset=84)], lineno=341, col_offset=77, end_lineno=341, end_col_offset=85)], lineno=341, col_offset=53, end_lineno=341, end_col_offset=86), lineno=341, col_offset=47, end_lineno=341, end_col_offset=86)], lineno=341, col_offset=12, end_lineno=341, end_col_offset=87), lineno=341, col_offset=12, end_lineno=341, end_col_offset=87), Raise(lineno=342, col_offset=12, end_lineno=342, end_col_offset=17)], lineno=331, col_offset=8, end_lineno=342, end_col_offset=17)], lineno=328, col_offset=8, end_lineno=342, end_col_offset=17), AnnAssign(target=Name(id='commits', ctx=Store(), lineno=344, col_offset=8, end_lineno=344, end_col_offset=15), annotation=Subscript(value=Name(id='list', ctx=Load(), lineno=344, col_offset=17, end_lineno=344, end_col_offset=21), slice=Name(id='dict', ctx=Load(), lineno=344, col_offset=22, end_lineno=344, end_col_offset=26), ctx=Load(), lineno=344, col_offset=17, end_lineno=344, end_col_offset=27), value=List(ctx=Load(), lineno=344, col_offset=30, end_lineno=344, end_col_offset=32), simple=1, lineno=344, col_offset=8, end_lineno=344, end_col_offset=32), For(target=Name(id='commit', ctx=Store(), lineno=345, col_offset=12, end_lineno=345, end_col_offset=18), iter=Name(id='commits_iter', ctx=Load(), lineno=345, col_offset=22, end_lineno=345, end_col_offset=34), body=[Assign(targets=[Name(id='commit_dict', ctx=Store(), lineno=346, col_offset=12, end_lineno=346, end_col_offset=23)], value=Dict(keys=[Constant(value='sha', lineno=347, col_offset=16, end_lineno=347, end_col_offset=21), Constant(value='full_sha', lineno=348, col_offset=16, end_lineno=348, end_col_offset=26), Constant(value='author', lineno=349, col_offset=16, end_lineno=349, end_col_offset=24), Constant(value='email', lineno=350, col_offset=16, end_lineno=350, end_col_offset=23), Constant(value='date', lineno=351, col_offset=16, end_lineno=351, end_col_offset=22), Constant(value='message', lineno=352, col_offset=16, end_lineno=352, end_col_offset=25)], values=[Subscript(value=Attribute(value=Name(id='commit', ctx=Load(), lineno=347, col_offset=23, end_lineno=347, end_col_offset=29), attr='hexsha', ctx=Load(), lineno=347, col_offset=23, end_lineno=347, end_col_offset=36), slice=Slice(upper=Constant(value=8, lineno=347, col_offset=38, end_lineno=347, end_col_offset=39), lineno=347, col_offset=37, end_lineno=347, end_col_offset=39), ctx=Load(), lineno=347, col_offset=23, end_lineno=347, end_col_offset=40), Attribute(value=Name(id='commit', ctx=Load(), lineno=348, col_offset=28, end_lineno=348, end_col_offset=34), attr='hexsha', ctx=Load(), lineno=348, col_offset=28, end_lineno=348, end_col_offset=41), Attribute(value=Attribute(value=Name(id='commit', ctx=Load(), lineno=349, col_offset=26, end_lineno=349, end_col_offset=32), attr='author', ctx=Load(), lineno=349, col_offset=26, end_lineno=349, end_col_offset=39), attr='name', ctx=Load(), lineno=349, col_offset=26, end_lineno=349, end_col_offset=44), Attribute(value=Attribute(value=Name(id='commit', ctx=Load(), lineno=350, col_offset=25, end_lineno=350, end_col_offset=31), attr='author', ctx=Load(), lineno=350, col_offset=25, end_lineno=350, end_col_offset=38), attr='email', ctx=Load(), lineno=350, col_offset=25, end_lineno=350, end_col_offset=44), Call(func=Attribute(value=Attribute(value=Name(id='commit', ctx=Load(), lineno=351, col_offset=24, end_lineno=351, end_col_offset=30), attr='authored_datetime', ctx=Load(), lineno=351, col_offset=24, end_lineno=351, end_col_offset=48), attr='isoformat', ctx=Load(), lineno=351, col_offset=24, end_lineno=351, end_col_offset=58), lineno=351, col_offset=24, end_lineno=351, end_col_offset=60), Attribute(value=Name(id='commit', ctx=Load(), lineno=352, col_offset=27, end_lineno=352, end_col_offset=33), attr='summary', ctx=Load(), lineno=352, col_offset=27, end_lineno=352, end_col_offset=41)], lineno=346, col_offset=26, end_lineno=353, end_col_offset=13), lineno=346, col_offset=12, end_lineno=353, end_col_offset=13), Expr(value=Call(func=Attribute(value=Name(id='commits', ctx=Load(), lineno=354, col_offset=12, end_lineno=354, end_col_offset=19), attr='append', ctx=Load(), lineno=354, col_offset=12, end_lineno=354, end_col_offset=26), args=[Name(id='commit_dict', ctx=Load(), lineno=354, col_offset=27, end_lineno=354, end_col_offset=38)], lineno=354, col_offset=12, end_lineno=354, end_col_offset=39), lineno=354, col_offset=12, end_lineno=354, end_col_offset=39)], lineno=345, col_offset=8, end_lineno=354, end_col_offset=39), Expr(value=Call(func=Attribute(value=Name(id='LOGGER', ctx=Load(), lineno=356, col_offset=8, end_lineno=356, end_col_offset=14), attr='debug', ctx=Load(), lineno=356, col_offset=8, end_lineno=356, end_col_offset=20), args=[Constant(value='Git history completed', lineno=357, col_offset=12, end_lineno=357, end_col_offset=35)], keywords=[keyword(arg='extra', value=Dict(keys=[Constant(value='path', lineno=358, col_offset=19, end_lineno=358, end_col_offset=25), Constant(value='limit', lineno=358, col_offset=33, end_lineno=358, end_col_offset=40), Constant(value='commits_count', lineno=358, col_offset=49, end_lineno=358, end_col_offset=64)], values=[Name(id='path', ctx=Load(), lineno=358, col_offset=27, end_lineno=358, end_col_offset=31), Name(id='limit', ctx=Load(), lineno=358, col_offset=42, end_lineno=358, end_col_offset=47), Call(func=Name(id='len', ctx=Load(), lineno=358, col_offset=66, end_lineno=358, end_col_offset=69), args=[Name(id='commits', ctx=Load(), lineno=358, col_offset=70, end_lineno=358, end_col_offset=77)], lineno=358, col_offset=66, end_lineno=358, end_col_offset=78)], lineno=358, col_offset=18, end_lineno=358, end_col_offset=79), lineno=358, col_offset=12, end_lineno=358, end_col_offset=79)], lineno=356, col_offset=8, end_lineno=359, end_col_offset=9), lineno=356, col_offset=8, end_lineno=359, end_col_offset=9), Return(value=Name(id='commits', ctx=Load(), lineno=361, col_offset=15, end_lineno=361, end_col_offset=22), lineno=361, col_offset=8, end_lineno=361, end_col_offset=22)], returns=Subscript(value=Name(id='list', ctx=Load(), lineno=263, col_offset=58, end_lineno=263, end_col_offset=62), slice=Name(id='dict', ctx=Load(), lineno=263, col_offset=63, end_lineno=263, end_col_offset=67), ctx=Load(), lineno=263, col_offset=58, end_lineno=263, end_col_offset=68), lineno=263, col_offset=4, end_lineno=361, end_col_offset=22)], decorator_list=[Call(func=Name(id='dataclass', ctx=Load(), lineno=58, col_offset=1, end_lineno=58, end_col_offset=10), keywords=[keyword(arg='slots', value=Constant(value=True, lineno=58, col_offset=17, end_lineno=58, end_col_offset=21), lineno=58, col_offset=11, end_lineno=58, end_col_offset=21), keyword(arg='frozen', value=Constant(value=True, lineno=58, col_offset=30, end_lineno=58, end_col_offset=34), lineno=58, col_offset=23, end_lineno=58, end_col_offset=34)], lineno=58, col_offset=1, end_lineno=58, end_col_offset=35)], lineno=59, col_offset=0, end_lineno=361, end_col_offset=22), ClassDef(name='AsyncGitClient', body=[Expr(value=Constant(value='Async wrapper around GitClient using asyncio.to_thread.\n\n    Provides async versions of GitClient methods by running them in a threadpool.\n    This prevents event loop blocking when Git operations are called from async\n    code (e.g., FastAPI request handlers).\n\n    GitPython is synchronous (uses subprocess internally), so running it in a\n    threadpool is the recommended approach for async compatibility without\n    rewriting GitPython internals.\n\n    Parameters\n    ----------\n    git_client : GitClient\n        Synchronous GitClient instance to wrap.\n\n    Examples\n    --------\n    Create async client:\n\n    >>> from pathlib import Path\n    >>> sync_client = GitClient(repo_path=Path("."))\n    >>> async_client = AsyncGitClient(sync_client)\n\n    Use in async context:\n\n    >>> async def get_blame():\n    ...     entries = await async_client.blame_range("README.md", 1, 10)\n    ...     return entries\n\n    Notes\n    -----\n    The asyncio.to_thread function runs the sync operation in a separate thread\n    from the threadpool. This allows the event loop to handle other requests\n    while waiting for Git operations.\n\n    For applications with heavy Git usage, consider increasing the threadpool\n    size via asyncio ThreadPoolExecutor settings.\n    ', lineno=365, col_offset=4, end_lineno=402, end_col_offset=7), lineno=365, col_offset=4, end_lineno=402, end_col_offset=7), FunctionDef(name='__init__', args=arguments(args=[arg(arg='self', lineno=404, col_offset=17, end_lineno=404, end_col_offset=21), arg(arg='git_client', annotation=Name(id='GitClient', ctx=Load(), lineno=404, col_offset=35, end_lineno=404, end_col_offset=44), lineno=404, col_offset=23, end_lineno=404, end_col_offset=44)]), body=[Assign(targets=[Attribute(value=Name(id='self', ctx=Load(), lineno=405, col_offset=8, end_lineno=405, end_col_offset=12), attr='_sync_client', ctx=Store(), lineno=405, col_offset=8, end_lineno=405, end_col_offset=25)], value=Name(id='git_client', ctx=Load(), lineno=405, col_offset=28, end_lineno=405, end_col_offset=38), lineno=405, col_offset=8, end_lineno=405, end_col_offset=38)], returns=Constant(value=None, lineno=404, col_offset=49, end_lineno=404, end_col_offset=53), lineno=404, col_offset=4, end_lineno=405, end_col_offset=38), AsyncFunctionDef(name='blame_range', args=arguments(args=[arg(arg='self', lineno=407, col_offset=26, end_lineno=407, end_col_offset=30), arg(arg='path', annotation=Name(id='str', ctx=Load(), lineno=407, col_offset=38, end_lineno=407, end_col_offset=41), lineno=407, col_offset=32, end_lineno=407, end_col_offset=41), arg(arg='start_line', annotation=Name(id='int', ctx=Load(), lineno=407, col_offset=55, end_lineno=407, end_col_offset=58), lineno=407, col_offset=43, end_lineno=407, end_col_offset=58), arg(arg='end_line', annotation=Name(id='int', ctx=Load(), lineno=407, col_offset=70, end_lineno=407, end_col_offset=73), lineno=407, col_offset=60, end_lineno=407, end_col_offset=73)]), body=[Expr(value=Constant(value='Async version of blame_range (runs in threadpool).\n\n        See GitClient.blame_range for detailed documentation.\n\n        Parameters\n        ----------\n        path : str\n            File path relative to repository root.\n        start_line : int\n            Start line number (1-indexed).\n        end_line : int\n            End line number (1-indexed).\n\n        Returns\n        -------\n        list[GitBlameEntry]\n            Blame entries for line range.\n\n        Raises\n        ------\n        FileNotFoundError\n            If file not found. Propagated from GitClient.blame_range.\n        git.exc.GitCommandError\n            If Git operation fails. Propagated from GitClient.blame_range.\n        ', lineno=408, col_offset=8, end_lineno=432, end_col_offset=11), lineno=408, col_offset=8, end_lineno=432, end_col_offset=11), Try(body=[Return(value=Await(value=Call(func=Attribute(value=Name(id='asyncio', ctx=Load(), lineno=434, col_offset=25, end_lineno=434, end_col_offset=32), attr='to_thread', ctx=Load(), lineno=434, col_offset=25, end_lineno=434, end_col_offset=42), args=[Attribute(value=Attribute(value=Name(id='self', ctx=Load(), lineno=435, col_offset=16, end_lineno=435, end_col_offset=20), attr='_sync_client', ctx=Load(), lineno=435, col_offset=16, end_lineno=435, end_col_offset=33), attr='blame_range', ctx=Load(), lineno=435, col_offset=16, end_lineno=435, end_col_offset=45), Name(id='path', ctx=Load(), lineno=435, col_offset=47, end_lineno=435, end_col_offset=51), Name(id='start_line', ctx=Load(), lineno=435, col_offset=53, end_lineno=435, end_col_offset=63), Name(id='end_line', ctx=Load(), lineno=435, col_offset=65, end_lineno=435, end_col_offset=73)], lineno=434, col_offset=25, end_lineno=436, end_col_offset=13), lineno=434, col_offset=19, end_lineno=436, end_col_offset=13), lineno=434, col_offset=12, end_lineno=436, end_col_offset=13)], handlers=[ExceptHandler(type=Tuple(elts=[Name(id='FileNotFoundError', ctx=Load(), lineno=437, col_offset=16, end_lineno=437, end_col_offset=33), Attribute(value=Attribute(value=Name(id='git', ctx=Load(), lineno=437, col_offset=35, end_lineno=437, end_col_offset=38), attr='exc', ctx=Load(), lineno=437, col_offset=35, end_lineno=437, end_col_offset=42), attr='GitCommandError', ctx=Load(), lineno=437, col_offset=35, end_lineno=437, end_col_offset=58)], ctx=Load(), lineno=437, col_offset=15, end_lineno=437, end_col_offset=59), body=[Raise(lineno=438, col_offset=12, end_lineno=438, end_col_offset=17)], lineno=437, col_offset=8, end_lineno=438, end_col_offset=17)], lineno=433, col_offset=8, end_lineno=438, end_col_offset=17)], returns=Subscript(value=Name(id='list', ctx=Load(), lineno=407, col_offset=78, end_lineno=407, end_col_offset=82), slice=Name(id='GitBlameEntry', ctx=Load(), lineno=407, col_offset=83, end_lineno=407, end_col_offset=96), ctx=Load(), lineno=407, col_offset=78, end_lineno=407, end_col_offset=97), lineno=407, col_offset=4, end_lineno=438, end_col_offset=17), AsyncFunctionDef(name='file_history', args=arguments(args=[arg(arg='self', lineno=440, col_offset=27, end_lineno=440, end_col_offset=31), arg(arg='path', annotation=Name(id='str', ctx=Load(), lineno=440, col_offset=39, end_lineno=440, end_col_offset=42), lineno=440, col_offset=33, end_lineno=440, end_col_offset=42), arg(arg='limit', annotation=Name(id='int', ctx=Load(), lineno=440, col_offset=51, end_lineno=440, end_col_offset=54), lineno=440, col_offset=44, end_lineno=440, end_col_offset=54)], defaults=[Constant(value=50, lineno=440, col_offset=57, end_lineno=440, end_col_offset=59)]), body=[Expr(value=Constant(value='Async version of file_history (runs in threadpool).\n\n        See GitClient.file_history for detailed documentation.\n\n        Parameters\n        ----------\n        path : str\n            File path relative to repository root.\n        limit : int\n            Maximum number of commits to return.\n\n        Returns\n        -------\n        list[dict]\n            Commit history entries.\n\n        Raises\n        ------\n        FileNotFoundError\n            If file not found. Propagated from GitClient.file_history.\n        git.exc.GitCommandError\n            If Git operation fails. Propagated from GitClient.file_history.\n        ', lineno=441, col_offset=8, end_lineno=463, end_col_offset=11), lineno=441, col_offset=8, end_lineno=463, end_col_offset=11), Try(body=[Return(value=Await(value=Call(func=Attribute(value=Name(id='asyncio', ctx=Load(), lineno=465, col_offset=25, end_lineno=465, end_col_offset=32), attr='to_thread', ctx=Load(), lineno=465, col_offset=25, end_lineno=465, end_col_offset=42), args=[Attribute(value=Attribute(value=Name(id='self', ctx=Load(), lineno=465, col_offset=43, end_lineno=465, end_col_offset=47), attr='_sync_client', ctx=Load(), lineno=465, col_offset=43, end_lineno=465, end_col_offset=60), attr='file_history', ctx=Load(), lineno=465, col_offset=43, end_lineno=465, end_col_offset=73), Name(id='path', ctx=Load(), lineno=465, col_offset=75, end_lineno=465, end_col_offset=79), Name(id='limit', ctx=Load(), lineno=465, col_offset=81, end_lineno=465, end_col_offset=86)], lineno=465, col_offset=25, end_lineno=465, end_col_offset=87), lineno=465, col_offset=19, end_lineno=465, end_col_offset=87), lineno=465, col_offset=12, end_lineno=465, end_col_offset=87)], handlers=[ExceptHandler(type=Tuple(elts=[Name(id='FileNotFoundError', ctx=Load(), lineno=466, col_offset=16, end_lineno=466, end_col_offset=33), Attribute(value=Attribute(value=Name(id='git', ctx=Load(), lineno=466, col_offset=35, end_lineno=466, end_col_offset=38), attr='exc', ctx=Load(), lineno=466, col_offset=35, end_lineno=466, end_col_offset=42), attr='GitCommandError', ctx=Load(), lineno=466, col_offset=35, end_lineno=466, end_col_offset=58)], ctx=Load(), lineno=466, col_offset=15, end_lineno=466, end_col_offset=59), body=[Raise(lineno=467, col_offset=12, end_lineno=467, end_col_offset=17)], lineno=466, col_offset=8, end_lineno=467, end_col_offset=17)], lineno=464, col_offset=8, end_lineno=467, end_col_offset=17)], returns=Subscript(value=Name(id='list', ctx=Load(), lineno=440, col_offset=64, end_lineno=440, end_col_offset=68), slice=Name(id='dict', ctx=Load(), lineno=440, col_offset=69, end_lineno=440, end_col_offset=73), ctx=Load(), lineno=440, col_offset=64, end_lineno=440, end_col_offset=74), lineno=440, col_offset=4, end_lineno=467, end_col_offset=17)], lineno=364, col_offset=0, end_lineno=467, end_col_offset=17), Assign(targets=[Name(id='__all__', ctx=Store(), lineno=470, col_offset=0, end_lineno=470, end_col_offset=7)], value=List(elts=[Constant(value='AsyncGitClient', lineno=470, col_offset=11, end_lineno=470, end_col_offset=27), Constant(value='GitClient', lineno=470, col_offset=29, end_lineno=470, end_col_offset=40)], ctx=Load(), lineno=470, col_offset=10, end_lineno=470, end_col_offset=41), lineno=470, col_offset=0, end_lineno=470, end_col_offset=41)])